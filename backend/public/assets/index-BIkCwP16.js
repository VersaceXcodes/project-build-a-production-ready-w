var J2=e=>{throw TypeError(e)};var gf=(e,t,n)=>t.has(e)||J2("Cannot "+n);var Z=(e,t,n)=>(gf(e,t,"read from private field"),n?n.call(e):t.get(e)),we=(e,t,n)=>t.has(e)?J2("Cannot add the same private member more than once"):t instanceof WeakSet?t.add(e):t.set(e,n),xe=(e,t,n,s)=>(gf(e,t,"write to private field"),s?s.call(e,n):t.set(e,n),n),Ee=(e,t,n)=>(gf(e,t,"access private method"),n);var Ru=(e,t,n,s)=>({set _(a){xe(e,t,a,n)},get _(){return Z(e,t,s)}});function rO(e,t){for(var n=0;n<t.length;n++){const s=t[n];if(typeof s!="string"&&!Array.isArray(s)){for(const a in s)if(a!=="default"&&!(a in e)){const i=Object.getOwnPropertyDescriptor(s,a);i&&Object.defineProperty(e,a,i.get?i:{enumerable:!0,get:()=>s[a]})}}}return Object.freeze(Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}))}(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))s(a);new MutationObserver(a=>{for(const i of a)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&s(o)}).observe(document,{childList:!0,subtree:!0});function n(a){const i={};return a.integrity&&(i.integrity=a.integrity),a.referrerPolicy&&(i.referrerPolicy=a.referrerPolicy),a.crossOrigin==="use-credentials"?i.credentials="include":a.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function s(a){if(a.ep)return;a.ep=!0;const i=n(a);fetch(a.href,i)}})();var Iu=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function Ke(e){return e&&e.__esModule&&Object.prototype.hasOwnProperty.call(e,"default")?e.default:e}var x3={exports:{}},R0={},g3={exports:{}},Be={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var uu=Symbol.for("react.element"),nO=Symbol.for("react.portal"),sO=Symbol.for("react.fragment"),aO=Symbol.for("react.strict_mode"),iO=Symbol.for("react.profiler"),oO=Symbol.for("react.provider"),lO=Symbol.for("react.context"),cO=Symbol.for("react.forward_ref"),dO=Symbol.for("react.suspense"),uO=Symbol.for("react.memo"),mO=Symbol.for("react.lazy"),Z2=Symbol.iterator;function hO(e){return e===null||typeof e!="object"?null:(e=Z2&&e[Z2]||e["@@iterator"],typeof e=="function"?e:null)}var y3={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},b3=Object.assign,v3={};function wl(e,t,n){this.props=e,this.context=t,this.refs=v3,this.updater=n||y3}wl.prototype.isReactComponent={};wl.prototype.setState=function(e,t){if(typeof e!="object"&&typeof e!="function"&&e!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,e,t,"setState")};wl.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")};function j3(){}j3.prototype=wl.prototype;function nv(e,t,n){this.props=e,this.context=t,this.refs=v3,this.updater=n||y3}var sv=nv.prototype=new j3;sv.constructor=nv;b3(sv,wl.prototype);sv.isPureReactComponent=!0;var ej=Array.isArray,w3=Object.prototype.hasOwnProperty,av={current:null},N3={key:!0,ref:!0,__self:!0,__source:!0};function _3(e,t,n){var s,a={},i=null,o=null;if(t!=null)for(s in t.ref!==void 0&&(o=t.ref),t.key!==void 0&&(i=""+t.key),t)w3.call(t,s)&&!N3.hasOwnProperty(s)&&(a[s]=t[s]);var l=arguments.length-2;if(l===1)a.children=n;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];a.children=c}if(e&&e.defaultProps)for(s in l=e.defaultProps,l)a[s]===void 0&&(a[s]=l[s]);return{$$typeof:uu,type:e,key:i,ref:o,props:a,_owner:av.current}}function pO(e,t){return{$$typeof:uu,type:e.type,key:t,ref:e.ref,props:e.props,_owner:e._owner}}function iv(e){return typeof e=="object"&&e!==null&&e.$$typeof===uu}function fO(e){var t={"=":"=0",":":"=2"};return"$"+e.replace(/[=:]/g,function(n){return t[n]})}var tj=/\/+/g;function yf(e,t){return typeof e=="object"&&e!==null&&e.key!=null?fO(""+e.key):t.toString(36)}function km(e,t,n,s,a){var i=typeof e;(i==="undefined"||i==="boolean")&&(e=null);var o=!1;if(e===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(e.$$typeof){case uu:case nO:o=!0}}if(o)return o=e,a=a(o),e=s===""?"."+yf(o,0):s,ej(a)?(n="",e!=null&&(n=e.replace(tj,"$&/")+"/"),km(a,t,n,"",function(d){return d})):a!=null&&(iv(a)&&(a=pO(a,n+(!a.key||o&&o.key===a.key?"":(""+a.key).replace(tj,"$&/")+"/")+e)),t.push(a)),1;if(o=0,s=s===""?".":s+":",ej(e))for(var l=0;l<e.length;l++){i=e[l];var c=s+yf(i,l);o+=km(i,t,n,c,a)}else if(c=hO(e),typeof c=="function")for(e=c.call(e),l=0;!(i=e.next()).done;)i=i.value,c=s+yf(i,l++),o+=km(i,t,n,c,a);else if(i==="object")throw t=String(e),Error("Objects are not valid as a React child (found: "+(t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t)+"). If you meant to render a collection of children, use an array instead.");return o}function Du(e,t,n){if(e==null)return e;var s=[],a=0;return km(e,s,"","",function(i){return t.call(n,i,a++)}),s}function xO(e){if(e._status===-1){var t=e._result;t=t(),t.then(function(n){(e._status===0||e._status===-1)&&(e._status=1,e._result=n)},function(n){(e._status===0||e._status===-1)&&(e._status=2,e._result=n)}),e._status===-1&&(e._status=0,e._result=t)}if(e._status===1)return e._result.default;throw e._result}var hr={current:null},Sm={transition:null},gO={ReactCurrentDispatcher:hr,ReactCurrentBatchConfig:Sm,ReactCurrentOwner:av};function k3(){throw Error("act(...) is not supported in production builds of React.")}Be.Children={map:Du,forEach:function(e,t,n){Du(e,function(){t.apply(this,arguments)},n)},count:function(e){var t=0;return Du(e,function(){t++}),t},toArray:function(e){return Du(e,function(t){return t})||[]},only:function(e){if(!iv(e))throw Error("React.Children.only expected to receive a single React element child.");return e}};Be.Component=wl;Be.Fragment=sO;Be.Profiler=iO;Be.PureComponent=nv;Be.StrictMode=aO;Be.Suspense=dO;Be.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=gO;Be.act=k3;Be.cloneElement=function(e,t,n){if(e==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+e+".");var s=b3({},e.props),a=e.key,i=e.ref,o=e._owner;if(t!=null){if(t.ref!==void 0&&(i=t.ref,o=av.current),t.key!==void 0&&(a=""+t.key),e.type&&e.type.defaultProps)var l=e.type.defaultProps;for(c in t)w3.call(t,c)&&!N3.hasOwnProperty(c)&&(s[c]=t[c]===void 0&&l!==void 0?l[c]:t[c])}var c=arguments.length-2;if(c===1)s.children=n;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];s.children=l}return{$$typeof:uu,type:e.type,key:a,ref:i,props:s,_owner:o}};Be.createContext=function(e){return e={$$typeof:lO,_currentValue:e,_currentValue2:e,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},e.Provider={$$typeof:oO,_context:e},e.Consumer=e};Be.createElement=_3;Be.createFactory=function(e){var t=_3.bind(null,e);return t.type=e,t};Be.createRef=function(){return{current:null}};Be.forwardRef=function(e){return{$$typeof:cO,render:e}};Be.isValidElement=iv;Be.lazy=function(e){return{$$typeof:mO,_payload:{_status:-1,_result:e},_init:xO}};Be.memo=function(e,t){return{$$typeof:uO,type:e,compare:t===void 0?null:t}};Be.startTransition=function(e){var t=Sm.transition;Sm.transition={};try{e()}finally{Sm.transition=t}};Be.unstable_act=k3;Be.useCallback=function(e,t){return hr.current.useCallback(e,t)};Be.useContext=function(e){return hr.current.useContext(e)};Be.useDebugValue=function(){};Be.useDeferredValue=function(e){return hr.current.useDeferredValue(e)};Be.useEffect=function(e,t){return hr.current.useEffect(e,t)};Be.useId=function(){return hr.current.useId()};Be.useImperativeHandle=function(e,t,n){return hr.current.useImperativeHandle(e,t,n)};Be.useInsertionEffect=function(e,t){return hr.current.useInsertionEffect(e,t)};Be.useLayoutEffect=function(e,t){return hr.current.useLayoutEffect(e,t)};Be.useMemo=function(e,t){return hr.current.useMemo(e,t)};Be.useReducer=function(e,t,n){return hr.current.useReducer(e,t,n)};Be.useRef=function(e){return hr.current.useRef(e)};Be.useState=function(e){return hr.current.useState(e)};Be.useSyncExternalStore=function(e,t,n){return hr.current.useSyncExternalStore(e,t,n)};Be.useTransition=function(){return hr.current.useTransition()};Be.version="18.3.1";g3.exports=Be;var k=g3.exports;const Y=Ke(k),yO=rO({__proto__:null,default:Y},[k]);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var bO=k,vO=Symbol.for("react.element"),jO=Symbol.for("react.fragment"),wO=Object.prototype.hasOwnProperty,NO=bO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,_O={key:!0,ref:!0,__self:!0,__source:!0};function S3(e,t,n){var s,a={},i=null,o=null;n!==void 0&&(i=""+n),t.key!==void 0&&(i=""+t.key),t.ref!==void 0&&(o=t.ref);for(s in t)wO.call(t,s)&&!_O.hasOwnProperty(s)&&(a[s]=t[s]);if(e&&e.defaultProps)for(s in t=e.defaultProps,t)a[s]===void 0&&(a[s]=t[s]);return{$$typeof:vO,type:e,key:i,ref:o,props:a,_owner:NO.current}}R0.Fragment=jO;R0.jsx=S3;R0.jsxs=S3;x3.exports=R0;var r=x3.exports,C3={exports:{}},Vr={},A3={exports:{}},P3={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(e){function t(D,W){var P=D.length;D.push(W);e:for(;0<P;){var V=P-1>>>1,K=D[V];if(0<a(K,W))D[V]=W,D[P]=K,P=V;else break e}}function n(D){return D.length===0?null:D[0]}function s(D){if(D.length===0)return null;var W=D[0],P=D.pop();if(P!==W){D[0]=P;e:for(var V=0,K=D.length,ne=K>>>1;V<ne;){var G=2*(V+1)-1,oe=D[G],H=G+1,ee=D[H];if(0>a(oe,P))H<K&&0>a(ee,oe)?(D[V]=ee,D[H]=P,V=H):(D[V]=oe,D[G]=P,V=G);else if(H<K&&0>a(ee,P))D[V]=ee,D[H]=P,V=H;else break e}}return W}function a(D,W){var P=D.sortIndex-W.sortIndex;return P!==0?P:D.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;e.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();e.unstable_now=function(){return o.now()-l}}var c=[],d=[],m=1,u=null,h=3,f=!1,b=!1,g=!1,x=typeof setTimeout=="function"?setTimeout:null,p=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function v(D){for(var W=n(d);W!==null;){if(W.callback===null)s(d);else if(W.startTime<=D)s(d),W.sortIndex=W.expirationTime,t(c,W);else break;W=n(d)}}function N(D){if(g=!1,v(D),!b)if(n(c)!==null)b=!0,F(w);else{var W=n(d);W!==null&&M(N,W.startTime-D)}}function w(D,W){b=!1,g&&(g=!1,p(S),S=-1),f=!0;var P=h;try{for(v(W),u=n(c);u!==null&&(!(u.expirationTime>W)||D&&!E());){var V=u.callback;if(typeof V=="function"){u.callback=null,h=u.priorityLevel;var K=V(u.expirationTime<=W);W=e.unstable_now(),typeof K=="function"?u.callback=K:u===n(c)&&s(c),v(W)}else s(c);u=n(c)}if(u!==null)var ne=!0;else{var G=n(d);G!==null&&M(N,G.startTime-W),ne=!1}return ne}finally{u=null,h=P,f=!1}}var j=!1,_=null,S=-1,T=5,A=-1;function E(){return!(e.unstable_now()-A<T)}function R(){if(_!==null){var D=e.unstable_now();A=D;var W=!0;try{W=_(!0,D)}finally{W?I():(j=!1,_=null)}}else j=!1}var I;if(typeof y=="function")I=function(){y(R)};else if(typeof MessageChannel<"u"){var O=new MessageChannel,L=O.port2;O.port1.onmessage=R,I=function(){L.postMessage(null)}}else I=function(){x(R,0)};function F(D){_=D,j||(j=!0,I())}function M(D,W){S=x(function(){D(e.unstable_now())},W)}e.unstable_IdlePriority=5,e.unstable_ImmediatePriority=1,e.unstable_LowPriority=4,e.unstable_NormalPriority=3,e.unstable_Profiling=null,e.unstable_UserBlockingPriority=2,e.unstable_cancelCallback=function(D){D.callback=null},e.unstable_continueExecution=function(){b||f||(b=!0,F(w))},e.unstable_forceFrameRate=function(D){0>D||125<D?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):T=0<D?Math.floor(1e3/D):5},e.unstable_getCurrentPriorityLevel=function(){return h},e.unstable_getFirstCallbackNode=function(){return n(c)},e.unstable_next=function(D){switch(h){case 1:case 2:case 3:var W=3;break;default:W=h}var P=h;h=W;try{return D()}finally{h=P}},e.unstable_pauseExecution=function(){},e.unstable_requestPaint=function(){},e.unstable_runWithPriority=function(D,W){switch(D){case 1:case 2:case 3:case 4:case 5:break;default:D=3}var P=h;h=D;try{return W()}finally{h=P}},e.unstable_scheduleCallback=function(D,W,P){var V=e.unstable_now();switch(typeof P=="object"&&P!==null?(P=P.delay,P=typeof P=="number"&&0<P?V+P:V):P=V,D){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=P+K,D={id:m++,callback:W,priorityLevel:D,startTime:P,expirationTime:K,sortIndex:-1},P>V?(D.sortIndex=P,t(d,D),n(c)===null&&D===n(d)&&(g?(p(S),S=-1):g=!0,M(N,P-V))):(D.sortIndex=K,t(c,D),b||f||(b=!0,F(w))),D},e.unstable_shouldYield=E,e.unstable_wrapCallback=function(D){var W=h;return function(){var P=h;h=W;try{return D.apply(this,arguments)}finally{h=P}}}})(P3);A3.exports=P3;var kO=A3.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var SO=k,Wr=kO;function fe(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,n=1;n<arguments.length;n++)t+="&args[]="+encodeURIComponent(arguments[n]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var E3=new Set,Kc={};function Oi(e,t){Io(e,t),Io(e+"Capture",t)}function Io(e,t){for(Kc[e]=t,e=0;e<t.length;e++)E3.add(t[e])}var gs=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Wx=Object.prototype.hasOwnProperty,CO=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,rj={},nj={};function AO(e){return Wx.call(nj,e)?!0:Wx.call(rj,e)?!1:CO.test(e)?nj[e]=!0:(rj[e]=!0,!1)}function PO(e,t,n,s){if(n!==null&&n.type===0)return!1;switch(typeof t){case"function":case"symbol":return!0;case"boolean":return s?!1:n!==null?!n.acceptsBooleans:(e=e.toLowerCase().slice(0,5),e!=="data-"&&e!=="aria-");default:return!1}}function EO(e,t,n,s){if(t===null||typeof t>"u"||PO(e,t,n,s))return!0;if(s)return!1;if(n!==null)switch(n.type){case 3:return!t;case 4:return t===!1;case 5:return isNaN(t);case 6:return isNaN(t)||1>t}return!1}function pr(e,t,n,s,a,i,o){this.acceptsBooleans=t===2||t===3||t===4,this.attributeName=s,this.attributeNamespace=a,this.mustUseProperty=n,this.propertyName=e,this.type=t,this.sanitizeURL=i,this.removeEmptyString=o}var Wt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(e){Wt[e]=new pr(e,0,!1,e,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(e){var t=e[0];Wt[t]=new pr(t,1,!1,e[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(e){Wt[e]=new pr(e,2,!1,e.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(e){Wt[e]=new pr(e,2,!1,e,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(e){Wt[e]=new pr(e,3,!1,e.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(e){Wt[e]=new pr(e,3,!0,e,null,!1,!1)});["capture","download"].forEach(function(e){Wt[e]=new pr(e,4,!1,e,null,!1,!1)});["cols","rows","size","span"].forEach(function(e){Wt[e]=new pr(e,6,!1,e,null,!1,!1)});["rowSpan","start"].forEach(function(e){Wt[e]=new pr(e,5,!1,e.toLowerCase(),null,!1,!1)});var ov=/[\-:]([a-z])/g;function lv(e){return e[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(e){var t=e.replace(ov,lv);Wt[t]=new pr(t,1,!1,e,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(e){var t=e.replace(ov,lv);Wt[t]=new pr(t,1,!1,e,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(e){var t=e.replace(ov,lv);Wt[t]=new pr(t,1,!1,e,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(e){Wt[e]=new pr(e,1,!1,e.toLowerCase(),null,!1,!1)});Wt.xlinkHref=new pr("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(e){Wt[e]=new pr(e,1,!1,e.toLowerCase(),null,!0,!0)});function cv(e,t,n,s){var a=Wt.hasOwnProperty(t)?Wt[t]:null;(a!==null?a.type!==0:s||!(2<t.length)||t[0]!=="o"&&t[0]!=="O"||t[1]!=="n"&&t[1]!=="N")&&(EO(t,n,a,s)&&(n=null),s||a===null?AO(t)&&(n===null?e.removeAttribute(t):e.setAttribute(t,""+n)):a.mustUseProperty?e[a.propertyName]=n===null?a.type===3?!1:"":n:(t=a.attributeName,s=a.attributeNamespace,n===null?e.removeAttribute(t):(a=a.type,n=a===3||a===4&&n===!0?"":""+n,s?e.setAttributeNS(s,t,n):e.setAttribute(t,n))))}var ks=SO.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Fu=Symbol.for("react.element"),Vi=Symbol.for("react.portal"),Hi=Symbol.for("react.fragment"),dv=Symbol.for("react.strict_mode"),Vx=Symbol.for("react.profiler"),O3=Symbol.for("react.provider"),T3=Symbol.for("react.context"),uv=Symbol.for("react.forward_ref"),Hx=Symbol.for("react.suspense"),Kx=Symbol.for("react.suspense_list"),mv=Symbol.for("react.memo"),$s=Symbol.for("react.lazy"),M3=Symbol.for("react.offscreen"),sj=Symbol.iterator;function Hl(e){return e===null||typeof e!="object"?null:(e=sj&&e[sj]||e["@@iterator"],typeof e=="function"?e:null)}var pt=Object.assign,bf;function jc(e){if(bf===void 0)try{throw Error()}catch(n){var t=n.stack.trim().match(/\n( *(at )?)/);bf=t&&t[1]||""}return`
`+bf+e}var vf=!1;function jf(e,t){if(!e||vf)return"";vf=!0;var n=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(t)if(t=function(){throw Error()},Object.defineProperty(t.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(t,[])}catch(d){var s=d}Reflect.construct(e,[],t)}else{try{t.call()}catch(d){s=d}e.call(t.prototype)}else{try{throw Error()}catch(d){s=d}e()}}catch(d){if(d&&s&&typeof d.stack=="string"){for(var a=d.stack.split(`
`),i=s.stack.split(`
`),o=a.length-1,l=i.length-1;1<=o&&0<=l&&a[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(a[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||a[o]!==i[l]){var c=`
`+a[o].replace(" at new "," at ");return e.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",e.displayName)),c}while(1<=o&&0<=l);break}}}finally{vf=!1,Error.prepareStackTrace=n}return(e=e?e.displayName||e.name:"")?jc(e):""}function OO(e){switch(e.tag){case 5:return jc(e.type);case 16:return jc("Lazy");case 13:return jc("Suspense");case 19:return jc("SuspenseList");case 0:case 2:case 15:return e=jf(e.type,!1),e;case 11:return e=jf(e.type.render,!1),e;case 1:return e=jf(e.type,!0),e;default:return""}}function Gx(e){if(e==null)return null;if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e;switch(e){case Hi:return"Fragment";case Vi:return"Portal";case Vx:return"Profiler";case dv:return"StrictMode";case Hx:return"Suspense";case Kx:return"SuspenseList"}if(typeof e=="object")switch(e.$$typeof){case T3:return(e.displayName||"Context")+".Consumer";case O3:return(e._context.displayName||"Context")+".Provider";case uv:var t=e.render;return e=e.displayName,e||(e=t.displayName||t.name||"",e=e!==""?"ForwardRef("+e+")":"ForwardRef"),e;case mv:return t=e.displayName||null,t!==null?t:Gx(e.type)||"Memo";case $s:t=e._payload,e=e._init;try{return Gx(e(t))}catch{}}return null}function TO(e){var t=e.type;switch(e.tag){case 24:return"Cache";case 9:return(t.displayName||"Context")+".Consumer";case 10:return(t._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return e=t.render,e=e.displayName||e.name||"",t.displayName||(e!==""?"ForwardRef("+e+")":"ForwardRef");case 7:return"Fragment";case 5:return t;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Gx(t);case 8:return t===dv?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t}return null}function ya(e){switch(typeof e){case"boolean":case"number":case"string":case"undefined":return e;case"object":return e;default:return""}}function L3(e){var t=e.type;return(e=e.nodeName)&&e.toLowerCase()==="input"&&(t==="checkbox"||t==="radio")}function MO(e){var t=L3(e)?"checked":"value",n=Object.getOwnPropertyDescriptor(e.constructor.prototype,t),s=""+e[t];if(!e.hasOwnProperty(t)&&typeof n<"u"&&typeof n.get=="function"&&typeof n.set=="function"){var a=n.get,i=n.set;return Object.defineProperty(e,t,{configurable:!0,get:function(){return a.call(this)},set:function(o){s=""+o,i.call(this,o)}}),Object.defineProperty(e,t,{enumerable:n.enumerable}),{getValue:function(){return s},setValue:function(o){s=""+o},stopTracking:function(){e._valueTracker=null,delete e[t]}}}}function Bu(e){e._valueTracker||(e._valueTracker=MO(e))}function $3(e){if(!e)return!1;var t=e._valueTracker;if(!t)return!0;var n=t.getValue(),s="";return e&&(s=L3(e)?e.checked?"true":"false":e.value),e=s,e!==n?(t.setValue(e),!0):!1}function Xm(e){if(e=e||(typeof document<"u"?document:void 0),typeof e>"u")return null;try{return e.activeElement||e.body}catch{return e.body}}function Qx(e,t){var n=t.checked;return pt({},t,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:n??e._wrapperState.initialChecked})}function aj(e,t){var n=t.defaultValue==null?"":t.defaultValue,s=t.checked!=null?t.checked:t.defaultChecked;n=ya(t.value!=null?t.value:n),e._wrapperState={initialChecked:s,initialValue:n,controlled:t.type==="checkbox"||t.type==="radio"?t.checked!=null:t.value!=null}}function R3(e,t){t=t.checked,t!=null&&cv(e,"checked",t,!1)}function Yx(e,t){R3(e,t);var n=ya(t.value),s=t.type;if(n!=null)s==="number"?(n===0&&e.value===""||e.value!=n)&&(e.value=""+n):e.value!==""+n&&(e.value=""+n);else if(s==="submit"||s==="reset"){e.removeAttribute("value");return}t.hasOwnProperty("value")?Xx(e,t.type,n):t.hasOwnProperty("defaultValue")&&Xx(e,t.type,ya(t.defaultValue)),t.checked==null&&t.defaultChecked!=null&&(e.defaultChecked=!!t.defaultChecked)}function ij(e,t,n){if(t.hasOwnProperty("value")||t.hasOwnProperty("defaultValue")){var s=t.type;if(!(s!=="submit"&&s!=="reset"||t.value!==void 0&&t.value!==null))return;t=""+e._wrapperState.initialValue,n||t===e.value||(e.value=t),e.defaultValue=t}n=e.name,n!==""&&(e.name=""),e.defaultChecked=!!e._wrapperState.initialChecked,n!==""&&(e.name=n)}function Xx(e,t,n){(t!=="number"||Xm(e.ownerDocument)!==e)&&(n==null?e.defaultValue=""+e._wrapperState.initialValue:e.defaultValue!==""+n&&(e.defaultValue=""+n))}var wc=Array.isArray;function co(e,t,n,s){if(e=e.options,t){t={};for(var a=0;a<n.length;a++)t["$"+n[a]]=!0;for(n=0;n<e.length;n++)a=t.hasOwnProperty("$"+e[n].value),e[n].selected!==a&&(e[n].selected=a),a&&s&&(e[n].defaultSelected=!0)}else{for(n=""+ya(n),t=null,a=0;a<e.length;a++){if(e[a].value===n){e[a].selected=!0,s&&(e[a].defaultSelected=!0);return}t!==null||e[a].disabled||(t=e[a])}t!==null&&(t.selected=!0)}}function Jx(e,t){if(t.dangerouslySetInnerHTML!=null)throw Error(fe(91));return pt({},t,{value:void 0,defaultValue:void 0,children:""+e._wrapperState.initialValue})}function oj(e,t){var n=t.value;if(n==null){if(n=t.children,t=t.defaultValue,n!=null){if(t!=null)throw Error(fe(92));if(wc(n)){if(1<n.length)throw Error(fe(93));n=n[0]}t=n}t==null&&(t=""),n=t}e._wrapperState={initialValue:ya(n)}}function I3(e,t){var n=ya(t.value),s=ya(t.defaultValue);n!=null&&(n=""+n,n!==e.value&&(e.value=n),t.defaultValue==null&&e.defaultValue!==n&&(e.defaultValue=n)),s!=null&&(e.defaultValue=""+s)}function lj(e){var t=e.textContent;t===e._wrapperState.initialValue&&t!==""&&t!==null&&(e.value=t)}function D3(e){switch(e){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Zx(e,t){return e==null||e==="http://www.w3.org/1999/xhtml"?D3(t):e==="http://www.w3.org/2000/svg"&&t==="foreignObject"?"http://www.w3.org/1999/xhtml":e}var zu,F3=function(e){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(t,n,s,a){MSApp.execUnsafeLocalFunction(function(){return e(t,n,s,a)})}:e}(function(e,t){if(e.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in e)e.innerHTML=t;else{for(zu=zu||document.createElement("div"),zu.innerHTML="<svg>"+t.valueOf().toString()+"</svg>",t=zu.firstChild;e.firstChild;)e.removeChild(e.firstChild);for(;t.firstChild;)e.appendChild(t.firstChild)}});function Gc(e,t){if(t){var n=e.firstChild;if(n&&n===e.lastChild&&n.nodeType===3){n.nodeValue=t;return}}e.textContent=t}var Pc={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},LO=["Webkit","ms","Moz","O"];Object.keys(Pc).forEach(function(e){LO.forEach(function(t){t=t+e.charAt(0).toUpperCase()+e.substring(1),Pc[t]=Pc[e]})});function B3(e,t,n){return t==null||typeof t=="boolean"||t===""?"":n||typeof t!="number"||t===0||Pc.hasOwnProperty(e)&&Pc[e]?(""+t).trim():t+"px"}function z3(e,t){e=e.style;for(var n in t)if(t.hasOwnProperty(n)){var s=n.indexOf("--")===0,a=B3(n,t[n],s);n==="float"&&(n="cssFloat"),s?e.setProperty(n,a):e[n]=a}}var $O=pt({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function eg(e,t){if(t){if($O[e]&&(t.children!=null||t.dangerouslySetInnerHTML!=null))throw Error(fe(137,e));if(t.dangerouslySetInnerHTML!=null){if(t.children!=null)throw Error(fe(60));if(typeof t.dangerouslySetInnerHTML!="object"||!("__html"in t.dangerouslySetInnerHTML))throw Error(fe(61))}if(t.style!=null&&typeof t.style!="object")throw Error(fe(62))}}function tg(e,t){if(e.indexOf("-")===-1)return typeof t.is=="string";switch(e){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var rg=null;function hv(e){return e=e.target||e.srcElement||window,e.correspondingUseElement&&(e=e.correspondingUseElement),e.nodeType===3?e.parentNode:e}var ng=null,uo=null,mo=null;function cj(e){if(e=pu(e)){if(typeof ng!="function")throw Error(fe(280));var t=e.stateNode;t&&(t=z0(t),ng(e.stateNode,e.type,t))}}function q3(e){uo?mo?mo.push(e):mo=[e]:uo=e}function U3(){if(uo){var e=uo,t=mo;if(mo=uo=null,cj(e),t)for(e=0;e<t.length;e++)cj(t[e])}}function W3(e,t){return e(t)}function V3(){}var wf=!1;function H3(e,t,n){if(wf)return e(t,n);wf=!0;try{return W3(e,t,n)}finally{wf=!1,(uo!==null||mo!==null)&&(V3(),U3())}}function Qc(e,t){var n=e.stateNode;if(n===null)return null;var s=z0(n);if(s===null)return null;n=s[t];e:switch(t){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(s=!s.disabled)||(e=e.type,s=!(e==="button"||e==="input"||e==="select"||e==="textarea")),e=!s;break e;default:e=!1}if(e)return null;if(n&&typeof n!="function")throw Error(fe(231,t,typeof n));return n}var sg=!1;if(gs)try{var Kl={};Object.defineProperty(Kl,"passive",{get:function(){sg=!0}}),window.addEventListener("test",Kl,Kl),window.removeEventListener("test",Kl,Kl)}catch{sg=!1}function RO(e,t,n,s,a,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{t.apply(n,d)}catch(m){this.onError(m)}}var Ec=!1,Jm=null,Zm=!1,ag=null,IO={onError:function(e){Ec=!0,Jm=e}};function DO(e,t,n,s,a,i,o,l,c){Ec=!1,Jm=null,RO.apply(IO,arguments)}function FO(e,t,n,s,a,i,o,l,c){if(DO.apply(this,arguments),Ec){if(Ec){var d=Jm;Ec=!1,Jm=null}else throw Error(fe(198));Zm||(Zm=!0,ag=d)}}function Ti(e){var t=e,n=e;if(e.alternate)for(;t.return;)t=t.return;else{e=t;do t=e,t.flags&4098&&(n=t.return),e=t.return;while(e)}return t.tag===3?n:null}function K3(e){if(e.tag===13){var t=e.memoizedState;if(t===null&&(e=e.alternate,e!==null&&(t=e.memoizedState)),t!==null)return t.dehydrated}return null}function dj(e){if(Ti(e)!==e)throw Error(fe(188))}function BO(e){var t=e.alternate;if(!t){if(t=Ti(e),t===null)throw Error(fe(188));return t!==e?null:e}for(var n=e,s=t;;){var a=n.return;if(a===null)break;var i=a.alternate;if(i===null){if(s=a.return,s!==null){n=s;continue}break}if(a.child===i.child){for(i=a.child;i;){if(i===n)return dj(a),e;if(i===s)return dj(a),t;i=i.sibling}throw Error(fe(188))}if(n.return!==s.return)n=a,s=i;else{for(var o=!1,l=a.child;l;){if(l===n){o=!0,n=a,s=i;break}if(l===s){o=!0,s=a,n=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===n){o=!0,n=i,s=a;break}if(l===s){o=!0,s=i,n=a;break}l=l.sibling}if(!o)throw Error(fe(189))}}if(n.alternate!==s)throw Error(fe(190))}if(n.tag!==3)throw Error(fe(188));return n.stateNode.current===n?e:t}function G3(e){return e=BO(e),e!==null?Q3(e):null}function Q3(e){if(e.tag===5||e.tag===6)return e;for(e=e.child;e!==null;){var t=Q3(e);if(t!==null)return t;e=e.sibling}return null}var Y3=Wr.unstable_scheduleCallback,uj=Wr.unstable_cancelCallback,zO=Wr.unstable_shouldYield,qO=Wr.unstable_requestPaint,bt=Wr.unstable_now,UO=Wr.unstable_getCurrentPriorityLevel,pv=Wr.unstable_ImmediatePriority,X3=Wr.unstable_UserBlockingPriority,eh=Wr.unstable_NormalPriority,WO=Wr.unstable_LowPriority,J3=Wr.unstable_IdlePriority,I0=null,Un=null;function VO(e){if(Un&&typeof Un.onCommitFiberRoot=="function")try{Un.onCommitFiberRoot(I0,e,void 0,(e.current.flags&128)===128)}catch{}}var An=Math.clz32?Math.clz32:GO,HO=Math.log,KO=Math.LN2;function GO(e){return e>>>=0,e===0?32:31-(HO(e)/KO|0)|0}var qu=64,Uu=4194304;function Nc(e){switch(e&-e){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return e&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return e}}function th(e,t){var n=e.pendingLanes;if(n===0)return 0;var s=0,a=e.suspendedLanes,i=e.pingedLanes,o=n&268435455;if(o!==0){var l=o&~a;l!==0?s=Nc(l):(i&=o,i!==0&&(s=Nc(i)))}else o=n&~a,o!==0?s=Nc(o):i!==0&&(s=Nc(i));if(s===0)return 0;if(t!==0&&t!==s&&!(t&a)&&(a=s&-s,i=t&-t,a>=i||a===16&&(i&4194240)!==0))return t;if(s&4&&(s|=n&16),t=e.entangledLanes,t!==0)for(e=e.entanglements,t&=s;0<t;)n=31-An(t),a=1<<n,s|=e[n],t&=~a;return s}function QO(e,t){switch(e){case 1:case 2:case 4:return t+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function YO(e,t){for(var n=e.suspendedLanes,s=e.pingedLanes,a=e.expirationTimes,i=e.pendingLanes;0<i;){var o=31-An(i),l=1<<o,c=a[o];c===-1?(!(l&n)||l&s)&&(a[o]=QO(l,t)):c<=t&&(e.expiredLanes|=l),i&=~l}}function ig(e){return e=e.pendingLanes&-1073741825,e!==0?e:e&1073741824?1073741824:0}function Z3(){var e=qu;return qu<<=1,!(qu&4194240)&&(qu=64),e}function Nf(e){for(var t=[],n=0;31>n;n++)t.push(e);return t}function mu(e,t,n){e.pendingLanes|=t,t!==536870912&&(e.suspendedLanes=0,e.pingedLanes=0),e=e.eventTimes,t=31-An(t),e[t]=n}function XO(e,t){var n=e.pendingLanes&~t;e.pendingLanes=t,e.suspendedLanes=0,e.pingedLanes=0,e.expiredLanes&=t,e.mutableReadLanes&=t,e.entangledLanes&=t,t=e.entanglements;var s=e.eventTimes;for(e=e.expirationTimes;0<n;){var a=31-An(n),i=1<<a;t[a]=0,s[a]=-1,e[a]=-1,n&=~i}}function fv(e,t){var n=e.entangledLanes|=t;for(e=e.entanglements;n;){var s=31-An(n),a=1<<s;a&t|e[s]&t&&(e[s]|=t),n&=~a}}var Qe=0;function e6(e){return e&=-e,1<e?4<e?e&268435455?16:536870912:4:1}var t6,xv,r6,n6,s6,og=!1,Wu=[],na=null,sa=null,aa=null,Yc=new Map,Xc=new Map,Fs=[],JO="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function mj(e,t){switch(e){case"focusin":case"focusout":na=null;break;case"dragenter":case"dragleave":sa=null;break;case"mouseover":case"mouseout":aa=null;break;case"pointerover":case"pointerout":Yc.delete(t.pointerId);break;case"gotpointercapture":case"lostpointercapture":Xc.delete(t.pointerId)}}function Gl(e,t,n,s,a,i){return e===null||e.nativeEvent!==i?(e={blockedOn:t,domEventName:n,eventSystemFlags:s,nativeEvent:i,targetContainers:[a]},t!==null&&(t=pu(t),t!==null&&xv(t)),e):(e.eventSystemFlags|=s,t=e.targetContainers,a!==null&&t.indexOf(a)===-1&&t.push(a),e)}function ZO(e,t,n,s,a){switch(t){case"focusin":return na=Gl(na,e,t,n,s,a),!0;case"dragenter":return sa=Gl(sa,e,t,n,s,a),!0;case"mouseover":return aa=Gl(aa,e,t,n,s,a),!0;case"pointerover":var i=a.pointerId;return Yc.set(i,Gl(Yc.get(i)||null,e,t,n,s,a)),!0;case"gotpointercapture":return i=a.pointerId,Xc.set(i,Gl(Xc.get(i)||null,e,t,n,s,a)),!0}return!1}function a6(e){var t=Ha(e.target);if(t!==null){var n=Ti(t);if(n!==null){if(t=n.tag,t===13){if(t=K3(n),t!==null){e.blockedOn=t,s6(e.priority,function(){r6(n)});return}}else if(t===3&&n.stateNode.current.memoizedState.isDehydrated){e.blockedOn=n.tag===3?n.stateNode.containerInfo:null;return}}}e.blockedOn=null}function Cm(e){if(e.blockedOn!==null)return!1;for(var t=e.targetContainers;0<t.length;){var n=lg(e.domEventName,e.eventSystemFlags,t[0],e.nativeEvent);if(n===null){n=e.nativeEvent;var s=new n.constructor(n.type,n);rg=s,n.target.dispatchEvent(s),rg=null}else return t=pu(n),t!==null&&xv(t),e.blockedOn=n,!1;t.shift()}return!0}function hj(e,t,n){Cm(e)&&n.delete(t)}function e9(){og=!1,na!==null&&Cm(na)&&(na=null),sa!==null&&Cm(sa)&&(sa=null),aa!==null&&Cm(aa)&&(aa=null),Yc.forEach(hj),Xc.forEach(hj)}function Ql(e,t){e.blockedOn===t&&(e.blockedOn=null,og||(og=!0,Wr.unstable_scheduleCallback(Wr.unstable_NormalPriority,e9)))}function Jc(e){function t(a){return Ql(a,e)}if(0<Wu.length){Ql(Wu[0],e);for(var n=1;n<Wu.length;n++){var s=Wu[n];s.blockedOn===e&&(s.blockedOn=null)}}for(na!==null&&Ql(na,e),sa!==null&&Ql(sa,e),aa!==null&&Ql(aa,e),Yc.forEach(t),Xc.forEach(t),n=0;n<Fs.length;n++)s=Fs[n],s.blockedOn===e&&(s.blockedOn=null);for(;0<Fs.length&&(n=Fs[0],n.blockedOn===null);)a6(n),n.blockedOn===null&&Fs.shift()}var ho=ks.ReactCurrentBatchConfig,rh=!0;function t9(e,t,n,s){var a=Qe,i=ho.transition;ho.transition=null;try{Qe=1,gv(e,t,n,s)}finally{Qe=a,ho.transition=i}}function r9(e,t,n,s){var a=Qe,i=ho.transition;ho.transition=null;try{Qe=4,gv(e,t,n,s)}finally{Qe=a,ho.transition=i}}function gv(e,t,n,s){if(rh){var a=lg(e,t,n,s);if(a===null)Mf(e,t,s,nh,n),mj(e,s);else if(ZO(a,e,t,n,s))s.stopPropagation();else if(mj(e,s),t&4&&-1<JO.indexOf(e)){for(;a!==null;){var i=pu(a);if(i!==null&&t6(i),i=lg(e,t,n,s),i===null&&Mf(e,t,s,nh,n),i===a)break;a=i}a!==null&&s.stopPropagation()}else Mf(e,t,s,null,n)}}var nh=null;function lg(e,t,n,s){if(nh=null,e=hv(s),e=Ha(e),e!==null)if(t=Ti(e),t===null)e=null;else if(n=t.tag,n===13){if(e=K3(t),e!==null)return e;e=null}else if(n===3){if(t.stateNode.current.memoizedState.isDehydrated)return t.tag===3?t.stateNode.containerInfo:null;e=null}else t!==e&&(e=null);return nh=e,null}function i6(e){switch(e){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(UO()){case pv:return 1;case X3:return 4;case eh:case WO:return 16;case J3:return 536870912;default:return 16}default:return 16}}var Zs=null,yv=null,Am=null;function o6(){if(Am)return Am;var e,t=yv,n=t.length,s,a="value"in Zs?Zs.value:Zs.textContent,i=a.length;for(e=0;e<n&&t[e]===a[e];e++);var o=n-e;for(s=1;s<=o&&t[n-s]===a[i-s];s++);return Am=a.slice(e,1<s?1-s:void 0)}function Pm(e){var t=e.keyCode;return"charCode"in e?(e=e.charCode,e===0&&t===13&&(e=13)):e=t,e===10&&(e=13),32<=e||e===13?e:0}function Vu(){return!0}function pj(){return!1}function Hr(e){function t(n,s,a,i,o){this._reactName=n,this._targetInst=a,this.type=s,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in e)e.hasOwnProperty(l)&&(n=e[l],this[l]=n?n(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?Vu:pj,this.isPropagationStopped=pj,this}return pt(t.prototype,{preventDefault:function(){this.defaultPrevented=!0;var n=this.nativeEvent;n&&(n.preventDefault?n.preventDefault():typeof n.returnValue!="unknown"&&(n.returnValue=!1),this.isDefaultPrevented=Vu)},stopPropagation:function(){var n=this.nativeEvent;n&&(n.stopPropagation?n.stopPropagation():typeof n.cancelBubble!="unknown"&&(n.cancelBubble=!0),this.isPropagationStopped=Vu)},persist:function(){},isPersistent:Vu}),t}var Nl={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(e){return e.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},bv=Hr(Nl),hu=pt({},Nl,{view:0,detail:0}),n9=Hr(hu),_f,kf,Yl,D0=pt({},hu,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:vv,button:0,buttons:0,relatedTarget:function(e){return e.relatedTarget===void 0?e.fromElement===e.srcElement?e.toElement:e.fromElement:e.relatedTarget},movementX:function(e){return"movementX"in e?e.movementX:(e!==Yl&&(Yl&&e.type==="mousemove"?(_f=e.screenX-Yl.screenX,kf=e.screenY-Yl.screenY):kf=_f=0,Yl=e),_f)},movementY:function(e){return"movementY"in e?e.movementY:kf}}),fj=Hr(D0),s9=pt({},D0,{dataTransfer:0}),a9=Hr(s9),i9=pt({},hu,{relatedTarget:0}),Sf=Hr(i9),o9=pt({},Nl,{animationName:0,elapsedTime:0,pseudoElement:0}),l9=Hr(o9),c9=pt({},Nl,{clipboardData:function(e){return"clipboardData"in e?e.clipboardData:window.clipboardData}}),d9=Hr(c9),u9=pt({},Nl,{data:0}),xj=Hr(u9),m9={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},h9={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},p9={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function f9(e){var t=this.nativeEvent;return t.getModifierState?t.getModifierState(e):(e=p9[e])?!!t[e]:!1}function vv(){return f9}var x9=pt({},hu,{key:function(e){if(e.key){var t=m9[e.key]||e.key;if(t!=="Unidentified")return t}return e.type==="keypress"?(e=Pm(e),e===13?"Enter":String.fromCharCode(e)):e.type==="keydown"||e.type==="keyup"?h9[e.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:vv,charCode:function(e){return e.type==="keypress"?Pm(e):0},keyCode:function(e){return e.type==="keydown"||e.type==="keyup"?e.keyCode:0},which:function(e){return e.type==="keypress"?Pm(e):e.type==="keydown"||e.type==="keyup"?e.keyCode:0}}),g9=Hr(x9),y9=pt({},D0,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),gj=Hr(y9),b9=pt({},hu,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:vv}),v9=Hr(b9),j9=pt({},Nl,{propertyName:0,elapsedTime:0,pseudoElement:0}),w9=Hr(j9),N9=pt({},D0,{deltaX:function(e){return"deltaX"in e?e.deltaX:"wheelDeltaX"in e?-e.wheelDeltaX:0},deltaY:function(e){return"deltaY"in e?e.deltaY:"wheelDeltaY"in e?-e.wheelDeltaY:"wheelDelta"in e?-e.wheelDelta:0},deltaZ:0,deltaMode:0}),_9=Hr(N9),k9=[9,13,27,32],jv=gs&&"CompositionEvent"in window,Oc=null;gs&&"documentMode"in document&&(Oc=document.documentMode);var S9=gs&&"TextEvent"in window&&!Oc,l6=gs&&(!jv||Oc&&8<Oc&&11>=Oc),yj=" ",bj=!1;function c6(e,t){switch(e){case"keyup":return k9.indexOf(t.keyCode)!==-1;case"keydown":return t.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function d6(e){return e=e.detail,typeof e=="object"&&"data"in e?e.data:null}var Ki=!1;function C9(e,t){switch(e){case"compositionend":return d6(t);case"keypress":return t.which!==32?null:(bj=!0,yj);case"textInput":return e=t.data,e===yj&&bj?null:e;default:return null}}function A9(e,t){if(Ki)return e==="compositionend"||!jv&&c6(e,t)?(e=o6(),Am=yv=Zs=null,Ki=!1,e):null;switch(e){case"paste":return null;case"keypress":if(!(t.ctrlKey||t.altKey||t.metaKey)||t.ctrlKey&&t.altKey){if(t.char&&1<t.char.length)return t.char;if(t.which)return String.fromCharCode(t.which)}return null;case"compositionend":return l6&&t.locale!=="ko"?null:t.data;default:return null}}var P9={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function vj(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t==="input"?!!P9[e.type]:t==="textarea"}function u6(e,t,n,s){q3(s),t=sh(t,"onChange"),0<t.length&&(n=new bv("onChange","change",null,n,s),e.push({event:n,listeners:t}))}var Tc=null,Zc=null;function E9(e){w6(e,0)}function F0(e){var t=Yi(e);if($3(t))return e}function O9(e,t){if(e==="change")return t}var m6=!1;if(gs){var Cf;if(gs){var Af="oninput"in document;if(!Af){var jj=document.createElement("div");jj.setAttribute("oninput","return;"),Af=typeof jj.oninput=="function"}Cf=Af}else Cf=!1;m6=Cf&&(!document.documentMode||9<document.documentMode)}function wj(){Tc&&(Tc.detachEvent("onpropertychange",h6),Zc=Tc=null)}function h6(e){if(e.propertyName==="value"&&F0(Zc)){var t=[];u6(t,Zc,e,hv(e)),H3(E9,t)}}function T9(e,t,n){e==="focusin"?(wj(),Tc=t,Zc=n,Tc.attachEvent("onpropertychange",h6)):e==="focusout"&&wj()}function M9(e){if(e==="selectionchange"||e==="keyup"||e==="keydown")return F0(Zc)}function L9(e,t){if(e==="click")return F0(t)}function $9(e,t){if(e==="input"||e==="change")return F0(t)}function R9(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var On=typeof Object.is=="function"?Object.is:R9;function ed(e,t){if(On(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;var n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(s=0;s<n.length;s++){var a=n[s];if(!Wx.call(t,a)||!On(e[a],t[a]))return!1}return!0}function Nj(e){for(;e&&e.firstChild;)e=e.firstChild;return e}function _j(e,t){var n=Nj(e);e=0;for(var s;n;){if(n.nodeType===3){if(s=e+n.textContent.length,e<=t&&s>=t)return{node:n,offset:t-e};e=s}e:{for(;n;){if(n.nextSibling){n=n.nextSibling;break e}n=n.parentNode}n=void 0}n=Nj(n)}}function p6(e,t){return e&&t?e===t?!0:e&&e.nodeType===3?!1:t&&t.nodeType===3?p6(e,t.parentNode):"contains"in e?e.contains(t):e.compareDocumentPosition?!!(e.compareDocumentPosition(t)&16):!1:!1}function f6(){for(var e=window,t=Xm();t instanceof e.HTMLIFrameElement;){try{var n=typeof t.contentWindow.location.href=="string"}catch{n=!1}if(n)e=t.contentWindow;else break;t=Xm(e.document)}return t}function wv(e){var t=e&&e.nodeName&&e.nodeName.toLowerCase();return t&&(t==="input"&&(e.type==="text"||e.type==="search"||e.type==="tel"||e.type==="url"||e.type==="password")||t==="textarea"||e.contentEditable==="true")}function I9(e){var t=f6(),n=e.focusedElem,s=e.selectionRange;if(t!==n&&n&&n.ownerDocument&&p6(n.ownerDocument.documentElement,n)){if(s!==null&&wv(n)){if(t=s.start,e=s.end,e===void 0&&(e=t),"selectionStart"in n)n.selectionStart=t,n.selectionEnd=Math.min(e,n.value.length);else if(e=(t=n.ownerDocument||document)&&t.defaultView||window,e.getSelection){e=e.getSelection();var a=n.textContent.length,i=Math.min(s.start,a);s=s.end===void 0?i:Math.min(s.end,a),!e.extend&&i>s&&(a=s,s=i,i=a),a=_j(n,i);var o=_j(n,s);a&&o&&(e.rangeCount!==1||e.anchorNode!==a.node||e.anchorOffset!==a.offset||e.focusNode!==o.node||e.focusOffset!==o.offset)&&(t=t.createRange(),t.setStart(a.node,a.offset),e.removeAllRanges(),i>s?(e.addRange(t),e.extend(o.node,o.offset)):(t.setEnd(o.node,o.offset),e.addRange(t)))}}for(t=[],e=n;e=e.parentNode;)e.nodeType===1&&t.push({element:e,left:e.scrollLeft,top:e.scrollTop});for(typeof n.focus=="function"&&n.focus(),n=0;n<t.length;n++)e=t[n],e.element.scrollLeft=e.left,e.element.scrollTop=e.top}}var D9=gs&&"documentMode"in document&&11>=document.documentMode,Gi=null,cg=null,Mc=null,dg=!1;function kj(e,t,n){var s=n.window===n?n.document:n.nodeType===9?n:n.ownerDocument;dg||Gi==null||Gi!==Xm(s)||(s=Gi,"selectionStart"in s&&wv(s)?s={start:s.selectionStart,end:s.selectionEnd}:(s=(s.ownerDocument&&s.ownerDocument.defaultView||window).getSelection(),s={anchorNode:s.anchorNode,anchorOffset:s.anchorOffset,focusNode:s.focusNode,focusOffset:s.focusOffset}),Mc&&ed(Mc,s)||(Mc=s,s=sh(cg,"onSelect"),0<s.length&&(t=new bv("onSelect","select",null,t,n),e.push({event:t,listeners:s}),t.target=Gi)))}function Hu(e,t){var n={};return n[e.toLowerCase()]=t.toLowerCase(),n["Webkit"+e]="webkit"+t,n["Moz"+e]="moz"+t,n}var Qi={animationend:Hu("Animation","AnimationEnd"),animationiteration:Hu("Animation","AnimationIteration"),animationstart:Hu("Animation","AnimationStart"),transitionend:Hu("Transition","TransitionEnd")},Pf={},x6={};gs&&(x6=document.createElement("div").style,"AnimationEvent"in window||(delete Qi.animationend.animation,delete Qi.animationiteration.animation,delete Qi.animationstart.animation),"TransitionEvent"in window||delete Qi.transitionend.transition);function B0(e){if(Pf[e])return Pf[e];if(!Qi[e])return e;var t=Qi[e],n;for(n in t)if(t.hasOwnProperty(n)&&n in x6)return Pf[e]=t[n];return e}var g6=B0("animationend"),y6=B0("animationiteration"),b6=B0("animationstart"),v6=B0("transitionend"),j6=new Map,Sj="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function wa(e,t){j6.set(e,t),Oi(t,[e])}for(var Ef=0;Ef<Sj.length;Ef++){var Of=Sj[Ef],F9=Of.toLowerCase(),B9=Of[0].toUpperCase()+Of.slice(1);wa(F9,"on"+B9)}wa(g6,"onAnimationEnd");wa(y6,"onAnimationIteration");wa(b6,"onAnimationStart");wa("dblclick","onDoubleClick");wa("focusin","onFocus");wa("focusout","onBlur");wa(v6,"onTransitionEnd");Io("onMouseEnter",["mouseout","mouseover"]);Io("onMouseLeave",["mouseout","mouseover"]);Io("onPointerEnter",["pointerout","pointerover"]);Io("onPointerLeave",["pointerout","pointerover"]);Oi("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Oi("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Oi("onBeforeInput",["compositionend","keypress","textInput","paste"]);Oi("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Oi("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var _c="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),z9=new Set("cancel close invalid load scroll toggle".split(" ").concat(_c));function Cj(e,t,n){var s=e.type||"unknown-event";e.currentTarget=n,FO(s,t,void 0,e),e.currentTarget=null}function w6(e,t){t=(t&4)!==0;for(var n=0;n<e.length;n++){var s=e[n],a=s.event;s=s.listeners;e:{var i=void 0;if(t)for(var o=s.length-1;0<=o;o--){var l=s[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&a.isPropagationStopped())break e;Cj(a,l,d),i=c}else for(o=0;o<s.length;o++){if(l=s[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&a.isPropagationStopped())break e;Cj(a,l,d),i=c}}}if(Zm)throw e=ag,Zm=!1,ag=null,e}function it(e,t){var n=t[fg];n===void 0&&(n=t[fg]=new Set);var s=e+"__bubble";n.has(s)||(N6(t,e,2,!1),n.add(s))}function Tf(e,t,n){var s=0;t&&(s|=4),N6(n,e,s,t)}var Ku="_reactListening"+Math.random().toString(36).slice(2);function td(e){if(!e[Ku]){e[Ku]=!0,E3.forEach(function(n){n!=="selectionchange"&&(z9.has(n)||Tf(n,!1,e),Tf(n,!0,e))});var t=e.nodeType===9?e:e.ownerDocument;t===null||t[Ku]||(t[Ku]=!0,Tf("selectionchange",!1,t))}}function N6(e,t,n,s){switch(i6(t)){case 1:var a=t9;break;case 4:a=r9;break;default:a=gv}n=a.bind(null,t,n,e),a=void 0,!sg||t!=="touchstart"&&t!=="touchmove"&&t!=="wheel"||(a=!0),s?a!==void 0?e.addEventListener(t,n,{capture:!0,passive:a}):e.addEventListener(t,n,!0):a!==void 0?e.addEventListener(t,n,{passive:a}):e.addEventListener(t,n,!1)}function Mf(e,t,n,s,a){var i=s;if(!(t&1)&&!(t&2)&&s!==null)e:for(;;){if(s===null)return;var o=s.tag;if(o===3||o===4){var l=s.stateNode.containerInfo;if(l===a||l.nodeType===8&&l.parentNode===a)break;if(o===4)for(o=s.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===a||c.nodeType===8&&c.parentNode===a))return;o=o.return}for(;l!==null;){if(o=Ha(l),o===null)return;if(c=o.tag,c===5||c===6){s=i=o;continue e}l=l.parentNode}}s=s.return}H3(function(){var d=i,m=hv(n),u=[];e:{var h=j6.get(e);if(h!==void 0){var f=bv,b=e;switch(e){case"keypress":if(Pm(n)===0)break e;case"keydown":case"keyup":f=g9;break;case"focusin":b="focus",f=Sf;break;case"focusout":b="blur",f=Sf;break;case"beforeblur":case"afterblur":f=Sf;break;case"click":if(n.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":f=fj;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":f=a9;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":f=v9;break;case g6:case y6:case b6:f=l9;break;case v6:f=w9;break;case"scroll":f=n9;break;case"wheel":f=_9;break;case"copy":case"cut":case"paste":f=d9;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":f=gj}var g=(t&4)!==0,x=!g&&e==="scroll",p=g?h!==null?h+"Capture":null:h;g=[];for(var y=d,v;y!==null;){v=y;var N=v.stateNode;if(v.tag===5&&N!==null&&(v=N,p!==null&&(N=Qc(y,p),N!=null&&g.push(rd(y,N,v)))),x)break;y=y.return}0<g.length&&(h=new f(h,b,null,n,m),u.push({event:h,listeners:g}))}}if(!(t&7)){e:{if(h=e==="mouseover"||e==="pointerover",f=e==="mouseout"||e==="pointerout",h&&n!==rg&&(b=n.relatedTarget||n.fromElement)&&(Ha(b)||b[ys]))break e;if((f||h)&&(h=m.window===m?m:(h=m.ownerDocument)?h.defaultView||h.parentWindow:window,f?(b=n.relatedTarget||n.toElement,f=d,b=b?Ha(b):null,b!==null&&(x=Ti(b),b!==x||b.tag!==5&&b.tag!==6)&&(b=null)):(f=null,b=d),f!==b)){if(g=fj,N="onMouseLeave",p="onMouseEnter",y="mouse",(e==="pointerout"||e==="pointerover")&&(g=gj,N="onPointerLeave",p="onPointerEnter",y="pointer"),x=f==null?h:Yi(f),v=b==null?h:Yi(b),h=new g(N,y+"leave",f,n,m),h.target=x,h.relatedTarget=v,N=null,Ha(m)===d&&(g=new g(p,y+"enter",b,n,m),g.target=v,g.relatedTarget=x,N=g),x=N,f&&b)t:{for(g=f,p=b,y=0,v=g;v;v=zi(v))y++;for(v=0,N=p;N;N=zi(N))v++;for(;0<y-v;)g=zi(g),y--;for(;0<v-y;)p=zi(p),v--;for(;y--;){if(g===p||p!==null&&g===p.alternate)break t;g=zi(g),p=zi(p)}g=null}else g=null;f!==null&&Aj(u,h,f,g,!1),b!==null&&x!==null&&Aj(u,x,b,g,!0)}}e:{if(h=d?Yi(d):window,f=h.nodeName&&h.nodeName.toLowerCase(),f==="select"||f==="input"&&h.type==="file")var w=O9;else if(vj(h))if(m6)w=$9;else{w=M9;var j=T9}else(f=h.nodeName)&&f.toLowerCase()==="input"&&(h.type==="checkbox"||h.type==="radio")&&(w=L9);if(w&&(w=w(e,d))){u6(u,w,n,m);break e}j&&j(e,h,d),e==="focusout"&&(j=h._wrapperState)&&j.controlled&&h.type==="number"&&Xx(h,"number",h.value)}switch(j=d?Yi(d):window,e){case"focusin":(vj(j)||j.contentEditable==="true")&&(Gi=j,cg=d,Mc=null);break;case"focusout":Mc=cg=Gi=null;break;case"mousedown":dg=!0;break;case"contextmenu":case"mouseup":case"dragend":dg=!1,kj(u,n,m);break;case"selectionchange":if(D9)break;case"keydown":case"keyup":kj(u,n,m)}var _;if(jv)e:{switch(e){case"compositionstart":var S="onCompositionStart";break e;case"compositionend":S="onCompositionEnd";break e;case"compositionupdate":S="onCompositionUpdate";break e}S=void 0}else Ki?c6(e,n)&&(S="onCompositionEnd"):e==="keydown"&&n.keyCode===229&&(S="onCompositionStart");S&&(l6&&n.locale!=="ko"&&(Ki||S!=="onCompositionStart"?S==="onCompositionEnd"&&Ki&&(_=o6()):(Zs=m,yv="value"in Zs?Zs.value:Zs.textContent,Ki=!0)),j=sh(d,S),0<j.length&&(S=new xj(S,e,null,n,m),u.push({event:S,listeners:j}),_?S.data=_:(_=d6(n),_!==null&&(S.data=_)))),(_=S9?C9(e,n):A9(e,n))&&(d=sh(d,"onBeforeInput"),0<d.length&&(m=new xj("onBeforeInput","beforeinput",null,n,m),u.push({event:m,listeners:d}),m.data=_))}w6(u,t)})}function rd(e,t,n){return{instance:e,listener:t,currentTarget:n}}function sh(e,t){for(var n=t+"Capture",s=[];e!==null;){var a=e,i=a.stateNode;a.tag===5&&i!==null&&(a=i,i=Qc(e,n),i!=null&&s.unshift(rd(e,i,a)),i=Qc(e,t),i!=null&&s.push(rd(e,i,a))),e=e.return}return s}function zi(e){if(e===null)return null;do e=e.return;while(e&&e.tag!==5);return e||null}function Aj(e,t,n,s,a){for(var i=t._reactName,o=[];n!==null&&n!==s;){var l=n,c=l.alternate,d=l.stateNode;if(c!==null&&c===s)break;l.tag===5&&d!==null&&(l=d,a?(c=Qc(n,i),c!=null&&o.unshift(rd(n,c,l))):a||(c=Qc(n,i),c!=null&&o.push(rd(n,c,l)))),n=n.return}o.length!==0&&e.push({event:t,listeners:o})}var q9=/\r\n?/g,U9=/\u0000|\uFFFD/g;function Pj(e){return(typeof e=="string"?e:""+e).replace(q9,`
`).replace(U9,"")}function Gu(e,t,n){if(t=Pj(t),Pj(e)!==t&&n)throw Error(fe(425))}function ah(){}var ug=null,mg=null;function hg(e,t){return e==="textarea"||e==="noscript"||typeof t.children=="string"||typeof t.children=="number"||typeof t.dangerouslySetInnerHTML=="object"&&t.dangerouslySetInnerHTML!==null&&t.dangerouslySetInnerHTML.__html!=null}var pg=typeof setTimeout=="function"?setTimeout:void 0,W9=typeof clearTimeout=="function"?clearTimeout:void 0,Ej=typeof Promise=="function"?Promise:void 0,V9=typeof queueMicrotask=="function"?queueMicrotask:typeof Ej<"u"?function(e){return Ej.resolve(null).then(e).catch(H9)}:pg;function H9(e){setTimeout(function(){throw e})}function Lf(e,t){var n=t,s=0;do{var a=n.nextSibling;if(e.removeChild(n),a&&a.nodeType===8)if(n=a.data,n==="/$"){if(s===0){e.removeChild(a),Jc(t);return}s--}else n!=="$"&&n!=="$?"&&n!=="$!"||s++;n=a}while(n);Jc(t)}function ia(e){for(;e!=null;e=e.nextSibling){var t=e.nodeType;if(t===1||t===3)break;if(t===8){if(t=e.data,t==="$"||t==="$!"||t==="$?")break;if(t==="/$")return null}}return e}function Oj(e){e=e.previousSibling;for(var t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="$"||n==="$!"||n==="$?"){if(t===0)return e;t--}else n==="/$"&&t++}e=e.previousSibling}return null}var _l=Math.random().toString(36).slice(2),zn="__reactFiber$"+_l,nd="__reactProps$"+_l,ys="__reactContainer$"+_l,fg="__reactEvents$"+_l,K9="__reactListeners$"+_l,G9="__reactHandles$"+_l;function Ha(e){var t=e[zn];if(t)return t;for(var n=e.parentNode;n;){if(t=n[ys]||n[zn]){if(n=t.alternate,t.child!==null||n!==null&&n.child!==null)for(e=Oj(e);e!==null;){if(n=e[zn])return n;e=Oj(e)}return t}e=n,n=e.parentNode}return null}function pu(e){return e=e[zn]||e[ys],!e||e.tag!==5&&e.tag!==6&&e.tag!==13&&e.tag!==3?null:e}function Yi(e){if(e.tag===5||e.tag===6)return e.stateNode;throw Error(fe(33))}function z0(e){return e[nd]||null}var xg=[],Xi=-1;function Na(e){return{current:e}}function ct(e){0>Xi||(e.current=xg[Xi],xg[Xi]=null,Xi--)}function nt(e,t){Xi++,xg[Xi]=e.current,e.current=t}var ba={},tr=Na(ba),_r=Na(!1),fi=ba;function Do(e,t){var n=e.type.contextTypes;if(!n)return ba;var s=e.stateNode;if(s&&s.__reactInternalMemoizedUnmaskedChildContext===t)return s.__reactInternalMemoizedMaskedChildContext;var a={},i;for(i in n)a[i]=t[i];return s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=t,e.__reactInternalMemoizedMaskedChildContext=a),a}function kr(e){return e=e.childContextTypes,e!=null}function ih(){ct(_r),ct(tr)}function Tj(e,t,n){if(tr.current!==ba)throw Error(fe(168));nt(tr,t),nt(_r,n)}function _6(e,t,n){var s=e.stateNode;if(t=t.childContextTypes,typeof s.getChildContext!="function")return n;s=s.getChildContext();for(var a in s)if(!(a in t))throw Error(fe(108,TO(e)||"Unknown",a));return pt({},n,s)}function oh(e){return e=(e=e.stateNode)&&e.__reactInternalMemoizedMergedChildContext||ba,fi=tr.current,nt(tr,e),nt(_r,_r.current),!0}function Mj(e,t,n){var s=e.stateNode;if(!s)throw Error(fe(169));n?(e=_6(e,t,fi),s.__reactInternalMemoizedMergedChildContext=e,ct(_r),ct(tr),nt(tr,e)):ct(_r),nt(_r,n)}var rs=null,q0=!1,$f=!1;function k6(e){rs===null?rs=[e]:rs.push(e)}function Q9(e){q0=!0,k6(e)}function _a(){if(!$f&&rs!==null){$f=!0;var e=0,t=Qe;try{var n=rs;for(Qe=1;e<n.length;e++){var s=n[e];do s=s(!0);while(s!==null)}rs=null,q0=!1}catch(a){throw rs!==null&&(rs=rs.slice(e+1)),Y3(pv,_a),a}finally{Qe=t,$f=!1}}return null}var Ji=[],Zi=0,lh=null,ch=0,en=[],tn=0,xi=null,os=1,ls="";function Ia(e,t){Ji[Zi++]=ch,Ji[Zi++]=lh,lh=e,ch=t}function S6(e,t,n){en[tn++]=os,en[tn++]=ls,en[tn++]=xi,xi=e;var s=os;e=ls;var a=32-An(s)-1;s&=~(1<<a),n+=1;var i=32-An(t)+a;if(30<i){var o=a-a%5;i=(s&(1<<o)-1).toString(32),s>>=o,a-=o,os=1<<32-An(t)+a|n<<a|s,ls=i+e}else os=1<<i|n<<a|s,ls=e}function Nv(e){e.return!==null&&(Ia(e,1),S6(e,1,0))}function _v(e){for(;e===lh;)lh=Ji[--Zi],Ji[Zi]=null,ch=Ji[--Zi],Ji[Zi]=null;for(;e===xi;)xi=en[--tn],en[tn]=null,ls=en[--tn],en[tn]=null,os=en[--tn],en[tn]=null}var Br=null,Dr=null,dt=!1,kn=null;function C6(e,t){var n=sn(5,null,null,0);n.elementType="DELETED",n.stateNode=t,n.return=e,t=e.deletions,t===null?(e.deletions=[n],e.flags|=16):t.push(n)}function Lj(e,t){switch(e.tag){case 5:var n=e.type;return t=t.nodeType!==1||n.toLowerCase()!==t.nodeName.toLowerCase()?null:t,t!==null?(e.stateNode=t,Br=e,Dr=ia(t.firstChild),!0):!1;case 6:return t=e.pendingProps===""||t.nodeType!==3?null:t,t!==null?(e.stateNode=t,Br=e,Dr=null,!0):!1;case 13:return t=t.nodeType!==8?null:t,t!==null?(n=xi!==null?{id:os,overflow:ls}:null,e.memoizedState={dehydrated:t,treeContext:n,retryLane:1073741824},n=sn(18,null,null,0),n.stateNode=t,n.return=e,e.child=n,Br=e,Dr=null,!0):!1;default:return!1}}function gg(e){return(e.mode&1)!==0&&(e.flags&128)===0}function yg(e){if(dt){var t=Dr;if(t){var n=t;if(!Lj(e,t)){if(gg(e))throw Error(fe(418));t=ia(n.nextSibling);var s=Br;t&&Lj(e,t)?C6(s,n):(e.flags=e.flags&-4097|2,dt=!1,Br=e)}}else{if(gg(e))throw Error(fe(418));e.flags=e.flags&-4097|2,dt=!1,Br=e}}}function $j(e){for(e=e.return;e!==null&&e.tag!==5&&e.tag!==3&&e.tag!==13;)e=e.return;Br=e}function Qu(e){if(e!==Br)return!1;if(!dt)return $j(e),dt=!0,!1;var t;if((t=e.tag!==3)&&!(t=e.tag!==5)&&(t=e.type,t=t!=="head"&&t!=="body"&&!hg(e.type,e.memoizedProps)),t&&(t=Dr)){if(gg(e))throw A6(),Error(fe(418));for(;t;)C6(e,t),t=ia(t.nextSibling)}if($j(e),e.tag===13){if(e=e.memoizedState,e=e!==null?e.dehydrated:null,!e)throw Error(fe(317));e:{for(e=e.nextSibling,t=0;e;){if(e.nodeType===8){var n=e.data;if(n==="/$"){if(t===0){Dr=ia(e.nextSibling);break e}t--}else n!=="$"&&n!=="$!"&&n!=="$?"||t++}e=e.nextSibling}Dr=null}}else Dr=Br?ia(e.stateNode.nextSibling):null;return!0}function A6(){for(var e=Dr;e;)e=ia(e.nextSibling)}function Fo(){Dr=Br=null,dt=!1}function kv(e){kn===null?kn=[e]:kn.push(e)}var Y9=ks.ReactCurrentBatchConfig;function Xl(e,t,n){if(e=n.ref,e!==null&&typeof e!="function"&&typeof e!="object"){if(n._owner){if(n=n._owner,n){if(n.tag!==1)throw Error(fe(309));var s=n.stateNode}if(!s)throw Error(fe(147,e));var a=s,i=""+e;return t!==null&&t.ref!==null&&typeof t.ref=="function"&&t.ref._stringRef===i?t.ref:(t=function(o){var l=a.refs;o===null?delete l[i]:l[i]=o},t._stringRef=i,t)}if(typeof e!="string")throw Error(fe(284));if(!n._owner)throw Error(fe(290,e))}return e}function Yu(e,t){throw e=Object.prototype.toString.call(t),Error(fe(31,e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e))}function Rj(e){var t=e._init;return t(e._payload)}function P6(e){function t(p,y){if(e){var v=p.deletions;v===null?(p.deletions=[y],p.flags|=16):v.push(y)}}function n(p,y){if(!e)return null;for(;y!==null;)t(p,y),y=y.sibling;return null}function s(p,y){for(p=new Map;y!==null;)y.key!==null?p.set(y.key,y):p.set(y.index,y),y=y.sibling;return p}function a(p,y){return p=da(p,y),p.index=0,p.sibling=null,p}function i(p,y,v){return p.index=v,e?(v=p.alternate,v!==null?(v=v.index,v<y?(p.flags|=2,y):v):(p.flags|=2,y)):(p.flags|=1048576,y)}function o(p){return e&&p.alternate===null&&(p.flags|=2),p}function l(p,y,v,N){return y===null||y.tag!==6?(y=qf(v,p.mode,N),y.return=p,y):(y=a(y,v),y.return=p,y)}function c(p,y,v,N){var w=v.type;return w===Hi?m(p,y,v.props.children,N,v.key):y!==null&&(y.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$s&&Rj(w)===y.type)?(N=a(y,v.props),N.ref=Xl(p,y,v),N.return=p,N):(N=Rm(v.type,v.key,v.props,null,p.mode,N),N.ref=Xl(p,y,v),N.return=p,N)}function d(p,y,v,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==v.containerInfo||y.stateNode.implementation!==v.implementation?(y=Uf(v,p.mode,N),y.return=p,y):(y=a(y,v.children||[]),y.return=p,y)}function m(p,y,v,N,w){return y===null||y.tag!==7?(y=ui(v,p.mode,N,w),y.return=p,y):(y=a(y,v),y.return=p,y)}function u(p,y,v){if(typeof y=="string"&&y!==""||typeof y=="number")return y=qf(""+y,p.mode,v),y.return=p,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Fu:return v=Rm(y.type,y.key,y.props,null,p.mode,v),v.ref=Xl(p,null,y),v.return=p,v;case Vi:return y=Uf(y,p.mode,v),y.return=p,y;case $s:var N=y._init;return u(p,N(y._payload),v)}if(wc(y)||Hl(y))return y=ui(y,p.mode,v,null),y.return=p,y;Yu(p,y)}return null}function h(p,y,v,N){var w=y!==null?y.key:null;if(typeof v=="string"&&v!==""||typeof v=="number")return w!==null?null:l(p,y,""+v,N);if(typeof v=="object"&&v!==null){switch(v.$$typeof){case Fu:return v.key===w?c(p,y,v,N):null;case Vi:return v.key===w?d(p,y,v,N):null;case $s:return w=v._init,h(p,y,w(v._payload),N)}if(wc(v)||Hl(v))return w!==null?null:m(p,y,v,N,null);Yu(p,v)}return null}function f(p,y,v,N,w){if(typeof N=="string"&&N!==""||typeof N=="number")return p=p.get(v)||null,l(y,p,""+N,w);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Fu:return p=p.get(N.key===null?v:N.key)||null,c(y,p,N,w);case Vi:return p=p.get(N.key===null?v:N.key)||null,d(y,p,N,w);case $s:var j=N._init;return f(p,y,v,j(N._payload),w)}if(wc(N)||Hl(N))return p=p.get(v)||null,m(y,p,N,w,null);Yu(y,N)}return null}function b(p,y,v,N){for(var w=null,j=null,_=y,S=y=0,T=null;_!==null&&S<v.length;S++){_.index>S?(T=_,_=null):T=_.sibling;var A=h(p,_,v[S],N);if(A===null){_===null&&(_=T);break}e&&_&&A.alternate===null&&t(p,_),y=i(A,y,S),j===null?w=A:j.sibling=A,j=A,_=T}if(S===v.length)return n(p,_),dt&&Ia(p,S),w;if(_===null){for(;S<v.length;S++)_=u(p,v[S],N),_!==null&&(y=i(_,y,S),j===null?w=_:j.sibling=_,j=_);return dt&&Ia(p,S),w}for(_=s(p,_);S<v.length;S++)T=f(_,p,S,v[S],N),T!==null&&(e&&T.alternate!==null&&_.delete(T.key===null?S:T.key),y=i(T,y,S),j===null?w=T:j.sibling=T,j=T);return e&&_.forEach(function(E){return t(p,E)}),dt&&Ia(p,S),w}function g(p,y,v,N){var w=Hl(v);if(typeof w!="function")throw Error(fe(150));if(v=w.call(v),v==null)throw Error(fe(151));for(var j=w=null,_=y,S=y=0,T=null,A=v.next();_!==null&&!A.done;S++,A=v.next()){_.index>S?(T=_,_=null):T=_.sibling;var E=h(p,_,A.value,N);if(E===null){_===null&&(_=T);break}e&&_&&E.alternate===null&&t(p,_),y=i(E,y,S),j===null?w=E:j.sibling=E,j=E,_=T}if(A.done)return n(p,_),dt&&Ia(p,S),w;if(_===null){for(;!A.done;S++,A=v.next())A=u(p,A.value,N),A!==null&&(y=i(A,y,S),j===null?w=A:j.sibling=A,j=A);return dt&&Ia(p,S),w}for(_=s(p,_);!A.done;S++,A=v.next())A=f(_,p,S,A.value,N),A!==null&&(e&&A.alternate!==null&&_.delete(A.key===null?S:A.key),y=i(A,y,S),j===null?w=A:j.sibling=A,j=A);return e&&_.forEach(function(R){return t(p,R)}),dt&&Ia(p,S),w}function x(p,y,v,N){if(typeof v=="object"&&v!==null&&v.type===Hi&&v.key===null&&(v=v.props.children),typeof v=="object"&&v!==null){switch(v.$$typeof){case Fu:e:{for(var w=v.key,j=y;j!==null;){if(j.key===w){if(w=v.type,w===Hi){if(j.tag===7){n(p,j.sibling),y=a(j,v.props.children),y.return=p,p=y;break e}}else if(j.elementType===w||typeof w=="object"&&w!==null&&w.$$typeof===$s&&Rj(w)===j.type){n(p,j.sibling),y=a(j,v.props),y.ref=Xl(p,j,v),y.return=p,p=y;break e}n(p,j);break}else t(p,j);j=j.sibling}v.type===Hi?(y=ui(v.props.children,p.mode,N,v.key),y.return=p,p=y):(N=Rm(v.type,v.key,v.props,null,p.mode,N),N.ref=Xl(p,y,v),N.return=p,p=N)}return o(p);case Vi:e:{for(j=v.key;y!==null;){if(y.key===j)if(y.tag===4&&y.stateNode.containerInfo===v.containerInfo&&y.stateNode.implementation===v.implementation){n(p,y.sibling),y=a(y,v.children||[]),y.return=p,p=y;break e}else{n(p,y);break}else t(p,y);y=y.sibling}y=Uf(v,p.mode,N),y.return=p,p=y}return o(p);case $s:return j=v._init,x(p,y,j(v._payload),N)}if(wc(v))return b(p,y,v,N);if(Hl(v))return g(p,y,v,N);Yu(p,v)}return typeof v=="string"&&v!==""||typeof v=="number"?(v=""+v,y!==null&&y.tag===6?(n(p,y.sibling),y=a(y,v),y.return=p,p=y):(n(p,y),y=qf(v,p.mode,N),y.return=p,p=y),o(p)):n(p,y)}return x}var Bo=P6(!0),E6=P6(!1),dh=Na(null),uh=null,eo=null,Sv=null;function Cv(){Sv=eo=uh=null}function Av(e){var t=dh.current;ct(dh),e._currentValue=t}function bg(e,t,n){for(;e!==null;){var s=e.alternate;if((e.childLanes&t)!==t?(e.childLanes|=t,s!==null&&(s.childLanes|=t)):s!==null&&(s.childLanes&t)!==t&&(s.childLanes|=t),e===n)break;e=e.return}}function po(e,t){uh=e,Sv=eo=null,e=e.dependencies,e!==null&&e.firstContext!==null&&(e.lanes&t&&(wr=!0),e.firstContext=null)}function un(e){var t=e._currentValue;if(Sv!==e)if(e={context:e,memoizedValue:t,next:null},eo===null){if(uh===null)throw Error(fe(308));eo=e,uh.dependencies={lanes:0,firstContext:e}}else eo=eo.next=e;return t}var Ka=null;function Pv(e){Ka===null?Ka=[e]:Ka.push(e)}function O6(e,t,n,s){var a=t.interleaved;return a===null?(n.next=n,Pv(t)):(n.next=a.next,a.next=n),t.interleaved=n,bs(e,s)}function bs(e,t){e.lanes|=t;var n=e.alternate;for(n!==null&&(n.lanes|=t),n=e,e=e.return;e!==null;)e.childLanes|=t,n=e.alternate,n!==null&&(n.childLanes|=t),n=e,e=e.return;return n.tag===3?n.stateNode:null}var Rs=!1;function Ev(e){e.updateQueue={baseState:e.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function T6(e,t){e=e.updateQueue,t.updateQueue===e&&(t.updateQueue={baseState:e.baseState,firstBaseUpdate:e.firstBaseUpdate,lastBaseUpdate:e.lastBaseUpdate,shared:e.shared,effects:e.effects})}function ms(e,t){return{eventTime:e,lane:t,tag:0,payload:null,callback:null,next:null}}function oa(e,t,n){var s=e.updateQueue;if(s===null)return null;if(s=s.shared,Ue&2){var a=s.pending;return a===null?t.next=t:(t.next=a.next,a.next=t),s.pending=t,bs(e,n)}return a=s.interleaved,a===null?(t.next=t,Pv(s)):(t.next=a.next,a.next=t),s.interleaved=t,bs(e,n)}function Em(e,t,n){if(t=t.updateQueue,t!==null&&(t=t.shared,(n&4194240)!==0)){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,fv(e,n)}}function Ij(e,t){var n=e.updateQueue,s=e.alternate;if(s!==null&&(s=s.updateQueue,n===s)){var a=null,i=null;if(n=n.firstBaseUpdate,n!==null){do{var o={eventTime:n.eventTime,lane:n.lane,tag:n.tag,payload:n.payload,callback:n.callback,next:null};i===null?a=i=o:i=i.next=o,n=n.next}while(n!==null);i===null?a=i=t:i=i.next=t}else a=i=t;n={baseState:s.baseState,firstBaseUpdate:a,lastBaseUpdate:i,shared:s.shared,effects:s.effects},e.updateQueue=n;return}e=n.lastBaseUpdate,e===null?n.firstBaseUpdate=t:e.next=t,n.lastBaseUpdate=t}function mh(e,t,n,s){var a=e.updateQueue;Rs=!1;var i=a.firstBaseUpdate,o=a.lastBaseUpdate,l=a.shared.pending;if(l!==null){a.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var m=e.alternate;m!==null&&(m=m.updateQueue,l=m.lastBaseUpdate,l!==o&&(l===null?m.firstBaseUpdate=d:l.next=d,m.lastBaseUpdate=c))}if(i!==null){var u=a.baseState;o=0,m=d=c=null,l=i;do{var h=l.lane,f=l.eventTime;if((s&h)===h){m!==null&&(m=m.next={eventTime:f,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var b=e,g=l;switch(h=t,f=n,g.tag){case 1:if(b=g.payload,typeof b=="function"){u=b.call(f,u,h);break e}u=b;break e;case 3:b.flags=b.flags&-65537|128;case 0:if(b=g.payload,h=typeof b=="function"?b.call(f,u,h):b,h==null)break e;u=pt({},u,h);break e;case 2:Rs=!0}}l.callback!==null&&l.lane!==0&&(e.flags|=64,h=a.effects,h===null?a.effects=[l]:h.push(l))}else f={eventTime:f,lane:h,tag:l.tag,payload:l.payload,callback:l.callback,next:null},m===null?(d=m=f,c=u):m=m.next=f,o|=h;if(l=l.next,l===null){if(l=a.shared.pending,l===null)break;h=l,l=h.next,h.next=null,a.lastBaseUpdate=h,a.shared.pending=null}}while(!0);if(m===null&&(c=u),a.baseState=c,a.firstBaseUpdate=d,a.lastBaseUpdate=m,t=a.shared.interleaved,t!==null){a=t;do o|=a.lane,a=a.next;while(a!==t)}else i===null&&(a.shared.lanes=0);yi|=o,e.lanes=o,e.memoizedState=u}}function Dj(e,t,n){if(e=t.effects,t.effects=null,e!==null)for(t=0;t<e.length;t++){var s=e[t],a=s.callback;if(a!==null){if(s.callback=null,s=n,typeof a!="function")throw Error(fe(191,a));a.call(s)}}}var fu={},Wn=Na(fu),sd=Na(fu),ad=Na(fu);function Ga(e){if(e===fu)throw Error(fe(174));return e}function Ov(e,t){switch(nt(ad,t),nt(sd,e),nt(Wn,fu),e=t.nodeType,e){case 9:case 11:t=(t=t.documentElement)?t.namespaceURI:Zx(null,"");break;default:e=e===8?t.parentNode:t,t=e.namespaceURI||null,e=e.tagName,t=Zx(t,e)}ct(Wn),nt(Wn,t)}function zo(){ct(Wn),ct(sd),ct(ad)}function M6(e){Ga(ad.current);var t=Ga(Wn.current),n=Zx(t,e.type);t!==n&&(nt(sd,e),nt(Wn,n))}function Tv(e){sd.current===e&&(ct(Wn),ct(sd))}var mt=Na(0);function hh(e){for(var t=e;t!==null;){if(t.tag===13){var n=t.memoizedState;if(n!==null&&(n=n.dehydrated,n===null||n.data==="$?"||n.data==="$!"))return t}else if(t.tag===19&&t.memoizedProps.revealOrder!==void 0){if(t.flags&128)return t}else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return null;t=t.return}t.sibling.return=t.return,t=t.sibling}return null}var Rf=[];function Mv(){for(var e=0;e<Rf.length;e++)Rf[e]._workInProgressVersionPrimary=null;Rf.length=0}var Om=ks.ReactCurrentDispatcher,If=ks.ReactCurrentBatchConfig,gi=0,ht=null,At=null,Lt=null,ph=!1,Lc=!1,id=0,X9=0;function Ht(){throw Error(fe(321))}function Lv(e,t){if(t===null)return!1;for(var n=0;n<t.length&&n<e.length;n++)if(!On(e[n],t[n]))return!1;return!0}function $v(e,t,n,s,a,i){if(gi=i,ht=t,t.memoizedState=null,t.updateQueue=null,t.lanes=0,Om.current=e===null||e.memoizedState===null?tT:rT,e=n(s,a),Lc){i=0;do{if(Lc=!1,id=0,25<=i)throw Error(fe(301));i+=1,Lt=At=null,t.updateQueue=null,Om.current=nT,e=n(s,a)}while(Lc)}if(Om.current=fh,t=At!==null&&At.next!==null,gi=0,Lt=At=ht=null,ph=!1,t)throw Error(fe(300));return e}function Rv(){var e=id!==0;return id=0,e}function In(){var e={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Lt===null?ht.memoizedState=Lt=e:Lt=Lt.next=e,Lt}function mn(){if(At===null){var e=ht.alternate;e=e!==null?e.memoizedState:null}else e=At.next;var t=Lt===null?ht.memoizedState:Lt.next;if(t!==null)Lt=t,At=e;else{if(e===null)throw Error(fe(310));At=e,e={memoizedState:At.memoizedState,baseState:At.baseState,baseQueue:At.baseQueue,queue:At.queue,next:null},Lt===null?ht.memoizedState=Lt=e:Lt=Lt.next=e}return Lt}function od(e,t){return typeof t=="function"?t(e):t}function Df(e){var t=mn(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var s=At,a=s.baseQueue,i=n.pending;if(i!==null){if(a!==null){var o=a.next;a.next=i.next,i.next=o}s.baseQueue=a=i,n.pending=null}if(a!==null){i=a.next,s=s.baseState;var l=o=null,c=null,d=i;do{var m=d.lane;if((gi&m)===m)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),s=d.hasEagerState?d.eagerState:e(s,d.action);else{var u={lane:m,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=u,o=s):c=c.next=u,ht.lanes|=m,yi|=m}d=d.next}while(d!==null&&d!==i);c===null?o=s:c.next=l,On(s,t.memoizedState)||(wr=!0),t.memoizedState=s,t.baseState=o,t.baseQueue=c,n.lastRenderedState=s}if(e=n.interleaved,e!==null){a=e;do i=a.lane,ht.lanes|=i,yi|=i,a=a.next;while(a!==e)}else a===null&&(n.lanes=0);return[t.memoizedState,n.dispatch]}function Ff(e){var t=mn(),n=t.queue;if(n===null)throw Error(fe(311));n.lastRenderedReducer=e;var s=n.dispatch,a=n.pending,i=t.memoizedState;if(a!==null){n.pending=null;var o=a=a.next;do i=e(i,o.action),o=o.next;while(o!==a);On(i,t.memoizedState)||(wr=!0),t.memoizedState=i,t.baseQueue===null&&(t.baseState=i),n.lastRenderedState=i}return[i,s]}function L6(){}function $6(e,t){var n=ht,s=mn(),a=t(),i=!On(s.memoizedState,a);if(i&&(s.memoizedState=a,wr=!0),s=s.queue,Iv(D6.bind(null,n,s,e),[e]),s.getSnapshot!==t||i||Lt!==null&&Lt.memoizedState.tag&1){if(n.flags|=2048,ld(9,I6.bind(null,n,s,a,t),void 0,null),Rt===null)throw Error(fe(349));gi&30||R6(n,t,a)}return a}function R6(e,t,n){e.flags|=16384,e={getSnapshot:t,value:n},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.stores=[e]):(n=t.stores,n===null?t.stores=[e]:n.push(e))}function I6(e,t,n,s){t.value=n,t.getSnapshot=s,F6(t)&&B6(e)}function D6(e,t,n){return n(function(){F6(t)&&B6(e)})}function F6(e){var t=e.getSnapshot;e=e.value;try{var n=t();return!On(e,n)}catch{return!0}}function B6(e){var t=bs(e,1);t!==null&&Pn(t,e,1,-1)}function Fj(e){var t=In();return typeof e=="function"&&(e=e()),t.memoizedState=t.baseState=e,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:od,lastRenderedState:e},t.queue=e,e=e.dispatch=eT.bind(null,ht,e),[t.memoizedState,e]}function ld(e,t,n,s){return e={tag:e,create:t,destroy:n,deps:s,next:null},t=ht.updateQueue,t===null?(t={lastEffect:null,stores:null},ht.updateQueue=t,t.lastEffect=e.next=e):(n=t.lastEffect,n===null?t.lastEffect=e.next=e:(s=n.next,n.next=e,e.next=s,t.lastEffect=e)),e}function z6(){return mn().memoizedState}function Tm(e,t,n,s){var a=In();ht.flags|=e,a.memoizedState=ld(1|t,n,void 0,s===void 0?null:s)}function U0(e,t,n,s){var a=mn();s=s===void 0?null:s;var i=void 0;if(At!==null){var o=At.memoizedState;if(i=o.destroy,s!==null&&Lv(s,o.deps)){a.memoizedState=ld(t,n,i,s);return}}ht.flags|=e,a.memoizedState=ld(1|t,n,i,s)}function Bj(e,t){return Tm(8390656,8,e,t)}function Iv(e,t){return U0(2048,8,e,t)}function q6(e,t){return U0(4,2,e,t)}function U6(e,t){return U0(4,4,e,t)}function W6(e,t){if(typeof t=="function")return e=e(),t(e),function(){t(null)};if(t!=null)return e=e(),t.current=e,function(){t.current=null}}function V6(e,t,n){return n=n!=null?n.concat([e]):null,U0(4,4,W6.bind(null,t,e),n)}function Dv(){}function H6(e,t){var n=mn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Lv(t,s[1])?s[0]:(n.memoizedState=[e,t],e)}function K6(e,t){var n=mn();t=t===void 0?null:t;var s=n.memoizedState;return s!==null&&t!==null&&Lv(t,s[1])?s[0]:(e=e(),n.memoizedState=[e,t],e)}function G6(e,t,n){return gi&21?(On(n,t)||(n=Z3(),ht.lanes|=n,yi|=n,e.baseState=!0),t):(e.baseState&&(e.baseState=!1,wr=!0),e.memoizedState=n)}function J9(e,t){var n=Qe;Qe=n!==0&&4>n?n:4,e(!0);var s=If.transition;If.transition={};try{e(!1),t()}finally{Qe=n,If.transition=s}}function Q6(){return mn().memoizedState}function Z9(e,t,n){var s=ca(e);if(n={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null},Y6(e))X6(t,n);else if(n=O6(e,t,n,s),n!==null){var a=mr();Pn(n,e,s,a),J6(n,t,s)}}function eT(e,t,n){var s=ca(e),a={lane:s,action:n,hasEagerState:!1,eagerState:null,next:null};if(Y6(e))X6(t,a);else{var i=e.alternate;if(e.lanes===0&&(i===null||i.lanes===0)&&(i=t.lastRenderedReducer,i!==null))try{var o=t.lastRenderedState,l=i(o,n);if(a.hasEagerState=!0,a.eagerState=l,On(l,o)){var c=t.interleaved;c===null?(a.next=a,Pv(t)):(a.next=c.next,c.next=a),t.interleaved=a;return}}catch{}finally{}n=O6(e,t,a,s),n!==null&&(a=mr(),Pn(n,e,s,a),J6(n,t,s))}}function Y6(e){var t=e.alternate;return e===ht||t!==null&&t===ht}function X6(e,t){Lc=ph=!0;var n=e.pending;n===null?t.next=t:(t.next=n.next,n.next=t),e.pending=t}function J6(e,t,n){if(n&4194240){var s=t.lanes;s&=e.pendingLanes,n|=s,t.lanes=n,fv(e,n)}}var fh={readContext:un,useCallback:Ht,useContext:Ht,useEffect:Ht,useImperativeHandle:Ht,useInsertionEffect:Ht,useLayoutEffect:Ht,useMemo:Ht,useReducer:Ht,useRef:Ht,useState:Ht,useDebugValue:Ht,useDeferredValue:Ht,useTransition:Ht,useMutableSource:Ht,useSyncExternalStore:Ht,useId:Ht,unstable_isNewReconciler:!1},tT={readContext:un,useCallback:function(e,t){return In().memoizedState=[e,t===void 0?null:t],e},useContext:un,useEffect:Bj,useImperativeHandle:function(e,t,n){return n=n!=null?n.concat([e]):null,Tm(4194308,4,W6.bind(null,t,e),n)},useLayoutEffect:function(e,t){return Tm(4194308,4,e,t)},useInsertionEffect:function(e,t){return Tm(4,2,e,t)},useMemo:function(e,t){var n=In();return t=t===void 0?null:t,e=e(),n.memoizedState=[e,t],e},useReducer:function(e,t,n){var s=In();return t=n!==void 0?n(t):t,s.memoizedState=s.baseState=t,e={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:e,lastRenderedState:t},s.queue=e,e=e.dispatch=Z9.bind(null,ht,e),[s.memoizedState,e]},useRef:function(e){var t=In();return e={current:e},t.memoizedState=e},useState:Fj,useDebugValue:Dv,useDeferredValue:function(e){return In().memoizedState=e},useTransition:function(){var e=Fj(!1),t=e[0];return e=J9.bind(null,e[1]),In().memoizedState=e,[t,e]},useMutableSource:function(){},useSyncExternalStore:function(e,t,n){var s=ht,a=In();if(dt){if(n===void 0)throw Error(fe(407));n=n()}else{if(n=t(),Rt===null)throw Error(fe(349));gi&30||R6(s,t,n)}a.memoizedState=n;var i={value:n,getSnapshot:t};return a.queue=i,Bj(D6.bind(null,s,i,e),[e]),s.flags|=2048,ld(9,I6.bind(null,s,i,n,t),void 0,null),n},useId:function(){var e=In(),t=Rt.identifierPrefix;if(dt){var n=ls,s=os;n=(s&~(1<<32-An(s)-1)).toString(32)+n,t=":"+t+"R"+n,n=id++,0<n&&(t+="H"+n.toString(32)),t+=":"}else n=X9++,t=":"+t+"r"+n.toString(32)+":";return e.memoizedState=t},unstable_isNewReconciler:!1},rT={readContext:un,useCallback:H6,useContext:un,useEffect:Iv,useImperativeHandle:V6,useInsertionEffect:q6,useLayoutEffect:U6,useMemo:K6,useReducer:Df,useRef:z6,useState:function(){return Df(od)},useDebugValue:Dv,useDeferredValue:function(e){var t=mn();return G6(t,At.memoizedState,e)},useTransition:function(){var e=Df(od)[0],t=mn().memoizedState;return[e,t]},useMutableSource:L6,useSyncExternalStore:$6,useId:Q6,unstable_isNewReconciler:!1},nT={readContext:un,useCallback:H6,useContext:un,useEffect:Iv,useImperativeHandle:V6,useInsertionEffect:q6,useLayoutEffect:U6,useMemo:K6,useReducer:Ff,useRef:z6,useState:function(){return Ff(od)},useDebugValue:Dv,useDeferredValue:function(e){var t=mn();return At===null?t.memoizedState=e:G6(t,At.memoizedState,e)},useTransition:function(){var e=Ff(od)[0],t=mn().memoizedState;return[e,t]},useMutableSource:L6,useSyncExternalStore:$6,useId:Q6,unstable_isNewReconciler:!1};function yn(e,t){if(e&&e.defaultProps){t=pt({},t),e=e.defaultProps;for(var n in e)t[n]===void 0&&(t[n]=e[n]);return t}return t}function vg(e,t,n,s){t=e.memoizedState,n=n(s,t),n=n==null?t:pt({},t,n),e.memoizedState=n,e.lanes===0&&(e.updateQueue.baseState=n)}var W0={isMounted:function(e){return(e=e._reactInternals)?Ti(e)===e:!1},enqueueSetState:function(e,t,n){e=e._reactInternals;var s=mr(),a=ca(e),i=ms(s,a);i.payload=t,n!=null&&(i.callback=n),t=oa(e,i,a),t!==null&&(Pn(t,e,a,s),Em(t,e,a))},enqueueReplaceState:function(e,t,n){e=e._reactInternals;var s=mr(),a=ca(e),i=ms(s,a);i.tag=1,i.payload=t,n!=null&&(i.callback=n),t=oa(e,i,a),t!==null&&(Pn(t,e,a,s),Em(t,e,a))},enqueueForceUpdate:function(e,t){e=e._reactInternals;var n=mr(),s=ca(e),a=ms(n,s);a.tag=2,t!=null&&(a.callback=t),t=oa(e,a,s),t!==null&&(Pn(t,e,s,n),Em(t,e,s))}};function zj(e,t,n,s,a,i,o){return e=e.stateNode,typeof e.shouldComponentUpdate=="function"?e.shouldComponentUpdate(s,i,o):t.prototype&&t.prototype.isPureReactComponent?!ed(n,s)||!ed(a,i):!0}function Z6(e,t,n){var s=!1,a=ba,i=t.contextType;return typeof i=="object"&&i!==null?i=un(i):(a=kr(t)?fi:tr.current,s=t.contextTypes,i=(s=s!=null)?Do(e,a):ba),t=new t(n,i),e.memoizedState=t.state!==null&&t.state!==void 0?t.state:null,t.updater=W0,e.stateNode=t,t._reactInternals=e,s&&(e=e.stateNode,e.__reactInternalMemoizedUnmaskedChildContext=a,e.__reactInternalMemoizedMaskedChildContext=i),t}function qj(e,t,n,s){e=t.state,typeof t.componentWillReceiveProps=="function"&&t.componentWillReceiveProps(n,s),typeof t.UNSAFE_componentWillReceiveProps=="function"&&t.UNSAFE_componentWillReceiveProps(n,s),t.state!==e&&W0.enqueueReplaceState(t,t.state,null)}function jg(e,t,n,s){var a=e.stateNode;a.props=n,a.state=e.memoizedState,a.refs={},Ev(e);var i=t.contextType;typeof i=="object"&&i!==null?a.context=un(i):(i=kr(t)?fi:tr.current,a.context=Do(e,i)),a.state=e.memoizedState,i=t.getDerivedStateFromProps,typeof i=="function"&&(vg(e,t,i,n),a.state=e.memoizedState),typeof t.getDerivedStateFromProps=="function"||typeof a.getSnapshotBeforeUpdate=="function"||typeof a.UNSAFE_componentWillMount!="function"&&typeof a.componentWillMount!="function"||(t=a.state,typeof a.componentWillMount=="function"&&a.componentWillMount(),typeof a.UNSAFE_componentWillMount=="function"&&a.UNSAFE_componentWillMount(),t!==a.state&&W0.enqueueReplaceState(a,a.state,null),mh(e,n,a,s),a.state=e.memoizedState),typeof a.componentDidMount=="function"&&(e.flags|=4194308)}function qo(e,t){try{var n="",s=t;do n+=OO(s),s=s.return;while(s);var a=n}catch(i){a=`
Error generating stack: `+i.message+`
`+i.stack}return{value:e,source:t,stack:a,digest:null}}function Bf(e,t,n){return{value:e,source:null,stack:n??null,digest:t??null}}function wg(e,t){try{console.error(t.value)}catch(n){setTimeout(function(){throw n})}}var sT=typeof WeakMap=="function"?WeakMap:Map;function eS(e,t,n){n=ms(-1,n),n.tag=3,n.payload={element:null};var s=t.value;return n.callback=function(){gh||(gh=!0,Tg=s),wg(e,t)},n}function tS(e,t,n){n=ms(-1,n),n.tag=3;var s=e.type.getDerivedStateFromError;if(typeof s=="function"){var a=t.value;n.payload=function(){return s(a)},n.callback=function(){wg(e,t)}}var i=e.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(n.callback=function(){wg(e,t),typeof s!="function"&&(la===null?la=new Set([this]):la.add(this));var o=t.stack;this.componentDidCatch(t.value,{componentStack:o!==null?o:""})}),n}function Uj(e,t,n){var s=e.pingCache;if(s===null){s=e.pingCache=new sT;var a=new Set;s.set(t,a)}else a=s.get(t),a===void 0&&(a=new Set,s.set(t,a));a.has(n)||(a.add(n),e=yT.bind(null,e,t,n),t.then(e,e))}function Wj(e){do{var t;if((t=e.tag===13)&&(t=e.memoizedState,t=t!==null?t.dehydrated!==null:!0),t)return e;e=e.return}while(e!==null);return null}function Vj(e,t,n,s,a){return e.mode&1?(e.flags|=65536,e.lanes=a,e):(e===t?e.flags|=65536:(e.flags|=128,n.flags|=131072,n.flags&=-52805,n.tag===1&&(n.alternate===null?n.tag=17:(t=ms(-1,1),t.tag=2,oa(n,t,1))),n.lanes|=1),e)}var aT=ks.ReactCurrentOwner,wr=!1;function or(e,t,n,s){t.child=e===null?E6(t,null,n,s):Bo(t,e.child,n,s)}function Hj(e,t,n,s,a){n=n.render;var i=t.ref;return po(t,a),s=$v(e,t,n,s,i,a),n=Rv(),e!==null&&!wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,vs(e,t,a)):(dt&&n&&Nv(t),t.flags|=1,or(e,t,s,a),t.child)}function Kj(e,t,n,s,a){if(e===null){var i=n.type;return typeof i=="function"&&!Hv(i)&&i.defaultProps===void 0&&n.compare===null&&n.defaultProps===void 0?(t.tag=15,t.type=i,rS(e,t,i,s,a)):(e=Rm(n.type,null,s,t,t.mode,a),e.ref=t.ref,e.return=t,t.child=e)}if(i=e.child,!(e.lanes&a)){var o=i.memoizedProps;if(n=n.compare,n=n!==null?n:ed,n(o,s)&&e.ref===t.ref)return vs(e,t,a)}return t.flags|=1,e=da(i,s),e.ref=t.ref,e.return=t,t.child=e}function rS(e,t,n,s,a){if(e!==null){var i=e.memoizedProps;if(ed(i,s)&&e.ref===t.ref)if(wr=!1,t.pendingProps=s=i,(e.lanes&a)!==0)e.flags&131072&&(wr=!0);else return t.lanes=e.lanes,vs(e,t,a)}return Ng(e,t,n,s,a)}function nS(e,t,n){var s=t.pendingProps,a=s.children,i=e!==null?e.memoizedState:null;if(s.mode==="hidden")if(!(t.mode&1))t.memoizedState={baseLanes:0,cachePool:null,transitions:null},nt(ro,Lr),Lr|=n;else{if(!(n&1073741824))return e=i!==null?i.baseLanes|n:n,t.lanes=t.childLanes=1073741824,t.memoizedState={baseLanes:e,cachePool:null,transitions:null},t.updateQueue=null,nt(ro,Lr),Lr|=e,null;t.memoizedState={baseLanes:0,cachePool:null,transitions:null},s=i!==null?i.baseLanes:n,nt(ro,Lr),Lr|=s}else i!==null?(s=i.baseLanes|n,t.memoizedState=null):s=n,nt(ro,Lr),Lr|=s;return or(e,t,a,n),t.child}function sS(e,t){var n=t.ref;(e===null&&n!==null||e!==null&&e.ref!==n)&&(t.flags|=512,t.flags|=2097152)}function Ng(e,t,n,s,a){var i=kr(n)?fi:tr.current;return i=Do(t,i),po(t,a),n=$v(e,t,n,s,i,a),s=Rv(),e!==null&&!wr?(t.updateQueue=e.updateQueue,t.flags&=-2053,e.lanes&=~a,vs(e,t,a)):(dt&&s&&Nv(t),t.flags|=1,or(e,t,n,a),t.child)}function Gj(e,t,n,s,a){if(kr(n)){var i=!0;oh(t)}else i=!1;if(po(t,a),t.stateNode===null)Mm(e,t),Z6(t,n,s),jg(t,n,s,a),s=!0;else if(e===null){var o=t.stateNode,l=t.memoizedProps;o.props=l;var c=o.context,d=n.contextType;typeof d=="object"&&d!==null?d=un(d):(d=kr(n)?fi:tr.current,d=Do(t,d));var m=n.getDerivedStateFromProps,u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function";u||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==s||c!==d)&&qj(t,o,s,d),Rs=!1;var h=t.memoizedState;o.state=h,mh(t,s,o,a),c=t.memoizedState,l!==s||h!==c||_r.current||Rs?(typeof m=="function"&&(vg(t,n,m,s),c=t.memoizedState),(l=Rs||zj(t,n,l,s,h,c,d))?(u||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(t.flags|=4194308)):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),t.memoizedProps=s,t.memoizedState=c),o.props=s,o.state=c,o.context=d,s=l):(typeof o.componentDidMount=="function"&&(t.flags|=4194308),s=!1)}else{o=t.stateNode,T6(e,t),l=t.memoizedProps,d=t.type===t.elementType?l:yn(t.type,l),o.props=d,u=t.pendingProps,h=o.context,c=n.contextType,typeof c=="object"&&c!==null?c=un(c):(c=kr(n)?fi:tr.current,c=Do(t,c));var f=n.getDerivedStateFromProps;(m=typeof f=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==u||h!==c)&&qj(t,o,s,c),Rs=!1,h=t.memoizedState,o.state=h,mh(t,s,o,a);var b=t.memoizedState;l!==u||h!==b||_r.current||Rs?(typeof f=="function"&&(vg(t,n,f,s),b=t.memoizedState),(d=Rs||zj(t,n,d,s,h,b,c)||!1)?(m||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(s,b,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(s,b,c)),typeof o.componentDidUpdate=="function"&&(t.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(t.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),t.memoizedProps=s,t.memoizedState=b),o.props=s,o.state=b,o.context=c,s=d):(typeof o.componentDidUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===e.memoizedProps&&h===e.memoizedState||(t.flags|=1024),s=!1)}return _g(e,t,n,s,i,a)}function _g(e,t,n,s,a,i){sS(e,t);var o=(t.flags&128)!==0;if(!s&&!o)return a&&Mj(t,n,!1),vs(e,t,i);s=t.stateNode,aT.current=t;var l=o&&typeof n.getDerivedStateFromError!="function"?null:s.render();return t.flags|=1,e!==null&&o?(t.child=Bo(t,e.child,null,i),t.child=Bo(t,null,l,i)):or(e,t,l,i),t.memoizedState=s.state,a&&Mj(t,n,!0),t.child}function aS(e){var t=e.stateNode;t.pendingContext?Tj(e,t.pendingContext,t.pendingContext!==t.context):t.context&&Tj(e,t.context,!1),Ov(e,t.containerInfo)}function Qj(e,t,n,s,a){return Fo(),kv(a),t.flags|=256,or(e,t,n,s),t.child}var kg={dehydrated:null,treeContext:null,retryLane:0};function Sg(e){return{baseLanes:e,cachePool:null,transitions:null}}function iS(e,t,n){var s=t.pendingProps,a=mt.current,i=!1,o=(t.flags&128)!==0,l;if((l=o)||(l=e!==null&&e.memoizedState===null?!1:(a&2)!==0),l?(i=!0,t.flags&=-129):(e===null||e.memoizedState!==null)&&(a|=1),nt(mt,a&1),e===null)return yg(t),e=t.memoizedState,e!==null&&(e=e.dehydrated,e!==null)?(t.mode&1?e.data==="$!"?t.lanes=8:t.lanes=1073741824:t.lanes=1,null):(o=s.children,e=s.fallback,i?(s=t.mode,i=t.child,o={mode:"hidden",children:o},!(s&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=K0(o,s,0,null),e=ui(e,s,n,null),i.return=t,e.return=t,i.sibling=e,t.child=i,t.child.memoizedState=Sg(n),t.memoizedState=kg,e):Fv(t,o));if(a=e.memoizedState,a!==null&&(l=a.dehydrated,l!==null))return iT(e,t,o,s,l,a,n);if(i){i=s.fallback,o=t.mode,a=e.child,l=a.sibling;var c={mode:"hidden",children:s.children};return!(o&1)&&t.child!==a?(s=t.child,s.childLanes=0,s.pendingProps=c,t.deletions=null):(s=da(a,c),s.subtreeFlags=a.subtreeFlags&14680064),l!==null?i=da(l,i):(i=ui(i,o,n,null),i.flags|=2),i.return=t,s.return=t,s.sibling=i,t.child=s,s=i,i=t.child,o=e.child.memoizedState,o=o===null?Sg(n):{baseLanes:o.baseLanes|n,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=e.childLanes&~n,t.memoizedState=kg,s}return i=e.child,e=i.sibling,s=da(i,{mode:"visible",children:s.children}),!(t.mode&1)&&(s.lanes=n),s.return=t,s.sibling=null,e!==null&&(n=t.deletions,n===null?(t.deletions=[e],t.flags|=16):n.push(e)),t.child=s,t.memoizedState=null,s}function Fv(e,t){return t=K0({mode:"visible",children:t},e.mode,0,null),t.return=e,e.child=t}function Xu(e,t,n,s){return s!==null&&kv(s),Bo(t,e.child,null,n),e=Fv(t,t.pendingProps.children),e.flags|=2,t.memoizedState=null,e}function iT(e,t,n,s,a,i,o){if(n)return t.flags&256?(t.flags&=-257,s=Bf(Error(fe(422))),Xu(e,t,o,s)):t.memoizedState!==null?(t.child=e.child,t.flags|=128,null):(i=s.fallback,a=t.mode,s=K0({mode:"visible",children:s.children},a,0,null),i=ui(i,a,o,null),i.flags|=2,s.return=t,i.return=t,s.sibling=i,t.child=s,t.mode&1&&Bo(t,e.child,null,o),t.child.memoizedState=Sg(o),t.memoizedState=kg,i);if(!(t.mode&1))return Xu(e,t,o,null);if(a.data==="$!"){if(s=a.nextSibling&&a.nextSibling.dataset,s)var l=s.dgst;return s=l,i=Error(fe(419)),s=Bf(i,s,void 0),Xu(e,t,o,s)}if(l=(o&e.childLanes)!==0,wr||l){if(s=Rt,s!==null){switch(o&-o){case 4:a=2;break;case 16:a=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:a=32;break;case 536870912:a=268435456;break;default:a=0}a=a&(s.suspendedLanes|o)?0:a,a!==0&&a!==i.retryLane&&(i.retryLane=a,bs(e,a),Pn(s,e,a,-1))}return Vv(),s=Bf(Error(fe(421))),Xu(e,t,o,s)}return a.data==="$?"?(t.flags|=128,t.child=e.child,t=bT.bind(null,e),a._reactRetry=t,null):(e=i.treeContext,Dr=ia(a.nextSibling),Br=t,dt=!0,kn=null,e!==null&&(en[tn++]=os,en[tn++]=ls,en[tn++]=xi,os=e.id,ls=e.overflow,xi=t),t=Fv(t,s.children),t.flags|=4096,t)}function Yj(e,t,n){e.lanes|=t;var s=e.alternate;s!==null&&(s.lanes|=t),bg(e.return,t,n)}function zf(e,t,n,s,a){var i=e.memoizedState;i===null?e.memoizedState={isBackwards:t,rendering:null,renderingStartTime:0,last:s,tail:n,tailMode:a}:(i.isBackwards=t,i.rendering=null,i.renderingStartTime=0,i.last=s,i.tail=n,i.tailMode=a)}function oS(e,t,n){var s=t.pendingProps,a=s.revealOrder,i=s.tail;if(or(e,t,s.children,n),s=mt.current,s&2)s=s&1|2,t.flags|=128;else{if(e!==null&&e.flags&128)e:for(e=t.child;e!==null;){if(e.tag===13)e.memoizedState!==null&&Yj(e,n,t);else if(e.tag===19)Yj(e,n,t);else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break e;for(;e.sibling===null;){if(e.return===null||e.return===t)break e;e=e.return}e.sibling.return=e.return,e=e.sibling}s&=1}if(nt(mt,s),!(t.mode&1))t.memoizedState=null;else switch(a){case"forwards":for(n=t.child,a=null;n!==null;)e=n.alternate,e!==null&&hh(e)===null&&(a=n),n=n.sibling;n=a,n===null?(a=t.child,t.child=null):(a=n.sibling,n.sibling=null),zf(t,!1,a,n,i);break;case"backwards":for(n=null,a=t.child,t.child=null;a!==null;){if(e=a.alternate,e!==null&&hh(e)===null){t.child=a;break}e=a.sibling,a.sibling=n,n=a,a=e}zf(t,!0,n,null,i);break;case"together":zf(t,!1,null,null,void 0);break;default:t.memoizedState=null}return t.child}function Mm(e,t){!(t.mode&1)&&e!==null&&(e.alternate=null,t.alternate=null,t.flags|=2)}function vs(e,t,n){if(e!==null&&(t.dependencies=e.dependencies),yi|=t.lanes,!(n&t.childLanes))return null;if(e!==null&&t.child!==e.child)throw Error(fe(153));if(t.child!==null){for(e=t.child,n=da(e,e.pendingProps),t.child=n,n.return=t;e.sibling!==null;)e=e.sibling,n=n.sibling=da(e,e.pendingProps),n.return=t;n.sibling=null}return t.child}function oT(e,t,n){switch(t.tag){case 3:aS(t),Fo();break;case 5:M6(t);break;case 1:kr(t.type)&&oh(t);break;case 4:Ov(t,t.stateNode.containerInfo);break;case 10:var s=t.type._context,a=t.memoizedProps.value;nt(dh,s._currentValue),s._currentValue=a;break;case 13:if(s=t.memoizedState,s!==null)return s.dehydrated!==null?(nt(mt,mt.current&1),t.flags|=128,null):n&t.child.childLanes?iS(e,t,n):(nt(mt,mt.current&1),e=vs(e,t,n),e!==null?e.sibling:null);nt(mt,mt.current&1);break;case 19:if(s=(n&t.childLanes)!==0,e.flags&128){if(s)return oS(e,t,n);t.flags|=128}if(a=t.memoizedState,a!==null&&(a.rendering=null,a.tail=null,a.lastEffect=null),nt(mt,mt.current),s)break;return null;case 22:case 23:return t.lanes=0,nS(e,t,n)}return vs(e,t,n)}var lS,Cg,cS,dS;lS=function(e,t){for(var n=t.child;n!==null;){if(n.tag===5||n.tag===6)e.appendChild(n.stateNode);else if(n.tag!==4&&n.child!==null){n.child.return=n,n=n.child;continue}if(n===t)break;for(;n.sibling===null;){if(n.return===null||n.return===t)return;n=n.return}n.sibling.return=n.return,n=n.sibling}};Cg=function(){};cS=function(e,t,n,s){var a=e.memoizedProps;if(a!==s){e=t.stateNode,Ga(Wn.current);var i=null;switch(n){case"input":a=Qx(e,a),s=Qx(e,s),i=[];break;case"select":a=pt({},a,{value:void 0}),s=pt({},s,{value:void 0}),i=[];break;case"textarea":a=Jx(e,a),s=Jx(e,s),i=[];break;default:typeof a.onClick!="function"&&typeof s.onClick=="function"&&(e.onclick=ah)}eg(n,s);var o;n=null;for(d in a)if(!s.hasOwnProperty(d)&&a.hasOwnProperty(d)&&a[d]!=null)if(d==="style"){var l=a[d];for(o in l)l.hasOwnProperty(o)&&(n||(n={}),n[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Kc.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in s){var c=s[d];if(l=a!=null?a[d]:void 0,s.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(n||(n={}),n[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(n||(n={}),n[o]=c[o])}else n||(i||(i=[]),i.push(d,n)),n=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Kc.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&it("scroll",e),i||l===c||(i=[])):(i=i||[]).push(d,c))}n&&(i=i||[]).push("style",n);var d=i;(t.updateQueue=d)&&(t.flags|=4)}};dS=function(e,t,n,s){n!==s&&(t.flags|=4)};function Jl(e,t){if(!dt)switch(e.tailMode){case"hidden":t=e.tail;for(var n=null;t!==null;)t.alternate!==null&&(n=t),t=t.sibling;n===null?e.tail=null:n.sibling=null;break;case"collapsed":n=e.tail;for(var s=null;n!==null;)n.alternate!==null&&(s=n),n=n.sibling;s===null?t||e.tail===null?e.tail=null:e.tail.sibling=null:s.sibling=null}}function Kt(e){var t=e.alternate!==null&&e.alternate.child===e.child,n=0,s=0;if(t)for(var a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags&14680064,s|=a.flags&14680064,a.return=e,a=a.sibling;else for(a=e.child;a!==null;)n|=a.lanes|a.childLanes,s|=a.subtreeFlags,s|=a.flags,a.return=e,a=a.sibling;return e.subtreeFlags|=s,e.childLanes=n,t}function lT(e,t,n){var s=t.pendingProps;switch(_v(t),t.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return Kt(t),null;case 1:return kr(t.type)&&ih(),Kt(t),null;case 3:return s=t.stateNode,zo(),ct(_r),ct(tr),Mv(),s.pendingContext&&(s.context=s.pendingContext,s.pendingContext=null),(e===null||e.child===null)&&(Qu(t)?t.flags|=4:e===null||e.memoizedState.isDehydrated&&!(t.flags&256)||(t.flags|=1024,kn!==null&&($g(kn),kn=null))),Cg(e,t),Kt(t),null;case 5:Tv(t);var a=Ga(ad.current);if(n=t.type,e!==null&&t.stateNode!=null)cS(e,t,n,s,a),e.ref!==t.ref&&(t.flags|=512,t.flags|=2097152);else{if(!s){if(t.stateNode===null)throw Error(fe(166));return Kt(t),null}if(e=Ga(Wn.current),Qu(t)){s=t.stateNode,n=t.type;var i=t.memoizedProps;switch(s[zn]=t,s[nd]=i,e=(t.mode&1)!==0,n){case"dialog":it("cancel",s),it("close",s);break;case"iframe":case"object":case"embed":it("load",s);break;case"video":case"audio":for(a=0;a<_c.length;a++)it(_c[a],s);break;case"source":it("error",s);break;case"img":case"image":case"link":it("error",s),it("load",s);break;case"details":it("toggle",s);break;case"input":aj(s,i),it("invalid",s);break;case"select":s._wrapperState={wasMultiple:!!i.multiple},it("invalid",s);break;case"textarea":oj(s,i),it("invalid",s)}eg(n,i),a=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?s.textContent!==l&&(i.suppressHydrationWarning!==!0&&Gu(s.textContent,l,e),a=["children",l]):typeof l=="number"&&s.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Gu(s.textContent,l,e),a=["children",""+l]):Kc.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&it("scroll",s)}switch(n){case"input":Bu(s),ij(s,i,!0);break;case"textarea":Bu(s),lj(s);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(s.onclick=ah)}s=a,t.updateQueue=s,s!==null&&(t.flags|=4)}else{o=a.nodeType===9?a:a.ownerDocument,e==="http://www.w3.org/1999/xhtml"&&(e=D3(n)),e==="http://www.w3.org/1999/xhtml"?n==="script"?(e=o.createElement("div"),e.innerHTML="<script><\/script>",e=e.removeChild(e.firstChild)):typeof s.is=="string"?e=o.createElement(n,{is:s.is}):(e=o.createElement(n),n==="select"&&(o=e,s.multiple?o.multiple=!0:s.size&&(o.size=s.size))):e=o.createElementNS(e,n),e[zn]=t,e[nd]=s,lS(e,t,!1,!1),t.stateNode=e;e:{switch(o=tg(n,s),n){case"dialog":it("cancel",e),it("close",e),a=s;break;case"iframe":case"object":case"embed":it("load",e),a=s;break;case"video":case"audio":for(a=0;a<_c.length;a++)it(_c[a],e);a=s;break;case"source":it("error",e),a=s;break;case"img":case"image":case"link":it("error",e),it("load",e),a=s;break;case"details":it("toggle",e),a=s;break;case"input":aj(e,s),a=Qx(e,s),it("invalid",e);break;case"option":a=s;break;case"select":e._wrapperState={wasMultiple:!!s.multiple},a=pt({},s,{value:void 0}),it("invalid",e);break;case"textarea":oj(e,s),a=Jx(e,s),it("invalid",e);break;default:a=s}eg(n,a),l=a;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?z3(e,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&F3(e,c)):i==="children"?typeof c=="string"?(n!=="textarea"||c!=="")&&Gc(e,c):typeof c=="number"&&Gc(e,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Kc.hasOwnProperty(i)?c!=null&&i==="onScroll"&&it("scroll",e):c!=null&&cv(e,i,c,o))}switch(n){case"input":Bu(e),ij(e,s,!1);break;case"textarea":Bu(e),lj(e);break;case"option":s.value!=null&&e.setAttribute("value",""+ya(s.value));break;case"select":e.multiple=!!s.multiple,i=s.value,i!=null?co(e,!!s.multiple,i,!1):s.defaultValue!=null&&co(e,!!s.multiple,s.defaultValue,!0);break;default:typeof a.onClick=="function"&&(e.onclick=ah)}switch(n){case"button":case"input":case"select":case"textarea":s=!!s.autoFocus;break e;case"img":s=!0;break e;default:s=!1}}s&&(t.flags|=4)}t.ref!==null&&(t.flags|=512,t.flags|=2097152)}return Kt(t),null;case 6:if(e&&t.stateNode!=null)dS(e,t,e.memoizedProps,s);else{if(typeof s!="string"&&t.stateNode===null)throw Error(fe(166));if(n=Ga(ad.current),Ga(Wn.current),Qu(t)){if(s=t.stateNode,n=t.memoizedProps,s[zn]=t,(i=s.nodeValue!==n)&&(e=Br,e!==null))switch(e.tag){case 3:Gu(s.nodeValue,n,(e.mode&1)!==0);break;case 5:e.memoizedProps.suppressHydrationWarning!==!0&&Gu(s.nodeValue,n,(e.mode&1)!==0)}i&&(t.flags|=4)}else s=(n.nodeType===9?n:n.ownerDocument).createTextNode(s),s[zn]=t,t.stateNode=s}return Kt(t),null;case 13:if(ct(mt),s=t.memoizedState,e===null||e.memoizedState!==null&&e.memoizedState.dehydrated!==null){if(dt&&Dr!==null&&t.mode&1&&!(t.flags&128))A6(),Fo(),t.flags|=98560,i=!1;else if(i=Qu(t),s!==null&&s.dehydrated!==null){if(e===null){if(!i)throw Error(fe(318));if(i=t.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(fe(317));i[zn]=t}else Fo(),!(t.flags&128)&&(t.memoizedState=null),t.flags|=4;Kt(t),i=!1}else kn!==null&&($g(kn),kn=null),i=!0;if(!i)return t.flags&65536?t:null}return t.flags&128?(t.lanes=n,t):(s=s!==null,s!==(e!==null&&e.memoizedState!==null)&&s&&(t.child.flags|=8192,t.mode&1&&(e===null||mt.current&1?Pt===0&&(Pt=3):Vv())),t.updateQueue!==null&&(t.flags|=4),Kt(t),null);case 4:return zo(),Cg(e,t),e===null&&td(t.stateNode.containerInfo),Kt(t),null;case 10:return Av(t.type._context),Kt(t),null;case 17:return kr(t.type)&&ih(),Kt(t),null;case 19:if(ct(mt),i=t.memoizedState,i===null)return Kt(t),null;if(s=(t.flags&128)!==0,o=i.rendering,o===null)if(s)Jl(i,!1);else{if(Pt!==0||e!==null&&e.flags&128)for(e=t.child;e!==null;){if(o=hh(e),o!==null){for(t.flags|=128,Jl(i,!1),s=o.updateQueue,s!==null&&(t.updateQueue=s,t.flags|=4),t.subtreeFlags=0,s=n,n=t.child;n!==null;)i=n,e=s,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=e,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,e=o.dependencies,i.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext}),n=n.sibling;return nt(mt,mt.current&1|2),t.child}e=e.sibling}i.tail!==null&&bt()>Uo&&(t.flags|=128,s=!0,Jl(i,!1),t.lanes=4194304)}else{if(!s)if(e=hh(o),e!==null){if(t.flags|=128,s=!0,n=e.updateQueue,n!==null&&(t.updateQueue=n,t.flags|=4),Jl(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!dt)return Kt(t),null}else 2*bt()-i.renderingStartTime>Uo&&n!==1073741824&&(t.flags|=128,s=!0,Jl(i,!1),t.lanes=4194304);i.isBackwards?(o.sibling=t.child,t.child=o):(n=i.last,n!==null?n.sibling=o:t.child=o,i.last=o)}return i.tail!==null?(t=i.tail,i.rendering=t,i.tail=t.sibling,i.renderingStartTime=bt(),t.sibling=null,n=mt.current,nt(mt,s?n&1|2:n&1),t):(Kt(t),null);case 22:case 23:return Wv(),s=t.memoizedState!==null,e!==null&&e.memoizedState!==null!==s&&(t.flags|=8192),s&&t.mode&1?Lr&1073741824&&(Kt(t),t.subtreeFlags&6&&(t.flags|=8192)):Kt(t),null;case 24:return null;case 25:return null}throw Error(fe(156,t.tag))}function cT(e,t){switch(_v(t),t.tag){case 1:return kr(t.type)&&ih(),e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 3:return zo(),ct(_r),ct(tr),Mv(),e=t.flags,e&65536&&!(e&128)?(t.flags=e&-65537|128,t):null;case 5:return Tv(t),null;case 13:if(ct(mt),e=t.memoizedState,e!==null&&e.dehydrated!==null){if(t.alternate===null)throw Error(fe(340));Fo()}return e=t.flags,e&65536?(t.flags=e&-65537|128,t):null;case 19:return ct(mt),null;case 4:return zo(),null;case 10:return Av(t.type._context),null;case 22:case 23:return Wv(),null;case 24:return null;default:return null}}var Ju=!1,Xt=!1,dT=typeof WeakSet=="function"?WeakSet:Set,Ne=null;function to(e,t){var n=e.ref;if(n!==null)if(typeof n=="function")try{n(null)}catch(s){xt(e,t,s)}else n.current=null}function Ag(e,t,n){try{n()}catch(s){xt(e,t,s)}}var Xj=!1;function uT(e,t){if(ug=rh,e=f6(),wv(e)){if("selectionStart"in e)var n={start:e.selectionStart,end:e.selectionEnd};else e:{n=(n=e.ownerDocument)&&n.defaultView||window;var s=n.getSelection&&n.getSelection();if(s&&s.rangeCount!==0){n=s.anchorNode;var a=s.anchorOffset,i=s.focusNode;s=s.focusOffset;try{n.nodeType,i.nodeType}catch{n=null;break e}var o=0,l=-1,c=-1,d=0,m=0,u=e,h=null;t:for(;;){for(var f;u!==n||a!==0&&u.nodeType!==3||(l=o+a),u!==i||s!==0&&u.nodeType!==3||(c=o+s),u.nodeType===3&&(o+=u.nodeValue.length),(f=u.firstChild)!==null;)h=u,u=f;for(;;){if(u===e)break t;if(h===n&&++d===a&&(l=o),h===i&&++m===s&&(c=o),(f=u.nextSibling)!==null)break;u=h,h=u.parentNode}u=f}n=l===-1||c===-1?null:{start:l,end:c}}else n=null}n=n||{start:0,end:0}}else n=null;for(mg={focusedElem:e,selectionRange:n},rh=!1,Ne=t;Ne!==null;)if(t=Ne,e=t.child,(t.subtreeFlags&1028)!==0&&e!==null)e.return=t,Ne=e;else for(;Ne!==null;){t=Ne;try{var b=t.alternate;if(t.flags&1024)switch(t.tag){case 0:case 11:case 15:break;case 1:if(b!==null){var g=b.memoizedProps,x=b.memoizedState,p=t.stateNode,y=p.getSnapshotBeforeUpdate(t.elementType===t.type?g:yn(t.type,g),x);p.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var v=t.stateNode.containerInfo;v.nodeType===1?v.textContent="":v.nodeType===9&&v.documentElement&&v.removeChild(v.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(fe(163))}}catch(N){xt(t,t.return,N)}if(e=t.sibling,e!==null){e.return=t.return,Ne=e;break}Ne=t.return}return b=Xj,Xj=!1,b}function $c(e,t,n){var s=t.updateQueue;if(s=s!==null?s.lastEffect:null,s!==null){var a=s=s.next;do{if((a.tag&e)===e){var i=a.destroy;a.destroy=void 0,i!==void 0&&Ag(t,n,i)}a=a.next}while(a!==s)}}function V0(e,t){if(t=t.updateQueue,t=t!==null?t.lastEffect:null,t!==null){var n=t=t.next;do{if((n.tag&e)===e){var s=n.create;n.destroy=s()}n=n.next}while(n!==t)}}function Pg(e){var t=e.ref;if(t!==null){var n=e.stateNode;switch(e.tag){case 5:e=n;break;default:e=n}typeof t=="function"?t(e):t.current=e}}function uS(e){var t=e.alternate;t!==null&&(e.alternate=null,uS(t)),e.child=null,e.deletions=null,e.sibling=null,e.tag===5&&(t=e.stateNode,t!==null&&(delete t[zn],delete t[nd],delete t[fg],delete t[K9],delete t[G9])),e.stateNode=null,e.return=null,e.dependencies=null,e.memoizedProps=null,e.memoizedState=null,e.pendingProps=null,e.stateNode=null,e.updateQueue=null}function mS(e){return e.tag===5||e.tag===3||e.tag===4}function Jj(e){e:for(;;){for(;e.sibling===null;){if(e.return===null||mS(e.return))return null;e=e.return}for(e.sibling.return=e.return,e=e.sibling;e.tag!==5&&e.tag!==6&&e.tag!==18;){if(e.flags&2||e.child===null||e.tag===4)continue e;e.child.return=e,e=e.child}if(!(e.flags&2))return e.stateNode}}function Eg(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.nodeType===8?n.parentNode.insertBefore(e,t):n.insertBefore(e,t):(n.nodeType===8?(t=n.parentNode,t.insertBefore(e,n)):(t=n,t.appendChild(e)),n=n._reactRootContainer,n!=null||t.onclick!==null||(t.onclick=ah));else if(s!==4&&(e=e.child,e!==null))for(Eg(e,t,n),e=e.sibling;e!==null;)Eg(e,t,n),e=e.sibling}function Og(e,t,n){var s=e.tag;if(s===5||s===6)e=e.stateNode,t?n.insertBefore(e,t):n.appendChild(e);else if(s!==4&&(e=e.child,e!==null))for(Og(e,t,n),e=e.sibling;e!==null;)Og(e,t,n),e=e.sibling}var zt=null,jn=!1;function Ts(e,t,n){for(n=n.child;n!==null;)hS(e,t,n),n=n.sibling}function hS(e,t,n){if(Un&&typeof Un.onCommitFiberUnmount=="function")try{Un.onCommitFiberUnmount(I0,n)}catch{}switch(n.tag){case 5:Xt||to(n,t);case 6:var s=zt,a=jn;zt=null,Ts(e,t,n),zt=s,jn=a,zt!==null&&(jn?(e=zt,n=n.stateNode,e.nodeType===8?e.parentNode.removeChild(n):e.removeChild(n)):zt.removeChild(n.stateNode));break;case 18:zt!==null&&(jn?(e=zt,n=n.stateNode,e.nodeType===8?Lf(e.parentNode,n):e.nodeType===1&&Lf(e,n),Jc(e)):Lf(zt,n.stateNode));break;case 4:s=zt,a=jn,zt=n.stateNode.containerInfo,jn=!0,Ts(e,t,n),zt=s,jn=a;break;case 0:case 11:case 14:case 15:if(!Xt&&(s=n.updateQueue,s!==null&&(s=s.lastEffect,s!==null))){a=s=s.next;do{var i=a,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Ag(n,t,o),a=a.next}while(a!==s)}Ts(e,t,n);break;case 1:if(!Xt&&(to(n,t),s=n.stateNode,typeof s.componentWillUnmount=="function"))try{s.props=n.memoizedProps,s.state=n.memoizedState,s.componentWillUnmount()}catch(l){xt(n,t,l)}Ts(e,t,n);break;case 21:Ts(e,t,n);break;case 22:n.mode&1?(Xt=(s=Xt)||n.memoizedState!==null,Ts(e,t,n),Xt=s):Ts(e,t,n);break;default:Ts(e,t,n)}}function Zj(e){var t=e.updateQueue;if(t!==null){e.updateQueue=null;var n=e.stateNode;n===null&&(n=e.stateNode=new dT),t.forEach(function(s){var a=vT.bind(null,e,s);n.has(s)||(n.add(s),s.then(a,a))})}}function xn(e,t){var n=t.deletions;if(n!==null)for(var s=0;s<n.length;s++){var a=n[s];try{var i=e,o=t,l=o;e:for(;l!==null;){switch(l.tag){case 5:zt=l.stateNode,jn=!1;break e;case 3:zt=l.stateNode.containerInfo,jn=!0;break e;case 4:zt=l.stateNode.containerInfo,jn=!0;break e}l=l.return}if(zt===null)throw Error(fe(160));hS(i,o,a),zt=null,jn=!1;var c=a.alternate;c!==null&&(c.return=null),a.return=null}catch(d){xt(a,t,d)}}if(t.subtreeFlags&12854)for(t=t.child;t!==null;)pS(t,e),t=t.sibling}function pS(e,t){var n=e.alternate,s=e.flags;switch(e.tag){case 0:case 11:case 14:case 15:if(xn(t,e),$n(e),s&4){try{$c(3,e,e.return),V0(3,e)}catch(g){xt(e,e.return,g)}try{$c(5,e,e.return)}catch(g){xt(e,e.return,g)}}break;case 1:xn(t,e),$n(e),s&512&&n!==null&&to(n,n.return);break;case 5:if(xn(t,e),$n(e),s&512&&n!==null&&to(n,n.return),e.flags&32){var a=e.stateNode;try{Gc(a,"")}catch(g){xt(e,e.return,g)}}if(s&4&&(a=e.stateNode,a!=null)){var i=e.memoizedProps,o=n!==null?n.memoizedProps:i,l=e.type,c=e.updateQueue;if(e.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&R3(a,i),tg(l,o);var d=tg(l,i);for(o=0;o<c.length;o+=2){var m=c[o],u=c[o+1];m==="style"?z3(a,u):m==="dangerouslySetInnerHTML"?F3(a,u):m==="children"?Gc(a,u):cv(a,m,u,d)}switch(l){case"input":Yx(a,i);break;case"textarea":I3(a,i);break;case"select":var h=a._wrapperState.wasMultiple;a._wrapperState.wasMultiple=!!i.multiple;var f=i.value;f!=null?co(a,!!i.multiple,f,!1):h!==!!i.multiple&&(i.defaultValue!=null?co(a,!!i.multiple,i.defaultValue,!0):co(a,!!i.multiple,i.multiple?[]:"",!1))}a[nd]=i}catch(g){xt(e,e.return,g)}}break;case 6:if(xn(t,e),$n(e),s&4){if(e.stateNode===null)throw Error(fe(162));a=e.stateNode,i=e.memoizedProps;try{a.nodeValue=i}catch(g){xt(e,e.return,g)}}break;case 3:if(xn(t,e),$n(e),s&4&&n!==null&&n.memoizedState.isDehydrated)try{Jc(t.containerInfo)}catch(g){xt(e,e.return,g)}break;case 4:xn(t,e),$n(e);break;case 13:xn(t,e),$n(e),a=e.child,a.flags&8192&&(i=a.memoizedState!==null,a.stateNode.isHidden=i,!i||a.alternate!==null&&a.alternate.memoizedState!==null||(qv=bt())),s&4&&Zj(e);break;case 22:if(m=n!==null&&n.memoizedState!==null,e.mode&1?(Xt=(d=Xt)||m,xn(t,e),Xt=d):xn(t,e),$n(e),s&8192){if(d=e.memoizedState!==null,(e.stateNode.isHidden=d)&&!m&&e.mode&1)for(Ne=e,m=e.child;m!==null;){for(u=Ne=m;Ne!==null;){switch(h=Ne,f=h.child,h.tag){case 0:case 11:case 14:case 15:$c(4,h,h.return);break;case 1:to(h,h.return);var b=h.stateNode;if(typeof b.componentWillUnmount=="function"){s=h,n=h.return;try{t=s,b.props=t.memoizedProps,b.state=t.memoizedState,b.componentWillUnmount()}catch(g){xt(s,n,g)}}break;case 5:to(h,h.return);break;case 22:if(h.memoizedState!==null){tw(u);continue}}f!==null?(f.return=h,Ne=f):tw(u)}m=m.sibling}e:for(m=null,u=e;;){if(u.tag===5){if(m===null){m=u;try{a=u.stateNode,d?(i=a.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=u.stateNode,c=u.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=B3("display",o))}catch(g){xt(e,e.return,g)}}}else if(u.tag===6){if(m===null)try{u.stateNode.nodeValue=d?"":u.memoizedProps}catch(g){xt(e,e.return,g)}}else if((u.tag!==22&&u.tag!==23||u.memoizedState===null||u===e)&&u.child!==null){u.child.return=u,u=u.child;continue}if(u===e)break e;for(;u.sibling===null;){if(u.return===null||u.return===e)break e;m===u&&(m=null),u=u.return}m===u&&(m=null),u.sibling.return=u.return,u=u.sibling}}break;case 19:xn(t,e),$n(e),s&4&&Zj(e);break;case 21:break;default:xn(t,e),$n(e)}}function $n(e){var t=e.flags;if(t&2){try{e:{for(var n=e.return;n!==null;){if(mS(n)){var s=n;break e}n=n.return}throw Error(fe(160))}switch(s.tag){case 5:var a=s.stateNode;s.flags&32&&(Gc(a,""),s.flags&=-33);var i=Jj(e);Og(e,i,a);break;case 3:case 4:var o=s.stateNode.containerInfo,l=Jj(e);Eg(e,l,o);break;default:throw Error(fe(161))}}catch(c){xt(e,e.return,c)}e.flags&=-3}t&4096&&(e.flags&=-4097)}function mT(e,t,n){Ne=e,fS(e)}function fS(e,t,n){for(var s=(e.mode&1)!==0;Ne!==null;){var a=Ne,i=a.child;if(a.tag===22&&s){var o=a.memoizedState!==null||Ju;if(!o){var l=a.alternate,c=l!==null&&l.memoizedState!==null||Xt;l=Ju;var d=Xt;if(Ju=o,(Xt=c)&&!d)for(Ne=a;Ne!==null;)o=Ne,c=o.child,o.tag===22&&o.memoizedState!==null?rw(a):c!==null?(c.return=o,Ne=c):rw(a);for(;i!==null;)Ne=i,fS(i),i=i.sibling;Ne=a,Ju=l,Xt=d}ew(e)}else a.subtreeFlags&8772&&i!==null?(i.return=a,Ne=i):ew(e)}}function ew(e){for(;Ne!==null;){var t=Ne;if(t.flags&8772){var n=t.alternate;try{if(t.flags&8772)switch(t.tag){case 0:case 11:case 15:Xt||V0(5,t);break;case 1:var s=t.stateNode;if(t.flags&4&&!Xt)if(n===null)s.componentDidMount();else{var a=t.elementType===t.type?n.memoizedProps:yn(t.type,n.memoizedProps);s.componentDidUpdate(a,n.memoizedState,s.__reactInternalSnapshotBeforeUpdate)}var i=t.updateQueue;i!==null&&Dj(t,i,s);break;case 3:var o=t.updateQueue;if(o!==null){if(n=null,t.child!==null)switch(t.child.tag){case 5:n=t.child.stateNode;break;case 1:n=t.child.stateNode}Dj(t,o,n)}break;case 5:var l=t.stateNode;if(n===null&&t.flags&4){n=l;var c=t.memoizedProps;switch(t.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&n.focus();break;case"img":c.src&&(n.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(t.memoizedState===null){var d=t.alternate;if(d!==null){var m=d.memoizedState;if(m!==null){var u=m.dehydrated;u!==null&&Jc(u)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(fe(163))}Xt||t.flags&512&&Pg(t)}catch(h){xt(t,t.return,h)}}if(t===e){Ne=null;break}if(n=t.sibling,n!==null){n.return=t.return,Ne=n;break}Ne=t.return}}function tw(e){for(;Ne!==null;){var t=Ne;if(t===e){Ne=null;break}var n=t.sibling;if(n!==null){n.return=t.return,Ne=n;break}Ne=t.return}}function rw(e){for(;Ne!==null;){var t=Ne;try{switch(t.tag){case 0:case 11:case 15:var n=t.return;try{V0(4,t)}catch(c){xt(t,n,c)}break;case 1:var s=t.stateNode;if(typeof s.componentDidMount=="function"){var a=t.return;try{s.componentDidMount()}catch(c){xt(t,a,c)}}var i=t.return;try{Pg(t)}catch(c){xt(t,i,c)}break;case 5:var o=t.return;try{Pg(t)}catch(c){xt(t,o,c)}}}catch(c){xt(t,t.return,c)}if(t===e){Ne=null;break}var l=t.sibling;if(l!==null){l.return=t.return,Ne=l;break}Ne=t.return}}var hT=Math.ceil,xh=ks.ReactCurrentDispatcher,Bv=ks.ReactCurrentOwner,ln=ks.ReactCurrentBatchConfig,Ue=0,Rt=null,wt=null,Ut=0,Lr=0,ro=Na(0),Pt=0,cd=null,yi=0,H0=0,zv=0,Rc=null,vr=null,qv=0,Uo=1/0,es=null,gh=!1,Tg=null,la=null,Zu=!1,ea=null,yh=0,Ic=0,Mg=null,Lm=-1,$m=0;function mr(){return Ue&6?bt():Lm!==-1?Lm:Lm=bt()}function ca(e){return e.mode&1?Ue&2&&Ut!==0?Ut&-Ut:Y9.transition!==null?($m===0&&($m=Z3()),$m):(e=Qe,e!==0||(e=window.event,e=e===void 0?16:i6(e.type)),e):1}function Pn(e,t,n,s){if(50<Ic)throw Ic=0,Mg=null,Error(fe(185));mu(e,n,s),(!(Ue&2)||e!==Rt)&&(e===Rt&&(!(Ue&2)&&(H0|=n),Pt===4&&Bs(e,Ut)),Sr(e,s),n===1&&Ue===0&&!(t.mode&1)&&(Uo=bt()+500,q0&&_a()))}function Sr(e,t){var n=e.callbackNode;YO(e,t);var s=th(e,e===Rt?Ut:0);if(s===0)n!==null&&uj(n),e.callbackNode=null,e.callbackPriority=0;else if(t=s&-s,e.callbackPriority!==t){if(n!=null&&uj(n),t===1)e.tag===0?Q9(nw.bind(null,e)):k6(nw.bind(null,e)),V9(function(){!(Ue&6)&&_a()}),n=null;else{switch(e6(s)){case 1:n=pv;break;case 4:n=X3;break;case 16:n=eh;break;case 536870912:n=J3;break;default:n=eh}n=NS(n,xS.bind(null,e))}e.callbackPriority=t,e.callbackNode=n}}function xS(e,t){if(Lm=-1,$m=0,Ue&6)throw Error(fe(327));var n=e.callbackNode;if(fo()&&e.callbackNode!==n)return null;var s=th(e,e===Rt?Ut:0);if(s===0)return null;if(s&30||s&e.expiredLanes||t)t=bh(e,s);else{t=s;var a=Ue;Ue|=2;var i=yS();(Rt!==e||Ut!==t)&&(es=null,Uo=bt()+500,di(e,t));do try{xT();break}catch(l){gS(e,l)}while(!0);Cv(),xh.current=i,Ue=a,wt!==null?t=0:(Rt=null,Ut=0,t=Pt)}if(t!==0){if(t===2&&(a=ig(e),a!==0&&(s=a,t=Lg(e,a))),t===1)throw n=cd,di(e,0),Bs(e,s),Sr(e,bt()),n;if(t===6)Bs(e,s);else{if(a=e.current.alternate,!(s&30)&&!pT(a)&&(t=bh(e,s),t===2&&(i=ig(e),i!==0&&(s=i,t=Lg(e,i))),t===1))throw n=cd,di(e,0),Bs(e,s),Sr(e,bt()),n;switch(e.finishedWork=a,e.finishedLanes=s,t){case 0:case 1:throw Error(fe(345));case 2:Da(e,vr,es);break;case 3:if(Bs(e,s),(s&130023424)===s&&(t=qv+500-bt(),10<t)){if(th(e,0)!==0)break;if(a=e.suspendedLanes,(a&s)!==s){mr(),e.pingedLanes|=e.suspendedLanes&a;break}e.timeoutHandle=pg(Da.bind(null,e,vr,es),t);break}Da(e,vr,es);break;case 4:if(Bs(e,s),(s&4194240)===s)break;for(t=e.eventTimes,a=-1;0<s;){var o=31-An(s);i=1<<o,o=t[o],o>a&&(a=o),s&=~i}if(s=a,s=bt()-s,s=(120>s?120:480>s?480:1080>s?1080:1920>s?1920:3e3>s?3e3:4320>s?4320:1960*hT(s/1960))-s,10<s){e.timeoutHandle=pg(Da.bind(null,e,vr,es),s);break}Da(e,vr,es);break;case 5:Da(e,vr,es);break;default:throw Error(fe(329))}}}return Sr(e,bt()),e.callbackNode===n?xS.bind(null,e):null}function Lg(e,t){var n=Rc;return e.current.memoizedState.isDehydrated&&(di(e,t).flags|=256),e=bh(e,t),e!==2&&(t=vr,vr=n,t!==null&&$g(t)),e}function $g(e){vr===null?vr=e:vr.push.apply(vr,e)}function pT(e){for(var t=e;;){if(t.flags&16384){var n=t.updateQueue;if(n!==null&&(n=n.stores,n!==null))for(var s=0;s<n.length;s++){var a=n[s],i=a.getSnapshot;a=a.value;try{if(!On(i(),a))return!1}catch{return!1}}}if(n=t.child,t.subtreeFlags&16384&&n!==null)n.return=t,t=n;else{if(t===e)break;for(;t.sibling===null;){if(t.return===null||t.return===e)return!0;t=t.return}t.sibling.return=t.return,t=t.sibling}}return!0}function Bs(e,t){for(t&=~zv,t&=~H0,e.suspendedLanes|=t,e.pingedLanes&=~t,e=e.expirationTimes;0<t;){var n=31-An(t),s=1<<n;e[n]=-1,t&=~s}}function nw(e){if(Ue&6)throw Error(fe(327));fo();var t=th(e,0);if(!(t&1))return Sr(e,bt()),null;var n=bh(e,t);if(e.tag!==0&&n===2){var s=ig(e);s!==0&&(t=s,n=Lg(e,s))}if(n===1)throw n=cd,di(e,0),Bs(e,t),Sr(e,bt()),n;if(n===6)throw Error(fe(345));return e.finishedWork=e.current.alternate,e.finishedLanes=t,Da(e,vr,es),Sr(e,bt()),null}function Uv(e,t){var n=Ue;Ue|=1;try{return e(t)}finally{Ue=n,Ue===0&&(Uo=bt()+500,q0&&_a())}}function bi(e){ea!==null&&ea.tag===0&&!(Ue&6)&&fo();var t=Ue;Ue|=1;var n=ln.transition,s=Qe;try{if(ln.transition=null,Qe=1,e)return e()}finally{Qe=s,ln.transition=n,Ue=t,!(Ue&6)&&_a()}}function Wv(){Lr=ro.current,ct(ro)}function di(e,t){e.finishedWork=null,e.finishedLanes=0;var n=e.timeoutHandle;if(n!==-1&&(e.timeoutHandle=-1,W9(n)),wt!==null)for(n=wt.return;n!==null;){var s=n;switch(_v(s),s.tag){case 1:s=s.type.childContextTypes,s!=null&&ih();break;case 3:zo(),ct(_r),ct(tr),Mv();break;case 5:Tv(s);break;case 4:zo();break;case 13:ct(mt);break;case 19:ct(mt);break;case 10:Av(s.type._context);break;case 22:case 23:Wv()}n=n.return}if(Rt=e,wt=e=da(e.current,null),Ut=Lr=t,Pt=0,cd=null,zv=H0=yi=0,vr=Rc=null,Ka!==null){for(t=0;t<Ka.length;t++)if(n=Ka[t],s=n.interleaved,s!==null){n.interleaved=null;var a=s.next,i=n.pending;if(i!==null){var o=i.next;i.next=a,s.next=o}n.pending=s}Ka=null}return e}function gS(e,t){do{var n=wt;try{if(Cv(),Om.current=fh,ph){for(var s=ht.memoizedState;s!==null;){var a=s.queue;a!==null&&(a.pending=null),s=s.next}ph=!1}if(gi=0,Lt=At=ht=null,Lc=!1,id=0,Bv.current=null,n===null||n.return===null){Pt=1,cd=t,wt=null;break}e:{var i=e,o=n.return,l=n,c=t;if(t=Ut,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,m=l,u=m.tag;if(!(m.mode&1)&&(u===0||u===11||u===15)){var h=m.alternate;h?(m.updateQueue=h.updateQueue,m.memoizedState=h.memoizedState,m.lanes=h.lanes):(m.updateQueue=null,m.memoizedState=null)}var f=Wj(o);if(f!==null){f.flags&=-257,Vj(f,o,l,i,t),f.mode&1&&Uj(i,d,t),t=f,c=d;var b=t.updateQueue;if(b===null){var g=new Set;g.add(c),t.updateQueue=g}else b.add(c);break e}else{if(!(t&1)){Uj(i,d,t),Vv();break e}c=Error(fe(426))}}else if(dt&&l.mode&1){var x=Wj(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Vj(x,o,l,i,t),kv(qo(c,l));break e}}i=c=qo(c,l),Pt!==4&&(Pt=2),Rc===null?Rc=[i]:Rc.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,t&=-t,i.lanes|=t;var p=eS(i,c,t);Ij(i,p);break e;case 1:l=c;var y=i.type,v=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||v!==null&&typeof v.componentDidCatch=="function"&&(la===null||!la.has(v)))){i.flags|=65536,t&=-t,i.lanes|=t;var N=tS(i,l,t);Ij(i,N);break e}}i=i.return}while(i!==null)}vS(n)}catch(w){t=w,wt===n&&n!==null&&(wt=n=n.return);continue}break}while(!0)}function yS(){var e=xh.current;return xh.current=fh,e===null?fh:e}function Vv(){(Pt===0||Pt===3||Pt===2)&&(Pt=4),Rt===null||!(yi&268435455)&&!(H0&268435455)||Bs(Rt,Ut)}function bh(e,t){var n=Ue;Ue|=2;var s=yS();(Rt!==e||Ut!==t)&&(es=null,di(e,t));do try{fT();break}catch(a){gS(e,a)}while(!0);if(Cv(),Ue=n,xh.current=s,wt!==null)throw Error(fe(261));return Rt=null,Ut=0,Pt}function fT(){for(;wt!==null;)bS(wt)}function xT(){for(;wt!==null&&!zO();)bS(wt)}function bS(e){var t=wS(e.alternate,e,Lr);e.memoizedProps=e.pendingProps,t===null?vS(e):wt=t,Bv.current=null}function vS(e){var t=e;do{var n=t.alternate;if(e=t.return,t.flags&32768){if(n=cT(n,t),n!==null){n.flags&=32767,wt=n;return}if(e!==null)e.flags|=32768,e.subtreeFlags=0,e.deletions=null;else{Pt=6,wt=null;return}}else if(n=lT(n,t,Lr),n!==null){wt=n;return}if(t=t.sibling,t!==null){wt=t;return}wt=t=e}while(t!==null);Pt===0&&(Pt=5)}function Da(e,t,n){var s=Qe,a=ln.transition;try{ln.transition=null,Qe=1,gT(e,t,n,s)}finally{ln.transition=a,Qe=s}return null}function gT(e,t,n,s){do fo();while(ea!==null);if(Ue&6)throw Error(fe(327));n=e.finishedWork;var a=e.finishedLanes;if(n===null)return null;if(e.finishedWork=null,e.finishedLanes=0,n===e.current)throw Error(fe(177));e.callbackNode=null,e.callbackPriority=0;var i=n.lanes|n.childLanes;if(XO(e,i),e===Rt&&(wt=Rt=null,Ut=0),!(n.subtreeFlags&2064)&&!(n.flags&2064)||Zu||(Zu=!0,NS(eh,function(){return fo(),null})),i=(n.flags&15990)!==0,n.subtreeFlags&15990||i){i=ln.transition,ln.transition=null;var o=Qe;Qe=1;var l=Ue;Ue|=4,Bv.current=null,uT(e,n),pS(n,e),I9(mg),rh=!!ug,mg=ug=null,e.current=n,mT(n),qO(),Ue=l,Qe=o,ln.transition=i}else e.current=n;if(Zu&&(Zu=!1,ea=e,yh=a),i=e.pendingLanes,i===0&&(la=null),VO(n.stateNode),Sr(e,bt()),t!==null)for(s=e.onRecoverableError,n=0;n<t.length;n++)a=t[n],s(a.value,{componentStack:a.stack,digest:a.digest});if(gh)throw gh=!1,e=Tg,Tg=null,e;return yh&1&&e.tag!==0&&fo(),i=e.pendingLanes,i&1?e===Mg?Ic++:(Ic=0,Mg=e):Ic=0,_a(),null}function fo(){if(ea!==null){var e=e6(yh),t=ln.transition,n=Qe;try{if(ln.transition=null,Qe=16>e?16:e,ea===null)var s=!1;else{if(e=ea,ea=null,yh=0,Ue&6)throw Error(fe(331));var a=Ue;for(Ue|=4,Ne=e.current;Ne!==null;){var i=Ne,o=i.child;if(Ne.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Ne=d;Ne!==null;){var m=Ne;switch(m.tag){case 0:case 11:case 15:$c(8,m,i)}var u=m.child;if(u!==null)u.return=m,Ne=u;else for(;Ne!==null;){m=Ne;var h=m.sibling,f=m.return;if(uS(m),m===d){Ne=null;break}if(h!==null){h.return=f,Ne=h;break}Ne=f}}}var b=i.alternate;if(b!==null){var g=b.child;if(g!==null){b.child=null;do{var x=g.sibling;g.sibling=null,g=x}while(g!==null)}}Ne=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,Ne=o;else e:for(;Ne!==null;){if(i=Ne,i.flags&2048)switch(i.tag){case 0:case 11:case 15:$c(9,i,i.return)}var p=i.sibling;if(p!==null){p.return=i.return,Ne=p;break e}Ne=i.return}}var y=e.current;for(Ne=y;Ne!==null;){o=Ne;var v=o.child;if(o.subtreeFlags&2064&&v!==null)v.return=o,Ne=v;else e:for(o=y;Ne!==null;){if(l=Ne,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:V0(9,l)}}catch(w){xt(l,l.return,w)}if(l===o){Ne=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,Ne=N;break e}Ne=l.return}}if(Ue=a,_a(),Un&&typeof Un.onPostCommitFiberRoot=="function")try{Un.onPostCommitFiberRoot(I0,e)}catch{}s=!0}return s}finally{Qe=n,ln.transition=t}}return!1}function sw(e,t,n){t=qo(n,t),t=eS(e,t,1),e=oa(e,t,1),t=mr(),e!==null&&(mu(e,1,t),Sr(e,t))}function xt(e,t,n){if(e.tag===3)sw(e,e,n);else for(;t!==null;){if(t.tag===3){sw(t,e,n);break}else if(t.tag===1){var s=t.stateNode;if(typeof t.type.getDerivedStateFromError=="function"||typeof s.componentDidCatch=="function"&&(la===null||!la.has(s))){e=qo(n,e),e=tS(t,e,1),t=oa(t,e,1),e=mr(),t!==null&&(mu(t,1,e),Sr(t,e));break}}t=t.return}}function yT(e,t,n){var s=e.pingCache;s!==null&&s.delete(t),t=mr(),e.pingedLanes|=e.suspendedLanes&n,Rt===e&&(Ut&n)===n&&(Pt===4||Pt===3&&(Ut&130023424)===Ut&&500>bt()-qv?di(e,0):zv|=n),Sr(e,t)}function jS(e,t){t===0&&(e.mode&1?(t=Uu,Uu<<=1,!(Uu&130023424)&&(Uu=4194304)):t=1);var n=mr();e=bs(e,t),e!==null&&(mu(e,t,n),Sr(e,n))}function bT(e){var t=e.memoizedState,n=0;t!==null&&(n=t.retryLane),jS(e,n)}function vT(e,t){var n=0;switch(e.tag){case 13:var s=e.stateNode,a=e.memoizedState;a!==null&&(n=a.retryLane);break;case 19:s=e.stateNode;break;default:throw Error(fe(314))}s!==null&&s.delete(t),jS(e,n)}var wS;wS=function(e,t,n){if(e!==null)if(e.memoizedProps!==t.pendingProps||_r.current)wr=!0;else{if(!(e.lanes&n)&&!(t.flags&128))return wr=!1,oT(e,t,n);wr=!!(e.flags&131072)}else wr=!1,dt&&t.flags&1048576&&S6(t,ch,t.index);switch(t.lanes=0,t.tag){case 2:var s=t.type;Mm(e,t),e=t.pendingProps;var a=Do(t,tr.current);po(t,n),a=$v(null,t,s,e,a,n);var i=Rv();return t.flags|=1,typeof a=="object"&&a!==null&&typeof a.render=="function"&&a.$$typeof===void 0?(t.tag=1,t.memoizedState=null,t.updateQueue=null,kr(s)?(i=!0,oh(t)):i=!1,t.memoizedState=a.state!==null&&a.state!==void 0?a.state:null,Ev(t),a.updater=W0,t.stateNode=a,a._reactInternals=t,jg(t,s,e,n),t=_g(null,t,s,!0,i,n)):(t.tag=0,dt&&i&&Nv(t),or(null,t,a,n),t=t.child),t;case 16:s=t.elementType;e:{switch(Mm(e,t),e=t.pendingProps,a=s._init,s=a(s._payload),t.type=s,a=t.tag=wT(s),e=yn(s,e),a){case 0:t=Ng(null,t,s,e,n);break e;case 1:t=Gj(null,t,s,e,n);break e;case 11:t=Hj(null,t,s,e,n);break e;case 14:t=Kj(null,t,s,yn(s.type,e),n);break e}throw Error(fe(306,s,""))}return t;case 0:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:yn(s,a),Ng(e,t,s,a,n);case 1:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:yn(s,a),Gj(e,t,s,a,n);case 3:e:{if(aS(t),e===null)throw Error(fe(387));s=t.pendingProps,i=t.memoizedState,a=i.element,T6(e,t),mh(t,s,null,n);var o=t.memoizedState;if(s=o.element,i.isDehydrated)if(i={element:s,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},t.updateQueue.baseState=i,t.memoizedState=i,t.flags&256){a=qo(Error(fe(423)),t),t=Qj(e,t,s,n,a);break e}else if(s!==a){a=qo(Error(fe(424)),t),t=Qj(e,t,s,n,a);break e}else for(Dr=ia(t.stateNode.containerInfo.firstChild),Br=t,dt=!0,kn=null,n=E6(t,null,s,n),t.child=n;n;)n.flags=n.flags&-3|4096,n=n.sibling;else{if(Fo(),s===a){t=vs(e,t,n);break e}or(e,t,s,n)}t=t.child}return t;case 5:return M6(t),e===null&&yg(t),s=t.type,a=t.pendingProps,i=e!==null?e.memoizedProps:null,o=a.children,hg(s,a)?o=null:i!==null&&hg(s,i)&&(t.flags|=32),sS(e,t),or(e,t,o,n),t.child;case 6:return e===null&&yg(t),null;case 13:return iS(e,t,n);case 4:return Ov(t,t.stateNode.containerInfo),s=t.pendingProps,e===null?t.child=Bo(t,null,s,n):or(e,t,s,n),t.child;case 11:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:yn(s,a),Hj(e,t,s,a,n);case 7:return or(e,t,t.pendingProps,n),t.child;case 8:return or(e,t,t.pendingProps.children,n),t.child;case 12:return or(e,t,t.pendingProps.children,n),t.child;case 10:e:{if(s=t.type._context,a=t.pendingProps,i=t.memoizedProps,o=a.value,nt(dh,s._currentValue),s._currentValue=o,i!==null)if(On(i.value,o)){if(i.children===a.children&&!_r.current){t=vs(e,t,n);break e}}else for(i=t.child,i!==null&&(i.return=t);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===s){if(i.tag===1){c=ms(-1,n&-n),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var m=d.pending;m===null?c.next=c:(c.next=m.next,m.next=c),d.pending=c}}i.lanes|=n,c=i.alternate,c!==null&&(c.lanes|=n),bg(i.return,n,t),l.lanes|=n;break}c=c.next}}else if(i.tag===10)o=i.type===t.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(fe(341));o.lanes|=n,l=o.alternate,l!==null&&(l.lanes|=n),bg(o,n,t),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===t){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}or(e,t,a.children,n),t=t.child}return t;case 9:return a=t.type,s=t.pendingProps.children,po(t,n),a=un(a),s=s(a),t.flags|=1,or(e,t,s,n),t.child;case 14:return s=t.type,a=yn(s,t.pendingProps),a=yn(s.type,a),Kj(e,t,s,a,n);case 15:return rS(e,t,t.type,t.pendingProps,n);case 17:return s=t.type,a=t.pendingProps,a=t.elementType===s?a:yn(s,a),Mm(e,t),t.tag=1,kr(s)?(e=!0,oh(t)):e=!1,po(t,n),Z6(t,s,a),jg(t,s,a,n),_g(null,t,s,!0,e,n);case 19:return oS(e,t,n);case 22:return nS(e,t,n)}throw Error(fe(156,t.tag))};function NS(e,t){return Y3(e,t)}function jT(e,t,n,s){this.tag=e,this.key=n,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=t,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=s,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function sn(e,t,n,s){return new jT(e,t,n,s)}function Hv(e){return e=e.prototype,!(!e||!e.isReactComponent)}function wT(e){if(typeof e=="function")return Hv(e)?1:0;if(e!=null){if(e=e.$$typeof,e===uv)return 11;if(e===mv)return 14}return 2}function da(e,t){var n=e.alternate;return n===null?(n=sn(e.tag,t,e.key,e.mode),n.elementType=e.elementType,n.type=e.type,n.stateNode=e.stateNode,n.alternate=e,e.alternate=n):(n.pendingProps=t,n.type=e.type,n.flags=0,n.subtreeFlags=0,n.deletions=null),n.flags=e.flags&14680064,n.childLanes=e.childLanes,n.lanes=e.lanes,n.child=e.child,n.memoizedProps=e.memoizedProps,n.memoizedState=e.memoizedState,n.updateQueue=e.updateQueue,t=e.dependencies,n.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext},n.sibling=e.sibling,n.index=e.index,n.ref=e.ref,n}function Rm(e,t,n,s,a,i){var o=2;if(s=e,typeof e=="function")Hv(e)&&(o=1);else if(typeof e=="string")o=5;else e:switch(e){case Hi:return ui(n.children,a,i,t);case dv:o=8,a|=8;break;case Vx:return e=sn(12,n,t,a|2),e.elementType=Vx,e.lanes=i,e;case Hx:return e=sn(13,n,t,a),e.elementType=Hx,e.lanes=i,e;case Kx:return e=sn(19,n,t,a),e.elementType=Kx,e.lanes=i,e;case M3:return K0(n,a,i,t);default:if(typeof e=="object"&&e!==null)switch(e.$$typeof){case O3:o=10;break e;case T3:o=9;break e;case uv:o=11;break e;case mv:o=14;break e;case $s:o=16,s=null;break e}throw Error(fe(130,e==null?e:typeof e,""))}return t=sn(o,n,t,a),t.elementType=e,t.type=s,t.lanes=i,t}function ui(e,t,n,s){return e=sn(7,e,s,t),e.lanes=n,e}function K0(e,t,n,s){return e=sn(22,e,s,t),e.elementType=M3,e.lanes=n,e.stateNode={isHidden:!1},e}function qf(e,t,n){return e=sn(6,e,null,t),e.lanes=n,e}function Uf(e,t,n){return t=sn(4,e.children!==null?e.children:[],e.key,t),t.lanes=n,t.stateNode={containerInfo:e.containerInfo,pendingChildren:null,implementation:e.implementation},t}function NT(e,t,n,s,a){this.tag=t,this.containerInfo=e,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Nf(0),this.expirationTimes=Nf(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Nf(0),this.identifierPrefix=s,this.onRecoverableError=a,this.mutableSourceEagerHydrationData=null}function Kv(e,t,n,s,a,i,o,l,c){return e=new NT(e,t,n,l,c),t===1?(t=1,i===!0&&(t|=8)):t=0,i=sn(3,null,null,t),e.current=i,i.stateNode=e,i.memoizedState={element:s,isDehydrated:n,cache:null,transitions:null,pendingSuspenseBoundaries:null},Ev(i),e}function _T(e,t,n){var s=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Vi,key:s==null?null:""+s,children:e,containerInfo:t,implementation:n}}function _S(e){if(!e)return ba;e=e._reactInternals;e:{if(Ti(e)!==e||e.tag!==1)throw Error(fe(170));var t=e;do{switch(t.tag){case 3:t=t.stateNode.context;break e;case 1:if(kr(t.type)){t=t.stateNode.__reactInternalMemoizedMergedChildContext;break e}}t=t.return}while(t!==null);throw Error(fe(171))}if(e.tag===1){var n=e.type;if(kr(n))return _6(e,n,t)}return t}function kS(e,t,n,s,a,i,o,l,c){return e=Kv(n,s,!0,e,a,i,o,l,c),e.context=_S(null),n=e.current,s=mr(),a=ca(n),i=ms(s,a),i.callback=t??null,oa(n,i,a),e.current.lanes=a,mu(e,a,s),Sr(e,s),e}function G0(e,t,n,s){var a=t.current,i=mr(),o=ca(a);return n=_S(n),t.context===null?t.context=n:t.pendingContext=n,t=ms(i,o),t.payload={element:e},s=s===void 0?null:s,s!==null&&(t.callback=s),e=oa(a,t,o),e!==null&&(Pn(e,a,o,i),Em(e,a,o)),o}function vh(e){if(e=e.current,!e.child)return null;switch(e.child.tag){case 5:return e.child.stateNode;default:return e.child.stateNode}}function aw(e,t){if(e=e.memoizedState,e!==null&&e.dehydrated!==null){var n=e.retryLane;e.retryLane=n!==0&&n<t?n:t}}function Gv(e,t){aw(e,t),(e=e.alternate)&&aw(e,t)}function kT(){return null}var SS=typeof reportError=="function"?reportError:function(e){console.error(e)};function Qv(e){this._internalRoot=e}Q0.prototype.render=Qv.prototype.render=function(e){var t=this._internalRoot;if(t===null)throw Error(fe(409));G0(e,t,null,null)};Q0.prototype.unmount=Qv.prototype.unmount=function(){var e=this._internalRoot;if(e!==null){this._internalRoot=null;var t=e.containerInfo;bi(function(){G0(null,e,null,null)}),t[ys]=null}};function Q0(e){this._internalRoot=e}Q0.prototype.unstable_scheduleHydration=function(e){if(e){var t=n6();e={blockedOn:null,target:e,priority:t};for(var n=0;n<Fs.length&&t!==0&&t<Fs[n].priority;n++);Fs.splice(n,0,e),n===0&&a6(e)}};function Yv(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11)}function Y0(e){return!(!e||e.nodeType!==1&&e.nodeType!==9&&e.nodeType!==11&&(e.nodeType!==8||e.nodeValue!==" react-mount-point-unstable "))}function iw(){}function ST(e,t,n,s,a){if(a){if(typeof s=="function"){var i=s;s=function(){var d=vh(o);i.call(d)}}var o=kS(t,s,e,0,null,!1,!1,"",iw);return e._reactRootContainer=o,e[ys]=o.current,td(e.nodeType===8?e.parentNode:e),bi(),o}for(;a=e.lastChild;)e.removeChild(a);if(typeof s=="function"){var l=s;s=function(){var d=vh(c);l.call(d)}}var c=Kv(e,0,!1,null,null,!1,!1,"",iw);return e._reactRootContainer=c,e[ys]=c.current,td(e.nodeType===8?e.parentNode:e),bi(function(){G0(t,c,n,s)}),c}function X0(e,t,n,s,a){var i=n._reactRootContainer;if(i){var o=i;if(typeof a=="function"){var l=a;a=function(){var c=vh(o);l.call(c)}}G0(t,o,e,a)}else o=ST(n,t,e,a,s);return vh(o)}t6=function(e){switch(e.tag){case 3:var t=e.stateNode;if(t.current.memoizedState.isDehydrated){var n=Nc(t.pendingLanes);n!==0&&(fv(t,n|1),Sr(t,bt()),!(Ue&6)&&(Uo=bt()+500,_a()))}break;case 13:bi(function(){var s=bs(e,1);if(s!==null){var a=mr();Pn(s,e,1,a)}}),Gv(e,1)}};xv=function(e){if(e.tag===13){var t=bs(e,134217728);if(t!==null){var n=mr();Pn(t,e,134217728,n)}Gv(e,134217728)}};r6=function(e){if(e.tag===13){var t=ca(e),n=bs(e,t);if(n!==null){var s=mr();Pn(n,e,t,s)}Gv(e,t)}};n6=function(){return Qe};s6=function(e,t){var n=Qe;try{return Qe=e,t()}finally{Qe=n}};ng=function(e,t,n){switch(t){case"input":if(Yx(e,n),t=n.name,n.type==="radio"&&t!=null){for(n=e;n.parentNode;)n=n.parentNode;for(n=n.querySelectorAll("input[name="+JSON.stringify(""+t)+'][type="radio"]'),t=0;t<n.length;t++){var s=n[t];if(s!==e&&s.form===e.form){var a=z0(s);if(!a)throw Error(fe(90));$3(s),Yx(s,a)}}}break;case"textarea":I3(e,n);break;case"select":t=n.value,t!=null&&co(e,!!n.multiple,t,!1)}};W3=Uv;V3=bi;var CT={usingClientEntryPoint:!1,Events:[pu,Yi,z0,q3,U3,Uv]},Zl={findFiberByHostInstance:Ha,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},AT={bundleType:Zl.bundleType,version:Zl.version,rendererPackageName:Zl.rendererPackageName,rendererConfig:Zl.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ks.ReactCurrentDispatcher,findHostInstanceByFiber:function(e){return e=G3(e),e===null?null:e.stateNode},findFiberByHostInstance:Zl.findFiberByHostInstance||kT,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var em=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!em.isDisabled&&em.supportsFiber)try{I0=em.inject(AT),Un=em}catch{}}Vr.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=CT;Vr.createPortal=function(e,t){var n=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Yv(t))throw Error(fe(200));return _T(e,t,null,n)};Vr.createRoot=function(e,t){if(!Yv(e))throw Error(fe(299));var n=!1,s="",a=SS;return t!=null&&(t.unstable_strictMode===!0&&(n=!0),t.identifierPrefix!==void 0&&(s=t.identifierPrefix),t.onRecoverableError!==void 0&&(a=t.onRecoverableError)),t=Kv(e,1,!1,null,null,n,!1,s,a),e[ys]=t.current,td(e.nodeType===8?e.parentNode:e),new Qv(t)};Vr.findDOMNode=function(e){if(e==null)return null;if(e.nodeType===1)return e;var t=e._reactInternals;if(t===void 0)throw typeof e.render=="function"?Error(fe(188)):(e=Object.keys(e).join(","),Error(fe(268,e)));return e=G3(t),e=e===null?null:e.stateNode,e};Vr.flushSync=function(e){return bi(e)};Vr.hydrate=function(e,t,n){if(!Y0(t))throw Error(fe(200));return X0(null,e,t,!0,n)};Vr.hydrateRoot=function(e,t,n){if(!Yv(e))throw Error(fe(405));var s=n!=null&&n.hydratedSources||null,a=!1,i="",o=SS;if(n!=null&&(n.unstable_strictMode===!0&&(a=!0),n.identifierPrefix!==void 0&&(i=n.identifierPrefix),n.onRecoverableError!==void 0&&(o=n.onRecoverableError)),t=kS(t,null,e,1,n??null,a,!1,i,o),e[ys]=t.current,td(e),s)for(e=0;e<s.length;e++)n=s[e],a=n._getVersion,a=a(n._source),t.mutableSourceEagerHydrationData==null?t.mutableSourceEagerHydrationData=[n,a]:t.mutableSourceEagerHydrationData.push(n,a);return new Q0(t)};Vr.render=function(e,t,n){if(!Y0(t))throw Error(fe(200));return X0(null,e,t,!1,n)};Vr.unmountComponentAtNode=function(e){if(!Y0(e))throw Error(fe(40));return e._reactRootContainer?(bi(function(){X0(null,null,e,!1,function(){e._reactRootContainer=null,e[ys]=null})}),!0):!1};Vr.unstable_batchedUpdates=Uv;Vr.unstable_renderSubtreeIntoContainer=function(e,t,n,s){if(!Y0(n))throw Error(fe(200));if(e==null||e._reactInternals===void 0)throw Error(fe(38));return X0(e,t,n,!1,s)};Vr.version="18.3.1-next-f1338f8080-20240426";function CS(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(CS)}catch(e){console.error(e)}}CS(),C3.exports=Vr;var J0=C3.exports;const PT=Ke(J0);var AS,ow=J0;AS=ow.createRoot,ow.hydrateRoot;/**
 * @remix-run/router v1.23.1
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function dd(){return dd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},dd.apply(this,arguments)}var ta;(function(e){e.Pop="POP",e.Push="PUSH",e.Replace="REPLACE"})(ta||(ta={}));const lw="popstate";function ET(e){e===void 0&&(e={});function t(s,a){let{pathname:i,search:o,hash:l}=s.location;return Rg("",{pathname:i,search:o,hash:l},a.state&&a.state.usr||null,a.state&&a.state.key||"default")}function n(s,a){return typeof a=="string"?a:jh(a)}return TT(t,n,null,e)}function vt(e,t){if(e===!1||e===null||typeof e>"u")throw new Error(t)}function Xv(e,t){if(!e){typeof console<"u"&&console.warn(t);try{throw new Error(t)}catch{}}}function OT(){return Math.random().toString(36).substr(2,8)}function cw(e,t){return{usr:e.state,key:e.key,idx:t}}function Rg(e,t,n,s){return n===void 0&&(n=null),dd({pathname:typeof e=="string"?e:e.pathname,search:"",hash:""},typeof t=="string"?kl(t):t,{state:n,key:t&&t.key||s||OT()})}function jh(e){let{pathname:t="/",search:n="",hash:s=""}=e;return n&&n!=="?"&&(t+=n.charAt(0)==="?"?n:"?"+n),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function kl(e){let t={};if(e){let n=e.indexOf("#");n>=0&&(t.hash=e.substr(n),e=e.substr(0,n));let s=e.indexOf("?");s>=0&&(t.search=e.substr(s),e=e.substr(0,s)),e&&(t.pathname=e)}return t}function TT(e,t,n,s){s===void 0&&(s={});let{window:a=document.defaultView,v5Compat:i=!1}=s,o=a.history,l=ta.Pop,c=null,d=m();d==null&&(d=0,o.replaceState(dd({},o.state,{idx:d}),""));function m(){return(o.state||{idx:null}).idx}function u(){l=ta.Pop;let x=m(),p=x==null?null:x-d;d=x,c&&c({action:l,location:g.location,delta:p})}function h(x,p){l=ta.Push;let y=Rg(g.location,x,p);d=m()+1;let v=cw(y,d),N=g.createHref(y);try{o.pushState(v,"",N)}catch(w){if(w instanceof DOMException&&w.name==="DataCloneError")throw w;a.location.assign(N)}i&&c&&c({action:l,location:g.location,delta:1})}function f(x,p){l=ta.Replace;let y=Rg(g.location,x,p);d=m();let v=cw(y,d),N=g.createHref(y);o.replaceState(v,"",N),i&&c&&c({action:l,location:g.location,delta:0})}function b(x){let p=a.location.origin!=="null"?a.location.origin:a.location.href,y=typeof x=="string"?x:jh(x);return y=y.replace(/ $/,"%20"),vt(p,"No window.location.(origin|href) available to create URL for href: "+y),new URL(y,p)}let g={get action(){return l},get location(){return e(a,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return a.addEventListener(lw,u),c=x,()=>{a.removeEventListener(lw,u),c=null}},createHref(x){return t(a,x)},createURL:b,encodeLocation(x){let p=b(x);return{pathname:p.pathname,search:p.search,hash:p.hash}},push:h,replace:f,go(x){return o.go(x)}};return g}var dw;(function(e){e.data="data",e.deferred="deferred",e.redirect="redirect",e.error="error"})(dw||(dw={}));function MT(e,t,n){return n===void 0&&(n="/"),LT(e,t,n)}function LT(e,t,n,s){let a=typeof t=="string"?kl(t):t,i=Jv(a.pathname||"/",n);if(i==null)return null;let o=PS(e);$T(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=KT(i);l=WT(o[c],d)}return l}function PS(e,t,n,s){t===void 0&&(t=[]),n===void 0&&(n=[]),s===void 0&&(s="");let a=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(vt(c.relativePath.startsWith(s),'Absolute route path "'+c.relativePath+'" nested under path '+('"'+s+'" is not valid. An absolute child route path ')+"must start with the combined path of all its parent routes."),c.relativePath=c.relativePath.slice(s.length));let d=ua([s,c.relativePath]),m=n.concat(c);i.children&&i.children.length>0&&(vt(i.index!==!0,"Index routes must not have child routes. Please remove "+('all child routes from route path "'+d+'".')),PS(i.children,t,m,d)),!(i.path==null&&!i.index)&&t.push({path:d,score:qT(d,i.index),routesMeta:m})};return e.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))a(i,o);else for(let c of ES(i.path))a(i,o,c)}),t}function ES(e){let t=e.split("/");if(t.length===0)return[];let[n,...s]=t,a=n.endsWith("?"),i=n.replace(/\?$/,"");if(s.length===0)return a?[i,""]:[i];let o=ES(s.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),a&&l.push(...o),l.map(c=>e.startsWith("/")&&c===""?"/":c)}function $T(e){e.sort((t,n)=>t.score!==n.score?n.score-t.score:UT(t.routesMeta.map(s=>s.childrenIndex),n.routesMeta.map(s=>s.childrenIndex)))}const RT=/^:[\w-]+$/,IT=3,DT=2,FT=1,BT=10,zT=-2,uw=e=>e==="*";function qT(e,t){let n=e.split("/"),s=n.length;return n.some(uw)&&(s+=zT),t&&(s+=DT),n.filter(a=>!uw(a)).reduce((a,i)=>a+(RT.test(i)?IT:i===""?FT:BT),s)}function UT(e,t){return e.length===t.length&&e.slice(0,-1).every((s,a)=>s===t[a])?e[e.length-1]-t[t.length-1]:0}function WT(e,t,n){let{routesMeta:s}=e,a={},i="/",o=[];for(let l=0;l<s.length;++l){let c=s[l],d=l===s.length-1,m=i==="/"?t:t.slice(i.length)||"/",u=VT({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},m),h=c.route;if(!u)return null;Object.assign(a,u.params),o.push({params:a,pathname:ua([i,u.pathname]),pathnameBase:JT(ua([i,u.pathnameBase])),route:h}),u.pathnameBase!=="/"&&(i=ua([i,u.pathnameBase]))}return o}function VT(e,t){typeof e=="string"&&(e={path:e,caseSensitive:!1,end:!0});let[n,s]=HT(e.path,e.caseSensitive,e.end),a=t.match(n);if(!a)return null;let i=a[0],o=i.replace(/(.)\/+$/,"$1"),l=a.slice(1);return{params:s.reduce((d,m,u)=>{let{paramName:h,isOptional:f}=m;if(h==="*"){let g=l[u]||"";o=i.slice(0,i.length-g.length).replace(/(.)\/+$/,"$1")}const b=l[u];return f&&!b?d[h]=void 0:d[h]=(b||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:e}}function HT(e,t,n){t===void 0&&(t=!1),n===void 0&&(n=!0),Xv(e==="*"||!e.endsWith("*")||e.endsWith("/*"),'Route path "'+e+'" will be treated as if it were '+('"'+e.replace(/\*$/,"/*")+'" because the `*` character must ')+"always follow a `/` in the pattern. To get rid of this warning, "+('please change the route path to "'+e.replace(/\*$/,"/*")+'".'));let s=[],a="^"+e.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(s.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return e.endsWith("*")?(s.push({paramName:"*"}),a+=e==="*"||e==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):n?a+="\\/*$":e!==""&&e!=="/"&&(a+="(?:(?=\\/|$))"),[new RegExp(a,t?void 0:"i"),s]}function KT(e){try{return e.split("/").map(t=>decodeURIComponent(t).replace(/\//g,"%2F")).join("/")}catch(t){return Xv(!1,'The URL path "'+e+'" could not be decoded because it is is a malformed URL segment. This is probably due to a bad percent '+("encoding ("+t+").")),e}}function Jv(e,t){if(t==="/")return e;if(!e.toLowerCase().startsWith(t.toLowerCase()))return null;let n=t.endsWith("/")?t.length-1:t.length,s=e.charAt(n);return s&&s!=="/"?null:e.slice(n)||"/"}const GT=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,QT=e=>GT.test(e);function YT(e,t){t===void 0&&(t="/");let{pathname:n,search:s="",hash:a=""}=typeof e=="string"?kl(e):e,i;if(n)if(QT(n))i=n;else{if(n.includes("//")){let o=n;n=n.replace(/\/\/+/g,"/"),Xv(!1,"Pathnames cannot have embedded double slashes - normalizing "+(o+" -> "+n))}n.startsWith("/")?i=mw(n.substring(1),"/"):i=mw(n,t)}else i=t;return{pathname:i,search:ZT(s),hash:eM(a)}}function mw(e,t){let n=t.replace(/\/+$/,"").split("/");return e.split("/").forEach(a=>{a===".."?n.length>1&&n.pop():a!=="."&&n.push(a)}),n.length>1?n.join("/"):"/"}function Wf(e,t,n,s){return"Cannot include a '"+e+"' character in a manually specified "+("`to."+t+"` field ["+JSON.stringify(s)+"].  Please separate it out to the ")+("`to."+n+"` field. Alternatively you may provide the full path as ")+'a string in <Link to="..."> and the router will parse it for you.'}function XT(e){return e.filter((t,n)=>n===0||t.route.path&&t.route.path.length>0)}function Zv(e,t){let n=XT(e);return t?n.map((s,a)=>a===n.length-1?s.pathname:s.pathnameBase):n.map(s=>s.pathnameBase)}function e1(e,t,n,s){s===void 0&&(s=!1);let a;typeof e=="string"?a=kl(e):(a=dd({},e),vt(!a.pathname||!a.pathname.includes("?"),Wf("?","pathname","search",a)),vt(!a.pathname||!a.pathname.includes("#"),Wf("#","pathname","hash",a)),vt(!a.search||!a.search.includes("#"),Wf("#","search","hash",a)));let i=e===""||a.pathname==="",o=i?"/":a.pathname,l;if(o==null)l=n;else{let u=t.length-1;if(!s&&o.startsWith("..")){let h=o.split("/");for(;h[0]==="..";)h.shift(),u-=1;a.pathname=h.join("/")}l=u>=0?t[u]:"/"}let c=YT(a,l),d=o&&o!=="/"&&o.endsWith("/"),m=(i||o===".")&&n.endsWith("/");return!c.pathname.endsWith("/")&&(d||m)&&(c.pathname+="/"),c}const ua=e=>e.join("/").replace(/\/\/+/g,"/"),JT=e=>e.replace(/\/+$/,"").replace(/^\/*/,"/"),ZT=e=>!e||e==="?"?"":e.startsWith("?")?e:"?"+e,eM=e=>!e||e==="#"?"":e.startsWith("#")?e:"#"+e;function tM(e){return e!=null&&typeof e.status=="number"&&typeof e.statusText=="string"&&typeof e.internal=="boolean"&&"data"in e}const OS=["post","put","patch","delete"];new Set(OS);const rM=["get",...OS];new Set(rM);/**
 * React Router v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function ud(){return ud=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ud.apply(this,arguments)}const t1=k.createContext(null),nM=k.createContext(null),ka=k.createContext(null),Z0=k.createContext(null),Ss=k.createContext({outlet:null,matches:[],isDataRoute:!1}),TS=k.createContext(null);function sM(e,t){let{relative:n}=t===void 0?{}:t;Sl()||vt(!1);let{basename:s,navigator:a}=k.useContext(ka),{hash:i,pathname:o,search:l}=LS(e,{relative:n}),c=o;return s!=="/"&&(c=o==="/"?s:ua([s,o])),a.createHref({pathname:c,search:l,hash:i})}function Sl(){return k.useContext(Z0)!=null}function Cs(){return Sl()||vt(!1),k.useContext(Z0).location}function MS(e){k.useContext(ka).static||k.useLayoutEffect(e)}function Le(){let{isDataRoute:e}=k.useContext(Ss);return e?gM():aM()}function aM(){Sl()||vt(!1);let e=k.useContext(t1),{basename:t,future:n,navigator:s}=k.useContext(ka),{matches:a}=k.useContext(Ss),{pathname:i}=Cs(),o=JSON.stringify(Zv(a,n.v7_relativeSplatPath)),l=k.useRef(!1);return MS(()=>{l.current=!0}),k.useCallback(function(d,m){if(m===void 0&&(m={}),!l.current)return;if(typeof d=="number"){s.go(d);return}let u=e1(d,JSON.parse(o),i,m.relative==="path");e==null&&t!=="/"&&(u.pathname=u.pathname==="/"?t:ua([t,u.pathname])),(m.replace?s.replace:s.push)(u,m.state,m)},[t,s,o,i,e])}function fr(){let{matches:e}=k.useContext(Ss),t=e[e.length-1];return t?t.params:{}}function LS(e,t){let{relative:n}=t===void 0?{}:t,{future:s}=k.useContext(ka),{matches:a}=k.useContext(Ss),{pathname:i}=Cs(),o=JSON.stringify(Zv(a,s.v7_relativeSplatPath));return k.useMemo(()=>e1(e,JSON.parse(o),i,n==="path"),[e,o,i,n])}function iM(e,t){return oM(e,t)}function oM(e,t,n,s){Sl()||vt(!1);let{navigator:a}=k.useContext(ka),{matches:i}=k.useContext(Ss),o=i[i.length-1],l=o?o.params:{};o&&o.pathname;let c=o?o.pathnameBase:"/";o&&o.route;let d=Cs(),m;if(t){var u;let x=typeof t=="string"?kl(t):t;c==="/"||(u=x.pathname)!=null&&u.startsWith(c)||vt(!1),m=x}else m=d;let h=m.pathname||"/",f=h;if(c!=="/"){let x=c.replace(/^\//,"").split("/");f="/"+h.replace(/^\//,"").split("/").slice(x.length).join("/")}let b=MT(e,{pathname:f}),g=mM(b&&b.map(x=>Object.assign({},x,{params:Object.assign({},l,x.params),pathname:ua([c,a.encodeLocation?a.encodeLocation(x.pathname).pathname:x.pathname]),pathnameBase:x.pathnameBase==="/"?c:ua([c,a.encodeLocation?a.encodeLocation(x.pathnameBase).pathname:x.pathnameBase])})),i,n,s);return t&&g?k.createElement(Z0.Provider,{value:{location:ud({pathname:"/",search:"",hash:"",state:null,key:"default"},m),navigationType:ta.Pop}},g):g}function lM(){let e=xM(),t=tM(e)?e.status+" "+e.statusText:e instanceof Error?e.message:JSON.stringify(e),n=e instanceof Error?e.stack:null,a={padding:"0.5rem",backgroundColor:"rgba(200,200,200, 0.5)"};return k.createElement(k.Fragment,null,k.createElement("h2",null,"Unexpected Application Error!"),k.createElement("h3",{style:{fontStyle:"italic"}},t),n?k.createElement("pre",{style:a},n):null,null)}const cM=k.createElement(lM,null);class dM extends k.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,n){return n.location!==t.location||n.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:n.error,location:n.location,revalidation:t.revalidation||n.revalidation}}componentDidCatch(t,n){console.error("React Router caught the following error during render",t,n)}render(){return this.state.error!==void 0?k.createElement(Ss.Provider,{value:this.props.routeContext},k.createElement(TS.Provider,{value:this.state.error,children:this.props.component})):this.props.children}}function uM(e){let{routeContext:t,match:n,children:s}=e,a=k.useContext(t1);return a&&a.static&&a.staticContext&&(n.route.errorElement||n.route.ErrorBoundary)&&(a.staticContext._deepestRenderedBoundaryId=n.route.id),k.createElement(Ss.Provider,{value:t},s)}function mM(e,t,n,s){var a;if(t===void 0&&(t=[]),n===void 0&&(n=null),s===void 0&&(s=null),e==null){var i;if(!n)return null;if(n.errors)e=n.matches;else if((i=s)!=null&&i.v7_partialHydration&&t.length===0&&!n.initialized&&n.matches.length>0)e=n.matches;else return null}let o=e,l=(a=n)==null?void 0:a.errors;if(l!=null){let m=o.findIndex(u=>u.route.id&&(l==null?void 0:l[u.route.id])!==void 0);m>=0||vt(!1),o=o.slice(0,Math.min(o.length,m+1))}let c=!1,d=-1;if(n&&s&&s.v7_partialHydration)for(let m=0;m<o.length;m++){let u=o[m];if((u.route.HydrateFallback||u.route.hydrateFallbackElement)&&(d=m),u.route.id){let{loaderData:h,errors:f}=n,b=u.route.loader&&h[u.route.id]===void 0&&(!f||f[u.route.id]===void 0);if(u.route.lazy||b){c=!0,d>=0?o=o.slice(0,d+1):o=[o[0]];break}}}return o.reduceRight((m,u,h)=>{let f,b=!1,g=null,x=null;n&&(f=l&&u.route.id?l[u.route.id]:void 0,g=u.route.errorElement||cM,c&&(d<0&&h===0?(yM("route-fallback"),b=!0,x=null):d===h&&(b=!0,x=u.route.hydrateFallbackElement||null)));let p=t.concat(o.slice(0,h+1)),y=()=>{let v;return f?v=g:b?v=x:u.route.Component?v=k.createElement(u.route.Component,null):u.route.element?v=u.route.element:v=m,k.createElement(uM,{match:u,routeContext:{outlet:m,matches:p,isDataRoute:n!=null},children:v})};return n&&(u.route.ErrorBoundary||u.route.errorElement||h===0)?k.createElement(dM,{location:n.location,revalidation:n.revalidation,component:g,error:f,children:y(),routeContext:{outlet:null,matches:p,isDataRoute:!0}}):y()},null)}var $S=function(e){return e.UseBlocker="useBlocker",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e}($S||{}),RS=function(e){return e.UseBlocker="useBlocker",e.UseLoaderData="useLoaderData",e.UseActionData="useActionData",e.UseRouteError="useRouteError",e.UseNavigation="useNavigation",e.UseRouteLoaderData="useRouteLoaderData",e.UseMatches="useMatches",e.UseRevalidator="useRevalidator",e.UseNavigateStable="useNavigate",e.UseRouteId="useRouteId",e}(RS||{});function hM(e){let t=k.useContext(t1);return t||vt(!1),t}function pM(e){let t=k.useContext(nM);return t||vt(!1),t}function fM(e){let t=k.useContext(Ss);return t||vt(!1),t}function IS(e){let t=fM(),n=t.matches[t.matches.length-1];return n.route.id||vt(!1),n.route.id}function xM(){var e;let t=k.useContext(TS),n=pM(),s=IS();return t!==void 0?t:(e=n.errors)==null?void 0:e[s]}function gM(){let{router:e}=hM($S.UseNavigateStable),t=IS(RS.UseNavigateStable),n=k.useRef(!1);return MS(()=>{n.current=!0}),k.useCallback(function(a,i){i===void 0&&(i={}),n.current&&(typeof a=="number"?e.navigate(a):e.navigate(a,ud({fromRouteId:t},i)))},[e,t])}const hw={};function yM(e,t,n){hw[e]||(hw[e]=!0)}function bM(e,t){e==null||e.v7_startTransition,e==null||e.v7_relativeSplatPath}function wh(e){let{to:t,replace:n,state:s,relative:a}=e;Sl()||vt(!1);let{future:i,static:o}=k.useContext(ka),{matches:l}=k.useContext(Ss),{pathname:c}=Cs(),d=Le(),m=e1(t,Zv(l,i.v7_relativeSplatPath),c,a==="path"),u=JSON.stringify(m);return k.useEffect(()=>d(JSON.parse(u),{replace:n,state:s,relative:a}),[d,u,a,n,s]),null}function je(e){vt(!1)}function vM(e){let{basename:t="/",children:n=null,location:s,navigationType:a=ta.Pop,navigator:i,static:o=!1,future:l}=e;Sl()&&vt(!1);let c=t.replace(/^\/*/,"/"),d=k.useMemo(()=>({basename:c,navigator:i,static:o,future:ud({v7_relativeSplatPath:!1},l)}),[c,l,i,o]);typeof s=="string"&&(s=kl(s));let{pathname:m="/",search:u="",hash:h="",state:f=null,key:b="default"}=s,g=k.useMemo(()=>{let x=Jv(m,c);return x==null?null:{location:{pathname:x,search:u,hash:h,state:f,key:b},navigationType:a}},[c,m,u,h,f,b,a]);return g==null?null:k.createElement(ka.Provider,{value:d},k.createElement(Z0.Provider,{children:n,value:g}))}function jM(e){let{children:t,location:n}=e;return iM(Ig(t),n)}new Promise(()=>{});function Ig(e,t){t===void 0&&(t=[]);let n=[];return k.Children.forEach(e,(s,a)=>{if(!k.isValidElement(s))return;let i=[...t,a];if(s.type===k.Fragment){n.push.apply(n,Ig(s.props.children,i));return}s.type!==je&&vt(!1),!s.props.index||!s.props.children||vt(!1);let o={id:s.props.id||i.join("-"),caseSensitive:s.props.caseSensitive,element:s.props.element,Component:s.props.Component,index:s.props.index,path:s.props.path,loader:s.props.loader,action:s.props.action,errorElement:s.props.errorElement,ErrorBoundary:s.props.ErrorBoundary,hasErrorBoundary:s.props.ErrorBoundary!=null||s.props.errorElement!=null,shouldRevalidate:s.props.shouldRevalidate,handle:s.props.handle,lazy:s.props.lazy};s.props.children&&(o.children=Ig(s.props.children,i)),n.push(o)}),n}/**
 * React Router DOM v6.30.2
 *
 * Copyright (c) Remix Software Inc.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE.md file in the root directory of this source tree.
 *
 * @license MIT
 */function Dg(){return Dg=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Dg.apply(this,arguments)}function wM(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function NM(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)}function _M(e,t){return e.button===0&&(!t||t==="_self")&&!NM(e)}function Fg(e){return e===void 0&&(e=""),new URLSearchParams(typeof e=="string"||Array.isArray(e)||e instanceof URLSearchParams?e:Object.keys(e).reduce((t,n)=>{let s=e[n];return t.concat(Array.isArray(s)?s.map(a=>[n,a]):[[n,s]])},[]))}function kM(e,t){let n=Fg(e);return t&&t.forEach((s,a)=>{n.has(a)||t.getAll(a).forEach(i=>{n.append(a,i)})}),n}const SM=["onClick","relative","reloadDocument","replace","state","target","to","preventScrollReset","viewTransition"],CM="6";try{window.__reactRouterVersion=CM}catch{}const AM="startTransition",pw=yO[AM];function PM(e){let{basename:t,children:n,future:s,window:a}=e,i=k.useRef();i.current==null&&(i.current=ET({window:a,v5Compat:!0}));let o=i.current,[l,c]=k.useState({action:o.action,location:o.location}),{v7_startTransition:d}=s||{},m=k.useCallback(u=>{d&&pw?pw(()=>c(u)):c(u)},[c,d]);return k.useLayoutEffect(()=>o.listen(m),[o,m]),k.useEffect(()=>bM(s),[s]),k.createElement(vM,{basename:t,children:n,location:l.location,navigationType:l.action,navigator:o,future:s})}const EM=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",OM=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,ie=k.forwardRef(function(t,n){let{onClick:s,relative:a,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:m,viewTransition:u}=t,h=wM(t,SM),{basename:f}=k.useContext(ka),b,g=!1;if(typeof d=="string"&&OM.test(d)&&(b=d,EM))try{let v=new URL(window.location.href),N=d.startsWith("//")?new URL(v.protocol+d):new URL(d),w=Jv(N.pathname,f);N.origin===v.origin&&w!=null?d=w+N.search+N.hash:g=!0}catch{}let x=sM(d,{relative:a}),p=TM(d,{replace:o,state:l,target:c,preventScrollReset:m,relative:a,viewTransition:u});function y(v){s&&s(v),v.defaultPrevented||p(v)}return k.createElement("a",Dg({},h,{href:b||x,onClick:g||i?s:y,ref:n,target:c}))});var fw;(function(e){e.UseScrollRestoration="useScrollRestoration",e.UseSubmit="useSubmit",e.UseSubmitFetcher="useSubmitFetcher",e.UseFetcher="useFetcher",e.useViewTransitionState="useViewTransitionState"})(fw||(fw={}));var xw;(function(e){e.UseFetcher="useFetcher",e.UseFetchers="useFetchers",e.UseScrollRestoration="useScrollRestoration"})(xw||(xw={}));function TM(e,t){let{target:n,replace:s,state:a,preventScrollReset:i,relative:o,viewTransition:l}=t===void 0?{}:t,c=Le(),d=Cs(),m=LS(e,{relative:o});return k.useCallback(u=>{if(_M(u,n)){u.preventDefault();let h=s!==void 0?s:jh(d)===jh(m);c(e,{replace:h,state:a,preventScrollReset:i,relative:o,viewTransition:l})}},[d,c,m,s,a,n,e,i,o,l])}function Ye(e){let t=k.useRef(Fg(e)),n=k.useRef(!1),s=Cs(),a=k.useMemo(()=>kM(s.search,n.current?null:t.current),[s.search]),i=Le(),o=k.useCallback((l,c)=>{const d=Fg(typeof l=="function"?l(a):l);n.current=!0,i("?"+d,c)},[i,a]);return[a,o]}const gw=e=>{let t;const n=new Set,s=(d,m)=>{const u=typeof d=="function"?d(t):d;if(!Object.is(u,t)){const h=t;t=m??(typeof u!="object"||u===null)?u:Object.assign({},t,u),n.forEach(f=>f(t,h))}},a=()=>t,l={setState:s,getState:a,getInitialState:()=>c,subscribe:d=>(n.add(d),()=>n.delete(d))},c=t=e(s,a,l);return l},MM=e=>e?gw(e):gw,LM=e=>e;function $M(e,t=LM){const n=Y.useSyncExternalStore(e.subscribe,Y.useCallback(()=>t(e.getState()),[e,t]),Y.useCallback(()=>t(e.getInitialState()),[e,t]));return Y.useDebugValue(n),n}const RM=e=>{const t=MM(e),n=s=>$M(t,s);return Object.assign(n,t),n},IM=e=>RM;function DM(e,t){let n;try{n=e()}catch{return}return{getItem:a=>{var i;const o=c=>c===null?null:JSON.parse(c,void 0),l=(i=n.getItem(a))!=null?i:null;return l instanceof Promise?l.then(o):o(l)},setItem:(a,i)=>n.setItem(a,JSON.stringify(i,void 0)),removeItem:a=>n.removeItem(a)}}const Bg=e=>t=>{try{const n=e(t);return n instanceof Promise?n:{then(s){return Bg(s)(n)},catch(s){return this}}}catch(n){return{then(s){return this},catch(s){return Bg(s)(n)}}}},FM=(e,t)=>(n,s,a)=>{let i={storage:DM(()=>localStorage),partialize:g=>g,version:0,merge:(g,x)=>({...x,...g}),...t},o=!1;const l=new Set,c=new Set;let d=i.storage;if(!d)return e((...g)=>{console.warn(`[zustand persist middleware] Unable to update item '${i.name}', the given storage is currently unavailable.`),n(...g)},s,a);const m=()=>{const g=i.partialize({...s()});return d.setItem(i.name,{state:g,version:i.version})},u=a.setState;a.setState=(g,x)=>(u(g,x),m());const h=e((...g)=>(n(...g),m()),s,a);a.getInitialState=()=>h;let f;const b=()=>{var g,x;if(!d)return;o=!1,l.forEach(y=>{var v;return y((v=s())!=null?v:h)});const p=((x=i.onRehydrateStorage)==null?void 0:x.call(i,(g=s())!=null?g:h))||void 0;return Bg(d.getItem.bind(d))(i.name).then(y=>{if(y)if(typeof y.version=="number"&&y.version!==i.version){if(i.migrate){const v=i.migrate(y.state,y.version);return v instanceof Promise?v.then(N=>[!0,N]):[!0,v]}console.error("State loaded from storage couldn't be migrated since no migrate function was provided")}else return[!1,y.state];return[!1,void 0]}).then(y=>{var v;const[N,w]=y;if(f=i.merge(w,(v=s())!=null?v:h),n(f,!0),N)return m()}).then(()=>{p==null||p(f,void 0),f=s(),o=!0,c.forEach(y=>y(f))}).catch(y=>{p==null||p(void 0,y)})};return a.persist={setOptions:g=>{i={...i,...g},g.storage&&(d=g.storage)},clearStorage:()=>{d==null||d.removeItem(i.name)},getOptions:()=>i,rehydrate:()=>b(),hasHydrated:()=>o,onHydrate:g=>(l.add(g),()=>{l.delete(g)}),onFinishHydration:g=>(c.add(g),()=>{c.delete(g)})},i.skipHydration||b(),f||h},BM=FM;function DS(e,t){return function(){return e.apply(t,arguments)}}const{toString:zM}=Object.prototype,{getPrototypeOf:r1}=Object,{iterator:ep,toStringTag:FS}=Symbol,tp=(e=>t=>{const n=zM.call(t);return e[n]||(e[n]=n.slice(8,-1).toLowerCase())})(Object.create(null)),Tn=e=>(e=e.toLowerCase(),t=>tp(t)===e),rp=e=>t=>typeof t===e,{isArray:Cl}=Array,Wo=rp("undefined");function xu(e){return e!==null&&!Wo(e)&&e.constructor!==null&&!Wo(e.constructor)&&Cr(e.constructor.isBuffer)&&e.constructor.isBuffer(e)}const BS=Tn("ArrayBuffer");function qM(e){let t;return typeof ArrayBuffer<"u"&&ArrayBuffer.isView?t=ArrayBuffer.isView(e):t=e&&e.buffer&&BS(e.buffer),t}const UM=rp("string"),Cr=rp("function"),zS=rp("number"),gu=e=>e!==null&&typeof e=="object",WM=e=>e===!0||e===!1,Im=e=>{if(tp(e)!=="object")return!1;const t=r1(e);return(t===null||t===Object.prototype||Object.getPrototypeOf(t)===null)&&!(FS in e)&&!(ep in e)},VM=e=>{if(!gu(e)||xu(e))return!1;try{return Object.keys(e).length===0&&Object.getPrototypeOf(e)===Object.prototype}catch{return!1}},HM=Tn("Date"),KM=Tn("File"),GM=Tn("Blob"),QM=Tn("FileList"),YM=e=>gu(e)&&Cr(e.pipe),XM=e=>{let t;return e&&(typeof FormData=="function"&&e instanceof FormData||Cr(e.append)&&((t=tp(e))==="formdata"||t==="object"&&Cr(e.toString)&&e.toString()==="[object FormData]"))},JM=Tn("URLSearchParams"),[ZM,eL,tL,rL]=["ReadableStream","Request","Response","Headers"].map(Tn),nL=e=>e.trim?e.trim():e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"");function yu(e,t,{allOwnKeys:n=!1}={}){if(e===null||typeof e>"u")return;let s,a;if(typeof e!="object"&&(e=[e]),Cl(e))for(s=0,a=e.length;s<a;s++)t.call(null,e[s],s,e);else{if(xu(e))return;const i=n?Object.getOwnPropertyNames(e):Object.keys(e),o=i.length;let l;for(s=0;s<o;s++)l=i[s],t.call(null,e[l],l,e)}}function qS(e,t){if(xu(e))return null;t=t.toLowerCase();const n=Object.keys(e);let s=n.length,a;for(;s-- >0;)if(a=n[s],t===a.toLowerCase())return a;return null}const Qa=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:global,US=e=>!Wo(e)&&e!==Qa;function zg(){const{caseless:e,skipUndefined:t}=US(this)&&this||{},n={},s=(a,i)=>{const o=e&&qS(n,i)||i;Im(n[o])&&Im(a)?n[o]=zg(n[o],a):Im(a)?n[o]=zg({},a):Cl(a)?n[o]=a.slice():(!t||!Wo(a))&&(n[o]=a)};for(let a=0,i=arguments.length;a<i;a++)arguments[a]&&yu(arguments[a],s);return n}const sL=(e,t,n,{allOwnKeys:s}={})=>(yu(t,(a,i)=>{n&&Cr(a)?e[i]=DS(a,n):e[i]=a},{allOwnKeys:s}),e),aL=e=>(e.charCodeAt(0)===65279&&(e=e.slice(1)),e),iL=(e,t,n,s)=>{e.prototype=Object.create(t.prototype,s),e.prototype.constructor=e,Object.defineProperty(e,"super",{value:t.prototype}),n&&Object.assign(e.prototype,n)},oL=(e,t,n,s)=>{let a,i,o;const l={};if(t=t||{},e==null)return t;do{for(a=Object.getOwnPropertyNames(e),i=a.length;i-- >0;)o=a[i],(!s||s(o,e,t))&&!l[o]&&(t[o]=e[o],l[o]=!0);e=n!==!1&&r1(e)}while(e&&(!n||n(e,t))&&e!==Object.prototype);return t},lL=(e,t,n)=>{e=String(e),(n===void 0||n>e.length)&&(n=e.length),n-=t.length;const s=e.indexOf(t,n);return s!==-1&&s===n},cL=e=>{if(!e)return null;if(Cl(e))return e;let t=e.length;if(!zS(t))return null;const n=new Array(t);for(;t-- >0;)n[t]=e[t];return n},dL=(e=>t=>e&&t instanceof e)(typeof Uint8Array<"u"&&r1(Uint8Array)),uL=(e,t)=>{const s=(e&&e[ep]).call(e);let a;for(;(a=s.next())&&!a.done;){const i=a.value;t.call(e,i[0],i[1])}},mL=(e,t)=>{let n;const s=[];for(;(n=e.exec(t))!==null;)s.push(n);return s},hL=Tn("HTMLFormElement"),pL=e=>e.toLowerCase().replace(/[-_\s]([a-z\d])(\w*)/g,function(n,s,a){return s.toUpperCase()+a}),yw=(({hasOwnProperty:e})=>(t,n)=>e.call(t,n))(Object.prototype),fL=Tn("RegExp"),WS=(e,t)=>{const n=Object.getOwnPropertyDescriptors(e),s={};yu(n,(a,i)=>{let o;(o=t(a,i,e))!==!1&&(s[i]=o||a)}),Object.defineProperties(e,s)},xL=e=>{WS(e,(t,n)=>{if(Cr(e)&&["arguments","caller","callee"].indexOf(n)!==-1)return!1;const s=e[n];if(Cr(s)){if(t.enumerable=!1,"writable"in t){t.writable=!1;return}t.set||(t.set=()=>{throw Error("Can not rewrite read-only method '"+n+"'")})}})},gL=(e,t)=>{const n={},s=a=>{a.forEach(i=>{n[i]=!0})};return Cl(e)?s(e):s(String(e).split(t)),n},yL=()=>{},bL=(e,t)=>e!=null&&Number.isFinite(e=+e)?e:t;function vL(e){return!!(e&&Cr(e.append)&&e[FS]==="FormData"&&e[ep])}const jL=e=>{const t=new Array(10),n=(s,a)=>{if(gu(s)){if(t.indexOf(s)>=0)return;if(xu(s))return s;if(!("toJSON"in s)){t[a]=s;const i=Cl(s)?[]:{};return yu(s,(o,l)=>{const c=n(o,a+1);!Wo(c)&&(i[l]=c)}),t[a]=void 0,i}}return s};return n(e,0)},wL=Tn("AsyncFunction"),NL=e=>e&&(gu(e)||Cr(e))&&Cr(e.then)&&Cr(e.catch),VS=((e,t)=>e?setImmediate:t?((n,s)=>(Qa.addEventListener("message",({source:a,data:i})=>{a===Qa&&i===n&&s.length&&s.shift()()},!1),a=>{s.push(a),Qa.postMessage(n,"*")}))(`axios@${Math.random()}`,[]):n=>setTimeout(n))(typeof setImmediate=="function",Cr(Qa.postMessage)),_L=typeof queueMicrotask<"u"?queueMicrotask.bind(Qa):typeof process<"u"&&process.nextTick||VS,kL=e=>e!=null&&Cr(e[ep]),ce={isArray:Cl,isArrayBuffer:BS,isBuffer:xu,isFormData:XM,isArrayBufferView:qM,isString:UM,isNumber:zS,isBoolean:WM,isObject:gu,isPlainObject:Im,isEmptyObject:VM,isReadableStream:ZM,isRequest:eL,isResponse:tL,isHeaders:rL,isUndefined:Wo,isDate:HM,isFile:KM,isBlob:GM,isRegExp:fL,isFunction:Cr,isStream:YM,isURLSearchParams:JM,isTypedArray:dL,isFileList:QM,forEach:yu,merge:zg,extend:sL,trim:nL,stripBOM:aL,inherits:iL,toFlatObject:oL,kindOf:tp,kindOfTest:Tn,endsWith:lL,toArray:cL,forEachEntry:uL,matchAll:mL,isHTMLForm:hL,hasOwnProperty:yw,hasOwnProp:yw,reduceDescriptors:WS,freezeMethods:xL,toObjectSet:gL,toCamelCase:pL,noop:yL,toFiniteNumber:bL,findKey:qS,global:Qa,isContextDefined:US,isSpecCompliantForm:vL,toJSONObject:jL,isAsyncFn:wL,isThenable:NL,setImmediate:VS,asap:_L,isIterable:kL};function $e(e,t,n,s,a){Error.call(this),Error.captureStackTrace?Error.captureStackTrace(this,this.constructor):this.stack=new Error().stack,this.message=e,this.name="AxiosError",t&&(this.code=t),n&&(this.config=n),s&&(this.request=s),a&&(this.response=a,this.status=a.status?a.status:null)}ce.inherits($e,Error,{toJSON:function(){return{message:this.message,name:this.name,description:this.description,number:this.number,fileName:this.fileName,lineNumber:this.lineNumber,columnNumber:this.columnNumber,stack:this.stack,config:ce.toJSONObject(this.config),code:this.code,status:this.status}}});const HS=$e.prototype,KS={};["ERR_BAD_OPTION_VALUE","ERR_BAD_OPTION","ECONNABORTED","ETIMEDOUT","ERR_NETWORK","ERR_FR_TOO_MANY_REDIRECTS","ERR_DEPRECATED","ERR_BAD_RESPONSE","ERR_BAD_REQUEST","ERR_CANCELED","ERR_NOT_SUPPORT","ERR_INVALID_URL"].forEach(e=>{KS[e]={value:e}});Object.defineProperties($e,KS);Object.defineProperty(HS,"isAxiosError",{value:!0});$e.from=(e,t,n,s,a,i)=>{const o=Object.create(HS);ce.toFlatObject(e,o,function(m){return m!==Error.prototype},d=>d!=="isAxiosError");const l=e&&e.message?e.message:"Error",c=t==null&&e?e.code:t;return $e.call(o,l,c,n,s,a),e&&o.cause==null&&Object.defineProperty(o,"cause",{value:e,configurable:!0}),o.name=e&&e.name||"Error",i&&Object.assign(o,i),o};const SL=null;function qg(e){return ce.isPlainObject(e)||ce.isArray(e)}function GS(e){return ce.endsWith(e,"[]")?e.slice(0,-2):e}function bw(e,t,n){return e?e.concat(t).map(function(a,i){return a=GS(a),!n&&i?"["+a+"]":a}).join(n?".":""):t}function CL(e){return ce.isArray(e)&&!e.some(qg)}const AL=ce.toFlatObject(ce,{},null,function(t){return/^is[A-Z]/.test(t)});function np(e,t,n){if(!ce.isObject(e))throw new TypeError("target must be an object");t=t||new FormData,n=ce.toFlatObject(n,{metaTokens:!0,dots:!1,indexes:!1},!1,function(g,x){return!ce.isUndefined(x[g])});const s=n.metaTokens,a=n.visitor||m,i=n.dots,o=n.indexes,c=(n.Blob||typeof Blob<"u"&&Blob)&&ce.isSpecCompliantForm(t);if(!ce.isFunction(a))throw new TypeError("visitor must be a function");function d(b){if(b===null)return"";if(ce.isDate(b))return b.toISOString();if(ce.isBoolean(b))return b.toString();if(!c&&ce.isBlob(b))throw new $e("Blob is not supported. Use a Buffer instead.");return ce.isArrayBuffer(b)||ce.isTypedArray(b)?c&&typeof Blob=="function"?new Blob([b]):Buffer.from(b):b}function m(b,g,x){let p=b;if(b&&!x&&typeof b=="object"){if(ce.endsWith(g,"{}"))g=s?g:g.slice(0,-2),b=JSON.stringify(b);else if(ce.isArray(b)&&CL(b)||(ce.isFileList(b)||ce.endsWith(g,"[]"))&&(p=ce.toArray(b)))return g=GS(g),p.forEach(function(v,N){!(ce.isUndefined(v)||v===null)&&t.append(o===!0?bw([g],N,i):o===null?g:g+"[]",d(v))}),!1}return qg(b)?!0:(t.append(bw(x,g,i),d(b)),!1)}const u=[],h=Object.assign(AL,{defaultVisitor:m,convertValue:d,isVisitable:qg});function f(b,g){if(!ce.isUndefined(b)){if(u.indexOf(b)!==-1)throw Error("Circular reference detected in "+g.join("."));u.push(b),ce.forEach(b,function(p,y){(!(ce.isUndefined(p)||p===null)&&a.call(t,p,ce.isString(y)?y.trim():y,g,h))===!0&&f(p,g?g.concat(y):[y])}),u.pop()}}if(!ce.isObject(e))throw new TypeError("data must be an object");return f(e),t}function vw(e){const t={"!":"%21","'":"%27","(":"%28",")":"%29","~":"%7E","%20":"+","%00":"\0"};return encodeURIComponent(e).replace(/[!'()~]|%20|%00/g,function(s){return t[s]})}function n1(e,t){this._pairs=[],e&&np(e,this,t)}const QS=n1.prototype;QS.append=function(t,n){this._pairs.push([t,n])};QS.toString=function(t){const n=t?function(s){return t.call(this,s,vw)}:vw;return this._pairs.map(function(a){return n(a[0])+"="+n(a[1])},"").join("&")};function PL(e){return encodeURIComponent(e).replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%20/g,"+")}function YS(e,t,n){if(!t)return e;const s=n&&n.encode||PL;ce.isFunction(n)&&(n={serialize:n});const a=n&&n.serialize;let i;if(a?i=a(t,n):i=ce.isURLSearchParams(t)?t.toString():new n1(t,n).toString(s),i){const o=e.indexOf("#");o!==-1&&(e=e.slice(0,o)),e+=(e.indexOf("?")===-1?"?":"&")+i}return e}class jw{constructor(){this.handlers=[]}use(t,n,s){return this.handlers.push({fulfilled:t,rejected:n,synchronous:s?s.synchronous:!1,runWhen:s?s.runWhen:null}),this.handlers.length-1}eject(t){this.handlers[t]&&(this.handlers[t]=null)}clear(){this.handlers&&(this.handlers=[])}forEach(t){ce.forEach(this.handlers,function(s){s!==null&&t(s)})}}const XS={silentJSONParsing:!0,forcedJSONParsing:!0,clarifyTimeoutError:!1},EL=typeof URLSearchParams<"u"?URLSearchParams:n1,OL=typeof FormData<"u"?FormData:null,TL=typeof Blob<"u"?Blob:null,ML={isBrowser:!0,classes:{URLSearchParams:EL,FormData:OL,Blob:TL},protocols:["http","https","file","blob","url","data"]},s1=typeof window<"u"&&typeof document<"u",Ug=typeof navigator=="object"&&navigator||void 0,LL=s1&&(!Ug||["ReactNative","NativeScript","NS"].indexOf(Ug.product)<0),$L=typeof WorkerGlobalScope<"u"&&self instanceof WorkerGlobalScope&&typeof self.importScripts=="function",RL=s1&&window.location.href||"http://localhost",IL=Object.freeze(Object.defineProperty({__proto__:null,hasBrowserEnv:s1,hasStandardBrowserEnv:LL,hasStandardBrowserWebWorkerEnv:$L,navigator:Ug,origin:RL},Symbol.toStringTag,{value:"Module"})),Zt={...IL,...ML};function DL(e,t){return np(e,new Zt.classes.URLSearchParams,{visitor:function(n,s,a,i){return Zt.isNode&&ce.isBuffer(n)?(this.append(s,n.toString("base64")),!1):i.defaultVisitor.apply(this,arguments)},...t})}function FL(e){return ce.matchAll(/\w+|\[(\w*)]/g,e).map(t=>t[0]==="[]"?"":t[1]||t[0])}function BL(e){const t={},n=Object.keys(e);let s;const a=n.length;let i;for(s=0;s<a;s++)i=n[s],t[i]=e[i];return t}function JS(e){function t(n,s,a,i){let o=n[i++];if(o==="__proto__")return!0;const l=Number.isFinite(+o),c=i>=n.length;return o=!o&&ce.isArray(a)?a.length:o,c?(ce.hasOwnProp(a,o)?a[o]=[a[o],s]:a[o]=s,!l):((!a[o]||!ce.isObject(a[o]))&&(a[o]=[]),t(n,s,a[o],i)&&ce.isArray(a[o])&&(a[o]=BL(a[o])),!l)}if(ce.isFormData(e)&&ce.isFunction(e.entries)){const n={};return ce.forEachEntry(e,(s,a)=>{t(FL(s),a,n,0)}),n}return null}function zL(e,t,n){if(ce.isString(e))try{return(t||JSON.parse)(e),ce.trim(e)}catch(s){if(s.name!=="SyntaxError")throw s}return(n||JSON.stringify)(e)}const bu={transitional:XS,adapter:["xhr","http","fetch"],transformRequest:[function(t,n){const s=n.getContentType()||"",a=s.indexOf("application/json")>-1,i=ce.isObject(t);if(i&&ce.isHTMLForm(t)&&(t=new FormData(t)),ce.isFormData(t))return a?JSON.stringify(JS(t)):t;if(ce.isArrayBuffer(t)||ce.isBuffer(t)||ce.isStream(t)||ce.isFile(t)||ce.isBlob(t)||ce.isReadableStream(t))return t;if(ce.isArrayBufferView(t))return t.buffer;if(ce.isURLSearchParams(t))return n.setContentType("application/x-www-form-urlencoded;charset=utf-8",!1),t.toString();let l;if(i){if(s.indexOf("application/x-www-form-urlencoded")>-1)return DL(t,this.formSerializer).toString();if((l=ce.isFileList(t))||s.indexOf("multipart/form-data")>-1){const c=this.env&&this.env.FormData;return np(l?{"files[]":t}:t,c&&new c,this.formSerializer)}}return i||a?(n.setContentType("application/json",!1),zL(t)):t}],transformResponse:[function(t){const n=this.transitional||bu.transitional,s=n&&n.forcedJSONParsing,a=this.responseType==="json";if(ce.isResponse(t)||ce.isReadableStream(t))return t;if(t&&ce.isString(t)&&(s&&!this.responseType||a)){const o=!(n&&n.silentJSONParsing)&&a;try{return JSON.parse(t,this.parseReviver)}catch(l){if(o)throw l.name==="SyntaxError"?$e.from(l,$e.ERR_BAD_RESPONSE,this,null,this.response):l}}return t}],timeout:0,xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",maxContentLength:-1,maxBodyLength:-1,env:{FormData:Zt.classes.FormData,Blob:Zt.classes.Blob},validateStatus:function(t){return t>=200&&t<300},headers:{common:{Accept:"application/json, text/plain, */*","Content-Type":void 0}}};ce.forEach(["delete","get","head","post","put","patch"],e=>{bu.headers[e]={}});const qL=ce.toObjectSet(["age","authorization","content-length","content-type","etag","expires","from","host","if-modified-since","if-unmodified-since","last-modified","location","max-forwards","proxy-authorization","referer","retry-after","user-agent"]),UL=e=>{const t={};let n,s,a;return e&&e.split(`
`).forEach(function(o){a=o.indexOf(":"),n=o.substring(0,a).trim().toLowerCase(),s=o.substring(a+1).trim(),!(!n||t[n]&&qL[n])&&(n==="set-cookie"?t[n]?t[n].push(s):t[n]=[s]:t[n]=t[n]?t[n]+", "+s:s)}),t},ww=Symbol("internals");function ec(e){return e&&String(e).trim().toLowerCase()}function Dm(e){return e===!1||e==null?e:ce.isArray(e)?e.map(Dm):String(e)}function WL(e){const t=Object.create(null),n=/([^\s,;=]+)\s*(?:=\s*([^,;]+))?/g;let s;for(;s=n.exec(e);)t[s[1]]=s[2];return t}const VL=e=>/^[-_a-zA-Z0-9^`|~,!#$%&'*+.]+$/.test(e.trim());function Vf(e,t,n,s,a){if(ce.isFunction(s))return s.call(this,t,n);if(a&&(t=n),!!ce.isString(t)){if(ce.isString(s))return t.indexOf(s)!==-1;if(ce.isRegExp(s))return s.test(t)}}function HL(e){return e.trim().toLowerCase().replace(/([a-z\d])(\w*)/g,(t,n,s)=>n.toUpperCase()+s)}function KL(e,t){const n=ce.toCamelCase(" "+t);["get","set","has"].forEach(s=>{Object.defineProperty(e,s+n,{value:function(a,i,o){return this[s].call(this,t,a,i,o)},configurable:!0})})}let Ar=class{constructor(t){t&&this.set(t)}set(t,n,s){const a=this;function i(l,c,d){const m=ec(c);if(!m)throw new Error("header name must be a non-empty string");const u=ce.findKey(a,m);(!u||a[u]===void 0||d===!0||d===void 0&&a[u]!==!1)&&(a[u||c]=Dm(l))}const o=(l,c)=>ce.forEach(l,(d,m)=>i(d,m,c));if(ce.isPlainObject(t)||t instanceof this.constructor)o(t,n);else if(ce.isString(t)&&(t=t.trim())&&!VL(t))o(UL(t),n);else if(ce.isObject(t)&&ce.isIterable(t)){let l={},c,d;for(const m of t){if(!ce.isArray(m))throw TypeError("Object iterator must return a key-value pair");l[d=m[0]]=(c=l[d])?ce.isArray(c)?[...c,m[1]]:[c,m[1]]:m[1]}o(l,n)}else t!=null&&i(n,t,s);return this}get(t,n){if(t=ec(t),t){const s=ce.findKey(this,t);if(s){const a=this[s];if(!n)return a;if(n===!0)return WL(a);if(ce.isFunction(n))return n.call(this,a,s);if(ce.isRegExp(n))return n.exec(a);throw new TypeError("parser must be boolean|regexp|function")}}}has(t,n){if(t=ec(t),t){const s=ce.findKey(this,t);return!!(s&&this[s]!==void 0&&(!n||Vf(this,this[s],s,n)))}return!1}delete(t,n){const s=this;let a=!1;function i(o){if(o=ec(o),o){const l=ce.findKey(s,o);l&&(!n||Vf(s,s[l],l,n))&&(delete s[l],a=!0)}}return ce.isArray(t)?t.forEach(i):i(t),a}clear(t){const n=Object.keys(this);let s=n.length,a=!1;for(;s--;){const i=n[s];(!t||Vf(this,this[i],i,t,!0))&&(delete this[i],a=!0)}return a}normalize(t){const n=this,s={};return ce.forEach(this,(a,i)=>{const o=ce.findKey(s,i);if(o){n[o]=Dm(a),delete n[i];return}const l=t?HL(i):String(i).trim();l!==i&&delete n[i],n[l]=Dm(a),s[l]=!0}),this}concat(...t){return this.constructor.concat(this,...t)}toJSON(t){const n=Object.create(null);return ce.forEach(this,(s,a)=>{s!=null&&s!==!1&&(n[a]=t&&ce.isArray(s)?s.join(", "):s)}),n}[Symbol.iterator](){return Object.entries(this.toJSON())[Symbol.iterator]()}toString(){return Object.entries(this.toJSON()).map(([t,n])=>t+": "+n).join(`
`)}getSetCookie(){return this.get("set-cookie")||[]}get[Symbol.toStringTag](){return"AxiosHeaders"}static from(t){return t instanceof this?t:new this(t)}static concat(t,...n){const s=new this(t);return n.forEach(a=>s.set(a)),s}static accessor(t){const s=(this[ww]=this[ww]={accessors:{}}).accessors,a=this.prototype;function i(o){const l=ec(o);s[l]||(KL(a,o),s[l]=!0)}return ce.isArray(t)?t.forEach(i):i(t),this}};Ar.accessor(["Content-Type","Content-Length","Accept","Accept-Encoding","User-Agent","Authorization"]);ce.reduceDescriptors(Ar.prototype,({value:e},t)=>{let n=t[0].toUpperCase()+t.slice(1);return{get:()=>e,set(s){this[n]=s}}});ce.freezeMethods(Ar);function Hf(e,t){const n=this||bu,s=t||n,a=Ar.from(s.headers);let i=s.data;return ce.forEach(e,function(l){i=l.call(n,i,a.normalize(),t?t.status:void 0)}),a.normalize(),i}function ZS(e){return!!(e&&e.__CANCEL__)}function Al(e,t,n){$e.call(this,e??"canceled",$e.ERR_CANCELED,t,n),this.name="CanceledError"}ce.inherits(Al,$e,{__CANCEL__:!0});function eC(e,t,n){const s=n.config.validateStatus;!n.status||!s||s(n.status)?e(n):t(new $e("Request failed with status code "+n.status,[$e.ERR_BAD_REQUEST,$e.ERR_BAD_RESPONSE][Math.floor(n.status/100)-4],n.config,n.request,n))}function GL(e){const t=/^([-+\w]{1,25})(:?\/\/|:)/.exec(e);return t&&t[1]||""}function QL(e,t){e=e||10;const n=new Array(e),s=new Array(e);let a=0,i=0,o;return t=t!==void 0?t:1e3,function(c){const d=Date.now(),m=s[i];o||(o=d),n[a]=c,s[a]=d;let u=i,h=0;for(;u!==a;)h+=n[u++],u=u%e;if(a=(a+1)%e,a===i&&(i=(i+1)%e),d-o<t)return;const f=m&&d-m;return f?Math.round(h*1e3/f):void 0}}function YL(e,t){let n=0,s=1e3/t,a,i;const o=(d,m=Date.now())=>{n=m,a=null,i&&(clearTimeout(i),i=null),e(...d)};return[(...d)=>{const m=Date.now(),u=m-n;u>=s?o(d,m):(a=d,i||(i=setTimeout(()=>{i=null,o(a)},s-u)))},()=>a&&o(a)]}const Nh=(e,t,n=3)=>{let s=0;const a=QL(50,250);return YL(i=>{const o=i.loaded,l=i.lengthComputable?i.total:void 0,c=o-s,d=a(c),m=o<=l;s=o;const u={loaded:o,total:l,progress:l?o/l:void 0,bytes:c,rate:d||void 0,estimated:d&&l&&m?(l-o)/d:void 0,event:i,lengthComputable:l!=null,[t?"download":"upload"]:!0};e(u)},n)},Nw=(e,t)=>{const n=e!=null;return[s=>t[0]({lengthComputable:n,total:e,loaded:s}),t[1]]},_w=e=>(...t)=>ce.asap(()=>e(...t)),XL=Zt.hasStandardBrowserEnv?((e,t)=>n=>(n=new URL(n,Zt.origin),e.protocol===n.protocol&&e.host===n.host&&(t||e.port===n.port)))(new URL(Zt.origin),Zt.navigator&&/(msie|trident)/i.test(Zt.navigator.userAgent)):()=>!0,JL=Zt.hasStandardBrowserEnv?{write(e,t,n,s,a,i,o){if(typeof document>"u")return;const l=[`${e}=${encodeURIComponent(t)}`];ce.isNumber(n)&&l.push(`expires=${new Date(n).toUTCString()}`),ce.isString(s)&&l.push(`path=${s}`),ce.isString(a)&&l.push(`domain=${a}`),i===!0&&l.push("secure"),ce.isString(o)&&l.push(`SameSite=${o}`),document.cookie=l.join("; ")},read(e){if(typeof document>"u")return null;const t=document.cookie.match(new RegExp("(?:^|; )"+e+"=([^;]*)"));return t?decodeURIComponent(t[1]):null},remove(e){this.write(e,"",Date.now()-864e5,"/")}}:{write(){},read(){return null},remove(){}};function ZL(e){return/^([a-z][a-z\d+\-.]*:)?\/\//i.test(e)}function e$(e,t){return t?e.replace(/\/?\/$/,"")+"/"+t.replace(/^\/+/,""):e}function tC(e,t,n){let s=!ZL(t);return e&&(s||n==!1)?e$(e,t):t}const kw=e=>e instanceof Ar?{...e}:e;function vi(e,t){t=t||{};const n={};function s(d,m,u,h){return ce.isPlainObject(d)&&ce.isPlainObject(m)?ce.merge.call({caseless:h},d,m):ce.isPlainObject(m)?ce.merge({},m):ce.isArray(m)?m.slice():m}function a(d,m,u,h){if(ce.isUndefined(m)){if(!ce.isUndefined(d))return s(void 0,d,u,h)}else return s(d,m,u,h)}function i(d,m){if(!ce.isUndefined(m))return s(void 0,m)}function o(d,m){if(ce.isUndefined(m)){if(!ce.isUndefined(d))return s(void 0,d)}else return s(void 0,m)}function l(d,m,u){if(u in t)return s(d,m);if(u in e)return s(void 0,d)}const c={url:i,method:i,data:i,baseURL:o,transformRequest:o,transformResponse:o,paramsSerializer:o,timeout:o,timeoutMessage:o,withCredentials:o,withXSRFToken:o,adapter:o,responseType:o,xsrfCookieName:o,xsrfHeaderName:o,onUploadProgress:o,onDownloadProgress:o,decompress:o,maxContentLength:o,maxBodyLength:o,beforeRedirect:o,transport:o,httpAgent:o,httpsAgent:o,cancelToken:o,socketPath:o,responseEncoding:o,validateStatus:l,headers:(d,m,u)=>a(kw(d),kw(m),u,!0)};return ce.forEach(Object.keys({...e,...t}),function(m){const u=c[m]||a,h=u(e[m],t[m],m);ce.isUndefined(h)&&u!==l||(n[m]=h)}),n}const rC=e=>{const t=vi({},e);let{data:n,withXSRFToken:s,xsrfHeaderName:a,xsrfCookieName:i,headers:o,auth:l}=t;if(t.headers=o=Ar.from(o),t.url=YS(tC(t.baseURL,t.url,t.allowAbsoluteUrls),e.params,e.paramsSerializer),l&&o.set("Authorization","Basic "+btoa((l.username||"")+":"+(l.password?unescape(encodeURIComponent(l.password)):""))),ce.isFormData(n)){if(Zt.hasStandardBrowserEnv||Zt.hasStandardBrowserWebWorkerEnv)o.setContentType(void 0);else if(ce.isFunction(n.getHeaders)){const c=n.getHeaders(),d=["content-type","content-length"];Object.entries(c).forEach(([m,u])=>{d.includes(m.toLowerCase())&&o.set(m,u)})}}if(Zt.hasStandardBrowserEnv&&(s&&ce.isFunction(s)&&(s=s(t)),s||s!==!1&&XL(t.url))){const c=a&&i&&JL.read(i);c&&o.set(a,c)}return t},t$=typeof XMLHttpRequest<"u",r$=t$&&function(e){return new Promise(function(n,s){const a=rC(e);let i=a.data;const o=Ar.from(a.headers).normalize();let{responseType:l,onUploadProgress:c,onDownloadProgress:d}=a,m,u,h,f,b;function g(){f&&f(),b&&b(),a.cancelToken&&a.cancelToken.unsubscribe(m),a.signal&&a.signal.removeEventListener("abort",m)}let x=new XMLHttpRequest;x.open(a.method.toUpperCase(),a.url,!0),x.timeout=a.timeout;function p(){if(!x)return;const v=Ar.from("getAllResponseHeaders"in x&&x.getAllResponseHeaders()),w={data:!l||l==="text"||l==="json"?x.responseText:x.response,status:x.status,statusText:x.statusText,headers:v,config:e,request:x};eC(function(_){n(_),g()},function(_){s(_),g()},w),x=null}"onloadend"in x?x.onloadend=p:x.onreadystatechange=function(){!x||x.readyState!==4||x.status===0&&!(x.responseURL&&x.responseURL.indexOf("file:")===0)||setTimeout(p)},x.onabort=function(){x&&(s(new $e("Request aborted",$e.ECONNABORTED,e,x)),x=null)},x.onerror=function(N){const w=N&&N.message?N.message:"Network Error",j=new $e(w,$e.ERR_NETWORK,e,x);j.event=N||null,s(j),x=null},x.ontimeout=function(){let N=a.timeout?"timeout of "+a.timeout+"ms exceeded":"timeout exceeded";const w=a.transitional||XS;a.timeoutErrorMessage&&(N=a.timeoutErrorMessage),s(new $e(N,w.clarifyTimeoutError?$e.ETIMEDOUT:$e.ECONNABORTED,e,x)),x=null},i===void 0&&o.setContentType(null),"setRequestHeader"in x&&ce.forEach(o.toJSON(),function(N,w){x.setRequestHeader(w,N)}),ce.isUndefined(a.withCredentials)||(x.withCredentials=!!a.withCredentials),l&&l!=="json"&&(x.responseType=a.responseType),d&&([h,b]=Nh(d,!0),x.addEventListener("progress",h)),c&&x.upload&&([u,f]=Nh(c),x.upload.addEventListener("progress",u),x.upload.addEventListener("loadend",f)),(a.cancelToken||a.signal)&&(m=v=>{x&&(s(!v||v.type?new Al(null,e,x):v),x.abort(),x=null)},a.cancelToken&&a.cancelToken.subscribe(m),a.signal&&(a.signal.aborted?m():a.signal.addEventListener("abort",m)));const y=GL(a.url);if(y&&Zt.protocols.indexOf(y)===-1){s(new $e("Unsupported protocol "+y+":",$e.ERR_BAD_REQUEST,e));return}x.send(i||null)})},n$=(e,t)=>{const{length:n}=e=e?e.filter(Boolean):[];if(t||n){let s=new AbortController,a;const i=function(d){if(!a){a=!0,l();const m=d instanceof Error?d:this.reason;s.abort(m instanceof $e?m:new Al(m instanceof Error?m.message:m))}};let o=t&&setTimeout(()=>{o=null,i(new $e(`timeout ${t} of ms exceeded`,$e.ETIMEDOUT))},t);const l=()=>{e&&(o&&clearTimeout(o),o=null,e.forEach(d=>{d.unsubscribe?d.unsubscribe(i):d.removeEventListener("abort",i)}),e=null)};e.forEach(d=>d.addEventListener("abort",i));const{signal:c}=s;return c.unsubscribe=()=>ce.asap(l),c}},s$=function*(e,t){let n=e.byteLength;if(n<t){yield e;return}let s=0,a;for(;s<n;)a=s+t,yield e.slice(s,a),s=a},a$=async function*(e,t){for await(const n of i$(e))yield*s$(n,t)},i$=async function*(e){if(e[Symbol.asyncIterator]){yield*e;return}const t=e.getReader();try{for(;;){const{done:n,value:s}=await t.read();if(n)break;yield s}}finally{await t.cancel()}},Sw=(e,t,n,s)=>{const a=a$(e,t);let i=0,o,l=c=>{o||(o=!0,s&&s(c))};return new ReadableStream({async pull(c){try{const{done:d,value:m}=await a.next();if(d){l(),c.close();return}let u=m.byteLength;if(n){let h=i+=u;n(h)}c.enqueue(new Uint8Array(m))}catch(d){throw l(d),d}},cancel(c){return l(c),a.return()}},{highWaterMark:2})},Cw=64*1024,{isFunction:tm}=ce,o$=(({Request:e,Response:t})=>({Request:e,Response:t}))(ce.global),{ReadableStream:Aw,TextEncoder:Pw}=ce.global,Ew=(e,...t)=>{try{return!!e(...t)}catch{return!1}},l$=e=>{e=ce.merge.call({skipUndefined:!0},o$,e);const{fetch:t,Request:n,Response:s}=e,a=t?tm(t):typeof fetch=="function",i=tm(n),o=tm(s);if(!a)return!1;const l=a&&tm(Aw),c=a&&(typeof Pw=="function"?(b=>g=>b.encode(g))(new Pw):async b=>new Uint8Array(await new n(b).arrayBuffer())),d=i&&l&&Ew(()=>{let b=!1;const g=new n(Zt.origin,{body:new Aw,method:"POST",get duplex(){return b=!0,"half"}}).headers.has("Content-Type");return b&&!g}),m=o&&l&&Ew(()=>ce.isReadableStream(new s("").body)),u={stream:m&&(b=>b.body)};a&&["text","arrayBuffer","blob","formData","stream"].forEach(b=>{!u[b]&&(u[b]=(g,x)=>{let p=g&&g[b];if(p)return p.call(g);throw new $e(`Response type '${b}' is not supported`,$e.ERR_NOT_SUPPORT,x)})});const h=async b=>{if(b==null)return 0;if(ce.isBlob(b))return b.size;if(ce.isSpecCompliantForm(b))return(await new n(Zt.origin,{method:"POST",body:b}).arrayBuffer()).byteLength;if(ce.isArrayBufferView(b)||ce.isArrayBuffer(b))return b.byteLength;if(ce.isURLSearchParams(b)&&(b=b+""),ce.isString(b))return(await c(b)).byteLength},f=async(b,g)=>{const x=ce.toFiniteNumber(b.getContentLength());return x??h(g)};return async b=>{let{url:g,method:x,data:p,signal:y,cancelToken:v,timeout:N,onDownloadProgress:w,onUploadProgress:j,responseType:_,headers:S,withCredentials:T="same-origin",fetchOptions:A}=rC(b),E=t||fetch;_=_?(_+"").toLowerCase():"text";let R=n$([y,v&&v.toAbortSignal()],N),I=null;const O=R&&R.unsubscribe&&(()=>{R.unsubscribe()});let L;try{if(j&&d&&x!=="get"&&x!=="head"&&(L=await f(S,p))!==0){let V=new n(g,{method:"POST",body:p,duplex:"half"}),K;if(ce.isFormData(p)&&(K=V.headers.get("content-type"))&&S.setContentType(K),V.body){const[ne,G]=Nw(L,Nh(_w(j)));p=Sw(V.body,Cw,ne,G)}}ce.isString(T)||(T=T?"include":"omit");const F=i&&"credentials"in n.prototype,M={...A,signal:R,method:x.toUpperCase(),headers:S.normalize().toJSON(),body:p,duplex:"half",credentials:F?T:void 0};I=i&&new n(g,M);let D=await(i?E(I,A):E(g,M));const W=m&&(_==="stream"||_==="response");if(m&&(w||W&&O)){const V={};["status","statusText","headers"].forEach(oe=>{V[oe]=D[oe]});const K=ce.toFiniteNumber(D.headers.get("content-length")),[ne,G]=w&&Nw(K,Nh(_w(w),!0))||[];D=new s(Sw(D.body,Cw,ne,()=>{G&&G(),O&&O()}),V)}_=_||"text";let P=await u[ce.findKey(u,_)||"text"](D,b);return!W&&O&&O(),await new Promise((V,K)=>{eC(V,K,{data:P,headers:Ar.from(D.headers),status:D.status,statusText:D.statusText,config:b,request:I})})}catch(F){throw O&&O(),F&&F.name==="TypeError"&&/Load failed|fetch/i.test(F.message)?Object.assign(new $e("Network Error",$e.ERR_NETWORK,b,I),{cause:F.cause||F}):$e.from(F,F&&F.code,b,I)}}},c$=new Map,nC=e=>{let t=e&&e.env||{};const{fetch:n,Request:s,Response:a}=t,i=[s,a,n];let o=i.length,l=o,c,d,m=c$;for(;l--;)c=i[l],d=m.get(c),d===void 0&&m.set(c,d=l?new Map:l$(t)),m=d;return d};nC();const a1={http:SL,xhr:r$,fetch:{get:nC}};ce.forEach(a1,(e,t)=>{if(e){try{Object.defineProperty(e,"name",{value:t})}catch{}Object.defineProperty(e,"adapterName",{value:t})}});const Ow=e=>`- ${e}`,d$=e=>ce.isFunction(e)||e===null||e===!1;function u$(e,t){e=ce.isArray(e)?e:[e];const{length:n}=e;let s,a;const i={};for(let o=0;o<n;o++){s=e[o];let l;if(a=s,!d$(s)&&(a=a1[(l=String(s)).toLowerCase()],a===void 0))throw new $e(`Unknown adapter '${l}'`);if(a&&(ce.isFunction(a)||(a=a.get(t))))break;i[l||"#"+o]=a}if(!a){const o=Object.entries(i).map(([c,d])=>`adapter ${c} `+(d===!1?"is not supported by the environment":"is not available in the build"));let l=n?o.length>1?`since :
`+o.map(Ow).join(`
`):" "+Ow(o[0]):"as no adapter specified";throw new $e("There is no suitable adapter to dispatch the request "+l,"ERR_NOT_SUPPORT")}return a}const sC={getAdapter:u$,adapters:a1};function Kf(e){if(e.cancelToken&&e.cancelToken.throwIfRequested(),e.signal&&e.signal.aborted)throw new Al(null,e)}function Tw(e){return Kf(e),e.headers=Ar.from(e.headers),e.data=Hf.call(e,e.transformRequest),["post","put","patch"].indexOf(e.method)!==-1&&e.headers.setContentType("application/x-www-form-urlencoded",!1),sC.getAdapter(e.adapter||bu.adapter,e)(e).then(function(s){return Kf(e),s.data=Hf.call(e,e.transformResponse,s),s.headers=Ar.from(s.headers),s},function(s){return ZS(s)||(Kf(e),s&&s.response&&(s.response.data=Hf.call(e,e.transformResponse,s.response),s.response.headers=Ar.from(s.response.headers))),Promise.reject(s)})}const aC="1.13.2",sp={};["object","boolean","number","function","string","symbol"].forEach((e,t)=>{sp[e]=function(s){return typeof s===e||"a"+(t<1?"n ":" ")+e}});const Mw={};sp.transitional=function(t,n,s){function a(i,o){return"[Axios v"+aC+"] Transitional option '"+i+"'"+o+(s?". "+s:"")}return(i,o,l)=>{if(t===!1)throw new $e(a(o," has been removed"+(n?" in "+n:"")),$e.ERR_DEPRECATED);return n&&!Mw[o]&&(Mw[o]=!0,console.warn(a(o," has been deprecated since v"+n+" and will be removed in the near future"))),t?t(i,o,l):!0}};sp.spelling=function(t){return(n,s)=>(console.warn(`${s} is likely a misspelling of ${t}`),!0)};function m$(e,t,n){if(typeof e!="object")throw new $e("options must be an object",$e.ERR_BAD_OPTION_VALUE);const s=Object.keys(e);let a=s.length;for(;a-- >0;){const i=s[a],o=t[i];if(o){const l=e[i],c=l===void 0||o(l,i,e);if(c!==!0)throw new $e("option "+i+" must be "+c,$e.ERR_BAD_OPTION_VALUE);continue}if(n!==!0)throw new $e("Unknown option "+i,$e.ERR_BAD_OPTION)}}const Fm={assertOptions:m$,validators:sp},Rn=Fm.validators;let mi=class{constructor(t){this.defaults=t||{},this.interceptors={request:new jw,response:new jw}}async request(t,n){try{return await this._request(t,n)}catch(s){if(s instanceof Error){let a={};Error.captureStackTrace?Error.captureStackTrace(a):a=new Error;const i=a.stack?a.stack.replace(/^.+\n/,""):"";try{s.stack?i&&!String(s.stack).endsWith(i.replace(/^.+\n.+\n/,""))&&(s.stack+=`
`+i):s.stack=i}catch{}}throw s}}_request(t,n){typeof t=="string"?(n=n||{},n.url=t):n=t||{},n=vi(this.defaults,n);const{transitional:s,paramsSerializer:a,headers:i}=n;s!==void 0&&Fm.assertOptions(s,{silentJSONParsing:Rn.transitional(Rn.boolean),forcedJSONParsing:Rn.transitional(Rn.boolean),clarifyTimeoutError:Rn.transitional(Rn.boolean)},!1),a!=null&&(ce.isFunction(a)?n.paramsSerializer={serialize:a}:Fm.assertOptions(a,{encode:Rn.function,serialize:Rn.function},!0)),n.allowAbsoluteUrls!==void 0||(this.defaults.allowAbsoluteUrls!==void 0?n.allowAbsoluteUrls=this.defaults.allowAbsoluteUrls:n.allowAbsoluteUrls=!0),Fm.assertOptions(n,{baseUrl:Rn.spelling("baseURL"),withXsrfToken:Rn.spelling("withXSRFToken")},!0),n.method=(n.method||this.defaults.method||"get").toLowerCase();let o=i&&ce.merge(i.common,i[n.method]);i&&ce.forEach(["delete","get","head","post","put","patch","common"],b=>{delete i[b]}),n.headers=Ar.concat(o,i);const l=[];let c=!0;this.interceptors.request.forEach(function(g){typeof g.runWhen=="function"&&g.runWhen(n)===!1||(c=c&&g.synchronous,l.unshift(g.fulfilled,g.rejected))});const d=[];this.interceptors.response.forEach(function(g){d.push(g.fulfilled,g.rejected)});let m,u=0,h;if(!c){const b=[Tw.bind(this),void 0];for(b.unshift(...l),b.push(...d),h=b.length,m=Promise.resolve(n);u<h;)m=m.then(b[u++],b[u++]);return m}h=l.length;let f=n;for(;u<h;){const b=l[u++],g=l[u++];try{f=b(f)}catch(x){g.call(this,x);break}}try{m=Tw.call(this,f)}catch(b){return Promise.reject(b)}for(u=0,h=d.length;u<h;)m=m.then(d[u++],d[u++]);return m}getUri(t){t=vi(this.defaults,t);const n=tC(t.baseURL,t.url,t.allowAbsoluteUrls);return YS(n,t.params,t.paramsSerializer)}};ce.forEach(["delete","get","head","options"],function(t){mi.prototype[t]=function(n,s){return this.request(vi(s||{},{method:t,url:n,data:(s||{}).data}))}});ce.forEach(["post","put","patch"],function(t){function n(s){return function(i,o,l){return this.request(vi(l||{},{method:t,headers:s?{"Content-Type":"multipart/form-data"}:{},url:i,data:o}))}}mi.prototype[t]=n(),mi.prototype[t+"Form"]=n(!0)});let h$=class iC{constructor(t){if(typeof t!="function")throw new TypeError("executor must be a function.");let n;this.promise=new Promise(function(i){n=i});const s=this;this.promise.then(a=>{if(!s._listeners)return;let i=s._listeners.length;for(;i-- >0;)s._listeners[i](a);s._listeners=null}),this.promise.then=a=>{let i;const o=new Promise(l=>{s.subscribe(l),i=l}).then(a);return o.cancel=function(){s.unsubscribe(i)},o},t(function(i,o,l){s.reason||(s.reason=new Al(i,o,l),n(s.reason))})}throwIfRequested(){if(this.reason)throw this.reason}subscribe(t){if(this.reason){t(this.reason);return}this._listeners?this._listeners.push(t):this._listeners=[t]}unsubscribe(t){if(!this._listeners)return;const n=this._listeners.indexOf(t);n!==-1&&this._listeners.splice(n,1)}toAbortSignal(){const t=new AbortController,n=s=>{t.abort(s)};return this.subscribe(n),t.signal.unsubscribe=()=>this.unsubscribe(n),t.signal}static source(){let t;return{token:new iC(function(a){t=a}),cancel:t}}};function p$(e){return function(n){return e.apply(null,n)}}function f$(e){return ce.isObject(e)&&e.isAxiosError===!0}const Wg={Continue:100,SwitchingProtocols:101,Processing:102,EarlyHints:103,Ok:200,Created:201,Accepted:202,NonAuthoritativeInformation:203,NoContent:204,ResetContent:205,PartialContent:206,MultiStatus:207,AlreadyReported:208,ImUsed:226,MultipleChoices:300,MovedPermanently:301,Found:302,SeeOther:303,NotModified:304,UseProxy:305,Unused:306,TemporaryRedirect:307,PermanentRedirect:308,BadRequest:400,Unauthorized:401,PaymentRequired:402,Forbidden:403,NotFound:404,MethodNotAllowed:405,NotAcceptable:406,ProxyAuthenticationRequired:407,RequestTimeout:408,Conflict:409,Gone:410,LengthRequired:411,PreconditionFailed:412,PayloadTooLarge:413,UriTooLong:414,UnsupportedMediaType:415,RangeNotSatisfiable:416,ExpectationFailed:417,ImATeapot:418,MisdirectedRequest:421,UnprocessableEntity:422,Locked:423,FailedDependency:424,TooEarly:425,UpgradeRequired:426,PreconditionRequired:428,TooManyRequests:429,RequestHeaderFieldsTooLarge:431,UnavailableForLegalReasons:451,InternalServerError:500,NotImplemented:501,BadGateway:502,ServiceUnavailable:503,GatewayTimeout:504,HttpVersionNotSupported:505,VariantAlsoNegotiates:506,InsufficientStorage:507,LoopDetected:508,NotExtended:510,NetworkAuthenticationRequired:511,WebServerIsDown:521,ConnectionTimedOut:522,OriginIsUnreachable:523,TimeoutOccurred:524,SslHandshakeFailed:525,InvalidSslCertificate:526};Object.entries(Wg).forEach(([e,t])=>{Wg[t]=e});function oC(e){const t=new mi(e),n=DS(mi.prototype.request,t);return ce.extend(n,mi.prototype,t,{allOwnKeys:!0}),ce.extend(n,t,null,{allOwnKeys:!0}),n.create=function(a){return oC(vi(e,a))},n}const te=oC(bu);te.Axios=mi;te.CanceledError=Al;te.CancelToken=h$;te.isCancel=ZS;te.VERSION=aC;te.toFormData=np;te.AxiosError=$e;te.Cancel=te.CanceledError;te.all=function(t){return Promise.all(t)};te.spread=p$;te.isAxiosError=f$;te.mergeConfig=vi;te.AxiosHeaders=Ar;te.formToJSON=e=>JS(ce.isHTMLForm(e)?new FormData(e):e);te.getAdapter=sC.getAdapter;te.HttpStatusCode=Wg;te.default=te;const{Axios:rve,AxiosError:nve,CanceledError:sve,isCancel:ave,CancelToken:ive,VERSION:ove,all:lve,Cancel:cve,isAxiosError:dve,spread:uve,toFormData:mve,AxiosHeaders:hve,HttpStatusCode:pve,formToJSON:fve,getAdapter:xve,mergeConfig:gve}=te,Gn=Object.create(null);Gn.open="0";Gn.close="1";Gn.ping="2";Gn.pong="3";Gn.message="4";Gn.upgrade="5";Gn.noop="6";const Bm=Object.create(null);Object.keys(Gn).forEach(e=>{Bm[Gn[e]]=e});const Vg={type:"error",data:"parser error"},lC=typeof Blob=="function"||typeof Blob<"u"&&Object.prototype.toString.call(Blob)==="[object BlobConstructor]",cC=typeof ArrayBuffer=="function",dC=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e&&e.buffer instanceof ArrayBuffer,i1=({type:e,data:t},n,s)=>lC&&t instanceof Blob?n?s(t):Lw(t,s):cC&&(t instanceof ArrayBuffer||dC(t))?n?s(t):Lw(new Blob([t]),s):s(Gn[e]+(t||"")),Lw=(e,t)=>{const n=new FileReader;return n.onload=function(){const s=n.result.split(",")[1];t("b"+(s||""))},n.readAsDataURL(e)};function $w(e){return e instanceof Uint8Array?e:e instanceof ArrayBuffer?new Uint8Array(e):new Uint8Array(e.buffer,e.byteOffset,e.byteLength)}let Gf;function x$(e,t){if(lC&&e.data instanceof Blob)return e.data.arrayBuffer().then($w).then(t);if(cC&&(e.data instanceof ArrayBuffer||dC(e.data)))return t($w(e.data));i1(e,!1,n=>{Gf||(Gf=new TextEncoder),t(Gf.encode(n))})}const Rw="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/",kc=typeof Uint8Array>"u"?[]:new Uint8Array(256);for(let e=0;e<Rw.length;e++)kc[Rw.charCodeAt(e)]=e;const g$=e=>{let t=e.length*.75,n=e.length,s,a=0,i,o,l,c;e[e.length-1]==="="&&(t--,e[e.length-2]==="="&&t--);const d=new ArrayBuffer(t),m=new Uint8Array(d);for(s=0;s<n;s+=4)i=kc[e.charCodeAt(s)],o=kc[e.charCodeAt(s+1)],l=kc[e.charCodeAt(s+2)],c=kc[e.charCodeAt(s+3)],m[a++]=i<<2|o>>4,m[a++]=(o&15)<<4|l>>2,m[a++]=(l&3)<<6|c&63;return d},y$=typeof ArrayBuffer=="function",o1=(e,t)=>{if(typeof e!="string")return{type:"message",data:uC(e,t)};const n=e.charAt(0);return n==="b"?{type:"message",data:b$(e.substring(1),t)}:Bm[n]?e.length>1?{type:Bm[n],data:e.substring(1)}:{type:Bm[n]}:Vg},b$=(e,t)=>{if(y$){const n=g$(e);return uC(n,t)}else return{base64:!0,data:e}},uC=(e,t)=>{switch(t){case"blob":return e instanceof Blob?e:new Blob([e]);case"arraybuffer":default:return e instanceof ArrayBuffer?e:e.buffer}},mC="",v$=(e,t)=>{const n=e.length,s=new Array(n);let a=0;e.forEach((i,o)=>{i1(i,!1,l=>{s[o]=l,++a===n&&t(s.join(mC))})})},j$=(e,t)=>{const n=e.split(mC),s=[];for(let a=0;a<n.length;a++){const i=o1(n[a],t);if(s.push(i),i.type==="error")break}return s};function w$(){return new TransformStream({transform(e,t){x$(e,n=>{const s=n.length;let a;if(s<126)a=new Uint8Array(1),new DataView(a.buffer).setUint8(0,s);else if(s<65536){a=new Uint8Array(3);const i=new DataView(a.buffer);i.setUint8(0,126),i.setUint16(1,s)}else{a=new Uint8Array(9);const i=new DataView(a.buffer);i.setUint8(0,127),i.setBigUint64(1,BigInt(s))}e.data&&typeof e.data!="string"&&(a[0]|=128),t.enqueue(a),t.enqueue(n)})}})}let Qf;function rm(e){return e.reduce((t,n)=>t+n.length,0)}function nm(e,t){if(e[0].length===t)return e.shift();const n=new Uint8Array(t);let s=0;for(let a=0;a<t;a++)n[a]=e[0][s++],s===e[0].length&&(e.shift(),s=0);return e.length&&s<e[0].length&&(e[0]=e[0].slice(s)),n}function N$(e,t){Qf||(Qf=new TextDecoder);const n=[];let s=0,a=-1,i=!1;return new TransformStream({transform(o,l){for(n.push(o);;){if(s===0){if(rm(n)<1)break;const c=nm(n,1);i=(c[0]&128)===128,a=c[0]&127,a<126?s=3:a===126?s=1:s=2}else if(s===1){if(rm(n)<2)break;const c=nm(n,2);a=new DataView(c.buffer,c.byteOffset,c.length).getUint16(0),s=3}else if(s===2){if(rm(n)<8)break;const c=nm(n,8),d=new DataView(c.buffer,c.byteOffset,c.length),m=d.getUint32(0);if(m>Math.pow(2,21)-1){l.enqueue(Vg);break}a=m*Math.pow(2,32)+d.getUint32(4),s=3}else{if(rm(n)<a)break;const c=nm(n,a);l.enqueue(o1(i?c:Qf.decode(c),t)),s=0}if(a===0||a>e){l.enqueue(Vg);break}}}})}const hC=4;function Nt(e){if(e)return _$(e)}function _$(e){for(var t in Nt.prototype)e[t]=Nt.prototype[t];return e}Nt.prototype.on=Nt.prototype.addEventListener=function(e,t){return this._callbacks=this._callbacks||{},(this._callbacks["$"+e]=this._callbacks["$"+e]||[]).push(t),this};Nt.prototype.once=function(e,t){function n(){this.off(e,n),t.apply(this,arguments)}return n.fn=t,this.on(e,n),this};Nt.prototype.off=Nt.prototype.removeListener=Nt.prototype.removeAllListeners=Nt.prototype.removeEventListener=function(e,t){if(this._callbacks=this._callbacks||{},arguments.length==0)return this._callbacks={},this;var n=this._callbacks["$"+e];if(!n)return this;if(arguments.length==1)return delete this._callbacks["$"+e],this;for(var s,a=0;a<n.length;a++)if(s=n[a],s===t||s.fn===t){n.splice(a,1);break}return n.length===0&&delete this._callbacks["$"+e],this};Nt.prototype.emit=function(e){this._callbacks=this._callbacks||{};for(var t=new Array(arguments.length-1),n=this._callbacks["$"+e],s=1;s<arguments.length;s++)t[s-1]=arguments[s];if(n){n=n.slice(0);for(var s=0,a=n.length;s<a;++s)n[s].apply(this,t)}return this};Nt.prototype.emitReserved=Nt.prototype.emit;Nt.prototype.listeners=function(e){return this._callbacks=this._callbacks||{},this._callbacks["$"+e]||[]};Nt.prototype.hasListeners=function(e){return!!this.listeners(e).length};const ap=typeof Promise=="function"&&typeof Promise.resolve=="function"?t=>Promise.resolve().then(t):(t,n)=>n(t,0),rn=typeof self<"u"?self:typeof window<"u"?window:Function("return this")(),k$="arraybuffer";function pC(e,...t){return t.reduce((n,s)=>(e.hasOwnProperty(s)&&(n[s]=e[s]),n),{})}const S$=rn.setTimeout,C$=rn.clearTimeout;function ip(e,t){t.useNativeTimers?(e.setTimeoutFn=S$.bind(rn),e.clearTimeoutFn=C$.bind(rn)):(e.setTimeoutFn=rn.setTimeout.bind(rn),e.clearTimeoutFn=rn.clearTimeout.bind(rn))}const A$=1.33;function P$(e){return typeof e=="string"?E$(e):Math.ceil((e.byteLength||e.size)*A$)}function E$(e){let t=0,n=0;for(let s=0,a=e.length;s<a;s++)t=e.charCodeAt(s),t<128?n+=1:t<2048?n+=2:t<55296||t>=57344?n+=3:(s++,n+=4);return n}function fC(){return Date.now().toString(36).substring(3)+Math.random().toString(36).substring(2,5)}function O$(e){let t="";for(let n in e)e.hasOwnProperty(n)&&(t.length&&(t+="&"),t+=encodeURIComponent(n)+"="+encodeURIComponent(e[n]));return t}function T$(e){let t={},n=e.split("&");for(let s=0,a=n.length;s<a;s++){let i=n[s].split("=");t[decodeURIComponent(i[0])]=decodeURIComponent(i[1])}return t}class M$ extends Error{constructor(t,n,s){super(t),this.description=n,this.context=s,this.type="TransportError"}}class l1 extends Nt{constructor(t){super(),this.writable=!1,ip(this,t),this.opts=t,this.query=t.query,this.socket=t.socket,this.supportsBinary=!t.forceBase64}onError(t,n,s){return super.emitReserved("error",new M$(t,n,s)),this}open(){return this.readyState="opening",this.doOpen(),this}close(){return(this.readyState==="opening"||this.readyState==="open")&&(this.doClose(),this.onClose()),this}send(t){this.readyState==="open"&&this.write(t)}onOpen(){this.readyState="open",this.writable=!0,super.emitReserved("open")}onData(t){const n=o1(t,this.socket.binaryType);this.onPacket(n)}onPacket(t){super.emitReserved("packet",t)}onClose(t){this.readyState="closed",super.emitReserved("close",t)}pause(t){}createUri(t,n={}){return t+"://"+this._hostname()+this._port()+this.opts.path+this._query(n)}_hostname(){const t=this.opts.hostname;return t.indexOf(":")===-1?t:"["+t+"]"}_port(){return this.opts.port&&(this.opts.secure&&Number(this.opts.port)!==443||!this.opts.secure&&Number(this.opts.port)!==80)?":"+this.opts.port:""}_query(t){const n=O$(t);return n.length?"?"+n:""}}class L$ extends l1{constructor(){super(...arguments),this._polling=!1}get name(){return"polling"}doOpen(){this._poll()}pause(t){this.readyState="pausing";const n=()=>{this.readyState="paused",t()};if(this._polling||!this.writable){let s=0;this._polling&&(s++,this.once("pollComplete",function(){--s||n()})),this.writable||(s++,this.once("drain",function(){--s||n()}))}else n()}_poll(){this._polling=!0,this.doPoll(),this.emitReserved("poll")}onData(t){const n=s=>{if(this.readyState==="opening"&&s.type==="open"&&this.onOpen(),s.type==="close")return this.onClose({description:"transport closed by the server"}),!1;this.onPacket(s)};j$(t,this.socket.binaryType).forEach(n),this.readyState!=="closed"&&(this._polling=!1,this.emitReserved("pollComplete"),this.readyState==="open"&&this._poll())}doClose(){const t=()=>{this.write([{type:"close"}])};this.readyState==="open"?t():this.once("open",t)}write(t){this.writable=!1,v$(t,n=>{this.doWrite(n,()=>{this.writable=!0,this.emitReserved("drain")})})}uri(){const t=this.opts.secure?"https":"http",n=this.query||{};return this.opts.timestampRequests!==!1&&(n[this.opts.timestampParam]=fC()),!this.supportsBinary&&!n.sid&&(n.b64=1),this.createUri(t,n)}}let xC=!1;try{xC=typeof XMLHttpRequest<"u"&&"withCredentials"in new XMLHttpRequest}catch{}const $$=xC;function R$(){}class I$ extends L${constructor(t){if(super(t),typeof location<"u"){const n=location.protocol==="https:";let s=location.port;s||(s=n?"443":"80"),this.xd=typeof location<"u"&&t.hostname!==location.hostname||s!==t.port}}doWrite(t,n){const s=this.request({method:"POST",data:t});s.on("success",n),s.on("error",(a,i)=>{this.onError("xhr post error",a,i)})}doPoll(){const t=this.request();t.on("data",this.onData.bind(this)),t.on("error",(n,s)=>{this.onError("xhr poll error",n,s)}),this.pollXhr=t}}class Vn extends Nt{constructor(t,n,s){super(),this.createRequest=t,ip(this,s),this._opts=s,this._method=s.method||"GET",this._uri=n,this._data=s.data!==void 0?s.data:null,this._create()}_create(){var t;const n=pC(this._opts,"agent","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","autoUnref");n.xdomain=!!this._opts.xd;const s=this._xhr=this.createRequest(n);try{s.open(this._method,this._uri,!0);try{if(this._opts.extraHeaders){s.setDisableHeaderCheck&&s.setDisableHeaderCheck(!0);for(let a in this._opts.extraHeaders)this._opts.extraHeaders.hasOwnProperty(a)&&s.setRequestHeader(a,this._opts.extraHeaders[a])}}catch{}if(this._method==="POST")try{s.setRequestHeader("Content-type","text/plain;charset=UTF-8")}catch{}try{s.setRequestHeader("Accept","*/*")}catch{}(t=this._opts.cookieJar)===null||t===void 0||t.addCookies(s),"withCredentials"in s&&(s.withCredentials=this._opts.withCredentials),this._opts.requestTimeout&&(s.timeout=this._opts.requestTimeout),s.onreadystatechange=()=>{var a;s.readyState===3&&((a=this._opts.cookieJar)===null||a===void 0||a.parseCookies(s.getResponseHeader("set-cookie"))),s.readyState===4&&(s.status===200||s.status===1223?this._onLoad():this.setTimeoutFn(()=>{this._onError(typeof s.status=="number"?s.status:0)},0))},s.send(this._data)}catch(a){this.setTimeoutFn(()=>{this._onError(a)},0);return}typeof document<"u"&&(this._index=Vn.requestsCount++,Vn.requests[this._index]=this)}_onError(t){this.emitReserved("error",t,this._xhr),this._cleanup(!0)}_cleanup(t){if(!(typeof this._xhr>"u"||this._xhr===null)){if(this._xhr.onreadystatechange=R$,t)try{this._xhr.abort()}catch{}typeof document<"u"&&delete Vn.requests[this._index],this._xhr=null}}_onLoad(){const t=this._xhr.responseText;t!==null&&(this.emitReserved("data",t),this.emitReserved("success"),this._cleanup())}abort(){this._cleanup()}}Vn.requestsCount=0;Vn.requests={};if(typeof document<"u"){if(typeof attachEvent=="function")attachEvent("onunload",Iw);else if(typeof addEventListener=="function"){const e="onpagehide"in rn?"pagehide":"unload";addEventListener(e,Iw,!1)}}function Iw(){for(let e in Vn.requests)Vn.requests.hasOwnProperty(e)&&Vn.requests[e].abort()}const D$=function(){const e=gC({xdomain:!1});return e&&e.responseType!==null}();class F$ extends I${constructor(t){super(t);const n=t&&t.forceBase64;this.supportsBinary=D$&&!n}request(t={}){return Object.assign(t,{xd:this.xd},this.opts),new Vn(gC,this.uri(),t)}}function gC(e){const t=e.xdomain;try{if(typeof XMLHttpRequest<"u"&&(!t||$$))return new XMLHttpRequest}catch{}if(!t)try{return new rn[["Active"].concat("Object").join("X")]("Microsoft.XMLHTTP")}catch{}}const yC=typeof navigator<"u"&&typeof navigator.product=="string"&&navigator.product.toLowerCase()==="reactnative";class B$ extends l1{get name(){return"websocket"}doOpen(){const t=this.uri(),n=this.opts.protocols,s=yC?{}:pC(this.opts,"agent","perMessageDeflate","pfx","key","passphrase","cert","ca","ciphers","rejectUnauthorized","localAddress","protocolVersion","origin","maxPayload","family","checkServerIdentity");this.opts.extraHeaders&&(s.headers=this.opts.extraHeaders);try{this.ws=this.createSocket(t,n,s)}catch(a){return this.emitReserved("error",a)}this.ws.binaryType=this.socket.binaryType,this.addEventListeners()}addEventListeners(){this.ws.onopen=()=>{this.opts.autoUnref&&this.ws._socket.unref(),this.onOpen()},this.ws.onclose=t=>this.onClose({description:"websocket connection closed",context:t}),this.ws.onmessage=t=>this.onData(t.data),this.ws.onerror=t=>this.onError("websocket error",t)}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],a=n===t.length-1;i1(s,this.supportsBinary,i=>{try{this.doWrite(s,i)}catch{}a&&ap(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){typeof this.ws<"u"&&(this.ws.onerror=()=>{},this.ws.close(),this.ws=null)}uri(){const t=this.opts.secure?"wss":"ws",n=this.query||{};return this.opts.timestampRequests&&(n[this.opts.timestampParam]=fC()),this.supportsBinary||(n.b64=1),this.createUri(t,n)}}const Yf=rn.WebSocket||rn.MozWebSocket;class z$ extends B${createSocket(t,n,s){return yC?new Yf(t,n,s):n?new Yf(t,n):new Yf(t)}doWrite(t,n){this.ws.send(n)}}class q$ extends l1{get name(){return"webtransport"}doOpen(){try{this._transport=new WebTransport(this.createUri("https"),this.opts.transportOptions[this.name])}catch(t){return this.emitReserved("error",t)}this._transport.closed.then(()=>{this.onClose()}).catch(t=>{this.onError("webtransport error",t)}),this._transport.ready.then(()=>{this._transport.createBidirectionalStream().then(t=>{const n=N$(Number.MAX_SAFE_INTEGER,this.socket.binaryType),s=t.readable.pipeThrough(n).getReader(),a=w$();a.readable.pipeTo(t.writable),this._writer=a.writable.getWriter();const i=()=>{s.read().then(({done:l,value:c})=>{l||(this.onPacket(c),i())}).catch(l=>{})};i();const o={type:"open"};this.query.sid&&(o.data=`{"sid":"${this.query.sid}"}`),this._writer.write(o).then(()=>this.onOpen())})})}write(t){this.writable=!1;for(let n=0;n<t.length;n++){const s=t[n],a=n===t.length-1;this._writer.write(s).then(()=>{a&&ap(()=>{this.writable=!0,this.emitReserved("drain")},this.setTimeoutFn)})}}doClose(){var t;(t=this._transport)===null||t===void 0||t.close()}}const U$={websocket:z$,webtransport:q$,polling:F$},W$=/^(?:(?![^:@\/?#]+:[^:@\/]*@)(http|https|ws|wss):\/\/)?((?:(([^:@\/?#]*)(?::([^:@\/?#]*))?)?@)?((?:[a-f0-9]{0,4}:){2,7}[a-f0-9]{0,4}|[^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/,V$=["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"];function Hg(e){if(e.length>8e3)throw"URI too long";const t=e,n=e.indexOf("["),s=e.indexOf("]");n!=-1&&s!=-1&&(e=e.substring(0,n)+e.substring(n,s).replace(/:/g,";")+e.substring(s,e.length));let a=W$.exec(e||""),i={},o=14;for(;o--;)i[V$[o]]=a[o]||"";return n!=-1&&s!=-1&&(i.source=t,i.host=i.host.substring(1,i.host.length-1).replace(/;/g,":"),i.authority=i.authority.replace("[","").replace("]","").replace(/;/g,":"),i.ipv6uri=!0),i.pathNames=H$(i,i.path),i.queryKey=K$(i,i.query),i}function H$(e,t){const n=/\/{2,9}/g,s=t.replace(n,"/").split("/");return(t.slice(0,1)=="/"||t.length===0)&&s.splice(0,1),t.slice(-1)=="/"&&s.splice(s.length-1,1),s}function K$(e,t){const n={};return t.replace(/(?:^|&)([^&=]*)=?([^&]*)/g,function(s,a,i){a&&(n[a]=i)}),n}const Kg=typeof addEventListener=="function"&&typeof removeEventListener=="function",zm=[];Kg&&addEventListener("offline",()=>{zm.forEach(e=>e())},!1);class ma extends Nt{constructor(t,n){if(super(),this.binaryType=k$,this.writeBuffer=[],this._prevBufferLen=0,this._pingInterval=-1,this._pingTimeout=-1,this._maxPayload=-1,this._pingTimeoutTime=1/0,t&&typeof t=="object"&&(n=t,t=null),t){const s=Hg(t);n.hostname=s.host,n.secure=s.protocol==="https"||s.protocol==="wss",n.port=s.port,s.query&&(n.query=s.query)}else n.host&&(n.hostname=Hg(n.host).host);ip(this,n),this.secure=n.secure!=null?n.secure:typeof location<"u"&&location.protocol==="https:",n.hostname&&!n.port&&(n.port=this.secure?"443":"80"),this.hostname=n.hostname||(typeof location<"u"?location.hostname:"localhost"),this.port=n.port||(typeof location<"u"&&location.port?location.port:this.secure?"443":"80"),this.transports=[],this._transportsByName={},n.transports.forEach(s=>{const a=s.prototype.name;this.transports.push(a),this._transportsByName[a]=s}),this.opts=Object.assign({path:"/engine.io",agent:!1,withCredentials:!1,upgrade:!0,timestampParam:"t",rememberUpgrade:!1,addTrailingSlash:!0,rejectUnauthorized:!0,perMessageDeflate:{threshold:1024},transportOptions:{},closeOnBeforeunload:!1},n),this.opts.path=this.opts.path.replace(/\/$/,"")+(this.opts.addTrailingSlash?"/":""),typeof this.opts.query=="string"&&(this.opts.query=T$(this.opts.query)),Kg&&(this.opts.closeOnBeforeunload&&(this._beforeunloadEventListener=()=>{this.transport&&(this.transport.removeAllListeners(),this.transport.close())},addEventListener("beforeunload",this._beforeunloadEventListener,!1)),this.hostname!=="localhost"&&(this._offlineEventListener=()=>{this._onClose("transport close",{description:"network connection lost"})},zm.push(this._offlineEventListener))),this.opts.withCredentials&&(this._cookieJar=void 0),this._open()}createTransport(t){const n=Object.assign({},this.opts.query);n.EIO=hC,n.transport=t,this.id&&(n.sid=this.id);const s=Object.assign({},this.opts,{query:n,socket:this,hostname:this.hostname,secure:this.secure,port:this.port},this.opts.transportOptions[t]);return new this._transportsByName[t](s)}_open(){if(this.transports.length===0){this.setTimeoutFn(()=>{this.emitReserved("error","No transports available")},0);return}const t=this.opts.rememberUpgrade&&ma.priorWebsocketSuccess&&this.transports.indexOf("websocket")!==-1?"websocket":this.transports[0];this.readyState="opening";const n=this.createTransport(t);n.open(),this.setTransport(n)}setTransport(t){this.transport&&this.transport.removeAllListeners(),this.transport=t,t.on("drain",this._onDrain.bind(this)).on("packet",this._onPacket.bind(this)).on("error",this._onError.bind(this)).on("close",n=>this._onClose("transport close",n))}onOpen(){this.readyState="open",ma.priorWebsocketSuccess=this.transport.name==="websocket",this.emitReserved("open"),this.flush()}_onPacket(t){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing")switch(this.emitReserved("packet",t),this.emitReserved("heartbeat"),t.type){case"open":this.onHandshake(JSON.parse(t.data));break;case"ping":this._sendPacket("pong"),this.emitReserved("ping"),this.emitReserved("pong"),this._resetPingTimeout();break;case"error":const n=new Error("server error");n.code=t.data,this._onError(n);break;case"message":this.emitReserved("data",t.data),this.emitReserved("message",t.data);break}}onHandshake(t){this.emitReserved("handshake",t),this.id=t.sid,this.transport.query.sid=t.sid,this._pingInterval=t.pingInterval,this._pingTimeout=t.pingTimeout,this._maxPayload=t.maxPayload,this.onOpen(),this.readyState!=="closed"&&this._resetPingTimeout()}_resetPingTimeout(){this.clearTimeoutFn(this._pingTimeoutTimer);const t=this._pingInterval+this._pingTimeout;this._pingTimeoutTime=Date.now()+t,this._pingTimeoutTimer=this.setTimeoutFn(()=>{this._onClose("ping timeout")},t),this.opts.autoUnref&&this._pingTimeoutTimer.unref()}_onDrain(){this.writeBuffer.splice(0,this._prevBufferLen),this._prevBufferLen=0,this.writeBuffer.length===0?this.emitReserved("drain"):this.flush()}flush(){if(this.readyState!=="closed"&&this.transport.writable&&!this.upgrading&&this.writeBuffer.length){const t=this._getWritablePackets();this.transport.send(t),this._prevBufferLen=t.length,this.emitReserved("flush")}}_getWritablePackets(){if(!(this._maxPayload&&this.transport.name==="polling"&&this.writeBuffer.length>1))return this.writeBuffer;let n=1;for(let s=0;s<this.writeBuffer.length;s++){const a=this.writeBuffer[s].data;if(a&&(n+=P$(a)),s>0&&n>this._maxPayload)return this.writeBuffer.slice(0,s);n+=2}return this.writeBuffer}_hasPingExpired(){if(!this._pingTimeoutTime)return!0;const t=Date.now()>this._pingTimeoutTime;return t&&(this._pingTimeoutTime=0,ap(()=>{this._onClose("ping timeout")},this.setTimeoutFn)),t}write(t,n,s){return this._sendPacket("message",t,n,s),this}send(t,n,s){return this._sendPacket("message",t,n,s),this}_sendPacket(t,n,s,a){if(typeof n=="function"&&(a=n,n=void 0),typeof s=="function"&&(a=s,s=null),this.readyState==="closing"||this.readyState==="closed")return;s=s||{},s.compress=s.compress!==!1;const i={type:t,data:n,options:s};this.emitReserved("packetCreate",i),this.writeBuffer.push(i),a&&this.once("flush",a),this.flush()}close(){const t=()=>{this._onClose("forced close"),this.transport.close()},n=()=>{this.off("upgrade",n),this.off("upgradeError",n),t()},s=()=>{this.once("upgrade",n),this.once("upgradeError",n)};return(this.readyState==="opening"||this.readyState==="open")&&(this.readyState="closing",this.writeBuffer.length?this.once("drain",()=>{this.upgrading?s():t()}):this.upgrading?s():t()),this}_onError(t){if(ma.priorWebsocketSuccess=!1,this.opts.tryAllTransports&&this.transports.length>1&&this.readyState==="opening")return this.transports.shift(),this._open();this.emitReserved("error",t),this._onClose("transport error",t)}_onClose(t,n){if(this.readyState==="opening"||this.readyState==="open"||this.readyState==="closing"){if(this.clearTimeoutFn(this._pingTimeoutTimer),this.transport.removeAllListeners("close"),this.transport.close(),this.transport.removeAllListeners(),Kg&&(this._beforeunloadEventListener&&removeEventListener("beforeunload",this._beforeunloadEventListener,!1),this._offlineEventListener)){const s=zm.indexOf(this._offlineEventListener);s!==-1&&zm.splice(s,1)}this.readyState="closed",this.id=null,this.emitReserved("close",t,n),this.writeBuffer=[],this._prevBufferLen=0}}}ma.protocol=hC;class G$ extends ma{constructor(){super(...arguments),this._upgrades=[]}onOpen(){if(super.onOpen(),this.readyState==="open"&&this.opts.upgrade)for(let t=0;t<this._upgrades.length;t++)this._probe(this._upgrades[t])}_probe(t){let n=this.createTransport(t),s=!1;ma.priorWebsocketSuccess=!1;const a=()=>{s||(n.send([{type:"ping",data:"probe"}]),n.once("packet",u=>{if(!s)if(u.type==="pong"&&u.data==="probe"){if(this.upgrading=!0,this.emitReserved("upgrading",n),!n)return;ma.priorWebsocketSuccess=n.name==="websocket",this.transport.pause(()=>{s||this.readyState!=="closed"&&(m(),this.setTransport(n),n.send([{type:"upgrade"}]),this.emitReserved("upgrade",n),n=null,this.upgrading=!1,this.flush())})}else{const h=new Error("probe error");h.transport=n.name,this.emitReserved("upgradeError",h)}}))};function i(){s||(s=!0,m(),n.close(),n=null)}const o=u=>{const h=new Error("probe error: "+u);h.transport=n.name,i(),this.emitReserved("upgradeError",h)};function l(){o("transport closed")}function c(){o("socket closed")}function d(u){n&&u.name!==n.name&&i()}const m=()=>{n.removeListener("open",a),n.removeListener("error",o),n.removeListener("close",l),this.off("close",c),this.off("upgrading",d)};n.once("open",a),n.once("error",o),n.once("close",l),this.once("close",c),this.once("upgrading",d),this._upgrades.indexOf("webtransport")!==-1&&t!=="webtransport"?this.setTimeoutFn(()=>{s||n.open()},200):n.open()}onHandshake(t){this._upgrades=this._filterUpgrades(t.upgrades),super.onHandshake(t)}_filterUpgrades(t){const n=[];for(let s=0;s<t.length;s++)~this.transports.indexOf(t[s])&&n.push(t[s]);return n}}let Q$=class extends G${constructor(t,n={}){const s=typeof t=="object"?t:n;(!s.transports||s.transports&&typeof s.transports[0]=="string")&&(s.transports=(s.transports||["polling","websocket","webtransport"]).map(a=>U$[a]).filter(a=>!!a)),super(t,s)}};function Y$(e,t="",n){let s=e;n=n||typeof location<"u"&&location,e==null&&(e=n.protocol+"//"+n.host),typeof e=="string"&&(e.charAt(0)==="/"&&(e.charAt(1)==="/"?e=n.protocol+e:e=n.host+e),/^(https?|wss?):\/\//.test(e)||(typeof n<"u"?e=n.protocol+"//"+e:e="https://"+e),s=Hg(e)),s.port||(/^(http|ws)$/.test(s.protocol)?s.port="80":/^(http|ws)s$/.test(s.protocol)&&(s.port="443")),s.path=s.path||"/";const i=s.host.indexOf(":")!==-1?"["+s.host+"]":s.host;return s.id=s.protocol+"://"+i+":"+s.port+t,s.href=s.protocol+"://"+i+(n&&n.port===s.port?"":":"+s.port),s}const X$=typeof ArrayBuffer=="function",J$=e=>typeof ArrayBuffer.isView=="function"?ArrayBuffer.isView(e):e.buffer instanceof ArrayBuffer,bC=Object.prototype.toString,Z$=typeof Blob=="function"||typeof Blob<"u"&&bC.call(Blob)==="[object BlobConstructor]",eR=typeof File=="function"||typeof File<"u"&&bC.call(File)==="[object FileConstructor]";function c1(e){return X$&&(e instanceof ArrayBuffer||J$(e))||Z$&&e instanceof Blob||eR&&e instanceof File}function qm(e,t){if(!e||typeof e!="object")return!1;if(Array.isArray(e)){for(let n=0,s=e.length;n<s;n++)if(qm(e[n]))return!0;return!1}if(c1(e))return!0;if(e.toJSON&&typeof e.toJSON=="function"&&arguments.length===1)return qm(e.toJSON(),!0);for(const n in e)if(Object.prototype.hasOwnProperty.call(e,n)&&qm(e[n]))return!0;return!1}function tR(e){const t=[],n=e.data,s=e;return s.data=Gg(n,t),s.attachments=t.length,{packet:s,buffers:t}}function Gg(e,t){if(!e)return e;if(c1(e)){const n={_placeholder:!0,num:t.length};return t.push(e),n}else if(Array.isArray(e)){const n=new Array(e.length);for(let s=0;s<e.length;s++)n[s]=Gg(e[s],t);return n}else if(typeof e=="object"&&!(e instanceof Date)){const n={};for(const s in e)Object.prototype.hasOwnProperty.call(e,s)&&(n[s]=Gg(e[s],t));return n}return e}function rR(e,t){return e.data=Qg(e.data,t),delete e.attachments,e}function Qg(e,t){if(!e)return e;if(e&&e._placeholder===!0){if(typeof e.num=="number"&&e.num>=0&&e.num<t.length)return t[e.num];throw new Error("illegal attachments")}else if(Array.isArray(e))for(let n=0;n<e.length;n++)e[n]=Qg(e[n],t);else if(typeof e=="object")for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&(e[n]=Qg(e[n],t));return e}const vC=["connect","connect_error","disconnect","disconnecting","newListener","removeListener"],nR=5;var Ie;(function(e){e[e.CONNECT=0]="CONNECT",e[e.DISCONNECT=1]="DISCONNECT",e[e.EVENT=2]="EVENT",e[e.ACK=3]="ACK",e[e.CONNECT_ERROR=4]="CONNECT_ERROR",e[e.BINARY_EVENT=5]="BINARY_EVENT",e[e.BINARY_ACK=6]="BINARY_ACK"})(Ie||(Ie={}));class sR{constructor(t){this.replacer=t}encode(t){return(t.type===Ie.EVENT||t.type===Ie.ACK)&&qm(t)?this.encodeAsBinary({type:t.type===Ie.EVENT?Ie.BINARY_EVENT:Ie.BINARY_ACK,nsp:t.nsp,data:t.data,id:t.id}):[this.encodeAsString(t)]}encodeAsString(t){let n=""+t.type;return(t.type===Ie.BINARY_EVENT||t.type===Ie.BINARY_ACK)&&(n+=t.attachments+"-"),t.nsp&&t.nsp!=="/"&&(n+=t.nsp+","),t.id!=null&&(n+=t.id),t.data!=null&&(n+=JSON.stringify(t.data,this.replacer)),n}encodeAsBinary(t){const n=tR(t),s=this.encodeAsString(n.packet),a=n.buffers;return a.unshift(s),a}}class d1 extends Nt{constructor(t){super(),this.reviver=t}add(t){let n;if(typeof t=="string"){if(this.reconstructor)throw new Error("got plaintext data when reconstructing a packet");n=this.decodeString(t);const s=n.type===Ie.BINARY_EVENT;s||n.type===Ie.BINARY_ACK?(n.type=s?Ie.EVENT:Ie.ACK,this.reconstructor=new aR(n),n.attachments===0&&super.emitReserved("decoded",n)):super.emitReserved("decoded",n)}else if(c1(t)||t.base64)if(this.reconstructor)n=this.reconstructor.takeBinaryData(t),n&&(this.reconstructor=null,super.emitReserved("decoded",n));else throw new Error("got binary data when not reconstructing a packet");else throw new Error("Unknown type: "+t)}decodeString(t){let n=0;const s={type:Number(t.charAt(0))};if(Ie[s.type]===void 0)throw new Error("unknown packet type "+s.type);if(s.type===Ie.BINARY_EVENT||s.type===Ie.BINARY_ACK){const i=n+1;for(;t.charAt(++n)!=="-"&&n!=t.length;);const o=t.substring(i,n);if(o!=Number(o)||t.charAt(n)!=="-")throw new Error("Illegal attachments");s.attachments=Number(o)}if(t.charAt(n+1)==="/"){const i=n+1;for(;++n&&!(t.charAt(n)===","||n===t.length););s.nsp=t.substring(i,n)}else s.nsp="/";const a=t.charAt(n+1);if(a!==""&&Number(a)==a){const i=n+1;for(;++n;){const o=t.charAt(n);if(o==null||Number(o)!=o){--n;break}if(n===t.length)break}s.id=Number(t.substring(i,n+1))}if(t.charAt(++n)){const i=this.tryParse(t.substr(n));if(d1.isPayloadValid(s.type,i))s.data=i;else throw new Error("invalid payload")}return s}tryParse(t){try{return JSON.parse(t,this.reviver)}catch{return!1}}static isPayloadValid(t,n){switch(t){case Ie.CONNECT:return _h(n);case Ie.DISCONNECT:return n===void 0;case Ie.CONNECT_ERROR:return typeof n=="string"||_h(n);case Ie.EVENT:case Ie.BINARY_EVENT:return Array.isArray(n)&&(typeof n[0]=="number"||typeof n[0]=="string"&&vC.indexOf(n[0])===-1);case Ie.ACK:case Ie.BINARY_ACK:return Array.isArray(n)}}destroy(){this.reconstructor&&(this.reconstructor.finishedReconstruction(),this.reconstructor=null)}}class aR{constructor(t){this.packet=t,this.buffers=[],this.reconPack=t}takeBinaryData(t){if(this.buffers.push(t),this.buffers.length===this.reconPack.attachments){const n=rR(this.reconPack,this.buffers);return this.finishedReconstruction(),n}return null}finishedReconstruction(){this.reconPack=null,this.buffers=[]}}function iR(e){return typeof e=="string"}const oR=Number.isInteger||function(e){return typeof e=="number"&&isFinite(e)&&Math.floor(e)===e};function lR(e){return e===void 0||oR(e)}function _h(e){return Object.prototype.toString.call(e)==="[object Object]"}function cR(e,t){switch(e){case Ie.CONNECT:return t===void 0||_h(t);case Ie.DISCONNECT:return t===void 0;case Ie.EVENT:return Array.isArray(t)&&(typeof t[0]=="number"||typeof t[0]=="string"&&vC.indexOf(t[0])===-1);case Ie.ACK:return Array.isArray(t);case Ie.CONNECT_ERROR:return typeof t=="string"||_h(t);default:return!1}}function dR(e){return iR(e.nsp)&&lR(e.id)&&cR(e.type,e.data)}const uR=Object.freeze(Object.defineProperty({__proto__:null,Decoder:d1,Encoder:sR,get PacketType(){return Ie},isPacketValid:dR,protocol:nR},Symbol.toStringTag,{value:"Module"}));function wn(e,t,n){return e.on(t,n),function(){e.off(t,n)}}const mR=Object.freeze({connect:1,connect_error:1,disconnect:1,disconnecting:1,newListener:1,removeListener:1});class jC extends Nt{constructor(t,n,s){super(),this.connected=!1,this.recovered=!1,this.receiveBuffer=[],this.sendBuffer=[],this._queue=[],this._queueSeq=0,this.ids=0,this.acks={},this.flags={},this.io=t,this.nsp=n,s&&s.auth&&(this.auth=s.auth),this._opts=Object.assign({},s),this.io._autoConnect&&this.open()}get disconnected(){return!this.connected}subEvents(){if(this.subs)return;const t=this.io;this.subs=[wn(t,"open",this.onopen.bind(this)),wn(t,"packet",this.onpacket.bind(this)),wn(t,"error",this.onerror.bind(this)),wn(t,"close",this.onclose.bind(this))]}get active(){return!!this.subs}connect(){return this.connected?this:(this.subEvents(),this.io._reconnecting||this.io.open(),this.io._readyState==="open"&&this.onopen(),this)}open(){return this.connect()}send(...t){return t.unshift("message"),this.emit.apply(this,t),this}emit(t,...n){var s,a,i;if(mR.hasOwnProperty(t))throw new Error('"'+t.toString()+'" is a reserved event name');if(n.unshift(t),this._opts.retries&&!this.flags.fromQueue&&!this.flags.volatile)return this._addToQueue(n),this;const o={type:Ie.EVENT,data:n};if(o.options={},o.options.compress=this.flags.compress!==!1,typeof n[n.length-1]=="function"){const m=this.ids++,u=n.pop();this._registerAckCallback(m,u),o.id=m}const l=(a=(s=this.io.engine)===null||s===void 0?void 0:s.transport)===null||a===void 0?void 0:a.writable,c=this.connected&&!(!((i=this.io.engine)===null||i===void 0)&&i._hasPingExpired());return this.flags.volatile&&!l||(c?(this.notifyOutgoingListeners(o),this.packet(o)):this.sendBuffer.push(o)),this.flags={},this}_registerAckCallback(t,n){var s;const a=(s=this.flags.timeout)!==null&&s!==void 0?s:this._opts.ackTimeout;if(a===void 0){this.acks[t]=n;return}const i=this.io.setTimeoutFn(()=>{delete this.acks[t];for(let l=0;l<this.sendBuffer.length;l++)this.sendBuffer[l].id===t&&this.sendBuffer.splice(l,1);n.call(this,new Error("operation has timed out"))},a),o=(...l)=>{this.io.clearTimeoutFn(i),n.apply(this,l)};o.withError=!0,this.acks[t]=o}emitWithAck(t,...n){return new Promise((s,a)=>{const i=(o,l)=>o?a(o):s(l);i.withError=!0,n.push(i),this.emit(t,...n)})}_addToQueue(t){let n;typeof t[t.length-1]=="function"&&(n=t.pop());const s={id:this._queueSeq++,tryCount:0,pending:!1,args:t,flags:Object.assign({fromQueue:!0},this.flags)};t.push((a,...i)=>(this._queue[0],a!==null?s.tryCount>this._opts.retries&&(this._queue.shift(),n&&n(a)):(this._queue.shift(),n&&n(null,...i)),s.pending=!1,this._drainQueue())),this._queue.push(s),this._drainQueue()}_drainQueue(t=!1){if(!this.connected||this._queue.length===0)return;const n=this._queue[0];n.pending&&!t||(n.pending=!0,n.tryCount++,this.flags=n.flags,this.emit.apply(this,n.args))}packet(t){t.nsp=this.nsp,this.io._packet(t)}onopen(){typeof this.auth=="function"?this.auth(t=>{this._sendConnectPacket(t)}):this._sendConnectPacket(this.auth)}_sendConnectPacket(t){this.packet({type:Ie.CONNECT,data:this._pid?Object.assign({pid:this._pid,offset:this._lastOffset},t):t})}onerror(t){this.connected||this.emitReserved("connect_error",t)}onclose(t,n){this.connected=!1,delete this.id,this.emitReserved("disconnect",t,n),this._clearAcks()}_clearAcks(){Object.keys(this.acks).forEach(t=>{if(!this.sendBuffer.some(s=>String(s.id)===t)){const s=this.acks[t];delete this.acks[t],s.withError&&s.call(this,new Error("socket has been disconnected"))}})}onpacket(t){if(t.nsp===this.nsp)switch(t.type){case Ie.CONNECT:t.data&&t.data.sid?this.onconnect(t.data.sid,t.data.pid):this.emitReserved("connect_error",new Error("It seems you are trying to reach a Socket.IO server in v2.x with a v3.x client, but they are not compatible (more information here: https://socket.io/docs/v3/migrating-from-2-x-to-3-0/)"));break;case Ie.EVENT:case Ie.BINARY_EVENT:this.onevent(t);break;case Ie.ACK:case Ie.BINARY_ACK:this.onack(t);break;case Ie.DISCONNECT:this.ondisconnect();break;case Ie.CONNECT_ERROR:this.destroy();const s=new Error(t.data.message);s.data=t.data.data,this.emitReserved("connect_error",s);break}}onevent(t){const n=t.data||[];t.id!=null&&n.push(this.ack(t.id)),this.connected?this.emitEvent(n):this.receiveBuffer.push(Object.freeze(n))}emitEvent(t){if(this._anyListeners&&this._anyListeners.length){const n=this._anyListeners.slice();for(const s of n)s.apply(this,t)}super.emit.apply(this,t),this._pid&&t.length&&typeof t[t.length-1]=="string"&&(this._lastOffset=t[t.length-1])}ack(t){const n=this;let s=!1;return function(...a){s||(s=!0,n.packet({type:Ie.ACK,id:t,data:a}))}}onack(t){const n=this.acks[t.id];typeof n=="function"&&(delete this.acks[t.id],n.withError&&t.data.unshift(null),n.apply(this,t.data))}onconnect(t,n){this.id=t,this.recovered=n&&this._pid===n,this._pid=n,this.connected=!0,this.emitBuffered(),this._drainQueue(!0),this.emitReserved("connect")}emitBuffered(){this.receiveBuffer.forEach(t=>this.emitEvent(t)),this.receiveBuffer=[],this.sendBuffer.forEach(t=>{this.notifyOutgoingListeners(t),this.packet(t)}),this.sendBuffer=[]}ondisconnect(){this.destroy(),this.onclose("io server disconnect")}destroy(){this.subs&&(this.subs.forEach(t=>t()),this.subs=void 0),this.io._destroy(this)}disconnect(){return this.connected&&this.packet({type:Ie.DISCONNECT}),this.destroy(),this.connected&&this.onclose("io client disconnect"),this}close(){return this.disconnect()}compress(t){return this.flags.compress=t,this}get volatile(){return this.flags.volatile=!0,this}timeout(t){return this.flags.timeout=t,this}onAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.push(t),this}prependAny(t){return this._anyListeners=this._anyListeners||[],this._anyListeners.unshift(t),this}offAny(t){if(!this._anyListeners)return this;if(t){const n=this._anyListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyListeners=[];return this}listenersAny(){return this._anyListeners||[]}onAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.push(t),this}prependAnyOutgoing(t){return this._anyOutgoingListeners=this._anyOutgoingListeners||[],this._anyOutgoingListeners.unshift(t),this}offAnyOutgoing(t){if(!this._anyOutgoingListeners)return this;if(t){const n=this._anyOutgoingListeners;for(let s=0;s<n.length;s++)if(t===n[s])return n.splice(s,1),this}else this._anyOutgoingListeners=[];return this}listenersAnyOutgoing(){return this._anyOutgoingListeners||[]}notifyOutgoingListeners(t){if(this._anyOutgoingListeners&&this._anyOutgoingListeners.length){const n=this._anyOutgoingListeners.slice();for(const s of n)s.apply(this,t.data)}}}function Pl(e){e=e||{},this.ms=e.min||100,this.max=e.max||1e4,this.factor=e.factor||2,this.jitter=e.jitter>0&&e.jitter<=1?e.jitter:0,this.attempts=0}Pl.prototype.duration=function(){var e=this.ms*Math.pow(this.factor,this.attempts++);if(this.jitter){var t=Math.random(),n=Math.floor(t*this.jitter*e);e=Math.floor(t*10)&1?e+n:e-n}return Math.min(e,this.max)|0};Pl.prototype.reset=function(){this.attempts=0};Pl.prototype.setMin=function(e){this.ms=e};Pl.prototype.setMax=function(e){this.max=e};Pl.prototype.setJitter=function(e){this.jitter=e};class Yg extends Nt{constructor(t,n){var s;super(),this.nsps={},this.subs=[],t&&typeof t=="object"&&(n=t,t=void 0),n=n||{},n.path=n.path||"/socket.io",this.opts=n,ip(this,n),this.reconnection(n.reconnection!==!1),this.reconnectionAttempts(n.reconnectionAttempts||1/0),this.reconnectionDelay(n.reconnectionDelay||1e3),this.reconnectionDelayMax(n.reconnectionDelayMax||5e3),this.randomizationFactor((s=n.randomizationFactor)!==null&&s!==void 0?s:.5),this.backoff=new Pl({min:this.reconnectionDelay(),max:this.reconnectionDelayMax(),jitter:this.randomizationFactor()}),this.timeout(n.timeout==null?2e4:n.timeout),this._readyState="closed",this.uri=t;const a=n.parser||uR;this.encoder=new a.Encoder,this.decoder=new a.Decoder,this._autoConnect=n.autoConnect!==!1,this._autoConnect&&this.open()}reconnection(t){return arguments.length?(this._reconnection=!!t,t||(this.skipReconnect=!0),this):this._reconnection}reconnectionAttempts(t){return t===void 0?this._reconnectionAttempts:(this._reconnectionAttempts=t,this)}reconnectionDelay(t){var n;return t===void 0?this._reconnectionDelay:(this._reconnectionDelay=t,(n=this.backoff)===null||n===void 0||n.setMin(t),this)}randomizationFactor(t){var n;return t===void 0?this._randomizationFactor:(this._randomizationFactor=t,(n=this.backoff)===null||n===void 0||n.setJitter(t),this)}reconnectionDelayMax(t){var n;return t===void 0?this._reconnectionDelayMax:(this._reconnectionDelayMax=t,(n=this.backoff)===null||n===void 0||n.setMax(t),this)}timeout(t){return arguments.length?(this._timeout=t,this):this._timeout}maybeReconnectOnOpen(){!this._reconnecting&&this._reconnection&&this.backoff.attempts===0&&this.reconnect()}open(t){if(~this._readyState.indexOf("open"))return this;this.engine=new Q$(this.uri,this.opts);const n=this.engine,s=this;this._readyState="opening",this.skipReconnect=!1;const a=wn(n,"open",function(){s.onopen(),t&&t()}),i=l=>{this.cleanup(),this._readyState="closed",this.emitReserved("error",l),t?t(l):this.maybeReconnectOnOpen()},o=wn(n,"error",i);if(this._timeout!==!1){const l=this._timeout,c=this.setTimeoutFn(()=>{a(),i(new Error("timeout")),n.close()},l);this.opts.autoUnref&&c.unref(),this.subs.push(()=>{this.clearTimeoutFn(c)})}return this.subs.push(a),this.subs.push(o),this}connect(t){return this.open(t)}onopen(){this.cleanup(),this._readyState="open",this.emitReserved("open");const t=this.engine;this.subs.push(wn(t,"ping",this.onping.bind(this)),wn(t,"data",this.ondata.bind(this)),wn(t,"error",this.onerror.bind(this)),wn(t,"close",this.onclose.bind(this)),wn(this.decoder,"decoded",this.ondecoded.bind(this)))}onping(){this.emitReserved("ping")}ondata(t){try{this.decoder.add(t)}catch(n){this.onclose("parse error",n)}}ondecoded(t){ap(()=>{this.emitReserved("packet",t)},this.setTimeoutFn)}onerror(t){this.emitReserved("error",t)}socket(t,n){let s=this.nsps[t];return s?this._autoConnect&&!s.active&&s.connect():(s=new jC(this,t,n),this.nsps[t]=s),s}_destroy(t){const n=Object.keys(this.nsps);for(const s of n)if(this.nsps[s].active)return;this._close()}_packet(t){const n=this.encoder.encode(t);for(let s=0;s<n.length;s++)this.engine.write(n[s],t.options)}cleanup(){this.subs.forEach(t=>t()),this.subs.length=0,this.decoder.destroy()}_close(){this.skipReconnect=!0,this._reconnecting=!1,this.onclose("forced close")}disconnect(){return this._close()}onclose(t,n){var s;this.cleanup(),(s=this.engine)===null||s===void 0||s.close(),this.backoff.reset(),this._readyState="closed",this.emitReserved("close",t,n),this._reconnection&&!this.skipReconnect&&this.reconnect()}reconnect(){if(this._reconnecting||this.skipReconnect)return this;const t=this;if(this.backoff.attempts>=this._reconnectionAttempts)this.backoff.reset(),this.emitReserved("reconnect_failed"),this._reconnecting=!1;else{const n=this.backoff.duration();this._reconnecting=!0;const s=this.setTimeoutFn(()=>{t.skipReconnect||(this.emitReserved("reconnect_attempt",t.backoff.attempts),!t.skipReconnect&&t.open(a=>{a?(t._reconnecting=!1,t.reconnect(),this.emitReserved("reconnect_error",a)):t.onreconnect()}))},n);this.opts.autoUnref&&s.unref(),this.subs.push(()=>{this.clearTimeoutFn(s)})}}onreconnect(){const t=this.backoff.attempts;this._reconnecting=!1,this.backoff.reset(),this.emitReserved("reconnect",t)}}const tc={};function Um(e,t){typeof e=="object"&&(t=e,e=void 0),t=t||{};const n=Y$(e,t.path||"/socket.io"),s=n.source,a=n.id,i=n.path,o=tc[a]&&i in tc[a].nsps,l=t.forceNew||t["force new connection"]||t.multiplex===!1||o;let c;return l?c=new Yg(s,t):(tc[a]||(tc[a]=new Yg(s,t)),c=tc[a]),n.query&&!t.query&&(t.query=n.queryKey),c.socket(n.path,t)}Object.assign(Um,{Manager:Yg,Socket:jC,io:Um,connect:Um});const Oa=typeof import.meta<"u"?"https://123project-build-a-production-ready-w.launchpulse.ai":"http://localhost:3000",ae=IM()(BM((e,t)=>({authentication_state:{current_user:null,user_profile:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!0},error_message:null},notification_state:{notifications:[],unread_count:0,is_loading:!1,last_fetched_at:null},ui_state:{mobile_nav_open:!1,is_global_loading:!1,active_modal:{type:null,props:null,is_open:!1},toast_queue:[],window_width:typeof window<"u"?window.innerWidth:1440,is_mobile:typeof window<"u"?window.innerWidth<768:!1,scroll_position:0},realtime_state:{is_connected:!1,connection_status:"disconnected",socket_instance:null,reconnect_attempts:0,last_event_at:null},feature_flags:{feature_b2b_enabled:!1,feature_inventory_enabled:!1,feature_analytics_enabled:!1,is_loading:!1,last_fetched_at:null},quote_wizard_state:{current_step:1,selected_service_id:null,project_details:{},uploaded_files:[],selected_tier_id:null,is_complete:!1,estimated_price:null},search_filter_state:{search_query:"",selected_category:null,status_filter:null,date_range:{start:null,end:null},sort_by:"created_at",sort_order:"desc"},cart_state:{items_count:0,is_loading:!1,last_updated_at:null},login_user:async(n,s,a)=>{var i,o;e(l=>({authentication_state:{...l.authentication_state,authentication_status:{...l.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const l=await te.post(`${Oa}/api/auth/login`,{email:n,password:s,role:a},{headers:{"Content-Type":"application/json"}}),{user:c,token:d,profile:m}=l.data;e(u=>({authentication_state:{current_user:c,user_profile:m,auth_token:d,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),t().connect_websocket(),c.role==="ADMIN"&&await t().fetch_feature_flags()}catch(l){const c=((o=(i=l.response)==null?void 0:i.data)==null?void 0:o.message)||l.message||"Login failed";throw e(d=>({authentication_state:{current_user:null,user_profile:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:c}})),new Error(c)}},register_user:async n=>{var s,a;e(i=>({authentication_state:{...i.authentication_state,authentication_status:{...i.authentication_state.authentication_status,is_loading:!0},error_message:null}}));try{const i=await te.post(`${Oa}/api/auth/register`,n,{headers:{"Content-Type":"application/json"}}),{user:o,token:l,customer_profile:c}=i.data;e(d=>({authentication_state:{current_user:o,user_profile:c,auth_token:l,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),t().connect_websocket()}catch(i){const o=((a=(s=i.response)==null?void 0:s.data)==null?void 0:a.message)||i.message||"Registration failed";throw e(l=>({authentication_state:{...l.authentication_state,authentication_status:{...l.authentication_state.authentication_status,is_loading:!1},error_message:o}})),new Error(o)}},logout_user:()=>{t().disconnect_websocket(),e({authentication_state:{current_user:null,user_profile:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null},notification_state:{notifications:[],unread_count:0,is_loading:!1,last_fetched_at:null},quote_wizard_state:{current_step:1,selected_service_id:null,project_details:{},uploaded_files:[],selected_tier_id:null,is_complete:!1,estimated_price:null}})},check_auth_status:async()=>{const{auth_token:n}=t().authentication_state;if(!n){e(s=>({authentication_state:{...s.authentication_state,authentication_status:{...s.authentication_state.authentication_status,is_loading:!1}}}));return}try{const s=await te.get(`${Oa}/api/auth/me`,{headers:{Authorization:`Bearer ${n}`}}),{user:a,profile:i}=s.data;e(o=>({authentication_state:{current_user:a,user_profile:i,auth_token:n,authentication_status:{is_authenticated:!0,is_loading:!1},error_message:null}})),t().connect_websocket(),a.role==="ADMIN"&&await t().fetch_feature_flags()}catch{e(a=>({authentication_state:{current_user:null,user_profile:null,auth_token:null,authentication_status:{is_authenticated:!1,is_loading:!1},error_message:null}}))}},update_user_profile:n=>{e(s=>({authentication_state:{...s.authentication_state,user_profile:s.authentication_state.user_profile?{...s.authentication_state.user_profile,...n}:null}}))},clear_auth_error:()=>{e(n=>({authentication_state:{...n.authentication_state,error_message:null}}))},fetch_notifications:async()=>{const{auth_token:n,current_user:s}=t().authentication_state;if(!(!n||!s)){e(a=>({notification_state:{...a.notification_state,is_loading:!0}}));try{e(a=>({notification_state:{...a.notification_state,is_loading:!1,last_fetched_at:new Date().toISOString()}}))}catch(a){console.error("Fetch notifications error:",a),e(i=>({notification_state:{...i.notification_state,is_loading:!1}}))}}},mark_notification_read:n=>{e(s=>({notification_state:{...s.notification_state,notifications:s.notification_state.notifications.map(a=>a.id===n?{...a,is_read:!0}:a),unread_count:Math.max(0,s.notification_state.unread_count-1)}}))},clear_all_notifications:()=>{e(n=>({notification_state:{...n.notification_state,notifications:n.notification_state.notifications.map(s=>({...s,is_read:!0})),unread_count:0}}))},add_realtime_notification:n=>{e(s=>({notification_state:{...s.notification_state,notifications:[n,...s.notification_state.notifications],unread_count:s.notification_state.unread_count+1}})),(n.priority==="HIGH"||n.priority==="URGENT")&&t().show_toast({type:"info",message:n.message,duration:5e3})},toggle_mobile_nav:()=>{if(e(n=>({ui_state:{...n.ui_state,mobile_nav_open:!n.ui_state.mobile_nav_open}})),typeof document<"u"){const{mobile_nav_open:n}=t().ui_state;document.body.style.overflow=n?"hidden":""}},set_global_loading:n=>{e(s=>({ui_state:{...s.ui_state,is_global_loading:n}}))},show_modal:(n,s)=>{e(a=>({ui_state:{...a.ui_state,active_modal:{type:n,props:s||null,is_open:!0}}})),typeof document<"u"&&(document.body.style.overflow="hidden")},close_modal:()=>{e(n=>({ui_state:{...n.ui_state,active_modal:{type:null,props:null,is_open:!1}}})),typeof document<"u"&&(document.body.style.overflow="")},show_toast:n=>{const s={id:`toast_${Date.now()}_${Math.random()}`,created_at:Date.now(),...n};e(a=>({ui_state:{...a.ui_state,toast_queue:[...a.ui_state.toast_queue,s].slice(-5)}})),setTimeout(()=>{t().dismiss_toast(s.id)},n.duration||5e3)},dismiss_toast:n=>{e(s=>({ui_state:{...s.ui_state,toast_queue:s.ui_state.toast_queue.filter(a=>a.id!==n)}}))},update_window_dimensions:()=>{if(typeof window>"u")return;const n=window.innerWidth,s=n<768;e(a=>({ui_state:{...a.ui_state,window_width:n,is_mobile:s}}))},update_scroll_position:n=>{e(s=>({ui_state:{...s.ui_state,scroll_position:n}}))},connect_websocket:()=>{const{auth_token:n,current_user:s}=t().authentication_state,{socket_instance:a,is_connected:i}=t().realtime_state;if(!(i&&a)&&!(!n||!s))try{e(l=>({realtime_state:{...l.realtime_state,connection_status:"connecting"}}));const o=Um(Oa,{auth:{token:n},transports:["websocket","polling"]});o.on("connect",()=>{console.log("WebSocket connected"),e(l=>({realtime_state:{...l.realtime_state,is_connected:!0,connection_status:"connected",socket_instance:o,reconnect_attempts:0,last_event_at:new Date().toISOString()}}))}),o.on("disconnect",()=>{console.log("WebSocket disconnected"),e(l=>({realtime_state:{...l.realtime_state,is_connected:!1,connection_status:"disconnected"}}))}),o.on("connect_error",l=>{console.error("WebSocket connection error:",l),e(c=>({realtime_state:{...c.realtime_state,connection_status:"error",reconnect_attempts:c.realtime_state.reconnect_attempts+1}}))}),o.on("notification/new",l=>{t().add_realtime_notification(l)}),o.on("order/status_updated",l=>{t().show_toast({type:"info",message:`Order status updated to ${l.new_status}`,duration:5e3}),e(c=>({realtime_state:{...c.realtime_state,last_event_at:new Date().toISOString()}}))}),o.on("message/received",l=>{t().show_toast({type:"info",message:`New message from ${l.sender_name}`,duration:5e3}),e(c=>({notification_state:{...c.notification_state,unread_count:c.notification_state.unread_count+1},realtime_state:{...c.realtime_state,last_event_at:new Date().toISOString()}}))}),o.on("proof/uploaded",l=>{t().show_toast({type:"info",message:`Proof version ${l.version_number} uploaded`,duration:5e3}),e(c=>({notification_state:{...c.notification_state,unread_count:c.notification_state.unread_count+1},realtime_state:{...c.realtime_state,last_event_at:new Date().toISOString()}}))})}catch(o){console.error("WebSocket setup error:",o),e(l=>({realtime_state:{...l.realtime_state,connection_status:"error"}}))}},disconnect_websocket:()=>{const{socket_instance:n}=t().realtime_state;n&&(n.disconnect(),e(s=>({realtime_state:{is_connected:!1,connection_status:"disconnected",socket_instance:null,reconnect_attempts:0,last_event_at:null}})))},subscribe_to_event:(n,s)=>{const{socket_instance:a}=t().realtime_state;a&&a.on(n,s)},emit_event:(n,s)=>{const{socket_instance:a}=t().realtime_state;a&&a.emit(n,s)},fetch_feature_flags:async()=>{var s,a,i;const{auth_token:n}=t().authentication_state;if(n){e(o=>({feature_flags:{...o.feature_flags,is_loading:!0}}));try{const l=(await te.get(`${Oa}/api/admin/settings`,{headers:{Authorization:`Bearer ${n}`}})).data,c=((s=l.find(u=>u.key==="feature_b2b_enabled"))==null?void 0:s.value)==="true",d=((a=l.find(u=>u.key==="feature_inventory_enabled"))==null?void 0:a.value)==="true",m=((i=l.find(u=>u.key==="feature_analytics_enabled"))==null?void 0:i.value)==="true";e({feature_flags:{feature_b2b_enabled:c,feature_inventory_enabled:d,feature_analytics_enabled:m,is_loading:!1,last_fetched_at:new Date().toISOString()}})}catch(o){console.error("Fetch feature flags error:",o),e(l=>({feature_flags:{...l.feature_flags,is_loading:!1}}))}}},toggle_feature_flag:async(n,s)=>{const{auth_token:a}=t().authentication_state;if(a)try{await te.patch(`${Oa}/api/admin/settings/${n}`,{value:s.toString()},{headers:{Authorization:`Bearer ${a}`}}),e(i=>({feature_flags:{...i.feature_flags,[n]:s}}))}catch(i){throw console.error("Toggle feature flag error:",i),i}},update_wizard_step:n=>{e(s=>({quote_wizard_state:{...s.quote_wizard_state,current_step:n}}))},update_wizard_data:n=>{e(s=>({quote_wizard_state:{...s.quote_wizard_state,...n}}))},clear_wizard_data:()=>{e({quote_wizard_state:{current_step:1,selected_service_id:null,project_details:{},uploaded_files:[],selected_tier_id:null,is_complete:!1,estimated_price:null}})},update_search_query:n=>{e(s=>({search_filter_state:{...s.search_filter_state,search_query:n}}))},update_category_filter:n=>{e(s=>({search_filter_state:{...s.search_filter_state,selected_category:n}}))},update_status_filter:n=>{e(s=>({search_filter_state:{...s.search_filter_state,status_filter:n}}))},update_date_range:n=>{e(s=>({search_filter_state:{...s.search_filter_state,date_range:n}}))},update_sort_config:(n,s)=>{e(a=>({search_filter_state:{...a.search_filter_state,sort_by:n,sort_order:s}}))},clear_all_filters:()=>{e({search_filter_state:{search_query:"",selected_category:null,status_filter:null,date_range:{start:null,end:null},sort_by:"created_at",sort_order:"desc"}})},fetch_cart_count:async()=>{var a;const{auth_token:n}=t().authentication_state,s=typeof localStorage<"u"?localStorage.getItem("guest_cart_id"):null;if(!n&&!s){e(i=>({cart_state:{...i.cart_state,items_count:0,is_loading:!1}}));return}e(i=>({cart_state:{...i.cart_state,is_loading:!0}}));try{const i={};s&&(i["x-guest-id"]=s),n&&(i.Authorization=`Bearer ${n}`);const l=((a=(await te.get(`${Oa}/api/cart`,{headers:i})).data)==null?void 0:a.items)||[];e(c=>({cart_state:{items_count:l.length,is_loading:!1,last_updated_at:new Date().toISOString()}}))}catch(i){console.error("Fetch cart count error:",i),e(o=>({cart_state:{...o.cart_state,is_loading:!1}}))}},update_cart_count:n=>{e(s=>({cart_state:{...s.cart_state,items_count:n,last_updated_at:new Date().toISOString()}}))},increment_cart_count:()=>{e(n=>({cart_state:{...n.cart_state,items_count:n.cart_state.items_count+1,last_updated_at:new Date().toISOString()}}))}}),{name:"sultanstamp-app-storage",partialize:e=>({authentication_state:{current_user:e.authentication_state.current_user,user_profile:e.authentication_state.user_profile,auth_token:e.authentication_state.auth_token,authentication_status:{is_authenticated:e.authentication_state.authentication_status.is_authenticated,is_loading:!1},error_message:null},feature_flags:e.feature_flags,quote_wizard_state:e.quote_wizard_state,search_filter_state:e.search_filter_state})}));typeof window<"u"&&(window.addEventListener("resize",()=>{ae.getState().update_window_dimensions()}),window.addEventListener("scroll",()=>{ae.getState().update_scroll_position(window.scrollY)}));let hR=class extends k.Component{constructor(t){super(t),this.state={hasError:!1,error:null}}static getDerivedStateFromError(t){return{hasError:!0,error:t}}componentDidCatch(t,n){console.error("Error caught by ErrorBoundary:",t,n)}render(){return this.state.hasError?this.props.fallback?this.props.fallback:r.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center p-6",children:r.jsxs("div",{className:"max-w-md text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"We couldn't load this page"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Something went wrong. Please refresh the page or try again later."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-6 rounded-lg transition-colors",children:"Refresh Page"})]})}):this.props.children}};const Vo="data:image/jpeg;base64,/9j/4AAQSkZJRgABAQAAAQABAAD/2wBDAAMCAgMCAgMDAwMEAwMEBQgFBQQEBQoHBwYIDAoMDAsKCwsNDhIQDQ4RDgsLEBYQERMUFRUVDA8XGBYUGBIUFRT/2wBDAQMEBAUEBQkFBQkUDQsNFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBQUFBT/wgARCABkAGQDASIAAhEBAxEB/8QAHQABAAEFAQEBAAAAAAAAAAAAAAgCBAYHCQMFAf/EABQBAQAAAAAAAAAAAAAAAAAAAAD/2gAMAwEAAhADEAAAAZUliXwHxPtwVJP7L5p9Fz6oCzuioCDs4uexNjMeZs5zAoZ31iN7aJHVSw0loU8Z6cs+phcAc9+hHPgwrKcApHt4zDIuY/0O5+FxmWuqinqbyy6nHsBz46Dx5IYpTXBiU07W6GgN/jlWmdi5FnqfFaVhUBq7aMGDf6H4mAh+JgIfiYCH4mBufmx0kPQA02bkYBfGYtSWZudqD3NsNR/pttpTNjNQPjh+UBf/AKFHkF1SC8AD/8QAKBAAAQMDBAICAQUAAAAAAAAABAMFBgACEAEHFhcSFTM2IBEUITA0/9oACAEBAAEFAvxeXcdibYNM0peB+Y5yBSudzJnyNyjUgIjLu1OY7y34LLRAGtu0vtxJpEZGdx4vKQ5U31uvM/WCY2umfoXCjjkGwSdTxeWEjf58bk/d2F+Ljjg7TRNpiRxqzkZnayZ+6A3Flhr48UP8GNyfu7OHa4Oc1lN0odqRRvIVe2IyPHU2uK7QfNikHdwpD4Mblfd9Ltbc7WQX16U3iCUtaixVQSa8tf0pH4cbl/d8bXwX3RGNz4L7sbKXxYk2090ifOjbqH2P0tXFFSCHzJNoR3l16Nuro26rdPG3DtuQysrh27Ha7djtdux2u3Y7Xbsdrt2O127Ha7djtdux2tNfLTE+jjsbL+JPlcSfK4k+VxJ8riT5XEnyuJPlcSfK4k+Un/Cf94Rp4qljmooGzXKu0bQc72eLJPxRkbUfi3JRK9dQNycb2mN3yItxCLeHW9KPpuNi2BmYAMkZmACJFYm0Ff8AZD+N4Y6iioAq+ojWGAhoKjpfoGPaooGgrrj/xAAUEQEAAAAAAAAAAAAAAAAAAABQ/9oACAEDAQE/AUf/xAAUEQEAAAAAAAAAAAAAAAAAAABQ/9oACAECAQE/AUf/xAA/EAABAwEDBQwIBQUBAAAAAAABAgMEAAUREhATIVHRIiMxMjM1QWFxcpOUFCAkQkOBkbIVUqGx4gYwQFNiwf/aAAgBAQAGPwL1X5spWFpoX9ZPQBS1FKWZjRucZB6Ogj+w+206lbjCsDiRwpPD6nokZd9nxjubviK/NspmdH04dC0dC09IpiZFXjZdTiB/8yuSJDiWWWxiUtXAKChwHTltGXDXccaQtB4qxhGg0JMZVyxodZPGbOQ2REX7U+nflD3Eau0/tl/D5S7oElWgn4a9fYcjkmU6llhsXqWqs03iZs1s7hrpV/0qmu6Mtqd9P2CkTIbmBwcKTxVjUaZtd5rNvSGkqajKOkqI4KelSFlx91WJSj6n4bLXfNjJ3Kj8RG0U/DdBjxYrhQli/pGjEevI33RltTvJ+wVGYcVm2lL3xZ91HvH6X1jRvcJne47WpOv55ENNJLjizhSlPCTRiTms27cFawR1ZGZkZebfZViSaateMMKJrYU4j8jo0KT+x+eRvujLaneT9ia0G7Ki2JzftLg3htXw0/m7TRb0ImNbph3UdR6jTkd9BaebVhUhXQcl1+jVkR3RltTvJ+xOUWpOb9haVvaFfFVsGU2nCb9vZTu0J+KnaPUR2ZZVofiYYzxBzeYxXXADhxdVc8jy38qbL1rZxoHdJSxcSO3FTbDCA0y2nClCeAD1HJkSYICXdK2s1iGLpI0iueR5b+Vc8jy38qA1ZXoUlx0PtG5QS3eK5V/wTXKv+Ca5V/wTXKv+Ca5V/wAE1yr/AIJrlX/BNcq/4JrlX/BNA5bSej2ZMfZUoYXG2FKB3I6a5nn+WXsrmef5ZeyuZ5/ll7K5nn+WXsrmef5ZeyuZ5/ll7K5nn+WXsrmef5ZeyuZ5/ll7KT2f4DZlvyHXZSXA240624w4rCVDCOEaBtr+m1JfxKlLTnLvfGZUT+t1RS5JcQ84gEvNkBfDTtoyZzr7zl7aPSVgJC8ZSnoF3XSBEnNPWjGmNRVPp0odvWACepQP76qtJqM6IUhqOyksvKAzTpcWFC/WRdceyrSjKlWhFlREB/dutrNxSq7dAcG5Og1FSbUKJk/CESZaxvWi9R6NAH6kVYkyzihx11a0vRwrcuYUHEkHtToNWu65nIpCIxYjouxtpW4Rpv0Yjd8qk+lekJj3JzaZa21uYtOLidHF/XKuQxCYZfXxnENgKPzpciPCjsvr4zjbYCjWfjWfFjvf7GmUpV9aaGYbuaVjQMA3J1j6mitTDalnDeopF+5N6fpTpcjtLLyQhzEgHGNR10piNFZYZXxkNoAB7abWGUY204EKw6UjUPoKzgYbC8WPFhF+K66/tu0UsrZbWV4cRKeG7SPpl//EACcQAQABAwMEAQUBAQAAAAAAAAERIUFRABAxIGFx8IEwkbHB0aFA/9oACAEBAAE/Iemu0UH9SWmqrxaAT5wlPI9voSZAtwgCdx3WCWhrm04lTjfC3ZLfSASdTC+X2iDqEp10ZWEZHxu/8q8BpjZCG8ThyG8vY1QZVPwXJhv9zannXOr+n+jfhWUuj0OygPw2dp5g8oH97af1Uz1fyYLf7r1WOgjwWjWXJ3NVf+EyY8Dlcd6aWGq/L0Z6panQe/A9oc6PAfeTKy4WDi669ZjoujVGkQFX4SvjSQkdkHhmE/YtsHGoUqYANRYMkMldXueR2eUB+i5EomHR+JseKfvVwu3oMdGyYkkQxjemtNNVLuxxg80588j5PY4baX3Yyocm1zVzhO3tMdSaqxTKh/m9lpnes9QSp/m1kpjo/wA38bmUs08FCfhtrDlVz9BJHmNB9kZAuDo/WpC4KcZnfXW+8A3GnpTIg8+H6RBBBBBBBBBicJO7lB6BfQEP0qFChQoUKFCgULRB/wAALRfkeEjFiPEp1VzNMX7bwVNSI/lDCRLRxqKyv5KIQOFWBbacDwRTGrGscNFdIODaNCYkE1hlxXUEiAQgIiUo1CCzpH2kEkeCIDBcF9DIiwsm2MnxWdUBa9scXBXUlFlVSdj8cqaKaBVk3SJuq+c0F9TwEquc1C+maCI1g5oJ0GE2UQ8zgbhl0oY0mTyHcqYWmlE4MYzEpQS0c6lshVXowCvzofFQhLiUsWDBquQcdYlnlyYpoKpAtZ6uZKmN/wD/2gAMAwEAAgADAAAAEOPMGPOPLEHLOLPOJPGOOPOMLPOIPKDDDDCPNONOOPPIIAAAPPP/xAAUEQEAAAAAAAAAAAAAAAAAAABQ/9oACAEDAQE/EEf/xAAUEQEAAAAAAAAAAAAAAAAAAABQ/9oACAECAQE/EEf/xAAmEAEBAAICAgEEAQUAAAAAAAABESExAEEQUWEgMHHw8YGRocHR/9oACAEBAAE/EPpt9NAqwB24B7cwF468KJEUORKeug19YHnZZ2FkgR0mnDPAMgBVdHEqcKtb6aM/6hEMUM0B/XgIxwDHASaYugPTA6UeZgDEn2v+AMqgCvIoHWSiU82uxJb0LY9O1EROYv2DUGvsiiQHSBzbJmDWZmgp7Ke7zqEifMpcQdMlgpx7jJY3XtTAFVQBUOJGoVAsEWL+ULCqoQP1nyZwVe2ziCNErPyIIiCSxYIHuSKTiCDQjhgKe5dWGgNAYAAwfRAkfNyqH0ex2my/3flsJho+wlXwBC/efJnKWPz7wOehjwy2c+CFaEi9BZC+Hui9JgmVVAPnjvJrxdC4FomgdeCFhbJTCHaOgod8N+Y6Xi94B+BLPBg/pHkTiyTYZnKtj8Pn1bAs9DpmHb7ZwUAEvKmQZxA+kAcGM8VDkT/phMmPFTiI1hEWe4H9vAh/pHkTz58jjT+0dg+AbAeBDwXoJt/oNA+QOSHiRjh8mD+8eSvWGrBewy03Ofz/AJelB81FQGlMktjyRclAoB+D8vf0KcGTNqqIcVhyQxA/n/P8/wCc8bLJYTyb7yOCwYcP2jDDDDDDDDNAeF9JfJgRxkIWwETDsftfPnz58+fPnwSEGiRGH31AVYHbwBCaP1O8GEoIgoUs7SHIGjjEQ1ZwdmmoKVCUp6LrfGOMu4h5wsroguKhxOwzbSyrEuCuT9ttTcAj6I50f341V8gMggVW9v8Aj9KFpchZOZobYo2JsTGtz8o45+hhB9qxvgEWHkFY8dI0AYEvidCFcFoDllzly15AKyii2Ryy5y5a8fsTFGtHD3nPBSVODEcjlIPdl4r7GqpVFVz7jC8U2kSenJVOgVNvFM4mZFACzDljGuHE2D0Vq+SA/Ec0jXtPwlhFujKY4DOQWuLTCo7KkXz/AP/Z",pR=({className:e="w-6 h-6"})=>r.jsx("svg",{className:e,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),fR=()=>{var w,j;const e=ae(_=>_.authentication_state.current_user),t=ae(_=>_.authentication_state.authentication_status.is_authenticated),n=ae(_=>_.ui_state.is_mobile),s=ae(_=>_.logout_user);ae(_=>_.toggle_mobile_nav);const a=ae(_=>_.cart_state.items_count),i=ae(_=>_.fetch_cart_count),[o,l]=k.useState(!1),[c,d]=k.useState(!1),[m,u]=k.useState(!1),h=Cs(),f=Le(),b=[{label:"About Us",path:"/about"},{label:"Portfolio",path:"/gallery"},{label:"Services",path:"/services"},{label:"Products",path:"/products"},{label:"Pricing",path:"/pricing"},{label:"Contact",path:"/contact"}],g=_=>!!(_==="/"&&h.pathname==="/"||_!=="/"&&h.pathname.startsWith(_)),x=()=>{f("/quote/start")},p=_=>{f(`/login?role=${_}`),l(!1)},y=()=>{s(),d(!1),f("/")},v=_=>{switch(_){case"CUSTOMER":return"/app";case"STAFF":return"/staff";case"ADMIN":return"/admin";default:return"/"}},N=()=>{u(_=>!_),m?document.body.style.overflow="":document.body.style.overflow="hidden"};return k.useEffect(()=>{i()},[i]),k.useEffect(()=>{const _=S=>{const T=S.target;o&&!T.closest(".login-dropdown-container")&&l(!1),c&&!T.closest(".user-menu-container")&&d(!1)};return document.addEventListener("mousedown",_),()=>document.removeEventListener("mousedown",_)},[o,c]),k.useEffect(()=>{const _=S=>{S.key==="Escape"&&m&&(u(!1),document.body.style.overflow="")};return document.addEventListener("keydown",_),()=>document.removeEventListener("keydown",_)},[m]),k.useEffect(()=>()=>{document.body.style.overflow=""},[]),r.jsxs(r.Fragment,{children:[r.jsx("header",{className:"bg-white border-b-2 border-black fixed top-0 left-0 right-0 z-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex items-center justify-between h-20 md:h-20",children:[r.jsx("button",{onClick:N,className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Toggle navigation menu","aria-expanded":m,"aria-controls":"mobile-navigation-drawer",children:m?r.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}):r.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})})}),r.jsx(ie,{to:"/",className:"flex items-center",children:r.jsx("img",{src:Vo,alt:"SultanStamp",className:"h-10 md:h-12 w-auto"})}),!n&&r.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:b.map(_=>r.jsx(ie,{to:_.path,className:`px-4 py-2 text-base font-medium text-black hover:text-gray-700 transition-colors relative ${g(_.path)?"border-b-3 border-yellow-500":""}`,children:_.label},_.path))}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs(ie,{to:"/cart",className:"relative p-2 text-gray-700 hover:text-black transition-colors","aria-label":"View cart",children:[r.jsx(pR,{className:"w-6 h-6"}),a>0&&r.jsx("span",{className:"absolute -top-1 -right-1 bg-yellow-400 text-black text-xs font-bold rounded-full w-5 h-5 flex items-center justify-center",children:a>99?"99+":a})]}),r.jsx("button",{onClick:x,className:"bg-yellow-400 hover:bg-yellow-500 text-black font-semibold px-4 py-2 md:px-6 md:py-3 rounded-lg transition-all duration-200 text-sm md:text-base",children:"Get a Quote"}),t?r.jsxs("div",{className:"relative user-menu-container",children:[r.jsxs("button",{onClick:()=>d(!c),className:"hidden md:flex items-center space-x-2 px-4 py-2 text-black hover:text-gray-700 font-medium transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-8 h-8 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm",children:((w=e==null?void 0:e.name)==null?void 0:w.charAt(0).toUpperCase())||"U"}),r.jsx("span",{className:"text-sm",children:(e==null?void 0:e.name)||"User"})]}),r.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${c?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),c&&e&&r.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:[r.jsxs("div",{className:"px-4 py-3 border-b border-gray-200",children:[r.jsx("p",{className:"text-sm font-semibold text-black",children:e.name}),r.jsx("p",{className:"text-xs text-gray-600",children:e.email}),r.jsx("p",{className:"text-xs text-gray-500 mt-1 capitalize",children:e.role.toLowerCase()})]}),r.jsxs("div",{className:"py-1",children:[r.jsx(ie,{to:v(e.role),onClick:()=>d(!1),className:"block px-4 py-3 text-sm text-black hover:bg-gray-100 transition-colors font-medium",children:"Dashboard"}),e.role==="CUSTOMER"&&r.jsx(ie,{to:"/app/settings",onClick:()=>d(!1),className:"block px-4 py-3 text-sm text-black hover:bg-gray-100 transition-colors font-medium",children:"Account Settings"}),r.jsx("button",{onClick:y,className:"w-full text-left px-4 py-3 text-sm text-red-600 hover:bg-red-50 transition-colors font-medium",children:"Logout"})]})]})]}):r.jsxs("div",{className:"relative login-dropdown-container",children:[r.jsxs("button",{onClick:()=>l(!o),className:"hidden md:flex items-center space-x-2 px-4 py-2 text-black hover:text-gray-700 font-medium transition-colors",children:[r.jsx("span",{children:"Log In"}),r.jsx("svg",{className:`w-4 h-4 transition-transform duration-200 ${o?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),o&&r.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-white border border-gray-200 rounded-lg shadow-lg overflow-hidden",children:r.jsxs("div",{className:"py-1",children:[r.jsx("button",{onClick:()=>p("CUSTOMER"),className:"w-full text-left px-4 py-3 text-sm text-black hover:bg-gray-100 transition-colors font-medium",children:"Customer Login"}),r.jsx("button",{onClick:()=>p("STAFF"),className:"w-full text-left px-4 py-3 text-sm text-black hover:bg-gray-100 transition-colors font-medium",children:"Staff Login"}),r.jsx("button",{onClick:()=>p("ADMIN"),className:"w-full text-left px-4 py-3 text-sm text-black hover:bg-gray-100 transition-colors font-medium",children:"Admin Login"})]})})]})]})]})})}),r.jsx("div",{className:"h-20"}),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`fixed inset-0 bg-black transition-opacity duration-300 z-40 md:hidden ${m?"bg-opacity-60 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:N,"aria-hidden":"true"}),r.jsxs("div",{id:"mobile-navigation-drawer",className:`fixed inset-y-0 left-0 w-4/5 max-w-sm bg-white z-50 transform transition-transform duration-300 ease-out md:hidden shadow-2xl overflow-y-auto ${m?"translate-x-0":"-translate-x-full"}`,role:"dialog","aria-modal":"true","aria-label":"Mobile navigation menu",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b-2 border-black sticky top-0 bg-white z-10",children:[r.jsx("img",{src:Vo,alt:"SultanStamp",className:"h-8 w-auto"}),r.jsx("button",{onClick:N,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Close menu",children:r.jsx("svg",{className:"w-6 h-6 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("nav",{className:"flex flex-col p-4 space-y-2",children:[b.map(_=>r.jsx(ie,{to:_.path,className:`flex items-center px-4 py-3 rounded-lg text-base font-medium transition-colors min-h-[44px] ${g(_.path)?"bg-yellow-400 text-black":"text-gray-700 hover:bg-gray-100"}`,onClick:N,children:_.label},_.path)),r.jsx("div",{className:"border-t border-gray-200 my-4"}),r.jsx("button",{onClick:()=>{N(),x()},className:"flex items-center justify-center bg-yellow-400 hover:bg-yellow-500 text-black px-4 py-3 rounded-lg text-base font-semibold transition-colors min-h-[44px]",children:"Get a Quote"}),t?r.jsxs("div",{className:"space-y-2 mt-4",children:[r.jsx(ie,{to:v((e==null?void 0:e.role)||"CUSTOMER"),onClick:N,className:"flex items-center px-4 py-3 rounded-lg text-base text-gray-700 hover:bg-gray-100 transition-colors font-medium min-h-[44px]",children:"Dashboard"}),(e==null?void 0:e.role)==="CUSTOMER"&&r.jsx(ie,{to:"/app/settings",onClick:N,className:"flex items-center px-4 py-3 rounded-lg text-base text-gray-700 hover:bg-gray-100 transition-colors font-medium min-h-[44px]",children:"Account Settings"}),r.jsx("button",{onClick:()=>{N(),y()},className:"w-full text-left px-4 py-3 rounded-lg text-base text-red-600 hover:bg-red-50 transition-colors font-medium min-h-[44px]",children:"Logout"})]}):r.jsxs("div",{className:"space-y-2 mt-4",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-500 px-4",children:"Login"}),r.jsx("button",{onClick:()=>{N(),p("CUSTOMER")},className:"w-full text-left px-4 py-3 text-base text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-medium min-h-[44px]",children:"Customer Login"}),r.jsx("button",{onClick:()=>{N(),p("STAFF")},className:"w-full text-left px-4 py-3 text-base text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-medium min-h-[44px]",children:"Staff Login"}),r.jsx("button",{onClick:()=>{N(),p("ADMIN")},className:"w-full text-left px-4 py-3 text-base text-gray-700 hover:bg-gray-100 rounded-lg transition-colors font-medium min-h-[44px]",children:"Admin Login"})]})]}),t&&e&&r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"w-10 h-10 bg-yellow-400 rounded-full flex items-center justify-center text-black font-bold text-sm flex-shrink-0",children:((j=e.name)==null?void 0:j.charAt(0).toUpperCase())||"U"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-black truncate",children:e.name}),r.jsx("p",{className:"text-xs text-gray-600 truncate",children:e.email})]})]})})]})]})]})};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xR=e=>e.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),wC=(...e)=>e.filter((t,n,s)=>!!t&&s.indexOf(t)===n).join(" ");/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */var gR={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const yR=k.forwardRef(({color:e="currentColor",size:t=24,strokeWidth:n=2,absoluteStrokeWidth:s,className:a="",children:i,iconNode:o,...l},c)=>k.createElement("svg",{ref:c,...gR,width:t,height:t,stroke:e,strokeWidth:s?Number(n)*24/Number(t):n,className:wC("lucide",a),...l},[...o.map(([d,m])=>k.createElement(d,m)),...Array.isArray(i)?i:[i]]));/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Se=(e,t)=>{const n=k.forwardRef(({className:s,...a},i)=>k.createElement(yR,{ref:i,iconNode:t,className:wC(`lucide-${xR(e)}`,s),...a}));return n.displayName=`${e}`,n};/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wm=Se("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zs=Se("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const bR=Se("Award",[["path",{d:"m15.477 12.89 1.515 8.526a.5.5 0 0 1-.81.47l-3.58-2.687a1 1 0 0 0-1.197 0l-3.586 2.686a.5.5 0 0 1-.81-.469l1.514-8.526",key:"1yiouv"}],["circle",{cx:"12",cy:"8",r:"6",key:"1vp47v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dw=Se("Bell",[["path",{d:"M6 8a6 6 0 0 1 12 0c0 7 3 9 3 9H3s3-2 3-9",key:"1qo2s2"}],["path",{d:"M10.3 21a1.94 1.94 0 0 0 3.4 0",key:"qgo35s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Wa=Se("Briefcase",[["path",{d:"M16 20V4a2 2 0 0 0-2-2h-4a2 2 0 0 0-2 2v16",key:"jecpp"}],["rect",{width:"20",height:"14",x:"2",y:"6",rx:"2",key:"i6l2r4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const vR=Se("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const jR=Se("Building",[["rect",{width:"16",height:"20",x:"4",y:"2",rx:"2",ry:"2",key:"76otgf"}],["path",{d:"M9 22v-4h6v4",key:"r93iot"}],["path",{d:"M8 6h.01",key:"1dz90k"}],["path",{d:"M16 6h.01",key:"1x0f13"}],["path",{d:"M12 6h.01",key:"1vi96p"}],["path",{d:"M12 10h.01",key:"1nrarc"}],["path",{d:"M12 14h.01",key:"1etili"}],["path",{d:"M16 10h.01",key:"1m94wz"}],["path",{d:"M16 14h.01",key:"1gbofw"}],["path",{d:"M8 10h.01",key:"19clt8"}],["path",{d:"M8 14h.01",key:"6423bh"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ji=Se("Calendar",[["path",{d:"M8 2v4",key:"1cmpym"}],["path",{d:"M16 2v4",key:"4m81vk"}],["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",key:"1hopcy"}],["path",{d:"M3 10h18",key:"8toen8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wR=Se("ChartColumn",[["path",{d:"M3 3v16a2 2 0 0 0 2 2h16",key:"c24i48"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Dc=Se("Check",[["path",{d:"M20 6 9 17l-5-5",key:"1gmf2c"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NR=Se("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _R=Se("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kR=Se("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SR=Se("ChevronUp",[["path",{d:"m18 15-6-6-6 6",key:"153udz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ho=Se("CircleAlert",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const NC=Se("CircleCheckBig",[["path",{d:"M21.801 10A10 10 0 1 1 17 3.335",key:"yps3ct"}],["path",{d:"m9 11 3 3L22 4",key:"1pflzl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Qt=Se("CircleCheck",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m9 12 2 2 4-4",key:"dzmm74"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const rc=Se("CircleX",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vm=Se("ClipboardList",[["rect",{width:"8",height:"4",x:"8",y:"2",rx:"1",ry:"1",key:"tgr4d6"}],["path",{d:"M16 4h2a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2H6a2 2 0 0 1-2-2V6a2 2 0 0 1 2-2h2",key:"116196"}],["path",{d:"M12 11h4",key:"1jrz19"}],["path",{d:"M12 16h4",key:"n85exb"}],["path",{d:"M8 11h.01",key:"1dfujw"}],["path",{d:"M8 16h.01",key:"18s6g9"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const hs=Se("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ko=Se("DollarSign",[["line",{x1:"12",x2:"12",y1:"2",y2:"22",key:"7eqyqh"}],["path",{d:"M17 5H9.5a3.5 3.5 0 0 0 0 7h5a3.5 3.5 0 0 1 0 7H6",key:"1b0p4s"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CR=Se("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const _C=Se("EyeOff",[["path",{d:"M10.733 5.076a10.744 10.744 0 0 1 11.205 6.575 1 1 0 0 1 0 .696 10.747 10.747 0 0 1-1.444 2.49",key:"ct8e1f"}],["path",{d:"M14.084 14.158a3 3 0 0 1-4.242-4.242",key:"151rxh"}],["path",{d:"M17.479 17.499a10.75 10.75 0 0 1-15.417-5.151 1 1 0 0 1 0-.696 10.75 10.75 0 0 1 4.446-5.143",key:"13bj9a"}],["path",{d:"m2 2 20 20",key:"1ooewy"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const kC=Se("Eye",[["path",{d:"M2.062 12.348a1 1 0 0 1 0-.696 10.75 10.75 0 0 1 19.876 0 1 1 0 0 1 0 .696 10.75 10.75 0 0 1-19.876 0",key:"1nclc0"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Rr=Se("FileText",[["path",{d:"M15 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7Z",key:"1rqfz7"}],["path",{d:"M14 2v4a2 2 0 0 0 2 2h4",key:"tnqrlb"}],["path",{d:"M10 9H8",key:"b1mrlr"}],["path",{d:"M16 13H8",key:"t4e002"}],["path",{d:"M16 17H8",key:"z1uh3a"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AR=Se("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fw=Se("Globe",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 2a14.5 14.5 0 0 0 0 20 14.5 14.5 0 0 0 0-20",key:"13o1zl"}],["path",{d:"M2 12h20",key:"9i4pu4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const PR=Se("GripVertical",[["circle",{cx:"9",cy:"12",r:"1",key:"1vctgf"}],["circle",{cx:"9",cy:"5",r:"1",key:"hp0tcf"}],["circle",{cx:"9",cy:"19",r:"1",key:"fkjjf6"}],["circle",{cx:"15",cy:"12",r:"1",key:"1tmaij"}],["circle",{cx:"15",cy:"5",r:"1",key:"19l28e"}],["circle",{cx:"15",cy:"19",r:"1",key:"f4zoj3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ER=Se("Heart",[["path",{d:"M19 14c1.49-1.46 3-3.21 3-5.5A5.5 5.5 0 0 0 16.5 3c-1.76 0-3 .5-4.5 2-1.5-1.5-2.74-2-4.5-2A5.5 5.5 0 0 0 2 8.5c0 2.3 1.5 4.05 3 5.5l7 7Z",key:"c3ymky"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xf=Se("House",[["path",{d:"M15 21v-8a1 1 0 0 0-1-1h-4a1 1 0 0 0-1 1v8",key:"5wwlr5"}],["path",{d:"M3 10a2 2 0 0 1 .709-1.528l7-5.999a2 2 0 0 1 2.582 0l7 5.999A2 2 0 0 1 21 10v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2z",key:"1d0kgt"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Bw=Se("Layers",[["path",{d:"m12.83 2.18a2 2 0 0 0-1.66 0L2.6 6.08a1 1 0 0 0 0 1.83l8.58 3.91a2 2 0 0 0 1.66 0l8.58-3.9a1 1 0 0 0 0-1.83Z",key:"8b97xw"}],["path",{d:"m22 17.65-9.17 4.16a2 2 0 0 1-1.66 0L2 17.65",key:"dd6zsq"}],["path",{d:"m22 12.65-9.17 4.16a2 2 0 0 1-1.66 0L2 12.65",key:"ep9fru"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Jf=Se("LoaderCircle",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const OR=Se("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const SC=Se("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const zw=Se("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const op=Se("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const TR=Se("Menu",[["line",{x1:"4",x2:"20",y1:"12",y2:"12",key:"1e0a9i"}],["line",{x1:"4",x2:"20",y1:"6",y2:"6",key:"1owob3"}],["line",{x1:"4",x2:"20",y1:"18",y2:"18",key:"yk5zj1"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Zf=Se("MessageSquare",[["path",{d:"M21 15a2 2 0 0 1-2 2H7l-4 4V5a2 2 0 0 1 2-2h14a2 2 0 0 1 2 2z",key:"1lielz"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const wi=Se("Package",[["path",{d:"m7.5 4.27 9 5.15",key:"1c824w"}],["path",{d:"M21 8a2 2 0 0 0-1-1.73l-7-4a2 2 0 0 0-2 0l-7 4A2 2 0 0 0 3 8v8a2 2 0 0 0 1 1.73l7 4a2 2 0 0 0 2 0l7-4A2 2 0 0 0 21 16Z",key:"hh9hay"}],["path",{d:"m3.3 7 8.7 5 8.7-5",key:"g66t2b"}],["path",{d:"M12 22V12",key:"d0xqtd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const md=Se("Pen",[["path",{d:"M21.174 6.812a1 1 0 0 0-3.986-3.987L3.842 16.174a2 2 0 0 0-.5.83l-1.321 4.352a.5.5 0 0 0 .623.622l4.353-1.32a2 2 0 0 0 .83-.497z",key:"1a8usu"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const u1=Se("Phone",[["path",{d:"M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z",key:"foiqr5"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const no=Se("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const CC=Se("Save",[["path",{d:"M15.2 3a2 2 0 0 1 1.4.6l3.8 3.8a2 2 0 0 1 .6 1.4V19a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2z",key:"1c8476"}],["path",{d:"M17 21v-7a1 1 0 0 0-1-1H8a1 1 0 0 0-1 1v7",key:"1ydtos"}],["path",{d:"M7 3v4a1 1 0 0 0 1 1h7",key:"t51u73"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const AC=Se("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const MR=Se("Send",[["path",{d:"M14.536 21.686a.5.5 0 0 0 .937-.024l6.5-19a.496.496 0 0 0-.635-.635l-19 6.5a.5.5 0 0 0-.024.937l7.93 3.18a2 2 0 0 1 1.112 1.11z",key:"1ffxy3"}],["path",{d:"m21.854 2.147-10.94 10.939",key:"12cjpa"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const ex=Se("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Sc=Se("Shield",[["path",{d:"M20 13c0 5-3.5 7.5-7.66 8.95a1 1 0 0 1-.67-.01C7.5 20.5 4 18 4 13V6a1 1 0 0 1 1-1c2 0 4.5-1.2 6.24-2.72a1.17 1.17 0 0 1 1.52 0C14.51 3.81 17 5 19 5a1 1 0 0 1 1 1z",key:"oel41y"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const qw=Se("ShoppingCart",[["circle",{cx:"8",cy:"21",r:"1",key:"jimo8o"}],["circle",{cx:"19",cy:"21",r:"1",key:"13723u"}],["path",{d:"M2.05 2.05h2l2.66 12.42a2 2 0 0 0 2 1.58h9.78a2 2 0 0 0 1.95-1.57l1.65-7.43H5.12",key:"9zh506"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const LR=Se("Tag",[["path",{d:"M12.586 2.586A2 2 0 0 0 11.172 2H4a2 2 0 0 0-2 2v7.172a2 2 0 0 0 .586 1.414l8.704 8.704a2.426 2.426 0 0 0 3.42 0l6.58-6.58a2.426 2.426 0 0 0 0-3.42z",key:"vktsd0"}],["circle",{cx:"7.5",cy:"7.5",r:".5",fill:"currentColor",key:"kqv944"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const xo=Se("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Uw=Se("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Ww=Se("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const $R=Se("Truck",[["path",{d:"M14 18V6a2 2 0 0 0-2-2H4a2 2 0 0 0-2 2v11a1 1 0 0 0 1 1h2",key:"wrbu53"}],["path",{d:"M15 18H9",key:"1lyqi6"}],["path",{d:"M19 18h2a1 1 0 0 0 1-1v-3.65a1 1 0 0 0-.22-.624l-3.48-4.35A1 1 0 0 0 17.52 8H14",key:"lysw3i"}],["circle",{cx:"17",cy:"18",r:"2",key:"332jqn"}],["circle",{cx:"7",cy:"18",r:"2",key:"19iecd"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Vw=Se("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Xg=Se("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const go=Se("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const Fa=Se("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const lr=Se("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]);/**
 * @license lucide-react v0.439.0 - ISC
 *
 * This source code is licensed under the ISC license.
 * See the LICENSE file in the root directory of this source tree.
 */const RR=Se("Zap",[["path",{d:"M4 14a1 1 0 0 1-.78-1.63l9.9-10.2a.5.5 0 0 1 .86.46l-1.92 6.02A1 1 0 0 0 13 10h7a1 1 0 0 1 .78 1.63l-9.9 10.2a.5.5 0 0 1-.86-.46l1.92-6.02A1 1 0 0 0 11 14z",key:"1xq2db"}]]),IR=()=>{var I,O;const e=ae(L=>L.authentication_state.current_user),t=ae(L=>L.notification_state.unread_count),n=ae(L=>L.feature_flags.feature_b2b_enabled),s=ae(L=>L.feature_flags.feature_inventory_enabled),a=ae(L=>L.feature_flags.feature_analytics_enabled),i=ae(L=>L.logout_user),[o,l]=k.useState(!1),[c,d]=k.useState(!1),[m,u]=k.useState(!1),h=k.useRef(null),f=k.useRef(null),b=Cs(),g=Le(),x=b.pathname.split("/")[2]||"",p=(e==null?void 0:e.role)||"CUSTOMER",y=p==="CUSTOMER"?"/app/dashboard":p==="STAFF"?"/staff/dashboard":p==="ADMIN"?"/admin/dashboard":"/",N=(()=>{if(p==="CUSTOMER")return[{label:"Dashboard",path:"/app/dashboard",icon:Xf,section:""},{label:"Quotes",path:"/app/quotes",icon:Rr,section:"quotes"},{label:"Orders",path:"/app/orders",icon:qw,section:"orders"},{label:"Bookings",path:"/app/bookings",icon:ji,section:"bookings"}];if(p==="STAFF")return[{label:"Dashboard",path:"/staff/dashboard",icon:Xf,section:""},{label:"Jobs",path:"/staff/jobs",icon:Vm,section:"jobs"},{label:"Calendar",path:"/staff/calendar",icon:ji,section:"calendar"}];if(p==="ADMIN"){const L=[{label:"Dashboard",path:"/admin/dashboard",icon:Xf,section:""},{label:"Services",path:"/admin/services",icon:Wa,section:"services"},{label:"Products",path:"/admin/products",icon:wi,section:"products"},{label:"Orders",path:"/admin/orders",icon:qw,section:"orders"},{label:"Users",path:"/admin/users",icon:Fa,section:"users"},{label:"Settings",path:"/admin/settings",icon:ex,section:"settings"}];return n&&L.splice(3,0,{label:"B2B",path:"/admin/b2b",icon:Wa,section:"b2b"}),s&&L.splice(n?4:3,0,{label:"Inventory",path:"/admin/inventory",icon:wi,section:"inventory"}),a&&L.push({label:"Analytics",path:"/admin/analytics",icon:wR,section:"analytics"}),L}return[]})(),j=p==="CUSTOMER"?{label:"New Quote",path:"/app/quotes/new"}:p==="STAFF"?{label:"View Jobs",path:"/staff/jobs"}:p==="ADMIN"?{label:"Manage Services",path:"/admin/services"}:null,_=p==="CUSTOMER"?"/app/settings":p==="ADMIN"?"/admin/settings":null,S=()=>{l(L=>!L),d(!1)},T=()=>{d(L=>!L),l(!1)},A=()=>{u(L=>!L),m?document.body.style.overflow="":document.body.style.overflow="hidden"},E=()=>{i(),g("/")},R=()=>{g(y)};return k.useEffect(()=>{const L=F=>{h.current&&!h.current.contains(F.target)&&l(!1),f.current&&!f.current.contains(F.target)&&d(!1)};return(o||c)&&document.addEventListener("mousedown",L),()=>{document.removeEventListener("mousedown",L)}},[o,c]),k.useEffect(()=>{u(!1),document.body.style.overflow=""},[b.pathname]),k.useEffect(()=>{const L=F=>{F.key==="Escape"&&(u(!1),l(!1),d(!1),document.body.style.overflow="")};return document.addEventListener("keydown",L),()=>document.removeEventListener("keydown",L)},[]),r.jsxs(r.Fragment,{children:[r.jsx("header",{className:"bg-white border-b-2 border-black sticky top-0 z-40",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between items-center h-16 md:h-20",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:A,className:"md:hidden p-2 rounded-lg hover:bg-gray-100 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Toggle navigation menu","aria-expanded":m,"aria-controls":"mobile-navigation-drawer",children:m?r.jsx(lr,{className:"h-6 w-6 text-black"}):r.jsx(TR,{className:"h-6 w-6 text-black"})}),r.jsx("button",{onClick:R,className:"flex items-center space-x-2 hover:opacity-80 transition-opacity",children:r.jsx("img",{src:Vo,alt:"SultanStamp",className:"h-10 md:h-12 w-auto"})})]}),r.jsx("nav",{className:"hidden md:flex items-center space-x-1",children:N.map(L=>{const F=L.icon,M=L.section===""?b.pathname===L.path:x===L.section;return r.jsxs(ie,{to:L.path,className:`flex items-center space-x-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200 ${M?"bg-yellow-400 text-black":"text-gray-700 hover:bg-gray-100"}`,children:[r.jsx(F,{className:"h-4 w-4"}),r.jsx("span",{children:L.label})]},L.path)})}),r.jsxs("div",{className:"flex items-center space-x-2 md:space-x-4",children:[j&&r.jsx(ie,{to:j.path,className:"hidden sm:block bg-yellow-400 hover:bg-yellow-500 text-black px-4 py-2 rounded-lg text-sm font-semibold transition-colors",children:j.label}),r.jsxs("div",{className:"relative",ref:h,children:[r.jsxs("button",{onClick:S,className:"relative p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":`Notifications, ${t} unread`,"aria-expanded":o,children:[r.jsx(Dw,{className:"h-5 w-5 md:h-6 md:w-6 text-gray-700"}),t>0&&r.jsx("span",{className:"absolute top-0 right-0 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white transform translate-x-1/2 -translate-y-1/2 bg-red-600 rounded-full min-w-[20px]",children:t>=10?"9+":t})]}),o&&r.jsxs("div",{className:"absolute right-0 mt-2 w-80 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[r.jsx("div",{className:"px-4 py-2 border-b border-gray-200",children:r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:"Notifications"})}),t>0?r.jsx("div",{className:"py-2",children:r.jsxs("div",{className:"px-4 py-3 hover:bg-gray-50 cursor-pointer",children:[r.jsxs("p",{className:"text-sm text-gray-700",children:["You have ",t," unread notification",t!==1?"s":""]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"View your dashboard for details"})]})}):r.jsxs("div",{className:"px-4 py-6 text-center",children:[r.jsx(Dw,{className:"h-8 w-8 text-gray-400 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-gray-500",children:"No new notifications"})]})]})]}),r.jsxs("div",{className:"relative",ref:f,children:[r.jsxs("button",{onClick:T,className:"flex items-center space-x-2 p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"User menu","aria-expanded":c,children:[r.jsxs("div",{className:"hidden md:flex flex-col items-end",children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:(e==null?void 0:e.name)||"User"}),r.jsx("span",{className:"text-xs text-gray-500 capitalize",children:p.toLowerCase()})]}),r.jsx("div",{className:"h-8 w-8 md:h-10 md:w-10 rounded-full bg-yellow-400 flex items-center justify-center text-black font-semibold",children:((I=e==null?void 0:e.name)==null?void 0:I.charAt(0).toUpperCase())||"U"})]}),c&&r.jsxs("div",{className:"absolute right-0 mt-2 w-56 bg-white rounded-lg shadow-lg border border-gray-200 py-2 z-50",children:[r.jsxs("div",{className:"px-4 py-2 border-b border-gray-200",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:e==null?void 0:e.name}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:e==null?void 0:e.email})]}),r.jsxs("div",{className:"py-1",children:[_&&r.jsxs(ie,{to:_,className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>d(!1),children:[r.jsx(ex,{className:"h-4 w-4"}),r.jsx("span",{children:p==="CUSTOMER"?"My Account":"Settings"})]}),r.jsxs(ie,{to:"/",className:"flex items-center space-x-2 px-4 py-2 text-sm text-gray-700 hover:bg-gray-50 transition-colors",onClick:()=>d(!1),children:[r.jsx(Fw,{className:"h-4 w-4"}),r.jsx("span",{children:"View Public Site"})]}),r.jsx("div",{className:"border-t border-gray-200 my-1"}),r.jsxs("button",{onClick:E,className:"flex items-center space-x-2 w-full px-4 py-2 text-sm text-red-600 hover:bg-red-50 transition-colors text-left",children:[r.jsx(zw,{className:"h-4 w-4"}),r.jsx("span",{children:"Sign Out"})]})]})]})]})]})]})})}),r.jsxs(r.Fragment,{children:[r.jsx("div",{className:`fixed inset-0 bg-black transition-opacity duration-300 z-40 md:hidden ${m?"bg-opacity-60 pointer-events-auto":"bg-opacity-0 pointer-events-none"}`,onClick:A,"aria-hidden":"true"}),r.jsxs("div",{id:"mobile-navigation-drawer",className:`fixed inset-y-0 left-0 w-4/5 max-w-sm bg-white z-50 transform transition-transform duration-300 ease-out md:hidden shadow-2xl overflow-y-auto ${m?"translate-x-0":"-translate-x-full"}`,role:"dialog","aria-modal":"true","aria-label":"Mobile navigation menu",children:[r.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-gray-200 sticky top-0 bg-white z-10",children:[r.jsx("img",{src:Vo,alt:"SultanStamp",className:"h-8 w-auto"}),r.jsx("button",{onClick:A,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors min-h-[44px] min-w-[44px] flex items-center justify-center","aria-label":"Close menu",children:r.jsx(lr,{className:"h-6 w-6 text-black"})})]}),r.jsxs("nav",{className:"flex flex-col p-4 space-y-2 pb-24",children:[N.map(L=>{const F=L.icon,M=L.section===""?b.pathname===L.path:x===L.section;return r.jsxs(ie,{to:L.path,className:`flex items-center space-x-3 px-4 py-3 rounded-lg text-base font-medium transition-colors min-h-[44px] ${M?"bg-yellow-400 text-black":"text-gray-700 hover:bg-gray-100"}`,onClick:A,children:[r.jsx(F,{className:"h-5 w-5"}),r.jsx("span",{children:L.label})]},L.path)}),j&&r.jsx(ie,{to:j.path,className:"flex items-center justify-center bg-yellow-400 hover:bg-yellow-500 text-black px-4 py-3 rounded-lg text-base font-semibold transition-colors mt-4 min-h-[44px]",onClick:A,children:j.label}),r.jsx("div",{className:"border-t border-gray-200 my-4"}),_&&r.jsxs(ie,{to:_,className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-base text-gray-700 hover:bg-gray-100 transition-colors min-h-[44px]",onClick:A,children:[r.jsx(ex,{className:"h-5 w-5"}),r.jsx("span",{children:p==="CUSTOMER"?"My Account":"Settings"})]}),r.jsxs(ie,{to:"/",className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-base text-gray-700 hover:bg-gray-100 transition-colors min-h-[44px]",onClick:A,children:[r.jsx(Fw,{className:"h-5 w-5"}),r.jsx("span",{children:"View Public Site"})]}),r.jsxs("button",{onClick:()=>{A(),E()},className:"flex items-center space-x-3 px-4 py-3 rounded-lg text-base text-red-600 hover:bg-red-50 transition-colors text-left mt-2 min-h-[44px] w-full",children:[r.jsx(zw,{className:"h-5 w-5"}),r.jsx("span",{children:"Sign Out"})]})]}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4 border-t border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("div",{className:"h-10 w-10 rounded-full bg-yellow-400 flex items-center justify-center text-black font-semibold flex-shrink-0",children:((O=e==null?void 0:e.name)==null?void 0:O.charAt(0).toUpperCase())||"U"}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:e==null?void 0:e.name}),r.jsx("p",{className:"text-xs text-gray-500 truncate",children:e==null?void 0:e.email})]})]})})]})]})]})},DR=()=>{const e={whatsapp_number:"353874700356",email:"info@sultanstamp.com",phone:"+353 87 470 0356",social_links:{instagram:"https://www.instagram.com/sultanstamp/",linkedin:"https://ie.linkedin.com/company/sultanstamp",tiktok:"https://www.tiktok.com/@sultanstamp",facebook:"https://www.facebook.com/share/19zEdk2zbW/",linktree:"https://linktr.ee/Sultanstamp"}},t=new Date().getFullYear();return r.jsx(r.Fragment,{children:r.jsx("footer",{className:"bg-[#F7F7F7] border-t-2 border-black",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 lg:gap-12 mb-8",children:[r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Connect with Us"}),r.jsxs("a",{href:`https://wa.me/${e.whatsapp_number}`,target:"_blank",rel:"noopener noreferrer","aria-label":"Message us on WhatsApp",className:"inline-flex items-center justify-center w-full md:w-auto px-6 py-3 bg-[#FFD300] text-black font-semibold rounded-lg hover:bg-[#E5BE00] transition-all duration-200 shadow-md hover:shadow-lg gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z"})}),"Message us on WhatsApp"]}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("a",{href:`mailto:${e.email}`,className:"block text-gray-700 hover:text-black text-base transition-colors",children:[r.jsx("span",{className:"font-medium",children:"Email:"})," ",e.email]}),r.jsxs("a",{href:`tel:${e.phone}`,className:"block text-gray-700 hover:text-black text-base transition-colors md:pointer-events-none",children:[r.jsx("span",{className:"font-medium",children:"Phone:"})," ",e.phone]})]})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Legal"}),r.jsx("nav",{"aria-label":"Legal links",children:r.jsxs("ul",{className:"space-y-3",children:[r.jsx("li",{children:r.jsx(ie,{to:"/policies?section=privacy",className:"text-gray-700 hover:text-black text-sm transition-colors",children:"Privacy Policy"})}),r.jsx("li",{children:r.jsx(ie,{to:"/policies?section=terms",className:"text-gray-700 hover:text-black text-sm transition-colors",children:"Terms of Service"})}),r.jsx("li",{children:r.jsx(ie,{to:"/policies?section=refunds",className:"text-gray-700 hover:text-black text-sm transition-colors",children:"Refund Policy"})})]})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Follow Us"}),r.jsxs("div",{className:"flex gap-4 flex-wrap",children:[r.jsx("a",{href:e.social_links.linktree,target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our Linktree",className:"w-8 h-8 bg-black rounded-full flex items-center justify-center hover:bg-gray-800 transition-all duration-200 hover:scale-110",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M7.953 15.066c-.08.163-.08.324-.08.486.08.517.528.897 1.052.89h1.294v4.776c0 .486-.404.89-.89.89H6.577a.898.898 0 0 1-.889-.891v-4.774H.992c-.728 0-1.214-.729-.89-1.377l6.96-12.627a1.065 1.065 0 0 1 1.863 0l2.913 5.585-3.885 7.042zm15.945 0-6.96-12.627a1.065 1.065 0 0 0-1.862 0l-2.995 5.586 3.885 7.04c.081.164.081.326.081.487-.08.517-.529.897-1.052.89h-1.296v4.776c0 .486.405.89.89.89h2.914a.9.9 0 0 0 .892-.891v-4.774h4.612c.73 0 1.214-.729.89-1.377z"})})}),r.jsx("a",{href:e.social_links.instagram,target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our Instagram",className:"w-8 h-8 bg-black rounded-full flex items-center justify-center hover:bg-gray-800 transition-all duration-200 hover:scale-110",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M12.315 2c2.43 0 2.784.013 3.808.06 1.064.049 1.791.218 2.427.465a4.902 4.902 0 011.772 1.153 4.902 4.902 0 011.153 1.772c.247.636.416 1.363.465 2.427.048 1.067.06 1.407.06 4.123v.08c0 2.643-.012 2.987-.06 4.043-.049 1.064-.218 1.791-.465 2.427a4.902 4.902 0 01-1.153 1.772 4.902 4.902 0 01-1.772 1.153c-.636.247-1.363.416-2.427.465-1.067.048-1.407.06-4.123.06h-.08c-2.643 0-2.987-.012-4.043-.06-1.064-.049-1.791-.218-2.427-.465a4.902 4.902 0 01-1.772-1.153 4.902 4.902 0 01-1.153-1.772c-.247-.636-.416-1.363-.465-2.427-.047-1.024-.06-1.379-.06-3.808v-.63c0-2.43.013-2.784.06-3.808.049-1.064.218-1.791.465-2.427a4.902 4.902 0 011.153-1.772A4.902 4.902 0 015.45 2.525c.636-.247 1.363-.416 2.427-.465C8.901 2.013 9.256 2 11.685 2h.63zm-.081 1.802h-.468c-2.456 0-2.784.011-3.807.058-.975.045-1.504.207-1.857.344-.467.182-.8.398-1.15.748-.35.35-.566.683-.748 1.15-.137.353-.3.882-.344 1.857-.047 1.023-.058 1.351-.058 3.807v.468c0 2.456.011 2.784.058 3.807.045.975.207 1.504.344 1.857.182.466.399.8.748 1.15.35.35.683.566 1.15.748.353.137.882.3 1.857.344 1.054.048 1.37.058 4.041.058h.08c2.597 0 2.917-.01 3.96-.058.976-.045 1.505-.207 1.858-.344.466-.182.8-.398 1.15-.748.35-.35.566-.683.748-1.15.137-.353.3-.882.344-1.857.048-1.055.058-1.37.058-4.041v-.08c0-2.597-.01-2.917-.058-3.96-.045-.976-.207-1.505-.344-1.858a3.097 3.097 0 00-.748-1.15 3.098 3.098 0 00-1.15-.748c-.353-.137-.882-.3-1.857-.344-1.023-.047-1.351-.058-3.807-.058zM12 6.865a5.135 5.135 0 110 10.27 5.135 5.135 0 010-10.27zm0 1.802a3.333 3.333 0 100 6.666 3.333 3.333 0 000-6.666zm5.338-3.205a1.2 1.2 0 110 2.4 1.2 1.2 0 010-2.4z"})})}),r.jsx("a",{href:e.social_links.linkedin,target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our LinkedIn",className:"w-8 h-8 bg-black rounded-full flex items-center justify-center hover:bg-gray-800 transition-all duration-200 hover:scale-110",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433a2.062 2.062 0 01-2.063-2.065 2.064 2.064 0 112.063 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})})}),r.jsx("a",{href:e.social_links.tiktok,target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our TikTok",className:"w-8 h-8 bg-black rounded-full flex items-center justify-center hover:bg-gray-800 transition-all duration-200 hover:scale-110",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})})}),r.jsx("a",{href:e.social_links.facebook,target:"_blank",rel:"noopener noreferrer","aria-label":"Visit our Facebook",className:"w-8 h-8 bg-black rounded-full flex items-center justify-center hover:bg-gray-800 transition-all duration-200 hover:scale-110",children:r.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 24 24","aria-hidden":"true",children:r.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})})})]})]})]}),r.jsx("div",{className:"border-t border-gray-300 pt-8 mt-8",children:r.jsxs("p",{className:"text-center text-sm text-gray-600",children:[" ",t," SultanStamp. All rights reserved."]})})]})})})},FR=()=>{const[e]=Ye(),t=Le(),n=e.get("returnTo"),s=e.get("role"),a=ae(H=>H.authentication_state.authentication_status.is_loading),i=ae(H=>H.authentication_state.error_message),o=ae(H=>H.authentication_state.authentication_status.is_authenticated),l=ae(H=>H.authentication_state.current_user),c=ae(H=>H.login_user),d=ae(H=>H.clear_auth_error),[m,u]=k.useState({email:"",password:"",role:(s==null?void 0:s.toUpperCase())||"CUSTOMER"}),[h,f]=k.useState({email:null,password:null,role:null,general:null}),[b,g]=k.useState(n||"/app"),[x,p]=k.useState((s==null?void 0:s.toUpperCase())||"CUSTOMER"),[y,v]=k.useState(!1),[N,w]=k.useState(!1),[j,_]=k.useState(!1),[S,T]=k.useState(0),A="login_lockout_until",E="login_failed_attempts",R=5,I=15*60*1e3,O=()=>{const H=localStorage.getItem(A);if(!H)return!1;const ee=Date.now(),J=parseInt(H);if(ee<J){const X=Math.ceil((J-ee)/1e3);return T(X),_(!0),!0}else return localStorage.removeItem(A),localStorage.removeItem(E),_(!1),!1},L=()=>{const ee=parseInt(localStorage.getItem(E)||"0")+1;if(localStorage.setItem(E,ee.toString()),ee>=R){const J=Date.now()+I;localStorage.setItem(A,J.toString()),_(!0),T(Math.ceil(I/1e3))}return ee},F=()=>{localStorage.removeItem(E),localStorage.removeItem(A),_(!1)};k.useEffect(()=>{O()},[]),k.useEffect(()=>{if(j&&S>0){const H=setInterval(()=>{O()||clearInterval(H)},1e3);return()=>clearInterval(H)}},[j,S]),k.useEffect(()=>{if(o&&l){const H=M(l.role);t(b||H,{replace:!0})}},[o,l,b,t]),k.useEffect(()=>{n&&g(n)},[n]),k.useEffect(()=>{u(H=>({...H,role:x}))},[x]);const M=H=>{switch(H){case"CUSTOMER":return"/app";case"STAFF":return"/staff";case"ADMIN":return"/admin";default:return"/"}},D=H=>/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(H),W=()=>{const H={email:null,password:null,role:null,general:null};return m.email?D(m.email)||(H.email="Invalid email format"):H.email="Email is required",m.password||(H.password="Password is required"),m.role||(H.role="Please select a role"),f(H),!H.email&&!H.password&&!H.role},P=(H,ee)=>{u(J=>({...J,[H]:ee})),f(J=>({...J,[H]:null}))},V=H=>{p(H),u(J=>({...J,role:H}));const ee=new URLSearchParams(e);ee.set("role",H),t(`/login?${ee.toString()}`,{replace:!0})},K=()=>{w(H=>!H)},ne=async H=>{if(H.preventDefault(),d(),f(ee=>({...ee,general:null})),O()){f(ee=>({...ee,general:`Account locked due to too many failed attempts. Please try again in ${Math.ceil(S/60)} minutes.`}));return}if(W())try{await c(m.email,m.password,m.role),F()}catch{const J=L();if(J>=R)f(X=>({...X,general:"Too many failed attempts. Account locked for 15 minutes."}));else{const X=R-J;f(se=>({...se,general:`${X} attempt${X!==1?"s":""} remaining before account lock.`}))}}},G=()=>{const H=new URLSearchParams;b&&H.set("returnTo",b),t(`/register?${H.toString()}`)},oe=()=>{t("/forgot-password")};return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-8 pt-8 pb-6 bg-gradient-to-r from-gray-900 to-black",children:[r.jsx("div",{className:"flex justify-center mb-4",children:r.jsx("img",{src:Vo,alt:"SultanStamp",className:"h-16 w-auto"})}),r.jsx("h2",{className:"text-center text-3xl font-bold text-white",children:"Welcome Back"}),r.jsx("p",{className:"mt-2 text-center text-sm text-gray-300",children:"Sign in to access your SultanStamp account"})]}),r.jsxs("div",{className:"px-8 py-8",children:[r.jsxs("form",{onSubmit:ne,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"role",className:"block text-sm font-semibold text-gray-900 mb-2",children:"I am a:"}),r.jsxs("select",{id:"role",name:"role",value:x,onChange:H=>V(H.target.value),className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",children:[r.jsx("option",{value:"CUSTOMER",children:"Customer"}),r.jsx("option",{value:"STAFF",children:"Staff"}),r.jsx("option",{value:"ADMIN",children:"Admin"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Email address"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:m.email,onChange:H=>P("email",H.target.value),placeholder:"your.email@example.com",className:`block w-full px-4 py-3 border-2 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none transition-all ${h.email?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100"}`}),h.email&&r.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:h.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",name:"password",type:N?"text":"password",autoComplete:"current-password",required:!0,value:m.password,onChange:H=>P("password",H.target.value),placeholder:"Enter your password",className:`block w-full px-4 py-3 pr-12 border-2 rounded-lg text-gray-900 placeholder-gray-500 focus:outline-none transition-all ${h.password?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100"}`}),r.jsx("button",{type:"button",onClick:K,className:"absolute inset-y-0 right-0 flex items-center pr-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":N?"Hide password":"Show password",children:N?r.jsx(_C,{className:"w-5 h-5"}):r.jsx(kC,{className:"w-5 h-5"})})]}),h.password&&r.jsx("p",{className:"mt-2 text-sm text-red-600",role:"alert",children:h.password})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("label",{className:"flex items-center cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:y,onChange:H=>v(H.target.checked),className:"w-4 h-4 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400 focus:ring-2"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Remember me"})]}),r.jsx("button",{type:"button",onClick:oe,className:"text-sm font-medium text-gray-900 hover:text-yellow-600 transition-colors",children:"Forgot Password?"})]}),(i||h.general)&&r.jsx("div",{className:"bg-red-50 border-2 border-red-200 text-red-700 px-4 py-3 rounded-lg",role:"alert",children:r.jsx("p",{className:"text-sm font-medium",children:i||h.general})}),j&&r.jsx("div",{className:"bg-orange-50 border-2 border-orange-200 text-orange-700 px-4 py-3 rounded-lg",role:"alert",children:r.jsxs("p",{className:"text-sm font-medium",children:["Account locked for ",Math.floor(S/60)," minutes ",S%60," seconds due to multiple failed login attempts."]})}),r.jsx("button",{type:"submit",disabled:a||j,className:"w-full flex justify-center items-center px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-200 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-yellow-400",children:a?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-black",xmlns:"http://www.w3.org/2000/svg",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Signing in..."]}):r.jsxs(r.Fragment,{children:[r.jsx(SC,{className:"w-5 h-5 mr-2"}),"Log In"]})}),(x==="STAFF"||x==="ADMIN")&&r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-xs text-gray-500",children:"Staff and Admin accounts are created by administrators. Contact your admin if you need access."})})]}),x==="CUSTOMER"&&r.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[r.jsx("p",{className:"text-center text-sm text-gray-600 mb-4",children:"New to SultanStamp?"}),r.jsx("button",{type:"button",onClick:G,className:"w-full flex justify-center items-center px-6 py-3 bg-gray-900 text-white font-semibold rounded-lg hover:bg-gray-800 focus:outline-none focus:ring-4 focus:ring-gray-200 transition-all duration-200",children:"Create Account"}),r.jsxs("div",{className:"mt-4 grid grid-cols-2 gap-3 text-xs text-gray-600",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),r.jsx("span",{children:"Free quotes"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),r.jsx("span",{children:"Order tracking"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),r.jsx("span",{children:"Proof approval"})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),r.jsx("span",{children:"Secure payments"})]})]})]})]}),r.jsx("div",{className:"px-8 py-4 bg-gray-50 border-t border-gray-100",children:r.jsx("div",{className:"text-center",children:r.jsxs(ie,{to:"/",className:"text-sm font-medium text-gray-600 hover:text-gray-900 transition-colors flex items-center justify-center gap-2",children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Home"]})})})]}),r.jsxs("div",{className:"mt-6 flex items-center justify-center gap-6 text-xs text-gray-500",children:[r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),r.jsx("span",{children:"256-bit SSL"})]}),r.jsxs("div",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4 text-yellow-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),r.jsx("span",{children:"Trusted Service"})]})]})]})})})},BR=()=>{const e=Le(),[t]=Ye(),n=ae(M=>M.authentication_state.authentication_status.is_loading),s=ae(M=>M.authentication_state.error_message),a=ae(M=>M.authentication_state.authentication_status.is_authenticated),i=ae(M=>M.register_user),o=ae(M=>M.clear_auth_error),l=ae(M=>M.show_toast),[c,d]=k.useState({name:"",email:"",password:"",confirm_password:"",phone:"",company_name:"",address:"",terms_agreed:!1}),[m,u]=k.useState({name:null,email:null,password:null,confirm_password:null,phone:null,company_name:null,address:null,terms:null,general:null}),[h,f]=k.useState({score:0,feedback:"Enter a password",has_uppercase:!1,has_lowercase:!1,has_number:!1,has_symbol:!1,min_length:!1}),[b,g]=k.useState(!1),[x,p]=k.useState({is_checking:!1,is_available:null}),[y,v]=k.useState(null),[N,w]=k.useState(!1),[j,_]=k.useState(!1);k.useEffect(()=>{const M=t.get("return_to");v(M);const D=t.get("email"),W=t.get("name"),P=t.get("quote");(D||W)&&d(V=>({...V,email:D||V.email,name:W||V.name})),P&&sessionStorage.setItem("pending_quote_link",P)},[t]),k.useEffect(()=>{a&&e(y||"/app")},[a,e,y]),k.useEffect(()=>()=>{o()},[o]);const S=M=>{const D=/[A-Z]/.test(M),W=/[a-z]/.test(M),P=/[0-9]/.test(M),V=/[^A-Za-z0-9]/.test(M),K=M.length>=8,ne=[D,W,P,V,K].filter(Boolean).length;let G=0,oe="Enter a password";M.length>0&&(G=ne,G<=2?oe="Weak":G<=3?oe="Medium":oe="Strong"),f({score:G,feedback:oe,has_uppercase:D,has_lowercase:W,has_number:P,has_symbol:V,min_length:K})},T=async M=>{if(!M||!/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(M)){p({is_checking:!1,is_available:null});return}p({is_checking:!0,is_available:null});try{const W=await fetch("https://123project-build-a-production-ready-w.launchpulse.ai/api/auth/check-email",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:M.toLowerCase().trim()})}),P=await W.json();W.ok?P.available?(p({is_checking:!1,is_available:!0}),u(V=>({...V,email:null}))):(p({is_checking:!1,is_available:!1}),u(V=>({...V,email:"Email already registered"}))):p({is_checking:!1,is_available:null})}catch{p({is_checking:!1,is_available:null})}};k.useEffect(()=>{if(c.email&&c.email.includes("@")){const M=setTimeout(()=>{T(c.email)},500);return()=>clearTimeout(M)}},[c.email]);const A=(M,D)=>{d(W=>({...W,[M]:D})),u(W=>({...W,[M]:null})),M==="password"&&S(D),M==="email"&&p({is_checking:!1,is_available:null})},E=M=>{const D=c[M];switch(M){case"name":return!D||D.trim().length===0?"Name is required":D.trim().length>255?"Name must be less than 255 characters":null;case"email":return!D||D.trim().length===0?"Email is required":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(D)?x.is_available===!1?"Email already registered":null:"Invalid email format";case"password":return!D||D.length===0?"Password is required":D.length<8?"Password must be at least 8 characters":h.has_uppercase?h.has_number?h.has_symbol?null:"Password must include symbol":"Password must include number":"Password must include uppercase letter";case"confirm_password":return!D||D.length===0?"Please confirm your password":D!==c.password?"Passwords do not match":null;case"terms_agreed":return D?null:"You must agree to the Terms of Service";default:return null}},R=M=>{const D=E(M);u(W=>({...W,[M]:D}))},I=()=>{const M={};return M.name=E("name"),M.email=E("email"),M.password=E("password"),M.confirm_password=E("confirm_password"),M.terms=E("terms_agreed"),u(D=>({...D,...M})),Object.values(M).every(D=>D===null)},O=async M=>{if(M.preventDefault(),o(),!I()){l({type:"error",message:"Please fix form errors before submitting",duration:5e3});return}if(x.is_available===!1){u(D=>({...D,email:"Email already registered",general:"Please use a different email address"}));return}g(!0);try{await i({name:c.name.trim(),email:c.email.toLowerCase().trim(),password:c.password,phone:c.phone.trim()||void 0,company_name:c.company_name.trim()||void 0,address:c.address.trim()||void 0}),l({type:"success",message:"Account created successfully! Welcome to SultanStamp.",duration:5e3}),e(y||"/app")}catch(D){g(!1),u(W=>({...W,general:D.message||"Registration failed. Please try again."})),l({type:"error",message:D.message||"Registration failed",duration:5e3})}},L=()=>h.score===0?"bg-gray-300":h.score<=2?"bg-red-500":h.score<=3?"bg-yellow-500":"bg-green-500",F=()=>`${h.score/5*100}%`;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("div",{className:"bg-white border-b-2 border-black",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 h-16 sm:h-20 flex items-center",children:r.jsx(ie,{to:"/",className:"flex items-center",children:r.jsx("img",{src:Vo,alt:"SultanStamp",className:"h-10 sm:h-12 w-auto"})})})}),r.jsx("div",{className:"flex items-center justify-center px-4 py-12 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"w-full max-w-md",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl sm:text-4xl font-bold text-gray-900 mb-2",children:"Create Your SultanStamp Account"}),r.jsx("p",{className:"text-base sm:text-lg text-gray-600",children:"Join us to get quotes and track your orders"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-6 sm:p-8",children:[(s||m.general)&&r.jsx("div",{className:"mb-6 bg-red-50 border-2 border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-red-700 font-medium",children:s||m.general})}),r.jsxs("form",{onSubmit:O,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Full Name ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:c.name,onChange:M=>A("name",M.target.value),onBlur:()=>R("name"),placeholder:"John Doe",className:`w-full px-4 py-3 border-2 rounded-lg text-base focus:outline-none focus:ring-4 focus:ring-yellow-100 transition-all ${m.name?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-black"}`}),m.name&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Email Address ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:c.email,onChange:M=>A("email",M.target.value),onBlur:()=>R("email"),placeholder:"john@example.com",className:`w-full px-4 py-3 border-2 rounded-lg text-base focus:outline-none focus:ring-4 focus:ring-yellow-100 transition-all ${m.email?"border-red-500 focus:border-red-500":x.is_available===!0?"border-green-500 focus:border-green-500":"border-gray-200 focus:border-black"}`}),x.is_checking&&r.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:r.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),x.is_available===!0&&!x.is_checking&&r.jsx("div",{className:"absolute right-3 top-1/2 transform -translate-y-1/2",children:r.jsx("svg",{className:"h-5 w-5 text-green-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})]}),m.email&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.email}),x.is_available===!0&&!m.email&&r.jsx("p",{className:"mt-2 text-sm text-green-600",children:" Email available"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"password",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Password ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",name:"password",type:N?"text":"password",required:!0,value:c.password,onChange:M=>A("password",M.target.value),onBlur:()=>R("password"),placeholder:"Enter strong password",className:`w-full px-4 py-3 pr-12 border-2 rounded-lg text-base focus:outline-none focus:ring-4 focus:ring-yellow-100 transition-all ${m.password?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-black"}`}),r.jsx("button",{type:"button",onClick:()=>w(!N),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:N?r.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]}),c.password&&r.jsxs("div",{className:"mt-3 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-medium text-gray-600",children:"Password Strength:"}),r.jsx("span",{className:`text-xs font-semibold ${h.score<=2?"text-red-600":h.score<=3?"text-yellow-600":"text-green-600"}`,children:h.feedback})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-300 ${L()}`,style:{width:F()}})}),r.jsxs("div",{className:"grid grid-cols-2 gap-2 mt-3",children:[r.jsxs("div",{className:`flex items-center text-xs ${h.min_length?"text-green-600":"text-gray-500"}`,children:[r.jsx("span",{className:"mr-1",children:h.min_length?"":""}),"8+ characters"]}),r.jsxs("div",{className:`flex items-center text-xs ${h.has_uppercase?"text-green-600":"text-gray-500"}`,children:[r.jsx("span",{className:"mr-1",children:h.has_uppercase?"":""}),"Uppercase"]}),r.jsxs("div",{className:`flex items-center text-xs ${h.has_number?"text-green-600":"text-gray-500"}`,children:[r.jsx("span",{className:"mr-1",children:h.has_number?"":""}),"Number"]}),r.jsxs("div",{className:`flex items-center text-xs ${h.has_symbol?"text-green-600":"text-gray-500"}`,children:[r.jsx("span",{className:"mr-1",children:h.has_symbol?"":""}),"Symbol"]})]})]}),m.password&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.password})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"confirm_password",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Confirm Password ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"confirm_password",name:"confirm_password",type:j?"text":"password",required:!0,value:c.confirm_password,onChange:M=>A("confirm_password",M.target.value),onBlur:()=>R("confirm_password"),placeholder:"Re-enter password",className:`w-full px-4 py-3 pr-12 border-2 rounded-lg text-base focus:outline-none focus:ring-4 focus:ring-yellow-100 transition-all ${m.confirm_password?"border-red-500 focus:border-red-500":c.confirm_password&&c.confirm_password===c.password?"border-green-500 focus:border-green-500":"border-gray-200 focus:border-black"}`}),r.jsx("button",{type:"button",onClick:()=>_(!j),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700",children:j?r.jsxs("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}):r.jsx("svg",{className:"h-5 w-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})})})]}),m.confirm_password&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.confirm_password}),!m.confirm_password&&c.confirm_password&&c.confirm_password===c.password&&r.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center",children:[r.jsx("svg",{className:"h-4 w-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),"Passwords match"]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"phone",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Phone Number ",r.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),r.jsx("input",{id:"phone",name:"phone",type:"tel",value:c.phone,onChange:M=>A("phone",M.target.value),placeholder:"+353 87 470 0356",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:ring-4 focus:ring-yellow-100 focus:border-black transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"company_name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Company Name ",r.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),r.jsx("input",{id:"company_name",name:"company_name",type:"text",value:c.company_name,onChange:M=>A("company_name",M.target.value),placeholder:"Your Company Ltd.",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:ring-4 focus:ring-yellow-100 focus:border-black transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"address",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Address ",r.jsx("span",{className:"text-gray-500 text-xs",children:"(Optional)"})]}),r.jsx("textarea",{id:"address",name:"address",rows:3,value:c.address,onChange:M=>A("address",M.target.value),placeholder:"Street address, city, postal code",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg text-base focus:outline-none focus:ring-4 focus:ring-yellow-100 focus:border-black transition-all resize-vertical"})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-start",children:[r.jsx("input",{id:"terms_agreed",name:"terms_agreed",type:"checkbox",checked:c.terms_agreed,onChange:M=>A("terms_agreed",M.target.checked),onBlur:()=>R("terms_agreed"),className:`mt-1 h-5 w-5 rounded border-2 text-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all ${m.terms?"border-red-500":"border-gray-300"}`}),r.jsxs("label",{htmlFor:"terms_agreed",className:"ml-3 text-sm text-gray-700",children:["I agree to the"," ",r.jsx(ie,{to:"/policies",target:"_blank",className:"text-black font-semibold hover:text-gray-700 underline",children:"Terms of Service"})," ",r.jsx("span",{className:"text-red-600",children:"*"})]})]}),m.terms&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:m.terms})]}),r.jsx("div",{className:"pt-2",children:r.jsx("button",{type:"submit",disabled:b||n||x.is_checking,className:"w-full flex justify-center items-center px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-100 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:b||n?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating Account..."]}):"Create Account"})}),r.jsx("div",{className:"text-center pt-2",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Already have an account?"," ",r.jsx(ie,{to:`/login${y?`?return_to=${encodeURIComponent(y)}`:""}`,className:"text-black font-semibold hover:text-gray-700 underline",children:"Log in"})]})})]})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsx("p",{className:"text-xs text-gray-500",children:"By creating an account, you can request quotes, track orders, and manage your projects."})})]})})]})})},zR=()=>{const[e,t]=k.useState(""),[n,s]=k.useState(null),[a,i]=k.useState(!1),[o,l]=k.useState(!1),c=()=>{const h=/^[^\s@]+@[^\s@]+\.[^\s@]+$/;return e.trim()?h.test(e)?(s(null),!0):(s("Please enter a valid email address"),!1):(s("Email is required"),!1)},d=async h=>{if(h.preventDefault(),s(null),!!c()){i(!0);try{await te.post("https://123project-build-a-production-ready-w.launchpulse.ai/api/auth/forgot-password",{email:e.trim().toLowerCase()},{headers:{"Content-Type":"application/json"}}),l(!0),i(!1)}catch(f){console.error("Password reset request error:",f),l(!0),i(!1)}}},m=()=>{e.trim()&&c()},u=h=>{t(h.target.value),n&&s(null)};return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-blue-50 to-indigo-100 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-8 pt-8 pb-6",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 leading-tight",children:"Reset Your Password"}),r.jsx("p",{className:"mt-3 text-base text-gray-600 leading-relaxed",children:o?"Check your email for instructions":"Enter your email address and we'll send you a password reset link"})]}),o?r.jsxs("div",{className:"text-center space-y-6",children:[r.jsx("div",{className:"flex justify-center",children:r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})})}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("h3",{className:"text-xl font-semibold text-green-700",children:"Check Your Email"}),r.jsx("p",{className:"text-sm text-gray-600 leading-relaxed",children:"If an account with that email exists, we've sent a password reset link. The link will expire in 1 hour."}),r.jsx("p",{className:"text-sm text-gray-600",children:"Didn't receive the email? Check your spam folder or try again."})]}),r.jsx("div",{className:"pt-4",children:r.jsx(ie,{to:"/login",className:"w-full inline-block text-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors duration-200 shadow-lg hover:shadow-xl",children:"Back to Login"})})]}):r.jsxs("form",{onSubmit:d,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-900 mb-2",children:"Email Address"}),r.jsx("input",{id:"email",name:"email",type:"email",autoComplete:"email",required:!0,value:e,onChange:u,onBlur:m,placeholder:"your.email@example.com",className:`
                        relative block w-full px-4 py-3 
                        border-2 rounded-lg
                        ${n?"border-red-500 focus:border-red-500 focus:ring-red-100":"border-gray-200 focus:border-blue-500 focus:ring-blue-100"}
                        placeholder-gray-400 text-gray-900
                        focus:outline-none focus:ring-4
                        transition-all duration-200
                        text-base
                      `,style:{fontSize:"16px"},disabled:a}),n&&r.jsxs("p",{className:"mt-2 text-sm text-red-600 flex items-center",role:"alert",children:[r.jsx("svg",{className:"w-4 h-4 mr-1 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),n]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:a,className:`
                        w-full flex justify-center items-center
                        px-6 py-3
                        bg-blue-600 text-white font-medium rounded-lg
                        hover:bg-blue-700
                        focus:outline-none focus:ring-4 focus:ring-blue-100
                        disabled:opacity-50 disabled:cursor-not-allowed
                        transition-all duration-200
                        shadow-lg hover:shadow-xl
                      `,children:a?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending Reset Link..."]}):"Send Reset Link"})}),r.jsxs("div",{className:"text-center space-y-3",children:[r.jsx(ie,{to:"/login",className:"block text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"Remember your password? Log in"}),r.jsx(ie,{to:"/register",className:"block text-sm text-gray-600 hover:text-gray-900 transition-colors",children:"Don't have an account? Sign up"})]})]})]}),r.jsx("div",{className:"px-8 py-4 bg-gray-50 border-t border-gray-100",children:r.jsx("p",{className:"text-xs text-gray-500 text-center leading-relaxed",children:"For your security, password reset links expire in 1 hour and can only be used once."})})]}),r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Need help? Contact us at"," ",r.jsx("a",{href:"mailto:info@sultanstamp.com",className:"text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"info@sultanstamp.com"})]})})]})})})},qR=()=>{const[e]=Ye(),t=Le(),[n]=k.useState(e.get("token")||""),[s,a]=k.useState({password:"",confirm_password:""}),[i,o]=k.useState({password:null,confirm_password:null,general:null}),[l,c]=k.useState(null),[d,m]=k.useState(!1),[u,h]=k.useState(!1),[f,b]=k.useState({score:0,feedback:"",meets_requirements:!1}),[g,x]=k.useState(!1);k.useEffect(()=>{n?c(null):(c(!1),o(_=>({..._,general:"No reset token provided. Please request a new password reset link."})))},[n]),k.useEffect(()=>{if(!s.password){b({score:0,feedback:"",meets_requirements:!1});return}const _=s.password;let S=0;const T=[];_.length>=8?S+=1:T.push("Need 8+ characters"),/[A-Z]/.test(_)?S+=1:T.push("Need uppercase letter"),/[0-9]/.test(_)?S+=1:T.push("Need number"),/[!@#$%^&*(),.?":{}|<>]/.test(_)?S+=1:T.push("Need special character");const A=_.length>=8;let E="";S===0?E="Very weak":S===1?E="Weak":S===2?E="Fair":S===3?E="Good":E="Strong",T.length>0&&(E+=` - ${T.join(", ")}`),b({score:S,feedback:E,meets_requirements:A}),i.password&&o(R=>({...R,password:null}))},[s.password]),k.useEffect(()=>{s.confirm_password&&s.password!==s.confirm_password?o(_=>({..._,confirm_password:"Passwords do not match"})):i.confirm_password&&o(_=>({..._,confirm_password:null}))},[s.confirm_password,s.password]);const p=_=>{a(S=>({...S,password:_.target.value}))},y=_=>{a(S=>({...S,confirm_password:_.target.value}))},v=()=>{const _={password:null,confirm_password:null,general:null};return s.password?s.password.length<8?_.password="Password must be at least 8 characters":f.meets_requirements||(_.password="Password does not meet minimum requirements"):_.password="Password is required",s.confirm_password?s.password!==s.confirm_password&&(_.confirm_password="Passwords do not match"):_.confirm_password="Please confirm your password",o(_),_.password===null&&_.confirm_password===null},N=async _=>{var S,T;if(_.preventDefault(),o({password:null,confirm_password:null,general:null}),!!v()){m(!0);try{const E=await te.post("https://123project-build-a-production-ready-w.launchpulse.ai/api/auth/reset-password",{token:n,password:s.password});h(!0),c(!0),m(!1),setTimeout(()=>{t("/login")},3e3)}catch(A){m(!1);const E=((T=(S=A.response)==null?void 0:S.data)==null?void 0:T.message)||A.message||"Password reset failed";E.includes("token")||E.includes("expired")||E.includes("Invalid")?(c(!1),o({password:null,confirm_password:null,general:"This reset link is invalid or has expired. Please request a new password reset."})):o(R=>({...R,general:E}))}}},w=()=>f.score===0?"bg-gray-200":f.score===1?"bg-red-500":f.score===2?"bg-yellow-500":f.score===3?"bg-blue-500":"bg-green-500",j=()=>`${f.score/4*100}%`;return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-md w-full",children:[r.jsxs("div",{className:"text-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900",children:"Reset Your Password"}),r.jsx("p",{className:"mt-2 text-gray-600",children:"Create a new password for your account"})]}),u&&r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-green-100 mb-4",children:r.jsx("svg",{className:"h-8 w-8 text-green-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Password Reset Successfully!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Your password has been updated. You can now log in with your new password."}),r.jsx("p",{className:"text-sm text-gray-500",children:"Redirecting to login page in 3 seconds..."}),r.jsx(ie,{to:"/login",className:"mt-4 inline-block px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Go to Login Now"})]})}),!u&&l===!1&&r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"mx-auto flex items-center justify-center h-16 w-16 rounded-full bg-red-100 mb-4",children:r.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Invalid Reset Link"}),r.jsx("p",{className:"text-gray-600 mb-6",children:i.general||"This password reset link is invalid or has expired."}),r.jsx(ie,{to:"/forgot-password",className:"inline-block px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Request New Reset Link"})]})}),!u&&(l===!0||l===null)&&r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:r.jsxs("form",{onSubmit:N,className:"space-y-6",children:[i.general&&(l===!0||l===null)&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:r.jsx("p",{className:"text-sm",children:i.general})}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"password",className:"block text-sm font-medium text-gray-900 mb-2",children:"New Password"}),r.jsxs("div",{className:"relative",children:[r.jsx("input",{id:"password",name:"password",type:g?"text":"password",required:!0,value:s.password,onChange:p,placeholder:"Enter new password",className:`block w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${i.password?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`,disabled:d}),r.jsx("button",{type:"button",onClick:()=>x(!g),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-gray-500 hover:text-gray-700 transition-colors",tabIndex:-1,children:g?r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13.875 18.825A10.05 10.05 0 0112 19c-4.478 0-8.268-2.943-9.543-7a9.97 9.97 0 011.563-3.029m5.858.908a3 3 0 114.243 4.243M9.878 9.878l4.242 4.242M9.88 9.88l-3.29-3.29m7.532 7.532l3.29 3.29M3 3l3.59 3.59m0 0A9.953 9.953 0 0112 5c4.478 0 8.268 2.943 9.543 7a10.025 10.025 0 01-4.132 5.411m0 0L21 21"})}):r.jsxs("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]}),s.password&&r.jsxs("div",{className:"mt-2 space-y-2",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-xs font-medium text-gray-700",children:"Password Strength:"}),r.jsx("span",{className:`text-xs font-semibold ${f.score===0?"text-gray-500":f.score===1?"text-red-600":f.score===2?"text-yellow-600":f.score===3?"text-blue-600":"text-green-600"}`,children:f.feedback})]}),r.jsx("div",{className:"h-2 bg-gray-200 rounded-full overflow-hidden",children:r.jsx("div",{className:`h-full transition-all duration-300 ${w()}`,style:{width:j()}})}),r.jsx("p",{className:"text-xs text-gray-600",children:"Min 8 chars. Recommended: uppercase, number, special character"})]}),i.password&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:i.password})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"confirm_password",className:"block text-sm font-medium text-gray-900 mb-2",children:"Confirm New Password"}),r.jsx("input",{id:"confirm_password",name:"confirm_password",type:g?"text":"password",required:!0,value:s.confirm_password,onChange:y,placeholder:"Re-enter new password",className:`block w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all ${i.confirm_password?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`,disabled:d}),i.confirm_password&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:i.confirm_password}),s.confirm_password&&s.password===s.confirm_password&&r.jsxs("p",{className:"mt-2 text-sm text-green-600 flex items-center",children:[r.jsx("svg",{className:"h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Passwords match"]})]}),r.jsx("div",{children:r.jsx("button",{type:"submit",disabled:d||!s.password||!s.confirm_password||!f.meets_requirements||s.password!==s.confirm_password,className:"w-full flex justify-center items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-black bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-4 focus:ring-yellow-100 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:d?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Resetting Password..."]}):"Reset Password"})}),r.jsx("div",{className:"text-center",children:r.jsx(ie,{to:"/login",className:"text-sm font-medium text-blue-600 hover:text-blue-500 transition-colors",children:"Back to Login"})})]})}),!u&&(l===!0||l===null)&&r.jsx("div",{className:"mt-6 text-center",children:r.jsx("p",{className:"text-xs text-gray-500",children:"Make sure your password is strong and unique. Don't reuse passwords from other accounts."})})]})})})};var Mi=class{constructor(){this.listeners=new Set,this.subscribe=this.subscribe.bind(this)}subscribe(e){return this.listeners.add(e),this.onSubscribe(),()=>{this.listeners.delete(e),this.onUnsubscribe()}}hasListeners(){return this.listeners.size>0}onSubscribe(){}onUnsubscribe(){}},UR={setTimeout:(e,t)=>setTimeout(e,t),clearTimeout:e=>clearTimeout(e),setInterval:(e,t)=>setInterval(e,t),clearInterval:e=>clearInterval(e)},Us,rv,s3,WR=(s3=class{constructor(){we(this,Us,UR);we(this,rv,!1)}setTimeoutProvider(e){xe(this,Us,e)}setTimeout(e,t){return Z(this,Us).setTimeout(e,t)}clearTimeout(e){Z(this,Us).clearTimeout(e)}setInterval(e,t){return Z(this,Us).setInterval(e,t)}clearInterval(e){Z(this,Us).clearInterval(e)}},Us=new WeakMap,rv=new WeakMap,s3),Ya=new WR;function VR(e){setTimeout(e,0)}var Ni=typeof window>"u"||"Deno"in globalThis;function Yt(){}function HR(e,t){return typeof e=="function"?e(t):e}function Jg(e){return typeof e=="number"&&e>=0&&e!==1/0}function PC(e,t){return Math.max(e+(t||0)-Date.now(),0)}function ha(e,t){return typeof e=="function"?e(t):e}function Zr(e,t){return typeof e=="function"?e(t):e}function Hw(e,t){const{type:n="all",exact:s,fetchStatus:a,predicate:i,queryKey:o,stale:l}=e;if(o){if(s){if(t.queryHash!==m1(o,t.options))return!1}else if(!hd(t.queryKey,o))return!1}if(n!=="all"){const c=t.isActive();if(n==="active"&&!c||n==="inactive"&&c)return!1}return!(typeof l=="boolean"&&t.isStale()!==l||a&&a!==t.state.fetchStatus||i&&!i(t))}function Kw(e,t){const{exact:n,status:s,predicate:a,mutationKey:i}=e;if(i){if(!t.options.mutationKey)return!1;if(n){if(_i(t.options.mutationKey)!==_i(i))return!1}else if(!hd(t.options.mutationKey,i))return!1}return!(s&&t.state.status!==s||a&&!a(t))}function m1(e,t){return((t==null?void 0:t.queryKeyHashFn)||_i)(e)}function _i(e){return JSON.stringify(e,(t,n)=>Zg(n)?Object.keys(n).sort().reduce((s,a)=>(s[a]=n[a],s),{}):n)}function hd(e,t){return e===t?!0:typeof e!=typeof t?!1:e&&t&&typeof e=="object"&&typeof t=="object"?Object.keys(t).every(n=>hd(e[n],t[n])):!1}var KR=Object.prototype.hasOwnProperty;function h1(e,t){if(e===t)return e;const n=Gw(e)&&Gw(t);if(!n&&!(Zg(e)&&Zg(t)))return t;const a=(n?e:Object.keys(e)).length,i=n?t:Object.keys(t),o=i.length,l=n?new Array(o):{};let c=0;for(let d=0;d<o;d++){const m=n?d:i[d],u=e[m],h=t[m];if(u===h){l[m]=u,(n?d<a:KR.call(e,m))&&c++;continue}if(u===null||h===null||typeof u!="object"||typeof h!="object"){l[m]=h;continue}const f=h1(u,h);l[m]=f,f===u&&c++}return a===o&&c===a?e:l}function pd(e,t){if(!t||Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(e[n]!==t[n])return!1;return!0}function Gw(e){return Array.isArray(e)&&e.length===Object.keys(e).length}function Zg(e){if(!Qw(e))return!1;const t=e.constructor;if(t===void 0)return!0;const n=t.prototype;return!(!Qw(n)||!n.hasOwnProperty("isPrototypeOf")||Object.getPrototypeOf(e)!==Object.prototype)}function Qw(e){return Object.prototype.toString.call(e)==="[object Object]"}function GR(e){return new Promise(t=>{Ya.setTimeout(t,e)})}function ey(e,t,n){return typeof n.structuralSharing=="function"?n.structuralSharing(e,t):n.structuralSharing!==!1?h1(e,t):t}function QR(e,t,n=0){const s=[...e,t];return n&&s.length>n?s.slice(1):s}function YR(e,t,n=0){const s=[t,...e];return n&&s.length>n?s.slice(0,-1):s}var p1=Symbol();function EC(e,t){return!e.queryFn&&(t!=null&&t.initialPromise)?()=>t.initialPromise:!e.queryFn||e.queryFn===p1?()=>Promise.reject(new Error(`Missing queryFn: '${e.queryHash}'`)):e.queryFn}function f1(e,t){return typeof e=="function"?e(...t):!!e}function XR(e,t,n){let s=!1,a;return Object.defineProperty(e,"signal",{enumerable:!0,get:()=>(a??(a=t()),s||(s=!0,a.aborted?n():a.addEventListener("abort",n,{once:!0})),a)}),e}var ti,Ws,wo,a3,JR=(a3=class extends Mi{constructor(){super();we(this,ti);we(this,Ws);we(this,wo);xe(this,wo,t=>{if(!Ni&&window.addEventListener){const n=()=>t();return window.addEventListener("visibilitychange",n,!1),()=>{window.removeEventListener("visibilitychange",n)}}})}onSubscribe(){Z(this,Ws)||this.setEventListener(Z(this,wo))}onUnsubscribe(){var t;this.hasListeners()||((t=Z(this,Ws))==null||t.call(this),xe(this,Ws,void 0))}setEventListener(t){var n;xe(this,wo,t),(n=Z(this,Ws))==null||n.call(this),xe(this,Ws,t(s=>{typeof s=="boolean"?this.setFocused(s):this.onFocus()}))}setFocused(t){Z(this,ti)!==t&&(xe(this,ti,t),this.onFocus())}onFocus(){const t=this.isFocused();this.listeners.forEach(n=>{n(t)})}isFocused(){var t;return typeof Z(this,ti)=="boolean"?Z(this,ti):((t=globalThis.document)==null?void 0:t.visibilityState)!=="hidden"}},ti=new WeakMap,Ws=new WeakMap,wo=new WeakMap,a3),x1=new JR;function ty(){let e,t;const n=new Promise((a,i)=>{e=a,t=i});n.status="pending",n.catch(()=>{});function s(a){Object.assign(n,a),delete n.resolve,delete n.reject}return n.resolve=a=>{s({status:"fulfilled",value:a}),e(a)},n.reject=a=>{s({status:"rejected",reason:a}),t(a)},n}var ZR=VR;function eI(){let e=[],t=0,n=l=>{l()},s=l=>{l()},a=ZR;const i=l=>{t?e.push(l):a(()=>{n(l)})},o=()=>{const l=e;e=[],l.length&&a(()=>{s(()=>{l.forEach(c=>{n(c)})})})};return{batch:l=>{let c;t++;try{c=l()}finally{t--,t||o()}return c},batchCalls:l=>(...c)=>{i(()=>{l(...c)})},schedule:i,setNotifyFunction:l=>{n=l},setBatchNotifyFunction:l=>{s=l},setScheduler:l=>{a=l}}}var yt=eI(),No,Vs,_o,i3,tI=(i3=class extends Mi{constructor(){super();we(this,No,!0);we(this,Vs);we(this,_o);xe(this,_o,t=>{if(!Ni&&window.addEventListener){const n=()=>t(!0),s=()=>t(!1);return window.addEventListener("online",n,!1),window.addEventListener("offline",s,!1),()=>{window.removeEventListener("online",n),window.removeEventListener("offline",s)}}})}onSubscribe(){Z(this,Vs)||this.setEventListener(Z(this,_o))}onUnsubscribe(){var t;this.hasListeners()||((t=Z(this,Vs))==null||t.call(this),xe(this,Vs,void 0))}setEventListener(t){var n;xe(this,_o,t),(n=Z(this,Vs))==null||n.call(this),xe(this,Vs,t(this.setOnline.bind(this)))}setOnline(t){Z(this,No)!==t&&(xe(this,No,t),this.listeners.forEach(s=>{s(t)}))}isOnline(){return Z(this,No)}},No=new WeakMap,Vs=new WeakMap,_o=new WeakMap,i3),kh=new tI;function rI(e){return Math.min(1e3*2**e,3e4)}function OC(e){return(e??"online")==="online"?kh.isOnline():!0}var ry=class extends Error{constructor(e){super("CancelledError"),this.revert=e==null?void 0:e.revert,this.silent=e==null?void 0:e.silent}};function TC(e){let t=!1,n=0,s;const a=ty(),i=()=>a.status!=="pending",o=g=>{var x;if(!i()){const p=new ry(g);h(p),(x=e.onCancel)==null||x.call(e,p)}},l=()=>{t=!0},c=()=>{t=!1},d=()=>x1.isFocused()&&(e.networkMode==="always"||kh.isOnline())&&e.canRun(),m=()=>OC(e.networkMode)&&e.canRun(),u=g=>{i()||(s==null||s(),a.resolve(g))},h=g=>{i()||(s==null||s(),a.reject(g))},f=()=>new Promise(g=>{var x;s=p=>{(i()||d())&&g(p)},(x=e.onPause)==null||x.call(e)}).then(()=>{var g;s=void 0,i()||(g=e.onContinue)==null||g.call(e)}),b=()=>{if(i())return;let g;const x=n===0?e.initialPromise:void 0;try{g=x??e.fn()}catch(p){g=Promise.reject(p)}Promise.resolve(g).then(u).catch(p=>{var j;if(i())return;const y=e.retry??(Ni?0:3),v=e.retryDelay??rI,N=typeof v=="function"?v(n,p):v,w=y===!0||typeof y=="number"&&n<y||typeof y=="function"&&y(n,p);if(t||!w){h(p);return}n++,(j=e.onFail)==null||j.call(e,n,p),GR(N).then(()=>d()?void 0:f()).then(()=>{t?h(p):b()})})};return{promise:a,status:()=>a.status,cancel:o,continue:()=>(s==null||s(),a),cancelRetry:l,continueRetry:c,canStart:m,start:()=>(m()?b():f().then(b),a)}}var ri,o3,MC=(o3=class{constructor(){we(this,ri)}destroy(){this.clearGcTimeout()}scheduleGc(){this.clearGcTimeout(),Jg(this.gcTime)&&xe(this,ri,Ya.setTimeout(()=>{this.optionalRemove()},this.gcTime))}updateGcTime(e){this.gcTime=Math.max(this.gcTime||0,e??(Ni?1/0:5*60*1e3))}clearGcTimeout(){Z(this,ri)&&(Ya.clearTimeout(Z(this,ri)),xe(this,ri,void 0))}},ri=new WeakMap,o3),ni,ko,Xr,si,Tt,nu,ai,bn,Zn,l3,nI=(l3=class extends MC{constructor(t){super();we(this,bn);we(this,ni);we(this,ko);we(this,Xr);we(this,si);we(this,Tt);we(this,nu);we(this,ai);xe(this,ai,!1),xe(this,nu,t.defaultOptions),this.setOptions(t.options),this.observers=[],xe(this,si,t.client),xe(this,Xr,Z(this,si).getQueryCache()),this.queryKey=t.queryKey,this.queryHash=t.queryHash,xe(this,ni,Xw(this.options)),this.state=t.state??Z(this,ni),this.scheduleGc()}get meta(){return this.options.meta}get promise(){var t;return(t=Z(this,Tt))==null?void 0:t.promise}setOptions(t){if(this.options={...Z(this,nu),...t},this.updateGcTime(this.options.gcTime),this.state&&this.state.data===void 0){const n=Xw(this.options);n.data!==void 0&&(this.setState(Yw(n.data,n.dataUpdatedAt)),xe(this,ni,n))}}optionalRemove(){!this.observers.length&&this.state.fetchStatus==="idle"&&Z(this,Xr).remove(this)}setData(t,n){const s=ey(this.state.data,t,this.options);return Ee(this,bn,Zn).call(this,{data:s,type:"success",dataUpdatedAt:n==null?void 0:n.updatedAt,manual:n==null?void 0:n.manual}),s}setState(t,n){Ee(this,bn,Zn).call(this,{type:"setState",state:t,setStateOptions:n})}cancel(t){var s,a;const n=(s=Z(this,Tt))==null?void 0:s.promise;return(a=Z(this,Tt))==null||a.cancel(t),n?n.then(Yt).catch(Yt):Promise.resolve()}destroy(){super.destroy(),this.cancel({silent:!0})}reset(){this.destroy(),this.setState(Z(this,ni))}isActive(){return this.observers.some(t=>Zr(t.options.enabled,this)!==!1)}isDisabled(){return this.getObserversCount()>0?!this.isActive():this.options.queryFn===p1||this.state.dataUpdateCount+this.state.errorUpdateCount===0}isStatic(){return this.getObserversCount()>0?this.observers.some(t=>ha(t.options.staleTime,this)==="static"):!1}isStale(){return this.getObserversCount()>0?this.observers.some(t=>t.getCurrentResult().isStale):this.state.data===void 0||this.state.isInvalidated}isStaleByTime(t=0){return this.state.data===void 0?!0:t==="static"?!1:this.state.isInvalidated?!0:!PC(this.state.dataUpdatedAt,t)}onFocus(){var n;const t=this.observers.find(s=>s.shouldFetchOnWindowFocus());t==null||t.refetch({cancelRefetch:!1}),(n=Z(this,Tt))==null||n.continue()}onOnline(){var n;const t=this.observers.find(s=>s.shouldFetchOnReconnect());t==null||t.refetch({cancelRefetch:!1}),(n=Z(this,Tt))==null||n.continue()}addObserver(t){this.observers.includes(t)||(this.observers.push(t),this.clearGcTimeout(),Z(this,Xr).notify({type:"observerAdded",query:this,observer:t}))}removeObserver(t){this.observers.includes(t)&&(this.observers=this.observers.filter(n=>n!==t),this.observers.length||(Z(this,Tt)&&(Z(this,ai)?Z(this,Tt).cancel({revert:!0}):Z(this,Tt).cancelRetry()),this.scheduleGc()),Z(this,Xr).notify({type:"observerRemoved",query:this,observer:t}))}getObserversCount(){return this.observers.length}invalidate(){this.state.isInvalidated||Ee(this,bn,Zn).call(this,{type:"invalidate"})}async fetch(t,n){var c,d,m,u,h,f,b,g,x,p,y,v;if(this.state.fetchStatus!=="idle"&&((c=Z(this,Tt))==null?void 0:c.status())!=="rejected"){if(this.state.data!==void 0&&(n!=null&&n.cancelRefetch))this.cancel({silent:!0});else if(Z(this,Tt))return Z(this,Tt).continueRetry(),Z(this,Tt).promise}if(t&&this.setOptions(t),!this.options.queryFn){const N=this.observers.find(w=>w.options.queryFn);N&&this.setOptions(N.options)}const s=new AbortController,a=N=>{Object.defineProperty(N,"signal",{enumerable:!0,get:()=>(xe(this,ai,!0),s.signal)})},i=()=>{const N=EC(this.options,n),j=(()=>{const _={client:Z(this,si),queryKey:this.queryKey,meta:this.meta};return a(_),_})();return xe(this,ai,!1),this.options.persister?this.options.persister(N,j,this):N(j)},l=(()=>{const N={fetchOptions:n,options:this.options,queryKey:this.queryKey,client:Z(this,si),state:this.state,fetchFn:i};return a(N),N})();(d=this.options.behavior)==null||d.onFetch(l,this),xe(this,ko,this.state),(this.state.fetchStatus==="idle"||this.state.fetchMeta!==((m=l.fetchOptions)==null?void 0:m.meta))&&Ee(this,bn,Zn).call(this,{type:"fetch",meta:(u=l.fetchOptions)==null?void 0:u.meta}),xe(this,Tt,TC({initialPromise:n==null?void 0:n.initialPromise,fn:l.fetchFn,onCancel:N=>{N instanceof ry&&N.revert&&this.setState({...Z(this,ko),fetchStatus:"idle"}),s.abort()},onFail:(N,w)=>{Ee(this,bn,Zn).call(this,{type:"failed",failureCount:N,error:w})},onPause:()=>{Ee(this,bn,Zn).call(this,{type:"pause"})},onContinue:()=>{Ee(this,bn,Zn).call(this,{type:"continue"})},retry:l.options.retry,retryDelay:l.options.retryDelay,networkMode:l.options.networkMode,canRun:()=>!0}));try{const N=await Z(this,Tt).start();if(N===void 0)throw new Error(`${this.queryHash} data is undefined`);return this.setData(N),(f=(h=Z(this,Xr).config).onSuccess)==null||f.call(h,N,this),(g=(b=Z(this,Xr).config).onSettled)==null||g.call(b,N,this.state.error,this),N}catch(N){if(N instanceof ry){if(N.silent)return Z(this,Tt).promise;if(N.revert){if(this.state.data===void 0)throw N;return this.state.data}}throw Ee(this,bn,Zn).call(this,{type:"error",error:N}),(p=(x=Z(this,Xr).config).onError)==null||p.call(x,N,this),(v=(y=Z(this,Xr).config).onSettled)==null||v.call(y,this.state.data,N,this),N}finally{this.scheduleGc()}}},ni=new WeakMap,ko=new WeakMap,Xr=new WeakMap,si=new WeakMap,Tt=new WeakMap,nu=new WeakMap,ai=new WeakMap,bn=new WeakSet,Zn=function(t){const n=s=>{switch(t.type){case"failed":return{...s,fetchFailureCount:t.failureCount,fetchFailureReason:t.error};case"pause":return{...s,fetchStatus:"paused"};case"continue":return{...s,fetchStatus:"fetching"};case"fetch":return{...s,...LC(s.data,this.options),fetchMeta:t.meta??null};case"success":const a={...s,...Yw(t.data,t.dataUpdatedAt),dataUpdateCount:s.dataUpdateCount+1,...!t.manual&&{fetchStatus:"idle",fetchFailureCount:0,fetchFailureReason:null}};return xe(this,ko,t.manual?a:void 0),a;case"error":const i=t.error;return{...s,error:i,errorUpdateCount:s.errorUpdateCount+1,errorUpdatedAt:Date.now(),fetchFailureCount:s.fetchFailureCount+1,fetchFailureReason:i,fetchStatus:"idle",status:"error",isInvalidated:!0};case"invalidate":return{...s,isInvalidated:!0};case"setState":return{...s,...t.state}}};this.state=n(this.state),yt.batch(()=>{this.observers.forEach(s=>{s.onQueryUpdate()}),Z(this,Xr).notify({query:this,type:"updated",action:t})})},l3);function LC(e,t){return{fetchFailureCount:0,fetchFailureReason:null,fetchStatus:OC(t.networkMode)?"fetching":"paused",...e===void 0&&{error:null,status:"pending"}}}function Yw(e,t){return{data:e,dataUpdatedAt:t??Date.now(),error:null,isInvalidated:!1,status:"success"}}function Xw(e){const t=typeof e.initialData=="function"?e.initialData():e.initialData,n=t!==void 0,s=n?typeof e.initialDataUpdatedAt=="function"?e.initialDataUpdatedAt():e.initialDataUpdatedAt:0;return{data:t,dataUpdateCount:0,dataUpdatedAt:n?s??Date.now():0,error:null,errorUpdateCount:0,errorUpdatedAt:0,fetchFailureCount:0,fetchFailureReason:null,fetchMeta:null,isInvalidated:!1,status:n?"success":"pending",fetchStatus:"idle"}}var yr,ze,su,ar,ii,So,ns,Hs,au,Co,Ao,oi,li,Ks,Po,He,Cc,ny,sy,ay,iy,oy,ly,cy,$C,c3,g1=(c3=class extends Mi{constructor(t,n){super();we(this,He);we(this,yr);we(this,ze);we(this,su);we(this,ar);we(this,ii);we(this,So);we(this,ns);we(this,Hs);we(this,au);we(this,Co);we(this,Ao);we(this,oi);we(this,li);we(this,Ks);we(this,Po,new Set);this.options=n,xe(this,yr,t),xe(this,Hs,null),xe(this,ns,ty()),this.bindMethods(),this.setOptions(n)}bindMethods(){this.refetch=this.refetch.bind(this)}onSubscribe(){this.listeners.size===1&&(Z(this,ze).addObserver(this),Jw(Z(this,ze),this.options)?Ee(this,He,Cc).call(this):this.updateResult(),Ee(this,He,iy).call(this))}onUnsubscribe(){this.hasListeners()||this.destroy()}shouldFetchOnReconnect(){return dy(Z(this,ze),this.options,this.options.refetchOnReconnect)}shouldFetchOnWindowFocus(){return dy(Z(this,ze),this.options,this.options.refetchOnWindowFocus)}destroy(){this.listeners=new Set,Ee(this,He,oy).call(this),Ee(this,He,ly).call(this),Z(this,ze).removeObserver(this)}setOptions(t){const n=this.options,s=Z(this,ze);if(this.options=Z(this,yr).defaultQueryOptions(t),this.options.enabled!==void 0&&typeof this.options.enabled!="boolean"&&typeof this.options.enabled!="function"&&typeof Zr(this.options.enabled,Z(this,ze))!="boolean")throw new Error("Expected enabled to be a boolean or a callback that returns a boolean");Ee(this,He,cy).call(this),Z(this,ze).setOptions(this.options),n._defaulted&&!pd(this.options,n)&&Z(this,yr).getQueryCache().notify({type:"observerOptionsUpdated",query:Z(this,ze),observer:this});const a=this.hasListeners();a&&Zw(Z(this,ze),s,this.options,n)&&Ee(this,He,Cc).call(this),this.updateResult(),a&&(Z(this,ze)!==s||Zr(this.options.enabled,Z(this,ze))!==Zr(n.enabled,Z(this,ze))||ha(this.options.staleTime,Z(this,ze))!==ha(n.staleTime,Z(this,ze)))&&Ee(this,He,ny).call(this);const i=Ee(this,He,sy).call(this);a&&(Z(this,ze)!==s||Zr(this.options.enabled,Z(this,ze))!==Zr(n.enabled,Z(this,ze))||i!==Z(this,Ks))&&Ee(this,He,ay).call(this,i)}getOptimisticResult(t){const n=Z(this,yr).getQueryCache().build(Z(this,yr),t),s=this.createResult(n,t);return aI(this,s)&&(xe(this,ar,s),xe(this,So,this.options),xe(this,ii,Z(this,ze).state)),s}getCurrentResult(){return Z(this,ar)}trackResult(t,n){return new Proxy(t,{get:(s,a)=>(this.trackProp(a),n==null||n(a),a==="promise"&&(this.trackProp("data"),!this.options.experimental_prefetchInRender&&Z(this,ns).status==="pending"&&Z(this,ns).reject(new Error("experimental_prefetchInRender feature flag is not enabled"))),Reflect.get(s,a))})}trackProp(t){Z(this,Po).add(t)}getCurrentQuery(){return Z(this,ze)}refetch({...t}={}){return this.fetch({...t})}fetchOptimistic(t){const n=Z(this,yr).defaultQueryOptions(t),s=Z(this,yr).getQueryCache().build(Z(this,yr),n);return s.fetch().then(()=>this.createResult(s,n))}fetch(t){return Ee(this,He,Cc).call(this,{...t,cancelRefetch:t.cancelRefetch??!0}).then(()=>(this.updateResult(),Z(this,ar)))}createResult(t,n){var T;const s=Z(this,ze),a=this.options,i=Z(this,ar),o=Z(this,ii),l=Z(this,So),d=t!==s?t.state:Z(this,su),{state:m}=t;let u={...m},h=!1,f;if(n._optimisticResults){const A=this.hasListeners(),E=!A&&Jw(t,n),R=A&&Zw(t,s,n,a);(E||R)&&(u={...u,...LC(m.data,t.options)}),n._optimisticResults==="isRestoring"&&(u.fetchStatus="idle")}let{error:b,errorUpdatedAt:g,status:x}=u;f=u.data;let p=!1;if(n.placeholderData!==void 0&&f===void 0&&x==="pending"){let A;i!=null&&i.isPlaceholderData&&n.placeholderData===(l==null?void 0:l.placeholderData)?(A=i.data,p=!0):A=typeof n.placeholderData=="function"?n.placeholderData((T=Z(this,Ao))==null?void 0:T.state.data,Z(this,Ao)):n.placeholderData,A!==void 0&&(x="success",f=ey(i==null?void 0:i.data,A,n),h=!0)}if(n.select&&f!==void 0&&!p)if(i&&f===(o==null?void 0:o.data)&&n.select===Z(this,au))f=Z(this,Co);else try{xe(this,au,n.select),f=n.select(f),f=ey(i==null?void 0:i.data,f,n),xe(this,Co,f),xe(this,Hs,null)}catch(A){xe(this,Hs,A)}Z(this,Hs)&&(b=Z(this,Hs),f=Z(this,Co),g=Date.now(),x="error");const y=u.fetchStatus==="fetching",v=x==="pending",N=x==="error",w=v&&y,j=f!==void 0,S={status:x,fetchStatus:u.fetchStatus,isPending:v,isSuccess:x==="success",isError:N,isInitialLoading:w,isLoading:w,data:f,dataUpdatedAt:u.dataUpdatedAt,error:b,errorUpdatedAt:g,failureCount:u.fetchFailureCount,failureReason:u.fetchFailureReason,errorUpdateCount:u.errorUpdateCount,isFetched:u.dataUpdateCount>0||u.errorUpdateCount>0,isFetchedAfterMount:u.dataUpdateCount>d.dataUpdateCount||u.errorUpdateCount>d.errorUpdateCount,isFetching:y,isRefetching:y&&!v,isLoadingError:N&&!j,isPaused:u.fetchStatus==="paused",isPlaceholderData:h,isRefetchError:N&&j,isStale:y1(t,n),refetch:this.refetch,promise:Z(this,ns),isEnabled:Zr(n.enabled,t)!==!1};if(this.options.experimental_prefetchInRender){const A=I=>{S.status==="error"?I.reject(S.error):S.data!==void 0&&I.resolve(S.data)},E=()=>{const I=xe(this,ns,S.promise=ty());A(I)},R=Z(this,ns);switch(R.status){case"pending":t.queryHash===s.queryHash&&A(R);break;case"fulfilled":(S.status==="error"||S.data!==R.value)&&E();break;case"rejected":(S.status!=="error"||S.error!==R.reason)&&E();break}}return S}updateResult(){const t=Z(this,ar),n=this.createResult(Z(this,ze),this.options);if(xe(this,ii,Z(this,ze).state),xe(this,So,this.options),Z(this,ii).data!==void 0&&xe(this,Ao,Z(this,ze)),pd(n,t))return;xe(this,ar,n);const s=()=>{if(!t)return!0;const{notifyOnChangeProps:a}=this.options,i=typeof a=="function"?a():a;if(i==="all"||!i&&!Z(this,Po).size)return!0;const o=new Set(i??Z(this,Po));return this.options.throwOnError&&o.add("error"),Object.keys(Z(this,ar)).some(l=>{const c=l;return Z(this,ar)[c]!==t[c]&&o.has(c)})};Ee(this,He,$C).call(this,{listeners:s()})}onQueryUpdate(){this.updateResult(),this.hasListeners()&&Ee(this,He,iy).call(this)}},yr=new WeakMap,ze=new WeakMap,su=new WeakMap,ar=new WeakMap,ii=new WeakMap,So=new WeakMap,ns=new WeakMap,Hs=new WeakMap,au=new WeakMap,Co=new WeakMap,Ao=new WeakMap,oi=new WeakMap,li=new WeakMap,Ks=new WeakMap,Po=new WeakMap,He=new WeakSet,Cc=function(t){Ee(this,He,cy).call(this);let n=Z(this,ze).fetch(this.options,t);return t!=null&&t.throwOnError||(n=n.catch(Yt)),n},ny=function(){Ee(this,He,oy).call(this);const t=ha(this.options.staleTime,Z(this,ze));if(Ni||Z(this,ar).isStale||!Jg(t))return;const s=PC(Z(this,ar).dataUpdatedAt,t)+1;xe(this,oi,Ya.setTimeout(()=>{Z(this,ar).isStale||this.updateResult()},s))},sy=function(){return(typeof this.options.refetchInterval=="function"?this.options.refetchInterval(Z(this,ze)):this.options.refetchInterval)??!1},ay=function(t){Ee(this,He,ly).call(this),xe(this,Ks,t),!(Ni||Zr(this.options.enabled,Z(this,ze))===!1||!Jg(Z(this,Ks))||Z(this,Ks)===0)&&xe(this,li,Ya.setInterval(()=>{(this.options.refetchIntervalInBackground||x1.isFocused())&&Ee(this,He,Cc).call(this)},Z(this,Ks)))},iy=function(){Ee(this,He,ny).call(this),Ee(this,He,ay).call(this,Ee(this,He,sy).call(this))},oy=function(){Z(this,oi)&&(Ya.clearTimeout(Z(this,oi)),xe(this,oi,void 0))},ly=function(){Z(this,li)&&(Ya.clearInterval(Z(this,li)),xe(this,li,void 0))},cy=function(){const t=Z(this,yr).getQueryCache().build(Z(this,yr),this.options);if(t===Z(this,ze))return;const n=Z(this,ze);xe(this,ze,t),xe(this,su,t.state),this.hasListeners()&&(n==null||n.removeObserver(this),t.addObserver(this))},$C=function(t){yt.batch(()=>{t.listeners&&this.listeners.forEach(n=>{n(Z(this,ar))}),Z(this,yr).getQueryCache().notify({query:Z(this,ze),type:"observerResultsUpdated"})})},c3);function sI(e,t){return Zr(t.enabled,e)!==!1&&e.state.data===void 0&&!(e.state.status==="error"&&t.retryOnMount===!1)}function Jw(e,t){return sI(e,t)||e.state.data!==void 0&&dy(e,t,t.refetchOnMount)}function dy(e,t,n){if(Zr(t.enabled,e)!==!1&&ha(t.staleTime,e)!=="static"){const s=typeof n=="function"?n(e):n;return s==="always"||s!==!1&&y1(e,t)}return!1}function Zw(e,t,n,s){return(e!==t||Zr(s.enabled,e)===!1)&&(!n.suspense||e.state.status!=="error")&&y1(e,n)}function y1(e,t){return Zr(t.enabled,e)!==!1&&e.isStaleByTime(ha(t.staleTime,e))}function aI(e,t){return!pd(e.getCurrentResult(),t)}function eN(e){return{onFetch:(t,n)=>{var m,u,h,f,b;const s=t.options,a=(h=(u=(m=t.fetchOptions)==null?void 0:m.meta)==null?void 0:u.fetchMore)==null?void 0:h.direction,i=((f=t.state.data)==null?void 0:f.pages)||[],o=((b=t.state.data)==null?void 0:b.pageParams)||[];let l={pages:[],pageParams:[]},c=0;const d=async()=>{let g=!1;const x=v=>{XR(v,()=>t.signal,()=>g=!0)},p=EC(t.options,t.fetchOptions),y=async(v,N,w)=>{if(g)return Promise.reject();if(N==null&&v.pages.length)return Promise.resolve(v);const _=(()=>{const E={client:t.client,queryKey:t.queryKey,pageParam:N,direction:w?"backward":"forward",meta:t.options.meta};return x(E),E})(),S=await p(_),{maxPages:T}=t.options,A=w?YR:QR;return{pages:A(v.pages,S,T),pageParams:A(v.pageParams,N,T)}};if(a&&i.length){const v=a==="backward",N=v?iI:tN,w={pages:i,pageParams:o},j=N(s,w);l=await y(w,j,v)}else{const v=e??i.length;do{const N=c===0?o[0]??s.initialPageParam:tN(s,l);if(c>0&&N==null)break;l=await y(l,N),c++}while(c<v)}return l};t.options.persister?t.fetchFn=()=>{var g,x;return(x=(g=t.options).persister)==null?void 0:x.call(g,d,{client:t.client,queryKey:t.queryKey,meta:t.options.meta,signal:t.signal},n)}:t.fetchFn=d}}}function tN(e,{pages:t,pageParams:n}){const s=t.length-1;return t.length>0?e.getNextPageParam(t[s],t,n[s],n):void 0}function iI(e,{pages:t,pageParams:n}){var s;return t.length>0?(s=e.getPreviousPageParam)==null?void 0:s.call(e,t[0],t,n[0],n):void 0}var iu,Dn,ir,ci,Fn,Ls,d3,oI=(d3=class extends MC{constructor(t){super();we(this,Fn);we(this,iu);we(this,Dn);we(this,ir);we(this,ci);xe(this,iu,t.client),this.mutationId=t.mutationId,xe(this,ir,t.mutationCache),xe(this,Dn,[]),this.state=t.state||RC(),this.setOptions(t.options),this.scheduleGc()}setOptions(t){this.options=t,this.updateGcTime(this.options.gcTime)}get meta(){return this.options.meta}addObserver(t){Z(this,Dn).includes(t)||(Z(this,Dn).push(t),this.clearGcTimeout(),Z(this,ir).notify({type:"observerAdded",mutation:this,observer:t}))}removeObserver(t){xe(this,Dn,Z(this,Dn).filter(n=>n!==t)),this.scheduleGc(),Z(this,ir).notify({type:"observerRemoved",mutation:this,observer:t})}optionalRemove(){Z(this,Dn).length||(this.state.status==="pending"?this.scheduleGc():Z(this,ir).remove(this))}continue(){var t;return((t=Z(this,ci))==null?void 0:t.continue())??this.execute(this.state.variables)}async execute(t){var o,l,c,d,m,u,h,f,b,g,x,p,y,v,N,w,j,_,S,T;const n=()=>{Ee(this,Fn,Ls).call(this,{type:"continue"})},s={client:Z(this,iu),meta:this.options.meta,mutationKey:this.options.mutationKey};xe(this,ci,TC({fn:()=>this.options.mutationFn?this.options.mutationFn(t,s):Promise.reject(new Error("No mutationFn found")),onFail:(A,E)=>{Ee(this,Fn,Ls).call(this,{type:"failed",failureCount:A,error:E})},onPause:()=>{Ee(this,Fn,Ls).call(this,{type:"pause"})},onContinue:n,retry:this.options.retry??0,retryDelay:this.options.retryDelay,networkMode:this.options.networkMode,canRun:()=>Z(this,ir).canRun(this)}));const a=this.state.status==="pending",i=!Z(this,ci).canStart();try{if(a)n();else{Ee(this,Fn,Ls).call(this,{type:"pending",variables:t,isPaused:i}),await((l=(o=Z(this,ir).config).onMutate)==null?void 0:l.call(o,t,this,s));const E=await((d=(c=this.options).onMutate)==null?void 0:d.call(c,t,s));E!==this.state.context&&Ee(this,Fn,Ls).call(this,{type:"pending",context:E,variables:t,isPaused:i})}const A=await Z(this,ci).start();return await((u=(m=Z(this,ir).config).onSuccess)==null?void 0:u.call(m,A,t,this.state.context,this,s)),await((f=(h=this.options).onSuccess)==null?void 0:f.call(h,A,t,this.state.context,s)),await((g=(b=Z(this,ir).config).onSettled)==null?void 0:g.call(b,A,null,this.state.variables,this.state.context,this,s)),await((p=(x=this.options).onSettled)==null?void 0:p.call(x,A,null,t,this.state.context,s)),Ee(this,Fn,Ls).call(this,{type:"success",data:A}),A}catch(A){try{await((v=(y=Z(this,ir).config).onError)==null?void 0:v.call(y,A,t,this.state.context,this,s))}catch(E){Promise.reject(E)}try{await((w=(N=this.options).onError)==null?void 0:w.call(N,A,t,this.state.context,s))}catch(E){Promise.reject(E)}try{await((_=(j=Z(this,ir).config).onSettled)==null?void 0:_.call(j,void 0,A,this.state.variables,this.state.context,this,s))}catch(E){Promise.reject(E)}try{await((T=(S=this.options).onSettled)==null?void 0:T.call(S,void 0,A,t,this.state.context,s))}catch(E){Promise.reject(E)}throw Ee(this,Fn,Ls).call(this,{type:"error",error:A}),A}finally{Z(this,ir).runNext(this)}}},iu=new WeakMap,Dn=new WeakMap,ir=new WeakMap,ci=new WeakMap,Fn=new WeakSet,Ls=function(t){const n=s=>{switch(t.type){case"failed":return{...s,failureCount:t.failureCount,failureReason:t.error};case"pause":return{...s,isPaused:!0};case"continue":return{...s,isPaused:!1};case"pending":return{...s,context:t.context,data:void 0,failureCount:0,failureReason:null,error:null,isPaused:t.isPaused,status:"pending",variables:t.variables,submittedAt:Date.now()};case"success":return{...s,data:t.data,failureCount:0,failureReason:null,error:null,status:"success",isPaused:!1};case"error":return{...s,data:void 0,error:t.error,failureCount:s.failureCount+1,failureReason:t.error,isPaused:!1,status:"error"}}};this.state=n(this.state),yt.batch(()=>{Z(this,Dn).forEach(s=>{s.onMutationUpdate(t)}),Z(this,ir).notify({mutation:this,type:"updated",action:t})})},d3);function RC(){return{context:void 0,data:void 0,error:null,failureCount:0,failureReason:null,isPaused:!1,status:"idle",variables:void 0,submittedAt:0}}var ss,vn,ou,u3,lI=(u3=class extends Mi{constructor(t={}){super();we(this,ss);we(this,vn);we(this,ou);this.config=t,xe(this,ss,new Set),xe(this,vn,new Map),xe(this,ou,0)}build(t,n,s){const a=new oI({client:t,mutationCache:this,mutationId:++Ru(this,ou)._,options:t.defaultMutationOptions(n),state:s});return this.add(a),a}add(t){Z(this,ss).add(t);const n=sm(t);if(typeof n=="string"){const s=Z(this,vn).get(n);s?s.push(t):Z(this,vn).set(n,[t])}this.notify({type:"added",mutation:t})}remove(t){if(Z(this,ss).delete(t)){const n=sm(t);if(typeof n=="string"){const s=Z(this,vn).get(n);if(s)if(s.length>1){const a=s.indexOf(t);a!==-1&&s.splice(a,1)}else s[0]===t&&Z(this,vn).delete(n)}}this.notify({type:"removed",mutation:t})}canRun(t){const n=sm(t);if(typeof n=="string"){const s=Z(this,vn).get(n),a=s==null?void 0:s.find(i=>i.state.status==="pending");return!a||a===t}else return!0}runNext(t){var s;const n=sm(t);if(typeof n=="string"){const a=(s=Z(this,vn).get(n))==null?void 0:s.find(i=>i!==t&&i.state.isPaused);return(a==null?void 0:a.continue())??Promise.resolve()}else return Promise.resolve()}clear(){yt.batch(()=>{Z(this,ss).forEach(t=>{this.notify({type:"removed",mutation:t})}),Z(this,ss).clear(),Z(this,vn).clear()})}getAll(){return Array.from(Z(this,ss))}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Kw(n,s))}findAll(t={}){return this.getAll().filter(n=>Kw(t,n))}notify(t){yt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}resumePausedMutations(){const t=this.getAll().filter(n=>n.state.isPaused);return yt.batch(()=>Promise.all(t.map(n=>n.continue().catch(Yt))))}},ss=new WeakMap,vn=new WeakMap,ou=new WeakMap,u3);function sm(e){var t;return(t=e.options.scope)==null?void 0:t.id}var as,Gs,br,is,xs,Hm,uy,m3,cI=(m3=class extends Mi{constructor(n,s){super();we(this,xs);we(this,as);we(this,Gs);we(this,br);we(this,is);xe(this,as,n),this.setOptions(s),this.bindMethods(),Ee(this,xs,Hm).call(this)}bindMethods(){this.mutate=this.mutate.bind(this),this.reset=this.reset.bind(this)}setOptions(n){var a;const s=this.options;this.options=Z(this,as).defaultMutationOptions(n),pd(this.options,s)||Z(this,as).getMutationCache().notify({type:"observerOptionsUpdated",mutation:Z(this,br),observer:this}),s!=null&&s.mutationKey&&this.options.mutationKey&&_i(s.mutationKey)!==_i(this.options.mutationKey)?this.reset():((a=Z(this,br))==null?void 0:a.state.status)==="pending"&&Z(this,br).setOptions(this.options)}onUnsubscribe(){var n;this.hasListeners()||(n=Z(this,br))==null||n.removeObserver(this)}onMutationUpdate(n){Ee(this,xs,Hm).call(this),Ee(this,xs,uy).call(this,n)}getCurrentResult(){return Z(this,Gs)}reset(){var n;(n=Z(this,br))==null||n.removeObserver(this),xe(this,br,void 0),Ee(this,xs,Hm).call(this),Ee(this,xs,uy).call(this)}mutate(n,s){var a;return xe(this,is,s),(a=Z(this,br))==null||a.removeObserver(this),xe(this,br,Z(this,as).getMutationCache().build(Z(this,as),this.options)),Z(this,br).addObserver(this),Z(this,br).execute(n)}},as=new WeakMap,Gs=new WeakMap,br=new WeakMap,is=new WeakMap,xs=new WeakSet,Hm=function(){var s;const n=((s=Z(this,br))==null?void 0:s.state)??RC();xe(this,Gs,{...n,isPending:n.status==="pending",isSuccess:n.status==="success",isError:n.status==="error",isIdle:n.status==="idle",mutate:this.mutate,reset:this.reset})},uy=function(n){yt.batch(()=>{var s,a,i,o,l,c,d,m;if(Z(this,is)&&this.hasListeners()){const u=Z(this,Gs).variables,h=Z(this,Gs).context,f={client:Z(this,as),meta:this.options.meta,mutationKey:this.options.mutationKey};if((n==null?void 0:n.type)==="success"){try{(a=(s=Z(this,is)).onSuccess)==null||a.call(s,n.data,u,h,f)}catch(b){Promise.reject(b)}try{(o=(i=Z(this,is)).onSettled)==null||o.call(i,n.data,null,u,h,f)}catch(b){Promise.reject(b)}}else if((n==null?void 0:n.type)==="error"){try{(c=(l=Z(this,is)).onError)==null||c.call(l,n.error,u,h,f)}catch(b){Promise.reject(b)}try{(m=(d=Z(this,is)).onSettled)==null||m.call(d,void 0,n.error,u,h,f)}catch(b){Promise.reject(b)}}}this.listeners.forEach(u=>{u(Z(this,Gs))})})},m3);function rN(e,t){const n=new Set(t);return e.filter(s=>!n.has(s))}function dI(e,t,n){const s=e.slice(0);return s[t]=n,s}var Eo,Mr,Oo,To,Jr,Qs,lu,cu,du,Vt,my,hy,py,fy,xy,h3,uI=(h3=class extends Mi{constructor(t,n,s){super();we(this,Vt);we(this,Eo);we(this,Mr);we(this,Oo);we(this,To);we(this,Jr);we(this,Qs);we(this,lu);we(this,cu);we(this,du,[]);xe(this,Eo,t),xe(this,To,s),xe(this,Oo,[]),xe(this,Jr,[]),xe(this,Mr,[]),this.setQueries(n)}onSubscribe(){this.listeners.size===1&&Z(this,Jr).forEach(t=>{t.subscribe(n=>{Ee(this,Vt,fy).call(this,t,n)})})}onUnsubscribe(){this.listeners.size||this.destroy()}destroy(){this.listeners=new Set,Z(this,Jr).forEach(t=>{t.destroy()})}setQueries(t,n){xe(this,Oo,t),xe(this,To,n),yt.batch(()=>{const s=Z(this,Jr),a=Ee(this,Vt,py).call(this,Z(this,Oo));a.forEach(u=>u.observer.setOptions(u.defaultedQueryOptions));const i=a.map(u=>u.observer),o=i.map(u=>u.getCurrentResult()),l=s.length!==i.length,c=i.some((u,h)=>u!==s[h]),d=l||c,m=d?!0:o.some((u,h)=>{const f=Z(this,Mr)[h];return!f||!pd(u,f)});!d&&!m||(d&&(xe(this,du,a),xe(this,Jr,i)),xe(this,Mr,o),this.hasListeners()&&(d&&(rN(s,i).forEach(u=>{u.destroy()}),rN(i,s).forEach(u=>{u.subscribe(h=>{Ee(this,Vt,fy).call(this,u,h)})})),Ee(this,Vt,xy).call(this)))})}getCurrentResult(){return Z(this,Mr)}getQueries(){return Z(this,Jr).map(t=>t.getCurrentQuery())}getObservers(){return Z(this,Jr)}getOptimisticResult(t,n){const s=Ee(this,Vt,py).call(this,t),a=s.map(i=>i.observer.getOptimisticResult(i.defaultedQueryOptions));return[a,i=>Ee(this,Vt,hy).call(this,i??a,n),()=>Ee(this,Vt,my).call(this,a,s)]}},Eo=new WeakMap,Mr=new WeakMap,Oo=new WeakMap,To=new WeakMap,Jr=new WeakMap,Qs=new WeakMap,lu=new WeakMap,cu=new WeakMap,du=new WeakMap,Vt=new WeakSet,my=function(t,n){return n.map((s,a)=>{const i=t[a];return s.defaultedQueryOptions.notifyOnChangeProps?i:s.observer.trackResult(i,o=>{n.forEach(l=>{l.observer.trackProp(o)})})})},hy=function(t,n){return n?((!Z(this,Qs)||Z(this,Mr)!==Z(this,cu)||n!==Z(this,lu))&&(xe(this,lu,n),xe(this,cu,Z(this,Mr)),xe(this,Qs,h1(Z(this,Qs),n(t)))),Z(this,Qs)):t},py=function(t){const n=new Map;Z(this,Jr).forEach(a=>{const i=a.options.queryHash;if(!i)return;const o=n.get(i);o?o.push(a):n.set(i,[a])});const s=[];return t.forEach(a=>{var c;const i=Z(this,Eo).defaultQueryOptions(a),l=((c=n.get(i.queryHash))==null?void 0:c.shift())??new g1(Z(this,Eo),i);s.push({defaultedQueryOptions:i,observer:l})}),s},fy=function(t,n){const s=Z(this,Jr).indexOf(t);s!==-1&&(xe(this,Mr,dI(Z(this,Mr),s,n)),Ee(this,Vt,xy).call(this))},xy=function(){var t;if(this.hasListeners()){const n=Z(this,Qs),s=Ee(this,Vt,my).call(this,Z(this,Mr),Z(this,du)),a=Ee(this,Vt,hy).call(this,s,(t=Z(this,To))==null?void 0:t.combine);n!==a&&yt.batch(()=>{this.listeners.forEach(i=>{i(Z(this,Mr))})})}},h3),Bn,p3,mI=(p3=class extends Mi{constructor(t={}){super();we(this,Bn);this.config=t,xe(this,Bn,new Map)}build(t,n,s){const a=n.queryKey,i=n.queryHash??m1(a,n);let o=this.get(i);return o||(o=new nI({client:t,queryKey:a,queryHash:i,options:t.defaultQueryOptions(n),state:s,defaultOptions:t.getQueryDefaults(a)}),this.add(o)),o}add(t){Z(this,Bn).has(t.queryHash)||(Z(this,Bn).set(t.queryHash,t),this.notify({type:"added",query:t}))}remove(t){const n=Z(this,Bn).get(t.queryHash);n&&(t.destroy(),n===t&&Z(this,Bn).delete(t.queryHash),this.notify({type:"removed",query:t}))}clear(){yt.batch(()=>{this.getAll().forEach(t=>{this.remove(t)})})}get(t){return Z(this,Bn).get(t)}getAll(){return[...Z(this,Bn).values()]}find(t){const n={exact:!0,...t};return this.getAll().find(s=>Hw(n,s))}findAll(t={}){const n=this.getAll();return Object.keys(t).length>0?n.filter(s=>Hw(t,s)):n}notify(t){yt.batch(()=>{this.listeners.forEach(n=>{n(t)})})}onFocus(){yt.batch(()=>{this.getAll().forEach(t=>{t.onFocus()})})}onOnline(){yt.batch(()=>{this.getAll().forEach(t=>{t.onOnline()})})}},Bn=new WeakMap,p3),ft,Ys,Xs,Mo,Lo,Js,$o,Ro,f3,hI=(f3=class{constructor(e={}){we(this,ft);we(this,Ys);we(this,Xs);we(this,Mo);we(this,Lo);we(this,Js);we(this,$o);we(this,Ro);xe(this,ft,e.queryCache||new mI),xe(this,Ys,e.mutationCache||new lI),xe(this,Xs,e.defaultOptions||{}),xe(this,Mo,new Map),xe(this,Lo,new Map),xe(this,Js,0)}mount(){Ru(this,Js)._++,Z(this,Js)===1&&(xe(this,$o,x1.subscribe(async e=>{e&&(await this.resumePausedMutations(),Z(this,ft).onFocus())})),xe(this,Ro,kh.subscribe(async e=>{e&&(await this.resumePausedMutations(),Z(this,ft).onOnline())})))}unmount(){var e,t;Ru(this,Js)._--,Z(this,Js)===0&&((e=Z(this,$o))==null||e.call(this),xe(this,$o,void 0),(t=Z(this,Ro))==null||t.call(this),xe(this,Ro,void 0))}isFetching(e){return Z(this,ft).findAll({...e,fetchStatus:"fetching"}).length}isMutating(e){return Z(this,Ys).findAll({...e,status:"pending"}).length}getQueryData(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Z(this,ft).get(t.queryHash))==null?void 0:n.state.data}ensureQueryData(e){const t=this.defaultQueryOptions(e),n=Z(this,ft).build(this,t),s=n.state.data;return s===void 0?this.fetchQuery(e):(e.revalidateIfStale&&n.isStaleByTime(ha(t.staleTime,n))&&this.prefetchQuery(t),Promise.resolve(s))}getQueriesData(e){return Z(this,ft).findAll(e).map(({queryKey:t,state:n})=>{const s=n.data;return[t,s]})}setQueryData(e,t,n){const s=this.defaultQueryOptions({queryKey:e}),a=Z(this,ft).get(s.queryHash),i=a==null?void 0:a.state.data,o=HR(t,i);if(o!==void 0)return Z(this,ft).build(this,s).setData(o,{...n,manual:!0})}setQueriesData(e,t,n){return yt.batch(()=>Z(this,ft).findAll(e).map(({queryKey:s})=>[s,this.setQueryData(s,t,n)]))}getQueryState(e){var n;const t=this.defaultQueryOptions({queryKey:e});return(n=Z(this,ft).get(t.queryHash))==null?void 0:n.state}removeQueries(e){const t=Z(this,ft);yt.batch(()=>{t.findAll(e).forEach(n=>{t.remove(n)})})}resetQueries(e,t){const n=Z(this,ft);return yt.batch(()=>(n.findAll(e).forEach(s=>{s.reset()}),this.refetchQueries({type:"active",...e},t)))}cancelQueries(e,t={}){const n={revert:!0,...t},s=yt.batch(()=>Z(this,ft).findAll(e).map(a=>a.cancel(n)));return Promise.all(s).then(Yt).catch(Yt)}invalidateQueries(e,t={}){return yt.batch(()=>(Z(this,ft).findAll(e).forEach(n=>{n.invalidate()}),(e==null?void 0:e.refetchType)==="none"?Promise.resolve():this.refetchQueries({...e,type:(e==null?void 0:e.refetchType)??(e==null?void 0:e.type)??"active"},t)))}refetchQueries(e,t={}){const n={...t,cancelRefetch:t.cancelRefetch??!0},s=yt.batch(()=>Z(this,ft).findAll(e).filter(a=>!a.isDisabled()&&!a.isStatic()).map(a=>{let i=a.fetch(void 0,n);return n.throwOnError||(i=i.catch(Yt)),a.state.fetchStatus==="paused"?Promise.resolve():i}));return Promise.all(s).then(Yt)}fetchQuery(e){const t=this.defaultQueryOptions(e);t.retry===void 0&&(t.retry=!1);const n=Z(this,ft).build(this,t);return n.isStaleByTime(ha(t.staleTime,n))?n.fetch(t):Promise.resolve(n.state.data)}prefetchQuery(e){return this.fetchQuery(e).then(Yt).catch(Yt)}fetchInfiniteQuery(e){return e.behavior=eN(e.pages),this.fetchQuery(e)}prefetchInfiniteQuery(e){return this.fetchInfiniteQuery(e).then(Yt).catch(Yt)}ensureInfiniteQueryData(e){return e.behavior=eN(e.pages),this.ensureQueryData(e)}resumePausedMutations(){return kh.isOnline()?Z(this,Ys).resumePausedMutations():Promise.resolve()}getQueryCache(){return Z(this,ft)}getMutationCache(){return Z(this,Ys)}getDefaultOptions(){return Z(this,Xs)}setDefaultOptions(e){xe(this,Xs,e)}setQueryDefaults(e,t){Z(this,Mo).set(_i(e),{queryKey:e,defaultOptions:t})}getQueryDefaults(e){const t=[...Z(this,Mo).values()],n={};return t.forEach(s=>{hd(e,s.queryKey)&&Object.assign(n,s.defaultOptions)}),n}setMutationDefaults(e,t){Z(this,Lo).set(_i(e),{mutationKey:e,defaultOptions:t})}getMutationDefaults(e){const t=[...Z(this,Lo).values()],n={};return t.forEach(s=>{hd(e,s.mutationKey)&&Object.assign(n,s.defaultOptions)}),n}defaultQueryOptions(e){if(e._defaulted)return e;const t={...Z(this,Xs).queries,...this.getQueryDefaults(e.queryKey),...e,_defaulted:!0};return t.queryHash||(t.queryHash=m1(t.queryKey,t)),t.refetchOnReconnect===void 0&&(t.refetchOnReconnect=t.networkMode!=="always"),t.throwOnError===void 0&&(t.throwOnError=!!t.suspense),!t.networkMode&&t.persister&&(t.networkMode="offlineFirst"),t.queryFn===p1&&(t.enabled=!1),t}defaultMutationOptions(e){return e!=null&&e._defaulted?e:{...Z(this,Xs).mutations,...(e==null?void 0:e.mutationKey)&&this.getMutationDefaults(e.mutationKey),...e,_defaulted:!0}}clear(){Z(this,ft).clear(),Z(this,Ys).clear()}},ft=new WeakMap,Ys=new WeakMap,Xs=new WeakMap,Mo=new WeakMap,Lo=new WeakMap,Js=new WeakMap,$o=new WeakMap,Ro=new WeakMap,f3),IC=k.createContext(void 0),et=e=>{const t=k.useContext(IC);if(!t)throw new Error("No QueryClient set, use QueryClientProvider to set one");return t},pI=({client:e,children:t})=>(k.useEffect(()=>(e.mount(),()=>{e.unmount()}),[e]),r.jsx(IC.Provider,{value:e,children:t})),DC=k.createContext(!1),FC=()=>k.useContext(DC);DC.Provider;function fI(){let e=!1;return{clearReset:()=>{e=!1},reset:()=>{e=!0},isReset:()=>e}}var xI=k.createContext(fI()),BC=()=>k.useContext(xI),zC=(e,t,n)=>{const s=n!=null&&n.state.error&&typeof e.throwOnError=="function"?f1(e.throwOnError,[n.state.error,n]):e.throwOnError;(e.suspense||e.experimental_prefetchInRender||s)&&(t.isReset()||(e.retryOnMount=!1))},qC=e=>{k.useEffect(()=>{e.clearReset()},[e])},UC=({result:e,errorResetBoundary:t,throwOnError:n,query:s,suspense:a})=>e.isError&&!t.isReset()&&!e.isFetching&&s&&(a&&e.data===void 0||f1(n,[e.error,s])),WC=e=>{if(e.suspense){const n=a=>a==="static"?a:Math.max(a??1e3,1e3),s=e.staleTime;e.staleTime=typeof s=="function"?(...a)=>n(s(...a)):n(s),typeof e.gcTime=="number"&&(e.gcTime=Math.max(e.gcTime,1e3))}},VC=(e,t)=>e.isLoading&&e.isFetching&&!t,gy=(e,t)=>(e==null?void 0:e.suspense)&&t.isPending,Sh=(e,t,n)=>t.fetchOptimistic(e).catch(()=>{n.clearReset()});function gI({queries:e,...t},n){const s=et(),a=FC(),i=BC(),o=k.useMemo(()=>e.map(g=>{const x=s.defaultQueryOptions(g);return x._optimisticResults=a?"isRestoring":"optimistic",x}),[e,s,a]);o.forEach(g=>{WC(g);const x=s.getQueryCache().get(g.queryHash);zC(g,i,x)}),qC(i);const[l]=k.useState(()=>new uI(s,o,t)),[c,d,m]=l.getOptimisticResult(o,t.combine),u=!a&&t.subscribed!==!1;k.useSyncExternalStore(k.useCallback(g=>u?l.subscribe(yt.batchCalls(g)):Yt,[l,u]),()=>l.getCurrentResult(),()=>l.getCurrentResult()),k.useEffect(()=>{l.setQueries(o,t)},[o,t,l]);const f=c.some((g,x)=>gy(o[x],g))?c.flatMap((g,x)=>{const p=o[x];if(p){const y=new g1(s,p);if(gy(p,g))return Sh(p,y,i);VC(g,a)&&Sh(p,y,i)}return[]}):[];if(f.length>0)throw Promise.all(f);const b=c.find((g,x)=>{const p=o[x];return p&&UC({result:g,errorResetBoundary:i,throwOnError:p.throwOnError,query:s.getQueryCache().get(p.queryHash),suspense:p.suspense})});if(b!=null&&b.error)throw b.error;return d(m())}function yI(e,t,n){var h,f,b,g;const s=FC(),a=BC(),i=et(),o=i.defaultQueryOptions(e);(f=(h=i.getDefaultOptions().queries)==null?void 0:h._experimental_beforeQuery)==null||f.call(h,o);const l=i.getQueryCache().get(o.queryHash);o._optimisticResults=s?"isRestoring":"optimistic",WC(o),zC(o,a,l),qC(a);const c=!i.getQueryCache().get(o.queryHash),[d]=k.useState(()=>new t(i,o)),m=d.getOptimisticResult(o),u=!s&&e.subscribed!==!1;if(k.useSyncExternalStore(k.useCallback(x=>{const p=u?d.subscribe(yt.batchCalls(x)):Yt;return d.updateResult(),p},[d,u]),()=>d.getCurrentResult(),()=>d.getCurrentResult()),k.useEffect(()=>{d.setOptions(o)},[o,d]),gy(o,m))throw Sh(o,d,a);if(UC({result:m,errorResetBoundary:a,throwOnError:o.throwOnError,query:l,suspense:o.suspense}))throw m.error;if((g=(b=i.getDefaultOptions().queries)==null?void 0:b._experimental_afterQuery)==null||g.call(b,o,m),o.experimental_prefetchInRender&&!Ni&&VC(m,s)){const x=c?Sh(o,d,a):l==null?void 0:l.promise;x==null||x.catch(Yt).finally(()=>{d.updateResult()})}return o.notifyOnChangeProps?m:d.trackResult(m)}function pe(e,t){return yI(e,g1)}function ve(e,t){const n=et(),[s]=k.useState(()=>new cI(n,e));k.useEffect(()=>{s.setOptions(e)},[s,e]);const a=k.useSyncExternalStore(k.useCallback(o=>s.subscribe(yt.batchCalls(o)),[s]),()=>s.getCurrentResult(),()=>s.getCurrentResult()),i=k.useCallback((o,l)=>{s.mutate(o,l).catch(Yt)},[s]);if(a.error&&f1(s.options.throwOnError,[a.error]))throw a.error;return{...a,mutate:i,mutateAsync:a.mutate}}const bI=[{name:"Business Cards",slug:"/products/business-cards",badge:"Popular",startingPrice:"17.50",gradientFrom:"from-blue-400",gradientTo:"to-blue-600",badgeColor:"bg-emerald-500",icon:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})},{name:"Flyers",slug:"/products/flyers",badge:"Best Value",startingPrice:"25",gradientFrom:"from-purple-400",gradientTo:"to-purple-600",badgeColor:"bg-sky-500",icon:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{name:"Vinyl Banners",slug:"/products/vinyl-banners",badge:"Popular",startingPrice:"40",gradientFrom:"from-orange-400",gradientTo:"to-orange-600",badgeColor:"bg-emerald-500",icon:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},{name:"Stickers",slug:"/products/stickers",badge:"Best Value",startingPrice:"12",gradientFrom:"from-pink-400",gradientTo:"to-pink-600",badgeColor:"bg-sky-500",icon:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}],vI=({product:e})=>r.jsxs(ie,{to:e.slug,className:"group relative bg-white rounded-2xl overflow-hidden shadow-lg hover:shadow-2xl transition-all duration-300 hover:-translate-y-2",children:[r.jsxs("div",{className:`relative h-40 bg-gradient-to-br ${e.gradientFrom} ${e.gradientTo} flex items-center justify-center`,children:[r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("span",{className:`${e.badgeColor} text-white text-xs font-bold px-3 py-1.5 rounded-full shadow-lg`,children:e.badge})}),r.jsx("div",{className:"transform group-hover:scale-110 transition-transform duration-300",children:e.icon})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-amber-600 transition-colors",children:e.name}),e.startingPrice&&r.jsxs("p",{className:"text-gray-600 font-semibold mb-4",children:["From ",e.startingPrice]}),r.jsxs("button",{className:"w-full bg-black text-white font-bold py-3 px-4 rounded-lg hover:bg-gray-800 transition-all duration-300 flex items-center justify-center gap-2 group-hover:gap-3",children:["Order Now",r.jsx(zs,{className:"w-5 h-5"})]})]})]}),jI=()=>r.jsx("section",{className:"py-20 lg:py-28 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Best Sellers  Our Most Ordered Print Products"}),r.jsx("p",{className:"text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Fast turnaround, premium finish, and clear pricing  trusted by businesses across Ireland."})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-6 lg:gap-8",children:bI.map(e=>r.jsx(vI,{product:e},e.name))})]})}),wI=()=>r.jsx("section",{className:"bg-gradient-to-r from-yellow-400 via-yellow-500 to-yellow-400 py-4",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex flex-col md:flex-row items-center justify-center gap-6 md:gap-12",children:[r.jsxs(ie,{to:"/pricing",className:"flex items-center gap-2 group hover:scale-105 transition-transform duration-200",children:[r.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-amber-600 rounded-full",children:r.jsx(LR,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"text-slate-900 font-semibold text-sm group-hover:text-slate-800 transition-colors",children:"Special Offers"})]}),r.jsx("div",{className:"hidden md:block w-px h-6 bg-amber-600/30"}),r.jsxs(ie,{to:"/pricing",className:"flex items-center gap-2 group hover:scale-105 transition-transform duration-200",children:[r.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-amber-600 rounded-full",children:r.jsx(wi,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"text-slate-900 font-semibold text-sm group-hover:text-slate-800 transition-colors",children:"Bulk Discounts"})]}),r.jsx("div",{className:"hidden md:block w-px h-6 bg-amber-600/30"}),r.jsxs(ie,{to:"/products",className:"flex items-center gap-2 group hover:scale-105 transition-transform duration-200",children:[r.jsx("div",{className:"w-8 h-8 flex items-center justify-center bg-amber-600 rounded-full",children:r.jsx($R,{className:"w-4 h-4 text-white"})}),r.jsx("span",{className:"text-slate-900 font-semibold text-sm group-hover:text-slate-800 transition-colors",children:"Free Delivery on Select Orders"})]})]})})}),NI=[{icon:r.jsx(RR,{className:"w-6 h-6 text-blue-600"}),title:"Fast Delivery",subtitle:"Quick turnaround times",bgColor:"bg-blue-50"},{icon:r.jsx(bR,{className:"w-6 h-6 text-emerald-600"}),title:"Premium Quality",subtitle:"Consistent colour & finish",bgColor:"bg-emerald-50"},{icon:r.jsx(ER,{className:"w-6 h-6 text-amber-600"}),title:"Local Business Support",subtitle:"Built for Irish SMEs",bgColor:"bg-amber-50"}],_I=()=>r.jsx("section",{className:"py-12 bg-gray-50",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:NI.map((e,t)=>r.jsx("div",{className:"group bg-white rounded-xl p-6 shadow-sm hover:shadow-lg transition-all duration-300 border border-gray-100 hover:border-gray-200 hover:-translate-y-1",children:r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`${e.bgColor} w-12 h-12 rounded-full flex items-center justify-center flex-shrink-0 group-hover:scale-110 transition-transform duration-300`,children:e.icon}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:e.title}),r.jsx("p",{className:"text-sm text-gray-600",children:e.subtitle})]})]})},t))})})}),b1="https://123project-build-a-production-ready-w.launchpulse.ai";async function kI(){const{data:e}=await te.get(`${b1}/api/public/services`,{params:{is_top_seller:!0,limit:6}});return e}async function SI(){const{data:e}=await te.get(`${b1}/api/public/gallery`,{params:{limit:6,page:1}});return e}async function CI(){const{data:e}=await te.get(`${b1}/api/public/marketing-content`,{params:{page_key:"home"}});return e}const AI=()=>{const e=Le();ae(y=>y.authentication_state.authentication_status.is_authenticated);const t=ae(y=>y.show_toast),[n,s]=Y.useState(!1);Y.useEffect(()=>{const y=()=>{s(window.scrollY>400)};return window.addEventListener("scroll",y),()=>window.removeEventListener("scroll",y)},[]);const{data:a,isLoading:i,error:o}=pe({queryKey:["top_selling_services"],queryFn:kI,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:l,isLoading:c,error:d}=pe({queryKey:["gallery_preview"],queryFn:SI,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:m,isLoading:u,error:h}=pe({queryKey:["marketing_content","home"],queryFn:CI,staleTime:6e4,refetchOnWindowFocus:!1,retry:1});Y.useEffect(()=>{o&&t({type:"error",message:"Failed to load services",duration:5e3}),d&&t({type:"error",message:"Failed to load gallery images",duration:5e3}),h&&t({type:"error",message:"Failed to load page content",duration:5e3})},[o,d,h,t]),Y.useMemo(()=>{if(!m||!Array.isArray(m))return{hero_headline:"Disciplined Premium Print, Signage & Branding",hero_subtext:"Professional branding that is accessible and dependable",hero_cta_text:"Get a Quote"};const y={};return m.forEach(v=>{y[v.section_key]=v.content}),{hero_headline:y.hero_headline||"Disciplined Premium Print, Signage & Branding",hero_subtext:y.hero_subtext||"Professional branding that is accessible and dependable",hero_cta_text:y.hero_cta_text||"Get a Quote"}},[m]);const f=(a==null?void 0:a.services)||[],b=(l==null?void 0:l.images)||[],g=()=>{e("/quote/start")},x=y=>{e(`/services/${y}`)},p=()=>{e("/gallery")};return r.jsxs(r.Fragment,{children:[r.jsxs("section",{className:"relative bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800 text-white py-24 lg:py-40 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"}),r.jsx("div",{className:"absolute inset-0 opacity-5",children:r.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"48px 48px"}})}),r.jsx("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"text-center max-w-5xl mx-auto",children:[u?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"h-6 bg-gray-700/50 rounded-lg mb-6 animate-pulse max-w-sm mx-auto"}),r.jsx("div",{className:"h-20 bg-gray-700/50 rounded-lg mb-8 animate-pulse"}),r.jsx("div",{className:"h-16 bg-gray-700/50 rounded-lg mb-10 animate-pulse"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"mb-6 animate-fade-in",children:r.jsx("span",{className:"inline-block px-5 py-2 bg-gradient-to-r from-amber-500/10 to-yellow-500/10 border border-amber-500/20 rounded-full text-amber-400 text-xs sm:text-sm font-semibold tracking-wider uppercase backdrop-blur-sm",children:"PREMIUM PRINT & BRANDING SOLUTIONS"})}),r.jsxs("h1",{className:"text-4xl sm:text-5xl md:text-6xl lg:text-7xl font-bold leading-[1.1] mb-6 tracking-tight",children:[r.jsx("span",{className:"bg-gradient-to-r from-white via-gray-100 to-gray-300 bg-clip-text text-transparent",children:"Personalise First,"}),r.jsx("br",{}),r.jsx("span",{className:"bg-gradient-to-r from-amber-400 via-yellow-500 to-amber-500 bg-clip-text text-transparent",children:"Deliver Excellence"})]}),r.jsx("p",{className:"text-lg sm:text-xl lg:text-2xl text-gray-300 leading-relaxed mb-10 max-w-3xl mx-auto font-light",children:"Professional branding that is accessible and dependable"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[r.jsx("button",{onClick:g,className:"group relative px-8 py-4 bg-gradient-to-r from-amber-500 to-yellow-500 text-black font-bold rounded-xl hover:from-amber-400 hover:to-yellow-400 transition-all duration-300 shadow-2xl shadow-amber-500/25 hover:shadow-amber-500/40 transform hover:scale-105 hover:-translate-y-0.5 min-w-[240px]",children:r.jsxs("span",{className:"relative z-10 flex items-center justify-center gap-2",children:["Get Your Custom Quote",r.jsx("svg",{className:"w-5 h-5 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),r.jsx("button",{onClick:p,className:"group px-8 py-4 bg-transparent border-2 border-white/20 backdrop-blur-sm text-white font-bold rounded-xl hover:bg-white/10 hover:border-white/40 transition-all duration-300 min-w-[240px]",children:r.jsxs("span",{className:"flex items-center justify-center gap-2",children:["View Our Portfolio",r.jsx("svg",{className:"w-5 h-5 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})})]})]})})]}),r.jsx(jI,{}),r.jsx(wI,{}),r.jsx(_I,{}),r.jsx("section",{className:"py-20 lg:py-28 bg-gradient-to-br from-amber-50 via-yellow-50 to-orange-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("div",{className:"inline-block mb-4",children:r.jsx("span",{className:"px-4 py-2 bg-amber-500/10 border border-amber-500/20 rounded-full text-amber-700 text-sm font-semibold tracking-wider uppercase",children:"Shop by Category"})}),r.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6",children:"Popular Print Categories"}),r.jsx("p",{className:"text-xl text-gray-700 max-w-3xl mx-auto leading-relaxed",children:"Explore our wide range of premium print products  from business essentials to eye-catching marketing materials"})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6 lg:gap-8",children:[r.jsxs(ie,{to:"/products/business-cards",className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-amber-500/50 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-amber-400/20 to-yellow-500/20 rounded-bl-full -z-0"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-amber-600 transition-colors",children:"Business Cards"}),r.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"Professional business cards with premium finishes. Make a lasting first impression."}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-amber-600 font-semibold group-hover:gap-3 transition-all",children:["Shop Now",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}),r.jsxs(ie,{to:"/products/flyers",className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-amber-500/50 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-400/20 to-amber-500/20 rounded-bl-full -z-0"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-amber-500 rounded-xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-orange-600 transition-colors",children:"Flyers & Brochures"}),r.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"Eye-catching promotional materials to spread your message effectively."}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-orange-600 font-semibold group-hover:gap-3 transition-all",children:["Shop Now",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}),r.jsxs(ie,{to:"/products/stickers",className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-amber-500/50 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-yellow-400/20 to-amber-500/20 rounded-bl-full -z-0"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-yellow-600 transition-colors",children:"Custom Stickers"}),r.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"Durable vinyl stickers for branding, packaging, and promotional use."}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-yellow-600 font-semibold group-hover:gap-3 transition-all",children:["Shop Now",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}),r.jsxs(ie,{to:"/products/postcards",className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-amber-500/50 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-amber-400/20 to-orange-500/20 rounded-bl-full -z-0"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-orange-500 rounded-xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-amber-600 transition-colors",children:"Postcards"}),r.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"Direct mail postcards that get noticed and drive engagement."}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-amber-600 font-semibold group-hover:gap-3 transition-all",children:["Shop Now",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}),r.jsxs(ie,{to:"/products/letterheads",className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-amber-500/50 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-yellow-400/20 to-orange-500/20 rounded-bl-full -z-0"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-yellow-400 to-orange-500 rounded-xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-yellow-600 transition-colors",children:"Letterheads"}),r.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"Professional letterhead printing for official correspondence."}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-yellow-600 font-semibold group-hover:gap-3 transition-all",children:["Shop Now",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]}),r.jsxs(ie,{to:"/products/envelopes",className:"group relative bg-white rounded-2xl p-8 shadow-lg hover:shadow-2xl transition-all duration-300 border-2 border-transparent hover:border-amber-500/50 hover:-translate-y-1",children:[r.jsx("div",{className:"absolute top-0 right-0 w-32 h-32 bg-gradient-to-br from-orange-400/20 to-yellow-500/20 rounded-bl-full -z-0"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-orange-400 to-yellow-500 rounded-xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-3 group-hover:text-orange-600 transition-colors",children:"Branded Envelopes"}),r.jsx("p",{className:"text-gray-600 leading-relaxed mb-6",children:"Custom printed envelopes to complete your professional stationery set."}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-orange-600 font-semibold group-hover:gap-3 transition-all",children:["Shop Now",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]})]}),r.jsx("div",{className:"text-center mt-12",children:r.jsxs(ie,{to:"/products",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-amber-500 to-yellow-500 text-white font-bold rounded-xl hover:from-amber-400 hover:to-yellow-400 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:["View All Products",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})}),r.jsxs("section",{className:"relative py-20 lg:py-32 bg-gradient-to-br from-slate-950 via-slate-900 to-slate-800 text-white overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/50 via-transparent to-transparent"}),r.jsx("div",{className:"absolute inset-0 opacity-5",children:r.jsx("div",{className:"absolute inset-0",style:{backgroundImage:"radial-gradient(circle at 2px 2px, white 1px, transparent 0)",backgroundSize:"48px 48px"}})}),r.jsxs("div",{className:"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("div",{className:"inline-block mb-4",children:r.jsx("span",{className:"px-4 py-2 bg-amber-500/10 border border-amber-500/20 rounded-full text-amber-400 text-sm font-semibold tracking-wider uppercase",children:"Premium Services"})}),r.jsx("h2",{className:"text-4xl lg:text-5xl font-bold mb-6",children:r.jsx("span",{className:"bg-gradient-to-r from-white via-gray-100 to-gray-300 bg-clip-text text-transparent",children:"Branding & Installation Services"})}),r.jsx("p",{className:"text-xl text-gray-300 max-w-3xl mx-auto leading-relaxed",children:"Professional signage, vehicle branding, and custom installations for your business"})]}),i?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(y=>r.jsxs("div",{className:"bg-slate-800/50 rounded-2xl p-8 animate-pulse backdrop-blur-sm border border-slate-700/50",children:[r.jsx("div",{className:"h-16 w-16 bg-slate-700 rounded-xl mb-6"}),r.jsx("div",{className:"h-6 bg-slate-700 rounded mb-3"}),r.jsx("div",{className:"h-4 bg-slate-700 rounded mb-6"}),r.jsx("div",{className:"h-10 bg-slate-700 rounded"})]},y))}):o?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("p",{className:"text-red-400 mb-4",children:"Failed to load services"}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-amber-500 text-black rounded-lg hover:bg-amber-400 transition-colors font-semibold",children:"Retry"})]}):f.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-400",children:"No featured services available"})}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(y=>r.jsxs("div",{onClick:()=>x(y.slug),className:"group relative bg-gradient-to-br from-slate-800/80 to-slate-900/80 backdrop-blur-sm rounded-2xl p-8 border border-slate-700/50 hover:border-amber-500/50 transition-all duration-300 cursor-pointer hover:-translate-y-1 shadow-xl hover:shadow-2xl hover:shadow-amber-500/10",children:[r.jsx("div",{className:"absolute top-0 right-0 w-24 h-24 bg-gradient-to-br from-amber-500/10 to-transparent rounded-bl-full opacity-0 group-hover:opacity-100 transition-opacity duration-300"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"w-16 h-16 bg-gradient-to-br from-amber-400 to-yellow-500 rounded-xl flex items-center justify-center mb-6 shadow-lg group-hover:scale-110 transition-transform",children:r.jsx("svg",{className:"w-8 h-8 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})})}),r.jsx("h3",{className:"text-2xl font-bold mb-3 group-hover:text-amber-400 transition-colors",children:y.name}),r.jsx("p",{className:"text-gray-400 leading-relaxed mb-6 line-clamp-2",children:y.description||"Premium service with professional quality and expert installation"}),r.jsxs("span",{className:"inline-flex items-center gap-2 text-amber-400 font-semibold group-hover:gap-3 transition-all",children:["Learn More",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})]})]},y.id))}),r.jsx("div",{className:"text-center mt-12",children:r.jsxs(ie,{to:"/services",className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-amber-400 to-yellow-500 text-slate-900 font-bold rounded-xl hover:from-amber-300 hover:to-yellow-400 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:["Explore All Services",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})})]})]}),r.jsx("section",{className:"py-20 lg:py-28 bg-white",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("div",{className:"inline-block mb-4",children:r.jsx("span",{className:"px-4 py-2 bg-amber-500/10 border border-amber-500/20 rounded-full text-amber-700 text-sm font-semibold tracking-wider uppercase",children:"Our Work"})}),r.jsx("h2",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6",children:"View Our Portfolio"}),r.jsx("p",{className:"text-xl text-gray-700 max-w-3xl mx-auto leading-relaxed",children:"See the quality and craftsmanship in our completed projects"})]}),c?r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 lg:gap-6",children:[1,2,3,4,5,6].map(y=>r.jsx("div",{className:"aspect-square bg-gray-200 rounded-xl animate-pulse"},y))}):d?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-red-600 mb-4",children:"Failed to load gallery images"})}):b.length===0?r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-600",children:"Gallery images coming soon"})}):r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-3 gap-4 lg:gap-6 mb-8",children:b.slice(0,6).map(y=>r.jsxs(ie,{to:"/gallery",className:"relative aspect-square group overflow-hidden rounded-xl shadow-lg hover:shadow-2xl transition-all duration-300",children:[r.jsx("img",{src:y.thumbnail_url||y.image_url,alt:y.alt_text||y.title,className:"w-full h-full object-cover transform group-hover:scale-110 transition-transform duration-500",loading:"lazy"}),r.jsxs("div",{className:"absolute inset-0 bg-gradient-to-t from-black/80 via-black/40 to-transparent opacity-0 group-hover:opacity-100 transition-opacity duration-300",children:[r.jsx("div",{className:"absolute inset-0 flex items-center justify-center",children:r.jsxs("svg",{className:"w-12 h-12 text-white transform scale-75 group-hover:scale-100 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),r.jsx("div",{className:"absolute bottom-0 left-0 right-0 p-4",children:r.jsx("p",{className:"text-white font-semibold text-sm",children:y.title})})]})]},y.id))}),r.jsx("div",{className:"text-center",children:r.jsxs("button",{onClick:p,className:"inline-flex items-center gap-2 px-8 py-4 bg-gradient-to-r from-gray-900 to-gray-800 text-white font-bold rounded-xl hover:from-gray-800 hover:to-gray-700 transition-all duration-300 shadow-lg hover:shadow-xl transform hover:scale-105",children:["View Full Portfolio",r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})]})})]})}),r.jsxs("section",{className:"relative py-24 lg:py-32 bg-gradient-to-br from-amber-400 via-yellow-500 to-orange-500 overflow-hidden",children:[r.jsx("div",{className:"absolute inset-0 bg-gradient-to-t from-black/10 via-transparent to-transparent"}),r.jsx("div",{className:"absolute top-0 left-0 w-96 h-96 bg-white/5 rounded-full -translate-x-1/2 -translate-y-1/2 blur-3xl"}),r.jsx("div",{className:"absolute bottom-0 right-0 w-96 h-96 bg-orange-500/20 rounded-full translate-x-1/2 translate-y-1/2 blur-3xl"}),r.jsxs("div",{className:"relative max-w-5xl mx-auto px-4 sm:px-6 lg:px-8 text-center",children:[r.jsx("div",{className:"mb-6",children:r.jsx("span",{className:"inline-block px-5 py-2 bg-white/20 backdrop-blur-sm border border-white/30 rounded-full text-white text-sm font-semibold tracking-wider uppercase shadow-lg",children:"Ready to Transform Your Brand?"})}),r.jsx("h2",{className:"text-4xl sm:text-5xl lg:text-6xl font-bold text-slate-900 mb-6 leading-tight",children:"Let's Bring Your Vision to Life"}),r.jsx("p",{className:"text-xl lg:text-2xl text-slate-800 mb-10 max-w-3xl mx-auto leading-relaxed font-medium",children:"Professional branding solutions with transparent pricing, disciplined timelines, and exceptional quality"}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-5 justify-center items-center",children:[r.jsx("button",{onClick:g,className:"group px-10 py-5 bg-slate-900 text-white font-bold text-lg rounded-xl hover:bg-slate-800 transition-all duration-300 shadow-2xl shadow-slate-900/30 hover:shadow-slate-900/50 transform hover:scale-105 min-w-[240px]",children:r.jsxs("span",{className:"flex items-center justify-center gap-3",children:["Get Your Free Quote",r.jsx("svg",{className:"w-6 h-6 group-hover:translate-x-1 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})]})}),r.jsxs(ie,{to:"/contact",className:"group px-10 py-5 bg-white text-slate-900 font-bold text-lg rounded-xl hover:bg-gray-50 transition-all duration-300 shadow-2xl hover:shadow-xl border-3 border-slate-900/10 inline-flex items-center justify-center gap-3 min-w-[240px]",children:["Contact Our Team",r.jsx("svg",{className:"w-6 h-6 group-hover:scale-110 transition-transform",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})})]})]}),r.jsx("div",{className:"mt-16 pt-12 border-t border-white/20",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8 max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-14 h-14 mx-auto bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 shadow-lg",children:r.jsx("svg",{className:"w-7 h-7 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Premium Quality"}),r.jsx("p",{className:"text-slate-800 font-medium",children:"Industry-leading materials and processes"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-14 h-14 mx-auto bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 shadow-lg",children:r.jsx("svg",{className:"w-7 h-7 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Fast Turnaround"}),r.jsx("p",{className:"text-slate-800 font-medium",children:"Express, standard, and economy options"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"w-14 h-14 mx-auto bg-white/20 backdrop-blur-sm rounded-full flex items-center justify-center mb-4 shadow-lg",children:r.jsx("svg",{className:"w-7 h-7 text-slate-900",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-2xl font-bold text-slate-900 mb-2",children:"Clear Pricing"}),r.jsx("p",{className:"text-slate-800 font-medium",children:"Transparent quotes with no hidden fees"})]})]})})]})]}),r.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:r.jsx("button",{onClick:g,className:"w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-6 py-3 rounded-lg transition-all duration-200",children:"Get a Free Quote"})}),r.jsx("div",{className:`hidden md:flex fixed bottom-8 right-8 z-40 transition-all duration-300 ${n?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:r.jsxs("button",{onClick:g,className:"bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-6 py-4 rounded-full shadow-2xl transition-all duration-200 flex items-center gap-3 group",children:[r.jsx("svg",{className:"h-6 w-6 group-hover:scale-110 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("span",{children:"Get a Quote"}),r.jsx("svg",{className:"h-5 w-5 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})},PI=async(e,t)=>{const n=new URLSearchParams;e&&n.append("category",e),t&&t.trim()&&n.append("search",t.trim());const a=`https://123project-build-a-production-ready-w.launchpulse.ai/api/public/services${n.toString()?"?"+n.toString():""}`;return(await te.get(a)).data},EI=()=>{var j;const[e,t]=Ye(),[n,s]=k.useState(e.get("category")),[a,i]=k.useState(e.get("search")||""),[o,l]=k.useState(e.get("search")||""),c=k.useRef(null),[d,m]=k.useState(!1);k.useEffect(()=>{const _=()=>{m(window.scrollY>300)};return window.addEventListener("scroll",_),()=>window.removeEventListener("scroll",_)},[]),k.useEffect(()=>()=>{c.current&&clearTimeout(c.current)},[]),ae(_=>_.show_toast);const{data:u,isLoading:h,error:f,refetch:b}=pe({queryKey:["services",n,a],queryFn:()=>PI(n,a),staleTime:6e4,refetchOnWindowFocus:!1,retry:1,select:_=>({services:_.services,service_categories:_.categories})}),g=(u==null?void 0:u.services)||[],x=(u==null?void 0:u.service_categories)||[];k.useEffect(()=>{const _=new URLSearchParams;n&&_.set("category",n),a&&_.set("search",a),t(_,{replace:!0})},[n,a,t]);const p=_=>{s(_)},y=_=>{_.preventDefault(),i(o)},v=()=>{s(null),i(""),l("")},N=_=>{const S=_.target.value;l(S),(S.length>=3||S.length===0)&&(c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{i(S)},500))},w=_=>"Basic";return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-b-2 border-black",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Our Services"}),r.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Explore our comprehensive range of print, branding, and signage services. Each service is delivered with our signature discipline and quality."})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20",children:[r.jsx("div",{className:"mb-8",children:r.jsx("form",{onSubmit:y,className:"max-w-2xl mx-auto",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:o,onChange:N,placeholder:"Search services...",className:"w-full px-4 py-3 pl-12 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 focus:outline-none text-base transition-all"}),r.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),o&&r.jsx("button",{type:"button",onClick:()=>{l(""),i("")},className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),r.jsxs("div",{className:"mb-12",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filter by Category"}),(n||a)&&r.jsx("button",{onClick:v,className:"text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Clear Filters"})]}),r.jsxs("div",{className:"hidden md:flex flex-wrap gap-3",children:[r.jsx("button",{onClick:()=>p(null),className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===null?"bg-yellow-400 text-black shadow-lg":"bg-white text-gray-700 border-2 border-gray-200 hover:border-gray-300"}`,children:"All Services"}),x.map(_=>r.jsx("button",{onClick:()=>p(_.slug),className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===_.slug?"bg-yellow-400 text-black shadow-lg":"bg-white text-gray-700 border-2 border-gray-200 hover:border-gray-300"}`,children:_.name},_.id))]}),r.jsx("div",{className:"md:hidden overflow-x-auto scrollbar-hide",children:r.jsxs("div",{className:"flex gap-3 pb-2",style:{scrollSnapType:"x mandatory"},children:[r.jsx("button",{onClick:()=>p(null),className:`flex-shrink-0 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===null?"bg-yellow-400 text-black shadow-lg":"bg-white text-gray-700 border-2 border-gray-200"}`,style:{scrollSnapAlign:"start"},children:"All Services"}),x.map(_=>r.jsx("button",{onClick:()=>p(_.slug),className:`flex-shrink-0 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===_.slug?"bg-yellow-400 text-black shadow-lg":"bg-white text-gray-700 border-2 border-gray-200"}`,style:{scrollSnapAlign:"start"},children:_.name},_.id))]})})]}),!h&&r.jsx("div",{className:"mb-6",children:r.jsxs("p",{className:"text-gray-600 text-sm",children:[g.length===0?"No services found":`${g.length} service${g.length!==1?"s":""} found`,n&&r.jsxs("span",{className:"ml-1",children:["in ",r.jsx("span",{className:"font-medium",children:(j=x.find(_=>_.slug===n))==null?void 0:j.name})]}),a&&r.jsxs("span",{className:"ml-1",children:["for ",r.jsxs("span",{className:"font-medium",children:['"',a,'"']})]})]})}),h&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(_=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"bg-gray-200 h-48 rounded-t-xl"}),r.jsxs("div",{className:"bg-white border border-gray-200 border-t-0 rounded-b-xl p-6",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-3"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6 mb-4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]},_))}),f&&!h&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Failed to Load Services"}),r.jsx("p",{className:"text-gray-600 mb-6",children:f instanceof Error?f.message:"An error occurred while loading services"}),r.jsx("button",{onClick:()=>b(),className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors duration-200",children:"Try Again"})]}),!h&&!f&&g.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Services Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:a?`No services match your search "${a}"`:n?"No services found in this category":"No services are currently available"}),(n||a)&&r.jsx("button",{onClick:v,className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors duration-200",children:"View All Services"})]}),!h&&!f&&g.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:g.map(_=>r.jsxs(ie,{to:`/services/${_.slug}`,className:"group block bg-white border border-gray-200 rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-200 hover:-translate-y-1",children:[r.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200 flex items-center justify-center overflow-hidden",children:[r.jsx("div",{className:"text-gray-400 transform group-hover:scale-110 transition-transform duration-200",children:_.name.toLowerCase().includes("card")?r.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}):_.name.toLowerCase().includes("vehicle")?r.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}):_.name.toLowerCase().includes("sign")?r.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 8h10M7 12h4m1 8l-4-4H5a2 2 0 01-2-2V6a2 2 0 012-2h14a2 2 0 012 2v8a2 2 0 01-2 2h-3l-4 4z"})}):_.name.toLowerCase().includes("print")||_.name.toLowerCase().includes("poster")?r.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h6a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"})}):_.name.toLowerCase().includes("stamp")||_.name.toLowerCase().includes("sticker")?r.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})}):r.jsx("svg",{className:"w-16 h-16",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M19 11H5m14 0a2 2 0 012 2v6a2 2 0 01-2 2H5a2 2 0 01-2-2v-6a2 2 0 012-2m14 0V9a2 2 0 00-2-2M5 11V9a2 2 0 012-2m0 0V5a2 2 0 012-2h6a2 2 0 012 2v2M7 7h10"})})}),_.is_top_seller&&r.jsx("div",{className:"absolute top-4 right-4 bg-yellow-400 text-black px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"Top Seller"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-yellow-600 transition-colors",children:_.name}),r.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-4 line-clamp-3",children:_.description||"Professional service with our signature quality and discipline."}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-700 border border-gray-200",children:["Starting at ",w()]}),r.jsxs("div",{className:"flex gap-2",children:[_.requires_booking&&r.jsx("span",{className:"inline-flex items-center text-xs text-gray-500",title:"Requires booking",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),_.requires_proof&&r.jsx("span",{className:"inline-flex items-center text-xs text-gray-500",title:"Includes proofing",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm font-medium text-yellow-600 group-hover:text-yellow-700",children:[r.jsx("span",{children:"View Details"}),r.jsx("svg",{className:"w-5 h-5 transform group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},_.id))}),!h&&!f&&g.length>0&&r.jsxs("div",{className:"mt-16 text-center bg-gray-50 rounded-xl p-8 lg:p-12",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Ready to Get Started?"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-2xl mx-auto leading-relaxed",children:"Choose a service above to view details and pricing, or start your quote right away."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx(ie,{to:"/quote/start",className:"px-8 py-4 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Get a Quote"}),r.jsx(ie,{to:"/contact",className:"px-8 py-4 bg-white text-black font-bold rounded-lg border-2 border-black hover:bg-black hover:text-white transition-all duration-200",children:"Contact Us"})]})]})]})]}),r.jsx("style",{children:`
        .scrollbar-hide::-webkit-scrollbar {
          display: none;
        }
        .scrollbar-hide {
          -ms-overflow-style: none;
          scrollbar-width: none;
        }
        .line-clamp-3 {
          display: -webkit-box;
          -webkit-line-clamp: 3;
          -webkit-box-orient: vertical;
          overflow: hidden;
        }
      `}),r.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:r.jsx(ie,{to:"/app/quotes/new",className:"block w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-6 py-3 rounded-lg text-center transition-all duration-200",children:"Get a Free Quote"})}),r.jsx("div",{className:`hidden md:flex fixed bottom-8 right-8 z-40 transition-all duration-300 ${d?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:r.jsxs(ie,{to:"/app/quotes/new",className:"bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-6 py-4 rounded-full shadow-2xl transition-all duration-200 flex items-center gap-3 group",children:[r.jsx("svg",{className:"h-6 w-6 group-hover:scale-110 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("span",{children:"Get a Quote"}),r.jsx("svg",{className:"h-5 w-5 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})},OI=()=>{const{slug:e}=fr(),t=Le();ae(S=>S.authentication_state.authentication_status.is_authenticated),ae(S=>S.show_toast);const[n,s]=k.useState(!1),[a,i]=k.useState(0),[o,l]=k.useState(0),[c,d]=k.useState(!1),m="https://123project-build-a-production-ready-w.launchpulse.ai",{data:u,isLoading:h,error:f}=pe({queryKey:["public-service-detail",e],queryFn:async()=>{if(!e)throw new Error("Service slug is required");return(await te.get(`${m}/api/public/services/${e}`)).data},enabled:!!e,staleTime:5*60*1e3,retry:1});k.useEffect(()=>{const S=T=>{!n||!(u!=null&&u.examples.length)||(T.key==="Escape"?p():T.key==="ArrowLeft"?y("prev"):T.key==="ArrowRight"&&y("next"))};return window.addEventListener("keydown",S),()=>window.removeEventListener("keydown",S)},[n,a,u]),k.useEffect(()=>(n?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[n]),k.useEffect(()=>{const S=()=>{const T=window.scrollY;d(T>300)};return window.addEventListener("scroll",S),()=>window.removeEventListener("scroll",S)},[]);const b=()=>{u!=null&&u.service&&t(`/quote/start?service=${u.service.slug}`)},g=()=>{u!=null&&u.category&&t(`/gallery?category=${u.category.slug}`)},x=S=>{i(S),s(!0)},p=()=>{s(!1)},y=S=>{u!=null&&u.examples.length&&i(S==="next"?T=>T>=u.examples.length-1?0:T+1:T=>T<=0?u.examples.length-1:T-1)},v=S=>{const T=document.getElementById("carousel-container");if(!T)return;const A=S==="right"?300:-300;T.scrollBy({left:A,behavior:"smooth"})};if(h)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-8",children:[r.jsx("div",{className:"h-4 w-16 bg-gray-300 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-24 bg-gray-300 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-4 bg-gray-300 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-32 bg-gray-300 rounded animate-pulse"})]}),r.jsxs("div",{className:"mb-12",children:[r.jsx("div",{className:"h-10 w-64 bg-gray-300 rounded animate-pulse mb-4"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 w-full bg-gray-300 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-full bg-gray-300 rounded animate-pulse"}),r.jsx("div",{className:"h-4 w-3/4 bg-gray-300 rounded animate-pulse"})]})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4 mb-12",children:[1,2,3,4].map(S=>r.jsx("div",{className:"aspect-square bg-gray-300 rounded-lg animate-pulse"},S))})]})})});if(f||!u)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[r.jsx("div",{className:"mb-6",children:r.jsx("svg",{className:"mx-auto h-16 w-16 text-red-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Service Not Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:f instanceof Error?f.message:"The service you're looking for doesn't exist or is no longer available."}),r.jsx(ie,{to:"/services",className:"inline-block bg-yellow-400 hover:bg-yellow-500 text-black font-semibold px-6 py-3 rounded-lg transition-all duration-200",children:"Browse All Services"})]})})});const{service:N,category:w,service_options:j,examples:_}=u;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20",children:[r.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-600 mb-8","aria-label":"Breadcrumb",children:[r.jsx(ie,{to:"/services",className:"hover:text-yellow-600 transition-colors",children:"Services"}),r.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),r.jsx(ie,{to:`/services?category=${w.slug}`,className:"hover:text-yellow-600 transition-colors",children:w.name}),r.jsx("svg",{className:"h-4 w-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-gray-900 font-medium",children:N.name})]}),r.jsxs("div",{className:"mb-12",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 leading-tight",children:N.name}),N.description&&r.jsx("div",{className:"prose prose-lg max-w-none text-gray-700 leading-relaxed",children:r.jsx("p",{children:N.description})}),N.is_top_seller&&r.jsx("div",{className:"mt-4",children:r.jsxs("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-yellow-100 text-yellow-800 border border-yellow-300",children:[r.jsx("svg",{className:"h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Top Seller"]})}),r.jsxs("div",{className:"mt-8 flex flex-wrap gap-4",children:[r.jsxs("button",{onClick:b,className:"bg-yellow-400 hover:bg-yellow-500 text-black font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 text-lg flex items-center gap-2",children:[r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Get a Quote"]}),r.jsxs("button",{onClick:g,className:"bg-white hover:bg-gray-100 text-gray-900 font-medium px-6 py-4 rounded-lg border border-gray-300 transition-all duration-200 flex items-center gap-2",children:[r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"View Examples"]})]})]}),_&&_.length>0&&r.jsxs("div",{className:"mb-16",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Example Projects"}),r.jsx("div",{className:"hidden md:block",children:r.jsxs("div",{className:"relative",children:[r.jsx("button",{onClick:()=>v("left"),className:"absolute left-0 top-1/2 -translate-y-1/2 -translate-x-4 z-10 bg-white hover:bg-gray-100 rounded-full p-3 shadow-lg transition-all duration-200","aria-label":"Previous examples",children:r.jsx("svg",{className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("div",{id:"carousel-container",className:"overflow-x-auto scrollbar-hide scroll-smooth",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:r.jsx("div",{className:"grid grid-cols-4 gap-6",children:_.map((S,T)=>r.jsxs("div",{className:"cursor-pointer group",onClick:()=>x(T),children:[r.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-200 relative",children:[r.jsx("img",{src:S.thumbnail_url||S.image_url,alt:S.alt_text||S.title,className:"w-full h-full object-cover transition-transform duration-200 group-hover:scale-105",loading:"lazy"}),r.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-40 transition-all duration-200 flex items-center justify-center",children:r.jsx("span",{className:"text-white font-semibold opacity-0 group-hover:opacity-100 transition-opacity duration-200",children:"View Project"})})]}),S.title&&r.jsx("p",{className:"mt-2 text-sm text-gray-700 font-medium line-clamp-1",children:S.title})]},S.id))})}),r.jsx("button",{onClick:()=>v("right"),className:"absolute right-0 top-1/2 -translate-y-1/2 translate-x-4 z-10 bg-white hover:bg-gray-100 rounded-full p-3 shadow-lg transition-all duration-200","aria-label":"Next examples",children:r.jsx("svg",{className:"h-6 w-6 text-gray-900",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})}),r.jsx("div",{className:"md:hidden",children:r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"overflow-x-auto snap-x snap-mandatory scrollbar-hide flex gap-4",children:_.map((S,T)=>r.jsxs("div",{className:"flex-none w-full snap-center cursor-pointer",onClick:()=>x(T),children:[r.jsx("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-200",children:r.jsx("img",{src:S.thumbnail_url||S.image_url,alt:S.alt_text||S.title,className:"w-full h-full object-cover",loading:"lazy"})}),S.title&&r.jsx("p",{className:"mt-2 text-sm text-gray-700 font-medium text-center",children:S.title})]},S.id))}),r.jsx("div",{className:"flex justify-center mt-4 space-x-2",children:_.map((S,T)=>r.jsx("button",{onClick:()=>{const A=document.querySelector(".overflow-x-auto");A&&A.scrollTo({left:T*A.clientWidth,behavior:"smooth"})},className:`h-2 rounded-full transition-all duration-200 ${T===a?"w-8 bg-yellow-400":"w-2 bg-gray-300"}`,"aria-label":`Go to image ${T+1}`},T))})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 mb-16",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Choosing Your Service Level"}),r.jsx("p",{className:"text-gray-600 mb-4 leading-relaxed",children:"We offer different service tiers to match your timeline and budget needs."}),r.jsxs("ul",{className:"space-y-3 mb-6",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-green-600 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Quick turnarounds  Gold Tier"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-green-600 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Design assistance  Standard or Gold"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-green-600 mt-0.5 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Print-ready files  Basic"})]})]}),r.jsxs(ie,{to:"/pricing",className:"text-yellow-600 hover:text-yellow-700 font-medium text-sm flex items-center transition-colors",children:["See All Tiers",r.jsx("svg",{className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"What You'll Need to Provide"}),r.jsxs("ul",{className:"space-y-3",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"300 DPI minimum for print quality"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Correct dimensions/size specs"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Fonts outlined (for vector files)"})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-yellow-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{className:"text-sm text-gray-700",children:"Bleed included where applicable"})]})]}),r.jsx("p",{className:"mt-4 text-xs text-gray-500 bg-gray-50 p-3 rounded-md",children:"Don't worry if you're not sure - we'll review and contact you if needed."})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Service Requirements"}),r.jsxs("ul",{className:"space-y-3",children:[N.requires_booking&&r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-blue-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Booking Required"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Appointment needed for this service"})]})]}),N.requires_proof&&r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-purple-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Proof Review Process"}),r.jsx("p",{className:"text-xs text-gray-600",children:"You'll approve designs before production"})]})]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("svg",{className:"h-5 w-5 text-green-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Turnaround Time"}),r.jsx("p",{className:"text-xs text-gray-600",children:"Varies by tier (Basic to Enterprise)"})]})]})]})]})]}),j&&j.length>0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8 mb-16",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Configuration Options"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"When you request a quote, you'll provide specific details including:"}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:j.slice(0,6).map(S=>r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsxs("div",{className:"h-8 w-8 rounded-full bg-yellow-100 flex items-center justify-center",children:[S.type==="NUMBER"&&r.jsx("svg",{className:"h-4 w-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 20l4-16m2 16l4-16M6 9h14M4 15h14"})}),S.type==="SELECT"&&r.jsx("svg",{className:"h-4 w-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 6h16M4 12h16M4 18h16"})}),S.type==="TEXT"&&r.jsx("svg",{className:"h-4 w-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})}),S.type==="CHECKBOX"&&r.jsx("svg",{className:"h-4 w-4 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})]})}),r.jsxs("div",{className:"ml-3",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[S.label,S.required&&r.jsx("span",{className:"text-yellow-600 ml-1",children:"*"})]}),S.help_text&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:S.help_text})]})]},S.id))}),j.length>6&&r.jsxs("p",{className:"mt-4 text-sm text-gray-500 text-center",children:["+ ",j.length-6," more configuration options"]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 rounded-xl p-8 lg:p-12 text-center mb-8",children:[r.jsx("h2",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Get Started?"}),r.jsx("p",{className:"text-lg text-gray-700 mb-8 max-w-2xl mx-auto",children:"Let's bring your vision to life. Configure your project and get a custom quote tailored to your specific requirements."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("button",{onClick:b,className:"bg-yellow-400 hover:bg-yellow-500 text-black font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 text-lg",children:"Build a Quote for This Service"}),r.jsx("button",{onClick:g,className:"bg-white hover:bg-gray-100 text-gray-900 font-semibold px-8 py-4 rounded-lg border-2 border-gray-900 transition-all duration-200 text-lg",children:"View More Examples"})]})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"h-6 w-6 text-blue-600 mt-1 mr-4 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Questions About This Service?"}),r.jsx("p",{className:"text-gray-600 leading-relaxed mb-4",children:"Our team is here to help you choose the right options for your project. Reach out via WhatsApp, email, or phone."}),r.jsxs(ie,{to:"/contact",className:"text-yellow-600 hover:text-yellow-700 font-medium text-sm flex items-center transition-colors",children:["Contact Us",r.jsx("svg",{className:"h-4 w-4 ml-1",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]})})]})}),n&&_&&_.length>0&&r.jsxs("div",{className:"fixed inset-0 bg-black bg-opacity-90 z-50 flex items-center justify-center",onClick:p,children:[r.jsx("button",{onClick:p,className:"absolute top-4 right-4 text-white hover:text-gray-300 transition-colors z-50","aria-label":"Close lightbox",children:r.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),_.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:S=>{S.stopPropagation(),y("prev")},className:"absolute left-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 hover:bg-opacity-70 rounded-full p-3 z-50","aria-label":"Previous image",children:r.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{onClick:S=>{S.stopPropagation(),y("next")},className:"absolute right-4 top-1/2 -translate-y-1/2 text-white hover:text-gray-300 transition-colors bg-black bg-opacity-50 hover:bg-opacity-70 rounded-full p-3 z-50","aria-label":"Next image",children:r.jsx("svg",{className:"h-8 w-8",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),r.jsx("div",{className:"max-w-7xl max-h-[90vh] w-full h-full flex items-center justify-center p-4",onClick:S=>S.stopPropagation(),children:r.jsxs("div",{className:"relative",children:[r.jsx("img",{src:_[a].image_url,alt:_[a].alt_text||_[a].title,className:"max-w-full max-h-[85vh] object-contain rounded-lg"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-75 text-white p-4 rounded-b-lg",children:[r.jsx("p",{className:"font-medium",children:_[a].title}),_[a].description&&r.jsx("p",{className:"text-sm text-gray-300 mt-1",children:_[a].description}),r.jsxs("p",{className:"text-xs text-gray-400 mt-2",children:[a+1," / ",_.length]})]})]})})]}),r.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:b,className:"flex-1 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold px-6 py-3 rounded-lg transition-all duration-200",children:"Get a Quote"}),r.jsx("button",{onClick:g,className:"flex-1 bg-gray-100 hover:bg-gray-200 text-gray-900 font-semibold px-6 py-3 rounded-lg border border-gray-300 transition-all duration-200",children:"Gallery"})]})}),r.jsx("div",{className:`hidden md:flex fixed bottom-8 right-8 z-40 transition-all duration-300 ${c?"opacity-100 translate-y-0":"opacity-0 translate-y-4 pointer-events-none"}`,children:r.jsxs("button",{onClick:b,className:"bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-6 py-4 rounded-full shadow-2xl hover:shadow-3xl transition-all duration-200 flex items-center gap-3 group",children:[r.jsx("svg",{className:"h-6 w-6 group-hover:scale-110 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("span",{children:"Get a Quote"}),r.jsx("svg",{className:"h-5 w-5 group-hover:translate-x-1 transition-transform",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M14 5l7 7m0 0l-7 7m7-7H3"})})]})})]})},TI=async()=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/public/tiers")).data,MI=()=>{const e=Le();ae(y=>y.authentication_state.authentication_status.is_authenticated);const[t,n]=k.useState(!1),[s,a]=k.useState(null),i=23,o=50,l=20,{data:c,isLoading:d,error:m}=pe({queryKey:["public-tiers"],queryFn:TI,staleTime:3e5,retry:2}),u=(c==null?void 0:c.map(y=>y.tier).sort((y,v)=>y.sort_order-v.sort_order))||[],h={};c==null||c.forEach(y=>{h[y.tier.id]=y.features.sort((v,N)=>v.group_name!==N.group_name?v.group_name.localeCompare(N.group_name):v.sort_order-N.sort_order)});const f=[];Object.values(h).forEach(y=>{y.forEach(v=>{f.includes(v.group_name)||f.push(v.group_name)})});const b=()=>{e("/quote/start")},g=()=>n(!0),x=()=>{n(!1),a(null)},p=y=>{a(s===y?null:y)};return k.useEffect(()=>{const y=v=>{v.key==="Escape"&&t&&x()};return t&&(document.addEventListener("keydown",y),document.body.style.overflow="hidden"),()=>{document.removeEventListener("keydown",y),document.body.style.overflow=""}},[t]),r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-b-2 border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-24",children:r.jsxs("div",{className:"text-center max-w-3xl mx-auto",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 leading-tight",children:"Transparent, Project-Based Pricing"}),r.jsx("p",{className:"text-xl text-gray-700 leading-relaxed mb-8",children:"All pricing is calculated per project based on quantity, complexity, materials, and timeline. Contact us for a custom quote tailored to your specific requirements."}),r.jsx("button",{onClick:b,className:"inline-block bg-yellow-400 text-black font-semibold px-8 py-4 rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Get a Custom Quote"})]})})}),d&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:r.jsxs("div",{className:"animate-pulse space-y-8",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3 mx-auto"}),r.jsx("div",{className:"bg-gray-100 rounded-xl p-8 space-y-4",children:[...Array(5)].map((y,v)=>r.jsx("div",{className:"h-12 bg-gray-200 rounded"},v))})]})}),m&&!d&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-8 text-center",children:[r.jsx("svg",{className:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-lg font-semibold text-red-900 mb-2",children:"Failed to Load Pricing"}),r.jsx("p",{className:"text-red-700 mb-4",children:"We couldn't load the pricing information. Please try again."}),r.jsx("button",{onClick:()=>window.location.reload(),className:"bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})}),!d&&!m&&u.length>0&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 lg:py-20",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Service Tier Comparison"}),r.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Choose the service level that matches your timeline and quality requirements"})]}),r.jsx("div",{className:"hidden md:block overflow-x-auto bg-white rounded-xl shadow-lg border border-gray-200",children:r.jsxs("table",{className:"w-full table-fixed",children:[r.jsx("thead",{className:"sticky top-0 bg-gray-50 border-b-2 border-gray-200 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"w-1/5 px-6 py-4 text-left text-sm font-bold text-gray-900 uppercase tracking-wider",children:"Feature"}),u.map(y=>r.jsxs("th",{className:"w-1/5 px-6 py-4 text-center text-sm font-bold text-gray-900 uppercase tracking-wider",children:[r.jsx("div",{className:"mb-2",children:y.name}),y.description&&r.jsx("div",{className:"text-xs font-normal text-gray-600 normal-case",children:y.description})]},y.id))]})}),r.jsx("tbody",{className:"divide-y divide-gray-200",children:f.map((y,v)=>{const N={};u.forEach(j=>{(h[j.id]||[]).filter(S=>S.group_name===y).forEach(S=>{N[S.feature_label]||(N[S.feature_label]={}),N[S.feature_label][j.id]=S})});const w=Object.entries(N);return r.jsxs(Y.Fragment,{children:[r.jsx("tr",{className:"bg-gray-100",children:r.jsx("td",{colSpan:u.length+1,className:"px-6 py-3 text-left text-sm font-bold text-gray-900 uppercase tracking-wide",children:y})}),w.map(([j,_],S)=>r.jsxs("tr",{className:S%2===0?"bg-white":"bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm font-medium text-gray-900",children:j}),u.map(T=>{const A=_[T.id];return A?r.jsx("td",{className:"px-6 py-4 text-center",children:A.is_included?A.feature_value?r.jsx("span",{className:"text-sm text-gray-900 font-medium",children:A.feature_value}):r.jsx("svg",{className:"w-6 h-6 text-green-600 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):r.jsx("svg",{className:"w-6 h-6 text-red-400 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})},T.id):r.jsx("td",{className:"px-6 py-4 text-center",children:r.jsx("span",{className:"text-gray-400",children:""})},T.id)})]},`${y}-${j}`))]},y)})})]})}),r.jsx("div",{className:"md:hidden space-y-4",children:u.map((y,v)=>{const N=h[y.id]||[],w=s===v;return r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border-2 border-gray-200 overflow-hidden",children:[r.jsxs("button",{onClick:()=>p(v),className:"w-full px-6 py-5 flex items-center justify-between bg-gray-50 hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"text-left",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:y.name}),y.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:y.description})]}),r.jsx("svg",{className:`w-6 h-6 text-gray-600 transition-transform duration-200 ${w?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),w&&r.jsx("div",{className:"px-6 py-4 space-y-6 bg-white",children:f.map(j=>{const _=N.filter(S=>S.group_name===j);return _.length===0?null:r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold text-gray-900 uppercase tracking-wide mb-3 border-b border-gray-200 pb-2",children:j}),r.jsx("ul",{className:"space-y-2",children:_.map(S=>r.jsx("li",{className:"flex items-start",children:S.is_included?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsxs("div",{children:[r.jsx("span",{className:"text-sm font-medium text-gray-900",children:S.feature_label}),S.feature_value&&r.jsxs("span",{className:"text-sm text-gray-600",children:[" - ",S.feature_value]})]})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5 text-red-400 mr-3 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),r.jsx("span",{className:"text-sm text-gray-500",children:S.feature_label})]})},S.id))})]},j)})})]},y.id)})}),r.jsx("div",{className:"md:hidden mt-6 text-center",children:r.jsx("button",{onClick:g,className:"text-blue-600 hover:text-blue-700 font-medium text-sm underline",children:"Compare All Features Side-by-Side"})})]}),r.jsx("div",{className:"bg-gray-50 border-t-2 border-gray-200 border-b-2",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-6 text-center",children:"Important Pricing Information"}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-6",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-6 h-6 text-yellow-400 mr-3 mt-1 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Emergency Booking Fee"}),r.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed",children:["Emergency bookings on fully booked dates incur an additional ",r.jsxs("strong",{className:"text-yellow-600",children:["+",l,"%"]})," urgent fee."]})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-6 h-6 text-blue-600 mr-3 mt-1 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Deposit Requirement"}),r.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed",children:["A ",r.jsxs("strong",{className:"text-blue-600",children:[o,"% deposit"]})," is required upfront to confirm your order. Balance due before delivery."]})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-6 h-6 text-green-600 mr-3 mt-1 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-bold text-gray-900 mb-2",children:"Tax Applied"}),r.jsxs("p",{className:"text-gray-700 text-sm leading-relaxed",children:["All prices exclude ",r.jsxs("strong",{className:"text-green-600",children:[i,"% VAT"]}),", which will be added to your final invoice."]})]})]})})]}),r.jsx("div",{className:"mt-8 bg-blue-50 border border-blue-200 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-6 h-6 text-blue-600 mr-3 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{className:"text-sm text-blue-900 leading-relaxed",children:[r.jsx("p",{className:"font-semibold mb-2",children:"Custom Pricing Policy"}),r.jsx("p",{children:"Each project is quoted individually based on your specific requirements. Final pricing is determined after we review your project details, required materials, timeline, and selected service tier. You'll receive a detailed quote within 24 hours of submission with no obligation to proceed."})]})]})})]})}),r.jsx("div",{className:"bg-gradient-to-r from-yellow-50 to-yellow-100 border-t-2 border-gray-200",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center",children:[r.jsx("h3",{className:"text-3xl font-bold text-gray-900 mb-4",children:"Ready to Get Started?"}),r.jsx("p",{className:"text-lg text-gray-700 mb-8 max-w-2xl mx-auto",children:"Let's bring your vision to life. Get a custom quote tailored to your project requirements."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("button",{onClick:b,className:"bg-yellow-400 text-black font-semibold px-8 py-4 rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Get a Custom Quote"}),r.jsx(ie,{to:"/contact",className:"bg-white text-gray-900 font-semibold px-8 py-4 rounded-lg border-2 border-black hover:bg-gray-900 hover:text-white transition-all duration-200 shadow-lg hover:shadow-xl",children:"Contact Us"})]})]})})]}),t&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto bg-black bg-opacity-60",onClick:x,children:r.jsx("div",{className:"min-h-screen px-4 py-8",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-4xl mx-auto",onClick:y=>y.stopPropagation(),children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b-2 border-gray-200 px-6 py-4 flex items-center justify-between rounded-t-xl",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900",children:"Tier Comparison"}),r.jsx("button",{onClick:x,className:"p-2 rounded-lg hover:bg-gray-100 transition-colors","aria-label":"Close comparison",children:r.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"p-6 max-h-[70vh] overflow-y-auto",children:r.jsx("div",{className:"space-y-6",children:u.map(y=>{const v=h[y.id]||[];return r.jsxs("div",{className:"border-2 border-gray-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-4 pb-2 border-b border-gray-200",children:y.name}),r.jsx("div",{className:"space-y-4",children:f.map(N=>{const w=v.filter(j=>j.group_name===N);return w.length===0?null:r.jsxs("div",{children:[r.jsx("h5",{className:"text-sm font-bold text-gray-700 uppercase tracking-wide mb-2",children:N}),r.jsx("ul",{className:"space-y-2",children:w.map(j=>r.jsx("li",{className:"flex items-start text-sm",children:j.is_included?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4 text-green-600 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsxs("span",{className:"text-gray-900",children:[j.feature_label,j.feature_value&&` - ${j.feature_value}`]})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4 text-red-400 mr-2 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),r.jsx("span",{className:"text-gray-500",children:j.feature_label})]})},j.id))})]},N)})})]},y.id)})})}),r.jsx("div",{className:"sticky bottom-0 bg-gray-50 border-t-2 border-gray-200 px-6 py-4 rounded-b-xl",children:r.jsx("button",{onClick:x,className:"w-full bg-gray-900 text-white font-semibold px-6 py-3 rounded-lg hover:bg-gray-800 transition-colors",children:"Close Comparison"})})]})})})]})})},LI=async()=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/public/services",{params:{is_active:!0}})).data.services.map(t=>({id:t.id,name:t.name,slug:t.slug})),$I=async e=>{await te.post("https://123project-build-a-production-ready-w.launchpulse.ai/api/public/contact-inquiry",e,{headers:{"Content-Type":"application/json"}})},RI=()=>{const e=ae(p=>p.show_toast),[t,n]=k.useState({name:"",email:"",phone:"",service_interested_in:"",message:"",honeypot:""}),[s,a]=k.useState({name:null,email:null,phone:null,service_interested_in:null,message:null,general:null}),[i,o]=k.useState(!1),{data:l,isLoading:c,error:d}=pe({queryKey:["services-dropdown"],queryFn:LI,staleTime:6e4,refetchOnWindowFocus:!1}),m=ve({mutationFn:$I,onSuccess:()=>{o(!0),n({name:"",email:"",phone:"",service_interested_in:"",message:"",honeypot:""}),a({name:null,email:null,phone:null,service_interested_in:null,message:null,general:null}),e({type:"success",message:"Thank you! We'll respond within 24 hours.",duration:5e3}),setTimeout(()=>{o(!1)},1e4)},onError:p=>{var v,N;const y=((N=(v=p.response)==null?void 0:v.data)==null?void 0:N.message)||p.message||"Failed to submit inquiry";a(w=>({...w,general:y})),e({type:"error",message:"Failed to submit inquiry. Please try again.",duration:5e3})}});k.useEffect(()=>{d&&e({type:"error",message:"Failed to load services. Please refresh the page.",duration:5e3})},[d,e]);const u=(p,y)=>{n(v=>({...v,[p]:y})),a(v=>({...v,[p]:null,general:null}))},h=p=>{const y=t[p];switch(p){case"name":return!y||y.trim().length===0?"Name is required":null;case"email":return!y||y.trim().length===0?"Email is required":/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(y)?null:"Please enter a valid email address";case"service_interested_in":return!y||y===""?"Please select a service":null;case"message":return!y||y.trim().length===0?"Message is required":y.trim().length<10?"Message must be at least 10 characters":null;default:return null}},f=p=>{const y=h(p);a(v=>({...v,[p]:y}))},b=()=>{const p={name:h("name"),email:h("email"),phone:null,service_interested_in:h("service_interested_in"),message:h("message"),general:null};return a(p),!Object.values(p).some(y=>y!==null)},g=async p=>{if(p.preventDefault(),t.honeypot&&t.honeypot.length>0){o(!0),e({type:"success",message:"Thank you! We'll respond within 24 hours.",duration:5e3});return}if(!b()){e({type:"error",message:"Please fix the errors in the form",duration:3e3});return}const y={name:t.name.trim(),email:t.email.trim().toLowerCase(),phone:t.phone.trim()||null,service_interested_in:t.service_interested_in||null,message:t.message.trim()};m.mutate(y)},x=()=>{window.open("https://wa.me/353874700356","_blank","noopener,noreferrer")};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("div",{className:"bg-white border-b-2 border-black",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 leading-tight mb-4",children:"Let's Talk About Your Project"}),r.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-3xl mx-auto",children:"Get in touch with us through WhatsApp, email, or submit an inquiry below. We typically respond within 24 hours."})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-12 lg:gap-16",children:[r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Connect with us"}),r.jsxs("button",{onClick:x,className:"w-full bg-yellow-400 hover:bg-yellow-500 text-black font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 flex items-center justify-center space-x-3 text-lg",children:[r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413Z"})}),r.jsx("span",{children:"Message us on WhatsApp"})]}),r.jsxs("div",{className:"mt-8 space-y-4",children:[r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("svg",{className:"w-6 h-6 text-gray-600 mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),r.jsx("a",{href:"mailto:info@sultanstamp.com",className:"text-lg font-medium text-gray-900 hover:text-yellow-600 transition-colors",children:"info@sultanstamp.com"})]})]}),r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("svg",{className:"w-6 h-6 text-gray-600 mt-1 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Phone"}),r.jsx("a",{href:"tel:+353874700356",className:"text-lg font-medium text-gray-900 hover:text-yellow-600 transition-colors",children:"+353 87 470 0356"})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-6",children:"Follow Us"}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("a",{href:"https://linktr.ee/Sultanstamp",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gray-900 text-white rounded-lg hover:bg-gray-800 transition-all duration-200 hover:shadow-lg",children:[r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M7.953 15.066c-.08.163-.08.324-.08.486.08.517.528.897 1.052.89a1.074 1.074 0 001.052-.89c0-.163 0-.324-.08-.486l-1.97-4.102-1.97 4.102zm12.04-9.482l-7.977 16.482a.962.962 0 01-.862.523.962.962 0 01-.862-.523L.308 5.584a1.074 1.074 0 011.052-1.474H22.64c.608 0 1.052.73.862 1.474z"})}),r.jsx("span",{className:"font-medium",children:"Linktree"})]}),r.jsxs("a",{href:"https://www.instagram.com/sultanstamp",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 px-4 py-3 bg-gradient-to-br from-purple-600 to-pink-500 text-white rounded-lg hover:from-purple-700 hover:to-pink-600 transition-all duration-200 hover:shadow-lg",children:[r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12 2.163c3.204 0 3.584.012 4.85.07 3.252.148 4.771 1.691 4.919 4.919.058 1.265.069 1.645.069 4.849 0 3.205-.012 3.584-.069 4.849-.149 3.225-1.664 4.771-4.919 4.919-1.266.058-1.644.07-4.85.07-3.204 0-3.584-.012-4.849-.07-3.26-.149-4.771-1.699-4.919-4.92-.058-1.265-.07-1.644-.07-4.849 0-3.204.013-3.583.07-4.849.149-3.227 1.664-4.771 4.919-4.919 1.266-.057 1.645-.069 4.849-.069zm0-2.163c-3.259 0-3.667.014-4.947.072-4.358.2-6.78 2.618-6.98 6.98-.059 1.281-.073 1.689-.073 4.948 0 3.259.014 3.668.072 4.948.2 4.358 2.618 6.78 6.98 6.98 1.281.058 1.689.072 4.948.072 3.259 0 3.668-.014 4.948-.072 4.354-.2 6.782-2.618 6.979-6.98.059-1.28.073-1.689.073-4.948 0-3.259-.014-3.667-.072-4.947-.196-4.354-2.617-6.78-6.979-6.98-1.281-.059-1.69-.073-4.949-.073zm0 5.838c-3.403 0-6.162 2.759-6.162 6.162s2.759 6.163 6.162 6.163 6.162-2.759 6.162-6.163c0-3.403-2.759-6.162-6.162-6.162zm0 10.162c-2.209 0-4-1.79-4-4 0-2.209 1.791-4 4-4s4 1.791 4 4c0 2.21-1.791 4-4 4zm6.406-11.845c-.796 0-1.441.645-1.441 1.44s.645 1.44 1.441 1.44c.795 0 1.439-.645 1.439-1.44s-.644-1.44-1.439-1.44z"})}),r.jsx("span",{className:"font-medium",children:"Instagram"})]}),r.jsxs("a",{href:"https://www.linkedin.com/company/sultanstamp",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 hover:shadow-lg",children:[r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M20.447 20.452h-3.554v-5.569c0-1.328-.027-3.037-1.852-3.037-1.853 0-2.136 1.445-2.136 2.939v5.667H9.351V9h3.414v1.561h.046c.477-.9 1.637-1.85 3.37-1.85 3.601 0 4.267 2.37 4.267 5.455v6.286zM5.337 7.433c-1.144 0-2.063-.926-2.063-2.065 0-1.138.92-2.063 2.063-2.063 1.14 0 2.064.925 2.064 2.063 0 1.139-.925 2.065-2.064 2.065zm1.782 13.019H3.555V9h3.564v11.452zM22.225 0H1.771C.792 0 0 .774 0 1.729v20.542C0 23.227.792 24 1.771 24h20.451C23.2 24 24 23.227 24 22.271V1.729C24 .774 23.2 0 22.222 0h.003z"})}),r.jsx("span",{className:"font-medium",children:"LinkedIn"})]}),r.jsxs("a",{href:"https://www.tiktok.com/@sultanstamp",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 px-4 py-3 bg-black text-white rounded-lg hover:bg-gray-900 transition-all duration-200 hover:shadow-lg",children:[r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M12.525.02c1.31-.02 2.61-.01 3.91-.02.08 1.53.63 3.09 1.75 4.17 1.12 1.11 2.7 1.62 4.24 1.79v4.03c-1.44-.05-2.89-.35-4.2-.97-.57-.26-1.1-.59-1.62-.93-.01 2.92.01 5.84-.02 8.75-.08 1.4-.54 2.79-1.35 3.94-1.31 1.92-3.58 3.17-5.91 3.21-1.43.08-2.86-.31-4.08-1.03-2.02-1.19-3.44-3.37-3.65-5.71-.02-.5-.03-1-.01-1.49.18-1.9 1.12-3.72 2.58-4.96 1.66-1.44 3.98-2.13 6.15-1.72.02 1.48-.04 2.96-.04 4.44-.99-.32-2.15-.23-3.02.37-.63.41-1.11 1.04-1.36 1.75-.21.51-.15 1.07-.14 1.61.24 1.64 1.82 3.02 3.5 2.87 1.12-.01 2.19-.66 2.77-1.61.19-.33.4-.67.41-1.06.1-1.79.06-3.57.07-5.36.01-4.03-.01-8.05.02-12.07z"})}),r.jsx("span",{className:"font-medium",children:"TikTok"})]}),r.jsxs("a",{href:"https://www.facebook.com/sultanstamp",target:"_blank",rel:"noopener noreferrer",className:"flex items-center justify-center space-x-2 px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-all duration-200 hover:shadow-lg",children:[r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M24 12.073c0-6.627-5.373-12-12-12s-12 5.373-12 12c0 5.99 4.388 10.954 10.125 11.854v-8.385H7.078v-3.47h3.047V9.43c0-3.007 1.792-4.669 4.533-4.669 1.312 0 2.686.235 2.686.235v2.953H15.83c-1.491 0-1.956.925-1.956 1.874v2.25h3.328l-.532 3.47h-2.796v8.385C19.612 23.027 24 18.062 24 12.073z"})}),r.jsx("span",{className:"font-medium",children:"Facebook"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-4",children:"Business Hours"}),r.jsxs("div",{className:"space-y-2 text-gray-600",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Monday - Friday:"}),r.jsx("span",{children:"9:00 AM - 6:00 PM"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Saturday:"}),r.jsx("span",{children:"10:00 AM - 4:00 PM"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-medium",children:"Sunday:"}),r.jsx("span",{children:"Closed"})]})]}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:r.jsxs("p",{className:"text-sm text-gray-600",children:[r.jsx("strong",{className:"text-gray-900",children:"Emergency bookings available:"})," We offer emergency bookings outside regular hours for urgent projects (+20% urgent fee applies)."]})})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Send us an inquiry"}),i?r.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-lg p-6 text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-green-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-xl font-bold text-green-900 mb-2",children:"Message Sent!"}),r.jsx("p",{className:"text-green-700 mb-4",children:"Thank you! We'll respond within 24 hours."}),r.jsx("button",{onClick:()=>o(!1),className:"text-green-600 hover:text-green-700 font-medium text-sm underline",children:"Send another message"})]}):r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[s.general&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg",children:r.jsx("p",{className:"text-sm font-medium",children:s.general})}),r.jsxs("div",{style:{position:"absolute",left:"-9999px",opacity:0},"aria-hidden":"true",children:[r.jsx("label",{htmlFor:"honeypot",children:"Leave this field empty"}),r.jsx("input",{id:"honeypot",name:"honeypot",type:"text",tabIndex:-1,autoComplete:"off",value:t.honeypot,onChange:p=>n(y=>({...y,honeypot:p.target.value}))})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Name ",r.jsx("span",{className:"text-yellow-600",children:"*"})]}),r.jsx("input",{id:"name",name:"name",type:"text",required:!0,value:t.name,onChange:p=>u("name",p.target.value),onBlur:()=>f("name"),className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 text-base ${s.name?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-yellow-500 focus:ring-4 focus:ring-yellow-100"}`,placeholder:"Your full name"}),s.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-2",children:["Email ",r.jsx("span",{className:"text-yellow-600",children:"*"})]}),r.jsx("input",{id:"email",name:"email",type:"email",required:!0,value:t.email,onChange:p=>u("email",p.target.value),onBlur:()=>f("email"),className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 text-base ${s.email?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-yellow-500 focus:ring-4 focus:ring-yellow-100"}`,placeholder:"your.email@example.com"}),s.email&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.email})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone ",r.jsx("span",{className:"text-gray-400 text-xs",children:"(optional)"})]}),r.jsx("input",{id:"phone",name:"phone",type:"tel",value:t.phone,onChange:p=>u("phone",p.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-500 focus:ring-4 focus:ring-yellow-100 transition-all duration-200 text-base",placeholder:"+353 87 470 0356"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"service_interested_in",className:"block text-sm font-medium text-gray-700 mb-2",children:["Service Interested In ",r.jsx("span",{className:"text-yellow-600",children:"*"})]}),c?r.jsxs("div",{className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 bg-gray-50 flex items-center space-x-2",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-gray-500 text-sm",children:"Loading services..."})]}):r.jsxs("select",{id:"service_interested_in",name:"service_interested_in",required:!0,value:t.service_interested_in,onChange:p=>u("service_interested_in",p.target.value),onBlur:()=>f("service_interested_in"),className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 text-base ${s.service_interested_in?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-yellow-500 focus:ring-4 focus:ring-yellow-100"}`,children:[r.jsx("option",{value:"",children:"Select a service..."}),l==null?void 0:l.map(p=>r.jsx("option",{value:p.slug,children:p.name},p.id))]}),s.service_interested_in&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:s.service_interested_in})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"message",className:"block text-sm font-medium text-gray-700 mb-2",children:["Message ",r.jsx("span",{className:"text-yellow-600",children:"*"})]}),r.jsx("textarea",{id:"message",name:"message",required:!0,rows:6,value:t.message,onChange:p=>u("message",p.target.value),onBlur:()=>f("message"),className:`w-full px-4 py-3 rounded-lg border-2 transition-all duration-200 text-base resize-vertical ${s.message?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-yellow-500 focus:ring-4 focus:ring-yellow-100"}`,placeholder:"Tell us about your project... (minimum 10 characters)"}),r.jsxs("div",{className:"flex justify-between items-center mt-1",children:[s.message?r.jsx("p",{className:"text-sm text-red-600",children:s.message}):r.jsx("p",{className:"text-xs text-gray-500",children:"Minimum 10 characters"}),r.jsxs("p",{className:"text-xs text-gray-400",children:[t.message.length," characters"]})]})]}),r.jsx("button",{type:"submit",disabled:m.isPending||c,className:"w-full bg-yellow-400 hover:bg-yellow-500 text-black font-semibold px-8 py-4 rounded-lg shadow-lg hover:shadow-xl transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed flex items-center justify-center space-x-2 text-lg",children:m.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{children:"Sending..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),r.jsx("span",{children:"Send Message"})]})}),r.jsxs("p",{className:"text-xs text-gray-500 text-center",children:["By submitting this form, you agree to our"," ",r.jsx("a",{href:"/policies",className:"text-yellow-600 hover:text-yellow-700 underline",children:"Terms of Service"})]})]})]})]})}),r.jsx("div",{className:"bg-white border-t-2 border-black",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-yellow-400 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:"Fast Response"}),r.jsx("p",{className:"text-gray-600",children:"We typically respond to inquiries within 24 hours"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-yellow-400 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m5.618-4.016A11.955 11.955 0 0112 2.944a11.955 11.955 0 01-8.618 3.04A12.02 12.02 0 003 9c0 5.591 3.824 10.29 9 11.622 5.176-1.332 9-6.03 9-11.622 0-1.042-.133-2.052-.382-3.016z"})})}),r.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:"No Spam"}),r.jsx("p",{className:"text-gray-600",children:"Your information is safe and never shared with third parties"})]}),r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-yellow-400 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-black",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})})}),r.jsx("h4",{className:"text-lg font-bold text-gray-900 mb-2",children:"Direct Support"}),r.jsx("p",{className:"text-gray-600",children:"Speak directly with our team via WhatsApp or email"})]})]})})})]})})},HC="https://123project-build-a-production-ready-w.launchpulse.ai",II=async(e,t)=>{const n={page:String(t),limit:"20"};return e&&(n.category=e),(await te.get(`${HC}/api/public/gallery`,{params:n})).data},DI=async()=>(await te.get(`${HC}/api/public/service-categories`)).data,FI=()=>{var A;const[e,t]=Ye(),n=e.get("category"),s=e.get("page"),a=s?parseInt(s,10):1,[i,o]=k.useState({is_open:!1,current_image_index:0,images:[]}),l=ae(E=>E.show_toast),{data:c,isLoading:d}=pe({queryKey:["service-categories"],queryFn:DI,staleTime:1e3*60*60,retry:1}),m=c||[],{data:u,isLoading:h,error:f}=pe({queryKey:["gallery-images",n,a],queryFn:()=>II(n,a),staleTime:1e3*60*5,retry:1}),b=(u==null?void 0:u.images)||[],g=(u==null?void 0:u.total)||0,x=(u==null?void 0:u.total_pages)||0,p=d||h,y=f?f.message:null,v=E=>{const R={};E&&(R.category=E),R.page="1",t(R)},N=E=>{const R={};n&&(R.category=n),R.page=String(E),t(R),window.scrollTo({top:0,behavior:"smooth"})},w=E=>{o({is_open:!0,current_image_index:E,images:b})},j=()=>{o({is_open:!1,current_image_index:0,images:[]})},_=E=>{const R=i.images.length;o(I=>{let O;return E==="next"?O=(I.current_image_index+1)%R:O=(I.current_image_index-1+R)%R,{...I,current_image_index:O}})};k.useEffect(()=>{const E=R=>{i.is_open&&(R.key==="Escape"?j():R.key==="ArrowLeft"?_("prev"):R.key==="ArrowRight"&&_("next"))};return window.addEventListener("keydown",E),()=>{window.removeEventListener("keydown",E)}},[i.is_open,i.images.length]),k.useEffect(()=>(i.is_open?document.body.style.overflow="hidden":document.body.style.overflow="",()=>{document.body.style.overflow=""}),[i.is_open]),k.useEffect(()=>{y&&l({type:"error",message:y||"Failed to load gallery images",duration:5e3})},[y,l]);const S=i.is_open?i.images[i.current_image_index]:null,T=n;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-b-2 border-black",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 leading-tight mb-4",children:"Our Portfolio"}),r.jsx("p",{className:"text-lg lg:text-xl text-gray-600 max-w-3xl mx-auto leading-relaxed",children:"Explore our previous work across printing, signage, and branding projects. Each piece demonstrates our commitment to quality and precision."})]})})}),r.jsx("div",{className:"sticky top-0 z-40 bg-white border-b border-gray-200 shadow-sm",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:[r.jsxs("div",{className:"hidden md:flex items-center space-x-3 overflow-x-auto",children:[r.jsx("button",{onClick:()=>v(null),className:`px-6 py-2 rounded-full font-medium transition-all duration-200 whitespace-nowrap ${T?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-yellow-400 text-black shadow-md"}`,children:"All"}),m.map(E=>r.jsx("button",{onClick:()=>v(E.slug),className:`px-6 py-2 rounded-full font-medium transition-all duration-200 whitespace-nowrap ${T===E.slug?"bg-yellow-400 text-black shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:E.name},E.id))]}),r.jsxs("div",{className:"md:hidden flex items-center space-x-3 overflow-x-auto scrollbar-hide snap-x snap-mandatory",children:[r.jsx("button",{onClick:()=>v(null),className:`px-5 py-2 rounded-full font-medium transition-all duration-200 whitespace-nowrap snap-start flex-shrink-0 ${T?"bg-gray-100 text-gray-700":"bg-yellow-400 text-black shadow-md"}`,children:"All"}),m.map(E=>r.jsx("button",{onClick:()=>v(E.slug),className:`px-5 py-2 rounded-full font-medium transition-all duration-200 whitespace-nowrap snap-start flex-shrink-0 ${T===E.slug?"bg-yellow-400 text-black shadow-md":"bg-gray-100 text-gray-700"}`,children:E.name},E.id))]})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16",children:[!p&&r.jsx("div",{className:"mb-8",children:r.jsx("p",{className:"text-gray-600 text-base",children:T?r.jsxs(r.Fragment,{children:["Showing ",b.length," of ",g," projects in"," ",r.jsx("span",{className:"font-semibold",children:((A=m.find(E=>E.slug===T))==null?void 0:A.name)||T})]}):r.jsxs(r.Fragment,{children:["Showing ",b.length," of ",g," projects"]})})}),p&&r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-6",children:[...Array(8)].map((E,R)=>r.jsx("div",{className:"aspect-square bg-gray-200 rounded-lg animate-pulse"},`skeleton-${R}`))}),y&&!p&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Failed to Load Gallery"}),r.jsx("p",{className:"text-gray-600 mb-6",children:y}),r.jsx("button",{onClick:()=>window.location.reload(),className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors",children:"Retry"})]}),!p&&!y&&b.length===0&&r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-gray-100 rounded-full mb-6",children:r.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"No Images Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:T?"No images found in this category. Try selecting a different filter.":"No gallery images available yet."}),T&&r.jsx("button",{onClick:()=>v(null),className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors",children:"View All Images"})]}),!p&&!y&&b.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"grid grid-cols-2 md:grid-cols-3 lg:grid-cols-4 gap-4 lg:gap-6 mb-12",children:b.map((E,R)=>{let I=[];try{E.categories&&(I=JSON.parse(E.categories))}catch{I=[]}return r.jsxs("div",{className:"group relative aspect-square overflow-hidden rounded-lg bg-gray-100 cursor-pointer shadow-md hover:shadow-xl transition-all duration-200",onClick:()=>w(R),children:[r.jsx("img",{src:E.thumbnail_url||E.image_url,alt:E.alt_text||E.title,loading:"lazy",className:"w-full h-full object-cover transition-transform duration-300 group-hover:scale-105"}),r.jsxs("div",{className:"absolute inset-0 bg-black bg-opacity-0 group-hover:bg-opacity-60 transition-all duration-300 flex flex-col items-center justify-center p-4",children:[r.jsx("p",{className:"text-white font-semibold text-base lg:text-lg text-center mb-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0",children:E.title}),I.length>0&&r.jsx("p",{className:"text-yellow-400 text-sm opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0",children:I[0]}),r.jsx("p",{className:"text-white text-sm mt-2 opacity-0 group-hover:opacity-100 transition-opacity duration-300 transform translate-y-2 group-hover:translate-y-0",children:"View Project"})]})]},E.id)})}),x>1&&r.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[r.jsx("button",{onClick:()=>N(a-1),disabled:a===1,className:"px-4 py-2 bg-white border-2 border-black text-black font-semibold rounded-lg hover:bg-black hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-black",children:"Previous"}),r.jsx("div",{className:"flex items-center space-x-1",children:[...Array(x)].map((E,R)=>{const I=R+1,O=I===1||I===x||I===a||Math.abs(I-a)===1;return I===2&&a>3||I===x-1&&a<x-2?r.jsx("span",{className:"px-2 text-gray-500",children:"..."},`ellipsis-${I}`):O?r.jsx("button",{onClick:()=>N(I),className:`w-10 h-10 rounded-lg font-semibold transition-colors ${a===I?"bg-yellow-400 text-black":"bg-white border border-gray-300 text-gray-700 hover:bg-gray-100"}`,children:I},I):null})}),r.jsx("button",{onClick:()=>N(a+1),disabled:a===x,className:"px-4 py-2 bg-white border-2 border-black text-black font-semibold rounded-lg hover:bg-black hover:text-white transition-colors disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:bg-white disabled:hover:text-black",children:"Next"})]})]})]}),i.is_open&&S&&r.jsxs("div",{className:"fixed inset-0 z-[1000] bg-black bg-opacity-90 flex items-center justify-center",onClick:j,children:[r.jsx("button",{onClick:j,className:"absolute top-4 right-4 z-10 w-12 h-12 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full flex items-center justify-center transition-all duration-200","aria-label":"Close lightbox",children:r.jsx("svg",{className:"w-8 h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),i.images.length>1&&r.jsx("button",{onClick:E=>{E.stopPropagation(),_("prev")},className:"absolute left-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 lg:w-14 lg:h-14 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full flex items-center justify-center transition-all duration-200","aria-label":"Previous image",children:r.jsx("svg",{className:"w-6 h-6 lg:w-8 lg:h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),i.images.length>1&&r.jsx("button",{onClick:E=>{E.stopPropagation(),_("next")},className:"absolute right-4 top-1/2 -translate-y-1/2 z-10 w-12 h-12 lg:w-14 lg:h-14 bg-white bg-opacity-20 hover:bg-opacity-30 rounded-full flex items-center justify-center transition-all duration-200","aria-label":"Next image",children:r.jsx("svg",{className:"w-6 h-6 lg:w-8 lg:h-8 text-white",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),r.jsxs("div",{className:"relative max-w-7xl max-h-[90vh] mx-4",onClick:E=>E.stopPropagation(),children:[r.jsx("img",{src:S.image_url,alt:S.alt_text||S.title,className:"max-w-full max-h-[90vh] object-contain rounded-lg shadow-2xl"}),r.jsxs("div",{className:"absolute bottom-0 left-0 right-0 bg-black bg-opacity-70 text-white p-4 rounded-b-lg",children:[r.jsx("h3",{className:"text-lg lg:text-xl font-bold mb-1",children:S.title}),S.description&&r.jsx("p",{className:"text-sm lg:text-base text-gray-300",children:S.description}),r.jsxs("p",{className:"text-xs lg:text-sm text-gray-400 mt-2",children:["Image ",i.current_image_index+1," of ",i.images.length]})]})]})]}),r.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-t-2 border-black mt-16",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-16 text-center",children:[r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Ready to Start Your Project?"}),r.jsx("p",{className:"text-lg text-gray-600 mb-8",children:"Let's bring your vision to life with the same quality and attention to detail."}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-center space-y-4 sm:space-y-0 sm:space-x-4",children:[r.jsx(ie,{to:"/quote/start",className:"w-full sm:w-auto px-8 py-4 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-colors shadow-lg hover:shadow-xl text-center",children:"Get a Quote"}),r.jsx(ie,{to:"/contact",className:"w-full sm:w-auto px-8 py-4 bg-white border-2 border-black text-black font-semibold rounded-lg hover:bg-black hover:text-white transition-colors text-center",children:"Contact Us"})]})]})})]})})},BI=async()=>{const e="https://123project-build-a-production-ready-w.launchpulse.ai";try{const t=await te.get(`${e}/api/public/marketing-content`,{params:{page_key:"about"}}),n={};t.data.forEach(a=>{n[a.section_key]=a.content});let s=[];if(n.values_json)try{s=JSON.parse(n.values_json)}catch{s=Km()}else s=Km();return{brand_purpose:n.brand_purpose||yy(),origin_story:n.origin_story||"",values:s}}catch{return{brand_purpose:yy(),origin_story:"",values:Km()}}},yy=()=>"Empower businesses through personalised visual identity while building the infrastructure our communities have been missing.",Km=()=>[{name:"Personalisation First",description:"Every project is tailored to your unique requirements. We don't do one-size-fits-all. Your brand deserves custom solutions that reflect your identity."},{name:"Quality Over Convenience",description:"We refuse to compromise on standards. No shortcuts, no rushed work. Consistent high quality is our non-negotiable baseline, regardless of timeline or tier."},{name:"Discipline in Every Detail",description:"Methodical, systematic approach to every project. From file preparation to final delivery, our disciplined process ensures nothing falls through the cracks."},{name:"Reliability",description:"Dependable timelines, clear communication, and commitments we honor. When we say a deadline, we mean it. When we say we'll call, we call."},{name:"Community Impact",description:"Building the infrastructure our communities have been missing. We're not just printing signswe're creating access to professional branding for businesses that need it most."},{name:"Transparency",description:"Clear pricing with no hidden fees. Honest communication about what's possible and what's not. You always know where your project stands and what you're paying for."},{name:"Practical Innovation",description:"Technology that serves real business needs, not gimmicks. Our systems exist to make your experience better, not to complicate it. Innovation with purpose."}],zI=()=>{const e=Le();ae(o=>o.authentication_state.authentication_status.is_authenticated);const{data:t,isLoading:n,error:s}=pe({queryKey:["about-content"],queryFn:BI,staleTime:1e3*60*60,retry:1,refetchOnWindowFocus:!1}),a=()=>{e("/quote/start")},i=()=>{e("/contact")};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsx("section",{className:"py-16 lg:py-24 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-gray-50 to-white",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("h1",{className:"text-4xl lg:text-5xl font-bold text-gray-900 mb-6 leading-tight",children:"Our Purpose"}),r.jsx("div",{className:"h-1 w-24 bg-yellow-400 mx-auto mb-8"})]}),n?r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mx-auto"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded w-5/6 mx-auto"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3 mx-auto"})]}):r.jsx("div",{className:"text-center",children:r.jsx("p",{className:"text-xl lg:text-2xl text-gray-800 leading-relaxed font-medium",children:(t==null?void 0:t.brand_purpose)||yy()})})]})}),(t==null?void 0:t.origin_story)&&r.jsx("section",{className:"py-16 lg:py-24 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-8 text-center",children:"Our Story"}),r.jsx("div",{className:"prose prose-lg max-w-none",children:r.jsx("div",{className:"text-gray-700 leading-relaxed",dangerouslySetInnerHTML:{__html:t.origin_story}})})]})}),r.jsx("section",{className:"py-16 lg:py-24 px-4 sm:px-6 lg:px-8 bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-16",children:[r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4",children:"Our Values"}),r.jsx("div",{className:"h-1 w-24 bg-yellow-400 mx-auto mb-6"}),r.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"These aren't just words on a wall. They're the principles that guide every decision we make."})]}),n?r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[1,2,3,4,5,6,7].map(o=>r.jsxs("div",{className:"animate-pulse bg-white rounded-xl p-8 shadow-lg",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2 mb-4"}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6"})]})]},o))}):r.jsx("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:((t==null?void 0:t.values)||Km()).map((o,l)=>r.jsx("div",{className:"bg-white rounded-xl p-8 shadow-lg border border-gray-100 hover:shadow-xl transition-all duration-200",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("div",{className:"w-12 h-12 bg-yellow-400 rounded-lg flex items-center justify-center",children:r.jsx("span",{className:"text-2xl font-bold text-black",children:l+1})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-3",children:o.name}),r.jsx("p",{className:"text-gray-700 leading-relaxed",children:o.description})]})]})},l))})]})}),r.jsx("section",{className:"py-20 lg:py-28 px-4 sm:px-6 lg:px-8 bg-gradient-to-br from-gray-900 to-black",children:r.jsxs("div",{className:"max-w-4xl mx-auto text-center",children:[r.jsx("h2",{className:"text-3xl lg:text-4xl font-bold text-white mb-4",children:"Ready to Get Started?"}),r.jsx("p",{className:"text-xl text-gray-300 mb-8",children:"Let's bring your vision to life with disciplined, premium quality work."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center items-center",children:[r.jsx("button",{onClick:a,className:"w-full sm:w-auto bg-yellow-400 text-black px-8 py-4 rounded-lg text-lg font-semibold hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:"Get a Quote"}),r.jsx("button",{onClick:i,className:"w-full sm:w-auto bg-transparent border-2 border-white text-white px-8 py-4 rounded-lg text-lg font-semibold hover:bg-white hover:text-black transition-all duration-200",children:"Contact Us"})]})]})}),s&&r.jsx("div",{className:"fixed bottom-4 right-4 bg-yellow-50 border border-yellow-200 text-yellow-800 px-6 py-4 rounded-lg shadow-lg max-w-md z-50",children:r.jsxs("p",{className:"text-sm",children:[r.jsx("strong",{children:"Note:"})," Displaying default content. Some customizations may not be visible."]})})]})})},qI="https://123project-build-a-production-ready-w.launchpulse.ai",UI=async e=>{const n=(await te.get(`${qI}/api/public/case-studies/${e}`)).data;let s=[];if(n.additional_images)try{s=JSON.parse(n.additional_images)}catch(a){console.error("Failed to parse additional_images:",a)}return{case_study:{id:n.id,slug:n.slug,title:n.title,service_id:n.service_id,tier_id:n.tier_id,gallery_image_id:n.gallery_image_id,description:n.description,client_testimonial:n.client_testimonial,additional_images:n.additional_images,is_published:n.is_published,created_at:n.created_at,updated_at:n.updated_at},service:{id:n.service_id,name:n.service_name},tier:{id:n.tier_id,name:n.tier_name},gallery_image:{image_url:n.image_url},additional_images:s}},WI=()=>{const{case_study_slug:e}=fr(),t=Le(),n=ae(h=>h.authentication_state.authentication_status.is_authenticated),{data:s,isLoading:a,error:i}=pe({queryKey:["case_study",e],queryFn:()=>UI(e||""),enabled:!!e,staleTime:6e4,retry:1}),o=()=>{if(!(s!=null&&s.service))return;const h=`/app/quotes/new?service=${s.service.id}`;t(n?h:`/login?returnTo=${encodeURIComponent(h)}`)};if(a)return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsx("div",{className:"h-4 bg-gray-200 rounded w-64 animate-pulse"})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[r.jsxs("div",{className:"mb-6",children:[r.jsx("div",{className:"h-10 bg-gray-200 rounded w-3/4 mb-4 animate-pulse"}),r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-32 animate-pulse"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded w-24 animate-pulse"})]})]}),r.jsx("div",{className:"w-full aspect-[16/9] bg-gray-200 rounded-xl mb-8 animate-pulse"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded animate-pulse"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6 animate-pulse"})]})}),r.jsx("div",{children:r.jsx("div",{className:"h-48 bg-gray-200 rounded-lg animate-pulse"})})]})]})]})});if(i||!s)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-white flex items-center justify-center px-4",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Case Study Not Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The case study you're looking for doesn't exist or has been removed."}),r.jsx(ie,{to:"/gallery",className:"inline-flex items-center px-6 py-3 bg-yellow-400 text-black text-base font-semibold rounded-lg hover:bg-yellow-500 transition-colors duration-200",children:"Back to Gallery"})]})})});const{case_study:l,service:c,tier:d,gallery_image:m,additional_images:u}=s;return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"bg-gray-50 border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("nav",{className:"flex items-center space-x-2 text-sm",children:[r.jsx(ie,{to:"/gallery",className:"text-gray-600 hover:text-gray-900 transition-colors",children:"Gallery"}),r.jsx("svg",{className:"h-4 w-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-gray-900 font-medium",children:l.title})]})})}),r.jsx("div",{className:"bg-white min-h-screen",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8 lg:py-12",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-4 leading-tight",children:l.title}),r.jsxs("div",{className:"flex flex-wrap gap-3",children:[r.jsx("span",{className:"inline-flex items-center px-4 py-1.5 bg-gray-100 text-gray-900 text-sm font-semibold rounded-full border border-gray-300",children:c.name}),r.jsxs("span",{className:"inline-flex items-center px-4 py-1.5 bg-yellow-400 text-black text-sm font-semibold rounded-full",children:[d.name," Tier"]})]})]}),r.jsx("div",{className:"mb-8 lg:mb-12",children:r.jsx("div",{className:"w-full aspect-[16/9] rounded-xl overflow-hidden bg-gray-100 shadow-lg",children:r.jsx("img",{src:m.image_url,alt:l.title,className:"w-full h-full object-cover",loading:"eager"})})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8 lg:gap-12",children:[r.jsxs("div",{className:"lg:col-span-2",children:[l.client_testimonial&&r.jsx("div",{className:"mb-8 p-6 bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl border border-blue-100",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("svg",{className:"h-8 w-8 text-blue-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M14.017 21v-7.391c0-5.704 3.731-9.57 8.983-10.609l.995 2.151c-2.432.917-3.995 3.638-3.995 5.849h4v10h-9.983zm-14.017 0v-7.391c0-5.704 3.748-9.57 9-10.609l.996 2.151c-2.433.917-3.996 3.638-3.996 5.849h3.983v10h-9.983z"})}),r.jsx("div",{children:r.jsxs("blockquote",{className:"text-lg text-gray-900 italic leading-relaxed",children:['"',l.client_testimonial,'"']})})]})}),l.description&&r.jsxs("div",{className:"prose prose-lg max-w-none mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Project Overview"}),r.jsx("div",{className:"text-gray-700 leading-relaxed whitespace-pre-line",dangerouslySetInnerHTML:{__html:l.description}})]}),u.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Project Gallery"}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:u.map((h,f)=>r.jsxs("div",{className:"aspect-square rounded-lg overflow-hidden bg-gray-100 shadow-md hover:shadow-xl transition-shadow duration-200",children:[r.jsx("img",{src:h.url,alt:h.caption||`Project image ${f+1}`,className:"w-full h-full object-cover hover:scale-105 transition-transform duration-200",loading:"lazy"}),h.caption&&r.jsx("p",{className:"text-sm text-gray-600 mt-2 px-2",children:h.caption})]},f))})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 shadow-lg overflow-hidden sticky top-8",children:[r.jsx("div",{className:"bg-gradient-to-r from-gray-900 to-gray-800 px-6 py-4",children:r.jsx("h3",{className:"text-lg font-bold text-white",children:"Project Details"})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("dt",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Service"}),r.jsx("dd",{className:"text-base font-medium text-gray-900",children:c.name})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("dt",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Service Tier"}),r.jsx("dd",{className:"text-base font-medium text-gray-900",children:d.name})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("dt",{className:"text-sm font-semibold text-gray-500 uppercase tracking-wide mb-2",children:"Completed"}),r.jsx("dd",{className:"text-base font-medium text-gray-900",children:new Date(l.created_at).toLocaleDateString("en-US",{year:"numeric",month:"long"})})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("button",{onClick:o,className:"w-full bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold text-base hover:bg-yellow-500 transition-all duration-200 shadow-md hover:shadow-lg focus:outline-none focus:ring-4 focus:ring-yellow-100",children:"Request a Similar Project"}),r.jsxs("p",{className:"text-xs text-gray-500 text-center mt-3",children:["Get a custom quote for ",c.name]})]}),r.jsx("div",{children:r.jsx(ie,{to:"/gallery",className:"block text-center text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors",children:" Back to Gallery"})})]})]})})]}),r.jsx("div",{className:"lg:hidden mt-12 border-t border-gray-200 pt-8",children:r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-50 rounded-xl p-6 border border-blue-100",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 text-center",children:"Ready to Start Your Project?"}),r.jsxs("p",{className:"text-gray-700 mb-6 text-center",children:["Let's bring your vision to life with ",c.name]}),r.jsx("button",{onClick:o,className:"w-full bg-yellow-400 text-black px-6 py-4 rounded-lg font-semibold text-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl focus:outline-none focus:ring-4 focus:ring-yellow-100",children:"Request a Similar Project"})]})}),r.jsx("div",{className:"mt-12 pt-8 border-t border-gray-200",children:r.jsxs("div",{className:"flex flex-col sm:flex-row justify-between items-center space-y-4 sm:space-y-0",children:[r.jsxs(ie,{to:`/services/${c.id}`,className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:["Learn More About ",c.name," "]}),r.jsx(ie,{to:"/pricing",className:"text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"View Pricing & Tiers "})]})})]})})]})},VI=async()=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/public/marketing-content",{params:{page_key:"policies"},headers:{"Content-Type":"application/json"}})).data.reduce((s,a)=>(s[a.section_key]=a,s),{}),HI=()=>{const[e,t]=Ye(),[n,s]=k.useState(new Set),a=e.get("section");ae(p=>p.ui_state.is_mobile),ae(p=>p.show_toast);const{data:i={},isLoading:o,error:l}=pe({queryKey:["policy-content"],queryFn:VI,staleTime:3e5,retry:2}),c=(l==null?void 0:l.message)||null,d=[{key:"payment_terms",title:"Payment Terms",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})},{key:"tax_vat",title:"Tax/VAT Information",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})},{key:"file_requirements",title:"File Requirements",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})},{key:"refunds_cancellations",title:"Refunds & Cancellations",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h10a8 8 0 018 8v2M3 10l6 6m-6-6l6-6"})})},{key:"revisions",title:"Revision Policy",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})})},{key:"turnaround",title:"Turnaround Times",icon:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}];k.useEffect(()=>{a&&!o&&i[a]&&(s(p=>new Set([...p,a])),setTimeout(()=>{const p=document.getElementById(`section-${a}`);p&&p.scrollIntoView({behavior:"smooth",block:"start"})},100))},[a,o,i]);const m=p=>{s(y=>{const v=new Set(y);return v.has(p)?v.delete(p):v.add(p),v})},u=p=>{t({section:p}),s(y=>new Set([...y,p])),setTimeout(()=>{const y=document.getElementById(`section-${p}`);y&&y.scrollIntoView({behavior:"smooth",block:"start"})},100)},h=()=>{window.print()},f=()=>{const p=d.map(y=>y.key);s(new Set(p))},b=()=>{s(new Set)},g=p=>{var y;return((y=i[p])==null?void 0:y.content)||`No content available for ${p}`},x=p=>n.has(p);return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsx("div",{className:"bg-gradient-to-br from-gray-50 to-gray-100 border-b-2 border-black",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20",children:[r.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Policies & Terms"}),r.jsx("p",{className:"text-lg md:text-xl text-gray-600 leading-relaxed max-w-3xl",children:"Clear, transparent policies that outline our business terms, payment requirements, and service commitments."}),r.jsxs("div",{className:"mt-8 flex flex-col sm:flex-row gap-4",children:[r.jsx("button",{onClick:f,className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-all duration-200 border-2 border-gray-300",children:"Expand All Sections"}),r.jsx("button",{onClick:b,className:"px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-all duration-200 border-2 border-gray-300",children:"Collapse All"}),r.jsx("button",{onClick:h,className:"px-6 py-3 bg-white hover:bg-gray-50 text-gray-900 font-medium rounded-lg transition-all duration-200 border-2 border-gray-300",children:"Print Policies"})]})]})}),r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 py-12",children:[o&&r.jsxs("div",{className:"flex flex-col items-center justify-center py-20",children:[r.jsxs("svg",{className:"animate-spin h-12 w-12 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"text-gray-600 font-medium",children:"Loading policies..."})]}),c&&!o&&r.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-xl p-6 mb-8",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-6 h-6 text-red-600 mt-0.5 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-red-900 font-semibold mb-1",children:"Failed to load policies"}),r.jsx("p",{className:"text-red-700 text-sm",children:c})]})]})}),!o&&!c&&r.jsxs("div",{className:"mb-8 p-6 bg-gray-50 rounded-xl border border-gray-200 hidden md:block",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Jump to Section"}),r.jsx("div",{className:"grid grid-cols-2 lg:grid-cols-3 gap-3",children:d.map(p=>r.jsxs("button",{onClick:()=>u(p.key),className:`flex items-center px-4 py-2 rounded-lg text-left transition-all duration-200 ${a===p.key?"bg-yellow-400 text-black font-semibold shadow-md":"bg-white text-gray-700 hover:bg-gray-100 border border-gray-300"}`,children:[r.jsx("span",{className:"mr-2",children:p.icon}),r.jsx("span",{className:"text-sm",children:p.title})]},p.key))})]}),!o&&!c&&r.jsx("div",{className:"space-y-4",children:d.map(p=>{const y=x(p.key),v=g(p.key),N=a===p.key;return r.jsxs("div",{id:`section-${p.key}`,className:`bg-white rounded-xl border-2 transition-all duration-200 overflow-hidden ${N?"border-yellow-400 shadow-lg shadow-yellow-100":"border-gray-200 hover:border-gray-300"}`,children:[r.jsxs("button",{onClick:()=>m(p.key),className:"w-full flex items-center justify-between px-6 py-5 text-left hover:bg-gray-50 transition-colors duration-200","aria-expanded":y,"aria-controls":`content-${p.key}`,children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("div",{className:`flex-shrink-0 ${N?"text-yellow-600":"text-gray-700"}`,children:p.icon}),r.jsx("h3",{className:`text-lg md:text-xl font-semibold ${N?"text-gray-900":"text-gray-800"}`,children:p.title})]}),r.jsx("svg",{className:`w-5 h-5 text-gray-500 transition-transform duration-200 flex-shrink-0 ${y?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),y&&r.jsx("div",{id:`content-${p.key}`,className:"px-6 pb-6 pt-2 border-t border-gray-100",children:r.jsxs("div",{className:"prose prose-sm md:prose-base max-w-none",children:[r.jsx("div",{className:"text-gray-700 leading-relaxed space-y-4",dangerouslySetInnerHTML:{__html:v}}),i[p.key]&&r.jsxs("p",{className:"text-xs text-gray-500 mt-6 pt-4 border-t border-gray-200",children:["Last updated: ",new Date(i[p.key].updated_at).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric"})]})]})})]},p.key)})}),!o&&!c&&r.jsxs("div",{className:"mt-12 p-8 bg-gradient-to-br from-gray-50 to-gray-100 rounded-xl border-2 border-gray-200 text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-3",children:"Have Questions?"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-2xl mx-auto",children:"Our policies are designed to be clear and fair. If you need clarification or have specific concerns, we're here to help."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx(ie,{to:"/contact",className:"px-8 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg shadow-lg hover:shadow-xl transition-all duration-200",children:"Contact Us"}),r.jsx(ie,{to:"/quote/start",className:"px-8 py-3 bg-white hover:bg-gray-50 text-gray-900 font-semibold rounded-lg border-2 border-gray-300 transition-all duration-200",children:"Get a Quote"})]})]})]}),r.jsx("style",{children:`
          @media print {
            /* Hide navigation, buttons, and interactive elements */
            nav, button, .no-print {
              display: none !important;
            }
            
            /* Expand all sections for printing */
            [id^="content-"] {
              display: block !important;
            }
            
            /* Remove borders and shadows for cleaner print */
            .border, .shadow {
              border: none !important;
              box-shadow: none !important;
            }
            
            /* Ensure content breaks properly across pages */
            [id^="section-"] {
              page-break-inside: avoid;
            }
            
            /* Black text for printing */
            * {
              color: black !important;
            }
          }
        `})]})})},KI=()=>{const e=Le(),t=ae(o=>o.authentication_state.authentication_status.is_authenticated),n=ae(o=>o.authentication_state.current_user);Y.useEffect(()=>{t&&(n==null?void 0:n.role)==="CUSTOMER"&&e("/app/quotes/new")},[t,n,e]);const s=()=>{e("/quote/guest/new")},a=()=>{e("/login?returnTo=/app/quotes/new")},i=()=>{e("/register?returnTo=/app/quotes/new")};return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100 py-12 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"text-center mb-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-blue-600 rounded-full mb-4",children:r.jsx(Rr,{className:"w-8 h-8 text-white"})}),r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-3",children:"Get a Quote"}),r.jsx("p",{className:"text-lg text-gray-600 max-w-2xl mx-auto",children:"Choose how you'd like to proceed with your quote request"})]}),r.jsxs("div",{className:"grid md:grid-cols-3 gap-6 mb-8",children:[r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute -top-3 left-1/2 transform -translate-x-1/2 z-10",children:r.jsx("span",{className:"bg-green-500 text-white text-xs font-bold px-3 py-1 rounded-full shadow-lg",children:"RECOMMENDED"})}),r.jsx("button",{onClick:s,className:"w-full bg-white rounded-xl shadow-xl hover:shadow-2xl transition-all duration-300 p-8 border-4 border-green-500 group hover:scale-105",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mb-4 group-hover:bg-green-200 transition-colors",children:r.jsx(zs,{className:"w-8 h-8 text-green-600"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Continue as Guest"}),r.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Get a quote instantly without creating an account"}),r.jsxs("ul",{className:"text-left space-y-2 mb-6",children:[r.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[r.jsx(Qt,{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"No password required"})]}),r.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[r.jsx(Qt,{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Quick and easy"})]}),r.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[r.jsx(Qt,{className:"w-4 h-4 text-green-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Email link to track quote"})]})]}),r.jsx("div",{className:"w-full bg-green-600 text-white py-3 px-6 rounded-lg font-semibold group-hover:bg-green-700 transition-colors",children:"Start Now"})]})})]}),r.jsx("button",{onClick:a,className:"w-full bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 border-2 border-gray-200 hover:border-blue-500 group",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-blue-100 rounded-full flex items-center justify-center mb-4 group-hover:bg-blue-200 transition-colors",children:r.jsx(SC,{className:"w-8 h-8 text-blue-600"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Log In"}),r.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"Existing customer? Access your account"}),r.jsxs("ul",{className:"text-left space-y-2 mb-6",children:[r.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[r.jsx(Qt,{className:"w-4 h-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"View all quotes"})]}),r.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[r.jsx(Qt,{className:"w-4 h-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Track orders"})]}),r.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[r.jsx(Qt,{className:"w-4 h-4 text-blue-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Manage bookings"})]})]}),r.jsx("div",{className:"w-full bg-blue-600 text-white py-3 px-6 rounded-lg font-semibold group-hover:bg-blue-700 transition-colors",children:"Log In"})]})}),r.jsx("button",{onClick:i,className:"w-full bg-white rounded-xl shadow-lg hover:shadow-xl transition-all duration-300 p-8 border-2 border-gray-200 hover:border-purple-500 group",children:r.jsxs("div",{className:"flex flex-col items-center text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-purple-100 rounded-full flex items-center justify-center mb-4 group-hover:bg-purple-200 transition-colors",children:r.jsx(Xg,{className:"w-8 h-8 text-purple-600"})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-3",children:"Create Account"}),r.jsx("p",{className:"text-gray-600 mb-6 text-sm",children:"New customer? Set up an account"}),r.jsxs("ul",{className:"text-left space-y-2 mb-6",children:[r.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[r.jsx(Qt,{className:"w-4 h-4 text-purple-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Save preferences"})]}),r.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[r.jsx(Qt,{className:"w-4 h-4 text-purple-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Faster future quotes"})]}),r.jsxs("li",{className:"flex items-start text-sm text-gray-700",children:[r.jsx(Qt,{className:"w-4 h-4 text-purple-500 mr-2 mt-0.5 flex-shrink-0"}),r.jsx("span",{children:"Order history"})]})]}),r.jsx("div",{className:"w-full bg-purple-600 text-white py-3 px-6 rounded-lg font-semibold group-hover:bg-purple-700 transition-colors",children:"Sign Up"})]})})]}),r.jsx("div",{className:"text-center",children:r.jsxs("p",{className:"text-sm text-gray-500 max-w-2xl mx-auto",children:[r.jsx("span",{className:"font-semibold",children:"Note:"})," Accounts are only required to manage orders after approval. You can get a quote as a guest and create an account later if you decide to proceed."]})}),r.jsx("div",{className:"text-center mt-8",children:r.jsxs(ie,{to:"/",className:"text-blue-600 hover:text-blue-700 font-medium text-sm inline-flex items-center",children:[r.jsx(zs,{className:"w-4 h-4 mr-1 rotate-180"}),"Back to Home"]})})]})})},nN=()=>{var be;const e=Le(),[t,n]=Ye(),s="https://123project-build-a-production-ready-w.launchpulse.ai",[a,i]=k.useState(parseInt(t.get("step")||"1")),[o,l]=k.useState(null),[c,d]=k.useState([]),[m,u]=k.useState({}),[h,f]=k.useState([]),[b,g]=k.useState(null),[x,p]=k.useState({guest_name:"",guest_email:"",guest_phone:"",guest_company_name:""}),[y,v]=k.useState({step_1_valid:!1,step_2_valid:!1,step_3_valid:!0,step_4_valid:!1,step_5_valid:!0,step_6_valid:!1}),[N,w]=k.useState(null),[j,_]=k.useState({}),[S,T]=k.useState(null),[A,E]=k.useState(!1),[R,I]=k.useState({}),[O,L]=k.useState({}),[F,M]=k.useState(null),[D,W]=k.useState(null),P=k.useRef(null),{data:V,isLoading:K}=pe({queryKey:["public-services"],queryFn:async()=>(await te.get(`${s}/api/public/services`,{params:{is_active:!0}})).data,staleTime:5*60*1e3,refetchOnWindowFocus:!1}),{data:ne,isLoading:G}=pe({queryKey:["public-tiers"],queryFn:async()=>(await te.get(`${s}/api/public/tiers`)).data,enabled:a>=4,staleTime:5*60*1e3,refetchOnWindowFocus:!1}),oe=ve({mutationFn:async z=>new Promise(B=>{const re=new FileReader;re.onload=()=>{const Q={id:`temp_${Date.now()}_${Math.random().toString(36).substr(2,9)}`,file_url:re.result,file_type:z.type,file_name:z.name,file_size_bytes:z.size,dpi_warning:!1};let me=0;const Pe=setInterval(()=>{me+=20,_(at=>({...at,[z.name]:me})),me>=100&&(clearInterval(Pe),B(Q))},100)},re.readAsDataURL(z)}),onSuccess:z=>{f(B=>[...B,z]),_(B=>{const re={...B};return delete re[z.file_name],re}),M({type:"success",message:`File "${z.file_name}" ready for upload`}),setTimeout(()=>M(null),3e3)},onError:z=>{M({type:"error",message:z.message||"File upload failed"}),setTimeout(()=>M(null),5e3)}}),H=ve({mutationFn:async z=>(await te.post(`${s}/api/guest/quotes`,z,{headers:{"Content-Type":"application/json"}})).data,onSuccess:z=>{localStorage.removeItem("guest_quote_wizard_draft"),M({type:"success",message:"Quote submitted! Check your email for confirmation."}),setTimeout(()=>{e(`/quote/guest/confirmation/${z.quote.id}`)},1500)},onError:z=>{var B,re;M({type:"error",message:((re=(B=z.response)==null?void 0:B.data)==null?void 0:re.message)||"Failed to submit quote"}),setTimeout(()=>M(null),5e3)}});k.useEffect(()=>{const z=localStorage.getItem("guest_quote_wizard_draft");if(z)try{const B=JSON.parse(z);B.selected_service&&l(B.selected_service),B.service_options&&d(B.service_options),B.project_details&&u(B.project_details),B.uploaded_files&&f(B.uploaded_files),B.selected_tier&&g(B.selected_tier),B.guest_details&&p(B.guest_details),B.step_validation&&v(B.step_validation)}catch(B){console.error("Failed to restore wizard draft:",B)}},[]),k.useEffect(()=>{const z={selected_service:o,service_options:c,project_details:m,uploaded_files:h,selected_tier:b,guest_details:x,step_validation:y};localStorage.setItem("guest_quote_wizard_draft",JSON.stringify(z))},[o,c,m,h,b,x,y]),k.useEffect(()=>{const z=new URLSearchParams;z.set("step",a.toString()),o&&z.set("service",o.slug),b&&z.set("tier",b.id),n(z)},[a,o,b,n]),k.useEffect(()=>{if(!c.length)return;let z=0;c.forEach(B=>{if(B.pricing_impact&&m[B.key])try{const re=JSON.parse(B.pricing_impact),Q=m[B.key];re[Q]&&(z+=Number(re[Q]))}catch{}}),w(z>0?z:null)},[m,c]),k.useEffect(()=>{const B=c.filter(re=>re.required).every(re=>{const Q=m[re.key];return Q!=null&&Q!==""});v(re=>({...re,step_2_valid:B}))},[m,c]),k.useEffect(()=>{const z=x.guest_name.trim()!==""&&x.guest_email.trim()!==""&&/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.guest_email);v(B=>({...B,step_6_valid:z}))},[x]);const ee=async z=>{l(z),v(B=>({...B,step_1_valid:!0}));try{const B=await te.get(`${s}/api/public/services/${z.slug}`);d(B.data.service_options||[]),i(2)}catch{M({type:"error",message:"Failed to load service details"}),setTimeout(()=>M(null),5e3)}},J=(z,B)=>{u(re=>({...re,[z]:B})),I(re=>({...re,[z]:""}))},X=(z,B)=>{p(re=>({...re,[z]:B})),L(re=>({...re,[z]:""}))},se=z=>{const B=z.target.files;B&&(Array.from(B).forEach(re=>{if(re.size>50*1024*1024){M({type:"error",message:`File "${re.name}" exceeds 50MB limit`}),setTimeout(()=>M(null),5e3);return}if(!["application/pdf","image/png","image/jpeg","image/jpg"].includes(re.type)){M({type:"error",message:`File "${re.name}" must be PDF, PNG, or JPEG`}),setTimeout(()=>M(null),5e3);return}oe.mutate(re)}),P.current&&(P.current.value=""))},$=z=>{f(B=>B.filter(re=>re.id!==z)),M({type:"success",message:"File removed"}),setTimeout(()=>M(null),2e3)},C=z=>{g(z),v(B=>({...B,step_4_valid:!0})),i(5)},U=z=>{if(z>a){if(a===1&&!y.step_1_valid){M({type:"warning",message:"Please select a service first"}),setTimeout(()=>M(null),3e3);return}if(a===2&&!y.step_2_valid){M({type:"warning",message:"Please complete all required fields"}),setTimeout(()=>M(null),3e3);return}if(a===4&&!y.step_4_valid){M({type:"warning",message:"Please select a tier"}),setTimeout(()=>M(null),3e3);return}if(a===6&&!y.step_6_valid){const B={};x.guest_name.trim()||(B.guest_name="Name is required"),x.guest_email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(x.guest_email)||(B.guest_email="Invalid email format"):B.guest_email="Email is required",L(B),M({type:"warning",message:"Please provide your name and email"}),setTimeout(()=>M(null),3e3);return}}i(z),window.scrollTo(0,0)},q=()=>{if(!o||!b)return;if(!x.guest_name.trim()||!x.guest_email.trim()){M({type:"error",message:"Name and email are required"}),setTimeout(()=>M(null),5e3);return}const z={service_id:o.id,tier_id:b.id,project_details:m,notes:null,guest_name:x.guest_name.trim(),guest_email:x.guest_email.trim().toLowerCase(),guest_phone:x.guest_phone.trim()||null,guest_company_name:x.guest_company_name.trim()||null};H.mutate(z)},de=((be=V==null?void 0:V.services)==null?void 0:be.filter(z=>S?z.category_id===S:!0))||[],he=(V==null?void 0:V.categories)||[],le=["Service","Details","Files","Tier","Summary","Your Info","Submit"];return r.jsxs(r.Fragment,{children:[F&&r.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg animate-slide-in-right ${F.type==="success"?"bg-green-600 text-white":F.type==="error"?"bg-red-600 text-white":F.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[F.type==="success"&&r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),F.type==="error"&&r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),r.jsx("p",{className:"font-medium",children:F.message})]})}),r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs(ie,{to:"/quote/start",className:"text-sm text-gray-600 hover:text-gray-900 mb-4 inline-flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Quote Options"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mt-2",children:"Get a Quote"}),r.jsxs("p",{className:"text-gray-600 mt-1",children:[r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800 mr-2",children:"Guest Mode"}),"No account required - Step ",a," of 7"]})]}),r.jsxs("div",{className:"mb-8 bg-white rounded-lg p-4 sm:p-6 shadow-sm",children:[r.jsxs("div",{className:"sm:hidden mb-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-400 flex items-center justify-center font-bold text-black",children:a}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:["Step ",a," of 7"]}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:le[a-1]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:[Math.round(a/7*100),"%"]})})]}),r.jsx("div",{className:"hidden sm:flex items-center justify-between mb-4",children:[1,2,3,4,5,6,7].map(z=>r.jsxs("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>z<a&&U(z),children:[r.jsx("div",{className:`w-8 h-8 lg:w-10 lg:h-10 rounded-full flex items-center justify-center font-semibold text-sm transition-all ${z<a?"bg-green-600 text-white hover:bg-green-700":z===a?"bg-yellow-400 text-black ring-4 ring-yellow-100":"bg-gray-200 text-gray-500"}`,children:z<a?r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):z}),r.jsx("span",{className:"text-xs text-gray-600 mt-2 hidden lg:block",children:le[z-1]})]},z))}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:`${a/7*100}%`}})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:[a===1&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Your Service"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Select the service you need for your project"}),r.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>T(null),className:`px-4 py-2 rounded-lg font-medium transition-colors ${S?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-yellow-400 text-black"}`,children:"All Services"}),he.map(z=>r.jsx("button",{onClick:()=>T(z.id),className:`px-4 py-2 rounded-lg font-medium transition-colors ${S===z.id?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:z.name},z.id))]}),K?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map(z=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},z))}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:de.map(z=>r.jsxs("button",{onClick:()=>ee(z),className:`border rounded-lg p-6 text-left transition-all hover:shadow-lg ${(o==null?void 0:o.id)===z.id?"border-yellow-400 border-2 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,children:[z.is_top_seller&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-green-100 text-green-800 mb-2",children:"Popular"}),(o==null?void 0:o.id)===z.id&&r.jsx("div",{className:"flex justify-end mb-2",children:r.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),r.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:z.name}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:z.description||"Professional service tailored to your needs"})]},z.id))}),de.length===0&&!K&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"No services found in this category"})})]}),a===2&&o&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Project Details"}),r.jsxs("p",{className:"text-gray-600",children:["For: ",o.name]})]}),r.jsx("button",{onClick:()=>i(1),className:"text-sm text-blue-600 hover:text-blue-700",children:"Change Service"})]}),r.jsx("div",{className:"space-y-6",children:c.length===0?r.jsxs("div",{className:"text-center py-8 text-gray-500",children:[r.jsx("p",{children:"No configuration options for this service."}),r.jsx("p",{className:"text-sm mt-2",children:"Click Next to continue."})]}):c.sort((z,B)=>z.sort_order-B.sort_order).map(z=>r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[z.label,z.required&&r.jsx("span",{className:"text-yellow-600 ml-1",children:"*"})]}),z.type==="TEXT"&&r.jsx("input",{type:"text",value:m[z.key]||"",onChange:B=>J(z.key,B.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",placeholder:z.help_text||`Enter ${z.label.toLowerCase()}`}),z.type==="NUMBER"&&r.jsx("input",{type:"number",value:m[z.key]||"",onChange:B=>J(z.key,Number(B.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",placeholder:z.help_text||`Enter ${z.label.toLowerCase()}`}),z.type==="SELECT"&&z.choices&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("select",{value:m[z.key]||"",onChange:B=>J(z.key,B.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",children:[r.jsxs("option",{value:"",children:["Select ",z.label]}),JSON.parse(z.choices).map(B=>r.jsx("option",{value:B,children:B},B))]}),(m[z.key]==="Others"||m[z.key]==="Other")&&r.jsx("input",{type:"text",value:m[`${z.key}_custom`]||"",onChange:B=>J(`${z.key}_custom`,B.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",placeholder:`Please specify ${z.label.toLowerCase()}`})]}),z.type==="CHECKBOX"&&r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:m[z.key]||!1,onChange:B=>J(z.key,B.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-gray-700",children:z.help_text||z.label})]}),z.help_text&&z.type!=="CHECKBOX"&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:z.help_text}),R[z.key]&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:R[z.key]})]},z.id))})]}),a===3&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Upload Your Files"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Upload your design files or reference materials (optional)"}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"File Requirements for Best Results"}),r.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2",children:"*"}),"300 DPI minimum resolution"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2",children:"*"}),"Correct dimensions for your project"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2",children:"*"}),"Fonts outlined (for vector files)"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2",children:"*"}),"Bleed included where applicable"]})]}),r.jsx("p",{className:"text-xs text-blue-700 mt-3",children:"Don't worry if you're not sure - we'll review and contact you if needed."})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-yellow-400 transition-colors",children:[r.jsx("input",{type:"file",ref:P,id:"file-upload",multiple:!0,accept:".pdf,.png,.jpg,.jpeg",onChange:se,className:"hidden"}),r.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),r.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[r.jsx("span",{className:"font-semibold text-blue-600",children:"Click to upload"})," or drag and drop"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, PNG, or JPEG up to 50MB"})]})]}),h.length>0&&r.jsx("div",{className:"mt-6 space-y-3",children:h.map(z=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[z.file_type.startsWith("image/")?r.jsx("img",{src:z.file_url,alt:z.file_name,className:"w-10 h-10 object-cover rounded"}):r.jsx("svg",{className:"w-10 h-10 text-red-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z",clipRule:"evenodd"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:z.file_name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[(z.file_size_bytes/1024/1024).toFixed(2)," MB"]})]})]}),r.jsx("button",{onClick:()=>$(z.id),className:"ml-4 text-red-600 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition-colors",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},z.id))}),Object.keys(j).length>0&&r.jsx("div",{className:"mt-6 space-y-3",children:Object.entries(j).map(([z,B])=>r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:z}),r.jsxs("p",{className:"text-sm text-gray-600",children:[B,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${B}%`}})})]},z))}),r.jsx("p",{className:"text-sm text-gray-500 mt-4 text-center",children:"Files are optional. You can also send files later via email."})]}),a===4&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Your Service Level"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Select the tier that best fits your project needs"}),r.jsx("div",{className:"mb-6 text-center",children:r.jsx("button",{onClick:()=>E(!0),className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Compare All Features"})}),G?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map(z=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},z))}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:ne==null?void 0:ne.map(z=>{const B=z.tier,re=z.features,Q=(b==null?void 0:b.id)===B.id;return r.jsxs("button",{onClick:()=>C(B),className:`border rounded-xl p-6 text-left transition-all hover:shadow-xl ${Q?"border-yellow-400 border-2 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,children:[Q&&r.jsx("div",{className:"flex justify-end mb-2",children:r.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:B.name}),B.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:B.description}),r.jsx("ul",{className:"space-y-2",children:re.slice(0,4).map(me=>r.jsxs("li",{className:"flex items-start text-sm",children:[me.is_included?r.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-5 h-5 text-gray-400 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),r.jsxs("span",{className:"text-gray-700",children:[me.feature_label,": ",me.feature_value||(me.is_included?"Yes":"No")]})]},me.id))})]},B.id)})})]}),a===5&&o&&b&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review Your Quote"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Please review your selections before providing your contact details"}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Service Selected"}),r.jsx("button",{onClick:()=>i(1),className:"text-sm text-blue-600 hover:text-blue-700",children:"Edit"})]}),r.jsx("p",{className:"text-lg font-medium text-gray-900",children:o.name}),o.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:o.description})]}),Object.keys(m).length>0&&r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Project Details"}),r.jsx("button",{onClick:()=>i(2),className:"text-sm text-blue-600 hover:text-blue-700",children:"Edit"})]}),r.jsx("dl",{className:"space-y-2",children:c.map(z=>{const B=m[z.key];return B==null||B===""?null:r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("dt",{className:"text-gray-600",children:[z.label,":"]}),r.jsx("dd",{className:"text-gray-900 font-medium",children:typeof B=="boolean"?B?"Yes":"No":B})]},z.key)})})]}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Files Uploaded"}),r.jsx("button",{onClick:()=>i(3),className:"text-sm text-blue-600 hover:text-blue-700",children:"Edit"})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[h.length," file(s) ready"]}),h.length>0&&r.jsx("ul",{className:"mt-2 space-y-1",children:h.map(z=>r.jsxs("li",{className:"text-sm text-gray-700",children:["- ",z.file_name]},z.id))})]}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Tier Selected"}),r.jsx("button",{onClick:()=>i(4),className:"text-sm text-blue-600 hover:text-blue-700",children:"Edit"})]}),r.jsx("p",{className:"text-lg font-medium text-gray-900",children:b.name}),b.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:b.description})]}),r.jsxs("div",{className:"mb-6 p-6 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"Estimated Investment"}),N?r.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["$",N.toFixed(2)," - $",(N*1.2).toFixed(2)]}):r.jsx("p",{className:"text-lg font-medium text-blue-900",children:"Custom pricing - we'll finalize within 24 hours"}),r.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Final pricing will be confirmed after review"})]}),r.jsx("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:r.jsx("p",{className:"text-xs text-gray-600",children:"This is an estimate based on the information provided. Our team will review your requirements and provide a final quote within 24 hours. Turnaround times vary by tier and project complexity."})})]}),a===6&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Your Contact Information"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"We'll use this to send your quote and updates"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Full Name ",r.jsx("span",{className:"text-yellow-600",children:"*"})]}),r.jsx("input",{type:"text",value:x.guest_name,onChange:z=>X("guest_name",z.target.value),className:`w-full px-4 py-3 border-2 rounded-lg focus:ring-4 focus:ring-blue-100 outline-none transition-all ${O.guest_name?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"Enter your full name"}),O.guest_name&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:O.guest_name})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Email Address ",r.jsx("span",{className:"text-yellow-600",children:"*"})]}),r.jsx("input",{type:"email",value:x.guest_email,onChange:z=>X("guest_email",z.target.value),className:`w-full px-4 py-3 border-2 rounded-lg focus:ring-4 focus:ring-blue-100 outline-none transition-all ${O.guest_email?"border-red-500":"border-gray-200 focus:border-blue-500"}`,placeholder:"your.email@example.com"}),O.guest_email&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:O.guest_email}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll send your quote confirmation here"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Phone Number ",r.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),r.jsx("input",{type:"tel",value:x.guest_phone,onChange:z=>X("guest_phone",z.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",placeholder:"+1 (555) 000-0000"})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Company Name ",r.jsx("span",{className:"text-gray-400",children:"(optional)"})]}),r.jsx("input",{type:"text",value:x.guest_company_name,onChange:z=>X("guest_company_name",z.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",placeholder:"Your company name"})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-green-50 border border-green-200 rounded-lg",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600 mr-3 mt-0.5 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M2.166 4.999A11.954 11.954 0 0010 1.944 11.954 11.954 0 0017.834 5c.11.65.166 1.32.166 2.001 0 5.225-3.34 9.67-8 11.317C5.34 16.67 2 12.225 2 7c0-.682.057-1.35.166-2.001zm11.541 3.708a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsxs("div",{children:[r.jsx("h4",{className:"font-medium text-green-900",children:"No account required"}),r.jsx("p",{className:"text-sm text-green-700",children:"We won't create an account for you. You'll receive a secure link to view and manage your quote."})]})]})})]}),a===7&&o&&b&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Submit Your Quote Request"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Review everything one last time and submit"}),r.jsx("div",{className:"border-2 border-gray-200 rounded-xl p-6 mb-6",children:r.jsxs("div",{className:"grid gap-4 md:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Service"}),r.jsx("p",{className:"font-semibold text-gray-900",children:o.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Tier"}),r.jsx("p",{className:"font-semibold text-gray-900",children:b.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Contact"}),r.jsx("p",{className:"font-semibold text-gray-900",children:x.guest_name}),r.jsx("p",{className:"text-sm text-gray-600",children:x.guest_email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Files"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:[h.length," file(s)"]})]})]})}),r.jsxs("div",{className:"mb-6 p-6 bg-yellow-50 border border-yellow-200 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-yellow-900 mb-2",children:"Estimated Price Range"}),N?r.jsxs("p",{className:"text-3xl font-bold text-yellow-900",children:["$",N.toFixed(2)," - $",(N*1.2).toFixed(2)]}):r.jsx("p",{className:"text-xl font-medium text-yellow-900",children:"Custom pricing"}),r.jsx("p",{className:"text-sm text-yellow-700 mt-2",children:"Final quote will be sent within 24 hours"})]}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsx("h4",{className:"font-semibold text-gray-900 mb-3",children:"What happens next?"}),r.jsxs("ol",{className:"space-y-2 text-sm text-gray-600",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"font-bold text-blue-600 mr-2",children:"1."}),"You'll receive an email confirmation with a secure link to your quote"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"font-bold text-blue-600 mr-2",children:"2."}),"Our team will review your request within 24 hours"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"font-bold text-blue-600 mr-2",children:"3."}),"We'll send you a finalized quote that you can approve with one click"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"font-bold text-blue-600 mr-2",children:"4."}),"Once approved, create an account to proceed with booking and payment"]})]})]}),r.jsx("button",{onClick:q,disabled:H.isPending,className:"w-full bg-green-600 text-white px-6 py-4 rounded-lg font-semibold text-lg hover:bg-green-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:H.isPending?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting Quote..."]}):"Submit Quote Request"}),r.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By submitting, you agree to receive communications about your quote"})]})]}),r.jsxs("div",{className:"hidden sm:flex mt-6 items-center justify-between",children:[r.jsx("button",{onClick:()=>U(a-1),disabled:a===1,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Back"}),a<7&&r.jsx("button",{onClick:()=>U(a+1),className:"px-6 py-3 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-all shadow-lg hover:shadow-xl",children:a===3?"Continue":a===6?"Review & Submit":"Next"})]}),r.jsx("div",{className:"sm:hidden h-20"})]})}),r.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>U(a-1),disabled:a===1,className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),a<7?r.jsxs("button",{onClick:()=>U(a+1),className:"flex-1 px-4 py-3 bg-yellow-400 text-black rounded-lg font-bold transition-all flex items-center justify-center gap-2",children:[a===3?"Continue":a===6?"Review":"Next",r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):r.jsx("button",{onClick:q,disabled:H.isPending,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg font-bold transition-all disabled:opacity-50",children:H.isPending?"Submitting...":"Submit Quote"})]})}),A&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:()=>E(!1),children:r.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",onClick:z=>z.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Compare All Tiers"}),r.jsx("button",{onClick:()=>E(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Feature"}),ne==null?void 0:ne.map(z=>r.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:z.tier.name},z.tier.id))]})}),r.jsx("tbody",{children:ne&&ne.length>0&&(()=>{const z=new Set;return ne.forEach(B=>{B.features.forEach(re=>{z.add(re.feature_key)})}),Array.from(z).map(B=>{const re=ne[0].features.find(Q=>Q.feature_key===B);return re?r.jsxs("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:re.feature_label}),ne.map(Q=>{const me=Q.features.find(Pe=>Pe.feature_key===B);return r.jsx("td",{className:"py-3 px-4 text-center text-sm",children:me!=null&&me.is_included?r.jsx("span",{className:"text-green-600 font-medium",children:me.feature_value||"Yes"}):r.jsx("span",{className:"text-gray-400",children:"-"})},Q.tier.id)})]},B):null})})()})]})}),r.jsx("div",{className:"md:hidden space-y-4",children:ne==null?void 0:ne.map(z=>r.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[r.jsxs("button",{className:"w-full px-4 py-3 flex items-center justify-between text-left",onClick:B=>{const re=B.currentTarget.nextElementSibling;re&&re.classList.toggle("hidden")},children:[r.jsx("span",{className:"font-semibold text-gray-900",children:z.tier.name}),r.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),r.jsx("div",{className:"hidden px-4 pb-4",children:r.jsx("ul",{className:"space-y-2",children:z.features.map(B=>r.jsxs("li",{className:"flex items-start text-sm",children:[B.is_included?r.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-5 h-5 text-gray-400 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),r.jsxs("span",{className:"text-gray-700",children:[B.feature_label,": ",B.feature_value||(B.is_included?"Yes":"No")]})]},B.id))})})]},z.tier.id))})]})})]})},GI=()=>{const{quoteId:e}=fr();return r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-green-50 to-blue-50 flex items-center justify-center py-12 px-4",children:r.jsxs("div",{className:"max-w-2xl w-full bg-white rounded-2xl shadow-2xl p-8 md:p-12",children:[r.jsx("div",{className:"flex justify-center mb-6",children:r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center",children:r.jsx(Qt,{className:"w-12 h-12 text-green-600"})})}),r.jsx("h1",{className:"text-3xl md:text-4xl font-bold text-gray-900 text-center mb-4",children:"Quote Request Received!"}),r.jsx("p",{className:"text-lg text-gray-600 text-center mb-8",children:"Thank you for your quote request. We've received your information and will respond within 24 hours."}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-6 mb-8",children:r.jsx("div",{className:"flex items-center justify-between",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx(Rr,{className:"w-6 h-6 text-blue-600"}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Quote Reference Number"}),r.jsx("p",{className:"text-xl font-mono font-bold text-gray-900",children:e})]})]})})}),r.jsxs("div",{className:"space-y-4 mb-8",children:[r.jsxs("div",{className:"flex items-start gap-4 p-4 bg-blue-50 rounded-lg",children:[r.jsx(op,{className:"w-6 h-6 text-blue-600 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"Check Your Email"}),r.jsx("p",{className:"text-sm text-gray-600",children:"We've sent you an email with a secure link to view and approve your quote. No account required!"})]})]}),r.jsxs("div",{className:"flex items-start gap-4 p-4 bg-purple-50 rounded-lg",children:[r.jsx(Qt,{className:"w-6 h-6 text-purple-600 flex-shrink-0 mt-1"}),r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-1",children:"What Happens Next?"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Our team will review your request and provide a detailed quote. You'll be able to approve it directly from the email link."})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4",children:[r.jsx(ie,{to:"/",className:"flex-1 bg-blue-600 text-white text-center py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"Return to Home"}),r.jsx(ie,{to:"/services",className:"flex-1 bg-white text-blue-600 text-center py-3 px-6 rounded-lg font-semibold border-2 border-blue-600 hover:bg-blue-50 transition-colors",children:"Browse Services"})]}),r.jsx("p",{className:"text-xs text-gray-500 text-center mt-8",children:"Account creation is only required if you approve the quote and need to book a service or make a payment."})]})})},sN=()=>{var _,S;const{token:e}=fr();Le();const t=et(),n="https://123project-build-a-production-ready-w.launchpulse.ai",[s,a]=k.useState(!1),[i,o]=k.useState(!1),[l,c]=k.useState(null),{data:d,isLoading:m,error:u,isError:h}=pe({queryKey:["guest-quote",e],queryFn:async()=>(await te.get(`${n}/api/guest/quotes/${e}`)).data,retry:!1,staleTime:30*1e3}),f=ve({mutationFn:async T=>(await te.patch(`${n}/api/guest/quotes/${e}/status`,{status:T})).data,onSuccess:(T,A)=>{t.invalidateQueries({queryKey:["guest-quote",e]}),a(!1),o(!1),c({type:"success",message:A==="APPROVED"?"Quote approved! Check your email for next steps.":"Quote rejected. We appreciate your consideration."}),setTimeout(()=>c(null),5e3)},onError:T=>{var A,E;c({type:"error",message:((E=(A=T.response)==null?void 0:A.data)==null?void 0:E.message)||"Failed to update quote status"}),setTimeout(()=>c(null),5e3)}}),b=T=>{switch(T){case"SUBMITTED":return{color:"bg-blue-100 text-blue-800",icon:hs,label:"Pending Review",description:"Our team is reviewing your quote request"};case"IN_REVIEW":return{color:"bg-yellow-100 text-yellow-800",icon:hs,label:"In Review",description:"We are preparing your quote"};case"APPROVED":return{color:"bg-green-100 text-green-800",icon:Qt,label:"Approved",description:"You have approved this quote"};case"REJECTED":return{color:"bg-red-100 text-red-800",icon:rc,label:"Rejected",description:"This quote has been declined"};case"QUOTE_FINALIZED":return{color:"bg-purple-100 text-purple-800",icon:Ko,label:"Quote Ready",description:"Your quote is ready for approval"};default:return{color:"bg-gray-100 text-gray-800",icon:Rr,label:T,description:""}}};if(m)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx(Jf,{className:"w-12 h-12 text-blue-600 animate-spin mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Loading your quote..."})]})});if(h){const T=((_=u==null?void 0:u.response)==null?void 0:_.status)===410?"This link has expired":((S=u==null?void 0:u.response)==null?void 0:S.status)===404?"Invalid or expired link":"Unable to load quote";return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center py-12 px-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Ho,{className:"w-8 h-8 text-red-600"})}),r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Link Not Valid"}),r.jsx("p",{className:"text-gray-600 mb-6",children:T}),r.jsx("p",{className:"text-sm text-gray-500 mb-6",children:"If you believe this is an error, please contact us or request a new quote."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx(ie,{to:"/quote/start",className:"flex-1 bg-blue-600 text-white text-center py-3 px-6 rounded-lg font-semibold hover:bg-blue-700 transition-colors",children:"New Quote"}),r.jsx(ie,{to:"/contact",className:"flex-1 bg-white text-blue-600 text-center py-3 px-6 rounded-lg font-semibold border-2 border-blue-600 hover:bg-blue-50 transition-colors",children:"Contact Us"})]})]})})}const{quote:g,service:x,tier:p,quote_answers:y}=d,v=b(g.status),N=v.icon,w=g.status==="QUOTE_FINALIZED"||g.status==="SUBMITTED"||g.status==="IN_REVIEW",j=g.final_subtotal!==null;return r.jsxs(r.Fragment,{children:[l&&r.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${l.type==="success"?"bg-green-600 text-white":l.type==="error"?"bg-red-600 text-white":"bg-blue-600 text-white"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[l.type==="success"&&r.jsx(Qt,{className:"w-5 h-5"}),l.type==="error"&&r.jsx(rc,{className:"w-5 h-5"}),r.jsx("p",{className:"font-medium",children:l.message})]})}),r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs(ie,{to:"/",className:"text-sm text-gray-600 hover:text-gray-900 mb-4 inline-flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Home"]}),r.jsxs("div",{className:"flex items-center justify-between mt-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Your Quote"}),r.jsxs("p",{className:"text-gray-600 mt-1",children:["Reference: ",r.jsx("span",{className:"font-mono",children:g.id.slice(0,8).toUpperCase()})]})]}),r.jsxs("div",{className:`flex items-center px-4 py-2 rounded-full ${v.color}`,children:[r.jsx(N,{className:"w-5 h-5 mr-2"}),r.jsx("span",{className:"font-medium",children:v.label})]})]})]}),v.description&&r.jsx("div",{className:`mb-6 p-4 rounded-lg ${g.status==="APPROVED"?"bg-green-50 border border-green-200":g.status==="REJECTED"?"bg-red-50 border border-red-200":g.status==="QUOTE_FINALIZED"?"bg-purple-50 border border-purple-200":"bg-blue-50 border border-blue-200"}`,children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(N,{className:`w-5 h-5 mr-3 mt-0.5 flex-shrink-0 ${g.status==="APPROVED"?"text-green-600":g.status==="REJECTED"?"text-red-600":g.status==="QUOTE_FINALIZED"?"text-purple-600":"text-blue-600"}`}),r.jsxs("div",{children:[r.jsx("p",{className:`font-medium ${g.status==="APPROVED"?"text-green-900":g.status==="REJECTED"?"text-red-900":g.status==="QUOTE_FINALIZED"?"text-purple-900":"text-blue-900"}`,children:v.description}),g.status==="APPROVED"&&r.jsx("p",{className:"text-sm text-green-700 mt-1",children:"To proceed with booking and payment, you'll need to create an account."})]})]})}),r.jsxs("div",{className:"grid gap-6 lg:grid-cols-3",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(wi,{className:"w-5 h-5 mr-2 text-blue-600"}),"Service Details"]}),r.jsxs("div",{className:"space-y-4",children:[r.jsx("div",{className:"flex justify-between items-start",children:r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Service"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(x==null?void 0:x.name)||"N/A"}),(x==null?void 0:x.description)&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:x.description})]})}),r.jsxs("div",{className:"border-t border-gray-100 pt-4",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Service Level"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:(p==null?void 0:p.name)||"N/A"}),(p==null?void 0:p.description)&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:p.description})]})]})]}),y&&y.length>0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Rr,{className:"w-5 h-5 mr-2 text-blue-600"}),"Project Specifications"]}),r.jsx("dl",{className:"space-y-3",children:y.map(T=>r.jsxs("div",{className:"flex justify-between py-2 border-b border-gray-100 last:border-0",children:[r.jsx("dt",{className:"text-gray-600 capitalize",children:T.option_key.replace(/_/g," ")}),r.jsx("dd",{className:"text-gray-900 font-medium",children:T.value})]},T.id))})]}),g.notes&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Additional Notes"}),r.jsx("p",{className:"text-gray-600",children:g.notes})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(Ko,{className:"w-5 h-5 mr-2 text-green-600"}),"Pricing"]}),j?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"text-center py-4 bg-green-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-green-700 mb-1",children:"Final Quote Price"}),r.jsxs("p",{className:"text-3xl font-bold text-green-900",children:["$",Number(g.final_subtotal).toFixed(2)]}),r.jsx("p",{className:"text-xs text-green-600 mt-1",children:"+ applicable taxes"})]}),g.estimate_subtotal&&r.jsxs("p",{className:"text-sm text-gray-500 text-center",children:["Original estimate: $",Number(g.estimate_subtotal).toFixed(2)]})]}):g.estimate_subtotal?r.jsx("div",{className:"space-y-3",children:r.jsxs("div",{className:"text-center py-4 bg-blue-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-blue-700 mb-1",children:"Estimated Price"}),r.jsxs("p",{className:"text-3xl font-bold text-blue-900",children:["$",Number(g.estimate_subtotal).toFixed(2)]}),r.jsx("p",{className:"text-xs text-blue-600 mt-1",children:"Final price pending review"})]})}):r.jsxs("div",{className:"text-center py-4 bg-gray-50 rounded-lg",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Price"}),r.jsx("p",{className:"text-xl font-semibold text-gray-900",children:"Pending Review"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"We'll provide pricing within 24 hours"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Your Information"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(op,{className:"w-4 h-4 mr-3 text-gray-400"}),r.jsx("span",{children:g.guest_email})]}),g.guest_phone&&r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(u1,{className:"w-4 h-4 mr-3 text-gray-400"}),r.jsx("span",{children:g.guest_phone})]}),g.guest_company_name&&r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(vR,{className:"w-4 h-4 mr-3 text-gray-400"}),r.jsx("span",{children:g.guest_company_name})]}),r.jsxs("div",{className:"flex items-center text-gray-600",children:[r.jsx(ji,{className:"w-4 h-4 mr-3 text-gray-400"}),r.jsxs("span",{children:["Submitted ",new Date(g.created_at).toLocaleDateString()]})]})]})]}),w&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Take Action"}),j?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("button",{onClick:()=>a(!0),disabled:f.isPending,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:[r.jsx(Qt,{className:"w-5 h-5 mr-2"}),"Accept Quote"]}),r.jsxs("button",{onClick:()=>o(!0),disabled:f.isPending,className:"w-full bg-white text-red-600 py-3 px-4 rounded-lg font-semibold border-2 border-red-200 hover:bg-red-50 transition-colors disabled:opacity-50 flex items-center justify-center",children:[r.jsx(rc,{className:"w-5 h-5 mr-2"}),"Decline Quote"]})]}):r.jsxs("div",{className:"text-center py-4 bg-yellow-50 rounded-lg",children:[r.jsx(hs,{className:"w-8 h-8 text-yellow-600 mx-auto mb-2"}),r.jsx("p",{className:"text-sm text-yellow-800",children:"We're finalizing your quote. You'll be able to approve or decline once pricing is confirmed."})]})]}),(g.status==="APPROVED"||g.status==="REJECTED")&&r.jsx("div",{className:`bg-white rounded-xl shadow-sm p-6 border-2 ${g.status==="APPROVED"?"border-green-200":"border-red-200"}`,children:g.status==="APPROVED"?r.jsxs("div",{className:"text-center",children:[r.jsx(Qt,{className:"w-12 h-12 text-green-600 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold text-green-900 mb-2",children:"Quote Approved"}),r.jsx("p",{className:"text-sm text-green-700 mb-4",children:"Create an account to continue with booking and payment."}),r.jsx(ie,{to:`/register?email=${encodeURIComponent(g.guest_email)}&name=${encodeURIComponent(g.guest_name)}&quote=${g.id}`,className:"w-full bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition-colors inline-flex items-center justify-center",children:"Create Account to Continue"})]}):r.jsxs("div",{className:"text-center",children:[r.jsx(rc,{className:"w-12 h-12 text-red-600 mx-auto mb-3"}),r.jsx("h3",{className:"font-semibold text-red-900 mb-2",children:"Quote Declined"}),r.jsx("p",{className:"text-sm text-red-700 mb-4",children:"Thank you for considering us. Feel free to request a new quote anytime."}),r.jsx(ie,{to:"/quote/start",className:"w-full bg-red-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-red-700 transition-colors inline-flex items-center justify-center",children:"Request New Quote"})]})}),r.jsx("div",{className:"bg-gray-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx(Sc,{className:"w-5 h-5 text-gray-400 mr-3 mt-0.5 flex-shrink-0"}),r.jsx("div",{children:r.jsx("p",{className:"text-sm text-gray-600",children:"This is a secure link unique to your quote. Do not share it with others."})})]})})]})]})]})}),s&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(Qt,{className:"w-8 h-8 text-green-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Accept Quote?"}),r.jsxs("p",{className:"text-gray-600",children:["By accepting, you agree to the quoted price of ",r.jsxs("strong",{children:["$",Number(g.final_subtotal).toFixed(2)]}),"."]}),r.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"You'll need to create an account to proceed with booking and payment."})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>a(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 px-4 rounded-lg font-semibold hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:()=>f.mutate("APPROVED"),disabled:f.isPending,className:"flex-1 bg-green-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-green-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:f.isPending?r.jsx(Jf,{className:"w-5 h-5 animate-spin"}):"Accept Quote"})]})]})}),i&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-xl max-w-md w-full p-6",children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx(rc,{className:"w-8 h-8 text-red-600"})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Decline Quote?"}),r.jsx("p",{className:"text-gray-600",children:"Are you sure you want to decline this quote? You can always request a new quote later."})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>o(!1),className:"flex-1 bg-gray-100 text-gray-700 py-3 px-4 rounded-lg font-semibold hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:()=>f.mutate("REJECTED"),disabled:f.isPending,className:"flex-1 bg-red-600 text-white py-3 px-4 rounded-lg font-semibold hover:bg-red-700 transition-colors disabled:opacity-50 flex items-center justify-center",children:f.isPending?r.jsx(Jf,{className:"w-5 h-5 animate-spin"}):"Decline Quote"})]})]})})]})},QI=async(e,t)=>{const n=new URLSearchParams;e&&n.append("category",e),t&&t.trim()&&n.append("search",t.trim());const a=`https://123project-build-a-production-ready-w.launchpulse.ai/api/public/products${n.toString()?"?"+n.toString():""}`;return(await te.get(a)).data},YI=()=>{var v;const[e,t]=Ye(),[n,s]=k.useState(e.get("category")),[a,i]=k.useState(e.get("search")||""),[o,l]=k.useState(e.get("search")||""),c=k.useRef(null);ae(N=>N.show_toast),k.useEffect(()=>()=>{c.current&&clearTimeout(c.current)},[]);const{data:d,isLoading:m,error:u,refetch:h}=pe({queryKey:["products",n,a],queryFn:()=>QI(n,a),staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),f=(d==null?void 0:d.products)||[],b=(d==null?void 0:d.categories)||[];k.useEffect(()=>{const N=new URLSearchParams;n&&N.set("category",n),a&&N.set("search",a),t(N,{replace:!0})},[n,a,t]);const g=N=>{s(N)},x=N=>{N.preventDefault(),i(o)},p=()=>{s(null),i(""),l("")},y=N=>{const w=N.target.value;l(w),(w.length>=3||w.length===0)&&(c.current&&clearTimeout(c.current),c.current=setTimeout(()=>{i(w)},500))};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-white",children:[r.jsx("div",{className:"bg-gradient-to-br from-yellow-50 to-yellow-100 border-b-2 border-black",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-16",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h1",{className:"text-3xl md:text-4xl lg:text-5xl font-bold text-gray-900 mb-4",children:"Shop Products"}),r.jsx("p",{className:"text-lg md:text-xl text-gray-600 max-w-2xl mx-auto leading-relaxed",children:"Browse our ready-to-order print products. Customize, add to cart, and checkout - no quotes needed!"})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-12 lg:py-20",children:[r.jsx("div",{className:"mb-8",children:r.jsx("form",{onSubmit:x,className:"max-w-2xl mx-auto",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",value:o,onChange:y,placeholder:"Search products...",className:"w-full px-4 py-3 pl-12 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 focus:outline-none text-base transition-all"}),r.jsx("svg",{className:"absolute left-4 top-1/2 -translate-y-1/2 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})}),o&&r.jsx("button",{type:"button",onClick:()=>{l(""),i("")},className:"absolute right-4 top-1/2 -translate-y-1/2 text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})}),r.jsxs("div",{className:"mb-12",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Filter by Category"}),(n||a)&&r.jsx("button",{onClick:p,className:"text-sm text-gray-600 hover:text-gray-900 font-medium transition-colors",children:"Clear Filters"})]}),r.jsxs("div",{className:"hidden md:flex flex-wrap gap-3",children:[r.jsx("button",{onClick:()=>g(null),className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===null?"bg-yellow-400 text-black shadow-lg":"bg-white text-gray-700 border-2 border-gray-200 hover:border-gray-300"}`,children:"All Products"}),b.map(N=>r.jsx("button",{onClick:()=>g(N.slug),className:`px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===N.slug?"bg-yellow-400 text-black shadow-lg":"bg-white text-gray-700 border-2 border-gray-200 hover:border-gray-300"}`,children:N.name},N.id))]}),r.jsx("div",{className:"md:hidden overflow-x-auto scrollbar-hide",children:r.jsxs("div",{className:"flex gap-3 pb-2",children:[r.jsx("button",{onClick:()=>g(null),className:`flex-shrink-0 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===null?"bg-yellow-400 text-black shadow-lg":"bg-white text-gray-700 border-2 border-gray-200"}`,children:"All Products"}),b.map(N=>r.jsx("button",{onClick:()=>g(N.slug),className:`flex-shrink-0 px-6 py-3 rounded-lg font-medium transition-all duration-200 ${n===N.slug?"bg-yellow-400 text-black shadow-lg":"bg-white text-gray-700 border-2 border-gray-200"}`,children:N.name},N.id))]})})]}),!m&&r.jsx("div",{className:"mb-6",children:r.jsxs("p",{className:"text-gray-600 text-sm",children:[f.length===0?"No products found":`${f.length} product${f.length!==1?"s":""} found`,n&&r.jsxs("span",{className:"ml-1",children:["in ",r.jsx("span",{className:"font-medium",children:(v=b.find(N=>N.slug===n))==null?void 0:v.name})]}),a&&r.jsxs("span",{className:"ml-1",children:["for ",r.jsxs("span",{className:"font-medium",children:['"',a,'"']})]})]})}),m&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[1,2,3,4,5,6].map(N=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"bg-gray-200 h-48 rounded-t-xl"}),r.jsxs("div",{className:"bg-white border border-gray-200 border-t-0 rounded-b-xl p-6",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4 mb-3"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-full mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-5/6 mb-4"}),r.jsx("div",{className:"h-10 bg-gray-200 rounded"})]})]},N))}),u&&!m&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-red-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Failed to Load Products"}),r.jsx("p",{className:"text-gray-600 mb-6",children:u instanceof Error?u.message:"An error occurred while loading products"}),r.jsx("button",{onClick:()=>h(),className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors duration-200",children:"Try Again"})]}),!m&&!u&&f.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Products Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:a?`No products match your search "${a}"`:n?"No products found in this category":"No products are currently available"}),(n||a)&&r.jsx("button",{onClick:p,className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors duration-200",children:"View All Products"})]}),!m&&!u&&f.length>0&&r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:f.map(N=>r.jsxs(ie,{to:`/products/${N.slug}`,className:"group block bg-white border border-gray-200 rounded-xl overflow-hidden shadow-md hover:shadow-xl transition-all duration-200 hover:-translate-y-1",children:[r.jsxs("div",{className:"relative h-48 bg-gradient-to-br from-gray-100 to-gray-200 overflow-hidden",children:[N.thumbnail_url?r.jsx("img",{src:N.thumbnail_url,alt:N.name,className:"w-full h-full object-cover group-hover:scale-105 transition-transform duration-300"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("svg",{className:"w-16 h-16 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})}),r.jsx("div",{className:"absolute top-4 right-4 bg-green-500 text-white px-3 py-1 rounded-full text-xs font-bold shadow-lg",children:"Direct Buy"})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2 group-hover:text-yellow-600 transition-colors",children:N.name}),r.jsx("p",{className:"text-gray-600 text-sm leading-relaxed mb-4 line-clamp-2",children:N.description||"High-quality print product with fast delivery."}),r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("span",{className:"text-lg font-bold text-gray-900",children:["From ",Number(N.from_price||N.base_price).toFixed(2)]}),N.category_name&&r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-gray-100 text-gray-600",children:N.category_name})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-yellow-600 font-semibold group-hover:text-yellow-700",children:"Customize & Buy"}),r.jsx("svg",{className:"w-5 h-5 text-yellow-600 transform group-hover:translate-x-1 transition-transform duration-200",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})]},N.id))}),!m&&!u&&f.length>0&&r.jsxs("div",{className:"mt-16 text-center bg-gray-50 rounded-xl p-8 lg:p-12",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Need Something Custom?"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-2xl mx-auto leading-relaxed",children:"Can't find what you're looking for? Our Services section offers custom quote-based solutions for complex projects."}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx(ie,{to:"/services",className:"px-8 py-4 bg-yellow-400 text-black font-bold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl",children:"View Services"}),r.jsx(ie,{to:"/contact",className:"px-8 py-4 bg-white text-black font-bold rounded-lg border-2 border-black hover:bg-black hover:text-white transition-all duration-200",children:"Contact Us"})]})]})]})]}),r.jsx("style",{children:`
        .scrollbar-hide::-webkit-scrollbar { display: none; }
        .scrollbar-hide { -ms-overflow-style: none; scrollbar-width: none; }
        .line-clamp-2 { display: -webkit-box; -webkit-line-clamp: 2; -webkit-box-orient: vertical; overflow: hidden; }
      `})]})};function KC(e){var t,n,s="";if(typeof e=="string"||typeof e=="number")s+=e;else if(typeof e=="object")if(Array.isArray(e)){var a=e.length;for(t=0;t<a;t++)e[t]&&(n=KC(e[t]))&&(s&&(s+=" "),s+=n)}else for(n in e)e[n]&&(s&&(s+=" "),s+=n);return s}function De(){for(var e,t,n=0,s="",a=arguments.length;n<a;n++)(e=arguments[n])&&(t=KC(e))&&(s&&(s+=" "),s+=t);return s}function jr(e,t=""){const n=typeof e=="number"?e:typeof e=="string"?Number(e):NaN;return Number.isFinite(n)?`${t}${n.toFixed(2)}`:"-"}const XI=[{id:"bc-flat-single",label:"Single Flat Card",imageUrl:"/mockups/business-card-flat.jpg",designPlacement:{sideKey:"front",x:15,y:15,width:70,height:70,rotationDeg:0,borderRadius:4,opacity:1},aspectRatio:"4/3"},{id:"bc-stack-front",label:"Card Stack",imageUrl:"/mockups/business-card-stack.jpg",designPlacement:{sideKey:"front",x:20,y:18,width:60,height:55,rotationDeg:-3,borderRadius:4,opacity:.98},aspectRatio:"4/3"},{id:"bc-perspective-front",label:"Perspective View",imageUrl:"/mockups/business-card-perspective.jpg",designPlacement:{sideKey:"front",x:22,y:20,width:56,height:52,rotationDeg:0,skewX:-8,skewY:4,borderRadius:4,opacity:.95},aspectRatio:"4/3"},{id:"bc-floating",label:"Floating",imageUrl:"/mockups/business-card-floating.jpg",designPlacement:{sideKey:"front",x:18,y:22,width:64,height:56,rotationDeg:5,borderRadius:4,opacity:.98},aspectRatio:"4/3"},{id:"bc-back-view",label:"Back Side",imageUrl:"/mockups/business-card-back.jpg",designPlacement:{sideKey:"back",x:15,y:15,width:70,height:70,rotationDeg:0,borderRadius:4,opacity:1},aspectRatio:"4/3"}],JI=[{id:"fl-flat-front",label:"Flat View",imageUrl:"/mockups/flyer-flat.jpg",designPlacement:{sideKey:"front",x:12,y:8,width:76,height:84,rotationDeg:0,borderRadius:0,opacity:1},aspectRatio:"3/4"},{id:"fl-desk-front",label:"On Desk",imageUrl:"/mockups/flyer-desk.jpg",designPlacement:{sideKey:"front",x:18,y:12,width:64,height:76,rotationDeg:-2,borderRadius:0,opacity:.98},aspectRatio:"4/3"},{id:"fl-stack",label:"Stacked",imageUrl:"/mockups/flyer-stack.jpg",designPlacement:{sideKey:"front",x:20,y:15,width:60,height:70,rotationDeg:-4,borderRadius:0,opacity:.95},aspectRatio:"4/3"},{id:"fl-display-front",label:"Display Stand",imageUrl:"/mockups/flyer-display.jpg",designPlacement:{sideKey:"front",x:25,y:10,width:50,height:70,rotationDeg:0,skewX:-3,skewY:2,borderRadius:0,opacity:.95},aspectRatio:"4/3"},{id:"fl-back-view",label:"Back Side",imageUrl:"/mockups/flyer-back.jpg",designPlacement:{sideKey:"back",x:12,y:8,width:76,height:84,rotationDeg:0,borderRadius:0,opacity:1},aspectRatio:"3/4"}],ZI=[{id:"pc-flat-front",label:"Flat View",imageUrl:"/mockups/postcard-flat.jpg",designPlacement:{sideKey:"front",x:12,y:12,width:76,height:76,rotationDeg:0,borderRadius:2,opacity:1},aspectRatio:"4/3"},{id:"pc-table-front",label:"On Table",imageUrl:"/mockups/postcard-table.jpg",designPlacement:{sideKey:"front",x:18,y:20,width:64,height:55,rotationDeg:-5,borderRadius:3,opacity:.98},aspectRatio:"4/3"},{id:"pc-stack",label:"Stacked",imageUrl:"/mockups/postcard-stack.jpg",designPlacement:{sideKey:"front",x:20,y:18,width:60,height:58,rotationDeg:3,borderRadius:2,opacity:.95},aspectRatio:"4/3"},{id:"pc-mail-front",label:"With Mail",imageUrl:"/mockups/postcard-mail.jpg",designPlacement:{sideKey:"front",x:22,y:15,width:56,height:52,rotationDeg:3,borderRadius:2,opacity:.95},aspectRatio:"4/3"},{id:"pc-back-view",label:"Writing Side",imageUrl:"/mockups/postcard-writing.jpg",designPlacement:{sideKey:"back",x:12,y:12,width:76,height:76,rotationDeg:0,borderRadius:2,opacity:1},aspectRatio:"4/3"}],eD=[{id:"env-flat-front",label:"Flat View",imageUrl:"/mockups/envelope-flat.jpg",designPlacement:{sideKey:"front",x:10,y:18,width:80,height:64,rotationDeg:0,borderRadius:0,opacity:1},aspectRatio:"4/3"},{id:"env-desk-front",label:"On Wood Surface",imageUrl:"/mockups/envelope-wood.jpg",designPlacement:{sideKey:"front",x:15,y:22,width:70,height:55,rotationDeg:-4,borderRadius:0,opacity:.98},aspectRatio:"4/3"},{id:"env-stack-front",label:"Stacked",imageUrl:"/mockups/envelope-stack.jpg",designPlacement:{sideKey:"front",x:18,y:15,width:65,height:55,rotationDeg:2,borderRadius:0,opacity:.95},aspectRatio:"4/3"},{id:"env-mail-front",label:"Mail Scene",imageUrl:"/mockups/envelope-mail.jpg",designPlacement:{sideKey:"front",x:20,y:25,width:62,height:50,rotationDeg:-6,borderRadius:0,opacity:.95},aspectRatio:"4/3"},{id:"env-back-view",label:"Back / Flap",imageUrl:"/mockups/envelope-back.jpg",designPlacement:{sideKey:"back",x:10,y:18,width:80,height:64,rotationDeg:0,borderRadius:0,opacity:1},aspectRatio:"4/3"}],tD=[{id:"st-flat-front",label:"Single Sticker",imageUrl:"/mockups/sticker-flat.jpg",designPlacement:{sideKey:"front",x:25,y:20,width:50,height:60,rotationDeg:0,borderRadius:8,opacity:1},aspectRatio:"1/1"},{id:"st-laptop-front",label:"On Laptop",imageUrl:"/mockups/sticker-laptop.jpg",designPlacement:{sideKey:"front",x:32,y:28,width:36,height:44,rotationDeg:0,borderRadius:8,opacity:.95},aspectRatio:"16/10"},{id:"st-bottle-front",label:"On Water Bottle",imageUrl:"/mockups/sticker-bottle.jpg",designPlacement:{sideKey:"front",x:35,y:32,width:30,height:36,rotationDeg:5,skewX:3,borderRadius:50,opacity:.92},aspectRatio:"3/4"},{id:"st-sheet-front",label:"Sticker Sheet",imageUrl:"/mockups/sticker-sheet.jpg",designPlacement:{sideKey:"front",x:22,y:18,width:56,height:64,rotationDeg:-2,borderRadius:4,opacity:.98},aspectRatio:"4/3"},{id:"st-scattered",label:"Scattered View",imageUrl:"/mockups/sticker-scattered.jpg",designPlacement:{sideKey:"front",x:28,y:25,width:44,height:50,rotationDeg:15,borderRadius:8,opacity:.95},aspectRatio:"4/3"}],rD=[{id:"lh-flat-front",label:"Flat View",imageUrl:"/mockups/letterhead-flat.jpg",designPlacement:{sideKey:"front",x:12,y:6,width:76,height:88,rotationDeg:0,borderRadius:0,opacity:1},aspectRatio:"3/4"},{id:"lh-desk-front",label:"On Desk",imageUrl:"/mockups/letterhead-desk.jpg",designPlacement:{sideKey:"front",x:18,y:8,width:65,height:82,rotationDeg:0,borderRadius:0,opacity:.98},aspectRatio:"4/3"},{id:"lh-folder-front",label:"With Folder",imageUrl:"/mockups/letterhead-folder.jpg",designPlacement:{sideKey:"front",x:22,y:10,width:58,height:75,rotationDeg:-3,borderRadius:0,opacity:.95},aspectRatio:"4/3"},{id:"lh-brand-front",label:"Brand Scene",imageUrl:"/mockups/letterhead-brand.jpg",designPlacement:{sideKey:"front",x:20,y:12,width:60,height:72,rotationDeg:2,borderRadius:0,opacity:.95},aspectRatio:"4/3"},{id:"lh-perspective",label:"Perspective",imageUrl:"/mockups/letterhead-perspective.jpg",designPlacement:{sideKey:"front",x:25,y:15,width:52,height:68,rotationDeg:0,skewX:-5,skewY:3,borderRadius:0,opacity:.95},aspectRatio:"4/3"}],nD=[{id:"br-cover-front",label:"Cover",imageUrl:"/mockups/brochure-cover.jpg",designPlacement:{sideKey:"front",x:18,y:10,width:64,height:80,rotationDeg:0,borderRadius:0,opacity:1},aspectRatio:"3/4"},{id:"br-open-front",label:"Open View",imageUrl:"/mockups/brochure-open.jpg",designPlacement:{sideKey:"front",x:10,y:15,width:80,height:60,rotationDeg:0,borderRadius:0,opacity:.98},aspectRatio:"16/9"},{id:"br-folded-front",label:"Tri-Fold",imageUrl:"/mockups/brochure-folded.jpg",designPlacement:{sideKey:"front",x:22,y:18,width:56,height:64,rotationDeg:-5,borderRadius:0,opacity:.95},aspectRatio:"4/3"},{id:"br-stack-front",label:"Stack",imageUrl:"/mockups/brochure-stack.jpg",designPlacement:{sideKey:"front",x:18,y:22,width:60,height:56,rotationDeg:3,borderRadius:0,opacity:.95},aspectRatio:"4/3"},{id:"br-back-view",label:"Back Cover",imageUrl:"/mockups/brochure-back.jpg",designPlacement:{sideKey:"back",x:18,y:10,width:64,height:80,rotationDeg:0,borderRadius:0,opacity:1},aspectRatio:"3/4"}],sD=[{id:"bk-cover-front",label:"Cover",imageUrl:"/mockups/booklet-cover.jpg",designPlacement:{sideKey:"front",x:15,y:8,width:70,height:84,rotationDeg:0,borderRadius:2,opacity:1},aspectRatio:"3/4"},{id:"bk-open",label:"Open Spread",imageUrl:"/mockups/booklet-open.jpg",designPlacement:{sideKey:"front",x:8,y:12,width:84,height:65,rotationDeg:0,borderRadius:2,opacity:.98},aspectRatio:"16/9"},{id:"bk-standing",label:"Standing",imageUrl:"/mockups/booklet-standing.jpg",designPlacement:{sideKey:"front",x:28,y:8,width:44,height:80,rotationDeg:0,skewX:-3,skewY:2,borderRadius:2,opacity:.95},aspectRatio:"4/3"},{id:"bk-stack",label:"Stacked",imageUrl:"/mockups/booklet-stack.jpg",designPlacement:{sideKey:"front",x:20,y:15,width:60,height:65,rotationDeg:-4,borderRadius:2,opacity:.95},aspectRatio:"4/3"},{id:"bk-back",label:"Back Cover",imageUrl:"/mockups/booklet-back.jpg",designPlacement:{sideKey:"back",x:15,y:8,width:70,height:84,rotationDeg:0,borderRadius:2,opacity:1},aspectRatio:"3/4"}],aD=[{id:"ps-flat-front",label:"Flat View",imageUrl:"/mockups/poster-flat.jpg",designPlacement:{sideKey:"front",x:8,y:5,width:84,height:90,rotationDeg:0,borderRadius:0,opacity:1},aspectRatio:"2/3"},{id:"ps-frame",label:"Framed",imageUrl:"/mockups/poster-frame.jpg",designPlacement:{sideKey:"front",x:15,y:10,width:70,height:80,rotationDeg:0,borderRadius:0,opacity:.98},aspectRatio:"3/4"},{id:"ps-wall",label:"On Wall",imageUrl:"/mockups/poster-wall.jpg",designPlacement:{sideKey:"front",x:25,y:15,width:50,height:65,rotationDeg:0,borderRadius:0,opacity:.95},aspectRatio:"4/3"},{id:"ps-rolled",label:"Rolled",imageUrl:"/mockups/poster-rolled.jpg",designPlacement:{sideKey:"front",x:18,y:12,width:64,height:75,rotationDeg:3,borderRadius:0,opacity:.95},aspectRatio:"4/3"}],iD=[{id:"mn-flat-front",label:"Flat View",imageUrl:"/mockups/menu-flat.jpg",designPlacement:{sideKey:"front",x:10,y:5,width:80,height:90,rotationDeg:0,borderRadius:2,opacity:1},aspectRatio:"3/4"},{id:"mn-table",label:"On Table",imageUrl:"/mockups/menu-table.jpg",designPlacement:{sideKey:"front",x:18,y:12,width:65,height:76,rotationDeg:-3,borderRadius:2,opacity:.98},aspectRatio:"4/3"},{id:"mn-holder",label:"In Holder",imageUrl:"/mockups/menu-holder.jpg",designPlacement:{sideKey:"front",x:25,y:8,width:50,height:80,rotationDeg:0,skewX:-2,skewY:1,borderRadius:2,opacity:.95},aspectRatio:"4/3"},{id:"mn-stack",label:"Stacked",imageUrl:"/mockups/menu-stack.jpg",designPlacement:{sideKey:"front",x:20,y:15,width:60,height:68,rotationDeg:4,borderRadius:2,opacity:.95},aspectRatio:"4/3"},{id:"mn-back",label:"Back Side",imageUrl:"/mockups/menu-back.jpg",designPlacement:{sideKey:"back",x:10,y:5,width:80,height:90,rotationDeg:0,borderRadius:2,opacity:1},aspectRatio:"3/4"}],tx=[{productSlug:"business-cards",templates:XI},{productSlug:"flyers",templates:JI},{productSlug:"postcards",templates:ZI},{productSlug:"envelopes",templates:eD},{productSlug:"stickers",templates:tD},{productSlug:"letterheads",templates:rD},{productSlug:"brochures",templates:nD},{productSlug:"booklets",templates:sD},{productSlug:"posters",templates:aD},{productSlug:"menus",templates:iD}];function oD(e){const t=e.toLowerCase().replace(/\s+/g,"-");let n=tx.find(s=>s.productSlug.toLowerCase()===t);if(n||(n=tx.find(s=>s.productSlug.toLowerCase().includes(t)||t.includes(s.productSlug.toLowerCase()))),!n){const s=t.endsWith("s")?t.slice(0,-1):t,a=t.endsWith("s")?t:t+"s";n=tx.find(i=>i.productSlug.toLowerCase()===s||i.productSlug.toLowerCase()===a)}return(n==null?void 0:n.templates)||[]}const lD=({frontDesign:e,backDesign:t,pageMapping:n,productSlug:s,zoomLevel:a,onZoomChange:i})=>{var S,T,A,E,R,I;const[o,l]=k.useState(0),[c,d]=k.useState(!0),m=k.useRef(null),u="https://123project-build-a-production-ready-w.launchpulse.ai",h=oD(s||"business-cards"),f=[{id:"flat-single",label:"Single Flat Card",imageUrl:"",designPlacement:{sideKey:"front",x:10,y:10,width:80,height:80},aspectRatio:"4/3"},{id:"stacked-cards",label:"Stacked Cards",imageUrl:"",designPlacement:{sideKey:"front",x:12,y:12,width:76,height:76,rotationDeg:-3},aspectRatio:"4/3"},{id:"perspective-view",label:"Perspective View",imageUrl:"",designPlacement:{sideKey:"front",x:15,y:18,width:70,height:65,skewX:-8,skewY:4},aspectRatio:"4/3"},{id:"floating-shadow",label:"Floating",imageUrl:"",designPlacement:{sideKey:"front",x:18,y:15,width:64,height:70,rotationDeg:5},aspectRatio:"4/3"},{id:"back-view",label:"Back Side",imageUrl:"",designPlacement:{sideKey:"back",x:10,y:10,width:80,height:80},aspectRatio:"4/3"}],b=h.length>0?h:f,g=O=>{const L=n[O];if(!L||L.fileId===null||L.pageIndex===null)return null;let F=null;return e&&L.fileId===e.id?F=e:t&&L.fileId===t.id&&(F=t),F||(F=O==="front"?e:t,F||(F=O==="front"?t:e)),F?F.localPreview?F.localPreview:F.preview_images&&F.preview_images[L.pageIndex]?`${u}${F.preview_images[L.pageIndex]}`:F.preview_images&&F.preview_images[0]?`${u}${F.preview_images[0]}`:null:null},x=b[o],p=g(((S=x==null?void 0:x.designPlacement)==null?void 0:S.sideKey)||"front"),y=g("front")!==null,v=g("back")!==null,N=k.useRef(0),w=O=>{N.current=O.touches[0].clientX},j=O=>{const L=O.changedTouches[0].clientX,F=N.current-L;Math.abs(F)>50&&(F>0&&o<b.length-1?l(o+1):F<0&&o>0&&l(o-1))};k.useEffect(()=>{if(m.current){const O=m.current.children[o];O&&O.scrollIntoView({behavior:"smooth",block:"nearest",inline:"center"})}},[o]);const _=()=>{const O=x;if(!O)return{};switch(O.id){case"stacked-cards":return{transform:"rotate(-3deg)",boxShadow:"20px 20px 60px rgba(0,0,0,0.15), -5px -5px 20px rgba(255,255,255,0.8)"};case"perspective-view":return{transform:"perspective(1000px) rotateY(-15deg) rotateX(5deg)",boxShadow:"25px 25px 50px rgba(0,0,0,0.2)"};case"floating-shadow":return{transform:"rotate(5deg) translateY(-10px)",boxShadow:"0 30px 60px rgba(0,0,0,0.25)"};default:return{boxShadow:"0 10px 40px rgba(0,0,0,0.12)"}}};return r.jsxs("div",{className:"w-full",children:[r.jsxs("div",{className:"relative bg-gradient-to-br from-slate-100 via-gray-50 to-stone-100 rounded-2xl overflow-hidden",style:{minHeight:"360px"},onTouchStart:w,onTouchEnd:j,children:[r.jsxs("div",{className:"absolute inset-0",children:[r.jsx("div",{className:"w-full h-full",style:{backgroundImage:`
                radial-gradient(circle at 20% 80%, rgba(253, 224, 71, 0.08) 0%, transparent 50%),
                radial-gradient(circle at 80% 20%, rgba(251, 191, 36, 0.08) 0%, transparent 50%),
                linear-gradient(135deg, #fafafa 0%, #f5f5f4 50%, #fafaf9 100%)
              `}}),r.jsx("div",{className:"absolute inset-0 opacity-[0.03]",style:{backgroundImage:"linear-gradient(#000 1px, transparent 1px), linear-gradient(90deg, #000 1px, transparent 1px)",backgroundSize:"20px 20px"}})]}),r.jsx("div",{className:"relative flex items-center justify-center p-6 sm:p-10 min-h-[360px]",style:{transform:`scale(${a/100})`,transformOrigin:"center center",transition:"transform 0.3s cubic-bezier(0.4, 0, 0.2, 1)"},children:p?r.jsxs("div",{className:"relative",children:[(x==null?void 0:x.id)==="stacked-cards"&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"absolute w-full h-full bg-white rounded-lg",style:{transform:"rotate(8deg) translateX(8px) translateY(8px)",boxShadow:"0 4px 15px rgba(0,0,0,0.08)",zIndex:1}}),r.jsx("div",{className:"absolute w-full h-full bg-white rounded-lg",style:{transform:"rotate(4deg) translateX(4px) translateY(4px)",boxShadow:"0 6px 20px rgba(0,0,0,0.1)",zIndex:2}})]}),r.jsxs("div",{className:"relative bg-white rounded-xl overflow-hidden transition-all duration-500",style:{..._(),maxWidth:"320px",maxHeight:"220px",zIndex:10},children:[r.jsx("div",{className:"absolute inset-2 border border-dashed border-gray-200 rounded-lg pointer-events-none opacity-40 z-20"}),r.jsx("img",{src:p,alt:`${(x==null?void 0:x.label)||"Preview"}`,className:"w-full h-full object-contain",style:{borderRadius:(T=x==null?void 0:x.designPlacement)!=null&&T.borderRadius?`${x.designPlacement.borderRadius}px`:"4px"},loading:"eager"})]}),(x==null?void 0:x.id)==="floating-shadow"&&r.jsx("div",{className:"absolute -bottom-6 left-1/2 transform -translate-x-1/2 w-3/4 h-8 bg-black/10 rounded-full blur-xl"})]}):r.jsxs("div",{className:"text-center py-16",children:[r.jsx("div",{className:"w-40 h-28 mx-auto mb-6 bg-white rounded-xl shadow-xl border-2 border-dashed border-gray-200 flex items-center justify-center transform hover:scale-105 transition-transform",children:r.jsx("svg",{className:"w-14 h-14 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("p",{className:"text-gray-600 font-medium mb-1",children:"Upload your design to preview"}),r.jsx("p",{className:"text-gray-400 text-sm",children:"See how your artwork will look on the final product"})]})}),r.jsx("div",{className:"absolute top-4 left-4",children:r.jsxs("span",{className:"inline-flex items-center px-3 py-1.5 bg-white/95 backdrop-blur-md rounded-full text-xs font-semibold text-gray-700 shadow-sm border border-gray-100",children:[r.jsxs("svg",{className:"w-3.5 h-3.5 mr-1.5 text-gray-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]}),(x==null?void 0:x.label)||"Preview"]})}),p&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("span",{className:`inline-flex items-center px-3 py-1.5 backdrop-blur-md rounded-full text-xs font-bold shadow-sm uppercase tracking-wide ${((A=x==null?void 0:x.designPlacement)==null?void 0:A.sideKey)==="back"?"bg-purple-500/90 text-white":"bg-yellow-400/90 text-black"}`,children:((E=x==null?void 0:x.designPlacement)==null?void 0:E.sideKey)==="back"?r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})}),"Back"]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-3.5 h-3.5 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Front"]})})}),y&&v&&r.jsx("div",{className:"absolute bottom-20 left-1/2 transform -translate-x-1/2",children:r.jsxs("div",{className:"inline-flex bg-white/95 backdrop-blur-md rounded-full p-1 shadow-lg border border-gray-100",children:[r.jsx("button",{onClick:()=>{const O=b.findIndex(L=>L.designPlacement.sideKey==="front");O>=0&&l(O)},className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${((R=x==null?void 0:x.designPlacement)==null?void 0:R.sideKey)==="front"?"bg-yellow-400 text-black shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Front"}),r.jsx("button",{onClick:()=>{const O=b.findIndex(L=>L.designPlacement.sideKey==="back");O>=0&&l(O)},className:`px-4 py-1.5 text-xs font-semibold rounded-full transition-all ${((I=x==null?void 0:x.designPlacement)==null?void 0:I.sideKey)==="back"?"bg-purple-500 text-white shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Back"})]})}),r.jsx("div",{className:"absolute bottom-4 left-1/2 transform -translate-x-1/2",children:r.jsxs("div",{className:"flex items-center gap-1.5 bg-white/95 backdrop-blur-md rounded-full px-3 py-2 shadow-lg border border-gray-100",children:[r.jsx("button",{onClick:()=>i(Math.max(50,a-25)),disabled:a<=50,className:"w-7 h-7 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-100 disabled:text-gray-300 disabled:hover:bg-transparent transition-colors",title:"Zoom out",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM13 10H7"})})}),r.jsx("div",{className:"relative w-20 px-1",children:r.jsx("input",{type:"range",min:"50",max:"200",value:a,onChange:O=>i(parseInt(O.target.value)),className:"w-full h-1.5 bg-gray-200 rounded-lg appearance-none cursor-pointer",style:{background:`linear-gradient(to right, #fbbf24 0%, #fbbf24 ${(a-50)/1.5}%, #e5e7eb ${(a-50)/1.5}%, #e5e7eb 100%)`}})}),r.jsx("button",{onClick:()=>i(Math.min(200,a+25)),disabled:a>=200,className:"w-7 h-7 rounded-full flex items-center justify-center text-gray-600 hover:bg-gray-100 disabled:text-gray-300 disabled:hover:bg-transparent transition-colors",title:"Zoom in",children:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})})}),r.jsx("div",{className:"w-px h-5 bg-gray-200 mx-0.5"}),r.jsxs("button",{onClick:()=>i(100),className:`px-2.5 py-1 text-xs font-medium rounded-full transition-colors ${a===100?"bg-yellow-400 text-black":"text-gray-600 hover:bg-gray-100"}`,title:"Reset to 100%",children:[a,"%"]})]})})]}),r.jsxs("div",{className:"mt-4",children:[r.jsx("div",{ref:m,className:"flex gap-3 overflow-x-auto pb-2 px-1 snap-x snap-mandatory touch-pan-x",style:{scrollbarWidth:"none",msOverflowStyle:"none",WebkitOverflowScrolling:"touch"},children:b.map((O,L)=>{const F=g(O.designPlacement.sideKey),M=L===o;return r.jsx("button",{onClick:()=>l(L),className:`
                  flex-shrink-0 snap-center rounded-xl overflow-hidden border-2 transition-all duration-300
                  ${M?"border-yellow-400 shadow-lg shadow-yellow-200/50 scale-105 ring-2 ring-yellow-200":"border-gray-200 hover:border-gray-300 hover:shadow-md"}
                `,style:{width:"72px",height:"54px"},children:r.jsxs("div",{className:"w-full h-full bg-gradient-to-br from-gray-50 to-gray-100 flex items-center justify-center p-1.5 relative",children:[F?r.jsx("img",{src:F,alt:O.label,className:"w-full h-full object-contain rounded",style:{transform:O.id==="stacked-cards"?"rotate(-2deg)":O.id==="perspective-view"?"perspective(100px) rotateY(-5deg)":O.id==="floating-shadow"?"rotate(3deg)":"none"}}):r.jsx("div",{className:`w-8 h-6 rounded shadow-sm border ${O.designPlacement.sideKey==="back"?"bg-purple-100 border-purple-200":"bg-white border-gray-200"}`}),r.jsx("div",{className:`absolute bottom-1 right-1 w-2 h-2 rounded-full ${O.designPlacement.sideKey==="back"?"bg-purple-400":"bg-yellow-400"}`})]})},O.id)})}),r.jsx("div",{className:"flex gap-3 mt-2 overflow-x-auto pb-1 px-1",style:{scrollbarWidth:"none"},children:b.map((O,L)=>r.jsx("button",{onClick:()=>l(L),className:`flex-shrink-0 text-[11px] font-medium transition-colors whitespace-nowrap ${L===o?"text-gray-900":"text-gray-400 hover:text-gray-600"}`,style:{width:"72px",textAlign:"center"},children:O.label},O.id))})]})]})},aN=({side:e,label:t,required:n,file:s,isUploading:a,uploadProgress:i,error:o,onFileSelect:l,onRemove:c,acceptedTypes:d,showUseSameOption:m,onUseSameFile:u,otherSideFile:h})=>{const f=k.useRef(null),[b,g]=k.useState(!1),x=k.useCallback(w=>{var _;w.preventDefault(),g(!1);const j=(_=w.dataTransfer.files)==null?void 0:_[0];j&&l(j)},[l]),p=k.useCallback(w=>{w.preventDefault(),g(!0)},[]),y=k.useCallback(w=>{w.preventDefault(),g(!1)},[]),v=w=>{var _;const j=(_=w.target.files)==null?void 0:_[0];j&&l(j),w.target.value=""},N=e==="front"?r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})});return r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2.5",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:`w-8 h-8 rounded-lg flex items-center justify-center ${e==="front"?"bg-yellow-100 text-yellow-600":"bg-purple-100 text-purple-600"}`,children:N}),r.jsxs("div",{children:[r.jsxs("label",{className:"text-sm font-bold text-gray-900",children:[t,n&&r.jsx("span",{className:"text-red-500 ml-0.5",children:"*"})]}),r.jsx("p",{className:"text-[10px] text-gray-400 uppercase tracking-wide",children:e==="front"?"Primary design":"Secondary design"})]})]}),r.jsxs("div",{className:"flex items-center gap-2",children:[m&&h&&!s&&r.jsxs("button",{onClick:u,className:"text-xs text-yellow-600 hover:text-yellow-700 font-medium flex items-center gap-1 px-2 py-1 rounded-lg hover:bg-yellow-50 transition-colors",children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 16H6a2 2 0 01-2-2V6a2 2 0 012-2h8a2 2 0 012 2v2m-6 12h8a2 2 0 002-2v-8a2 2 0 00-2-2h-8a2 2 0 00-2 2v8a2 2 0 002 2z"})}),"Use front file"]}),s&&r.jsxs("button",{onClick:c,className:"text-xs text-gray-500 hover:text-red-500 transition-colors flex items-center gap-1 px-2 py-1 rounded-lg hover:bg-red-50",children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})}),"Remove"]})]})]}),!s&&!a&&r.jsxs("div",{onDrop:x,onDragOver:p,onDragLeave:y,onClick:()=>{var w;return(w=f.current)==null?void 0:w.click()},className:`
            relative border-2 border-dashed rounded-xl p-5 text-center cursor-pointer transition-all duration-200
            ${b?e==="front"?"border-yellow-400 bg-yellow-50 scale-[1.02]":"border-purple-400 bg-purple-50 scale-[1.02]":o?"border-red-300 bg-red-50":"border-gray-200 hover:border-gray-300 bg-gray-50/50 hover:bg-gray-50"}
          `,children:[r.jsx("input",{ref:f,type:"file",accept:d,onChange:v,className:"hidden"}),r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsx("div",{className:`w-12 h-12 rounded-xl flex items-center justify-center mb-3 transition-colors ${b?e==="front"?"bg-yellow-100":"bg-purple-100":"bg-gray-100"}`,children:r.jsx("svg",{className:`w-6 h-6 transition-colors ${b?e==="front"?"text-yellow-500":"text-purple-500":"text-gray-400"}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),r.jsxs("p",{className:"text-sm text-gray-700 font-medium",children:["Drag & drop or"," ",r.jsx("span",{className:e==="front"?"text-yellow-600":"text-purple-600",children:"browse"})]}),r.jsx("p",{className:"text-xs text-gray-400 mt-1.5",children:"PDF, PNG, JPG up to 50MB"})]})]}),a&&r.jsx("div",{className:`border-2 rounded-xl p-4 ${e==="front"?"border-yellow-200 bg-yellow-50/50":"border-purple-200 bg-purple-50/50"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:`w-10 h-10 rounded-lg flex items-center justify-center ${e==="front"?"bg-yellow-100":"bg-purple-100"}`,children:r.jsxs("svg",{className:`animate-spin w-5 h-5 ${e==="front"?"text-yellow-500":"text-purple-500"}`,fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center justify-between mb-1.5",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Uploading..."}),r.jsxs("span",{className:`text-xs font-semibold ${e==="front"?"text-yellow-600":"text-purple-600"}`,children:[i,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2 overflow-hidden",children:r.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${e==="front"?"bg-yellow-400":"bg-purple-400"}`,style:{width:`${i}%`}})})]})]})}),s&&!a&&r.jsx("div",{className:`border-2 rounded-xl p-3 transition-all ${e==="front"?"border-yellow-200 bg-gradient-to-r from-yellow-50 to-amber-50":"border-purple-200 bg-gradient-to-r from-purple-50 to-fuchsia-50"}`,children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-14 h-14 rounded-lg bg-white shadow-sm flex items-center justify-center overflow-hidden flex-shrink-0 border border-gray-100",children:s.localPreview||s.preview_images&&s.preview_images[0]?r.jsx("img",{src:s.localPreview||`https://123project-build-a-production-ready-w.launchpulse.ai${s.preview_images[0]}`,alt:"",className:"w-full h-full object-cover"}):s.file_type==="pdf"?r.jsx("svg",{className:"w-7 h-7 text-red-500",fill:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{d:"M14 2H6a2 2 0 00-2 2v16a2 2 0 002 2h12a2 2 0 002-2V8l-6-6zm-1 2l5 5h-5V4zm-3 9.5c0 .28-.22.5-.5.5H8v2h1.5c.28 0 .5.22.5.5s-.22.5-.5.5H7.5c-.28 0-.5-.22-.5-.5v-4c0-.28.22-.5.5-.5H9.5c.28 0 .5.22.5.5s-.22.5-.5.5H8v1h1.5c.28 0 .5.22.5.5zm4 2c0 .83-.67 1.5-1.5 1.5H11.5c-.28 0-.5-.22-.5-.5v-4c0-.28.22-.5.5-.5H13.5c.83 0 1.5.67 1.5 1.5v2zm3-2.5c.28 0 .5.22.5.5s-.22.5-.5.5H16v1h1c.28 0 .5.22.5.5s-.22.5-.5.5h-1v1.5c0 .28-.22.5-.5.5s-.5-.22-.5-.5v-4c0-.28.22-.5.5-.5H17zm-5 .5v2c0 .28.22.5.5.5s.5-.22.5-.5v-2c0-.28-.22-.5-.5-.5s-.5.22-.5.5z"})}):r.jsx("svg",{className:"w-7 h-7 text-blue-500",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-semibold text-gray-900 truncate",children:s.original_filename}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("span",{className:`text-xs font-medium px-1.5 py-0.5 rounded ${s.file_type==="pdf"?"bg-red-100 text-red-600":"bg-blue-100 text-blue-600"}`,children:s.file_type.toUpperCase()}),s.num_pages>1&&r.jsxs("span",{className:"text-xs font-medium px-1.5 py-0.5 rounded bg-gray-100 text-gray-600",children:[s.num_pages," pages"]}),r.jsxs("span",{className:`flex items-center gap-0.5 text-xs font-medium ${e==="front"?"text-yellow-600":"text-purple-600"}`,children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"Uploaded"]})]})]})]})}),o&&r.jsxs("div",{className:"mt-2.5 flex items-start gap-2 text-red-600 bg-red-50 p-3 rounded-lg",children:[r.jsx("svg",{className:"w-4 h-4 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-xs font-medium",children:o})]})]})},cD=({sides:e,frontFile:t,backFile:n,pageMapping:s,onMappingChange:a,useSameFile:i,onUseSameFileChange:o,isDoubleSided:l})=>{const c=(f,b,g)=>{a({...s,[f]:{fileId:b,pageIndex:g}})},m=(()=>{const f=[];return t&&f.push({id:t.id,label:"Front Upload",file:t}),n&&!i&&n.id!==(t==null?void 0:t.id)&&f.push({id:n.id,label:"Back Upload",file:n}),f})(),u=t||n,h=t!=null&&t.num_pages&&t.num_pages>1?t:n!=null&&n.num_pages&&n.num_pages>1?n:null;return u?r.jsxs("div",{className:"bg-gradient-to-br from-gray-50 to-slate-50 rounded-xl p-4 mt-5 border border-gray-100",children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-8 h-8 rounded-lg bg-indigo-100 flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-indigo-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2m-3 7h3m-3 4h3m-6-4h.01M9 16h.01"})})}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-bold text-gray-900",children:"Assign Pages to Print Sides"}),r.jsx("p",{className:"text-[10px] text-gray-500",children:"Select which page appears on each side"})]})]}),t&&l&&r.jsxs("label",{className:"flex items-center gap-2 cursor-pointer group",children:[r.jsxs("span",{className:"relative",children:[r.jsx("input",{type:"checkbox",checked:i,onChange:f=>o(f.target.checked),className:"sr-only"}),r.jsx("div",{className:`w-10 h-5 rounded-full transition-colors ${i?"bg-yellow-400":"bg-gray-200 group-hover:bg-gray-300"}`,children:r.jsx("div",{className:`absolute top-0.5 left-0.5 w-4 h-4 bg-white rounded-full shadow-sm transition-transform ${i?"translate-x-5":""}`})})]}),r.jsx("span",{className:"text-xs text-gray-600 font-medium",children:"Same file for both"})]})]}),r.jsx("div",{className:"space-y-3",children:e.map(f=>{var N;const b=s[f.key]||{fileId:null,pageIndex:null},g=(N=m.find(w=>w.id===b.fileId))==null?void 0:N.file,x=(g==null?void 0:g.num_pages)||(m.length===1?m[0].file.num_pages:1);if(f.key==="back"&&!l)return null;const p=f.required||f.key==="back"&&l,y=p&&(b.fileId===null||b.pageIndex===null),v=m.length>0;return r.jsxs("div",{className:`bg-white rounded-xl p-4 border-2 transition-all ${y?"border-red-200 shadow-red-100":"border-gray-100 hover:border-gray-200"}`,children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2 sm:min-w-[120px]",children:[r.jsx("div",{className:`w-9 h-9 rounded-lg flex items-center justify-center ${f.key==="front"?"bg-gradient-to-br from-yellow-400 to-amber-400 text-white shadow-lg shadow-yellow-200":"bg-gradient-to-br from-purple-400 to-fuchsia-400 text-white shadow-lg shadow-purple-200"}`,children:f.key==="front"?r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),r.jsxs("div",{children:[r.jsx("span",{className:"font-bold text-gray-900 text-sm",children:f.label}),p&&r.jsx("span",{className:"text-red-500 ml-0.5 text-xs",children:"*"}),r.jsx("p",{className:"text-[10px] text-gray-400",children:f.key==="front"?"Main print side":"Reverse side"})]})]}),r.jsx("div",{className:"hidden sm:flex items-center text-gray-300",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 7l5 5m0 0l-5 5m5-5H6"})})}),r.jsx("div",{className:"flex-1 flex flex-col sm:flex-row items-stretch sm:items-center gap-2",children:v?r.jsxs(r.Fragment,{children:[m.length>1&&r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-wide mb-1 block",children:"Source File"}),r.jsxs("select",{value:b.fileId||"",onChange:w=>{const j=w.target.value||null;c(f.key,j,0)},className:`w-full px-3 py-2.5 text-sm border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-1 appearance-none bg-white cursor-pointer ${y&&!b.fileId?"border-red-300 focus:ring-red-400 bg-red-50":"border-gray-200 focus:ring-yellow-400 hover:border-gray-300"}`,children:[r.jsx("option",{value:"",children:"Select file..."}),m.map(w=>r.jsxs("option",{value:w.id,children:[w.label," ",w.file.num_pages>1?`(${w.file.num_pages} pages)`:""]},w.id))]})]}),(m.length===1||b.fileId)&&r.jsxs("div",{className:"flex-1",children:[r.jsxs("label",{className:"text-[10px] text-gray-500 font-medium uppercase tracking-wide mb-1 block",children:["Assign to ",f.label]}),r.jsxs("select",{value:b.pageIndex??"",onChange:w=>{const j=w.target.value===""?null:parseInt(w.target.value),_=b.fileId||(m.length===1?m[0].id:null);c(f.key,_,j)},className:`w-full px-3 py-2.5 text-sm border-2 rounded-lg focus:outline-none focus:ring-2 focus:ring-offset-1 appearance-none bg-white cursor-pointer font-medium ${y&&b.pageIndex===null?"border-red-300 focus:ring-red-400 bg-red-50":f.key==="front"?"border-yellow-200 focus:ring-yellow-400 hover:border-yellow-300":"border-purple-200 focus:ring-purple-400 hover:border-purple-300"}`,children:[r.jsx("option",{value:"",children:"Select page..."}),Array.from({length:x||1},(w,j)=>r.jsxs("option",{value:j,children:["Page ",j+1]},j))]})]})]}):r.jsx("div",{className:"flex-1 px-3 py-2.5 text-sm text-gray-400 bg-gray-50 rounded-lg border border-gray-200 text-center",children:"Upload a file first"})})]}),y&&v&&r.jsxs("div",{className:"mt-3 flex items-center gap-2 text-red-600 bg-red-50 px-3 py-2 rounded-lg",children:[r.jsx("svg",{className:"w-4 h-4 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M18 10a8 8 0 11-16 0 8 8 0 0116 0zm-7 4a1 1 0 11-2 0 1 1 0 012 0zm-1-9a1 1 0 00-1 1v4a1 1 0 102 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsxs("span",{className:"text-xs font-medium",children:["Please select a page for the ",f.label.toLowerCase()," side"]})]})]},f.key)})}),h&&h.num_pages>=2&&l&&r.jsx("div",{className:"mt-4 pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:["Detected ",h.num_pages," pages in your PDF"]}),r.jsxs("button",{onClick:()=>{a({front:{fileId:h.id,pageIndex:0},back:{fileId:h.id,pageIndex:1}})},className:"inline-flex items-center gap-1.5 px-3 py-1.5 text-xs font-semibold text-yellow-700 bg-yellow-100 hover:bg-yellow-200 rounded-lg transition-colors",children:[r.jsx("svg",{className:"w-3.5 h-3.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 10V3L4 14h7v7l9-11h-7z"})}),"Quick assign: Page 1 & 2"]})]})})]}):null},dD=({productId:e,productSlug:t,printConfig:n,selectedConfig:s,onDesignChange:a,sessionId:i})=>{var V;const o="https://123project-build-a-production-ready-w.launchpulse.ai",[l,c]=k.useState(null),[d,m]=k.useState(null),[u,h]=k.useState(!1),[f,b]=k.useState(!1),[g,x]=k.useState(0),[p,y]=k.useState(0),[v,N]=k.useState(null),[w,j]=k.useState(null),[_,S]=k.useState({front:{fileId:null,pageIndex:null},back:{fileId:null,pageIndex:null}}),[T,A]=k.useState(!1),[E,R]=k.useState(100),I=(s==null?void 0:s.print_sides)==="double_sided"||(s==null?void 0:s.print_sides)==="double-sided"||(s==null?void 0:s.printSides)==="double_sided"||(s==null?void 0:s.printSides)==="double-sided"||(((V=n==null?void 0:n.sides)==null?void 0:V.some(K=>K.key==="back"&&K.required))??!1),O=(n==null?void 0:n.sides)||[{key:"front",label:"Front",required:!0},{key:"back",label:"Back",required:I}],L=K=>{if(!["application/pdf","image/png","image/jpeg","image/jpg"].includes(K.type))return"Invalid format. Please use PDF, PNG, or JPG files.";const G=50*1024*1024;return K.size>G?"File too large. Maximum size is 50MB.":null},F=async(K,ne,G,oe,H,ee)=>{var C,U,q,de,he;const J=L(K);if(J){ee(J);return}const X=await M(K),se=`temp_${Date.now()}_${ne}`;G({id:se,file:K,file_url:"",file_type:K.type.includes("pdf")?"pdf":"image",original_filename:K.name,num_pages:1,preview_images:[],localPreview:X}),oe(!0),H(0),ee(null);const $=new FormData;$.append("file",K),$.append("product_id",e),$.append("side",ne),i&&$.append("session_id",i);try{const le=await te.post(`${o}/api/design-uploads`,$,{headers:{"Content-Type":"multipart/form-data"},onUploadProgress:B=>{if(B.total){const re=Math.round(B.loaded*100/B.total);H(re)}}}),be={id:le.data.id||le.data.designUploadId,file:null,file_url:le.data.file_url,file_type:le.data.file_type,original_filename:le.data.original_filename||K.name,num_pages:le.data.num_pages||le.data.numPages||1,preview_images:le.data.preview_images||le.data.previewImages||[],localPreview:X};G(be);const z={..._};ne==="front"&&!((C=_.front)!=null&&C.fileId)&&(z.front={fileId:be.id,pageIndex:0}),ne==="back"&&!((U=_.back)!=null&&U.fileId)&&(z.back={fileId:be.id,pageIndex:0}),ne==="front"&&be.num_pages>=2&&I&&!((q=_.back)!=null&&q.fileId)&&(z.back={fileId:be.id,pageIndex:1}),S(z)}catch(le){ee(((he=(de=le.response)==null?void 0:de.data)==null?void 0:he.message)||"Upload failed. Please try again."),G(null),console.error("Upload error:",le)}finally{oe(!1)}},M=K=>new Promise(ne=>{if(K.type.startsWith("image/")){const G=new FileReader;G.onloadend=()=>{ne(G.result)},G.readAsDataURL(K)}else ne("")}),D=async K=>{var oe;const ne=K==="front"?l:d;if(ne&&ne.id&&!ne.id.startsWith("temp_"))try{await te.delete(`${o}/api/design-uploads/${ne.id}`)}catch(H){console.error("Failed to delete design:",H)}K==="front"?(c(null),N(null)):(m(null),j(null));const G={..._};K==="front"?(G.front={fileId:null,pageIndex:null},((oe=_.back)==null?void 0:oe.fileId)===(ne==null?void 0:ne.id)&&(G.back={fileId:null,pageIndex:null})):G.back={fileId:null,pageIndex:null},S(G),K==="front"&&T&&A(!1)},W=()=>{l&&(A(!0),S(K=>({...K,back:{fileId:l.id,pageIndex:l.num_pages>=2?1:0}})))};if(k.useEffect(()=>{const K=l&&!l.id.startsWith("temp_")?{id:l.id,file_url:l.file_url,file_type:l.file_type,original_filename:l.original_filename,num_pages:l.num_pages,preview_images:l.preview_images}:null,ne=d&&!d.id.startsWith("temp_")?{id:d.id,file_url:d.file_url,file_type:d.file_type,original_filename:d.original_filename,num_pages:d.num_pages,preview_images:d.preview_images}:null;a({front:K,back:ne},_)},[l,d,_]),k.useEffect(()=>{T&&l&&S(K=>({...K,back:{fileId:l.id,pageIndex:l.num_pages>=2?1:0}}))},[T,l]),!(n!=null&&n.requires_design_upload))return null;const P=I&&!T;return r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-3 mb-5",children:[r.jsx("div",{className:"w-11 h-11 bg-gradient-to-br from-yellow-400 to-amber-500 rounded-xl flex items-center justify-center shadow-lg shadow-yellow-300/40",children:r.jsx("svg",{className:"w-5 h-5 text-white",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2.5,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900",children:"Upload Your Design"}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Upload print-ready files for your ",(t==null?void 0:t.replace(/-/g," "))||"product"]})]})]}),r.jsxs("div",{className:`flex flex-col gap-4 ${P?"lg:flex-row":""}`,children:[r.jsx(aN,{side:"front",label:"Front Design",required:!0,file:l,isUploading:u,uploadProgress:g,error:v,onFileSelect:K=>F(K,"front",c,h,x,N),onRemove:()=>D("front"),acceptedTypes:".pdf,.png,.jpg,.jpeg"}),P&&r.jsx(aN,{side:"back",label:"Back Design",required:I,file:d,isUploading:f,uploadProgress:p,error:w,onFileSelect:K=>F(K,"back",m,b,y,j),onRemove:()=>D("back"),acceptedTypes:".pdf,.png,.jpg,.jpeg",showUseSameOption:l!==null&&!d,onUseSameFile:W,otherSideFile:l})]}),r.jsx(cD,{sides:O,frontFile:l,backFile:T?l:d,pageMapping:_,onMappingChange:S,useSameFile:T,onUseSameFileChange:A,isDoubleSided:I}),(l||d)&&r.jsxs("div",{className:"mt-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsx("h4",{className:"text-sm font-bold text-gray-900",children:"Preview Your Print"}),r.jsx("span",{className:"text-xs text-gray-400",children:"Swipe to see different views"})]}),r.jsx(lD,{frontDesign:l,backDesign:T?l:d,pageMapping:_,productSlug:t,zoomLevel:E,onZoomChange:R})]}),I&&!l&&r.jsx("div",{className:"mt-5 bg-amber-50 border border-amber-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-amber-800",children:"Design Required"}),r.jsxs("p",{className:"text-sm text-amber-700 mt-1",children:["Please upload your design file",I?"s":""," to continue with ",I?"double-sided":""," printing."]})]})]})}),r.jsxs("div",{className:"mt-5 flex items-start gap-2.5 text-xs text-gray-500 bg-gray-50 p-3 rounded-lg",children:[r.jsx("svg",{className:"w-4 h-4 flex-shrink-0 mt-0.5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-600 mb-1",children:"Upload Tips"}),r.jsxs("ul",{className:"space-y-0.5 text-gray-500",children:[r.jsx("li",{children:"Use high-resolution images (300 DPI recommended)"}),r.jsx("li",{children:"Include 3mm bleed for edge-to-edge printing"}),r.jsx("li",{children:"Supported formats: PDF, PNG, JPG (max 50MB)"})]})]})]})]})},uD=async e=>{const s=(await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/public/products/${e}`)).data;return s.variants&&(s.variants=s.variants.map(a=>({...a,quantity:Number(a.quantity),unit_price:Number(a.unit_price),total_price:Number(a.total_price),compare_at_price:a.compare_at_price?Number(a.compare_at_price):null,sort_order:Number(a.sort_order)}))),s.product&&(s.product.base_price=Number(s.product.base_price)),s},mD=async e=>{const t="https://123project-build-a-production-ready-w.launchpulse.ai";try{return(await te.get(`${t}/api/public/products/${e}/print-config`)).data}catch(n){return console.error("Failed to fetch print config:",n),null}},hD=async(e,t,n)=>{const s="https://123project-build-a-production-ready-w.launchpulse.ai",a={"Content-Type":"application/json"};return t&&(a["x-guest-id"]=t),n&&(a.Authorization=`Bearer ${n}`),(await te.post(`${s}/api/cart/items`,e,{headers:a})).data},pD=({label:e,description:t,isSelected:n,onClick:s,icon:a})=>r.jsx("button",{onClick:s,className:`
      relative w-full p-4 rounded-xl border-2 text-left transition-all duration-200
      transform hover:scale-[1.02] active:scale-[0.98]
      ${n?"border-yellow-400 bg-gradient-to-br from-yellow-50 to-amber-50 shadow-lg shadow-yellow-100":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-md"}
    `,children:r.jsxs("div",{className:"flex items-start gap-3",children:[a&&r.jsx("div",{className:`flex-shrink-0 w-10 h-10 rounded-lg flex items-center justify-center ${n?"bg-yellow-400 text-white":"bg-gray-100 text-gray-500"}`,children:a}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:`font-semibold ${n?"text-gray-900":"text-gray-700"}`,children:e}),n&&r.jsx("span",{className:"flex-shrink-0 w-5 h-5 bg-yellow-400 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-3 h-3 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})]}),t&&r.jsx("p",{className:"mt-1 text-sm text-gray-500 line-clamp-2",children:t})]})]})}),fD=({variant:e,isSelected:t,onClick:n,isPopular:s})=>{const a=Number(e.total_price),i=Number(e.unit_price),o=e.compare_at_price?Number(e.compare_at_price):null,l=o&&o>a?Math.round((o-a)/o*100):null;return r.jsxs("button",{onClick:n,className:`
        relative w-full p-5 rounded-2xl border-2 text-left transition-all duration-300
        transform hover:scale-[1.02] active:scale-[0.98]
        ${t?"border-yellow-400 bg-gradient-to-br from-yellow-50 via-amber-50 to-orange-50 shadow-xl shadow-yellow-200/50":"border-gray-200 bg-white hover:border-gray-300 hover:shadow-lg"}
      `,children:[s&&r.jsx("div",{className:"absolute -top-3 left-4",children:r.jsxs("span",{className:"inline-flex items-center gap-1 px-3 py-1 bg-gradient-to-r from-purple-500 to-pink-500 text-white text-xs font-bold rounded-full shadow-lg",children:[r.jsx("svg",{className:"w-3 h-3",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{d:"M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"})}),"Popular"]})}),l&&l>0&&r.jsx("div",{className:"absolute -top-3 right-4",children:r.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 bg-gradient-to-r from-green-500 to-emerald-500 text-white text-xs font-bold rounded-full shadow-lg",children:[l,"% OFF"]})}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx("div",{className:`
            w-6 h-6 rounded-full border-2 flex items-center justify-center transition-all
            ${t?"border-yellow-400 bg-yellow-400":"border-gray-300 bg-white"}
          `,children:t&&r.jsx("svg",{className:"w-4 h-4 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),r.jsxs("div",{children:[r.jsx("span",{className:"text-lg font-bold text-gray-900",children:e.label}),r.jsxs("p",{className:"text-sm text-gray-500",children:[jr(i)," per unit"]})]})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("div",{className:"flex items-center gap-2 justify-end",children:r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:jr(a)})}),o&&o>a&&r.jsx("span",{className:"text-sm text-gray-400 line-through",children:jr(o)}),e.discount_label&&!l&&r.jsx("span",{className:"inline-block mt-1 text-xs font-semibold text-green-600 bg-green-100 px-2 py-0.5 rounded-full",children:e.discount_label})]})]})]})},xD=({images:e,activeIndex:t,onClose:n,onPrev:s,onNext:a})=>{var i,o;return r.jsxs("div",{className:"fixed inset-0 z-50 bg-black/95 flex items-center justify-center",onClick:n,children:[r.jsx("button",{onClick:n,className:"absolute top-4 right-4 w-12 h-12 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),e.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:l=>{l.stopPropagation(),s()},className:"absolute left-4 w-12 h-12 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{onClick:l=>{l.stopPropagation(),a()},className:"absolute right-4 w-12 h-12 bg-white/10 hover:bg-white/20 rounded-full flex items-center justify-center text-white transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),r.jsx("div",{className:"max-w-5xl max-h-[85vh] p-4",onClick:l=>l.stopPropagation(),children:r.jsx("img",{src:(i=e[t])==null?void 0:i.image_url,alt:((o=e[t])==null?void 0:o.alt_text)||"",className:"max-w-full max-h-[80vh] object-contain rounded-lg"})}),r.jsx("div",{className:"absolute bottom-6 left-1/2 -translate-x-1/2 flex gap-2",children:e.map((l,c)=>r.jsx("button",{onClick:d=>{d.stopPropagation()},className:`w-2 h-2 rounded-full transition-all ${c===t?"bg-white w-6":"bg-white/40 hover:bg-white/60"}`},c))})]})},gD=({activeView:e,onViewChange:t,hasBackView:n,hasLifestyleMockups:s})=>{const a=[{id:"front",label:"Front",icon:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})},...n?[{id:"back",label:"Back",icon:r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}]:[],...s?[{id:"lifestyle",label:"In Use",icon:r.jsxs("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 9a2 2 0 012-2h.93a2 2 0 001.664-.89l.812-1.22A2 2 0 0110.07 4h3.86a2 2 0 011.664.89l.812 1.22A2 2 0 0018.07 7H19a2 2 0 012 2v9a2 2 0 01-2 2H5a2 2 0 01-2-2V9z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 13a3 3 0 11-6 0 3 3 0 016 0z"})]})}]:[]];return r.jsx("div",{className:"inline-flex bg-gray-100 rounded-xl p-1",children:a.map(i=>r.jsxs("button",{onClick:()=>t(i.id),className:`
            flex items-center gap-2 px-4 py-2 rounded-lg text-sm font-medium transition-all duration-200
            ${e===i.id?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}
          `,children:[i.icon,i.label]},i.id))})},yD=()=>{var Q,me,Pe,at,xr,Lu;const{slug:e}=fr(),[t]=Ye(),n=t.get("edit"),s=ae(ke=>ke.authentication_state.auth_token),a=ae(ke=>ke.show_toast),i=ae(ke=>ke.increment_cart_count),[o,l]=k.useState(null),[c,d]=k.useState({}),[m,u]=k.useState(0),[h,f]=k.useState("front"),[b,g]=k.useState(!1),[x,p]=k.useState(!1),[y,v]=k.useState(()=>localStorage.getItem("guest_cart_id")),[N,w]=k.useState({front:null,back:null}),[j,_]=k.useState({front:{fileId:null,pageIndex:null},back:{fileId:null,pageIndex:null}}),[S]=k.useState(()=>{let ke=sessionStorage.getItem("design_session_id");return ke||(ke=`sess_${Date.now()}_${Math.random().toString(36).substring(2,9)}`,sessionStorage.setItem("design_session_id",ke)),ke}),{data:T,isLoading:A,error:E}=pe({queryKey:["product",e],queryFn:()=>uD(e),enabled:!!e,staleTime:6e4}),{data:R}=pe({queryKey:["print-config",e],queryFn:()=>mD(e),enabled:!!e,staleTime:6e4}),I=T==null?void 0:T.product,O=(T==null?void 0:T.variants)||[],L=(T==null?void 0:T.images)||[],F=I==null?void 0:I.config_schema;k.useEffect(()=>{if(O.length>0&&!o){const ke=Math.min(1,O.length-1);l(O[ke].id)}},[O,o]),k.useEffect(()=>{if(F&&Object.keys(c).length===0){const ke={};Object.entries(F).forEach(([kt,gr])=>{ke[kt]=gr.default}),d(ke)}},[F,c]);const M=O.find(ke=>ke.id===o),D=(M==null?void 0:M.total_price)||(I==null?void 0:I.base_price)||0,W=M==null?void 0:M.compare_at_price;M!=null&&M.unit_price,M!=null&&M.quantity;const P=.15,V=D,K=V*P,G=V+K+0,oe=L.length>0?L:[{id:"1",image_url:(I==null?void 0:I.thumbnail_url)||"",alt_text:(I==null?void 0:I.name)||"",sort_order:0,is_primary:!0,product_id:""}],H=oe.length>1,ee=oe.length>2,J=(c==null?void 0:c.print_sides)==="double_sided"||(c==null?void 0:c.print_sides)==="double-sided"||(c==null?void 0:c.printSides)==="double_sided"||(c==null?void 0:c.printSides)==="double-sided"||((Q=R==null?void 0:R.sides)==null?void 0:Q.some(ke=>ke.key==="back"&&ke.required)),X=(R==null?void 0:R.requires_design_upload)??!1,se=((me=j.front)==null?void 0:me.fileId)!==null&&((Pe=j.front)==null?void 0:Pe.pageIndex)!==null,$=((at=j.back)==null?void 0:at.fileId)!==null&&((xr=j.back)==null?void 0:xr.pageIndex)!==null,C=J,U=N.front!==null||N.back!==null,q=!X||U&&se&&(!C||$),de=o!==null&&q,he=async()=>{var ke,kt,gr,$u;if(!(!I||!de)){p(!0);try{const Ln={product_id:I.id,product_variant_id:o,quantity:1,config:c};(N.front||N.back)&&(Ln.design_uploads={},N.front&&(Ln.design_uploads.front_id=N.front.id,Ln.design_upload_id=N.front.id),N.back&&(Ln.design_uploads.back_id=N.back.id),Ln.page_mapping=j);const Bi=await hD(Ln,y,s),X2="https://123project-build-a-production-ready-w.launchpulse.ai";if((ke=Bi.item)!=null&&ke.id){const ff=[];N.front&&ff.push(te.patch(`${X2}/api/design-uploads/${N.front.id}/link-cart`,{cart_item_id:Bi.item.id,side:"front"}).catch(xf=>console.error("Failed to link front design:",xf))),N.back&&N.back.id!==((kt=N.front)==null?void 0:kt.id)&&ff.push(te.patch(`${X2}/api/design-uploads/${N.back.id}/link-cart`,{cart_item_id:Bi.item.id,side:"back"}).catch(xf=>console.error("Failed to link back design:",xf))),await Promise.all(ff)}Bi.guest_id&&!s&&(localStorage.setItem("guest_cart_id",Bi.guest_id),v(Bi.guest_id)),a({type:"success",message:"Added to cart - Continue shopping or view cart",duration:5e3}),i(),w({front:null,back:null}),_({front:{fileId:null,pageIndex:null},back:{fileId:null,pageIndex:null}})}catch(Ln){a({type:"error",message:(($u=(gr=Ln.response)==null?void 0:gr.data)==null?void 0:$u.message)||"Failed to add to cart",duration:5e3})}finally{p(!1)}}},le=(ke,kt)=>{d(gr=>({...gr,[ke]:kt}))},be=(ke,kt)=>{w(ke),_(kt)},z=k.useCallback(()=>{u(ke=>ke===0?oe.length-1:ke-1)},[oe.length]),B=k.useCallback(()=>{u(ke=>ke===oe.length-1?0:ke+1)},[oe.length]),re=ke=>{const kt={paper_type:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),finish:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 3v4M3 5h4M6 17v4m-2-2h4m5-16l2.286 6.857L21 12l-5.714 2.143L13 21l-2.286-6.857L5 12l5.714-2.143L13 3z"})}),print_sides:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7h12m0 0l-4-4m4 4l-4 4m0 6H4m0 0l4 4m-4-4l4-4"})}),size:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})};return kt[ke]||kt.paper_type};return A?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 w-32 bg-gray-200 rounded-lg mb-8"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8 lg:gap-12",children:[r.jsxs("div",{className:"lg:col-span-3",children:[r.jsx("div",{className:"aspect-square bg-gray-200 rounded-2xl mb-4"}),r.jsx("div",{className:"flex gap-3",children:[1,2,3,4].map(ke=>r.jsx("div",{className:"w-20 h-20 bg-gray-200 rounded-xl"},ke))})]}),r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsx("div",{className:"h-10 bg-gray-200 rounded-lg w-3/4"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded-lg w-1/2"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"}),r.jsx("div",{className:"h-32 bg-gray-200 rounded-xl"})]})]})]})})}):E||!I?r.jsx("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md mx-auto px-4",children:[r.jsx("div",{className:"w-24 h-24 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"w-12 h-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9.172 16.172a4 4 0 015.656 0M9 10h.01M15 10h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Product not found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The product you're looking for doesn't exist or has been removed."}),r.jsxs(ie,{to:"/products",className:"inline-flex items-center gap-2 px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-xl transition-colors",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Products"]})]})}):r.jsxs("div",{className:"min-h-screen bg-gradient-to-b from-gray-50 to-white pb-40 lg:pb-8",children:[r.jsx("div",{className:"bg-white border-b border-gray-100",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("nav",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx(ie,{to:"/products",className:"text-gray-500 hover:text-gray-700 transition-colors",children:"Products"}),r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})}),I.category_name&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-500",children:I.category_name}),r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}),r.jsx("span",{className:"text-gray-900 font-medium truncate max-w-[200px]",children:I.name})]}),r.jsxs(ie,{to:"/cart",className:"flex items-center gap-2 text-gray-600 hover:text-gray-900 transition-colors",children:[r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),r.jsx("span",{className:"hidden sm:inline text-sm font-medium",children:"Cart"})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8 lg:gap-12",children:[r.jsxs("div",{className:"lg:col-span-3",children:[r.jsx("div",{className:"mb-4",children:r.jsx(gD,{activeView:h,onViewChange:f,hasBackView:H,hasLifestyleMockups:ee})}),r.jsxs("div",{className:"relative aspect-square bg-white rounded-2xl overflow-hidden shadow-lg cursor-zoom-in group",onClick:()=>g(!0),children:[(Lu=oe[m])!=null&&Lu.image_url?r.jsxs(r.Fragment,{children:[r.jsx("img",{src:oe[m].image_url,alt:oe[m].alt_text||I.name,className:"w-full h-full object-contain p-8 transition-transform duration-300 group-hover:scale-105"}),r.jsx("div",{className:"absolute inset-0 bg-black/0 group-hover:bg-black/5 transition-colors flex items-center justify-center",children:r.jsxs("div",{className:"opacity-0 group-hover:opacity-100 transition-opacity bg-white/90 backdrop-blur-sm px-4 py-2 rounded-full shadow-lg flex items-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7"})}),r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Click to zoom"})]})})]}):r.jsx("div",{className:"w-full h-full flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"w-24 h-24 text-gray-300 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("p",{className:"text-gray-500",children:"Product preview"})]})}),oe.length>1&&r.jsxs(r.Fragment,{children:[r.jsx("button",{onClick:ke=>{ke.stopPropagation(),z()},className:"absolute left-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center transition-all opacity-0 group-hover:opacity-100",children:r.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("button",{onClick:ke=>{ke.stopPropagation(),B()},className:"absolute right-4 top-1/2 -translate-y-1/2 w-10 h-10 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center transition-all opacity-0 group-hover:opacity-100",children:r.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]}),r.jsx("button",{onClick:ke=>{ke.stopPropagation(),g(!0)},className:"absolute top-4 right-4 w-10 h-10 bg-white/90 hover:bg-white rounded-full shadow-lg flex items-center justify-center transition-all opacity-0 group-hover:opacity-100",children:r.jsx("svg",{className:"w-5 h-5 text-gray-700",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8V4m0 0h4M4 4l5 5m11-1V4m0 0h-4m4 0l-5 5M4 16v4m0 0h4m-4 0l5-5m11 5l-5-5m5 5v-4m0 4h-4"})})})]}),oe.length>1&&r.jsx("div",{className:"mt-4 flex gap-3 overflow-x-auto pb-2 px-1",children:oe.map((ke,kt)=>r.jsx("button",{onClick:()=>u(kt),className:`
                      flex-shrink-0 w-20 h-20 rounded-xl overflow-hidden border-2 transition-all duration-200
                      ${kt===m?"border-yellow-400 shadow-lg shadow-yellow-200/50 scale-105":"border-gray-200 hover:border-gray-300 hover:shadow-md"}
                    `,children:r.jsx("img",{src:ke.image_url,alt:"",className:"w-full h-full object-cover"})},ke.id))}),r.jsx("div",{className:"hidden mt-6 p-6 bg-gray-50 rounded-2xl border-2 border-dashed border-gray-200",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),r.jsx("p",{className:"text-sm text-gray-600 font-medium",children:"Upload your design (coming soon)"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Support for PDF, PNG, JPG"})]})})]}),r.jsxs("div",{className:"lg:col-span-2",children:[r.jsxs("div",{className:"mb-6",children:[r.jsxs("div",{className:"flex items-start justify-between gap-4 mb-2",children:[r.jsx("h1",{className:"text-2xl sm:text-3xl font-bold text-gray-900 leading-tight",children:I.name}),r.jsx("div",{className:"flex-shrink-0 flex items-center gap-2",children:r.jsxs("span",{className:"inline-flex items-center px-2.5 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:[r.jsx("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),"In Stock"]})})]}),I.category_name&&r.jsx("p",{className:"text-sm text-gray-500 mb-3",children:I.category_name}),r.jsx("p",{className:"text-gray-600 leading-relaxed",children:I.description||"Premium quality print product with professional finish. Fast turnaround and free delivery on all orders."})]}),r.jsx("hr",{className:"border-gray-200 mb-6"}),F&&Object.keys(F).length>0&&r.jsx("div",{className:"space-y-6 mb-8",children:Object.entries(F).map(([ke,kt])=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("span",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center text-gray-600",children:re(ke)}),r.jsx("label",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wide",children:kt.label})]}),r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-3",children:kt.options.map(gr=>r.jsx(pD,{label:gr.label,description:gr.description,isSelected:c[ke]===gr.value,onClick:()=>le(ke,gr.value)},gr.value))})]},ke))}),O.length>0&&r.jsxs("div",{className:"mb-8",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-3",children:[r.jsx("span",{className:"w-8 h-8 bg-gray-100 rounded-lg flex items-center justify-center text-gray-600",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 7h.01M7 3h5c.512 0 1.024.195 1.414.586l7 7a2 2 0 010 2.828l-7 7a2 2 0 01-2.828 0l-7-7A1.994 1.994 0 013 12V7a4 4 0 014-4z"})})}),r.jsx("label",{className:"text-sm font-semibold text-gray-900 uppercase tracking-wide",children:"Select Quantity"})]}),r.jsx("div",{className:"space-y-3",children:O.map((ke,kt)=>{const gr=Number(ke.total_price),$u=Number(ke.unit_price);if(!Number.isFinite(gr)||!Number.isFinite($u))return null;const Ln=kt===1&&O.length>2;return r.jsx(fD,{variant:ke,isSelected:o===ke.id,onClick:()=>l(ke.id),isPopular:Ln},ke.id)})})]}),I&&r.jsx(dD,{productId:I.id,productSlug:I.slug,printConfig:R||null,selectedConfig:c,onDesignChange:be,sessionId:S}),X&&!q&&r.jsx("div",{className:"mb-6 bg-amber-50 border border-amber-200 rounded-xl p-4",children:r.jsxs("div",{className:"flex items-start gap-3",children:[r.jsx("div",{className:"flex-shrink-0 w-10 h-10 bg-amber-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-5 h-5 text-amber-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-semibold text-amber-800",children:U?se?"Back Design Required":"Front Design Required":"Design Required"}),r.jsx("p",{className:"text-sm text-amber-700 mt-1",children:U?se?"Please upload or assign a page for the back side (double-sided printing selected)":"Please upload and assign a page for the front side":"Please upload your design file to continue"})]})]})}),r.jsx("div",{className:"hidden lg:block sticky bottom-6",children:r.jsxs("div",{className:"bg-white rounded-2xl shadow-2xl border border-gray-100 p-6",children:[r.jsxs("div",{className:"space-y-3 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsx("span",{className:"text-gray-900",children:jr(V)})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"VAT (15%)"}),r.jsx("span",{className:"text-gray-900",children:jr(K)})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Delivery"}),r.jsx("span",{className:"text-green-600 font-medium",children:"FREE"})]}),r.jsx("hr",{className:"border-gray-200"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-gray-900 font-semibold",children:"Total"}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:jr(G)}),W&&Number.isFinite(Number(W))&&r.jsx("span",{className:"ml-2 text-sm text-gray-400 line-through",children:jr(Number(W)*(1+P))})]})]})]}),r.jsx("button",{onClick:he,disabled:x||!de,className:`
                    w-full font-bold py-4 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-3
                    transform hover:scale-[1.02] active:scale-[0.98]
                    ${de?"bg-gradient-to-r from-yellow-400 to-amber-400 hover:from-yellow-500 hover:to-amber-500 text-black shadow-lg shadow-yellow-400/30":"bg-gray-200 text-gray-500 cursor-not-allowed"}
                  `,children:x?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding to Cart..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),n?"Update Cart":"Add to Cart"]})}),r.jsxs("div",{className:"flex items-center justify-center gap-4 mt-4 text-xs text-gray-500",children:[r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsx("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),"Secure checkout"]}),r.jsxs("span",{className:"flex items-center gap-1",children:[r.jsxs("svg",{className:"w-4 h-4 text-green-500",fill:"currentColor",viewBox:"0 0 20 20",children:[r.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),r.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05A2.5 2.5 0 0115.95 16H17a1 1 0 001-1v-5a1 1 0 00-.293-.707l-2-2A1 1 0 0015 7h-1z"})]}),"Free delivery"]})]})]})})]})]})}),r.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 z-40 shadow-2xl",children:r.jsxs("div",{className:"max-w-lg mx-auto px-4 py-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-0.5",children:"Total (incl. VAT)"}),r.jsxs("div",{className:"flex items-baseline gap-2",children:[r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:jr(G)}),W&&Number.isFinite(Number(W))&&r.jsx("span",{className:"text-sm text-gray-400 line-through",children:jr(Number(W)*(1+P))})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:[r.jsxs("svg",{className:"w-3 h-3 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:[r.jsx("path",{d:"M8 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0zM15 16.5a1.5 1.5 0 11-3 0 1.5 1.5 0 013 0z"}),r.jsx("path",{d:"M3 4a1 1 0 00-1 1v10a1 1 0 001 1h1.05a2.5 2.5 0 014.9 0H10a1 1 0 001-1V5a1 1 0 00-1-1H3zM14 7a1 1 0 00-1 1v6.05A2.5 2.5 0 0115.95 16H17a1 1 0 001-1v-5a1 1 0 00-.293-.707l-2-2A1 1 0 0015 7h-1z"})]}),"Free delivery"]})})]}),r.jsx("button",{onClick:he,disabled:x||!de,className:`
              w-full font-bold py-4 px-6 rounded-xl transition-all duration-300 flex items-center justify-center gap-3
              ${de?"bg-gradient-to-r from-yellow-400 to-amber-400 hover:from-yellow-500 hover:to-amber-500 text-black shadow-lg":"bg-gray-200 text-gray-500 cursor-not-allowed"}
            `,children:x?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})}),n?"Update Cart":"Add to Cart"]})})]})}),b&&r.jsx(xD,{images:oe,activeIndex:m,onClose:()=>g(!1),onPrev:z,onNext:B})]})},bD=async(e,t)=>{const n="https://123project-build-a-production-ready-w.launchpulse.ai",s={};return e&&(s["x-guest-id"]=e),t&&(s.Authorization=`Bearer ${t}`),(await te.get(`${n}/api/cart`,{headers:s})).data},vD=async(e,t,n)=>{const s="https://123project-build-a-production-ready-w.launchpulse.ai",a={};t&&(a["x-guest-id"]=t),n&&(a.Authorization=`Bearer ${n}`),await te.delete(`${s}/api/cart/items/${e}`,{headers:a})},jD=()=>{const e=Le(),t=et(),n=ae(w=>w.authentication_state.auth_token),s=ae(w=>w.show_toast),a=ae(w=>w.update_cart_count),[i,o]=k.useState(()=>localStorage.getItem("guest_cart_id")),[l,c]=k.useState(null),{data:d,isLoading:m,error:u,refetch:h}=pe({queryKey:["cart",i,n],queryFn:()=>bD(i,n),staleTime:3e4});d==null||d.cart;const f=(d==null?void 0:d.items)||[],b=d==null?void 0:d.subtotal,g=typeof b=="number"?b:Number(b)||0;k.useEffect(()=>{d!=null&&d.guest_id&&!n&&(localStorage.setItem("guest_cart_id",d.guest_id),o(d.guest_id)),d!=null&&d.items&&a(d.items.length)},[d==null?void 0:d.guest_id,d==null?void 0:d.items,n,a]);const x=async w=>{c(w);try{await vD(w,i,n),t.invalidateQueries({queryKey:["cart"]}),s({type:"success",message:"Item removed from cart",duration:3e3})}catch{s({type:"error",message:"Failed to remove item",duration:5e3})}finally{c(null)}},p=()=>{if(f.length===0){s({type:"warning",message:"Your cart is empty",duration:3e3});return}e("/checkout")},v=g*.23,N=g+v;return m?r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-10 bg-gray-200 rounded w-32 mb-8"}),r.jsxs("div",{className:"bg-white rounded-xl p-6 mb-4",children:[r.jsx("div",{className:"h-24 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-24 bg-gray-200 rounded"})]})]})})}):r.jsxs("div",{className:"min-h-screen bg-gray-50 pb-24 lg:pb-8",children:[r.jsxs("div",{className:"max-w-4xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-8",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Your Cart"}),r.jsx(ie,{to:"/products",className:"text-yellow-600 hover:text-yellow-700 font-medium",children:"Continue Shopping"})]}),f.length===0?r.jsxs("div",{className:"bg-white rounded-xl p-8 text-center",children:[r.jsx("div",{className:"w-20 h-20 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"w-10 h-10 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 3h2l.4 2M7 13h10l4-8H5.4M7 13L5.4 5M7 13l-2.293 2.293c-.63.63-.184 1.707.707 1.707H17m0 0a2 2 0 100 4 2 2 0 000-4zm-8 2a2 2 0 11-4 0 2 2 0 014 0z"})})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Your cart is empty"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Looks like you haven't added any products yet."}),r.jsxs(ie,{to:"/products",className:"inline-flex items-center px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-bold rounded-lg transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Browse Products"]})]}):r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2 space-y-4",children:f.map(w=>{var j,_;return r.jsx("div",{className:"bg-white rounded-xl p-4 sm:p-6 shadow-sm",children:r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-24 h-24 sm:w-32 sm:h-32 flex-shrink-0 bg-gray-100 rounded-lg overflow-hidden",children:w.thumbnail_url?r.jsx("img",{src:w.thumbnail_url,alt:w.product_name,className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("svg",{className:"w-10 h-10 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("div",{className:"flex items-start justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"font-semibold text-gray-900 text-lg truncate",children:w.product_name}),w.variant_label&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:w.variant_label})]}),r.jsx("button",{onClick:()=>x(w.id),disabled:l===w.id,className:"text-gray-400 hover:text-red-500 transition-colors p-1","aria-label":"Remove item",children:l===w.id?r.jsxs("svg",{className:"w-5 h-5 animate-spin",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}):r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),w.config&&Object.keys(w.config).length>0&&r.jsx("div",{className:"mt-2 flex flex-wrap gap-2",children:Object.entries(w.config).map(([S,T])=>r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs bg-gray-100 text-gray-600",children:T},S))}),w.design_uploads&&(w.design_uploads.front||w.design_uploads.back)&&r.jsxs("div",{className:"mt-3 p-3 bg-gradient-to-r from-yellow-50 to-amber-50 rounded-lg border border-yellow-100",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("svg",{className:"w-4 h-4 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("span",{className:"text-xs font-semibold text-yellow-800",children:"Design Files Attached"})]}),r.jsxs("div",{className:"space-y-1.5",children:[w.design_uploads.front&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-[10px] font-bold bg-yellow-200 text-yellow-800 rounded uppercase",children:"Front"}),r.jsx("span",{className:"text-xs text-gray-600 truncate flex-1",children:w.design_uploads.front.original_filename}),((j=w.design_uploads.page_mapping)==null?void 0:j.front)&&r.jsxs("span",{className:"text-[10px] text-gray-500",children:["Page ",(w.design_uploads.page_mapping.front.pageIndex||0)+1]})]}),w.design_uploads.back&&r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("span",{className:"inline-flex items-center px-1.5 py-0.5 text-[10px] font-bold bg-purple-200 text-purple-800 rounded uppercase",children:"Back"}),r.jsx("span",{className:"text-xs text-gray-600 truncate flex-1",children:w.design_uploads.back.original_filename}),((_=w.design_uploads.page_mapping)==null?void 0:_.back)&&r.jsxs("span",{className:"text-[10px] text-gray-500",children:["Page ",(w.design_uploads.page_mapping.back.pageIndex||0)+1]})]})]})]}),r.jsxs("div",{className:"mt-4 flex items-center justify-between",children:[r.jsx(ie,{to:`/products/${w.product_slug}?edit=${w.id}`,className:"text-sm text-yellow-600 hover:text-yellow-700 font-medium",children:"Edit details"}),r.jsx("span",{className:"font-bold text-gray-900",children:jr(w.total_price)})]})]})]})},w.id)})}),r.jsx("div",{className:"hidden lg:block",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm sticky top-28",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),r.jsxs("div",{className:"space-y-3 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsxs("span",{children:["Subtotal (",f.length," item",f.length!==1?"s":"",")"]}),r.jsx("span",{children:jr(g)})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"VAT (23%)"}),r.jsx("span",{children:jr(v)})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"Delivery"}),r.jsx("span",{className:"text-green-600",children:"FREE"})]}),r.jsxs("div",{className:"border-t pt-3 flex justify-between text-lg font-bold text-gray-900",children:[r.jsx("span",{children:"Total"}),r.jsx("span",{children:jr(N)})]})]}),r.jsx("button",{onClick:p,className:"w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-4 px-6 rounded-lg transition-colors duration-200",children:"Checkout"}),r.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"Secure checkout with Stripe"})]})})]})]}),f.length>0&&r.jsx("div",{className:"lg:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-sm text-gray-600",children:[f.length," item",f.length!==1?"s":""]}),r.jsx("div",{className:"text-xl font-bold text-gray-900",children:jr(N)})]}),r.jsx("button",{onClick:p,className:"bg-yellow-400 hover:bg-yellow-500 text-black font-bold py-3 px-8 rounded-lg transition-colors duration-200",children:"Checkout"})]})})]})};var GC="clover",wD=function(t){return t===3?"v3":t},QC="https://js.stripe.com",ND="".concat(QC,"/").concat(GC,"/stripe.js"),_D=/^https:\/\/js\.stripe\.com\/v3\/?(\?.*)?$/,kD=/^https:\/\/js\.stripe\.com\/(v3|[a-z]+)\/stripe\.js(\?.*)?$/;var SD=function(t){return _D.test(t)||kD.test(t)},CD=function(){for(var t=document.querySelectorAll('script[src^="'.concat(QC,'"]')),n=0;n<t.length;n++){var s=t[n];if(SD(s.src))return s}return null},iN=function(t){var n="",s=document.createElement("script");s.src="".concat(ND).concat(n);var a=document.head||document.body;if(!a)throw new Error("Expected document.body not to be null. Stripe.js requires a <body> element.");return a.appendChild(s),s},AD=function(t,n){!t||!t._registerWrapper||t._registerWrapper({name:"stripe-js",version:"8.6.0",startTime:n})},nc=null,am=null,im=null,PD=function(t){return function(n){t(new Error("Failed to load Stripe.js",{cause:n}))}},ED=function(t,n){return function(){window.Stripe?t(window.Stripe):n(new Error("Stripe.js not available"))}},OD=function(t){return nc!==null?nc:(nc=new Promise(function(n,s){if(typeof window>"u"||typeof document>"u"){n(null);return}if(window.Stripe){n(window.Stripe);return}try{var a=CD();if(!(a&&t)){if(!a)a=iN(t);else if(a&&im!==null&&am!==null){var i;a.removeEventListener("load",im),a.removeEventListener("error",am),(i=a.parentNode)===null||i===void 0||i.removeChild(a),a=iN(t)}}im=ED(n,s),am=PD(s),a.addEventListener("load",im),a.addEventListener("error",am)}catch(o){s(o);return}}),nc.catch(function(n){return nc=null,Promise.reject(n)}))},TD=function(t,n,s){if(t===null)return null;var a=n[0],i=a.match(/^pk_test/),o=wD(t.version),l=GC;i&&o!==l&&console.warn("Stripe.js@".concat(o," was loaded on the page, but @stripe/stripe-js@").concat("8.6.0"," expected Stripe.js@").concat(l,". This may result in unexpected behavior. For more information, see https://docs.stripe.com/sdks/stripejs-versioning"));var c=t.apply(void 0,n);return AD(c,s),c},sc,YC=!1,XC=function(){return sc||(sc=OD(null).catch(function(t){return sc=null,Promise.reject(t)}),sc)};Promise.resolve().then(function(){return XC()}).catch(function(e){YC||console.warn(e)});var JC=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];YC=!0;var a=Date.now();return XC().then(function(i){return TD(i,n,a)})},ZC={exports:{}},MD="SECRET_DO_NOT_PASS_THIS_OR_YOU_WILL_BE_FIRED",LD=MD,$D=LD;function eA(){}function tA(){}tA.resetWarningCache=eA;var RD=function(){function e(s,a,i,o,l,c){if(c!==$D){var d=new Error("Calling PropTypes validators directly is not supported by the `prop-types` package. Use PropTypes.checkPropTypes() to call them. Read more at http://fb.me/use-check-prop-types");throw d.name="Invariant Violation",d}}e.isRequired=e;function t(){return e}var n={array:e,bigint:e,bool:e,func:e,number:e,object:e,string:e,symbol:e,any:e,arrayOf:t,element:e,elementType:e,instanceOf:t,node:e,objectOf:t,oneOf:t,oneOfType:t,shape:t,exact:t,checkPropTypes:tA,resetWarningCache:eA};return n.PropTypes=n,n};ZC.exports=RD();var ID=ZC.exports;const Ce=Ke(ID);function oN(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function lN(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?oN(Object(n),!0).forEach(function(s){rA(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):oN(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Gm(e){"@babel/helpers - typeof";return typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?Gm=function(t){return typeof t}:Gm=function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gm(e)}function rA(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function DD(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function FD(e,t){if(e==null)return{};var n=DD(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function nA(e,t){return BD(e)||zD(e,t)||qD(e,t)||UD()}function BD(e){if(Array.isArray(e))return e}function zD(e,t){var n=e&&(typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"]);if(n!=null){var s=[],a=!0,i=!1,o,l;try{for(n=n.call(e);!(a=(o=n.next()).done)&&(s.push(o.value),!(t&&s.length===t));a=!0);}catch(c){i=!0,l=c}finally{try{!a&&n.return!=null&&n.return()}finally{if(i)throw l}}return s}}function qD(e,t){if(e){if(typeof e=="string")return cN(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cN(e,t)}}function cN(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function UD(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}var rr=function(t,n,s){var a=!!s,i=Y.useRef(s);Y.useEffect(function(){i.current=s},[s]),Y.useEffect(function(){if(!a||!t)return function(){};var o=function(){i.current&&i.current.apply(i,arguments)};return t.on(n,o),function(){t.off(n,o)}},[a,n,t,i])},by=function(t){var n=Y.useRef(t);return Y.useEffect(function(){n.current=t},[t]),n.current},Go=function(t){return t!==null&&Gm(t)==="object"},WD=function(t){return Go(t)&&typeof t.then=="function"},VD=function(t){return Go(t)&&typeof t.elements=="function"&&typeof t.createToken=="function"&&typeof t.createPaymentMethod=="function"&&typeof t.confirmCardPayment=="function"},dN="[object Object]",HD=function e(t,n){if(!Go(t)||!Go(n))return t===n;var s=Array.isArray(t),a=Array.isArray(n);if(s!==a)return!1;var i=Object.prototype.toString.call(t)===dN,o=Object.prototype.toString.call(n)===dN;if(i!==o)return!1;if(!i&&!s)return t===n;var l=Object.keys(t),c=Object.keys(n);if(l.length!==c.length)return!1;for(var d={},m=0;m<l.length;m+=1)d[l[m]]=!0;for(var u=0;u<c.length;u+=1)d[c[u]]=!0;var h=Object.keys(d);if(h.length!==l.length)return!1;var f=t,b=n,g=function(p){return e(f[p],b[p])};return h.every(g)},sA=function(t,n,s){return Go(t)?Object.keys(t).reduce(function(a,i){var o=!Go(n)||!HD(t[i],n[i]);return s.includes(i)?(o&&console.warn("Unsupported prop change: options.".concat(i," is not a mutable property.")),a):o?lN(lN({},a||{}),{},rA({},i,t[i])):a},null):null},aA="Invalid prop `stripe` supplied to `Elements`. We recommend using the `loadStripe` utility from `@stripe/stripe-js`. See https://stripe.com/docs/stripe-js/react#elements-props-stripe for details.",uN=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aA;if(t===null||VD(t))return t;throw new Error(n)},KD=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:aA;if(WD(t))return{tag:"async",stripePromise:Promise.resolve(t).then(function(a){return uN(a,n)})};var s=uN(t,n);return s===null?{tag:"empty"}:{tag:"sync",stripe:s}},GD=function(t){!t||!t._registerWrapper||!t.registerAppInfo||(t._registerWrapper({name:"react-stripe-js",version:"5.4.1"}),t.registerAppInfo({name:"react-stripe-js",version:"5.4.1",url:"https://stripe.com/docs/stripe-js/react"}))},lp=Y.createContext(null);lp.displayName="ElementsContext";var iA=function(t,n){if(!t)throw new Error("Could not find Elements context; You need to wrap the part of your app that ".concat(n," in an <Elements> provider."));return t},v1=function(t){var n=t.stripe,s=t.options,a=t.children,i=Y.useMemo(function(){return KD(n)},[n]),o=Y.useState(function(){return{stripe:i.tag==="sync"?i.stripe:null,elements:i.tag==="sync"?i.stripe.elements(s):null}}),l=nA(o,2),c=l[0],d=l[1];Y.useEffect(function(){var h=!0,f=function(g){d(function(x){return x.stripe?x:{stripe:g,elements:g.elements(s)}})};return i.tag==="async"&&!c.stripe?i.stripePromise.then(function(b){b&&h&&f(b)}):i.tag==="sync"&&!c.stripe&&f(i.stripe),function(){h=!1}},[i,c,s]);var m=by(n);Y.useEffect(function(){m!==null&&m!==n&&console.warn("Unsupported prop change on Elements: You cannot change the `stripe` prop after setting it.")},[m,n]);var u=by(s);return Y.useEffect(function(){if(c.elements){var h=sA(s,u,["clientSecret","fonts"]);h&&c.elements.update(h)}},[s,u,c.elements]),Y.useEffect(function(){GD(c.stripe)},[c.stripe]),Y.createElement(lp.Provider,{value:c},a)};v1.propTypes={stripe:Ce.any,options:Ce.object};var QD=function(t){var n=Y.useContext(lp);return iA(n,t)},oA=function(){var t=QD("calls useElements()"),n=t.elements;return n};Ce.func.isRequired;var lA=Y.createContext(null);lA.displayName="CheckoutContext";Ce.any,Ce.shape({clientSecret:Ce.oneOfType([Ce.string,Ce.instanceOf(Promise)]).isRequired,elementsOptions:Ce.object}).isRequired;var vy=function(t){var n=Y.useContext(lA),s=Y.useContext(lp);if(n){if(s)throw new Error("You cannot wrap the part of your app that ".concat(t," in both <CheckoutProvider> and <Elements> providers."));return n}else return iA(s,t)},YD=["mode"],XD=function(t){return t.charAt(0).toUpperCase()+t.slice(1)},Pr=function(t,n){var s="".concat(XD(t),"Element"),a=function(c){var d=c.id,m=c.className,u=c.options,h=u===void 0?{}:u,f=c.onBlur,b=c.onFocus,g=c.onReady,x=c.onChange,p=c.onEscape,y=c.onClick,v=c.onLoadError,N=c.onLoaderStart,w=c.onNetworksChange,j=c.onConfirm,_=c.onCancel,S=c.onShippingAddressChange,T=c.onShippingRateChange,A=c.onSavedPaymentMethodRemove,E=c.onSavedPaymentMethodUpdate,R=vy("mounts <".concat(s,">")),I="elements"in R?R.elements:null,O="checkoutState"in R?R.checkoutState:null,L=(O==null?void 0:O.type)==="success"||(O==null?void 0:O.type)==="loading"?O.sdk:null,F=Y.useState(null),M=nA(F,2),D=M[0],W=M[1],P=Y.useRef(null),V=Y.useRef(null);rr(D,"blur",f),rr(D,"focus",b),rr(D,"escape",p),rr(D,"click",y),rr(D,"loaderror",v),rr(D,"loaderstart",N),rr(D,"networkschange",w),rr(D,"confirm",j),rr(D,"cancel",_),rr(D,"shippingaddresschange",S),rr(D,"shippingratechange",T),rr(D,"savedpaymentmethodremove",A),rr(D,"savedpaymentmethodupdate",E),rr(D,"change",x);var K;g&&(t==="expressCheckout"?K=g:K=function(){g(D)}),rr(D,"ready",K),Y.useLayoutEffect(function(){if(P.current===null&&V.current!==null&&(I||L)){var G=null;if(L)switch(t){case"paymentForm":G=L.createPaymentFormElement();break;case"payment":G=L.createPaymentElement(h);break;case"address":if("mode"in h){var oe=h.mode,H=FD(h,YD);if(oe==="shipping")G=L.createShippingAddressElement(H);else if(oe==="billing")G=L.createBillingAddressElement(H);else throw new Error("Invalid options.mode. mode must be 'billing' or 'shipping'.")}else throw new Error("You must supply options.mode. mode must be 'billing' or 'shipping'.");break;case"expressCheckout":G=L.createExpressCheckoutElement(h);break;case"currencySelector":G=L.createCurrencySelectorElement();break;case"taxId":G=L.createTaxIdElement(h);break;default:throw new Error("Invalid Element type ".concat(s,". You must use either the <PaymentElement />, <AddressElement options={{mode: 'shipping'}} />, <AddressElement options={{mode: 'billing'}} />, or <ExpressCheckoutElement />."))}else I&&(G=I.create(t,h));P.current=G,W(G),G&&G.mount(V.current)}},[I,L,h]);var ne=by(h);return Y.useEffect(function(){if(P.current){var G=sA(h,ne,["paymentRequest"]);G&&"update"in P.current&&P.current.update(G)}},[h,ne]),Y.useLayoutEffect(function(){return function(){if(P.current&&typeof P.current.destroy=="function")try{P.current.destroy(),P.current=null}catch{}}},[]),Y.createElement("div",{id:d,className:m,ref:V})},i=function(c){vy("mounts <".concat(s,">"));var d=c.id,m=c.className;return Y.createElement("div",{id:d,className:m})},o=n?i:a;return o.propTypes={id:Ce.string,className:Ce.string,onChange:Ce.func,onBlur:Ce.func,onFocus:Ce.func,onReady:Ce.func,onEscape:Ce.func,onClick:Ce.func,onLoadError:Ce.func,onLoaderStart:Ce.func,onNetworksChange:Ce.func,onConfirm:Ce.func,onCancel:Ce.func,onShippingAddressChange:Ce.func,onShippingRateChange:Ce.func,onSavedPaymentMethodRemove:Ce.func,onSavedPaymentMethodUpdate:Ce.func,options:Ce.object},o.displayName=s,o.__elementType=t,o},Er=typeof window>"u",JD=Y.createContext(null);JD.displayName="EmbeddedCheckoutProviderContext";var cA=function(){var t=vy("calls useStripe()"),n=t.stripe;return n};Pr("auBankAccount",Er);var Ch=Pr("card",Er);Pr("cardNumber",Er);Pr("cardExpiry",Er);Pr("cardCvc",Er);Pr("iban",Er);Pr("payment",Er);Pr("expressCheckout",Er);Pr("paymentRequestButton",Er);Pr("linkAuthentication",Er);Pr("address",Er);Pr("shippingAddress",Er);Pr("paymentMethodMessaging",Er);Pr("taxId",Er);const ZD="pk_test_placeholder",eF=JC(ZD),tF=async(e,t)=>{const n="https://123project-build-a-production-ready-w.launchpulse.ai",s={};return e&&(s["x-guest-id"]=e),t&&(s.Authorization=`Bearer ${t}`),(await te.get(`${n}/api/cart`,{headers:s})).data},rF=async(e,t,n)=>{const s="https://123project-build-a-production-ready-w.launchpulse.ai",a={"Content-Type":"application/json"};return t&&(a["x-guest-id"]=t),n&&(a.Authorization=`Bearer ${n}`),(await te.post(`${s}/api/checkout/prepare`,e,{headers:a})).data},nF=async(e,t,n,s)=>{const a="https://123project-build-a-production-ready-w.launchpulse.ai",i={"Content-Type":"application/json"};return n&&(i["x-guest-id"]=n),s&&(i.Authorization=`Bearer ${s}`),(await te.post(`${a}/api/checkout/finalize`,{order_id:e,payment_intent_id:t},{headers:i})).data},sF=({formData:e,cartId:t,total:n,guestId:s,authToken:a,onSuccess:i,onError:o,onValidationError:l,isLoggedIn:c})=>{const d=cA(),m=oA(),[u,h]=k.useState(!1),[f,b]=k.useState(!1),[g,x]=k.useState(null),p=N=>{b(N.complete),N.error?x(N.error.message):x(null)},y=()=>{const N={};return c||(e.name.trim()||(N.name="Name is required"),e.email.trim()?/^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(e.email)||(N.email="Invalid email address"):N.email="Email is required"),e.address.trim()||(N.address="Shipping address is required"),Object.keys(N).length>0?(l(N),!1):!0},v=async N=>{var j,_;if(N.preventDefault(),!y())return;if(!d||!m){o("Stripe has not loaded. Please refresh the page and try again.");return}const w=m.getElement(Ch);if(!w){o("Card element not found. Please refresh the page.");return}if(!f){o("Please complete your card details.");return}h(!0),o("");try{const S={cart_id:t,shipping_address:e.address};c||(S.guest_name=e.name,S.guest_email=e.email,S.guest_phone=e.phone||void 0);const T=await rF(S,s,a),{order_id:A,client_secret:E,payment_intent_id:R}=T,{error:I,paymentIntent:O}=await d.confirmCardPayment(E,{payment_method:{card:w,billing_details:{name:e.name,email:e.email,phone:e.phone||void 0}}});if(I){o(I.message||"Payment failed. Please try again."),h(!1);return}if((O==null?void 0:O.status)!=="succeeded"){o("Payment was not successful. Please try again."),h(!1);return}await nF(A,R,s,a),a||localStorage.removeItem("guest_cart_id"),i(A)}catch(S){console.error("Checkout payment error:",S);const T=((_=(j=S.response)==null?void 0:j.data)==null?void 0:_.message)||S.message||"Payment failed. Please try again.";o(T),h(!1)}};return r.jsxs("form",{onSubmit:v,children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm mb-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Card Details"}),r.jsx("div",{className:`bg-gray-50 border-2 rounded-lg p-4 transition-colors ${g?"border-red-500":f?"border-green-500":"border-gray-200"}`,children:r.jsx(Ch,{options:{style:{base:{fontSize:"16px",color:"#1f2937",fontFamily:"system-ui, -apple-system, sans-serif","::placeholder":{color:"#9ca3af"}},invalid:{color:"#dc2626"}},hidePostalCode:!1},onChange:p})}),g&&r.jsx("p",{className:"text-red-500 text-sm mt-2",children:g}),r.jsxs("div",{className:"flex items-center gap-2 mt-4 text-sm text-gray-600",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("span",{children:"Secured by Stripe - Your payment information is encrypted"})]})]}),r.jsx("button",{type:"submit",disabled:!d||u||!f,className:"w-full bg-yellow-400 hover:bg-yellow-500 disabled:bg-gray-300 disabled:cursor-not-allowed text-black font-bold py-4 px-6 rounded-lg transition-colors duration-200 flex items-center justify-center gap-2",children:u?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin w-5 h-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Payment..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})}),"Pay $",n.toFixed(2)]})}),r.jsx("p",{className:"text-xs text-gray-500 text-center mt-4",children:"By placing this order, you agree to our Terms and Conditions."})]})},aF=()=>{const e=Le(),t=ae(T=>T.authentication_state.auth_token),n=ae(T=>T.authentication_state.current_user),s=ae(T=>T.authentication_state.user_profile),a=ae(T=>T.show_toast),[i]=k.useState(()=>localStorage.getItem("guest_cart_id")),[o,l]=k.useState(null),[c,d]=k.useState({name:"",email:"",phone:"",address:""}),[m,u]=k.useState({});k.useEffect(()=>{n&&d(T=>({...T,name:n.name||"",email:n.email||""})),s&&"phone"in s&&d(T=>({...T,phone:s.phone||"",address:s.address||""}))},[n,s]);const{data:h,isLoading:f,error:b}=pe({queryKey:["cart",i,t],queryFn:()=>tF(i,t),staleTime:3e4}),g=h==null?void 0:h.cart,x=(h==null?void 0:h.items)||[],p=(h==null?void 0:h.subtotal)||0;k.useEffect(()=>{!f&&x.length===0&&(a({type:"warning",message:"Your cart is empty",duration:3e3}),e("/cart"))},[f,x.length,e,a]);const v=p*.23,N=p+v,w=T=>{const{name:A,value:E}=T.target;d(R=>({...R,[A]:E})),m[A]&&u(R=>({...R,[A]:""})),o&&l(null)},j=T=>{u(T)},_=T=>{a({type:"success",message:"Payment successful! Your order is confirmed.",duration:5e3}),e(`/order-confirmation/${T}`)},S=T=>{l(T),T&&a({type:"error",message:T,duration:5e3})};return f?r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsx("div",{className:"max-w-4xl mx-auto px-4 py-8",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-10 bg-gray-200 rounded w-48 mb-8"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsx("div",{className:"bg-white rounded-xl p-6 h-96"}),r.jsx("div",{className:"bg-white rounded-xl p-6 h-64"})]})]})})}):r.jsx("div",{className:"min-h-screen bg-gray-50 pb-8",children:r.jsxs("div",{className:"max-w-6xl mx-auto px-4 py-8",children:[r.jsxs("div",{className:"flex items-center gap-4 mb-8",children:[r.jsx(ie,{to:"/cart",className:"text-gray-600 hover:text-gray-900",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Checkout"})]}),o&&r.jsxs("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-xl p-4 flex items-start gap-3",children:[r.jsx("svg",{className:"w-6 h-6 text-red-600 flex-shrink-0 mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-red-800",children:"Payment Failed"}),r.jsx("p",{className:"text-red-700 text-sm mt-1",children:o}),r.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please check your card details and try again."})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Contact Information"}),!t&&r.jsxs("p",{className:"text-sm text-gray-600 mb-4",children:["Already have an account?"," ",r.jsx(ie,{to:"/login",className:"text-yellow-600 hover:underline font-medium",children:"Log in"})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name *"}),r.jsx("input",{type:"text",id:"name",name:"name",value:c.name,onChange:w,disabled:!!t,className:`w-full px-4 py-3 rounded-lg border-2 ${m.name?"border-red-500":"border-gray-200"} focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 focus:outline-none transition-all disabled:bg-gray-100`,placeholder:"John Doe"}),m.name&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.name})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"email",className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address *"}),r.jsx("input",{type:"email",id:"email",name:"email",value:c.email,onChange:w,disabled:!!t,className:`w-full px-4 py-3 rounded-lg border-2 ${m.email?"border-red-500":"border-gray-200"} focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 focus:outline-none transition-all disabled:bg-gray-100`,placeholder:"john@example.com"}),m.email&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.email})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"phone",className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number (Optional)"}),r.jsx("input",{type:"tel",id:"phone",name:"phone",value:c.phone,onChange:w,className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 focus:outline-none transition-all",placeholder:"+353 1 234 5678"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Shipping Address"}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"address",className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Address *"}),r.jsx("textarea",{id:"address",name:"address",value:c.address,onChange:w,rows:3,className:`w-full px-4 py-3 rounded-lg border-2 ${m.address?"border-red-500":"border-gray-200"} focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 focus:outline-none transition-all resize-none`,placeholder:"123 Main Street, Dublin, D01 AB12, Ireland"}),m.address&&r.jsx("p",{className:"text-red-500 text-sm mt-1",children:m.address})]})]}),g&&r.jsx(v1,{stripe:eF,children:r.jsx(sF,{formData:c,cartId:g.id,total:N,guestId:i,authToken:t,onSuccess:_,onError:S,onValidationError:j,isLoggedIn:!!t})})]}),r.jsx("div",{children:r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-sm sticky top-28",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Order Summary"}),r.jsx("div",{className:"space-y-4 mb-6 max-h-64 overflow-y-auto",children:x.map(T=>r.jsxs("div",{className:"flex gap-3",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:T.thumbnail_url?r.jsx("img",{src:T.thumbnail_url,alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"font-medium text-gray-900 text-sm truncate",children:T.product_name}),T.variant_label&&r.jsx("p",{className:"text-xs text-gray-500",children:T.variant_label}),r.jsxs("p",{className:"text-sm font-semibold text-gray-900 mt-1",children:["$",Number(T.total_price).toFixed(2)]})]})]},T.id))}),r.jsxs("div",{className:"border-t pt-4 space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["$",p.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"VAT (23%)"}),r.jsxs("span",{children:["$",v.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"Delivery"}),r.jsx("span",{className:"text-green-600",children:"FREE"})]}),r.jsxs("div",{className:"border-t pt-3 flex justify-between text-xl font-bold text-gray-900",children:[r.jsx("span",{children:"Total"}),r.jsxs("span",{children:["$",N.toFixed(2)]})]})]}),r.jsx("div",{className:"mt-6 bg-gray-50 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-6 bg-gradient-to-r from-blue-600 to-blue-400 rounded flex items-center justify-center",children:r.jsx("span",{className:"text-white text-xs font-bold",children:"STRIPE"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:"Secure Payment"}),r.jsxs("p",{className:"text-xs text-gray-500",children:["Your card will be charged $",N.toFixed(2)]})]})]})})]})})]})]})})},iF=async(e,t)=>{const n="https://123project-build-a-production-ready-w.launchpulse.ai",s={};return t&&(s.Authorization=`Bearer ${t}`),(await te.get(`${n}/api/orders/product/${e}`,{headers:s})).data},oF=()=>{const{id:e}=fr(),t=Le(),n=ae(b=>b.authentication_state.auth_token),{data:s,isLoading:a,error:i}=pe({queryKey:["order-confirmation",e],queryFn:()=>iF(e,n),enabled:!!e,staleTime:6e4}),o=s==null?void 0:s.order,l=(s==null?void 0:s.items)||[],c=s==null?void 0:s.invoice,d=(s==null?void 0:s.payments)||[],m=(o==null?void 0:o.status)==="PAID"||(o==null?void 0:o.status)==="COMPLETED",u=(o==null?void 0:o.status)==="PENDING_PAYMENT",h=d.some(b=>b.status==="COMPLETED");if(a)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"animate-spin w-8 h-8 border-4 border-yellow-400 border-t-transparent rounded-full"})});if(i||!o)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Order not found"}),r.jsx(ie,{to:"/products",className:"text-yellow-600 hover:underline",children:"Continue Shopping"})]})});if(u&&!h)return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 lg:py-16",children:r.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("div",{className:"w-20 h-20 bg-yellow-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"w-10 h-10 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"Payment Pending"}),r.jsx("p",{className:"text-lg text-gray-600",children:"This order has not been paid yet. Please complete your payment to confirm the order."})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-8",children:[r.jsx("div",{className:"bg-yellow-50 px-6 py-4 border-b",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full animate-pulse"}),r.jsx("span",{className:"text-yellow-700 font-medium",children:"Payment Required"})]})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Order Number"}),r.jsx("p",{className:"font-mono font-semibold text-gray-900",children:o.id.slice(0,8).toUpperCase()})]}),r.jsxs("div",{className:"text-left sm:text-right",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Amount Due"}),r.jsxs("p",{className:"font-semibold text-gray-900",children:["$",Number(o.total_amount).toFixed(2)]})]})]}),r.jsx("p",{className:"text-gray-600 text-sm",children:"Your order has been created but payment was not completed. Please return to checkout to complete your purchase."})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx("button",{onClick:()=>t("/checkout"),className:"inline-flex items-center justify-center px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-bold rounded-lg transition-colors",children:"Complete Payment"}),r.jsx(ie,{to:"/cart",className:"inline-flex items-center justify-center px-6 py-3 bg-white border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-bold rounded-lg transition-colors",children:"Return to Cart"})]})]})});const f=new Date(o.created_at).toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric"});return r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 lg:py-16",children:r.jsxs("div",{className:"max-w-3xl mx-auto px-4",children:[r.jsxs("div",{className:"text-center mb-10",children:[r.jsx("div",{className:"w-20 h-20 bg-green-100 rounded-full flex items-center justify-center mx-auto mb-6",children:r.jsx("svg",{className:"w-10 h-10 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h1",{className:"text-3xl lg:text-4xl font-bold text-gray-900 mb-2",children:"Order Confirmed!"}),r.jsx("p",{className:"text-lg text-gray-600",children:"Thank you for your order. We'll send you updates via email."})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm overflow-hidden mb-8",children:[r.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-b",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-2",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Order Number"}),r.jsx("p",{className:"font-mono font-semibold text-gray-900",children:o.id.slice(0,8).toUpperCase()})]}),c&&r.jsxs("div",{className:"text-left sm:text-right",children:[r.jsx("p",{className:"text-sm text-gray-500",children:"Invoice"}),r.jsx("p",{className:"font-mono font-semibold text-gray-900",children:c.invoice_number})]})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-2",children:["Placed on ",f]})]}),r.jsxs("div",{className:"p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Items Ordered"}),r.jsx("div",{className:"space-y-4",children:l.map(b=>r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-lg overflow-hidden flex-shrink-0",children:b.thumbnail_url?r.jsx("img",{src:b.thumbnail_url,alt:"",className:"w-full h-full object-cover"}):r.jsx("div",{className:"w-full h-full flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-gray-300",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-medium text-gray-900",children:b.product_name}),r.jsxs("p",{className:"text-sm text-gray-500",children:["Qty: ",b.quantity]}),b.config&&Object.keys(b.config).length>0&&r.jsx("div",{className:"flex flex-wrap gap-1 mt-1",children:Object.entries(b.config).map(([g,x])=>r.jsx("span",{className:"text-xs bg-gray-100 px-2 py-0.5 rounded",children:x},g))})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"font-semibold text-gray-900",children:["$",Number(b.total_price).toFixed(2)]})})]},b.id))}),r.jsxs("div",{className:"border-t mt-6 pt-6 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["$",Number(o.total_subtotal).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"VAT (23%)"}),r.jsxs("span",{children:["$",Number(o.tax_amount).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"Delivery"}),r.jsx("span",{className:"text-green-600",children:"FREE"})]}),r.jsxs("div",{className:"border-t pt-2 flex justify-between text-xl font-bold text-gray-900",children:[r.jsx("span",{children:"Total Paid"}),r.jsxs("span",{children:["$",Number(o.total_amount).toFixed(2)]})]})]})]}),m&&h?r.jsx("div",{className:"bg-green-50 px-6 py-4 border-t",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-green-700 font-medium",children:"Payment Successful"})]})}):m?r.jsx("div",{className:"bg-green-50 px-6 py-4 border-t",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-green-500 rounded-full"}),r.jsx("span",{className:"text-green-700 font-medium",children:"Order Confirmed"})]})}):r.jsx("div",{className:"bg-yellow-50 px-6 py-4 border-t",children:r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"w-3 h-3 bg-yellow-500 rounded-full"}),r.jsx("span",{className:"text-yellow-700 font-medium",children:"Processing"})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm p-6 mb-8",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"What happens next?"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-yellow-700 font-bold text-sm",children:"1"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Order Processing"}),r.jsx("p",{className:"text-sm text-gray-600",children:"We'll start preparing your order right away."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-yellow-700 font-bold text-sm",children:"2"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Production"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Your products will be printed with care."})]})]}),r.jsxs("div",{className:"flex gap-4",children:[r.jsx("div",{className:"w-8 h-8 bg-yellow-100 rounded-full flex items-center justify-center flex-shrink-0",children:r.jsx("span",{className:"text-yellow-700 font-bold text-sm",children:"3"})}),r.jsxs("div",{children:[r.jsx("p",{className:"font-medium text-gray-900",children:"Shipping"}),r.jsx("p",{className:"text-sm text-gray-600",children:"We'll ship your order and send tracking info."})]})]})]})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-4 justify-center",children:[r.jsx(ie,{to:"/products",className:"inline-flex items-center justify-center px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-bold rounded-lg transition-colors",children:"Continue Shopping"}),n&&r.jsx(ie,{to:"/app/orders",className:"inline-flex items-center justify-center px-6 py-3 bg-white border-2 border-gray-200 hover:border-gray-300 text-gray-700 font-bold rounded-lg transition-colors",children:"View All Orders"})]}),r.jsx("div",{className:"text-center mt-8",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Questions about your order?"," ",r.jsx(ie,{to:"/contact",className:"text-yellow-600 hover:underline",children:"Contact us"})]})})]})})},j1="https://123project-build-a-production-ready-w.launchpulse.ai",lF=async e=>(await te.get(`${j1}/api/orders`,{params:{page:1,limit:100},headers:{Authorization:`Bearer ${e}`}})).data,cF=async e=>(await te.get(`${j1}/api/quotes`,{params:{status:"SUBMITTED",page:1},headers:{Authorization:`Bearer ${e}`}})).data,dF=async e=>(await te.get(`${j1}/api/bookings`,{params:{status:"CONFIRMED"},headers:{Authorization:`Bearer ${e}`}})).data,uF=()=>{const e=ae(x=>x.authentication_state.current_user),t=ae(x=>x.authentication_state.auth_token),{data:n,isLoading:s,error:a}=pe({queryKey:["dashboard-orders",e==null?void 0:e.id],queryFn:()=>lF(t),enabled:!!t,staleTime:6e4,refetchOnWindowFocus:!1}),{data:i,isLoading:o}=pe({queryKey:["dashboard-quotes",e==null?void 0:e.id],queryFn:()=>cF(t),enabled:!!t,staleTime:6e4,refetchOnWindowFocus:!1}),{data:l,isLoading:c}=pe({queryKey:["dashboard-bookings",e==null?void 0:e.id],queryFn:()=>dF(t),enabled:!!t,staleTime:6e4,refetchOnWindowFocus:!1}),d=s||o||c,m=a?"Failed to load dashboard data":null,u=Y.useMemo(()=>{const x=["QUOTE_REQUESTED","APPROVED","IN_PRODUCTION","PROOF_SENT","AWAITING_APPROVAL","READY_FOR_PICKUP"],p=(n==null?void 0:n.orders.filter(w=>x.includes(w.order.status)))||[],y=(n==null?void 0:n.orders.reduce((w,j)=>w+Number(j.payment_status.balance_due||0),0))||0,v=(l==null?void 0:l.filter(w=>new Date(w.start_at)>new Date))||[],N=[...v].sort((w,j)=>new Date(w.start_at).getTime()-new Date(j.start_at).getTime());return{active_orders_count:p.length,pending_quotes_count:(i==null?void 0:i.total)||0,upcoming_bookings_count:v.length,next_booking_date:N.length>0?N[0].start_at:null,balance_due_amount:y}},[n,i,l]),h=Y.useMemo(()=>n!=null&&n.orders?n.orders.slice(0,10).map(p=>({id:p.order.id,type:"order_update",message:`Order status: ${p.order.status.replace(/_/g," ")}`,timestamp:p.order.updated_at,action_url:`/app/orders/${p.order.id}`})).sort((p,y)=>new Date(y.timestamp).getTime()-new Date(p.timestamp).getTime()):[],[n]),f=Y.useMemo(()=>{if(!(n!=null&&n.orders))return[];const x=[];return n.orders.forEach(p=>{const{order:y,payment_status:v}=p;y.status==="AWAITING_APPROVAL"&&x.push({type:"APPROVE_PROOF",message:`Review proof for Order #${y.id.substring(0,8)}`,action_url:`/app/orders/${y.id}`,priority:"HIGH"}),Number(v.balance_due)>0&&y.status==="READY_FOR_PICKUP"&&x.push({type:"PAY_BALANCE",message:`Payment due: ${Number(v.balance_due).toFixed(2)}`,action_url:`/app/orders/${y.id}`,priority:"HIGH"})}),x.sort((p,y)=>p.priority==="HIGH"&&y.priority!=="HIGH"?-1:1)},[n]),b=x=>{const p=new Date(x),y=new Date,v=p.getTime()-y.getTime(),N=Math.ceil(v/(1e3*60*60*24));return N===0?"Today":N===1?"Tomorrow":N<7?`In ${N} days`:p.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},g=x=>{const p=new Date(x),v=new Date().getTime()-p.getTime(),N=Math.floor(v/6e4),w=Math.floor(v/36e5),j=Math.floor(v/864e5);return N<1?"Just now":N<60?`${N} minutes ago`:w<24?`${w} hours ago`:j===1?"Yesterday":j<7?`${j} days ago`:p.toLocaleDateString("en-US",{month:"short",day:"numeric"})};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 shadow-sm",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome back, ",(e==null?void 0:e.name)||"Customer"]}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Here's what's happening with your projects"})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-8",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[r.jsxs(ie,{to:"/app/orders?status=active",className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-200 group",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Active Orders"}),d?r.jsx("div",{className:"mt-2 h-10 w-16 bg-gray-200 rounded animate-pulse"}):r.jsx("p",{className:"mt-2 text-4xl font-bold text-blue-600",children:u.active_orders_count})]}),r.jsx("div",{className:"bg-blue-100 rounded-full p-3 group-hover:bg-blue-200 transition-colors",children:r.jsx(Vm,{className:"h-8 w-8 text-blue-600"})})]}),r.jsxs("div",{className:"mt-4 flex items-center text-sm text-blue-600 group-hover:text-blue-700",children:[r.jsx("span",{children:"View all orders"}),r.jsx(zs,{className:"ml-1 h-4 w-4"})]})]}),r.jsxs(ie,{to:"/app/quotes?status=SUBMITTED",className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-200 group",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Pending Quotes"}),d?r.jsx("div",{className:"mt-2 h-10 w-16 bg-gray-200 rounded animate-pulse"}):r.jsx("p",{className:"mt-2 text-4xl font-bold text-yellow-600",children:u.pending_quotes_count})]}),r.jsx("div",{className:"bg-yellow-100 rounded-full p-3 group-hover:bg-yellow-200 transition-colors",children:r.jsx(Rr,{className:"h-8 w-8 text-yellow-600"})})]}),r.jsxs("div",{className:"mt-4 flex items-center text-sm text-yellow-600 group-hover:text-yellow-700",children:[r.jsx("span",{children:"View all quotes"}),r.jsx(zs,{className:"ml-1 h-4 w-4"})]})]}),r.jsxs(ie,{to:"/app/bookings?status=CONFIRMED",className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-200 group",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Upcoming Bookings"}),d?r.jsx("div",{className:"mt-2 h-10 w-16 bg-gray-200 rounded animate-pulse"}):r.jsxs(r.Fragment,{children:[r.jsx("p",{className:"mt-2 text-4xl font-bold text-green-600",children:u.upcoming_bookings_count}),u.next_booking_date&&r.jsxs("p",{className:"mt-2 text-xs text-gray-500",children:["Next: ",b(u.next_booking_date)]})]})]}),r.jsx("div",{className:"bg-green-100 rounded-full p-3 group-hover:bg-green-200 transition-colors",children:r.jsx(ji,{className:"h-8 w-8 text-green-600"})})]}),r.jsxs("div",{className:"mt-4 flex items-center text-sm text-green-600 group-hover:text-green-700",children:[r.jsx("span",{children:"View bookings"}),r.jsx(zs,{className:"ml-1 h-4 w-4"})]})]}),r.jsxs(ie,{to:"/app/orders?payment_status=pending",className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 hover:shadow-xl transition-shadow duration-200 group",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 uppercase tracking-wide",children:"Balance Due"}),d?r.jsx("div",{className:"mt-2 h-10 w-20 bg-gray-200 rounded animate-pulse"}):r.jsxs("p",{className:"mt-2 text-4xl font-bold text-red-600",children:["",Number(u.balance_due_amount).toFixed(2)]})]}),r.jsx("div",{className:"bg-red-100 rounded-full p-3 group-hover:bg-red-200 transition-colors",children:r.jsx(Ko,{className:"h-8 w-8 text-red-600"})})]}),r.jsxs("div",{className:"mt-4 flex items-center text-sm text-red-600 group-hover:text-red-700",children:[r.jsx("span",{children:"View orders"}),r.jsx(zs,{className:"ml-1 h-4 w-4"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs(ie,{to:"/app/quotes/new",className:"flex items-center justify-center px-6 py-4 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-md hover:shadow-lg transform hover:scale-105",children:[r.jsx(Rr,{className:"h-5 w-5 mr-2"}),"Get a New Quote"]}),r.jsxs(ie,{to:"/app/orders",className:"flex items-center justify-center px-6 py-4 border-2 border-gray-300 bg-white text-gray-900 font-semibold rounded-lg hover:bg-gray-50 transition-all duration-200",children:[r.jsx(Vm,{className:"h-5 w-5 mr-2"}),"View All Orders"]}),r.jsx(ie,{to:"/contact",className:"flex items-center justify-center px-6 py-4 border-2 border-gray-300 bg-white text-gray-900 font-semibold rounded-lg hover:bg-gray-50 transition-all duration-200",children:"Contact Support"})]})]}),f.length>0&&r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:" Action Required"}),r.jsx("div",{className:"space-y-3",children:f.map(x=>r.jsxs(ie,{to:x.action_url,className:"flex items-center justify-between p-4 bg-orange-50 border-l-4 border-orange-500 rounded-lg hover:bg-orange-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[x.priority==="HIGH"&&r.jsx("div",{className:"flex-shrink-0",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Urgent"})}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:x.message})]}),r.jsx(zs,{className:"h-5 w-5 text-orange-600 flex-shrink-0"})]},`${x.type}-${x.action_url}`))})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-xl p-6 shadow-lg border border-gray-100 sticky top-4",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 mb-4 flex items-center",children:[r.jsx(hs,{className:"h-5 w-5 mr-2 text-gray-600"}),"Recent Activity"]}),d?r.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map(x=>r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2"})]},x))}):h.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:r.jsx(Vm,{className:"h-8 w-8 text-gray-400"})}),r.jsx("p",{className:"text-gray-500 text-sm",children:"No recent activity"}),r.jsx(ie,{to:"/app/quotes/new",className:"mt-4 inline-block text-sm text-blue-600 hover:text-blue-700 font-medium",children:"Get started with a quote"})]}):r.jsx("div",{className:"space-y-4 max-h-96 overflow-y-auto",children:h.map(x=>r.jsx(ie,{to:x.action_url||"#",className:"block group",children:r.jsxs("div",{className:"flex items-start space-x-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("div",{className:"flex-shrink-0 mt-0.5",children:r.jsx("div",{className:"h-2 w-2 bg-blue-600 rounded-full"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 group-hover:text-blue-600 transition-colors",children:x.message}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:g(x.timestamp)})]})]})},x.id))})]})})]}),m&&r.jsx("div",{className:"mt-8 max-w-7xl mx-auto",children:r.jsx("div",{className:"bg-red-50 border-l-4 border-red-500 p-4 rounded-lg",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",viewBox:"0 0 20 20",fill:"currentColor",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 9.586 8.707 8.293z",clipRule:"evenodd"})})}),r.jsx("div",{className:"ml-3",children:r.jsx("p",{className:"text-sm text-red-700",children:m})})]})})}),!d&&u.active_orders_count===0&&u.pending_quotes_count===0&&u.upcoming_bookings_count===0&&r.jsxs("div",{className:"mt-8 bg-white rounded-xl p-12 shadow-lg border border-gray-100 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-20 h-20 bg-blue-100 rounded-full mb-6",children:r.jsx(Rr,{className:"h-10 w-10 text-blue-600"})}),r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Welcome to SultanStamp!"}),r.jsx("p",{className:"text-gray-600 mb-8 max-w-md mx-auto",children:"You haven't started any projects yet. Let's begin by creating your first quote."}),r.jsxs(ie,{to:"/app/quotes/new",className:"inline-flex items-center justify-center px-8 py-4 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl transform hover:scale-105",children:[r.jsx(Rr,{className:"h-5 w-5 mr-2"}),"Get Your First Quote"]})]})]}),r.jsx("div",{className:"md:hidden h-20"})]}),r.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:r.jsxs(ie,{to:"/app/quotes/new",className:"flex items-center justify-center w-full bg-yellow-400 hover:bg-yellow-500 text-black font-bold px-6 py-3 rounded-lg transition-all duration-200",children:[r.jsx(Rr,{className:"h-5 w-5 mr-2"}),"Get a New Quote"]})})]})},mF=async(e,t,n)=>{const s={page:n,limit:20};return t&&(s.status=t),(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/quotes",{params:s,headers:{Authorization:`Bearer ${e}`}})).data},hF=async e=>{const t=await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/quotes",{params:{limit:1e3},headers:{Authorization:`Bearer ${e}`}}),n={all:0,pending:0,finalized:0,converted:0,cancelled:0};return t.data.quotes.forEach(s=>{n.all++;const a=s.quote.status;a==="SUBMITTED"||a==="IN_REVIEW"?n.pending++:a==="APPROVED"?n.finalized++:a==="REJECTED"&&n.cancelled++}),n},mN=e=>{const t="px-3 py-1 rounded-full text-xs font-semibold uppercase";switch(e){case"SUBMITTED":return`${t} bg-gray-200 text-gray-900`;case"IN_REVIEW":return`${t} bg-yellow-400 text-gray-900`;case"APPROVED":return`${t} bg-green-600 text-white`;case"REJECTED":return`${t} bg-red-600 text-white`;default:return`${t} bg-gray-200 text-gray-900`}},hN=e=>{switch(e){case"SUBMITTED":return"Submitted";case"IN_REVIEW":return"Under Review";case"APPROVED":return"Finalized";case"REJECTED":return"Cancelled";default:return e}},pN=e=>{const t=new Date(e),s=new Date().getTime()-t.getTime(),a=Math.floor(s/(1e3*60*60*24));return a===0?"Today":a===1?"Yesterday":a<7?`${a} days ago`:t.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})},fN=e=>e===null?"Pending":`${Number(e).toFixed(2)}`,pF=()=>{const e=Le(),[t,n]=Ye(),s=ae(A=>A.authentication_state.auth_token);ae(A=>{var E;return(E=A.authentication_state.current_user)==null?void 0:E.id});const a=ae(A=>A.show_toast),i=t.get("status"),o=t.get("page"),l=i||null,c=o?parseInt(o,10):1,{data:d,isLoading:m,error:u,refetch:h}=pe({queryKey:["quotes",l,c],queryFn:()=>mF(s,l,c),enabled:!!s,staleTime:3e4,refetchOnWindowFocus:!0,retry:1}),{data:f,isLoading:b}=pe({queryKey:["quotes-summary"],queryFn:()=>hF(s),enabled:!!s,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),g=(d==null?void 0:d.quotes)||[],x=(d==null?void 0:d.total)||0,p=Math.ceil(x/20),y=x>c*20,v=c>1,N=f||{all:0,pending:0,finalized:0,cancelled:0},w=A=>{const E=new URLSearchParams(t);A?E.set("status",A):E.delete("status"),E.delete("page"),n(E)},j=A=>{const E=new URLSearchParams(t);E.set("page",A.toString()),n(E),window.scrollTo({top:0,behavior:"smooth"})},_=A=>{e(`/app/quotes/${A}`)},S=()=>{e("/app/quotes/new")},T=()=>{h(),a({type:"info",message:"Refreshing quotes...",duration:2e3})};return k.useEffect(()=>{u&&a({type:"error",message:"Failed to load quotes. Please try again.",duration:5e3})},[u,a]),r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Quotes"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track all your quote requests and their status"})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:T,disabled:m,className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("svg",{className:`w-4 h-4 inline-block mr-2 ${m?"animate-spin":""}`,fill:"none",viewBox:"0 0 24 24",children:r.jsx("path",{stroke:"currentColor",strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]}),r.jsx("button",{onClick:S,className:"px-6 py-2 bg-yellow-400 text-gray-900 rounded-lg text-sm font-semibold hover:bg-yellow-500 transition-colors shadow-md",children:"+ New Quote"})]})]})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex overflow-x-auto space-x-1 sm:space-x-2",children:[r.jsxs("button",{onClick:()=>w(null),className:`px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors border-b-2 ${l===null?"border-yellow-400 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["All",!b&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 rounded-full text-xs",children:N.all})]}),r.jsxs("button",{onClick:()=>w("SUBMITTED"),className:`px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors border-b-2 ${l==="SUBMITTED"?"border-yellow-400 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Pending",!b&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 rounded-full text-xs",children:N.pending})]}),r.jsxs("button",{onClick:()=>w("APPROVED"),className:`px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors border-b-2 ${l==="APPROVED"?"border-yellow-400 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Finalized",!b&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 rounded-full text-xs",children:N.finalized})]}),r.jsxs("button",{onClick:()=>w("REJECTED"),className:`px-4 py-3 text-sm font-medium whitespace-nowrap transition-colors border-b-2 ${l==="REJECTED"?"border-yellow-400 text-gray-900":"border-transparent text-gray-600 hover:text-gray-900"}`,children:["Cancelled",!b&&r.jsx("span",{className:"ml-2 px-2 py-0.5 bg-gray-100 rounded-full text-xs",children:N.cancelled})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[m&&g.length===0&&r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("svg",{className:"animate-spin h-10 w-10 text-gray-400 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"text-gray-600",children:"Loading quotes..."})]})}),u&&!m&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("p",{className:"text-red-800 font-medium mb-3",children:"Failed to load quotes"}),r.jsx("button",{onClick:T,className:"px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors",children:"Try Again"})]}),!m&&!u&&g.length===0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-100 p-12 text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"1.5",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No quotes yet"}),r.jsx("p",{className:"text-gray-600 mb-6 max-w-md mx-auto",children:"You haven't requested any quotes yet. Start by exploring our services and creating your first quote request."}),r.jsx("button",{onClick:S,className:"px-8 py-3 bg-yellow-400 text-gray-900 rounded-lg font-semibold hover:bg-yellow-500 transition-colors shadow-lg hover:shadow-xl",children:"Get a Quote"})]}),!m&&!u&&g.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block bg-white rounded-xl shadow-sm border border-gray-100 overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Quote ID"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Service"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Tier"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Date Submitted"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Estimated Price"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:g.map(A=>r.jsxs("tr",{onClick:()=>_(A.quote.id),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:"text-sm font-mono text-gray-600",children:["#",A.quote.id.slice(0,8).toUpperCase()]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:A.service.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-600",children:A.tier.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:mN(A.quote.status),children:hN(A.quote.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-600",children:pN(A.quote.created_at)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:fN(A.quote.final_subtotal||A.quote.estimate_subtotal)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsx("button",{onClick:E=>{E.stopPropagation(),_(A.quote.id)},className:"text-blue-600 hover:text-blue-800 text-sm font-medium transition-colors",children:"View Details"})})]},A.quote.id))})]})}),r.jsx("div",{className:"md:hidden space-y-4",children:g.map(A=>r.jsxs("div",{onClick:()=>_(A.quote.id),className:"bg-white rounded-xl shadow-sm border border-gray-100 p-6 cursor-pointer hover:shadow-md transition-shadow",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("span",{className:"text-xs font-mono text-gray-500",children:["#",A.quote.id.slice(0,8).toUpperCase()]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mt-1",children:A.service.name})]}),r.jsx("span",{className:mN(A.quote.status),children:hN(A.quote.status)})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Tier:"}),r.jsx("span",{className:"font-medium text-gray-900",children:A.tier.name})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Submitted:"}),r.jsx("span",{className:"font-medium text-gray-900",children:pN(A.quote.created_at)})]}),r.jsxs("div",{className:"flex items-center justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Estimated Price:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:fN(A.quote.final_subtotal||A.quote.estimate_subtotal)})]})]}),r.jsx("button",{onClick:E=>{E.stopPropagation(),_(A.quote.id)},className:"w-full px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"View Details"})]},A.quote.id))}),p>1&&r.jsxs("div",{className:"mt-8 flex items-center justify-between bg-white rounded-lg shadow-sm border border-gray-100 px-4 py-3 sm:px-6",children:[r.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[r.jsx("button",{onClick:()=>j(c-1),disabled:!v,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsx("button",{onClick:()=>j(c+1),disabled:!y,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),r.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(c-1)*20+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(c*20,x)})," ","of"," ",r.jsx("span",{className:"font-medium",children:x})," ","quotes"]})}),r.jsx("div",{children:r.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[r.jsx("button",{onClick:()=>j(c-1),disabled:!v,className:"relative inline-flex items-center px-3 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 19l-7-7 7-7"})})}),Array.from({length:Math.min(p,5)},(A,E)=>{const R=E+1;return r.jsx("button",{onClick:()=>j(R),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${c===R?"z-10 bg-yellow-400 border-yellow-400 text-gray-900":"bg-white border-gray-300 text-gray-700 hover:bg-gray-50"}`,children:R},R)}),p>5&&c<p&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700",children:"..."}),r.jsx("button",{onClick:()=>j(p),className:"relative inline-flex items-center px-4 py-2 border border-gray-300 bg-white text-sm font-medium text-gray-700 hover:bg-gray-50",children:p})]}),r.jsx("button",{onClick:()=>j(c+1),disabled:!y,className:"relative inline-flex items-center px-3 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5l7 7-7 7"})})})]})})]})]})]})]})]})})},fF=()=>{var se;const e=Le(),[t,n]=Ye(),s=ae($=>$.authentication_state.auth_token);ae($=>$.authentication_state.current_user),ae($=>$.show_toast);const a="https://123project-build-a-production-ready-w.launchpulse.ai",[i,o]=k.useState(parseInt(t.get("step")||"1")),[l,c]=k.useState(null),[d,m]=k.useState([]),[u,h]=k.useState({}),[f,b]=k.useState([]),[g,x]=k.useState(null),[p,y]=k.useState({step_1_valid:!1,step_2_valid:!1,step_3_valid:!0,step_4_valid:!1}),[v,N]=k.useState(null),[w,j]=k.useState({}),[_,S]=k.useState(null),[T,A]=k.useState(!1),[E,R]=k.useState({}),[I,O]=k.useState(null),{data:L,isLoading:F}=pe({queryKey:["public-services"],queryFn:async()=>(await te.get(`${a}/api/public/services`,{params:{is_active:!0}})).data,staleTime:5*60*1e3,refetchOnWindowFocus:!1}),{data:M,isLoading:D}=pe({queryKey:["public-tiers"],queryFn:async()=>(await te.get(`${a}/api/public/tiers`)).data,enabled:i>=4,staleTime:5*60*1e3,refetchOnWindowFocus:!1}),W=ve({mutationFn:async $=>{const C=new FormData;return C.append("file",$),(await te.post(`${a}/api/uploads`,C,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"multipart/form-data"},onUploadProgress:q=>{if(q.total){const de=Math.round(q.loaded*100/q.total);j(he=>({...he,[$.name]:de}))}}})).data},onSuccess:$=>{b(C=>[...C,$]),j(C=>{const U={...C};return delete U[$.file_name],U}),O({type:"success",message:`File "${$.file_name}" uploaded successfully`}),setTimeout(()=>O(null),3e3)},onError:$=>{var C,U;O({type:"error",message:((U=(C=$.response)==null?void 0:C.data)==null?void 0:U.message)||"File upload failed"}),setTimeout(()=>O(null),5e3)}}),P=ve({mutationFn:async $=>(await te.delete(`${a}/api/uploads/${$}`,{headers:{Authorization:`Bearer ${s}`}}),$),onSuccess:$=>{b(C=>C.filter(U=>U.id!==$)),O({type:"success",message:"File removed successfully"}),setTimeout(()=>O(null),3e3)}}),V=ve({mutationFn:async $=>(await te.post(`${a}/api/quotes`,$,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,onSuccess:$=>{localStorage.removeItem("quote_wizard_draft"),O({type:"success",message:"Quote submitted! We'll respond within 24 hours."}),setTimeout(()=>{e(`/app/quotes/${$.quote.id}`)},1500)},onError:$=>{var C,U;O({type:"error",message:((U=(C=$.response)==null?void 0:C.data)==null?void 0:U.message)||"Failed to submit quote"}),setTimeout(()=>O(null),5e3)}});k.useEffect(()=>{const $=localStorage.getItem("quote_wizard_draft");if($)try{const C=JSON.parse($);C.selected_service&&c(C.selected_service),C.service_options&&m(C.service_options),C.project_details&&h(C.project_details),C.uploaded_files&&b(C.uploaded_files),C.selected_tier&&x(C.selected_tier),C.step_validation&&y(C.step_validation)}catch(C){console.error("Failed to restore wizard draft:",C)}},[]),k.useEffect(()=>{const $={selected_service:l,service_options:d,project_details:u,uploaded_files:f,selected_tier:g,step_validation:p};localStorage.setItem("quote_wizard_draft",JSON.stringify($))},[l,d,u,f,g,p]),k.useEffect(()=>{const $=new URLSearchParams;$.set("step",i.toString()),l&&$.set("service",l.slug),g&&$.set("tier",g.id),n($)},[i,l,g,n]),k.useEffect(()=>{if(!d.length)return;let $=0;d.forEach(C=>{if(C.pricing_impact&&u[C.key])try{const U=JSON.parse(C.pricing_impact),q=u[C.key];U[q]&&($+=Number(U[q]))}catch{}}),N($>0?$:null)},[u,d]),k.useEffect(()=>{const C=d.filter(U=>U.required).every(U=>{const q=u[U.key];return q!=null&&q!==""});y(U=>({...U,step_2_valid:C}))},[u,d]);const K=async $=>{c($),y(C=>({...C,step_1_valid:!0}));try{const C=await te.get(`${a}/api/public/services/${$.slug}`);m(C.data.service_options||[]),o(2)}catch{O({type:"error",message:"Failed to load service details"}),setTimeout(()=>O(null),5e3)}},ne=($,C)=>{h(U=>({...U,[$]:C})),R(U=>({...U,[$]:""}))},G=$=>{const C=$.target.files;C&&Array.from(C).forEach(U=>{if(U.size>50*1024*1024){O({type:"error",message:`File "${U.name}" exceeds 50MB limit`}),setTimeout(()=>O(null),5e3);return}if(!["application/pdf","image/png","image/jpeg","image/jpg"].includes(U.type)){O({type:"error",message:`File "${U.name}" must be PDF, PNG, or JPEG`}),setTimeout(()=>O(null),5e3);return}W.mutate(U)})},oe=$=>{x($),y(C=>({...C,step_4_valid:!0})),o(5)},H=$=>{if($>i){if(i===1&&!p.step_1_valid){O({type:"warning",message:"Please select a service first"}),setTimeout(()=>O(null),3e3);return}if(i===2&&!p.step_2_valid){O({type:"warning",message:"Please complete all required fields"}),setTimeout(()=>O(null),3e3);return}if(i===4&&!p.step_4_valid){O({type:"warning",message:"Please select a tier"}),setTimeout(()=>O(null),3e3);return}}o($),window.scrollTo(0,0)},ee=()=>{if(!l||!g)return;const $={service_id:l.id,tier_id:g.id,project_details:u,file_ids:f.map(C=>C.id),notes:null};V.mutate($)},J=((se=L==null?void 0:L.services)==null?void 0:se.filter($=>_?$.category_id===_:!0))||[],X=(L==null?void 0:L.categories)||[];return M!=null&&M.reduce(($,C)=>($[C.tier.id]=C.features,$),{}),r.jsxs(r.Fragment,{children:[I&&r.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg animate-slide-in-right ${I.type==="success"?"bg-green-600 text-white":I.type==="error"?"bg-red-600 text-white":I.type==="warning"?"bg-yellow-600 text-white":"bg-blue-600 text-white"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[I.type==="success"&&r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),I.type==="error"&&r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),r.jsx("p",{className:"font-medium",children:I.message})]})}),r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs(ie,{to:"/app",className:"text-sm text-gray-600 hover:text-gray-900 mb-4 inline-flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Dashboard"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900 mt-2",children:"Create Quote"}),r.jsxs("p",{className:"text-gray-600 mt-1",children:["Step ",i," of 5"]})]}),r.jsxs("div",{className:"mb-8 bg-white rounded-lg p-4 sm:p-6 shadow-sm",children:[r.jsxs("div",{className:"sm:hidden mb-4 flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("div",{className:"w-10 h-10 rounded-full bg-yellow-400 flex items-center justify-center font-bold text-black",children:i}),r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs text-gray-500 uppercase tracking-wide",children:["Step ",i," of 5"]}),r.jsxs("p",{className:"text-sm font-semibold text-gray-900",children:[i===1&&"Choose Service",i===2&&"Project Details",i===3&&"Upload Files",i===4&&"Select Tier",i===5&&"Review & Submit"]})]})]}),r.jsx("div",{className:"text-right",children:r.jsxs("p",{className:"text-lg font-bold text-yellow-600",children:[Math.round(i/5*100),"%"]})})]}),r.jsx("div",{className:"hidden sm:flex items-center justify-between mb-4",children:[1,2,3,4,5].map($=>r.jsxs("div",{className:"flex flex-col items-center cursor-pointer",onClick:()=>$<i&&H($),children:[r.jsx("div",{className:`w-10 h-10 rounded-full flex items-center justify-center font-semibold transition-all ${$<i?"bg-green-600 text-white hover:bg-green-700":$===i?"bg-yellow-400 text-black ring-4 ring-yellow-100":"bg-gray-200 text-gray-500"}`,children:$<i?r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):$}),r.jsxs("span",{className:"text-xs text-gray-600 mt-2",children:[$===1&&"Service",$===2&&"Details",$===3&&"Files",$===4&&"Tier",$===5&&"Review"]})]},$))}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-yellow-400 h-2 rounded-full transition-all duration-300",style:{width:`${i/5*100}%`}})})]}),r.jsxs("div",{className:"bg-white rounded-lg shadow-sm p-6 sm:p-8",children:[i===1&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Your Service"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Select the service you need for your project"}),r.jsxs("div",{className:"mb-6 flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>S(null),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-yellow-400 text-black"}`,children:"All Services"}),X.map($=>r.jsx("button",{onClick:()=>S($.id),className:`px-4 py-2 rounded-lg font-medium transition-colors ${_===$.id?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:$.name},$.id))]}),F?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:[1,2,3,4,5,6].map($=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 animate-pulse",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-2/3"})]},$))}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4",children:J.map($=>r.jsxs("button",{onClick:()=>K($),className:`border rounded-lg p-6 text-left transition-all hover:shadow-lg ${(l==null?void 0:l.id)===$.id?"border-yellow-400 border-2 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,children:[(l==null?void 0:l.id)===$.id&&r.jsx("div",{className:"flex justify-end mb-2",children:r.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),r.jsx("h3",{className:"font-semibold text-lg text-gray-900 mb-2",children:$.name}),r.jsx("p",{className:"text-sm text-gray-600 line-clamp-2",children:$.description||"Professional service tailored to your needs"})]},$.id))}),J.length===0&&!F&&r.jsx("div",{className:"text-center py-12",children:r.jsx("p",{className:"text-gray-500",children:"No services found in this category"})})]}),i===2&&l&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-1",children:"Project Details"}),r.jsxs("p",{className:"text-gray-600",children:["For: ",l.name]})]}),r.jsx("button",{onClick:()=>o(1),className:"text-sm text-blue-600 hover:text-blue-700",children:"Change Service"})]}),r.jsx("div",{className:"space-y-6",children:d.sort(($,C)=>$.sort_order-C.sort_order).map($=>r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:[$.label,$.required&&r.jsx("span",{className:"text-yellow-600 ml-1",children:"*"})]}),$.type==="TEXT"&&r.jsx("input",{type:"text",value:u[$.key]||"",onChange:C=>ne($.key,C.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",placeholder:$.help_text||`Enter ${$.label.toLowerCase()}`}),$.type==="NUMBER"&&r.jsx("input",{type:"number",value:u[$.key]||"",onChange:C=>ne($.key,Number(C.target.value)),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",placeholder:$.help_text||`Enter ${$.label.toLowerCase()}`}),$.type==="SELECT"&&$.choices&&r.jsxs("div",{className:"space-y-3",children:[r.jsxs("select",{value:u[$.key]||"",onChange:C=>ne($.key,C.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",children:[r.jsxs("option",{value:"",children:["Select ",$.label]}),JSON.parse($.choices).map(C=>r.jsx("option",{value:C,children:C},C))]}),(u[$.key]==="Others"||u[$.key]==="Other")&&r.jsx("input",{type:"text",value:u[`${$.key}_custom`]||"",onChange:C=>ne(`${$.key}_custom`,C.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 outline-none transition-all",placeholder:`Please specify ${$.label.toLowerCase()}`})]}),$.type==="CHECKBOX"&&r.jsxs("label",{className:"flex items-center space-x-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u[$.key]||!1,onChange:C=>ne($.key,C.target.checked),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("span",{className:"text-gray-700",children:$.help_text||$.label})]}),$.help_text&&$.type!=="CHECKBOX"&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:$.help_text}),E[$.key]&&r.jsx("p",{className:"text-sm text-red-600 mt-1",children:E[$.key]})]},$.id))})]}),i===3&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Upload Your Files"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Upload your design files or reference materials"}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"File Requirements for Best Results"}),r.jsxs("ul",{className:"space-y-2 text-sm text-blue-800",children:[r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2",children:""}),"300 DPI minimum resolution"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2",children:""}),"Correct dimensions for your project"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2",children:""}),"Fonts outlined (for vector files)"]}),r.jsxs("li",{className:"flex items-start",children:[r.jsx("span",{className:"mr-2",children:""}),"Bleed included where applicable"]})]}),r.jsx("p",{className:"text-xs text-blue-700 mt-3",children:"Don't worry if you're not sure - we'll review and contact you if needed."})]}),r.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-8 text-center hover:border-yellow-400 transition-colors",children:[r.jsx("input",{type:"file",id:"file-upload",multiple:!0,accept:".pdf,.png,.jpg,.jpeg",onChange:G,className:"hidden"}),r.jsxs("label",{htmlFor:"file-upload",className:"cursor-pointer",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 16a4 4 0 01-.88-7.903A5 5 0 1115.9 6L16 6a5 5 0 011 9.9M15 13l-3-3m0 0l-3 3m3-3v12"})}),r.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:[r.jsx("span",{className:"font-semibold text-blue-600",children:"Click to upload"})," or drag and drop"]}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"PDF, PNG, or JPEG up to 50MB"})]})]}),f.length>0&&r.jsx("div",{className:"mt-6 space-y-3",children:f.map($=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[r.jsx("svg",{className:"w-8 h-8 text-blue-600 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8 4a3 3 0 00-3 3v4a5 5 0 0010 0V7a1 1 0 112 0v4a7 7 0 11-14 0V7a5 5 0 0110 0v4a3 3 0 11-6 0V7a1 1 0 012 0v4a1 1 0 102 0V7a3 3 0 00-3-3z",clipRule:"evenodd"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:$.file_name}),r.jsxs("p",{className:"text-xs text-gray-500",children:[($.file_size_bytes/1024/1024).toFixed(2)," MB"]}),$.dpi_warning&&r.jsxs("p",{className:"text-xs text-yellow-600 flex items-center mt-1",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),"DPI could not be verified"]})]})]}),r.jsx("button",{onClick:()=>P.mutate($.id),disabled:P.isPending,className:"ml-4 text-red-600 hover:text-red-700 p-2 hover:bg-red-50 rounded-lg transition-colors disabled:opacity-50",children:r.jsx("svg",{className:"w-5 h-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z",clipRule:"evenodd"})})})]},$.id))}),Object.keys(w).length>0&&r.jsx("div",{className:"mt-6 space-y-3",children:Object.entries(w).map(([$,C])=>r.jsxs("div",{className:"p-4 bg-blue-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:$}),r.jsxs("p",{className:"text-sm text-gray-600",children:[C,"%"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${C}%`}})})]},$))})]}),i===4&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Choose Your Service Level"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Select the tier that best fits your project needs"}),r.jsx("div",{className:"mb-6 text-center",children:r.jsx("button",{onClick:()=>A(!0),className:"text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Compare All Features "})}),D?r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[1,2,3,4].map($=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-6 animate-pulse",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-2/3"})]},$))}):r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:M==null?void 0:M.map($=>{const C=$.tier,U=$.features,q=(g==null?void 0:g.id)===C.id;return r.jsxs("button",{onClick:()=>oe(C),className:`border rounded-xl p-6 text-left transition-all hover:shadow-xl ${q?"border-yellow-400 border-3 bg-yellow-50":"border-gray-200 hover:border-gray-300"}`,children:[q&&r.jsx("div",{className:"flex justify-end mb-2",children:r.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})})}),r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:C.name}),C.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:C.description}),r.jsx("ul",{className:"space-y-2",children:U.slice(0,4).map(de=>r.jsxs("li",{className:"flex items-start text-sm",children:[de.is_included?r.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-5 h-5 text-gray-400 mr-2 flex-shrink-0 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),r.jsxs("span",{className:"text-gray-700",children:[de.feature_label,": ",de.feature_value||(de.is_included?"Yes":"No")]})]},de.id))})]},C.id)})})]}),i===5&&l&&g&&r.jsxs(r.Fragment,{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Review & Submit"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"Please review your quote details before submitting"}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Service Selected"}),r.jsx("button",{onClick:()=>o(1),className:"text-sm text-blue-600 hover:text-blue-700",children:"Edit"})]}),r.jsx("p",{className:"text-lg font-medium text-gray-900",children:l.name}),l.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:l.description})]}),Object.keys(u).length>0&&r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Project Details"}),r.jsx("button",{onClick:()=>o(2),className:"text-sm text-blue-600 hover:text-blue-700",children:"Edit"})]}),r.jsx("dl",{className:"space-y-2",children:d.map($=>{const C=u[$.key];return C==null||C===""?null:r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("dt",{className:"text-gray-600",children:[$.label,":"]}),r.jsx("dd",{className:"text-gray-900 font-medium",children:typeof C=="boolean"?C?"Yes":"No":C})]},$.key)})})]}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Files Uploaded"}),r.jsx("button",{onClick:()=>o(3),className:"text-sm text-blue-600 hover:text-blue-700",children:"Edit"})]}),r.jsxs("p",{className:"text-sm text-gray-600",children:[f.length," file(s) uploaded"]}),f.length>0&&r.jsx("ul",{className:"mt-2 space-y-1",children:f.map($=>r.jsxs("li",{className:"text-sm text-gray-700",children:[" ",$.file_name]},$.id))})]}),r.jsxs("div",{className:"mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:"Tier Selected"}),r.jsx("button",{onClick:()=>o(4),className:"text-sm text-blue-600 hover:text-blue-700",children:"Edit"})]}),r.jsx("p",{className:"text-lg font-medium text-gray-900",children:g.name}),g.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:g.description})]}),r.jsxs("div",{className:"mb-6 p-6 bg-blue-50 border border-blue-200 rounded-lg",children:[r.jsx("h3",{className:"font-semibold text-blue-900 mb-3",children:"Estimated Investment"}),v?r.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["",v.toFixed(2)," - ",(v*1.2).toFixed(2)]}):r.jsx("p",{className:"text-lg font-medium text-blue-900",children:"Custom pricing - we'll finalize within 24 hours"}),r.jsx("p",{className:"text-xs text-blue-700 mt-2",children:"Prices exclude 23% VAT"})]}),r.jsx("div",{className:"mb-6 p-4 bg-gray-100 rounded-lg",children:r.jsx("p",{className:"text-xs text-gray-600",children:"This is an estimate based on the information provided. Our team will review your requirements and provide a final quote within 24 hours. You'll receive an email with next steps."})}),r.jsx("button",{onClick:ee,disabled:V.isPending,className:"w-full bg-yellow-400 text-black px-6 py-4 rounded-lg font-semibold text-lg hover:bg-yellow-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:V.isPending?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Submitting Quote..."]}):"Submit Quote Request"})]})]}),r.jsxs("div",{className:"hidden sm:flex mt-6 items-center justify-between",children:[r.jsx("button",{onClick:()=>H(i-1),disabled:i===1,className:"px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:"Back"}),i<5&&r.jsx("button",{onClick:()=>H(i+1),className:"px-6 py-3 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-all shadow-lg hover:shadow-xl",children:i===3?"Continue":"Next"})]}),r.jsx("div",{className:"sm:hidden h-20"})]})}),r.jsx("div",{className:"sm:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-4 z-40 shadow-lg",children:r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsxs("button",{onClick:()=>H(i-1),disabled:i===1,className:"flex-1 px-4 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium disabled:opacity-50 disabled:cursor-not-allowed transition-all flex items-center justify-center gap-2",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back"]}),i<5?r.jsxs("button",{onClick:()=>H(i+1),className:"flex-1 px-4 py-3 bg-yellow-400 text-black rounded-lg font-bold transition-all flex items-center justify-center gap-2",children:[i===3?"Continue":"Next",r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]}):r.jsx("button",{onClick:ee,disabled:V.isPending,className:"flex-1 px-4 py-3 bg-green-600 text-white rounded-lg font-bold transition-all disabled:opacity-50",children:V.isPending?"Submitting...":"Submit Quote"})]})}),T&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-50 flex items-center justify-center p-4",onClick:()=>A(!1),children:r.jsxs("div",{className:"bg-white rounded-xl max-w-4xl w-full max-h-[90vh] overflow-y-auto p-6",onClick:$=>$.stopPropagation(),children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Compare All Tiers"}),r.jsx("button",{onClick:()=>A(!1),className:"text-gray-400 hover:text-gray-600",children:r.jsx("svg",{className:"w-6 h-6",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})})})]}),r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"w-full",children:[r.jsx("thead",{children:r.jsxs("tr",{className:"border-b-2 border-gray-200",children:[r.jsx("th",{className:"text-left py-3 px-4 font-semibold text-gray-900",children:"Feature"}),M==null?void 0:M.map($=>r.jsx("th",{className:"text-center py-3 px-4 font-semibold text-gray-900",children:$.tier.name},$.tier.id))]})}),r.jsx("tbody",{children:M&&M.length>0&&(()=>{const $=new Set;return M.forEach(C=>{C.features.forEach(U=>{$.add(U.feature_key)})}),Array.from($).map(C=>{const U=M[0].features.find(q=>q.feature_key===C);return U?r.jsxs("tr",{className:"border-b border-gray-100",children:[r.jsx("td",{className:"py-3 px-4 text-sm text-gray-700",children:U.feature_label}),M.map(q=>{const de=q.features.find(he=>he.feature_key===C);return r.jsx("td",{className:"py-3 px-4 text-center text-sm",children:de!=null&&de.is_included?r.jsx("span",{className:"text-green-600 font-medium",children:de.feature_value||""}):r.jsx("span",{className:"text-gray-400",children:""})},q.tier.id)})]},C):null})})()})]})}),r.jsx("div",{className:"md:hidden space-y-4",children:M==null?void 0:M.map($=>r.jsxs("div",{className:"border border-gray-200 rounded-lg",children:[r.jsxs("button",{className:"w-full px-4 py-3 flex items-center justify-between text-left",onClick:C=>{const U=C.currentTarget.nextElementSibling;U&&U.classList.toggle("hidden")},children:[r.jsx("span",{className:"font-semibold text-gray-900",children:$.tier.name}),r.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5.293 7.293a1 1 0 011.414 0L10 10.586l3.293-3.293a1 1 0 111.414 1.414l-4 4a1 1 0 01-1.414 0l-4-4a1 1 0 010-1.414z",clipRule:"evenodd"})})]}),r.jsx("div",{className:"hidden px-4 pb-4",children:r.jsx("ul",{className:"space-y-2",children:$.features.map(C=>r.jsxs("li",{className:"flex items-start text-sm",children:[C.is_included?r.jsx("svg",{className:"w-5 h-5 text-green-600 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):r.jsx("svg",{className:"w-5 h-5 text-gray-400 mr-2 flex-shrink-0",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z",clipRule:"evenodd"})}),r.jsxs("span",{className:"text-gray-700",children:[C.feature_label,": ",C.feature_value||(C.is_included?"Yes":"No")]})]},C.id))})})]},$.tier.id))})]})})]})},xF=async(e,t)=>{const s=await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/quotes/${e}`,{headers:{Authorization:`Bearer ${t}`}});return{quote:{...s.data.quote,estimate_subtotal:s.data.quote.estimate_subtotal?Number(s.data.quote.estimate_subtotal):null,final_subtotal:s.data.quote.final_subtotal?Number(s.data.quote.final_subtotal):null,created_at:new Date(s.data.quote.created_at),updated_at:new Date(s.data.quote.updated_at)},service:{...s.data.service,slot_duration_hours:Number(s.data.service.slot_duration_hours),created_at:new Date(s.data.service.created_at),updated_at:new Date(s.data.service.updated_at)},tier:{...s.data.tier,sort_order:Number(s.data.tier.sort_order),created_at:new Date(s.data.tier.created_at),updated_at:new Date(s.data.tier.updated_at)},quote_answers:s.data.quote_answers.map(a=>({...a,created_at:new Date(a.created_at)})),uploads:s.data.uploads.map(a=>({...a,file_size_bytes:Number(a.file_size_bytes),created_at:new Date(a.created_at)})),message_thread:s.data.message_thread?{...s.data.message_thread,created_at:new Date(s.data.message_thread.created_at)}:null}},gF=async(e,t)=>(await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/message-threads/${e}/messages`,{headers:{Authorization:`Bearer ${t}`}})).data.map(a=>{var i,o,l,c,d,m,u,h;return{id:((i=a.message)==null?void 0:i.id)||a.id,thread_id:((o=a.message)==null?void 0:o.thread_id)||a.thread_id,sender_user_id:((l=a.message)==null?void 0:l.sender_user_id)||a.sender_user_id,sender_name:((c=a.sender)==null?void 0:c.name)||a.sender_name,sender_role:((d=a.sender)==null?void 0:d.role)||a.sender_role,body:((m=a.message)==null?void 0:m.body)||a.body,is_read:((u=a.message)==null?void 0:u.is_read)??a.is_read,created_at:new Date(((h=a.message)==null?void 0:h.created_at)||a.created_at)}}),yF=async(e,t,n)=>{const a=await te.post(`https://123project-build-a-production-ready-w.launchpulse.ai/api/message-threads/${e}/messages`,{body:t},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});return{...a.data,created_at:new Date(a.data.created_at)}},xN=e=>{const n=new Date().getTime()-e.getTime(),s=Math.floor(n/(1e3*60*60*24));return s===0?`Today at ${e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`:s===1?`Yesterday at ${e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`:e.toLocaleDateString("en-US",{month:"short",day:"numeric"})+` at ${e.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`},bF=e=>e<1024?`${e} B`:e<1024*1024?`${(e/1024).toFixed(1)} KB`:`${(e/(1024*1024)).toFixed(1)} MB`,vF=e=>{switch(e){case"SUBMITTED":return"bg-gray-100 text-gray-800";case"IN_REVIEW":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},jF=e=>{switch(e){case"SUBMITTED":return"Under Review";case"IN_REVIEW":return"Being Reviewed";case"APPROVED":return"Finalized";case"REJECTED":return"Declined";default:return e}},wF=e=>{switch(e){case"SUBMITTED":return"Your quote is being reviewed. We'll respond within 24 hours.";case"IN_REVIEW":return"We're reviewing your quote details. Check messages below for any questions.";case"APPROVED":return"Your quote is ready! Proceed to booking and payment.";case"REJECTED":return"This quote was declined. Please contact us or request a new quote.";default:return"Check messages below for updates on your quote."}},NF=()=>{var O,L,F,M,D;const{id:e}=fr(),t=Le();et();const n=ae(W=>W.authentication_state.auth_token),s=ae(W=>W.authentication_state.current_user),a=ae(W=>W.show_toast),[i,o]=k.useState(""),l=k.useRef(null),{data:c,isLoading:d,error:m}=pe({queryKey:["quote",e],queryFn:()=>{if(!e||!n)throw new Error("Missing required parameters");return xF(e,n)},enabled:!!e&&!!n,staleTime:6e4,retry:1}),{data:u=[],refetch:h}=pe({queryKey:["messages",(O=c==null?void 0:c.message_thread)==null?void 0:O.id],queryFn:()=>{var W;if(!((W=c==null?void 0:c.message_thread)!=null&&W.id)||!n)throw new Error("Missing parameters");return gF(c.message_thread.id,n)},enabled:!!((L=c==null?void 0:c.message_thread)!=null&&L.id)&&!!n,staleTime:3e4,retry:1}),f=ve({mutationFn:W=>{var P;if(!((P=c==null?void 0:c.message_thread)!=null&&P.id)||!n)throw new Error("Missing parameters");return yF(c.message_thread.id,W,n)},onSuccess:()=>{o(""),h(),a({type:"success",message:"Message sent successfully",duration:3e3})},onError:W=>{var P,V;a({type:"error",message:((V=(P=W.response)==null?void 0:P.data)==null?void 0:V.message)||"Failed to send message",duration:5e3})}});k.useEffect(()=>{l.current&&l.current.scrollIntoView({behavior:"smooth"})},[u]);const b=W=>{if(W.preventDefault(),!!i.trim()){if(i.length>1e3){a({type:"error",message:"Message cannot exceed 1000 characters",duration:3e3});return}f.mutate(i)}},g=()=>{t(`/app/bookings/new?quote_id=${e}`)},x=(W,P)=>{const K=W.startsWith("http")?W:`https://123project-build-a-production-ready-w.launchpulse.ai${W}`;window.open(K,"_blank")};if(m){const W=m;return((F=W.response)==null?void 0:F.status)===404?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:r.jsx("div",{className:"max-w-md w-full text-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Quote Not Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The quote you're looking for doesn't exist or you don't have access to it."}),r.jsx(ie,{to:"/app/quotes",className:"inline-block bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:"View All Quotes"})]})})})}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:r.jsx("div",{className:"max-w-md w-full text-center",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Error Loading Quote"}),r.jsx("p",{className:"text-gray-600 mb-6",children:((D=(M=W.response)==null?void 0:M.data)==null?void 0:D.message)||"Failed to load quote details"}),r.jsx("button",{onClick:()=>window.location.reload(),className:"inline-block bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:"Retry"})]})})})})}if(d||!c)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-5xl mx-auto",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4 mb-6"}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded w-3/4"})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-6 mb-6",children:[r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/3 mb-4"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded"})]})]})]})})})});const{quote:p,service:y,tier:v,quote_answers:N,uploads:w,message_thread:j}=c,_=.23,S=p.final_subtotal?Number(p.final_subtotal):null,T=S?S*_:null,A=S&&T?S+T:null,E=A?A*.5:null,R=A&&E?A-E:null,I=p.status==="APPROVED"&&S;return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-5xl mx-auto",children:[r.jsx("nav",{className:"mb-6",children:r.jsxs("ol",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx("li",{children:r.jsx(ie,{to:"/app",className:"hover:text-gray-900 transition-colors",children:"Dashboard"})}),r.jsx("li",{children:r.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),r.jsx("li",{children:r.jsx(ie,{to:"/app/quotes",className:"hover:text-gray-900 transition-colors",children:"Quotes"})}),r.jsx("li",{children:r.jsx("svg",{className:"w-4 h-4",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),r.jsxs("li",{className:"text-gray-900 font-medium",children:["Quote #",e==null?void 0:e.substring(0,8)]})]})}),r.jsx("div",{className:"mb-6",children:r.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Quote #",e==null?void 0:e.substring(0,8)]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:r.jsxs("div",{className:"p-6 lg:p-8",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-4",children:[r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold ${vF(p.status)}`,children:jF(p.status)}),r.jsxs("span",{className:"text-sm text-gray-500",children:["Updated ",xN(p.updated_at)]})]}),I&&r.jsx("button",{onClick:g,className:"bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 transition-all duration-200 shadow-md hover:shadow-lg",children:"Book Your Appointment"})]}),r.jsx("p",{className:"text-gray-700 leading-relaxed",children:wF(p.status)})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:r.jsxs("div",{className:"p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Quote Details"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Service"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:y.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500 mb-1",children:"Tier"}),r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-semibold bg-blue-100 text-blue-800",children:v.name})]})]}),N.length>0&&r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Project Specifications"}),r.jsx("dl",{className:"space-y-3",children:N.map(W=>{let P=W.value;try{const V=JSON.parse(W.value);P=V.value||V}catch{}return r.jsxs("div",{className:"grid grid-cols-3 gap-4",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 capitalize",children:W.option_key.replace(/_/g," ")}),r.jsx("dd",{className:"text-sm text-gray-900 col-span-2",children:String(P)})]},W.id)})})]}),w.length>0&&r.jsxs("div",{className:"border-t border-gray-200 pt-6 mt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Uploaded Files"}),r.jsx("div",{className:"space-y-2",children:w.map(W=>r.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex items-center gap-3 flex-1 min-w-0",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"w-6 h-6 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:W.file_name}),r.jsxs("div",{className:"flex items-center gap-2 mt-1",children:[r.jsx("p",{className:"text-xs text-gray-500",children:bF(W.file_size_bytes)}),W.dpi_warning&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-orange-100 text-orange-800",children:" DPI Warning"})]})]})]}),r.jsx("button",{onClick:()=>x(W.file_url,W.file_name),className:"ml-3 flex-shrink-0 text-blue-600 hover:text-blue-700 text-sm font-medium transition-colors",children:"Download"})]},W.id))})]})]})}),p.status==="APPROVED"&&S&&r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-6",children:r.jsxs("div",{className:"p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Pricing Breakdown"}),r.jsxs("dl",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-600",children:"Subtotal"}),r.jsxs("dd",{className:"text-sm font-semibold text-gray-900",children:["",S.toFixed(2)]})]}),T&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-600",children:"Tax (23% VAT)"}),r.jsxs("dd",{className:"text-sm font-semibold text-gray-900",children:["",T.toFixed(2)]})]}),A&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"flex justify-between pt-3 border-t border-gray-200",children:[r.jsx("dt",{className:"text-base font-bold text-gray-900",children:"Total Amount"}),r.jsxs("dd",{className:"text-base font-bold text-gray-900",children:["",A.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between pt-3 border-t border-gray-200",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-600",children:"Deposit Required (50%)"}),r.jsxs("dd",{className:"text-sm font-semibold text-green-700",children:["",(E||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-600",children:"Balance Due"}),r.jsxs("dd",{className:"text-sm font-semibold text-gray-900",children:["",(R||0).toFixed(2)]})]})]})]}),r.jsx("div",{className:"mt-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-700",children:[r.jsx("strong",{children:"Note:"})," Prices exclude VAT. The deposit is required to confirm your booking. Balance is due before delivery."]})})]})}),j&&r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:r.jsxs("div",{className:"p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Messages"}),r.jsx("div",{className:"border border-gray-200 rounded-lg mb-4 bg-gray-50",children:r.jsx("div",{className:"h-96 overflow-y-auto p-4 space-y-4",children:u.length===0?r.jsxs("div",{className:"flex flex-col items-center justify-center h-full text-gray-500",children:[r.jsx("svg",{className:"w-12 h-12 mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 12h.01M12 12h.01M16 12h.01M21 12c0 4.418-4.03 8-9 8a9.863 9.863 0 01-4.255-.949L3 20l1.395-3.72C3.512 15.042 3 13.574 3 12c0-4.418 4.03-8 9-8s9 3.582 9 8z"})}),r.jsx("p",{className:"text-sm",children:"No messages yet. Start a conversation!"})]}):r.jsxs(r.Fragment,{children:[u.map(W=>{const P=W.sender_user_id===(s==null?void 0:s.id);return r.jsx("div",{className:`flex ${P?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[70%] ${P?"order-2":"order-1"}`,children:[!P&&r.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:[W.sender_name," (",W.sender_role,")"]}),r.jsxs("div",{className:`rounded-lg p-3 ${P?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[r.jsx("p",{className:"text-sm leading-relaxed whitespace-pre-wrap break-words",children:W.body}),r.jsx("p",{className:`text-xs mt-2 ${P?"text-blue-100":"text-gray-500"}`,children:xN(W.created_at)})]})]})},W.id)}),r.jsx("div",{ref:l})]})})}),r.jsxs("form",{onSubmit:b,className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("textarea",{value:i,onChange:W=>o(W.target.value),placeholder:"Type your message...",rows:3,maxLength:1e3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none resize-none text-sm"}),r.jsx("div",{className:"flex items-center justify-between mt-2",children:r.jsxs("p",{className:"text-xs text-gray-500",children:[i.length," / 1000 characters"]})})]}),r.jsx("button",{type:"submit",disabled:!i.trim()||f.isPending,className:"w-full sm:w-auto bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-md hover:shadow-lg flex items-center justify-center gap-2",children:f.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 19l9 2-9-18-9 18 9-2zm0 0v-8"})}),"Send Message"]})})]})]})})]})})})},_F=()=>{const e=Le(),[t,n]=Ye(),s=ae(A=>A.authentication_state.auth_token);ae(A=>A.authentication_state.current_user),ae(A=>A.show_toast);const a=t.get("status"),i=t.get("search")||"",o=parseInt(t.get("page")||"1",10),[l,c]=Y.useState(i);k.useEffect(()=>{c(i)},[i]);const d=async()=>{const A="https://123project-build-a-production-ready-w.launchpulse.ai",E={page:o};a&&(E.status=a),i&&(E.search=i);const R=await te.get(`${A}/api/orders`,{headers:{Authorization:`Bearer ${s}`},params:E});return{orders:R.data.orders.map(I=>({order:{...I.order,created_at:new Date(I.order.created_at),updated_at:new Date(I.order.updated_at)},service:I.service,tier:I.tier,payment_status:I.payment_status})),total:R.data.total}},{data:m,isLoading:u,error:h,refetch:f}=pe({queryKey:["customer-orders",a,i,o],queryFn:d,enabled:!!s,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),b=A=>{const E=new URLSearchParams(t);A?E.set("status",A):E.delete("status"),E.delete("page"),n(E)},g=A=>{A.preventDefault();const E=new URLSearchParams(t);l.trim()?E.set("search",l.trim()):E.delete("search"),E.delete("page"),n(E)},x=A=>{const E=new URLSearchParams(t);E.set("page",A.toString()),n(E)},p=A=>{e(`/app/orders/${A}`)},y=A=>{e(`/app/orders/${A}/deposit`)},v=A=>({QUOTE_REQUESTED:"bg-gray-100 text-gray-800",APPROVED:"bg-blue-100 text-blue-800",IN_PRODUCTION:"bg-yellow-100 text-yellow-800",PROOF_SENT:"bg-purple-100 text-purple-800",AWAITING_APPROVAL:"bg-orange-100 text-orange-800",READY_FOR_PICKUP:"bg-green-100 text-green-800",COMPLETED:"bg-green-600 text-white",CANCELLED:"bg-red-100 text-red-800"})[A]||"bg-gray-100 text-gray-800",N=A=>A.replace(/_/g," ").toLowerCase().replace(/\b\w/g,E=>E.toUpperCase()),w=A=>{if(!A)return"Not set";const E=new Date(A),R=new Date,I=Math.floor((E.getTime()-R.getTime())/(1e3*60*60*24));return I<0?`Overdue by ${Math.abs(I)} day${Math.abs(I)!==1?"s":""}`:I===0?"Due today":I===1?"Due tomorrow":`Due in ${I} days`},j=A=>["QUOTE_REQUESTED","APPROVED","IN_PRODUCTION","PROOF_SENT","AWAITING_APPROVAL","READY_FOR_PICKUP"].includes(A),S=(()=>{if(!(m!=null&&m.orders))return[];const A=a?m.orders.filter(E=>a==="active"?j(E.order.status):a==="completed"?E.order.status==="COMPLETED":a==="cancelled"?E.order.status==="CANCELLED":!0):m.orders;return!a||a==="active"?[...A].sort((E,R)=>!E.order.due_at&&!R.order.due_at?0:E.order.due_at?R.order.due_at?new Date(E.order.due_at).getTime()-new Date(R.order.due_at).getTime():-1:1):A})(),T=m?Math.ceil(m.total/20):1;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[r.jsx("div",{className:"flex-1 min-w-0",children:r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Orders"})}),r.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:r.jsxs(ie,{to:"/app/quotes/new",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-black bg-yellow-400 hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl",children:[r.jsx("svg",{className:"mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Quote"]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 mb-6",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"-mb-px flex space-x-8 px-6","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>b(null),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a?"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300":"border-yellow-400 text-gray-900"}`,children:"All"}),r.jsx("button",{onClick:()=>b("active"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="active"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Active"}),r.jsx("button",{onClick:()=>b("completed"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="completed"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Completed"}),r.jsx("button",{onClick:()=>b("cancelled"),className:`whitespace-nowrap py-4 px-1 border-b-2 font-medium text-sm transition-colors ${a==="cancelled"?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Cancelled"})]})}),r.jsx("div",{className:"p-4",children:r.jsxs("form",{onSubmit:g,className:"flex gap-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("label",{htmlFor:"search",className:"sr-only",children:"Search orders"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx("svg",{className:"h-5 w-5 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})}),r.jsx("input",{id:"search",type:"text",value:l,onChange:A=>c(A.target.value),placeholder:"Search by order ID or service...",className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg leading-5 bg-white placeholder-gray-500 focus:outline-none focus:placeholder-gray-400 focus:ring-2 focus:ring-yellow-400 focus:border-yellow-400 sm:text-sm"})]})]}),r.jsx("button",{type:"submit",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 transition-colors",children:"Search"}),i&&r.jsx("button",{type:"button",onClick:()=>{c("");const A=new URLSearchParams(t);A.delete("search"),A.delete("page"),n(A)},className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 transition-colors",children:"Clear"})]})})]}),h&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 mb-6",children:r.jsxs("div",{className:"flex",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-5 w-5 text-red-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("div",{className:"ml-3 flex-1",children:r.jsx("p",{className:"text-sm text-red-700",children:h instanceof Error?h.message:"Failed to load orders. Please try again."})}),r.jsx("div",{className:"ml-auto pl-3",children:r.jsx("button",{onClick:()=>f(),className:"inline-flex text-sm font-medium text-red-700 hover:text-red-600 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500",children:"Retry"})})]})}),u&&r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:r.jsx("div",{className:"animate-pulse p-6",children:r.jsx("div",{className:"space-y-4",children:[1,2,3].map(A=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4 mb-2"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]},A))})})}),!u&&!h&&S.length===0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:1.5,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:i?"No orders found":"No orders yet"}),r.jsx("p",{className:"text-gray-600 mb-6",children:i?"Try adjusting your search or filters.":"Start by requesting a quote for your first project."}),r.jsx(ie,{to:"/app/quotes/new",className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-black bg-yellow-400 hover:bg-yellow-500 transition-all duration-200 shadow-lg hover:shadow-xl",children:"Get a Quote"})]}),!u&&!h&&S.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.map(A=>{const E=A.order.due_at&&new Date(A.order.due_at)<new Date;return r.jsxs("tr",{onClick:()=>p(A.order.id),className:"hover:bg-gray-50 cursor-pointer transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",A.order.id.substring(0,8).toUpperCase()]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:A.service.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-gray-100 text-gray-800",children:A.tier.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(A.order.status)}`,children:N(A.order.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:`text-sm ${E?"text-red-600 font-semibold":"text-gray-900"}`,children:w(A.order.due_at)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["",Number(A.order.total_amount||0).toFixed(2)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm",children:A.payment_status.deposit_paid&&A.payment_status.balance_due<=0?r.jsx("span",{className:"text-green-600 font-medium",children:" Paid"}):A.payment_status.deposit_paid&&A.payment_status.balance_due>0?r.jsxs("span",{className:"text-orange-600 font-medium",children:["Due ",Number(A.payment_status.balance_due||0).toFixed(2)]}):r.jsxs("span",{className:"text-red-600 font-medium",children:["Deposit Due ",Number(A.order.deposit_amount||0).toFixed(2)]})})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:R=>{R.stopPropagation(),p(A.order.id)},className:"text-blue-600 hover:text-blue-900 mr-4",children:"View Details"}),A.payment_status.balance_due>0&&A.payment_status.deposit_paid&&r.jsx("button",{onClick:R=>{R.stopPropagation(),y(A.order.id)},className:"text-yellow-600 hover:text-yellow-700 font-medium",children:"Pay Balance"})]})]},A.order.id)})})]})}),r.jsx("div",{className:"md:hidden space-y-4",children:S.map(A=>{const E=A.order.due_at&&new Date(A.order.due_at)<new Date;return r.jsxs("div",{onClick:()=>p(A.order.id),className:"bg-white rounded-lg shadow-sm border border-gray-200 p-4 hover:shadow-md transition-shadow cursor-pointer",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"text-xs font-medium text-gray-500 mb-1",children:["Order #",A.order.id.substring(0,8).toUpperCase()]}),r.jsx("h3",{className:"text-base font-semibold text-gray-900 mb-1",children:A.service.name}),r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-gray-100 text-gray-800",children:A.tier.name})]}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(A.order.status)}`,children:N(A.order.status)})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4 pt-3 border-t border-gray-100",children:[r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Due Date"}),r.jsx("div",{className:`text-sm font-medium ${E?"text-red-600":"text-gray-900"}`,children:w(A.order.due_at)})]}),r.jsxs("div",{children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Total"}),r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["",Number(A.order.total_amount||0).toFixed(2)]})]})]}),r.jsxs("div",{className:"mb-4 pt-3 border-t border-gray-100",children:[r.jsx("div",{className:"text-xs text-gray-500 mb-1",children:"Payment Status"}),A.payment_status.deposit_paid&&A.payment_status.balance_due<=0?r.jsx("div",{className:"text-sm font-medium text-green-600",children:" Paid in Full"}):A.payment_status.deposit_paid&&A.payment_status.balance_due>0?r.jsxs("div",{className:"text-sm font-medium text-orange-600",children:["Balance Due: ",Number(A.payment_status.balance_due||0).toFixed(2)]}):r.jsxs("div",{className:"text-sm font-medium text-red-600",children:["Deposit Due: ",Number(A.order.deposit_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex gap-2 pt-3 border-t border-gray-100",children:[r.jsx("button",{onClick:R=>{R.stopPropagation(),p(A.order.id)},className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 transition-colors",children:"View Details"}),A.payment_status.balance_due>0&&A.payment_status.deposit_paid&&r.jsx("button",{onClick:R=>{R.stopPropagation(),y(A.order.id)},className:"flex-1 inline-flex justify-center items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-black bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-400 transition-colors",children:"Pay Balance"})]})]},A.order.id)})}),T>1&&r.jsxs("div",{className:"mt-6 flex items-center justify-between border-t border-gray-200 bg-white px-4 py-3 sm:px-6 rounded-lg shadow-sm",children:[r.jsxs("div",{className:"flex flex-1 justify-between sm:hidden",children:[r.jsx("button",{onClick:()=>x(Math.max(1,o-1)),disabled:o<=1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsx("button",{onClick:()=>x(Math.min(T,o+1)),disabled:o>=T,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),r.jsxs("div",{className:"hidden sm:flex sm:flex-1 sm:items-center sm:justify-between",children:[r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-gray-700",children:["Showing page ",r.jsx("span",{className:"font-medium",children:o})," of"," ",r.jsx("span",{className:"font-medium",children:T})," ","(",(m==null?void 0:m.total)||0," total orders)"]})}),r.jsx("div",{children:r.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[r.jsxs("button",{onClick:()=>x(Math.max(1,o-1)),disabled:o<=1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{className:"sr-only",children:"Previous"}),r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})]}),Array.from({length:Math.min(5,T)},(A,E)=>{const R=E+1;return r.jsx("button",{onClick:()=>x(R),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${o===R?"z-10 bg-yellow-50 border-yellow-400 text-yellow-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:R},R)}),r.jsxs("button",{onClick:()=>x(Math.min(T,o+1)),disabled:o>=T,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{className:"sr-only",children:"Next"}),r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]})})]})]})]})]})]})})},ac="https://123project-build-a-production-ready-w.launchpulse.ai",kF=()=>{var z,B,re;const{id:e}=fr(),t=Le(),n=et(),s=k.useRef(null),a=ae(Q=>Q.authentication_state.auth_token),i=ae(Q=>Q.authentication_state.current_user),o=ae(Q=>Q.show_toast);ae(Q=>Q.show_modal),ae(Q=>Q.close_modal);const[l,c]=k.useState(""),[d,m]=k.useState(!1),[u,h]=k.useState(null),[f,b]=k.useState(""),[g,x]=k.useState(!1),[p,y]=k.useState(!1),{data:v,isLoading:N,isFetching:w,isPending:j,error:_,refetch:S}=pe({queryKey:["order",e],queryFn:async()=>{const Q=ae.getState().authentication_state.auth_token;if(!e||!Q)throw new Error("Missing order_id or auth_token");return(await te.get(`${ac}/api/orders/${e}`,{headers:{Authorization:`Bearer ${Q}`}})).data},enabled:!!e&&!!a,retry:1,staleTime:6e4});k.useEffect(()=>{a&&e&&!v&&!N&&S()},[a,e,v,N,S]);const{data:T=[],isLoading:A,refetch:E}=pe({queryKey:["messages",(z=v==null?void 0:v.message_thread)==null?void 0:z.id],queryFn:async()=>{var me;return!((me=v==null?void 0:v.message_thread)!=null&&me.id)||!a?[]:(await te.get(`${ac}/api/message-threads/${v.message_thread.id}/messages`,{headers:{Authorization:`Bearer ${a}`}})).data},enabled:!!((B=v==null?void 0:v.message_thread)!=null&&B.id)&&!!a,retry:1,staleTime:3e4}),R=ve({mutationFn:async Q=>{if(!a)throw new Error("Not authenticated");return(await te.post(`${ac}/api/proofs/${Q}/approve`,{},{headers:{Authorization:`Bearer ${a}`}})).data},onSuccess:()=>{o({type:"success",message:"Proof approved! Your order is now in production.",duration:5e3}),S(),y(!1)},onError:Q=>{var me,Pe;o({type:"error",message:((Pe=(me=Q.response)==null?void 0:me.data)==null?void 0:Pe.message)||"Failed to approve proof",duration:5e3})}}),I=ve({mutationFn:async Q=>{if(!a)throw new Error("Not authenticated");return(await te.post(`${ac}/api/proofs/${Q.proof_id}/request-changes`,{customer_comment:Q.customer_comment,reference_file_ids:[]},{headers:{Authorization:`Bearer ${a}`}})).data},onSuccess:()=>{o({type:"success",message:"Change request submitted. We'll update your proof soon.",duration:5e3}),S(),x(!1),b(""),h(null)},onError:Q=>{var me,Pe;o({type:"error",message:((Pe=(me=Q.response)==null?void 0:me.data)==null?void 0:Pe.message)||"Failed to request changes",duration:5e3})}}),O=ve({mutationFn:async Q=>{var Pe;if(!((Pe=v==null?void 0:v.message_thread)!=null&&Pe.id)||!a)throw new Error("No message thread");return(await te.post(`${ac}/api/message-threads/${v.message_thread.id}/messages`,{body:Q},{headers:{Authorization:`Bearer ${a}`}})).data},onMutate:async Q=>{var Pe,at,xr;m(!0),await n.cancelQueries({queryKey:["messages",(Pe=v==null?void 0:v.message_thread)==null?void 0:Pe.id]});const me=n.getQueryData(["messages",(at=v==null?void 0:v.message_thread)==null?void 0:at.id]);return n.setQueryData(["messages",(xr=v==null?void 0:v.message_thread)==null?void 0:xr.id],(Lu=[])=>{var ke;return[...Lu,{id:`temp_${Date.now()}`,thread_id:((ke=v==null?void 0:v.message_thread)==null?void 0:ke.id)||"",sender_user_id:(i==null?void 0:i.id)||"",body:Q,is_read:!1,created_at:new Date().toISOString(),sender_name:(i==null?void 0:i.name)||"You",sender_role:(i==null?void 0:i.role)||"CUSTOMER"}]}),{previous_messages:me}},onSuccess:()=>{c(""),m(!1),E()},onError:(Q,me,Pe)=>{var at;m(!1),n.setQueryData(["messages",(at=v==null?void 0:v.message_thread)==null?void 0:at.id],Pe.previous_messages),o({type:"error",message:"Failed to send message. Please try again.",duration:5e3})}}),L=Y.useMemo(()=>{if(!v)return{total_amount:0,deposit_paid:!1,deposit_amount:0,balance_due:0,payments_total:0};const Q=v.payments.filter(at=>at.status==="COMPLETED").reduce((at,xr)=>at+Number(xr.amount||0),0),me=Number(v.order.deposit_amount||0),Pe=Number(v.order.total_amount||0);return{total_amount:Pe,deposit_paid:Q>=me,deposit_amount:me,balance_due:Pe-Q,payments_total:Q}},[v]),F=Y.useMemo(()=>v!=null&&v.tier&&{basic:0,standard:2,premium:1/0,enterprise:1/0}[v.tier.slug]||0,[v==null?void 0:v.tier]),M=Y.useMemo(()=>v!=null&&v.order?Math.max(0,F-Number(v.order.revision_count||0)):0,[F,v==null?void 0:v.order]),D=async()=>{if(!l.trim()||l.length>1e3){o({type:"error",message:"Message must be between 1 and 1000 characters",duration:3e3});return}await O.mutateAsync(l)},W=Q=>{h(Q),y(!0)},P=async()=>{u&&await R.mutateAsync(u)},V=Q=>{h(Q),x(!0)},K=async()=>{if(u){if(f.length<20){o({type:"error",message:"Please provide at least 20 characters describing the changes needed",duration:3e3});return}if(M<=0){o({type:"error",message:"You have used all revisions for your tier. Please contact us for additional changes.",duration:5e3});return}await I.mutateAsync({proof_id:u,customer_comment:f})}},ne=()=>{t(`/app/orders/${e}/deposit`)},G=()=>{const Q=document.getElementById("proofs-section");Q&&Q.scrollIntoView({behavior:"smooth"})};k.useEffect(()=>{s.current&&s.current.scrollIntoView({behavior:"smooth"})},[T]),k.useEffect(()=>{var Q,me;if(_){const Pe=_;((Q=Pe.response)==null?void 0:Q.status)===404?(o({type:"error",message:"Order not found",duration:3e3}),t("/app/orders")):((me=Pe.response)==null?void 0:me.status)===403&&(o({type:"error",message:"Access denied",duration:3e3}),t("/app"))}},[_]);const oe=Q=>({QUOTE_REQUESTED:"bg-blue-100 text-blue-800",APPROVED:"bg-blue-100 text-blue-800",IN_PRODUCTION:"bg-teal-100 text-teal-800",PROOF_SENT:"bg-purple-100 text-purple-800",AWAITING_APPROVAL:"bg-orange-100 text-orange-800",READY_FOR_PICKUP:"bg-green-100 text-green-800",COMPLETED:"bg-green-600 text-white",CANCELLED:"bg-red-100 text-red-800"})[Q]||"bg-gray-100 text-gray-800",H=Q=>Q.split("_").map(me=>me.charAt(0)+me.slice(1).toLowerCase()).join(" "),ee=Q=>{switch(Q){case"AWAITING_APPROVAL":return{message:" Action required: Review and approve your proof.",action:G,action_label:"Review Proof"};case"READY_FOR_PICKUP":return{message:"Your order is ready! Contact us to arrange pickup."};case"COMPLETED":return{message:" Order completed. Thank you!"};default:return{message:"We're working on your order and will keep you updated."}}},J=Q=>{const me=new Date(Q),at=new Date().getTime()-me.getTime(),xr=Math.floor(at/(1e3*60*60*24));return xr===0?`Today at ${me.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`:xr===1?`Yesterday at ${me.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit"})}`:me.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};if(N||w||!a||j&&!!a&&!v)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"animate-pulse",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-64 mb-8"}),r.jsxs("div",{className:"bg-white rounded-xl p-8 shadow-lg mb-6",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded mb-4"}),r.jsx("div",{className:"h-24 bg-gray-200 rounded"})]})]})})})});if(!v)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Order not found"}),r.jsx(ie,{to:"/app/orders",className:"text-blue-600 hover:text-blue-700 font-medium",children:"Return to orders list"})]})})});const{order:se,quote:$,service:C,tier:U,proof_versions:q,payments:de}=v,he=ee(se.status),le=[{status:"QUOTE_REQUESTED",label:"Quote Finalized",timestamp:$.created_at,is_completed:!0},{status:"APPROVED",label:"Deposit Paid",timestamp:((re=de.find(Q=>Number(Q.amount)>=Number(se.deposit_amount)&&Q.status==="COMPLETED"))==null?void 0:re.created_at)||null,is_completed:L.deposit_paid},{status:"IN_PRODUCTION",label:"In Production",timestamp:se.status==="IN_PRODUCTION"||se.status==="PROOF_SENT"||se.status==="AWAITING_APPROVAL"||se.status==="READY_FOR_PICKUP"||se.status==="COMPLETED"?se.updated_at:null,is_completed:["IN_PRODUCTION","PROOF_SENT","AWAITING_APPROVAL","READY_FOR_PICKUP","COMPLETED"].includes(se.status)},{status:"COMPLETED",label:"Completed",timestamp:se.status==="COMPLETED"?se.updated_at:null,is_completed:se.status==="COMPLETED"}],be=le.findIndex(Q=>{var me;return se.status===Q.status||!Q.is_completed&&!((me=le[le.indexOf(Q)-1])!=null&&me.is_completed)});return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("nav",{className:"mb-6 text-sm",children:r.jsxs("ol",{className:"flex items-center space-x-2 text-gray-500",children:[r.jsx("li",{children:r.jsx(ie,{to:"/app",className:"hover:text-gray-700 transition-colors",children:"Dashboard"})}),r.jsx("li",{children:"/"}),r.jsx("li",{children:r.jsx(ie,{to:"/app/orders",className:"hover:text-gray-700 transition-colors",children:"Orders"})}),r.jsx("li",{children:"/"}),r.jsxs("li",{className:"text-gray-900 font-medium",children:["Order #",se.id.slice(0,8)]})]})}),r.jsx("div",{className:"mb-8",children:r.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Order #",se.id.slice(0,8)]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4 mb-6",children:[r.jsx("div",{className:"flex items-center gap-3",children:r.jsx("span",{className:`inline-flex items-center px-4 py-2 rounded-full text-sm font-semibold ${oe(se.status)}`,children:H(se.status)})}),he.action&&r.jsx("button",{onClick:he.action,className:"bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 transition-all duration-200",children:he.action_label})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mb-6",children:r.jsx("p",{className:"text-blue-900 text-sm",children:he.message})}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"hidden md:flex items-center justify-between",children:le.map((Q,me)=>r.jsxs("div",{className:"flex-1 flex flex-col items-center relative",children:[me<le.length-1&&r.jsx("div",{className:`absolute top-4 left-1/2 w-full h-0.5 ${Q.is_completed?"bg-green-600":"bg-gray-300"}`,style:{zIndex:0}}),r.jsx("div",{className:`relative z-10 w-8 h-8 rounded-full flex items-center justify-center mb-2 ${Q.is_completed?"bg-green-600":me===be?"bg-yellow-400 animate-pulse":"bg-gray-300"}`,children:Q.is_completed?r.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}):me===be?r.jsx("div",{className:"w-3 h-3 bg-black rounded-full"}):null}),r.jsx("p",{className:`text-xs font-medium text-center ${Q.is_completed||me===be?"text-gray-900":"text-gray-500"}`,children:Q.label}),Q.timestamp&&r.jsx("p",{className:"text-xs text-gray-500 text-center mt-1",children:J(Q.timestamp)})]},Q.status))}),r.jsx("div",{className:"md:hidden space-y-4",children:le.map((Q,me)=>r.jsxs("div",{className:"flex items-start gap-4",children:[r.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center flex-shrink-0 ${Q.is_completed?"bg-green-600":me===be?"bg-yellow-400 animate-pulse":"bg-gray-300"}`,children:Q.is_completed&&r.jsx("svg",{className:"w-5 h-5 text-white",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:`text-sm font-medium ${Q.is_completed||me===be?"text-gray-900":"text-gray-500"}`,children:Q.label}),Q.timestamp&&r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:J(Q.timestamp)})]})]},Q.status))})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Details"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Service:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:C.name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tier:"}),r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-semibold",children:U.name})]}),se.due_at&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Due Date:"}),r.jsx("span",{className:"font-semibold text-gray-900",children:J(se.due_at)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Created:"}),r.jsx("span",{className:"text-gray-700",children:J(se.created_at)})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Pricing"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal:"}),r.jsxs("span",{className:"text-gray-900",children:["",Number(se.total_subtotal||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Tax:"}),r.jsxs("span",{className:"text-gray-900",children:["",Number(se.tax_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-3 flex justify-between",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:"Total:"}),r.jsxs("span",{className:"font-bold text-gray-900",children:["",Number(se.total_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-3 mt-3 space-y-2",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsxs("span",{className:"text-gray-600",children:["Deposit (",Number(se.deposit_pct||0),"%):"]}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsxs("span",{className:"font-semibold text-gray-900",children:["",Number(se.deposit_amount||0).toFixed(2)]}),L.deposit_paid&&r.jsx("span",{className:"text-green-600 text-sm",children:" Paid"})]})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-gray-600",children:"Balance Due:"}),r.jsxs("span",{className:`font-semibold ${L.balance_due>0?"text-orange-600":"text-green-600"}`,children:["",Number(L.balance_due||0).toFixed(2)]})]})]}),L.balance_due>0&&L.deposit_paid&&r.jsxs("button",{onClick:ne,className:"w-full mt-4 bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 transition-all duration-200",children:["Pay Balance (",Number(L.balance_due||0).toFixed(2),")"]})]})]}),r.jsxs("div",{id:"proofs-section",className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Design Proofs"}),F!==1/0&&r.jsxs("div",{className:"mb-4 p-3 bg-gray-50 rounded-lg",children:[r.jsxs("p",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-semibold",children:"Revisions:"})," ",Number(se.revision_count||0)," / ",F," used (",U.name," Tier)"]}),M===0&&r.jsx("p",{className:"text-xs text-orange-600 mt-1",children:" Revision limit reached. Additional changes will require a new quote."})]}),q.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx("div",{className:"w-16 h-16 bg-gray-100 rounded-full flex items-center justify-center mx-auto mb-3",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("p",{className:"text-gray-600",children:"No proofs uploaded yet. We'll notify you when ready."})]}):r.jsx("div",{className:"space-y-6",children:q.map(Q=>r.jsxs("div",{className:`border rounded-lg p-4 ${Q.status==="SENT"?"border-yellow-300 bg-yellow-50":"border-gray-200"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900",children:["Version ",Q.version_number]}),r.jsx("p",{className:"text-sm text-gray-600",children:J(Q.created_at)})]}),r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold ${Q.status==="SENT"?"bg-blue-100 text-blue-800":Q.status==="APPROVED"?"bg-green-100 text-green-800":"bg-orange-100 text-orange-800"}`,children:Q.status==="SENT"?" Awaiting Review":Q.status==="APPROVED"?" Approved":" Changes Requested"})]}),r.jsx("div",{className:"mb-4",children:r.jsx("img",{src:Q.file_url,alt:`Proof version ${Q.version_number}`,className:"w-full h-64 object-cover rounded-lg border border-gray-200",onError:me=>{me.target.src='data:image/svg+xml,%3Csvg xmlns="http://www.w3.org/2000/svg" width="400" height="300"%3E%3Crect fill="%23E5E7EB" width="400" height="300"/%3E%3Ctext fill="%236B7280" font-family="Arial" font-size="16" x="50%25" y="50%25" text-anchor="middle" dy=".3em"%3EPreview not available%3C/text%3E%3C/svg%3E'}})}),Q.status==="SENT"&&r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsx("button",{onClick:()=>W(Q.id),className:"flex-1 bg-green-600 text-white px-4 py-2 rounded-lg font-medium hover:bg-green-700 transition-all duration-200",children:" Approve"}),r.jsx("button",{onClick:()=>V(Q.id),className:"flex-1 bg-yellow-400 text-black px-4 py-2 rounded-lg font-medium hover:bg-yellow-500 transition-all duration-200",children:"Request Changes"})]}),Q.status==="APPROVED"&&Q.approved_at&&r.jsx("div",{className:"bg-green-50 border border-green-200 rounded-lg p-3",children:r.jsxs("p",{className:"text-sm text-green-800",children:[" Approved on ",J(Q.approved_at)]})}),Q.status==="REVISION_REQUESTED"&&Q.customer_comment&&r.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-semibold text-orange-800 mb-2",children:"Changes Requested:"}),r.jsxs("p",{className:"text-sm text-gray-700 italic",children:["",Q.customer_comment,""]}),r.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Awaiting revised proof from team."})]})]},Q.id))})]})]}),r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 sticky top-8",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Messages"}),r.jsx("div",{className:"h-96 overflow-y-auto mb-4 space-y-3 border border-gray-200 rounded-lg p-4 bg-gray-50",children:A?r.jsx("div",{className:"text-center py-8",children:r.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-600 mx-auto"})}):T.length===0?r.jsx("div",{className:"text-center py-8",children:r.jsx("p",{className:"text-gray-500 text-sm",children:"No messages yet. Start a conversation!"})}):r.jsxs(r.Fragment,{children:[T.map(Q=>r.jsx("div",{className:`flex ${Q.sender_user_id===(i==null?void 0:i.id)?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg px-4 py-2 ${Q.sender_user_id===(i==null?void 0:i.id)?"bg-blue-600 text-white":"bg-gray-200 text-gray-900"}`,children:[Q.sender_user_id!==(i==null?void 0:i.id)&&Q.sender_name&&r.jsxs("p",{className:"text-xs font-semibold mb-1 opacity-75",children:[Q.sender_name," (",Q.sender_role,")"]}),r.jsx("p",{className:"text-sm",children:Q.body}),r.jsx("p",{className:`text-xs mt-1 ${Q.sender_user_id===(i==null?void 0:i.id)?"text-blue-100":"text-gray-500"}`,children:J(Q.created_at)})]})},Q.id)),r.jsx("div",{ref:s})]})}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("textarea",{value:l,onChange:Q=>c(Q.target.value),onKeyDown:Q=>{Q.key==="Enter"&&!Q.shiftKey&&(Q.preventDefault(),D())},placeholder:"Type your message...",maxLength:1e3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none",rows:3}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:[l.length," / 1000"]}),r.jsx("button",{onClick:D,disabled:!l.trim()||d,className:"bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:d?"Sending...":"Send"})]})]})]})})]})]})}),p&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-md w-full shadow-2xl",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Approve This Proof?"}),r.jsx("p",{className:"text-gray-700 mb-6",children:"By approving, you confirm this design is ready for production. This action cannot be undone."}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("button",{onClick:P,disabled:R.isPending,className:"w-full bg-green-600 text-white px-6 py-3 rounded-lg font-semibold hover:bg-green-700 disabled:opacity-50 transition-all duration-200",children:R.isPending?"Approving...":"Confirm Approval"}),r.jsx("button",{onClick:()=>{y(!1),h(null)},className:"w-full bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"})]})]})}),g&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center bg-black bg-opacity-60 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl p-8 max-w-2xl w-full shadow-2xl max-h-[90vh] overflow-y-auto",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Request Changes to Proof"}),r.jsx("div",{className:"mb-4 p-3 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-900",children:["You have ",r.jsx("span",{className:"font-semibold",children:M})," revision",M!==1?"s":""," remaining for your ",U.name," tier."]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"change_comment",className:"block text-sm font-medium text-gray-900 mb-2",children:"What changes are needed? (Be specific) *"}),r.jsx("textarea",{id:"change_comment",value:f,onChange:Q=>b(Q.target.value),placeholder:"Example: Increase logo size by 20%, adjust text color to #FF0000...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-none",rows:6,minLength:20}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[f.length," characters (minimum 20 required)"]})]}),r.jsxs("div",{className:"flex flex-col gap-3",children:[r.jsx("button",{onClick:K,disabled:f.length<20||I.isPending||M<=0,className:"w-full bg-yellow-400 text-black px-6 py-3 rounded-lg font-semibold hover:bg-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:I.isPending?"Submitting...":"Submit Change Request"}),r.jsx("button",{onClick:()=>{x(!1),b(""),h(null)},className:"w-full bg-gray-100 text-gray-900 px-6 py-3 rounded-lg font-medium hover:bg-gray-200 transition-all duration-200",children:"Cancel"})]})]})]})})]})},SF=async(e,t)=>{const n="https://123project-build-a-production-ready-w.launchpulse.ai",s=new URLSearchParams,a=s.toString()?`?${s.toString()}`:"";return(await te.get(`${n}/api/bookings${a}`,{headers:{Authorization:`Bearer ${e}`}})).data.map(o=>({id:o.booking.id,quote_id:o.booking.quote_id,customer_id:o.booking.customer_id,start_at:o.booking.start_at,end_at:o.booking.end_at,status:o.booking.status,is_emergency:o.booking.is_emergency,urgent_fee_pct:o.booking.urgent_fee_pct,service_name:o.service.name,created_at:o.booking.created_at,updated_at:o.booking.updated_at}))},CF=()=>{const[e,t]=Ye(),n=ae(p=>p.authentication_state.auth_token);ae(p=>p.authentication_state.current_user);const s=ae(p=>p.show_toast),[a,i]=k.useState(e.get("status")||null),{data:o=[],isLoading:l,error:c,refetch:d}=pe({queryKey:["customer_bookings",n],queryFn:()=>SF(n||""),enabled:!!n,staleTime:6e4,refetchOnWindowFocus:!1,retry:1});k.useEffect(()=>{const p=e.get("status");p!==a&&i(p)},[e]),k.useEffect(()=>{c&&s({type:"error",message:c.message||"Failed to load bookings",duration:5e3})},[c,s]);const m=k.useMemo(()=>{const p=new Date;return{upcoming:o.filter(y=>["CONFIRMED","PENDING"].includes(y.status)&&new Date(y.start_at)>p).sort((y,v)=>new Date(y.start_at).getTime()-new Date(v.start_at).getTime()),past:o.filter(y=>y.status==="COMPLETED"||new Date(y.start_at)<p&&y.status!=="CANCELLED").sort((y,v)=>new Date(v.start_at).getTime()-new Date(y.start_at).getTime()),cancelled:o.filter(y=>y.status==="CANCELLED").sort((y,v)=>new Date(v.created_at).getTime()-new Date(y.created_at).getTime())}},[o]),u=k.useMemo(()=>a?m[a]||[]:m.upcoming,[a,m]),h=p=>{i(p),p?e.set("status",p):e.delete("status"),t(e)},f=(p,y)=>{const v=new Date(p),N=new Date(y),w=v.toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"}),j=`${v.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})} - ${N.toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0})}`;return{date_str:w,time_str:j}},b=p=>({PENDING:"bg-yellow-100 text-yellow-800 border-yellow-200",CONFIRMED:"bg-green-100 text-green-800 border-green-200",COMPLETED:"bg-blue-100 text-blue-800 border-blue-200",CANCELLED:"bg-red-100 text-red-800 border-red-200"})[p]||"bg-gray-100 text-gray-800 border-gray-200",g=p=>({PENDING:"Pending Confirmation",CONFIRMED:"Confirmed",COMPLETED:"Completed",CANCELLED:"Cancelled"})[p]||p,x=k.useMemo(()=>({upcoming:m.upcoming.length,past:m.past.length,cancelled:m.cancelled.length}),[m]);return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b-2 border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Bookings"}),r.jsx("p",{className:"mt-2 text-base text-gray-600",children:"View and manage your scheduled appointments"})]}),r.jsx("div",{className:"mt-4 sm:mt-0",children:r.jsxs(ie,{to:"/app/quotes/new",className:"inline-flex items-center px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors duration-200 shadow-lg hover:shadow-xl",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"New Quote"]})})]})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("nav",{className:"-mb-px flex space-x-8 overflow-x-auto","aria-label":"Tabs",children:[r.jsxs("button",{onClick:()=>h(null),className:`whitespace-nowrap py-4 px-1 border-b-3 font-semibold text-base transition-colors duration-200 ${a===null?"border-yellow-400 text-black":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:["Upcoming",r.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-medium ${a===null?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"}`,children:x.upcoming})]}),r.jsxs("button",{onClick:()=>h("past"),className:`whitespace-nowrap py-4 px-1 border-b-3 font-semibold text-base transition-colors duration-200 ${a==="past"?"border-yellow-400 text-black":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:["Past",r.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-medium ${a==="past"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"}`,children:x.past})]}),r.jsxs("button",{onClick:()=>h("cancelled"),className:`whitespace-nowrap py-4 px-1 border-b-3 font-semibold text-base transition-colors duration-200 ${a==="cancelled"?"border-yellow-400 text-black":"border-transparent text-gray-600 hover:text-gray-900 hover:border-gray-300"}`,children:["Cancelled",r.jsx("span",{className:`ml-2 px-2 py-0.5 rounded-full text-xs font-medium ${a==="cancelled"?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-600"}`,children:x.cancelled})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[l&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(p=>r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 p-6 animate-pulse",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 space-y-3",children:[r.jsx("div",{className:"h-5 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/3"}),r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/2"})]}),r.jsx("div",{className:"h-10 w-32 bg-gray-200 rounded-lg"})]})},p))}),c&&!l&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-xl p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-6 h-6 text-red-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-base font-semibold text-red-900",children:"Failed to load bookings"}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:c.message||"An error occurred while fetching your bookings"})]})]}),r.jsx("button",{onClick:()=>d(),className:"px-4 py-2 bg-red-600 text-white text-sm font-medium rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]})}),!l&&!c&&u.length===0&&r.jsxs("div",{className:"bg-white rounded-xl border border-gray-200 p-12 text-center",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})}),r.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No bookings yet"}),r.jsxs("p",{className:"text-base text-gray-600 mb-6 max-w-md mx-auto",children:[a==="past"&&"You don't have any past bookings.",a==="cancelled"&&"No cancelled bookings found.",!a&&"You haven't scheduled any appointments yet. Get started by requesting a quote!"]}),!a&&r.jsx(ie,{to:"/app/quotes/new",className:"inline-flex items-center px-8 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors duration-200 shadow-lg hover:shadow-xl",children:"Get a Quote"})]}),!l&&!c&&u.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block bg-white rounded-xl border border-gray-200 overflow-hidden shadow-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 uppercase tracking-wider",children:"Service"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 uppercase tracking-wider",children:"Date & Time"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-900 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-semibold text-gray-900 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(p=>{const{date_str:y,time_str:v}=f(p.start_at,p.end_at);return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{children:[r.jsx("div",{className:"text-base font-semibold text-gray-900",children:p.service_name}),p.is_emergency&&r.jsxs("div",{className:"flex items-center mt-1",children:[r.jsx("span",{className:"text-yellow-600 text-xl mr-1",children:""}),r.jsx("span",{className:"text-xs font-medium text-yellow-700",children:"Emergency Booking"})]})]})})}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm text-gray-900 font-medium",children:y}),r.jsx("div",{className:"text-sm text-gray-600 mt-1",children:v})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full border ${b(p.status)}`,children:g(p.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs(ie,{to:`/app/orders?quote_id=${p.quote_id}`,className:"inline-flex items-center px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg border border-gray-300 transition-colors duration-200",children:["View Order",r.jsx("svg",{className:"w-4 h-4 ml-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]},p.id)})})]})}),r.jsx("div",{className:"md:hidden space-y-4",children:u.map(p=>{const{date_str:y,time_str:v}=f(p.start_at,p.end_at);return r.jsx("div",{className:"bg-white rounded-xl border border-gray-200 overflow-hidden shadow-lg",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:p.service_name}),p.is_emergency&&r.jsxs("div",{className:"flex items-center mt-2",children:[r.jsx("span",{className:"text-yellow-600 text-xl mr-1",children:""}),r.jsx("span",{className:"text-sm font-medium text-yellow-700",children:"Emergency Booking"})]})]}),r.jsx("span",{className:`inline-flex px-3 py-1 text-xs font-semibold rounded-full border ${b(p.status)}`,children:g(p.status)})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("svg",{className:"w-5 h-5 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("span",{className:"font-medium text-gray-900",children:y})]}),r.jsxs("div",{className:"flex items-center text-sm text-gray-600",children:[r.jsx("svg",{className:"w-5 h-5 mr-2 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("span",{children:v})]})]}),r.jsx(ie,{to:`/app/orders?quote_id=${p.quote_id}`,className:"block w-full px-6 py-3 bg-gray-100 hover:bg-gray-200 text-gray-900 text-center font-semibold rounded-lg border border-gray-300 transition-colors duration-200",children:"View Order"})]})},p.id)})})]}),!l&&!c&&u.length>0&&r.jsx("div",{className:"mt-6 text-center",children:r.jsxs("p",{className:"text-sm text-gray-600",children:["Showing ",u.length," ",u.length===1?"booking":"bookings"]})})]})]})})},AF=async(e,t)=>(await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/quotes/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data,PF=async(e,t,n)=>{const s="https://123project-build-a-production-ready-w.launchpulse.ai",a=new URLSearchParams({start_date:e,end_date:t});return n&&a.append("service_id",n),(await te.get(`${s}/api/calendar/availability?${a.toString()}`)).data},EF=async(e,t)=>(await te.post("https://123project-build-a-production-ready-w.launchpulse.ai/api/bookings",e,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"application/json"}})).data,OF=()=>{const e=Le(),[t]=Ye(),n=t.get("quote_id")||"",s=t.get("date")||null,a=ae(X=>X.authentication_state.auth_token),i=ae(X=>X.authentication_state.current_user),o=ae(X=>X.show_toast),[l,c]=k.useState(s?new Date(s):new Date),[d,m]=k.useState(s),[u,h]=k.useState(null),[f,b]=k.useState(!1),[g,x]=k.useState(null),[p,y]=k.useState(!1),[v,N]=k.useState(!1),[w,j]=k.useState(null);k.useEffect(()=>{if(!a||!i){e(`/login?returnTo=/app/bookings/new?quote_id=${n}`);return}n||(o({type:"error",message:"Quote ID is required to book an appointment",duration:5e3}),e("/app/quotes"))},[a,i,n,e,o]);const{data:_,isLoading:S,error:T}=pe({queryKey:["quote",n],queryFn:()=>AF(n,a),enabled:!!n&&!!a,retry:1}),A=k.useMemo(()=>new Date(l.getFullYear(),l.getMonth(),1).toISOString().split("T")[0],[l]),E=k.useMemo(()=>new Date(l.getFullYear(),l.getMonth()+1,0).toISOString().split("T")[0],[l]),{data:R,isLoading:I,error:O}=pe({queryKey:["calendar-availability",A,E,_==null?void 0:_.service.id],queryFn:()=>PF(A,E,_==null?void 0:_.service.id),enabled:!!(_!=null&&_.service.id),staleTime:6e4,retry:1}),L=ve({mutationFn:X=>EF(X,a),onSuccess:X=>{o({type:"success",message:"Booking confirmed! Proceeding to payment...",duration:3e3}),j("Booking confirmed! Please complete your deposit payment."),setTimeout(()=>{e("/app/orders")},2e3)},onError:X=>{var $,C;const se=((C=($=X.response)==null?void 0:$.data)==null?void 0:C.message)||X.message||"Failed to create booking";o({type:"error",message:se,duration:5e3})}}),F=()=>{c(new Date(l.getFullYear(),l.getMonth()-1,1)),m(null),h(null)},M=()=>{c(new Date(l.getFullYear(),l.getMonth()+1,1)),m(null),h(null)},D=(X,se)=>{m(X),h(null),b(!1),x(null),y(!1),N(!1)},W=X=>{if(!(_!=null&&_.quote.final_subtotal))return;const se=20,$=Number(_.quote.final_subtotal||0),C=$*(se/100),U=$+C;x({fee_percentage:se,original_total:$,fee_amount:C,new_total:U}),b(!0),m(X),y(!0)},P=X=>{if(!(R!=null&&R.calendar_settings))return[];const se=R.calendar_settings,$=se.start_hour,C=se.end_hour,U=se.slot_duration_minutes,q=R.available_dates.find(be=>be.date===X),de=(q==null?void 0:q.available_slots)||[],he=[];let le=$;for(;le<C;){const be=`${X}T${String(le).padStart(2,"0")}:00:00Z`,z=le*60+U,B=Math.floor(z/60),re=z%60,Q=`${X}T${String(B).padStart(2,"0")}:${String(re).padStart(2,"0")}:00Z`,me=de.find(xr=>xr.start_at===be),Pe=me?me.is_available:!0,at=me?me.emergency_available:!0;he.push({start_at:be,end_at:Q,is_available:Pe,emergency_available:at}),le+=U/60}return he},V=()=>{!u||!n||L.mutate({quote_id:n,start_at:u.start_at,end_at:u.end_at,is_emergency:f})},K=()=>{if(!v)return;y(!1);const X=P(d);X.length>0&&h(X[0])},ne=k.useMemo(()=>{const X=l.getFullYear(),se=l.getMonth(),$=new Date(X,se,1),C=new Date(X,se+1,0),U=[],q=$.getDay();for(let de=0;de<q;de++)U.push(null);for(let de=1;de<=C.getDate();de++){const he=new Date(X,se,de);U.push(he.toISOString().split("T")[0])}return U},[l]),G=X=>R&&R.available_dates.find(se=>se.date===X)||null,oe=X=>new Date(X).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),H=X=>new Date(X).toLocaleDateString("en-US",{weekday:"long",year:"numeric",month:"long",day:"numeric"});if(S||I)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"animate-pulse space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/3"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"})]})})})});if(T||O||!_)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ho,{className:"w-6 h-6 text-red-600"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-red-900",children:"Unable to Load Booking Calendar"}),r.jsx("p",{className:"text-red-700 mt-1",children:T?"Quote not found or access denied":"Failed to load calendar availability"})]})]}),r.jsx("div",{className:"mt-4",children:r.jsxs(ie,{to:"/app/quotes",className:"inline-flex items-center px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:[r.jsx(Wm,{className:"w-4 h-4 mr-2"}),"Back to Quotes"]})})]})})})});if(_.quote.status!=="APPROVED")return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-4xl mx-auto",children:r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(Ho,{className:"w-6 h-6 text-yellow-600"}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-yellow-900",children:"Quote Not Finalized"}),r.jsx("p",{className:"text-yellow-700 mt-1",children:"This quote must be finalized by our team before you can book an appointment."})]})]}),r.jsx("div",{className:"mt-4",children:r.jsxs(ie,{to:`/app/quotes/${n}`,className:"inline-flex items-center px-4 py-2 bg-yellow-600 text-white rounded-lg hover:bg-yellow-700 transition-colors",children:[r.jsx(Wm,{className:"w-4 h-4 mr-2"}),"View Quote"]})})]})})})});const ee=d?G(d):null,J=d&&!(ee!=null&&ee.is_full)?P(d):[];return r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[w&&r.jsx("div",{className:"mb-6 bg-green-50 border border-green-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(NC,{className:"w-6 h-6 text-green-600"}),r.jsx("p",{className:"text-green-900 font-medium",children:w})]})}),r.jsxs("div",{className:"mb-6",children:[r.jsxs(ie,{to:`/app/quotes/${n}`,className:"inline-flex items-center text-gray-600 hover:text-gray-900 mb-4",children:[r.jsx(Wm,{className:"w-4 h-4 mr-2"}),"Back to Quote"]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Book Your Appointment"}),r.jsx("div",{className:"mt-4 bg-white rounded-lg border border-gray-200 p-4",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Service"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:_.service.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tier"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:_.tier.name})]})]})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 bg-white rounded-lg border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("button",{onClick:F,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Previous month",children:r.jsx(_R,{className:"w-5 h-5 text-gray-600"})}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:l.toLocaleDateString("en-US",{month:"long",year:"numeric"})}),r.jsx("button",{onClick:M,className:"p-2 hover:bg-gray-100 rounded-lg transition-colors","aria-label":"Next month",children:r.jsx(kR,{className:"w-5 h-5 text-gray-600"})})]}),r.jsxs("div",{className:"hidden md:block",children:[r.jsx("div",{className:"grid grid-cols-7 gap-2 mb-2",children:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].map(X=>r.jsx("div",{className:"text-center text-sm font-medium text-gray-600 py-2",children:X},X))}),r.jsx("div",{className:"grid grid-cols-7 gap-2",children:ne.map((X,se)=>{if(!X)return r.jsx("div",{className:"aspect-square"},`empty-${se}`);const $=G(X),C=X===new Date().toISOString().split("T")[0],U=X===d,q=new Date(X)<new Date,de=$&&!$.is_full&&!q,he=$==null?void 0:$.is_full;return r.jsx("button",{onClick:()=>{de&&$?D(X):he&&!q&&W(X)},disabled:q||!de&&!he,className:`
                          aspect-square p-2 rounded-lg border-2 transition-all
                          ${U?"border-yellow-500 bg-yellow-50":"border-gray-200"}
                          ${C&&!U?"border-blue-500":""}
                          ${de&&!U?"hover:bg-gray-50 cursor-pointer":""}
                          ${he&&!q?"bg-red-50 border-red-200 cursor-pointer hover:bg-red-100":""}
                          ${q||!de&&!he?"opacity-40 cursor-not-allowed":""}
                        `,children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:`text-sm font-medium ${U?"text-yellow-900":"text-gray-900"}`,children:new Date(X).getDate()}),de&&r.jsx("div",{className:"mt-1 flex justify-center",children:r.jsx("div",{className:"w-2 h-2 rounded-full bg-green-500"})}),he&&!q&&r.jsx("div",{className:"mt-1 text-xs text-red-600 font-medium",children:"Full"})]})},X)})})]}),r.jsx("div",{className:"md:hidden space-y-2",children:R==null?void 0:R.available_dates.filter(X=>{const se=new Date(X.date);return se.getMonth()===l.getMonth()&&se.getFullYear()===l.getFullYear()}).map(X=>{const se=X.date===d;return new Date(X.date)<new Date?null:r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-2",children:[r.jsx("div",{className:"font-semibold text-gray-900",children:H(X.date)}),X.is_full?r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Full"}):r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-green-100 text-green-800",children:"Available"})]}),X.is_full?r.jsx("button",{onClick:()=>W(X.date),className:"w-full mt-2 px-4 py-2 rounded-lg font-medium bg-red-100 text-red-800 hover:bg-red-200 transition-colors",children:"Request Emergency Booking"}):r.jsx("button",{onClick:()=>D(X.date),className:`
                              w-full mt-2 px-4 py-2 rounded-lg font-medium transition-colors
                              ${se?"bg-yellow-500 text-black":"bg-gray-100 text-gray-900 hover:bg-gray-200"}
                            `,children:se?"Selected":"Select Date"})]},X.date)})}),r.jsx("div",{className:"mt-6 pt-6 border-t border-gray-200",children:r.jsxs("div",{className:"flex flex-wrap gap-4 text-sm",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-green-500"}),r.jsx("span",{className:"text-gray-600",children:"Available"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-red-500"}),r.jsx("span",{className:"text-gray-600",children:"Fully Booked"})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("div",{className:"w-3 h-3 rounded-full bg-blue-500"}),r.jsx("span",{className:"text-gray-600",children:"Today"})]})]})})]}),r.jsxs("div",{className:"space-y-6",children:[d&&!f&&r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Select Time Slot"}),r.jsx("div",{className:"space-y-2",children:J.map((X,se)=>r.jsx("button",{onClick:()=>h(X),className:`
                          w-full px-4 py-3 rounded-lg border-2 text-left transition-all
                          ${(u==null?void 0:u.start_at)===X.start_at?"border-yellow-500 bg-yellow-50":"border-gray-200 hover:border-gray-300 hover:bg-gray-50"}
                        `,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(hs,{className:"w-5 h-5 text-gray-600"}),r.jsxs("span",{className:"font-medium text-gray-900",children:[oe(X.start_at)," - ",oe(X.end_at)]})]})},se))})]}),d&&u&&r.jsxs("div",{className:"bg-white rounded-lg border border-gray-200 p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Booking Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Service"}),r.jsx("span",{className:"font-medium text-gray-900",children:_.service.name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Date"}),r.jsx("span",{className:"font-medium text-gray-900",children:H(d)})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Time"}),r.jsxs("span",{className:"font-medium text-gray-900",children:[oe(u.start_at)," - ",oe(u.end_at)]})]}),f&&g&&r.jsxs("div",{className:"pt-3 border-t border-gray-200",children:[r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsx("span",{className:"text-gray-600",children:"Original Total"}),r.jsxs("span",{className:"text-gray-900",children:["",Number(g.original_total||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between mb-2",children:[r.jsxs("span",{className:"text-red-600",children:["Emergency Fee (+",g.fee_percentage,"%)"]}),r.jsxs("span",{className:"text-red-600",children:["",Number(g.fee_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between font-semibold text-lg",children:[r.jsx("span",{className:"text-gray-900",children:"New Total"}),r.jsxs("span",{className:"text-gray-900",children:["",Number(g.new_total||0).toFixed(2)]})]})]})]}),r.jsx("button",{onClick:V,disabled:L.isPending,className:"w-full mt-6 px-6 py-3 bg-yellow-500 text-black rounded-lg font-semibold hover:bg-yellow-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:L.isPending?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Confirming Booking..."]}):"Confirm Booking"})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx(ji,{className:"w-5 h-5 text-blue-600 mt-0.5"}),r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-sm text-blue-900 font-medium",children:"How to Book"}),r.jsx("p",{className:"text-sm text-blue-700 mt-1",children:"Select a date from the calendar, then choose your preferred time slot. If your preferred date is full, you can request an emergency booking with an additional fee."})]})]})})]})]})]})}),p&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 z-40",onClick:()=>y(!1)}),r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full p-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Request Emergency Booking"}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:r.jsxs("p",{className:"text-yellow-900 text-sm",children:["This date is fully booked. Emergency bookings are available for urgent needs and incur an additional urgent fee of +",g==null?void 0:g.fee_percentage,"%."]})}),g&&r.jsxs("div",{className:"space-y-2 mb-6",children:[r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsx("span",{className:"text-gray-600",children:"Original Quote Total"}),r.jsxs("span",{className:"text-gray-900",children:["",Number(g.original_total||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-sm",children:[r.jsxs("span",{className:"text-red-600",children:["Urgent Fee (+",g.fee_percentage,"%)"]}),r.jsxs("span",{className:"text-red-600",children:["",Number(g.fee_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"pt-2 border-t border-gray-200 flex justify-between",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:"New Total"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:["",Number(g.new_total||0).toFixed(2)]})]})]}),r.jsx("div",{className:"mb-6",children:r.jsxs("label",{className:"flex items-start space-x-3 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:v,onChange:X=>N(X.target.checked),className:"mt-1 w-5 h-5 text-yellow-500 border-gray-300 rounded focus:ring-yellow-500"}),r.jsxs("span",{className:"text-sm text-gray-700",children:["I understand and accept the urgent fee of +",g==null?void 0:g.fee_percentage,"%."]})]})}),r.jsxs("div",{className:"flex space-x-3",children:[r.jsx("button",{onClick:()=>{y(!1),N(!1),b(!1)},className:"flex-1 px-4 py-2 border border-gray-300 rounded-lg font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:K,disabled:!v,className:"flex-1 px-4 py-2 bg-yellow-500 text-black rounded-lg font-medium hover:bg-yellow-600 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Confirm Emergency Booking"})]})]})})]})]})},TF="pk_test_placeholder",MF=JC(TF),LF=({depositAmount:e,orderId:t,onSuccess:n,onError:s})=>{const a=cA(),i=oA(),[o,l]=k.useState(!1),c=ae(h=>h.authentication_state.auth_token),d=ae(h=>h.show_toast),m=ve({mutationFn:async()=>{const{data:h}=await te.post("https://123project-build-a-production-ready-w.launchpulse.ai/api/payments/stripe/create-intent",{order_id:t,amount:e},{headers:{Authorization:`Bearer ${c}`,"Content-Type":"application/json"}});return h}}),u=async h=>{var b,g;if(h.preventDefault(),!a||!i){s("Stripe has not loaded. Please try again.");return}const f=i.getElement(Ch);if(!f){s("Card element not found");return}l(!0),s("");try{const{client_secret:x}=await m.mutateAsync(),{error:p,paymentIntent:y}=await a.confirmCardPayment(x,{payment_method:{card:f}});if(p){s(p.message||"Payment failed"),d({type:"error",message:p.message||"Payment failed",duration:5e3}),l(!1);return}(y==null?void 0:y.status)==="succeeded"&&(d({type:"success",message:"Payment successful! Your order is confirmed.",duration:5e3}),n())}catch(x){const p=((g=(b=x.response)==null?void 0:b.data)==null?void 0:g.message)||x.message||"Payment failed";s(p),d({type:"error",message:p,duration:5e3}),l(!1)}};return r.jsxs("form",{onSubmit:u,className:"space-y-6",children:[r.jsx("div",{className:"bg-white border-2 border-gray-200 rounded-lg p-6 focus-within:border-blue-500 transition-colors",children:r.jsx(Ch,{options:{style:{base:{fontSize:"16px",color:"#000000","::placeholder":{color:"#9CA3AF"}},invalid:{color:"#DC2626"}},hidePostalCode:!1}})}),r.jsxs("div",{className:"flex items-center space-x-2 text-sm text-gray-600",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z",clipRule:"evenodd"})}),r.jsx("span",{children:"Secured by Stripe - Your payment information is encrypted"})]}),r.jsx("button",{type:"submit",disabled:!a||o,className:"w-full bg-yellow-400 text-black font-semibold py-4 px-6 rounded-lg hover:bg-yellow-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl",children:o?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing Payment..."]}):`Pay ${Number(e||0).toFixed(2)}`}),r.jsxs("p",{className:"text-sm text-gray-600 text-center",children:["You will be charged ",Number(e||0).toFixed(2)," today. Balance due before delivery."]})]})},$F=()=>{const{order_id:e}=fr(),t=Le(),n=ae(F=>F.authentication_state.auth_token),s=ae(F=>F.authentication_state.current_user),a=ae(F=>F.show_toast),[i,o]=k.useState("STRIPE"),[l,c]=k.useState(""),[d,m]=k.useState(!1),[u,h]=k.useState(null),[f,b]=k.useState(!0),{data:g,isLoading:x,error:p}=pe({queryKey:["order-detail",e],queryFn:async()=>{if(!e)throw new Error("Order ID is required");const{data:F}=await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/orders/${e}`,{headers:{Authorization:`Bearer ${n}`}});return F},enabled:!!e&&!!n,staleTime:6e4,retry:1}),y=ve({mutationFn:async({reference:F})=>{if(!e||!(g!=null&&g.order))throw new Error("Order not found");const{data:M}=await te.post(`https://123project-build-a-production-ready-w.launchpulse.ai/api/orders/${e}/payments`,{amount:g.order.deposit_amount,method:"CHECK",transaction_ref:F||null},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}});return M},onSuccess:()=>{a({type:"success",message:"Thank you. We'll verify your payment within 1 business day.",duration:5e3}),t(`/app/orders/${e}`)},onError:F=>{var D,W;const M=((W=(D=F.response)==null?void 0:D.data)==null?void 0:W.message)||F.message||"Failed to record payment";h(M),a({type:"error",message:M,duration:5e3})}}),v=()=>{if(!d){h("Please confirm that you have made the payment");return}y.mutate({reference:l})},N=()=>{t(`/app/orders/${e}`)},w=F=>{h(F)},j=g==null?void 0:g.order,_=g==null?void 0:g.booking,S=g==null?void 0:g.service,T=g==null?void 0:g.tier,A=_!=null&&_.is_emergency?Number((j==null?void 0:j.total_subtotal)||0)*Number(_.urgent_fee_pct||0)/100:0;Number((j==null?void 0:j.total_subtotal)||0)+A;const E=Number((j==null?void 0:j.tax_amount)||0),R=Number((j==null?void 0:j.total_amount)||0)+A,I=Number((j==null?void 0:j.deposit_amount)||0)+A*(Number((j==null?void 0:j.deposit_pct)||50)/100),O=R-I,L={bankName:"AIB Bank",accountNumber:"12345678",iban:"IE29AIBK93115212345678",bic:"AIBKIE2D",reference:`ORD-${(e==null?void 0:e.slice(-8))||""}`};return x?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("svg",{className:"animate-spin h-12 w-12 text-blue-600 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"mt-4 text-gray-700 font-medium",children:"Loading order details..."})]})}):p||!g||!j?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Not Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"We couldn't find the order you're trying to pay for."}),r.jsx("button",{onClick:()=>t("/app/orders"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all duration-200",children:"View All Orders"})]})}):j.customer_id!==(s==null?void 0:s.id)?r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 flex items-center justify-center px-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-xl shadow-lg p-8 text-center",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"You don't have permission to view this order."}),r.jsx("button",{onClick:()=>t("/app"),className:"bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-all duration-200",children:"Go to Dashboard"})]})}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gradient-to-br from-blue-50 to-indigo-100 py-8 px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto",children:[r.jsxs("div",{className:"mb-8",children:[r.jsxs("button",{onClick:()=>t(`/app/orders/${e}`),className:"text-gray-600 hover:text-gray-900 flex items-center mb-4 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to Order"]}),r.jsx("h1",{className:"text-4xl font-bold text-gray-900 mb-2",children:"Complete Your Deposit"}),r.jsx("p",{className:"text-gray-700 text-lg",children:"Secure your booking with a deposit payment"})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("button",{onClick:()=>b(!f),className:"lg:hidden w-full px-6 py-4 flex items-center justify-between bg-gray-50 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Summary"}),r.jsx("svg",{className:`w-6 h-6 text-gray-600 transition-transform ${f?"rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})})]}),r.jsx("div",{className:"hidden lg:block px-6 py-4 bg-gray-50 border-b border-gray-200",children:r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Order Summary"})}),r.jsxs("div",{className:`${f?"block":"hidden"} lg:block px-6 py-6 space-y-4`,children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Service"}),r.jsx("p",{className:"text-lg font-semibold text-gray-900",children:S==null?void 0:S.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tier"}),r.jsx("div",{className:"inline-flex items-center px-3 py-1 rounded-full bg-blue-100 text-blue-800 text-sm font-medium",children:T==null?void 0:T.name})]}),_&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Booking Date"}),r.jsx("p",{className:"text-base font-medium text-gray-900",children:new Date(_.start_at).toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})}),r.jsxs("p",{className:"text-sm text-gray-600",children:[new Date(_.start_at).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})," - ",new Date(_.end_at).toLocaleTimeString("en-IE",{hour:"2-digit",minute:"2-digit"})]})]}),(_==null?void 0:_.is_emergency)&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-yellow-600 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M8.257 3.099c.765-1.36 2.722-1.36 3.486 0l5.58 9.92c.75 1.334-.213 2.98-1.742 2.98H4.42c-1.53 0-2.493-1.646-1.743-2.98l5.58-9.92zM11 13a1 1 0 11-2 0 1 1 0 012 0zm-1-8a1 1 0 00-1 1v3a1 1 0 002 0V6a1 1 0 00-1-1z",clipRule:"evenodd"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-yellow-800",children:"Emergency Booking"}),r.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:["+",Number(_.urgent_fee_pct||0),"% urgent fee applied"]})]})]})}),r.jsxs("div",{className:"border-t border-gray-200 pt-4 space-y-2",children:[r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Subtotal"}),r.jsxs("span",{children:["",Number(j.total_subtotal||0).toFixed(2)]})]}),A>0&&r.jsxs("div",{className:"flex justify-between text-yellow-700 font-medium",children:[r.jsxs("span",{children:["Emergency Fee (+",Number((_==null?void 0:_.urgent_fee_pct)||0),"%)"]}),r.jsxs("span",{children:["",A.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-gray-700",children:[r.jsx("span",{children:"Tax (23%)"}),r.jsxs("span",{children:["",E.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-xl font-bold text-gray-900 pt-2 border-t border-gray-300",children:[r.jsx("span",{children:"Total Amount"}),r.jsxs("span",{children:["",R.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-lg font-semibold text-blue-700 pt-2",children:[r.jsx("span",{children:"Deposit Required (50%)"}),r.jsxs("span",{children:["",I.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between text-gray-600",children:[r.jsx("span",{children:"Balance Due"}),r.jsxs("span",{children:["",O.toFixed(2)]})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 mt-4",children:r.jsxs("p",{className:"text-xs text-blue-800",children:["Balance of ",O.toFixed(2)," is due before delivery or installation."]})})]})]})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Payment Method"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Choose how you'd like to pay your deposit"})]}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("button",{onClick:()=>{o("STRIPE"),h(null)},className:`relative border-2 rounded-lg p-6 text-left transition-all duration-200 ${i==="STRIPE"?"border-yellow-400 bg-yellow-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[i==="STRIPE"&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("div",{className:"w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-black",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("svg",{className:"w-6 h-6 text-gray-700 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M3 10h18M7 15h1m4 0h1m-7 4h12a3 3 0 003-3V8a3 3 0 00-3-3H6a3 3 0 00-3 3v8a3 3 0 003 3z"})}),r.jsx("span",{className:"font-semibold text-gray-900",children:"Pay Online with Card"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Secure payment via Stripe"})]}),r.jsxs("button",{onClick:()=>{o("CHECK"),h(null)},className:`relative border-2 rounded-lg p-6 text-left transition-all duration-200 ${i==="CHECK"?"border-yellow-400 bg-yellow-50":"border-gray-200 bg-white hover:border-gray-300"}`,children:[i==="CHECK"&&r.jsx("div",{className:"absolute top-4 right-4",children:r.jsx("div",{className:"w-6 h-6 bg-yellow-400 rounded-full flex items-center justify-center",children:r.jsx("svg",{className:"w-4 h-4 text-black",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})})})}),r.jsxs("div",{className:"flex items-center mb-2",children:[r.jsx("svg",{className:"w-6 h-6 text-gray-700 mr-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 14v3m4-3v3m4-3v3M3 21h18M3 10h18M3 7l9-4 9 4M4 10h16v11H4V10z"})}),r.jsx("span",{className:"font-semibold text-gray-900",children:"Manual Payment"})]}),r.jsx("p",{className:"text-sm text-gray-600",children:"Bank transfer or cash"})]})]}),u&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-red-600 mr-2 mt-0.5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),r.jsx("p",{className:"text-sm text-red-800",children:u})]})}),i==="STRIPE"?r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Card Payment"}),r.jsx(v1,{stripe:MF,children:r.jsx(LF,{depositAmount:I,orderId:e,onSuccess:N,onError:w})})]})}):r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Bank Transfer Details"}),r.jsxs("div",{className:"bg-gray-50 border border-gray-300 rounded-lg p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Bank Name"}),r.jsx("p",{className:"text-base text-gray-900 font-mono",children:L.bankName})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"Account Number"}),r.jsx("p",{className:"text-base text-gray-900 font-mono",children:L.accountNumber})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"IBAN"}),r.jsx("p",{className:"text-base text-gray-900 font-mono",children:L.iban})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-700",children:"BIC/SWIFT"}),r.jsx("p",{className:"text-base text-gray-900 font-mono",children:L.bic})]}),r.jsxs("div",{className:"pt-4 border-t border-gray-300",children:[r.jsx("p",{className:"text-sm font-medium text-gray-700 mb-2",children:"Payment Reference (IMPORTANT)"}),r.jsx("div",{className:"bg-yellow-100 border-2 border-yellow-400 rounded-lg p-3",children:r.jsx("p",{className:"text-lg text-gray-900 font-mono font-bold",children:L.reference})}),r.jsx("p",{className:"text-xs text-gray-600 mt-2",children:"Include this reference in your transfer so we can match your payment"})]})]}),r.jsxs("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-blue-900 mb-2",children:"Instructions"}),r.jsxs("ol",{className:"text-sm text-blue-800 space-y-1 list-decimal list-inside",children:[r.jsxs("li",{children:["Make a payment of ",I.toFixed(2)," to the account above"]}),r.jsxs("li",{children:['Include the payment reference "',L.reference,'" in the transaction notes']}),r.jsx("li",{children:`Click "I've Made the Payment" below after completing the transfer`}),r.jsx("li",{children:"We'll confirm receipt within 1 business day and start your project"})]})]}),r.jsxs("div",{className:"mt-6",children:[r.jsx("label",{htmlFor:"payment-ref",className:"block text-sm font-medium text-gray-700 mb-2",children:"Your Payment Reference (Optional)"}),r.jsx("input",{type:"text",id:"payment-ref",value:l,onChange:F=>c(F.target.value),placeholder:"Enter your bank's transaction ID",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"text-xs text-gray-600 mt-1",children:"This helps us verify your payment faster"})]}),r.jsxs("div",{className:"mt-6 flex items-start",children:[r.jsx("input",{type:"checkbox",id:"manual-confirm",checked:d,onChange:F=>{m(F.target.checked),h(null)},className:"mt-1 h-5 w-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),r.jsxs("label",{htmlFor:"manual-confirm",className:"ml-3 text-sm text-gray-700",children:["I confirm that I have made a bank transfer of ",I.toFixed(2),'to the account above with the reference "',L.reference,'"']})]}),r.jsx("button",{onClick:v,disabled:!d||y.isPending,className:"w-full bg-yellow-400 text-black font-semibold py-4 px-6 rounded-lg hover:bg-yellow-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed shadow-lg hover:shadow-xl mt-6",children:y.isPending?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Recording Payment..."]}):"I've Made the Payment"}),r.jsx("p",{className:"text-xs text-gray-600 text-center mt-4",children:`After submitting, your order status will update to "Awaiting Deposit Confirmation". We'll verify and start your project within 1 business day.`})]})})]})]})})]}),r.jsx("div",{className:"mt-8 text-center",children:r.jsxs("div",{className:"inline-flex items-center space-x-2 text-gray-600 text-sm",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M5 9V7a5 5 0 0110 0v2a2 2 0 012 2v5a2 2 0 01-2 2H5a2 2 0 01-2-2v-5a2 2 0 012-2zm8-2v2H7V7a3 3 0 016 0z",clipRule:"evenodd"})}),r.jsx("span",{children:"Your payment information is secure and encrypted"})]})})]})})})},RF=()=>{const e=ae(x=>x.authentication_state.current_user),t=ae(x=>x.authentication_state.user_profile),n=ae(x=>x.authentication_state.auth_token),s=ae(x=>x.update_user_profile),a=ae(x=>x.show_toast),i="https://123project-build-a-production-ready-w.launchpulse.ai",[o,l]=k.useState({name:"",email:"",phone:"",company_name:"",address:""}),[c,d]=k.useState({current_password:"",new_password:"",confirm_password:""}),[m,u]=k.useState({profile:{},password:{}});k.useEffect(()=>{e&&t&&l({name:e.name,email:e.email,phone:"phone"in t&&t.phone?t.phone:"",company_name:"company_name"in t&&t.company_name?t.company_name:"",address:"address"in t&&t.address?t.address:""})},[e,t]);const h=ve({mutationFn:async x=>(await te.patch(`${i}/api/users/profile`,x,{headers:{Authorization:`Bearer ${n}`}})).data,onSuccess:x=>{s(x.profile),a({type:"success",message:"Profile updated successfully",duration:3e3}),u(p=>({...p,profile:{}}))},onError:x=>{var p,y;a({type:"error",message:((y=(p=x.response)==null?void 0:p.data)==null?void 0:y.message)||"Failed to update profile",duration:5e3})}}),f=ve({mutationFn:async x=>{await te.post(`${i}/api/users/change-password`,{current_password:x.current_password,new_password:x.new_password},{headers:{Authorization:`Bearer ${n}`}})},onSuccess:()=>{a({type:"success",message:"Password changed successfully",duration:3e3}),d({current_password:"",new_password:"",confirm_password:""}),u(x=>({...x,password:{}}))},onError:x=>{var p,y;a({type:"error",message:((y=(p=x.response)==null?void 0:p.data)==null?void 0:y.message)||"Failed to change password",duration:5e3})}}),b=x=>{x.preventDefault();const p={};if(o.name||(p.name="Name is required"),o.email||(p.email="Email is required"),Object.keys(p).length>0){u(y=>({...y,profile:p}));return}h.mutate(o)},g=x=>{x.preventDefault();const p={};if(c.current_password||(p.current_password="Current password is required"),c.new_password||(p.new_password="New password is required"),c.new_password.length<8&&(p.new_password="Password must be at least 8 characters"),c.new_password!==c.confirm_password&&(p.confirm_password="Passwords do not match"),Object.keys(p).length>0){u(y=>({...y,password:p}));return}f.mutate(c)};return e?r.jsx("div",{className:"min-h-screen bg-gray-50 py-8",children:r.jsxs("div",{className:"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8",children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900 mb-8",children:"Account Settings"}),r.jsxs("div",{className:"grid grid-cols-1 gap-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(go,{className:"w-5 h-5 mr-2"}),"Profile Information"]})}),r.jsx("div",{className:"p-6",children:r.jsxs("form",{onSubmit:b,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Full Name"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(go,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",value:o.name,onChange:x=>l(p=>({...p,name:x.target.value})),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),m.profile.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.profile.name})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Email Address"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(op,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"email",value:o.email,onChange:x=>l(p=>({...p,email:x.target.value})),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),m.profile.email&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.profile.email})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Phone Number"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(u1,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"tel",value:o.phone,onChange:x=>l(p=>({...p,phone:x.target.value})),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name"}),r.jsxs("div",{className:"relative",children:[r.jsx("div",{className:"absolute inset-y-0 left-0 pl-3 flex items-center pointer-events-none",children:r.jsx(jR,{className:"h-5 w-5 text-gray-400"})}),r.jsx("input",{type:"text",value:o.company_name,onChange:x=>l(p=>({...p,company_name:x.target.value})),className:"block w-full pl-10 pr-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address"}),r.jsx("textarea",{rows:3,value:o.address,onChange:x=>l(p=>({...p,address:x.target.value})),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:h.isPending,className:"inline-flex items-center px-4 py-2 border border-transparent rounded-lg shadow-sm text-sm font-medium text-white bg-blue-600 hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:h.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-white border-t-transparent rounded-full"}),"Saving..."]}):r.jsxs("span",{className:"flex items-center",children:[r.jsx(CC,{className:"mr-2 h-4 w-4"}),"Save Changes"]})})})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center",children:[r.jsx(OR,{className:"w-5 h-5 mr-2"}),"Change Password"]})}),r.jsx("div",{className:"p-6",children:r.jsxs("form",{onSubmit:g,className:"space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Current Password"}),r.jsx("input",{type:"password",value:c.current_password,onChange:x=>d(p=>({...p,current_password:x.target.value})),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),m.password.current_password&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.password.current_password})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"New Password"}),r.jsx("input",{type:"password",value:c.new_password,onChange:x=>d(p=>({...p,new_password:x.target.value})),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),m.password.new_password&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.password.new_password})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Confirm New Password"}),r.jsx("input",{type:"password",value:c.confirm_password,onChange:x=>d(p=>({...p,confirm_password:x.target.value})),className:"block w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500"}),m.password.confirm_password&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:m.password.confirm_password})]})]}),r.jsx("div",{className:"flex justify-end",children:r.jsx("button",{type:"submit",disabled:f.isPending,className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50",children:f.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsx("div",{className:"animate-spin mr-2 h-4 w-4 border-2 border-gray-700 border-t-transparent rounded-full"}),"Updating..."]}):r.jsx("span",{className:"flex items-center",children:"Update Password"})})})]})})]})]})]})}):null},vu="https://123project-build-a-production-ready-w.launchpulse.ai",IF=async e=>(await te.get(`${vu}/api/admin/quotes`,{params:{status:"SUBMITTED",page:1},headers:{Authorization:`Bearer ${e}`}})).data.total||0,DF=async e=>(await te.get(`${vu}/api/admin/orders`,{params:{status:"IN_PRODUCTION",page:1},headers:{Authorization:`Bearer ${e}`}})).data.total||0,FF=async e=>{const n=(await te.get(`${vu}/api/admin/orders`,{params:{page:1},headers:{Authorization:`Bearer ${e}`}})).data.orders||[];let s=0;const a=["QUOTE_REQUESTED","APPROVED","IN_PRODUCTION","PROOF_SENT","AWAITING_APPROVAL"];return s=n.filter(i=>{var l;const o=((l=i.order)==null?void 0:l.status)??i.status??"";return a.includes(o)}).length,s},BF=async e=>{const t=new Date().toISOString().split("T")[0];return await te.get(`${vu}/api/calendar/availability`,{params:{start_date:t,end_date:t},headers:{Authorization:`Bearer ${e}`}}),0},zF=async e=>(await te.get(`${vu}/api/admin/audit-logs`,{params:{page:1,limit:15},headers:{Authorization:`Bearer ${e}`}})).data.logs||[],qF=()=>{const e=Le(),t=ae(v=>v.authentication_state.auth_token),n=ae(v=>v.authentication_state.current_user),s=ae(v=>v.feature_flags.feature_b2b_enabled),a=ae(v=>v.feature_flags.feature_inventory_enabled),i=ae(v=>v.feature_flags.feature_analytics_enabled),o=ae(v=>v.show_toast);Y.useEffect(()=>{n&&n.role!=="ADMIN"&&(e("/"),o({type:"error",message:"Access denied. Admin privileges required.",duration:5e3}))},[n,e,o]);const l=gI({queries:[{queryKey:["admin-pending-quotes"],queryFn:()=>IF(t),enabled:!!t,staleTime:6e4,retry:1},{queryKey:["admin-active-orders"],queryFn:()=>DF(t),enabled:!!t,staleTime:6e4,retry:1},{queryKey:["admin-payments-pending"],queryFn:()=>FF(t),enabled:!!t,staleTime:6e4,retry:1},{queryKey:["admin-emergency-bookings"],queryFn:()=>BF(t),enabled:!!t,staleTime:6e4,retry:1},{queryKey:["admin-recent-activity"],queryFn:()=>zF(t),enabled:!!t,staleTime:6e4,retry:1}]}),[c,d,m,u,h]=l,f=k.useMemo(()=>({pending_quotes:c.data??0,active_orders:d.data??0,payments_pending:m.data??0,emergency_bookings_today:u.data??0,sla_at_risk:0}),[c.data,d.data,m.data,u.data]),b=h.data??[],g=l.some(v=>v.isLoading),x=l.some(v=>v.isError),p=v=>{const{object_type:N,object_id:w}=v;switch(N){case"QUOTE":return`/admin/quotes/${w}`;case"ORDER":return`/admin/orders/${w}`;case"USER":return`/admin/users?search=${w}`;case"SERVICE":return`/admin/services/${w}`;default:return"/admin"}},y=v=>{const N=new Date(v),j=new Date().getTime()-N.getTime(),_=Math.floor(j/6e4),S=Math.floor(j/36e5),T=Math.floor(j/864e5);return _<1?"Just now":_<60?`${_} minute${_===1?"":"s"} ago`:S<24?`${S} hour${S===1?"":"s"} ago`:T<7?`${T} day${T===1?"":"s"} ago`:N.toLocaleDateString("en-US",{month:"short",day:"numeric",year:"numeric"})};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("div",{className:"bg-white border-b-2 border-black",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Admin Dashboard"}),r.jsxs("p",{className:"mt-1 text-sm text-gray-600",children:["Welcome back, ",n==null?void 0:n.name]})]}),r.jsx("div",{className:"mt-4 sm:mt-0",children:r.jsxs("span",{className:"inline-flex items-center px-4 py-2 rounded-lg bg-gray-100 border border-gray-300 text-sm font-medium text-gray-700",children:[r.jsxs("svg",{className:"w-5 h-5 mr-2 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("circle",{cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"2",fill:"none"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12l2 2 4-4"})]}),"System Online"]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Business Overview"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsx(ie,{to:"/admin/quotes?status=SUBMITTED",className:"block bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200 hover:scale-105",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Quotes"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:g?r.jsx("span",{className:"inline-block w-12 h-8 bg-gray-200 rounded animate-pulse"}):f.pending_quotes}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Awaiting Review"})]}),r.jsx("div",{className:"w-12 h-12 bg-yellow-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),r.jsx(ie,{to:"/admin/orders?status=IN_PRODUCTION",className:"block bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200 hover:scale-105",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Orders"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:g?r.jsx("span",{className:"inline-block w-12 h-8 bg-gray-200 rounded animate-pulse"}):f.active_orders}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"In Production"})]}),r.jsx("div",{className:"w-12 h-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})}),r.jsx(ie,{to:"/admin/orders?payment_status=pending",className:"block bg-white rounded-xl shadow-lg border border-gray-100 p-6 hover:shadow-xl transition-all duration-200 hover:scale-105",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Payments Pending"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:g?r.jsx("span",{className:"inline-block w-12 h-8 bg-gray-200 rounded animate-pulse"}):f.payments_pending}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Awaiting Confirmation"})]}),r.jsx("div",{className:"w-12 h-12 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Emergency Bookings"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:g?r.jsx("span",{className:"inline-block w-12 h-8 bg-gray-200 rounded animate-pulse"}):f.emergency_bookings_today}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Today"})]}),r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M13 10V3L4 14h7v7l9-11h-7z"})})})]})}),i&&r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"SLA At-Risk"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:f.sla_at_risk}),r.jsx("p",{className:"text-xs text-gray-500 mt-2",children:"Jobs at risk"})]}),r.jsx("div",{className:"w-12 h-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]})})]})]}),r.jsxs("div",{className:"mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs(ie,{to:"/admin/quotes?status=SUBMITTED",className:"relative flex items-center justify-center px-6 py-4 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-md hover:shadow-lg",children:[f.pending_quotes>0&&r.jsx("span",{className:"absolute -top-2 -right-2 inline-flex items-center justify-center px-2 py-1 text-xs font-bold leading-none text-white bg-red-600 rounded-full",children:f.pending_quotes}),r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"Finalize Quotes"]}),r.jsxs(ie,{to:"/admin/services",className:"flex items-center justify-center px-6 py-4 bg-white border-2 border-black text-black font-semibold rounded-lg hover:bg-black hover:text-white transition-all duration-200 shadow-md hover:shadow-lg",children:[r.jsxs("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M10.325 4.317c.426-1.756 2.924-1.756 3.35 0a1.724 1.724 0 002.573 1.066c1.543-.94 3.31.826 2.37 2.37a1.724 1.724 0 001.065 2.572c1.756.426 1.756 2.924 0 3.35a1.724 1.724 0 00-1.066 2.573c.94 1.543-.826 3.31-2.37 2.37a1.724 1.724 0 00-2.572 1.065c-.426 1.756-2.924 1.756-3.35 0a1.724 1.724 0 00-2.573-1.066c-1.543.94-3.31-.826-2.37-2.37a1.724 1.724 0 00-1.065-2.572c-1.756-.426-1.756-2.924 0-3.35a1.724 1.724 0 001.066-2.573c-.94-1.543.826-3.31 2.37-2.37.996.608 2.296.07 2.572-1.065z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"})]}),"Manage Services"]}),s&&r.jsxs(ie,{to:"/admin/b2b",className:"flex items-center justify-center px-6 py-4 bg-white border-2 border-black text-black font-semibold rounded-lg hover:bg-black hover:text-white transition-all duration-200 shadow-md hover:shadow-lg",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),"Create B2B Account"]}),i&&r.jsxs(ie,{to:"/admin/analytics",className:"flex items-center justify-center px-6 py-4 bg-white border-2 border-black text-black font-semibold rounded-lg hover:bg-black hover:text-white transition-all duration-200 shadow-md hover:shadow-lg",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),"View Reports"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"border-b border-gray-200 px-6 py-4",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Recent Activity"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Last 15 actions across the system"})]}),h.isLoading?r.jsx("div",{className:"px-6 py-8",children:[...Array(5)].map((v,N)=>r.jsxs("div",{className:"mb-4 last:mb-0",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-3/4 mb-2 animate-pulse"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/2 animate-pulse"})]},N))}):h.isError?r.jsxs("div",{className:"px-6 py-8 text-center",children:[r.jsx("p",{className:"text-red-600 text-sm",children:"Failed to load activity feed"}),r.jsx("button",{onClick:()=>h.refetch(),className:"mt-4 px-4 py-2 bg-gray-100 text-gray-700 rounded-md hover:bg-gray-200 transition-colors text-sm font-medium",children:"Retry"})]}):b.length===0?r.jsxs("div",{className:"px-6 py-8 text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"No recent activity"})]}):r.jsx("div",{className:"divide-y divide-gray-200",children:b.map(v=>r.jsx(ie,{to:p(v.log),className:"block px-6 py-4 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[r.jsx("span",{className:"font-semibold",children:v.user.name}),r.jsx("span",{className:"text-gray-600 ml-1",children:v.log.action.toLowerCase()}),r.jsx("span",{className:"text-gray-600 ml-1",children:v.log.object_type.toLowerCase()})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1 flex items-center",children:[r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full bg-gray-100 text-gray-800 mr-2",children:v.user.role}),r.jsxs("span",{className:"truncate",children:[v.log.object_type," #",v.log.object_id.slice(0,8)]})]})]}),r.jsx("div",{className:"ml-4 flex-shrink-0",children:r.jsx("p",{className:"text-xs text-gray-500 whitespace-nowrap",children:y(v.log.created_at)})})]})},v.log.id))}),r.jsx("div",{className:"border-t border-gray-200 px-6 py-3 bg-gray-50",children:r.jsx(ie,{to:"/admin/settings?tab=audit",className:"text-sm font-medium text-blue-600 hover:text-blue-700 transition-colors",children:"View Full Audit Log "})})]})}),r.jsxs("div",{className:"space-y-6",children:[f.pending_quotes>0&&r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-orange-200 p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsxs("div",{className:"ml-3 flex-1",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900",children:"Action Required"}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[f.pending_quotes," quote",f.pending_quotes===1?"":"s"," awaiting review"]}),r.jsx(ie,{to:"/admin/quotes?status=SUBMITTED",className:"inline-block mt-3 text-sm font-medium text-orange-600 hover:text-orange-700",children:"Review Now "})]})]})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"System Features"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"B2B Accounts"}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${s?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:s?"Enabled":"Disabled"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Inventory"}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${a?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:a?"Enabled":"Disabled"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Analytics"}),r.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${i?"bg-green-100 text-green-800":"bg-gray-100 text-gray-600"}`,children:i?"Enabled":"Disabled"})]})]}),r.jsx(ie,{to:"/admin/settings?tab=features",className:"block mt-4 text-sm font-medium text-blue-600 hover:text-blue-700",children:"Manage Features "})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Quick Stats"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Total Pending"}),r.jsx("span",{className:"text-lg font-bold text-gray-900",children:f.pending_quotes+f.payments_pending})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"In Progress"}),r.jsx("span",{className:"text-lg font-bold text-gray-900",children:f.active_orders})]}),f.emergency_bookings_today>0&&r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Emergency Today"}),r.jsx("span",{className:"text-lg font-bold text-red-600",children:f.emergency_bookings_today})]})]})]})]})]}),x&&!g&&r.jsx("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-6 mb-8",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"h-6 w-6 text-red-600 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:"2",d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-red-800",children:"Some dashboard data failed to load"}),r.jsx("p",{className:"text-sm text-red-700 mt-1",children:"Some widgets may show incomplete data. Try refreshing the page."})]})]})})]})]})})},cp="https://123project-build-a-production-ready-w.launchpulse.ai";async function UF(e,t,n,s,a){const i=new URLSearchParams;return t&&i.append("role",t),n&&i.append("status",n),s&&i.append("search",s),i.append("page",a.toString()),(await te.get(`${cp}/api/admin/users?${i.toString()}`,{headers:{Authorization:`Bearer ${e}`}})).data}async function WF(e,t){await te.post(`${cp}/api/admin/users`,{name:t.name,email:t.email,password:t.password,role:t.role,phone:t.role==="CUSTOMER"?t.phone:null,company_name:t.role==="CUSTOMER"?t.company_name:null,department:t.role==="STAFF"||t.role==="ADMIN"?t.department:null,permissions:t.role==="STAFF"||t.role==="ADMIN"?t.permissions:null},{headers:{Authorization:`Bearer ${e}`}})}async function gN(e,t,n){await te.patch(`${cp}/api/admin/users/${t}`,{name:n.name,email:n.email,role:n.role,is_active:n.is_active,permissions:n.permissions},{headers:{Authorization:`Bearer ${e}`}})}async function VF(e,t){await te.delete(`${cp}/api/admin/users/${t}`,{headers:{Authorization:`Bearer ${e}`}})}const HF=()=>{var X,se,$;const e=Le(),[t]=Ye(),n=et(),s=ae(C=>C.authentication_state.auth_token),a=ae(C=>C.authentication_state.current_user),i=ae(C=>C.show_toast),o=t.get("role"),l=t.get("status"),c=t.get("search"),d=t.get("page"),[m,u]=k.useState({role:o,status:l,search_query:c||""}),[h,f]=k.useState({current_page:parseInt(d||"1"),total_pages:1,total_count:0,limit:20}),[b,g]=k.useState({name:"",email:"",password:"",role:"CUSTOMER",phone:"",company_name:"",department:"",permissions:{}}),[x,p]=k.useState(null),[y,v]=k.useState(!1),[N,w]=k.useState(!1),[j,_]=k.useState(null),[S,T]=k.useState(!1);k.useEffect(()=>{const C=new URLSearchParams;m.role&&C.set("role",m.role),m.status&&C.set("status",m.status),m.search_query&&C.set("search",m.search_query),h.current_page>1&&C.set("page",h.current_page.toString());const U=C.toString(),q=t.toString();U!==q&&e(`/admin/users${U?"?"+U:""}`,{replace:!0})},[m,h.current_page]);const{data:A,isLoading:E,error:R}=pe({queryKey:["admin-users",m.role,m.status,m.search_query,h.current_page],queryFn:()=>UF(s,m.role,m.status==="active"?"true":m.status==="inactive"?"false":null,m.search_query||null,h.current_page),enabled:!!s,staleTime:6e4,refetchOnWindowFocus:!1});k.useEffect(()=>{A&&f(C=>({...C,total_count:A.total,total_pages:Math.ceil(A.total/C.limit)}))},[A]);const I=ve({mutationFn:C=>WF(s,C),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]}),v(!1),g({name:"",email:"",password:"",role:"CUSTOMER",phone:"",company_name:"",department:"",permissions:{}}),i({type:"success",message:"User created successfully. Welcome email sent.",duration:5e3})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to create user",duration:5e3})}}),O=ve({mutationFn:({userId:C,formData:U})=>gN(s,C,U),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]}),w(!1),p(null),i({type:"success",message:"User updated successfully",duration:5e3})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to update user",duration:5e3})}}),L=ve({mutationFn:C=>VF(s,C),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]}),_(null),T(!1),i({type:"success",message:"User account deactivated",duration:5e3})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to delete user",duration:5e3})}}),F=ve({mutationFn:({userId:C,isActive:U})=>gN(s,C,{is_active:U}),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-users"]}),i({type:"success",message:"User status updated",duration:3e3})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to update status",duration:5e3})}}),M=C=>{u(U=>({...U,role:C})),f(U=>({...U,current_page:1}))},D=C=>{u(U=>({...U,status:C})),f(U=>({...U,current_page:1}))},W=C=>{u(U=>({...U,search_query:C})),f(U=>({...U,current_page:1}))},P=C=>{f(U=>({...U,current_page:C}))},V=()=>{g({name:"",email:"",password:"",role:"CUSTOMER",phone:"",company_name:"",department:"",permissions:{}}),v(!0)},K=C=>{let U=null;if(C.user.role==="STAFF"||C.user.role==="ADMIN"){const q=C.profile;if(q!=null&&q.permissions)try{U=JSON.parse(q.permissions)}catch{U={}}}p({id:C.user.id,name:C.user.name,email:C.user.email,role:C.user.role,is_active:C.user.is_active,permissions:U}),w(!0)},ne=C=>{if(C.preventDefault(),!b.name||!b.email||!b.password){i({type:"error",message:"Name, email, and password are required",duration:5e3});return}if(b.password.length<8){i({type:"error",message:"Password must be at least 8 characters",duration:5e3});return}I.mutate(b)},G=C=>{C.preventDefault(),x&&O.mutate({userId:x.id,formData:{name:x.name,email:x.email,role:x.role,is_active:x.is_active,permissions:x.permissions}})},oe=()=>{!j||!S||L.mutate(j.id)},H=(C,U)=>{F.mutate({userId:C,isActive:!U})},ee=C=>{switch(C){case"ADMIN":return"bg-purple-100 text-purple-800 border-purple-200";case"STAFF":return"bg-blue-100 text-blue-800 border-blue-200";case"CUSTOMER":return"bg-green-100 text-green-800 border-green-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},J=C=>{switch(C){case"ADMIN":return Sc;case"STAFF":return Wa;case"CUSTOMER":return Fa;default:return go}};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"User Management"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage customer, staff, and admin accounts"})]}),r.jsxs("button",{onClick:V,className:"inline-flex items-center px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-all duration-200 shadow-md hover:shadow-lg",children:[r.jsx(Xg,{className:"w-5 h-5 mr-2"}),"Add User"]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6 mb-6",children:[r.jsx("div",{className:"mb-6",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>M(null),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 ${m.role===null?"bg-yellow-400 text-black shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Users"}),r.jsxs("button",{onClick:()=>M("CUSTOMER"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 inline-flex items-center ${m.role==="CUSTOMER"?"bg-yellow-400 text-black shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Customers"]}),r.jsxs("button",{onClick:()=>M("STAFF"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 inline-flex items-center ${m.role==="STAFF"?"bg-yellow-400 text-black shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Staff"]}),r.jsxs("button",{onClick:()=>M("ADMIN"),className:`px-4 py-2 rounded-lg font-medium transition-all duration-200 inline-flex items-center ${m.role==="ADMIN"?"bg-yellow-400 text-black shadow-md":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[r.jsx(Sc,{className:"w-4 h-4 mr-2"}),"Admins"]})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{className:"relative",children:[r.jsx(AC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 w-5 h-5 text-gray-400"}),r.jsx("input",{type:"text",placeholder:"Search by name or email...",value:m.search_query,onChange:C=>W(C.target.value),className:"w-full pl-10 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>D(null),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${m.status===null?"bg-gray-900 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),r.jsx("button",{onClick:()=>D("active"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${m.status==="active"?"bg-green-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Active"}),r.jsx("button",{onClick:()=>D("inactive"),className:`flex-1 px-4 py-3 rounded-lg font-medium transition-all duration-200 ${m.status==="inactive"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Inactive"})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Total Users"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:h.total_count})]}),r.jsx("div",{className:"bg-blue-100 rounded-full p-3",children:r.jsx(Fa,{className:"w-8 h-8 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Active Users"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:(A==null?void 0:A.users.filter(C=>C.user.is_active).length)||0})]}),r.jsx("div",{className:"bg-green-100 rounded-full p-3",children:r.jsx(Dc,{className:"w-8 h-8 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Staff Members"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-1",children:(A==null?void 0:A.users.filter(C=>C.user.role==="STAFF"||C.user.role==="ADMIN").length)||0})]}),r.jsx("div",{className:"bg-purple-100 rounded-full p-3",children:r.jsx(Wa,{className:"w-8 h-8 text-purple-600"})})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-md border border-gray-200 overflow-hidden",children:E?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-4 border-gray-200 border-t-yellow-400"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading users..."})]}):R?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Ho,{className:"w-12 h-12 text-red-500 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"Failed to load users"}),r.jsx("button",{onClick:()=>n.invalidateQueries({queryKey:["admin-users"]}),className:"mt-4 px-4 py-2 bg-gray-100 hover:bg-gray-200 rounded-lg transition-colors",children:"Retry"})]}):!(A!=null&&A.users)||A.users.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx(Fa,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-600",children:"No users found"}),r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:"Try adjusting your filters"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Email"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Role"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Joined"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-semibold text-gray-600 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.users.map(C=>{const{user:U,profile:q}=C,de=J(U.role);return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-10 w-10 bg-gray-200 rounded-full flex items-center justify-center",children:r.jsx(go,{className:"w-5 h-5 text-gray-600"})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900",children:U.name}),q&&"company_name"in q&&q.company_name&&r.jsx("div",{className:"text-xs text-gray-500",children:q.company_name}),q&&"department"in q&&q.department&&r.jsx("div",{className:"text-xs text-gray-500",children:q.department})]})]})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:U.email}),q&&"phone"in q&&q.phone&&r.jsx("div",{className:"text-xs text-gray-500",children:q.phone})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border ${ee(U.role)}`,children:[r.jsx(de,{className:"w-3 h-3 mr-1"}),U.role]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>H(U.id,U.is_active),disabled:F.isPending,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border transition-all ${U.is_active?"bg-green-50 text-green-700 border-green-200 hover:bg-green-100":"bg-red-50 text-red-700 border-red-200 hover:bg-red-100"} disabled:opacity-50 disabled:cursor-not-allowed`,children:U.is_active?r.jsxs(r.Fragment,{children:[r.jsx(Dc,{className:"w-3 h-3 mr-1"}),"Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(lr,{className:"w-3 h-3 mr-1"}),"Inactive"]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:new Date(U.created_at).toLocaleDateString()}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>K(C),className:"inline-flex items-center p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",title:"Edit user",children:r.jsx(md,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>{_(U),T(!1)},className:"inline-flex items-center p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",title:"Delete user",disabled:U.id===(a==null?void 0:a.id),children:r.jsx(xo,{className:"w-4 h-4"})})]})})]},U.id)})})]})}),r.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:A.users.map(C=>{const{user:U,profile:q}=C,de=J(U.role);return r.jsxs("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("div",{className:"flex-shrink-0 h-12 w-12 bg-gray-200 rounded-full flex items-center justify-center",children:r.jsx(go,{className:"w-6 h-6 text-gray-600"})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("div",{className:"text-base font-semibold text-gray-900",children:U.name}),r.jsx("div",{className:"text-sm text-gray-500",children:U.email})]})]}),r.jsxs("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold border ${ee(U.role)}`,children:[r.jsx(de,{className:"w-3 h-3 mr-1"}),U.role]})]}),q&&r.jsxs("div",{className:"mb-3 pl-15",children:["company_name"in q&&q.company_name&&r.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Company: ",q.company_name]}),"department"in q&&q.department&&r.jsxs("div",{className:"text-xs text-gray-500 mb-1",children:["Department: ",q.department]}),"phone"in q&&q.phone&&r.jsxs("div",{className:"text-xs text-gray-500",children:["Phone: ",q.phone]})]}),r.jsxs("div",{className:"flex items-center justify-between pl-15",children:[r.jsx("button",{onClick:()=>H(U.id,U.is_active),disabled:F.isPending,className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold border transition-all ${U.is_active?"bg-green-50 text-green-700 border-green-200":"bg-red-50 text-red-700 border-red-200"} disabled:opacity-50`,children:U.is_active?"Active":"Inactive"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("button",{onClick:()=>K(C),className:"p-2 text-blue-600 hover:bg-blue-50 rounded-lg transition-colors",children:r.jsx(md,{className:"w-4 h-4"})}),r.jsx("button",{onClick:()=>{_(U),T(!1)},className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-colors",disabled:U.id===(a==null?void 0:a.id),children:r.jsx(xo,{className:"w-4 h-4"})})]})]}),r.jsxs("div",{className:"mt-2 pl-15 text-xs text-gray-500",children:["Joined ",new Date(U.created_at).toLocaleDateString()]})]},U.id)})}),h.total_pages>1&&r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"text-sm text-gray-600",children:["Showing ",(h.current_page-1)*h.limit+1," to"," ",Math.min(h.current_page*h.limit,h.total_count)," of"," ",h.total_count," users"]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>P(h.current_page-1),disabled:h.current_page===1,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Previous"}),r.jsx("button",{onClick:()=>P(h.current_page+1),disabled:h.current_page>=h.total_pages,className:"px-4 py-2 bg-white border border-gray-300 text-gray-700 rounded-lg hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:"Next"})]})]})})]})})]}),y&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Create New User"}),r.jsx("button",{onClick:()=>v(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(lr,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:ne,className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"User Role *"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>g(C=>({...C,role:"CUSTOMER"})),className:`flex items-center justify-center px-4 py-3 rounded-lg border-2 font-medium transition-all ${b.role==="CUSTOMER"?"border-yellow-400 bg-yellow-50 text-gray-900":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Customer"]}),r.jsxs("button",{type:"button",onClick:()=>g(C=>({...C,role:"STAFF"})),className:`flex items-center justify-center px-4 py-3 rounded-lg border-2 font-medium transition-all ${b.role==="STAFF"?"border-yellow-400 bg-yellow-50 text-gray-900":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Staff"]}),r.jsxs("button",{type:"button",onClick:()=>g(C=>({...C,role:"ADMIN"})),className:`flex items-center justify-center px-4 py-3 rounded-lg border-2 font-medium transition-all ${b.role==="ADMIN"?"border-yellow-400 bg-yellow-50 text-gray-900":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Sc,{className:"w-4 h-4 mr-2"}),"Admin"]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"create-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name *"}),r.jsx("input",{id:"create-name",type:"text",required:!0,value:b.name,onChange:C=>g(U=>({...U,name:C.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"John Doe"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"create-email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address *"}),r.jsx("input",{id:"create-email",type:"email",required:!0,value:b.email,onChange:C=>g(U=>({...U,email:C.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"john@example.com"})]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"create-password",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Temporary Password * ",r.jsx("span",{className:"text-xs text-gray-500",children:"(min 8 characters)"})]}),r.jsx("input",{id:"create-password",type:"text",required:!0,minLength:8,value:b.password,onChange:C=>g(U=>({...U,password:C.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"Temporary password (will be emailed to user)"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"User will receive this password via email and can change it later"})]}),b.role==="CUSTOMER"&&r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Customer Information"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"create-phone",className:"block text-sm font-medium text-gray-700 mb-2",children:"Phone"}),r.jsx("input",{id:"create-phone",type:"tel",value:b.phone,onChange:C=>g(U=>({...U,phone:C.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"+1-555-0000"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"create-company",className:"block text-sm font-medium text-gray-700 mb-2",children:"Company Name"}),r.jsx("input",{id:"create-company",type:"text",value:b.company_name,onChange:C=>g(U=>({...U,company_name:C.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"Acme Corp"})]})]})]}),(b.role==="STAFF"||b.role==="ADMIN")&&r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-4",children:"Staff Information"}),r.jsxs("div",{className:"mb-4",children:[r.jsx("label",{htmlFor:"create-department",className:"block text-sm font-medium text-gray-700 mb-2",children:"Department"}),r.jsx("input",{id:"create-department",type:"text",value:b.department,onChange:C=>g(U=>({...U,department:C.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all",placeholder:"Production"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Permissions"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:b.permissions.can_view_all_jobs||!1,onChange:C=>g(U=>({...U,permissions:{...U.permissions,can_view_all_jobs:C.target.checked}})),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400 focus:ring-2"}),r.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Can view all jobs"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:b.permissions.can_edit_pricing||!1,onChange:C=>g(U=>({...U,permissions:{...U.permissions,can_edit_pricing:C.target.checked}})),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400 focus:ring-2"}),r.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Can edit pricing"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:b.permissions.can_manage_users||!1,onChange:C=>g(U=>({...U,permissions:{...U.permissions,can_manage_users:C.target.checked}})),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400 focus:ring-2"}),r.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Can manage users"})]})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>v(!1),className:"px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-all",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:I.isPending,className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",children:I.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-black border-t-transparent mr-2"}),"Creating..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Xg,{className:"w-4 h-4 mr-2"}),"Create User"]})})]})]})]})}),N&&x&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"sticky top-0 bg-white border-b border-gray-200 px-6 py-4 flex items-center justify-between",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Edit User"}),r.jsx("button",{onClick:()=>{w(!1),p(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(lr,{className:"w-5 h-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:G,className:"p-6 space-y-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Full Name *"}),r.jsx("input",{id:"edit-name",type:"text",required:!0,value:x.name,onChange:C=>p(U=>U?{...U,name:C.target.value}:null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-email",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Email Address *"}),r.jsx("input",{id:"edit-email",type:"email",required:!0,value:x.email,onChange:C=>p(U=>U?{...U,email:C.target.value}:null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-yellow-400 focus:ring-4 focus:ring-yellow-100 transition-all"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-2",children:"User Role *"}),r.jsxs("div",{className:"grid grid-cols-3 gap-3",children:[r.jsxs("button",{type:"button",onClick:()=>p(C=>C?{...C,role:"CUSTOMER"}:null),className:`flex items-center justify-center px-4 py-3 rounded-lg border-2 font-medium transition-all ${x.role==="CUSTOMER"?"border-yellow-400 bg-yellow-50 text-gray-900":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Fa,{className:"w-4 h-4 mr-2"}),"Customer"]}),r.jsxs("button",{type:"button",onClick:()=>p(C=>C?{...C,role:"STAFF"}:null),className:`flex items-center justify-center px-4 py-3 rounded-lg border-2 font-medium transition-all ${x.role==="STAFF"?"border-yellow-400 bg-yellow-50 text-gray-900":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Wa,{className:"w-4 h-4 mr-2"}),"Staff"]}),r.jsxs("button",{type:"button",onClick:()=>p(C=>C?{...C,role:"ADMIN"}:null),className:`flex items-center justify-center px-4 py-3 rounded-lg border-2 font-medium transition-all ${x.role==="ADMIN"?"border-yellow-400 bg-yellow-50 text-gray-900":"border-gray-200 bg-white text-gray-700 hover:border-gray-300"}`,children:[r.jsx(Sc,{className:"w-4 h-4 mr-2"}),"Admin"]})]})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:x.is_active,onChange:C=>p(U=>U?{...U,is_active:C.target.checked}:null),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400 focus:ring-2"}),r.jsx("span",{className:"ml-3 text-sm font-semibold text-gray-700",children:"Account Active"})]}),r.jsx("p",{className:"ml-8 mt-1 text-xs text-gray-500",children:"Inactive users cannot log in"})]}),(x.role==="STAFF"||x.role==="ADMIN")&&r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700 mb-3",children:"Permissions"}),r.jsxs("div",{className:"space-y-2",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:((X=x.permissions)==null?void 0:X.can_view_all_jobs)||!1,onChange:C=>p(U=>U?{...U,permissions:{...U.permissions,can_view_all_jobs:C.target.checked}}:null),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400 focus:ring-2"}),r.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Can view all jobs"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:((se=x.permissions)==null?void 0:se.can_edit_pricing)||!1,onChange:C=>p(U=>U?{...U,permissions:{...U.permissions,can_edit_pricing:C.target.checked}}:null),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400 focus:ring-2"}),r.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Can edit pricing"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:(($=x.permissions)==null?void 0:$.can_manage_users)||!1,onChange:C=>p(U=>U?{...U,permissions:{...U.permissions,can_manage_users:C.target.checked}}:null),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400 focus:ring-2"}),r.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"Can manage users"})]})]})]}),r.jsxs("div",{className:"flex items-center justify-end gap-3 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>{w(!1),p(null)},className:"px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-all",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:O.isPending,className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-all shadow-md hover:shadow-lg disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",children:O.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-black border-t-transparent mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(Dc,{className:"w-4 h-4 mr-2"}),"Save Changes"]})})]})]})]})}),j&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60",children:r.jsx("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full",children:r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"flex items-center justify-center w-12 h-12 bg-red-100 rounded-full mx-auto mb-4",children:r.jsx(Ho,{className:"w-6 h-6 text-red-600"})}),r.jsx("h2",{className:"text-xl font-bold text-gray-900 text-center mb-2",children:"Delete User Account?"}),r.jsxs("p",{className:"text-gray-600 text-center mb-6",children:["Are you sure you want to delete ",r.jsx("strong",{children:j.name}),"? This will deactivate their account and they will no longer be able to log in."]}),r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-6",children:r.jsxs("label",{className:"flex items-start",children:[r.jsx("input",{type:"checkbox",checked:S,onChange:C=>T(C.target.checked),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400 focus:ring-2 mt-0.5"}),r.jsx("span",{className:"ml-3 text-sm text-gray-700",children:"I understand this will deactivate the user account and cannot be easily undone"})]})}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("button",{type:"button",onClick:()=>{_(null),T(!1)},className:"flex-1 px-6 py-3 bg-gray-100 text-gray-700 font-semibold rounded-lg hover:bg-gray-200 transition-all",children:"Cancel"}),r.jsx("button",{onClick:oe,disabled:!S||L.isPending,className:"flex-1 px-6 py-3 bg-red-600 text-white font-semibold rounded-lg hover:bg-red-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center justify-center",children:L.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-2 border-white border-t-transparent mr-2"}),"Deleting..."]}):r.jsxs(r.Fragment,{children:[r.jsx(xo,{className:"w-4 h-4 mr-2"}),"Delete User"]})})]})]})})})]})})},KF=()=>{const e=Le(),[t,n]=Ye(),s=et(),a=ae(P=>P.authentication_state.auth_token);ae(P=>P.authentication_state.current_user);const i=ae(P=>P.show_toast),[o,l]=k.useState({category:t.get("category")||null,active:t.get("active")==="true"?!0:t.get("active")==="false"?!1:null,search:""}),[c,d]=k.useState(!1),[m,u]=k.useState(!1),[h,f]=k.useState({category_id:"",name:"",slug:"",description:"",requires_booking:!1,requires_proof:!1,is_top_seller:!1,slot_duration_hours:2}),[b,g]=k.useState({name:"",slug:"",sort_order:0}),[x,p]=k.useState([]),y="https://123project-build-a-production-ready-w.launchpulse.ai";k.useEffect(()=>{const P=new URLSearchParams;o.category&&P.set("category",o.category),o.active!==null&&P.set("active",String(o.active)),n(P)},[o.category,o.active,n]),k.useEffect(()=>{if(h.name&&!h.slug){const P=h.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");f(V=>({...V,slug:P}))}},[h.name]),k.useEffect(()=>{if(b.name&&!b.slug){const P=b.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");g(V=>({...V,slug:P}))}},[b.name]);const{data:v=[],isLoading:N}=pe({queryKey:["admin-service-categories"],queryFn:async()=>(await te.get(`${y}/api/admin/service-categories`,{headers:{Authorization:`Bearer ${a}`}})).data,enabled:!!a,staleTime:3e5,refetchOnWindowFocus:!1}),{data:w=[],isLoading:j,error:_}=pe({queryKey:["admin-services",o.category,o.active],queryFn:async()=>{const P=new URLSearchParams;return o.category&&P.set("category",o.category),o.active!==null&&P.set("is_active",String(o.active)),(await te.get(`${y}/api/admin/services?${P.toString()}`,{headers:{Authorization:`Bearer ${a}`}})).data.map(K=>({service:K.service||K,category:K.category||{id:K.category_id,name:K.category_name,slug:""},options:K.options||[]}))},enabled:!!a,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),S=ve({mutationFn:async P=>(await te.post(`${y}/api/admin/services`,P,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["admin-services"]}),d(!1),f({category_id:"",name:"",slug:"",description:"",requires_booking:!1,requires_proof:!1,is_top_seller:!1,slot_duration_hours:2}),i({type:"success",message:"Service created successfully",duration:5e3})},onError:P=>{var K,ne;const V=((ne=(K=P.response)==null?void 0:K.data)==null?void 0:ne.message)||"Failed to create service";i({type:"error",message:V,duration:5e3})}}),T=ve({mutationFn:async P=>(await te.post(`${y}/api/admin/service-categories`,P,{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["admin-service-categories"]}),s.invalidateQueries({queryKey:["admin-services"]}),u(!1),g({name:"",slug:"",sort_order:v.length}),i({type:"success",message:"Category created successfully",duration:5e3})},onError:P=>{var K,ne;const V=((ne=(K=P.response)==null?void 0:K.data)==null?void 0:ne.message)||"Failed to create category";i({type:"error",message:V,duration:5e3})}}),A=ve({mutationFn:async({service_id:P,is_active:V})=>(await te.patch(`${y}/api/admin/services/${P}`,{is_active:V},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onMutate:async({service_id:P,is_active:V})=>{await s.cancelQueries({queryKey:["admin-services"]});const K=s.getQueryData(["admin-services",o.category,o.active]);return s.setQueryData(["admin-services",o.category,o.active],(ne=[])=>ne.map(G=>G.service.id===P?{...G,service:{...G.service,is_active:V}}:G)),{previous_services:K}},onError:(P,V,K)=>{K!=null&&K.previous_services&&s.setQueryData(["admin-services",o.category,o.active],K.previous_services),i({type:"error",message:"Failed to update service status",duration:5e3})},onSuccess:()=>{i({type:"success",message:"Service status updated",duration:3e3})},onSettled:()=>{s.invalidateQueries({queryKey:["admin-services"]})}}),E=ve({mutationFn:async({service_id:P,is_top_seller:V})=>(await te.patch(`${y}/api/admin/services/${P}`,{is_top_seller:V},{headers:{Authorization:`Bearer ${a}`,"Content-Type":"application/json"}})).data,onMutate:async({service_id:P,is_top_seller:V})=>{await s.cancelQueries({queryKey:["admin-services"]});const K=s.getQueryData(["admin-services",o.category,o.active]);return s.setQueryData(["admin-services",o.category,o.active],(ne=[])=>ne.map(G=>G.service.id===P?{...G,service:{...G.service,is_top_seller:V}}:G)),{previous_services:K}},onError:(P,V,K)=>{K!=null&&K.previous_services&&s.setQueryData(["admin-services",o.category,o.active],K.previous_services),i({type:"error",message:"Failed to update top seller status",duration:5e3})},onSuccess:()=>{i({type:"success",message:"Top seller status updated",duration:3e3})},onSettled:()=>{s.invalidateQueries({queryKey:["admin-services"]})}}),R=(P,V)=>{l(K=>({...K,[P]:V}))},I=P=>{l(V=>({...V,search:P}))},O=P=>{if(P.preventDefault(),!h.category_id||!h.name||!h.slug){i({type:"error",message:"Please fill in all required fields",duration:5e3});return}S.mutate(h)},L=P=>{if(P.preventDefault(),!b.name||!b.slug){i({type:"error",message:"Please fill in all required fields",duration:5e3});return}T.mutate(b)},F=(P,V)=>{A.mutate({service_id:P,is_active:!V})},M=(P,V)=>{E.mutate({service_id:P,is_top_seller:!V})},D=P=>{e(`/admin/services/${P}`)},W=w.filter(P=>{var K;if(!o.search)return!0;const V=o.search.toLowerCase();return P.service.name.toLowerCase().includes(V)||((K=P.service.description)==null?void 0:K.toLowerCase().includes(V))||P.category.name.toLowerCase().includes(V)});return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Services & Categories"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage your service catalog and configure quote wizard fields"})]}),r.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[r.jsx("button",{onClick:()=>u(!0),className:"px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors border border-gray-300",children:"Add Category"}),r.jsx("button",{onClick:()=>d(!0),className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors shadow-sm",children:"Add Service"})]})]})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Services"}),r.jsx("input",{id:"search",type:"text",value:o.search,onChange:P=>I(P.target.value),placeholder:"Search by name, description...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{id:"category-filter",value:o.category||"",onChange:P=>R("category",P.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Categories"}),v.map(P=>r.jsx("option",{value:P.slug,children:P.name},P.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"active-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{id:"active-filter",value:o.active===null?"":String(o.active),onChange:P=>R("active",P.target.value===""?null:P.target.value==="true"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Services"}),r.jsx("option",{value:"true",children:"Active Only"}),r.jsx("option",{value:"false",children:"Inactive Only"})]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[j&&r.jsx("div",{className:"flex justify-center py-12",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("svg",{className:"animate-spin h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-gray-600",children:"Loading services..."})]})}),_&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-700",children:"Failed to load services. Please try again."})}),!j&&W.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No services found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:o.search||o.category||o.active!==null?"Try adjusting your filters":"Get started by creating your first service"}),!o.search&&!o.category&&o.active===null&&r.jsx("button",{onClick:()=>d(!0),className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:"Create First Service"})]}),!j&&W.length>0&&r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Configuration"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:W.map(P=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900",children:P.service.name}),P.service.description&&r.jsx("div",{className:"text-sm text-gray-500 mt-1 line-clamp-2",children:P.service.description})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:P.category.name})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[P.service.requires_booking&&r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-purple-100 text-purple-800",children:" Booking"}),P.service.requires_proof&&r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-green-100 text-green-800",children:" Proof"}),P.options.length>0&&r.jsxs("span",{className:"inline-flex items-center px-2 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800",children:[P.options.length," fields"]})]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("button",{onClick:()=>F(P.service.id,P.service.is_active),disabled:A.isPending,className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold transition-colors ${P.service.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:P.service.is_active?" Active":" Inactive"}),P.service.is_top_seller&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold bg-yellow-100 text-yellow-800",children:" Top Seller"})]})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>M(P.service.id,P.service.is_top_seller),disabled:E.isPending,className:"p-2 text-gray-600 hover:text-yellow-600 hover:bg-yellow-50 rounded-lg transition-colors",title:P.service.is_top_seller?"Remove from top sellers":"Mark as top seller",children:r.jsx("svg",{className:"w-5 h-5",fill:P.service.is_top_seller?"currentColor":"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z"})})}),r.jsx("button",{onClick:()=>D(P.service.id),className:"px-3 py-2 text-sm font-medium text-gray-700 hover:text-gray-900 hover:bg-gray-100 rounded-lg transition-colors",children:"Edit"})]})})]},P.service.id))})]})})})]}),c&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>d(!1)}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:r.jsxs("form",{onSubmit:O,children:[r.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",id:"modal-title",children:"Create New Service"}),r.jsx("button",{type:"button",onClick:()=>d(!1),className:"text-gray-400 hover:text-gray-500",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"service-category",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Category *"}),r.jsxs("select",{id:"service-category",required:!0,value:h.category_id,onChange:P=>f(V=>({...V,category_id:P.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select a category"}),v.map(P=>r.jsx("option",{value:P.id,children:P.name},P.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"service-name",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Service Name *"}),r.jsx("input",{id:"service-name",type:"text",required:!0,value:h.name,onChange:P=>f(V=>({...V,name:P.target.value})),placeholder:"e.g., Business Cards",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"service-slug",className:"block text-sm font-semibold text-gray-700 mb-1",children:"URL Slug *"}),r.jsx("input",{id:"service-slug",type:"text",required:!0,value:h.slug,onChange:P=>f(V=>({...V,slug:P.target.value})),placeholder:"business-cards",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from name, but you can customize"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"service-description",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{id:"service-description",rows:3,value:h.description,onChange:P=>f(V=>({...V,description:P.target.value})),placeholder:"Brief description of this service...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"slot-duration",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Booking Slot Duration (hours)"}),r.jsx("input",{id:"slot-duration",type:"number",min:"0.5",step:"0.5",value:h.slot_duration_hours,onChange:P=>f(V=>({...V,slot_duration_hours:parseFloat(P.target.value)})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{className:"space-y-3 pt-2",children:[r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:h.requires_booking,onChange:P=>f(V=>({...V,requires_booking:P.target.checked})),className:"w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Requires booking appointment"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:h.requires_proof,onChange:P=>f(V=>({...V,requires_proof:P.target.checked})),className:"w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Requires design proof"})]}),r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:h.is_top_seller,onChange:P=>f(V=>({...V,is_top_seller:P.target.checked})),className:"w-4 h-4 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsx("span",{className:"ml-2 text-sm text-gray-700",children:"Feature as top seller on homepage"})]})]})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>d(!1),className:"px-4 py-2 bg-white text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition-colors border border-gray-300",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:S.isPending,className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:S.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Service"})]})]})})]})}),m&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"category-modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity","aria-hidden":"true",onClick:()=>u(!1)}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:r.jsxs("form",{onSubmit:L,children:[r.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",id:"category-modal-title",children:"Create New Category"}),r.jsx("button",{type:"button",onClick:()=>u(!1),className:"text-gray-400 hover:text-gray-500",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category-name",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Category Name *"}),r.jsx("input",{id:"category-name",type:"text",required:!0,value:b.name,onChange:P=>g(V=>({...V,name:P.target.value})),placeholder:"e.g., Business Printing",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category-slug",className:"block text-sm font-semibold text-gray-700 mb-1",children:"URL Slug *"}),r.jsx("input",{id:"category-slug",type:"text",required:!0,value:b.slug,onChange:P=>g(V=>({...V,slug:P.target.value})),placeholder:"business-printing",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Auto-generated from name, but you can customize"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category-sort",className:"block text-sm font-semibold text-gray-700 mb-1",children:"Sort Order"}),r.jsx("input",{id:"category-sort",type:"number",min:"0",value:b.sort_order,onChange:P=>g(V=>({...V,sort_order:parseInt(P.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"Lower numbers appear first"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>u(!1),className:"px-4 py-2 bg-white text-gray-700 rounded-lg font-medium hover:bg-gray-100 transition-colors border border-gray-300",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:T.isPending,className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:T.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Category"})]})]})})]})})]})})},yN=()=>{const{id:e}=fr(),t=Le(),n=et(),s=ae(J=>J.authentication_state.auth_token);ae(J=>J.authentication_state.current_user);const a=ae(J=>J.show_toast),i=ae(J=>J.show_modal),o=ae(J=>J.close_modal),l="https://123project-build-a-production-ready-w.launchpulse.ai",c=e==="new",[d,m]=k.useState({category_id:"",name:"",slug:"",description:null,requires_booking:!1,requires_proof:!1,is_top_seller:!1,is_active:!0,slot_duration_hours:2}),[u,h]=k.useState({key:"",label:"",type:"TEXT",required:!1,choices:null,help_text:null,sort_order:0}),[f,b]=k.useState(""),[g,x]=k.useState(!1),[p,y]=k.useState(null),[v,N]=k.useState({service:{},option:{}}),{data:w}=pe({queryKey:["admin-service-categories"],queryFn:async()=>(await te.get(`${l}/api/admin/service-categories`,{headers:{Authorization:`Bearer ${s}`}})).data,staleTime:3e5}),j=w||[],{data:_,isLoading:S}=pe({queryKey:["admin-service",e],queryFn:async()=>{const X=(await te.get(`${l}/api/admin/services`,{headers:{Authorization:`Bearer ${s}`}})).data.find(se=>se.service.id===e);if(!X)throw new Error("Service not found");return{service:X.service,service_options:X.options||[]}},enabled:!c&&!!s,staleTime:6e4});k.useEffect(()=>{_!=null&&_.service&&!c&&m({category_id:_.service.category_id,name:_.service.name,slug:_.service.slug,description:_.service.description,requires_booking:_.service.requires_booking,requires_proof:_.service.requires_proof,is_top_seller:_.service.is_top_seller,is_active:_.service.is_active,slot_duration_hours:_.service.slot_duration_hours})},[_,c]);const T=(_==null?void 0:_.service_options)||[],A=ve({mutationFn:async J=>(await te.post(`${l}/api/admin/services`,J,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{a({type:"success",message:"Service created successfully",duration:5e3}),n.invalidateQueries({queryKey:["admin-services"]}),t("/admin/services")},onError:J=>{var X,se;a({type:"error",message:((se=(X=J.response)==null?void 0:X.data)==null?void 0:se.message)||"Failed to create service",duration:5e3})}}),E=ve({mutationFn:async J=>(await te.patch(`${l}/api/admin/services/${e}`,J,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{a({type:"success",message:"Service updated successfully",duration:5e3}),n.invalidateQueries({queryKey:["admin-service",e]}),n.invalidateQueries({queryKey:["admin-services"]})},onError:J=>{var X,se;a({type:"error",message:((se=(X=J.response)==null?void 0:X.data)==null?void 0:se.message)||"Failed to update service",duration:5e3})}}),R=ve({mutationFn:async J=>(await te.post(`${l}/api/admin/service-options`,J,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{a({type:"success",message:"Option added successfully",duration:3e3}),n.invalidateQueries({queryKey:["admin-service",e]}),D(),x(!1)},onError:J=>{var X,se;a({type:"error",message:((se=(X=J.response)==null?void 0:X.data)==null?void 0:se.message)||"Failed to add option",duration:5e3})}}),I=ve({mutationFn:async({option_id:J,data:X})=>(await te.patch(`${l}/api/admin/service-options/${J}`,X,{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{a({type:"success",message:"Option updated successfully",duration:3e3}),n.invalidateQueries({queryKey:["admin-service",e]})},onError:J=>{var X,se;a({type:"error",message:((se=(X=J.response)==null?void 0:X.data)==null?void 0:se.message)||"Failed to update option",duration:5e3})}}),O=ve({mutationFn:async J=>{await te.delete(`${l}/api/admin/service-options/${J}`,{headers:{Authorization:`Bearer ${s}`}})},onSuccess:()=>{a({type:"success",message:"Option deleted successfully",duration:3e3}),n.invalidateQueries({queryKey:["admin-service",e]}),o()},onError:J=>{var X,se;a({type:"error",message:((se=(X=J.response)==null?void 0:X.data)==null?void 0:se.message)||"Failed to delete option",duration:5e3})}}),L=J=>J.toLowerCase().replace(/[^a-z0-9\s-]/g,"").replace(/\s+/g,"-").replace(/-+/g,"-").trim(),F=()=>{const J={};return d.name.trim()||(J.name="Service name is required"),d.slug.trim()?/^[a-z0-9-]+$/.test(d.slug)||(J.slug="Slug must contain only lowercase letters, numbers, and hyphens"):J.slug="Slug is required",d.category_id||(J.category_id="Category is required"),d.slot_duration_hours<=0&&(J.slot_duration_hours="Slot duration must be positive"),N(X=>({...X,service:J})),Object.keys(J).length===0},M=()=>{const J={};if(u.key.trim()?/^[a-z_]+$/.test(u.key)||(J.key="Key must contain only lowercase letters and underscores"):J.key="Key is required",u.label.trim()||(J.label="Label is required"),u.type==="SELECT"&&!f.trim()&&(J.choices="Choices are required for SELECT type"),u.type==="SELECT"&&f.trim())try{const X=JSON.parse(f);Array.isArray(X)||(J.choices="Choices must be a JSON array")}catch{J.choices="Invalid JSON format"}return N(X=>({...X,option:J})),Object.keys(J).length===0},D=()=>{h({key:"",label:"",type:"TEXT",required:!1,choices:null,help_text:null,sort_order:0}),b(""),y(null),N(J=>({...J,option:{}}))},W=(J,X)=>{m(se=>({...se,[J]:X})),N(se=>({...se,service:{...se.service,[J]:void 0}}))},P=()=>{if(!d.slug&&d.name){const J=L(d.name);m(X=>({...X,slug:J}))}},V=async()=>{if(!F()){a({type:"error",message:"Please fix validation errors",duration:5e3});return}c?await A.mutateAsync(d):await E.mutateAsync({name:d.name,description:d.description,is_top_seller:d.is_top_seller,is_active:d.is_active})},K=async()=>{if(!M())return;if(!(_!=null&&_.service)){a({type:"error",message:"Service must be saved before adding options",duration:5e3});return}const J=T.length>0?Math.max(...T.map(X=>X.sort_order))+1:0;await R.mutateAsync({service_id:_.service.id,key:u.key,label:u.label,type:u.type,required:u.required,choices:u.type==="SELECT"?f:null,help_text:u.help_text||null,sort_order:J})},ne=(J,X)=>{i("confirmation",{title:"Delete Option",message:`Are you sure you want to delete "${X}"? This cannot be undone.`,confirm_text:"Delete",cancel_text:"Cancel",on_confirm:async()=>{await O.mutateAsync(J)}})},G=async J=>{await I.mutateAsync({option_id:J.id,data:{required:!J.required}})},oe=(J,X)=>{h(se=>({...se,[J]:X})),N(se=>({...se,option:{...se.option,[J]:void 0}}))},H=!c&&S,ee=A.isPending||E.isPending;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow border-b-2 border-black",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs("nav",{className:"text-sm text-gray-500 mb-2",children:[r.jsx(ie,{to:"/admin",className:"hover:text-gray-700",children:"Admin"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx(ie,{to:"/admin/services",className:"hover:text-gray-700",children:"Services"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx("span",{className:"text-gray-900",children:c?"New Service":"Edit Service"})]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:c?"Create New Service":`Edit: ${d.name||"Service"}`})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx(ie,{to:"/admin/services",className:"px-6 py-3 border-2 border-black text-black rounded-lg font-medium hover:bg-black hover:text-white transition-all duration-200",children:"Cancel"}),r.jsx("button",{onClick:V,disabled:ee,className:"px-6 py-3 bg-yellow-400 text-black rounded-lg font-medium hover:bg-yellow-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:ee?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):c?"Create Service":"Save Changes"})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:H?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 text-gray-500",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading service..."})]}):r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-8 py-6 border-b border-gray-200 bg-gray-50",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Basic Information"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Configure the service name, category, and core settings"})]}),r.jsxs("div",{className:"p-8 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"category_id",className:"block text-sm font-medium text-gray-900 mb-2",children:["Service Category ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("select",{id:"category_id",value:d.category_id,onChange:J=>W("category_id",J.target.value),disabled:!c,className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${v.service.category_id?"border-red-500":"border-gray-200 focus:border-yellow-400"} ${c?"":"bg-gray-100 cursor-not-allowed"}`,children:[r.jsx("option",{value:"",children:"Select a category"}),j.map(J=>r.jsx("option",{value:J.id,children:J.name},J.id))]}),v.service.category_id&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.service.category_id}),!c&&r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Category cannot be changed after creation"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-900 mb-2",children:["Service Name ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"name",type:"text",value:d.name,onChange:J=>W("name",J.target.value),onBlur:P,className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${v.service.name?"border-red-500":"border-gray-200 focus:border-yellow-400"}`,placeholder:"e.g., Business Cards"}),v.service.name&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.service.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"slug",className:"block text-sm font-medium text-gray-900 mb-2",children:["URL Slug ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"slug",type:"text",value:d.slug,onChange:J=>W("slug",J.target.value.toLowerCase()),disabled:!c,className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${v.service.slug?"border-red-500":"border-gray-200 focus:border-yellow-400"} ${c?"":"bg-gray-100 cursor-not-allowed"}`,placeholder:"e.g., business-cards"}),v.service.slug&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.service.slug}),!c&&r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Slug cannot be changed after creation"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"description",className:"block text-sm font-medium text-gray-900 mb-2",children:"Description"}),r.jsx("textarea",{id:"description",rows:4,value:d.description||"",onChange:J=>W("description",J.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 focus:border-yellow-400 resize-vertical",placeholder:"Detailed service description for customers"})]}),r.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:r.jsxs("div",{children:[r.jsx("label",{htmlFor:"slot_duration_hours",className:"block text-sm font-medium text-gray-900 mb-2",children:"Booking Slot Duration (hours)"}),r.jsx("input",{id:"slot_duration_hours",type:"number",min:"0.5",step:"0.5",value:d.slot_duration_hours,onChange:J=>W("slot_duration_hours",parseFloat(J.target.value)),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-100 ${v.service.slot_duration_hours?"border-red-500":"border-gray-200 focus:border-yellow-400"}`}),v.service.slot_duration_hours&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:v.service.slot_duration_hours})]})}),r.jsxs("div",{className:"space-y-4 pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Requires Booking"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Customer must book appointment for this service"})]}),r.jsx("button",{type:"button",onClick:()=>W("requires_booking",!d.requires_booking),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.requires_booking?"bg-yellow-400":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.requires_booking?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Requires Proof"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Design proof needed before production"})]}),r.jsx("button",{type:"button",onClick:()=>W("requires_proof",!d.requires_proof),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.requires_proof?"bg-yellow-400":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.requires_proof?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Top Seller"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Display on homepage as featured service"})]}),r.jsx("button",{type:"button",onClick:()=>W("is_top_seller",!d.is_top_seller),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.is_top_seller?"bg-yellow-400":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.is_top_seller?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("label",{className:"text-sm font-medium text-gray-900",children:"Active"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Service available for quote requests"})]}),r.jsx("button",{type:"button",onClick:()=>W("is_active",!d.is_active),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${d.is_active?"bg-yellow-400":"bg-gray-300"}`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${d.is_active?"translate-x-6":"translate-x-1"}`})})]})]})]})]}),!c&&r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-8 py-6 border-b border-gray-200 bg-gray-50",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Configuration Options"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Define form fields that customers will fill in the quote wizard"})]}),r.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-yellow-400 text-black rounded-lg font-medium hover:bg-yellow-500 transition-all duration-200",children:"+ Add Option"})]})}),r.jsxs("div",{className:"p-8",children:[T.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No configuration options"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by adding your first option field."}),r.jsx("button",{onClick:()=>x(!0),className:"mt-4 px-4 py-2 bg-yellow-400 text-black rounded-lg font-medium hover:bg-yellow-500 transition-all duration-200",children:"Add First Option"})]}):r.jsx("div",{className:"space-y-3",children:T.sort((J,X)=>J.sort_order-X.sort_order).map(J=>r.jsxs("div",{className:"flex items-center justify-between p-4 border-2 border-gray-200 rounded-lg hover:border-yellow-400 transition-all duration-200",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("h3",{className:"text-base font-semibold text-gray-900",children:J.label}),r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-700 rounded",children:J.type}),J.required&&r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-red-100 text-red-700 rounded",children:"REQUIRED"})]}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:["Key: ",J.key]}),J.help_text&&r.jsx("p",{className:"text-sm text-gray-500 mt-1",children:J.help_text}),J.type==="SELECT"&&J.choices&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-xs text-gray-500",children:"Choices:"}),r.jsx("div",{className:"flex flex-wrap gap-2 mt-1",children:JSON.parse(J.choices).map((X,se)=>r.jsx("span",{className:"px-2 py-1 text-xs bg-blue-50 text-blue-700 rounded",children:X},se))})]})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>G(J),disabled:I.isPending,className:"px-3 py-2 text-sm border-2 border-gray-300 text-gray-700 rounded-lg hover:border-gray-400 transition-all duration-200 disabled:opacity-50",title:J.required?"Make optional":"Make required",children:J.required?"Required":"Optional"}),r.jsx("button",{onClick:()=>ne(J.id,J.label),disabled:O.isPending,className:"p-2 text-red-600 hover:bg-red-50 rounded-lg transition-all duration-200 disabled:opacity-50",title:"Delete option",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]},J.id))}),g&&r.jsxs("div",{className:"mt-6 p-6 border-2 border-yellow-400 rounded-lg bg-yellow-50",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Add New Option"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"option_key",className:"block text-sm font-medium text-gray-900 mb-2",children:["Key ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"option_key",type:"text",value:u.key,onChange:J=>oe("key",J.target.value.toLowerCase()),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-200 ${v.option.key?"border-red-500":"border-gray-200 focus:border-yellow-400"}`,placeholder:"e.g., quantity"}),v.option.key&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.option.key}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lowercase letters and underscores only"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"option_label",className:"block text-sm font-medium text-gray-900 mb-2",children:["Label ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"option_label",type:"text",value:u.label,onChange:J=>oe("label",J.target.value),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-200 ${v.option.label?"border-red-500":"border-gray-200 focus:border-yellow-400"}`,placeholder:"e.g., Quantity"}),v.option.label&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.option.label})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"option_type",className:"block text-sm font-medium text-gray-900 mb-2",children:"Field Type"}),r.jsxs("select",{id:"option_type",value:u.type,onChange:J=>oe("type",J.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-200 focus:border-yellow-400",children:[r.jsx("option",{value:"TEXT",children:"Text Input"}),r.jsx("option",{value:"SELECT",children:"Dropdown Select"}),r.jsx("option",{value:"CHECKBOX",children:"Checkbox"}),r.jsx("option",{value:"NUMBER",children:"Number Input"})]})]}),r.jsx("div",{className:"flex items-center",children:r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer",children:[r.jsx("input",{type:"checkbox",checked:u.required,onChange:J=>oe("required",J.target.checked),className:"w-5 h-5 text-yellow-400 border-2 border-gray-300 rounded focus:ring-yellow-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:"Required Field"})]})})]}),u.type==="SELECT"&&r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"option_choices",className:"block text-sm font-medium text-gray-900 mb-2",children:["Choices (JSON Array) ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("textarea",{id:"option_choices",rows:3,value:f,onChange:J=>b(J.target.value),className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-200 resize-vertical font-mono text-sm ${v.option.choices?"border-red-500":"border-gray-200 focus:border-yellow-400"}`,placeholder:'["Option 1", "Option 2", "Option 3"]'}),v.option.choices&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:v.option.choices}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter a valid JSON array of strings"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"option_help_text",className:"block text-sm font-medium text-gray-900 mb-2",children:"Help Text (Optional)"}),r.jsx("input",{id:"option_help_text",type:"text",value:u.help_text||"",onChange:J=>oe("help_text",J.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-yellow-200 focus:border-yellow-400",placeholder:"Additional guidance for customers"})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[r.jsx("button",{onClick:()=>{x(!1),D()},className:"px-4 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200",children:"Cancel"}),r.jsx("button",{onClick:K,disabled:R.isPending,className:"px-4 py-2 bg-yellow-400 text-black rounded-lg font-medium hover:bg-yellow-500 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:R.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Adding..."]}):"Add Option"})]})]})]})]})]}),r.jsx("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-start space-x-3",children:[r.jsx("svg",{className:"w-6 h-6 text-blue-600 mt-0.5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-sm font-semibold text-blue-900",children:"Configuration Tips"}),r.jsxs("ul",{className:"mt-2 text-sm text-blue-800 space-y-1 list-disc list-inside",children:[r.jsx("li",{children:"Use descriptive labels that customers will understand"}),r.jsx("li",{children:"Add help text to clarify complex options"}),r.jsx("li",{children:"Mark critical fields as required to ensure complete quotes"}),r.jsx("li",{children:"For SELECT type, provide clear choice options"}),r.jsx("li",{children:"Configuration options appear in Step 2 of the quote wizard"})]})]})]})})]})})]})})},GF=async(e,t,n)=>{const s={page:n.toString()};return t.status&&(s.status=t.status),t.assigned_to&&(s.assigned_to=t.assigned_to),t.payment_status&&(s.payment_status=t.payment_status),t.customer_search&&(s.customer=t.customer_search),(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/orders",{headers:{Authorization:`Bearer ${e}`},params:s})).data},QF=async e=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/users",{headers:{Authorization:`Bearer ${e}`},params:{role:"STAFF"}})).data.users.map(n=>{var s;return{id:n.user.id,name:n.user.name,department:((s=n.profile)==null?void 0:s.department)||null}}),bN=async(e,t,n)=>{await te.patch(`https://123project-build-a-production-ready-w.launchpulse.ai/api/orders/${t}`,{assigned_staff_id:n},{headers:{Authorization:`Bearer ${e}`}})},YF=()=>{Le();const[e,t]=Ye(),n=et(),s=ae(O=>O.authentication_state.auth_token);ae(O=>O.authentication_state.current_user);const a=ae(O=>O.show_toast),[i,o]=k.useState({status:e.get("status")||null,assigned_to:e.get("assigned_to")||null,payment_status:e.get("payment_status")||null,customer_search:e.get("customer")||null}),[l,c]=k.useState(parseInt(e.get("page")||"1",10)),[d,m]=k.useState([]),[u,h]=k.useState(!1);k.useEffect(()=>{const O={};i.status&&(O.status=i.status),i.assigned_to&&(O.assigned_to=i.assigned_to),i.payment_status&&(O.payment_status=i.payment_status),i.customer_search&&(O.customer=i.customer_search),l>1&&(O.page=l.toString()),t(O)},[i,l,t]);const{data:f,isLoading:b,error:g}=pe({queryKey:["admin-orders",i,l],queryFn:()=>GF(s,i,l),enabled:!!s,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:x=[]}=pe({queryKey:["staff-members"],queryFn:()=>QF(s),enabled:!!s,staleTime:3e5,refetchOnWindowFocus:!1}),p=ve({mutationFn:({orderId:O,staffId:L})=>bN(s,O,L),onSuccess:()=>{n.invalidateQueries({queryKey:["admin-orders"]}),a({type:"success",message:"Staff assigned successfully",duration:3e3})},onError:O=>{var L,F;a({type:"error",message:((F=(L=O.response)==null?void 0:L.data)==null?void 0:F.message)||"Assignment failed",duration:5e3})}}),y=k.useMemo(()=>{if(!(f!=null&&f.orders))return{total_orders:0,active_orders:0,awaiting_approval:0,overdue_count:0,pending_payments:0};const O=f.orders,L=["SCHEDULED","IN_PRODUCTION","PROOF_SENT","AWAITING_APPROVAL","READY_FOR_PICKUP"],F=new Date;return{total_orders:f.total||O.length,active_orders:O.filter(M=>L.includes(M.order.status)).length,awaiting_approval:O.filter(M=>M.order.status==="AWAITING_APPROVAL").length,overdue_count:O.filter(M=>M.order.due_at&&new Date(M.order.due_at)<F&&M.order.status!=="COMPLETED").length,pending_payments:O.filter(M=>{var D,W;return!((D=M.payment_summary)!=null&&D.deposit_paid)||(((W=M.payment_summary)==null?void 0:W.balance_due)??0)>0}).length}},[f]),v=(O,L)=>{o(F=>({...F,[O]:L})),c(1),m([])},N=()=>{o({status:null,assigned_to:null,payment_status:null,customer_search:null}),c(1),m([])},w=O=>{c(O),window.scrollTo(0,0)},j=()=>{f!=null&&f.orders&&(d.length===f.orders.length?m([]):m(f.orders.map(O=>O.order.id)))},_=O=>{m(L=>L.includes(O)?L.filter(F=>F!==O):[...L,O])},S=(O,L)=>{p.mutate({orderId:O,staffId:L||null})},T=()=>{if(!(f!=null&&f.orders))return;const O=["Order ID","Customer Name","Customer Email","Service","Tier","Status","Due Date","Total Amount","Deposit Paid","Balance Due","Assigned Staff","Created At"],L=f.orders.map(P=>{var V,K,ne;return[P.order.id,P.customer.name,P.customer.email,P.service.name,P.tier.name,P.order.status,P.order.due_at||"N/A",`${Number(P.order.total_amount||0).toFixed(2)}`,(V=P.payment_summary)!=null&&V.deposit_paid?"Yes":"No",`${Number(((K=P.payment_summary)==null?void 0:K.balance_due)||0).toFixed(2)}`,((ne=P.assigned_staff)==null?void 0:ne.name)||"Unassigned",new Date(P.order.created_at).toLocaleDateString()]}),F=[O.join(","),...L.map(P=>P.map(V=>`"${V}"`).join(","))].join(`
`),M=new Blob([F],{type:"text/csv"}),D=window.URL.createObjectURL(M),W=document.createElement("a");W.href=D,W.download=`orders-export-${new Date().toISOString().split("T")[0]}.csv`,W.click(),window.URL.revokeObjectURL(D),a({type:"success",message:"Orders exported successfully",duration:3e3})},A=async O=>{var L,F;if(d.length===0){a({type:"warning",message:"No orders selected",duration:3e3});return}h(!0);try{const M=await Promise.allSettled(d.map(P=>bN(s,P,O))),D=M.filter(P=>P.status==="fulfilled").length,W=M.filter(P=>P.status==="rejected").length;n.invalidateQueries({queryKey:["admin-orders"]}),m([]),W===0?a({type:"success",message:`${D} orders assigned successfully`,duration:3e3}):D>0?a({type:"info",message:`${D} orders assigned, ${W} failed`,duration:5e3}):a({type:"error",message:"All bulk assignments failed",duration:5e3})}catch(M){a({type:"error",message:((F=(L=M.response)==null?void 0:L.data)==null?void 0:F.message)||"Bulk assignment failed",duration:5e3})}finally{h(!1)}},E=O=>({QUOTE_REQUESTED:"bg-gray-100 text-gray-800",APPROVED:"bg-blue-100 text-blue-800",IN_PRODUCTION:"bg-yellow-100 text-yellow-800",PROOF_SENT:"bg-purple-100 text-purple-800",AWAITING_APPROVAL:"bg-orange-100 text-orange-800",READY_FOR_PICKUP:"bg-green-100 text-green-800",COMPLETED:"bg-green-600 text-white",CANCELLED:"bg-red-100 text-red-800"})[O]||"bg-gray-100 text-gray-800",R=O=>O.replace(/_/g," ").replace(/\b\w/g,L=>L.toUpperCase()),I=O=>!O.due_at||O.status==="COMPLETED"?!1:new Date(O.due_at)<new Date;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Orders Management"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage all orders across the business"})]}),r.jsx(ie,{to:"/admin",className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:" Back to Dashboard"})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-5 gap-4",children:[r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Orders"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:y.total_orders})]}),r.jsx("div",{className:"p-3 bg-blue-100 rounded-full",children:r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Active Orders"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:y.active_orders})]}),r.jsx("div",{className:"p-3 bg-yellow-100 rounded-full",children:r.jsx("svg",{className:"w-6 h-6 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Awaiting Approval"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:y.awaiting_approval})]}),r.jsx("div",{className:"p-3 bg-orange-100 rounded-full",children:r.jsxs("svg",{className:"w-6 h-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-red-600",children:y.overdue_count})]}),r.jsx("div",{className:"p-3 bg-red-100 rounded-full",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Payments"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:y.pending_payments})]}),r.jsx("div",{className:"p-3 bg-purple-100 rounded-full",children:r.jsx("svg",{className:"w-6 h-6 text-purple-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17 9V7a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-6a2 2 0 00-2-2H9a2 2 0 00-2 2v6a2 2 0 002 2zm7-5a2 2 0 11-4 0 2 2 0 014 0z"})})})]})})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-6",children:r.jsxs("div",{className:"bg-white rounded-lg shadow p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"status-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Status"}),r.jsxs("select",{id:"status-filter",value:i.status||"",onChange:O=>v("status",O.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Statuses"}),r.jsx("option",{value:"QUOTE_REQUESTED",children:"Quote Requested"}),r.jsx("option",{value:"APPROVED",children:"Approved"}),r.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),r.jsx("option",{value:"PROOF_SENT",children:"Proof Sent"}),r.jsx("option",{value:"AWAITING_APPROVAL",children:"Awaiting Approval"}),r.jsx("option",{value:"READY_FOR_PICKUP",children:"Ready for Pickup"}),r.jsx("option",{value:"COMPLETED",children:"Completed"}),r.jsx("option",{value:"CANCELLED",children:"Cancelled"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"assigned-to-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned To"}),r.jsxs("select",{id:"assigned-to-filter",value:i.assigned_to||"",onChange:O=>v("assigned_to",O.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Staff"}),r.jsx("option",{value:"unassigned",children:"Unassigned"}),x.map(O=>r.jsxs("option",{value:O.id,children:[O.name," ",O.department?`(${O.department})`:""]},O.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"payment-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Status"}),r.jsxs("select",{id:"payment-filter",value:i.payment_status||"",onChange:O=>v("payment_status",O.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Payments"}),r.jsx("option",{value:"deposit_pending",children:"Deposit Pending"}),r.jsx("option",{value:"balance_due",children:"Balance Due"}),r.jsx("option",{value:"fully_paid",children:"Fully Paid"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"customer-search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Customer Search"}),r.jsx("input",{id:"customer-search",type:"text",value:i.customer_search||"",onChange:O=>v("customer_search",O.target.value||null),placeholder:"Name or email...",className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),r.jsx("div",{className:"mt-4 flex justify-end",children:r.jsx("button",{onClick:N,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors",children:"Reset Filters"})})]})}),d.length>0&&r.jsx("div",{className:"sticky top-0 z-30 max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-6",children:r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4 flex flex-col sm:flex-row items-start sm:items-center justify-between gap-3 shadow-lg",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("span",{className:"text-sm font-medium text-blue-900",children:[d.length," order",d.length!==1?"s":""," selected"]}),r.jsx("button",{onClick:()=>m([]),className:"text-sm text-blue-700 hover:text-blue-900 underline",children:"Clear selection"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:T,disabled:u,className:"px-4 py-2 text-sm font-medium text-gray-700 bg-white border border-gray-300 rounded-lg hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Export Selected"}),r.jsxs("select",{onChange:O=>{O.target.value&&(A(O.target.value),O.target.value="")},disabled:u,className:"px-4 py-2 text-sm font-medium bg-white border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[r.jsx("option",{value:"",children:"Assign to Staff..."}),x.map(O=>r.jsx("option",{value:O.id,children:O.name},O.id))]})]})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-8",children:r.jsxs("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:[b&&r.jsxs("div",{className:"text-center py-12",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 mx-auto text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"mt-3 text-sm text-gray-600",children:"Loading orders..."})]}),g&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-12 h-12 rounded-full bg-red-100 mb-4",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("p",{className:"text-sm text-gray-600",children:"Error loading orders"}),r.jsx("button",{onClick:()=>n.invalidateQueries({queryKey:["admin-orders"]}),className:"mt-4 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]}),!b&&!g&&(!(f!=null&&f.orders)||f.orders.length===0)&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No orders found"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Try adjusting your filters or create a new order."}),r.jsx("div",{className:"mt-6",children:r.jsx("button",{onClick:N,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors",children:"Clear Filters"})})]}),!b&&!g&&(f==null?void 0:f.orders)&&f.orders.length>0&&r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"w-12 px-6 py-3",children:r.jsx("input",{type:"checkbox",checked:d.length===f.orders.length,onChange:j,className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Payment"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Assigned To"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:f.orders.map(O=>{var L,F,M,D;return r.jsxs("tr",{className:`hover:bg-gray-50 transition-colors ${I(O.order)?"bg-red-50":""}`,children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("input",{type:"checkbox",checked:d.includes(O.order.id),onChange:()=>_(O.order.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",O.order.id.slice(0,8)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O.order.order_type==="PRODUCT"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:O.order.order_type==="PRODUCT"?"Product":"Service"})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:O.customer.name}),r.jsx("div",{className:"text-sm text-gray-500",children:O.customer.email})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:O.service.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-medium bg-gray-100 text-gray-800 rounded-full",children:O.tier.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${E(O.order.status)}`,children:R(O.order.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:O.order.due_at?r.jsxs("div",{className:"text-sm",children:[r.jsx("div",{className:I(O.order)?"text-red-600 font-medium":"text-gray-900",children:new Date(O.order.due_at).toLocaleDateString()}),I(O.order)&&r.jsx("div",{className:"text-xs text-red-600",children:"Overdue"})]}):r.jsx("span",{className:"text-sm text-gray-500",children:"-"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["",Number(O.order.total_amount||0).toFixed(2)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-xs space-y-1",children:[r.jsxs("div",{className:(L=O.payment_summary)!=null&&L.deposit_paid?"text-green-600":"text-orange-600",children:["Deposit: ",(F=O.payment_summary)!=null&&F.deposit_paid?" Paid":" Pending"]}),r.jsxs("div",{className:Number(((M=O.payment_summary)==null?void 0:M.balance_due)||0)>0?"text-orange-600":"text-green-600",children:["Balance: ",Number(((D=O.payment_summary)==null?void 0:D.balance_due)||0).toFixed(2)]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("select",{value:O.order.assigned_staff_id||"",onChange:W=>S(O.order.id,W.target.value),disabled:p.isPending,className:"text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[r.jsx("option",{value:"",children:"Unassigned"}),x.map(W=>r.jsx("option",{value:W.id,children:W.name},W.id))]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx(ie,{to:`/admin/orders/${O.order.id}`,className:"text-blue-600 hover:text-blue-900 transition-colors",children:"View"})})]},O.order.id)})})]})}),r.jsx("div",{className:"lg:hidden divide-y divide-gray-200",children:f.orders.map(O=>{var L,F,M,D;return r.jsxs("div",{className:`p-4 ${I(O.order)?"bg-red-50":"bg-white"}`,children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",checked:d.includes(O.order.id),onChange:()=>_(O.order.id),className:"w-4 h-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",O.order.id.slice(0,8)]}),r.jsx("span",{className:`inline-block mt-1 px-2 py-1 text-xs font-medium rounded-full ${E(O.order.status)}`,children:R(O.order.status)})]})]}),r.jsx(ie,{to:`/admin/orders/${O.order.id}`,className:"text-blue-600 hover:text-blue-900 text-sm font-medium",children:"View "})]}),r.jsxs("div",{className:"space-y-2 text-sm",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Type:"}),r.jsx("span",{className:`px-2 py-1 text-xs font-medium rounded-full ${O.order.order_type==="PRODUCT"?"bg-purple-100 text-purple-800":"bg-blue-100 text-blue-800"}`,children:O.order.order_type==="PRODUCT"?"Product":"Service"})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Customer:"}),r.jsx("span",{className:"font-medium text-gray-900",children:O.customer.name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Service:"}),r.jsx("span",{className:"text-gray-900",children:O.service.name})]}),O.order.order_type!=="PRODUCT"&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tier:"}),r.jsx("span",{className:"px-2 py-1 text-xs bg-gray-100 text-gray-800 rounded-full",children:O.tier.name})]}),O.order.due_at&&r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Due:"}),r.jsxs("span",{className:I(O.order)?"text-red-600 font-medium":"text-gray-900",children:[new Date(O.order.due_at).toLocaleDateString(),I(O.order)&&" (Overdue)"]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Total:"}),r.jsxs("span",{className:"font-medium text-gray-900",children:["",Number(O.order.total_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Payment:"}),r.jsxs("div",{className:"text-right",children:[r.jsxs("div",{className:`text-xs ${(L=O.payment_summary)!=null&&L.deposit_paid?"text-green-600":"text-orange-600"}`,children:["Deposit: ",(F=O.payment_summary)!=null&&F.deposit_paid?"":""]}),r.jsxs("div",{className:`text-xs ${Number(((M=O.payment_summary)==null?void 0:M.balance_due)||0)>0?"text-orange-600":"text-green-600"}`,children:["Balance: ",Number(((D=O.payment_summary)==null?void 0:D.balance_due)||0).toFixed(2)]})]})]}),r.jsxs("div",{className:"pt-2 border-t border-gray-200",children:[r.jsx("label",{className:"block text-xs text-gray-600 mb-1",children:"Assigned To:"}),r.jsxs("select",{value:O.order.assigned_staff_id||"",onChange:W=>S(O.order.id,W.target.value),disabled:p.isPending,className:"w-full text-sm border border-gray-300 rounded px-2 py-1 focus:outline-none focus:ring-2 focus:ring-blue-500 disabled:opacity-50",children:[r.jsx("option",{value:"",children:"Unassigned"}),x.map(W=>r.jsx("option",{value:W.id,children:W.name},W.id))]})]})]})]},O.order.id)})}),f&&f.total>20&&r.jsx("div",{className:"bg-white px-4 py-3 border-t border-gray-200 sm:px-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[r.jsx("button",{onClick:()=>w(l-1),disabled:l===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsx("button",{onClick:()=>w(l+1),disabled:l>=Math.ceil(f.total/20),className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),r.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(l-1)*20+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(l*20,f.total)})," ","of"," ",r.jsx("span",{className:"font-medium",children:f.total})," results"]})}),r.jsx("div",{children:r.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px",children:[r.jsxs("button",{onClick:()=>w(l-1),disabled:l===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{className:"sr-only",children:"Previous"}),r.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z",clipRule:"evenodd"})})]}),Array.from({length:Math.ceil(f.total/20)},(O,L)=>L+1).filter(O=>O===1||O===Math.ceil(f.total/20)||Math.abs(O-l)<=2).map(O=>r.jsx("button",{onClick:()=>w(O),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${O===l?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:O},O)),r.jsxs("button",{onClick:()=>w(l+1),disabled:l>=Math.ceil(f.total/20),className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx("span",{className:"sr-only",children:"Next"}),r.jsx("svg",{className:"h-5 w-5",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})]})]})})]})]})})]})]})})]})})},XF=()=>{var he,le,be,z,B,re;const{id:e}=fr();Le();const t=et(),n=ae(Q=>Q.authentication_state.auth_token),s=ae(Q=>Q.authentication_state.current_user),[a,i]=k.useState({amount:null,method:"CASH",transaction_ref:"",notes:""}),[o,l]=k.useState({assigned_staff_id:null}),[c,d]=k.useState({new_status:"",notes:""}),[m,u]=k.useState(""),[h,f]=k.useState(!1),[b,g]=k.useState(!1),[x,p]=k.useState(!1),[y,v]=k.useState(!1),[N,w]=k.useState(null),{data:j,isLoading:_,error:S,refetch:T}=pe({queryKey:["admin_order_detail",e],queryFn:async()=>(await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/orders/${e}`,{headers:{Authorization:`Bearer ${n}`}})).data,enabled:!!e&&!!n,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:A}=pe({queryKey:["staff_members"],queryFn:async()=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/users?role=STAFF",{headers:{Authorization:`Bearer ${n}`}})).data,enabled:!!n,staleTime:3e5}),{data:E}=pe({queryKey:["customer_profile",(he=j==null?void 0:j.order)==null?void 0:he.customer_id],queryFn:async()=>{var me;return(await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/users/${(me=j==null?void 0:j.order)==null?void 0:me.customer_id}`,{headers:{Authorization:`Bearer ${n}`}})).data||null},enabled:!!((le=j==null?void 0:j.order)!=null&&le.customer_id)&&!!n,staleTime:6e4}),{data:R,refetch:I}=pe({queryKey:["order_messages",(be=j==null?void 0:j.message_thread)==null?void 0:be.id],queryFn:async()=>{var me;return(me=j==null?void 0:j.message_thread)!=null&&me.id?(await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/message-threads/${j.message_thread.id}/messages`,{headers:{Authorization:`Bearer ${n}`}})).data:[]},enabled:!!((z=j==null?void 0:j.message_thread)!=null&&z.id)&&!!n,staleTime:3e4,refetchInterval:3e4}),O=ve({mutationFn:async Q=>(await te.post(`https://123project-build-a-production-ready-w.launchpulse.ai/api/orders/${e}/payments`,Q,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{t.invalidateQueries({queryKey:["admin_order_detail",e]}),f(!1),i({amount:null,method:"CASH",transaction_ref:"",notes:""}),w({type:"success",message:"Payment recorded successfully"}),setTimeout(()=>w(null),5e3)},onError:Q=>{var me,Pe;w({type:"error",message:((Pe=(me=Q.response)==null?void 0:me.data)==null?void 0:Pe.message)||"Failed to record payment"}),setTimeout(()=>w(null),5e3)}}),L=ve({mutationFn:async Q=>(await te.patch(`https://123project-build-a-production-ready-w.launchpulse.ai/api/orders/${e}`,Q,{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{t.invalidateQueries({queryKey:["admin_order_detail",e]}),p(!1),d({new_status:"",notes:""}),w({type:"success",message:"Order status updated successfully"}),setTimeout(()=>w(null),5e3)},onError:Q=>{var me,Pe;w({type:"error",message:((Pe=(me=Q.response)==null?void 0:me.data)==null?void 0:Pe.message)||"Failed to update status"}),setTimeout(()=>w(null),5e3)}}),F=ve({mutationFn:async Q=>(await te.patch(`https://123project-build-a-production-ready-w.launchpulse.ai/api/orders/${e}`,{assigned_staff_id:Q},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{t.invalidateQueries({queryKey:["admin_order_detail",e]}),w({type:"success",message:"Staff assigned successfully"}),setTimeout(()=>w(null),5e3)},onError:Q=>{var me,Pe;w({type:"error",message:((Pe=(me=Q.response)==null?void 0:me.data)==null?void 0:Pe.message)||"Failed to assign staff"}),setTimeout(()=>w(null),5e3)}}),M=ve({mutationFn:async Q=>{var Pe;if(!((Pe=j==null?void 0:j.message_thread)!=null&&Pe.id))throw new Error("No message thread");return(await te.post(`https://123project-build-a-production-ready-w.launchpulse.ai/api/message-threads/${j.message_thread.id}/messages`,{body:Q},{headers:{Authorization:`Bearer ${n}`,"Content-Type":"application/json"}})).data},onSuccess:()=>{I(),u(""),v(!1)},onError:Q=>{var me,Pe;v(!1),w({type:"error",message:((Pe=(me=Q.response)==null?void 0:me.data)==null?void 0:Pe.message)||"Failed to send message"}),setTimeout(()=>w(null),5e3)}}),D=k.useMemo(()=>{if(!(j!=null&&j.order)||!(j!=null&&j.payments))return{total_paid:0,balance_due:0,deposit_paid:!1};const Q=j.payments.filter(at=>at.status==="COMPLETED").reduce((at,xr)=>at+Number(xr.amount||0),0),me=Number(j.order.total_amount||0)-Q,Pe=Q>=Number(j.order.deposit_amount||0);return{total_paid:Q,balance_due:me,deposit_paid:Pe}},[j==null?void 0:j.order,j==null?void 0:j.payments]);k.useEffect(()=>{j!=null&&j.order&&D.balance_due>0&&!a.amount&&i(Q=>({...Q,amount:D.balance_due}))},[j==null?void 0:j.order,D.balance_due]),k.useEffect(()=>{var Q;(Q=j==null?void 0:j.order)!=null&&Q.assigned_staff_id&&!o.assigned_staff_id&&l({assigned_staff_id:j.order.assigned_staff_id})},[(B=j==null?void 0:j.order)==null?void 0:B.assigned_staff_id]);const W=()=>{if(!a.amount||a.amount<=0){w({type:"error",message:"Please enter a valid payment amount"}),setTimeout(()=>w(null),5e3);return}O.mutate({amount:a.amount,method:a.method,transaction_ref:a.transaction_ref})},P=()=>{if(!c.new_status){w({type:"error",message:"Please select a new status"}),setTimeout(()=>w(null),5e3);return}L.mutate({status:c.new_status,notes:c.notes})},V=Q=>{l({assigned_staff_id:Q}),F.mutate(Q)},K=()=>{L.mutate({status:"CANCELLED",notes:"Order cancelled by admin"},{onSuccess:()=>{g(!1),w({type:"success",message:"Order cancelled successfully"}),setTimeout(()=>w(null),5e3)}})},ne=()=>{if(!m.trim()||m.length>1e3){w({type:"error",message:"Message must be between 1 and 1000 characters"}),setTimeout(()=>w(null),5e3);return}v(!0),M.mutate(m)},G=Q=>({QUOTE_REQUESTED:"bg-gray-100 text-gray-800",APPROVED:"bg-blue-100 text-blue-800",IN_PRODUCTION:"bg-purple-100 text-purple-800",PROOF_SENT:"bg-yellow-100 text-yellow-800",AWAITING_APPROVAL:"bg-orange-100 text-orange-800",READY_FOR_PICKUP:"bg-green-100 text-green-800",COMPLETED:"bg-green-600 text-white",CANCELLED:"bg-red-100 text-red-800"})[Q]||"bg-gray-100 text-gray-800",oe=Q=>Q?new Date(Q).toLocaleString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A";if(S)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center px-4",children:r.jsxs("div",{className:"max-w-md w-full bg-white rounded-lg shadow-lg p-8 text-center",children:[r.jsx("div",{className:"text-red-600 mb-4",children:r.jsx("svg",{className:"w-16 h-16 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Order Not Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The order you're looking for doesn't exist or you don't have permission to view it."}),r.jsx(ie,{to:"/admin/orders",className:"inline-block bg-blue-600 text-white px-6 py-3 rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Back to Orders List"})]})})});if(_)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-64 bg-gray-200 rounded"}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsx("div",{className:"h-96 bg-gray-200 rounded"}),r.jsx("div",{className:"h-96 bg-gray-200 rounded"})]})]})})})});const{order:H,quote:ee,service:J,tier:X,booking:se,proof_versions:$,payments:C,message_thread:U}=j||{};if(!H)return null;const q=(E==null?void 0:E.user)||null,de=(E==null?void 0:E.profile)||null;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50 py-8 px-4 sm:px-6 lg:px-8",children:[N&&r.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${N.type==="success"?"bg-green-600 text-white":"bg-red-600 text-white"}`,children:r.jsxs("div",{className:"flex items-center space-x-3",children:[N.type==="success"?r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}):r.jsx("svg",{className:"w-5 h-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})}),r.jsx("span",{children:N.message})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto",children:[r.jsx("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:r.jsxs("ol",{className:"flex items-center space-x-2 text-sm",children:[r.jsx("li",{children:r.jsx(ie,{to:"/admin",className:"text-gray-500 hover:text-gray-700",children:"Dashboard"})}),r.jsx("li",{children:r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),r.jsx("li",{children:r.jsx(ie,{to:"/admin/orders",className:"text-gray-500 hover:text-gray-700",children:"Orders"})}),r.jsx("li",{children:r.jsx("svg",{className:"w-4 h-4 text-gray-400",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})})}),r.jsx("li",{children:r.jsxs("span",{className:"text-gray-900 font-medium",children:["Order #",H.id.slice(0,8)]})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 mb-6",children:r.jsxs("div",{className:"flex flex-col lg:flex-row lg:items-center lg:justify-between",children:[r.jsxs("div",{children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900 mb-2",children:["Order #",H.id.slice(0,8).toUpperCase()]}),r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${G(H.status)}`,children:H.status.replace(/_/g," ")}),(se==null?void 0:se.is_emergency)&&r.jsx("span",{className:"px-3 py-1 bg-yellow-100 text-yellow-800 rounded-full text-xs font-semibold",children:" Emergency Booking"})]})]}),r.jsxs("div",{className:"mt-4 lg:mt-0 flex flex-wrap gap-3",children:[r.jsx("button",{onClick:()=>p(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Update Status"}),r.jsx("button",{onClick:()=>f(!0),disabled:D.balance_due<=0,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Record Payment"}),r.jsx("button",{onClick:()=>g(!0),disabled:H.status==="CANCELLED"||H.status==="COMPLETED",className:"px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Cancel Order"})]})]})}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Order Details"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Service"}),r.jsx("p",{className:"font-semibold text-gray-900",children:(J==null?void 0:J.name)||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tier"}),r.jsx("p",{className:"font-semibold text-gray-900",children:(X==null?void 0:X.name)||"N/A"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Created"}),r.jsx("p",{className:"font-semibold text-gray-900",children:oe(H.created_at)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Due Date"}),r.jsx("p",{className:`font-semibold ${H.due_at&&new Date(H.due_at)<new Date?"text-red-600":"text-gray-900"}`,children:oe(H.due_at)})]})]}),se&&r.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Booking Details"}),r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[r.jsxs("p",{className:"text-sm text-gray-900",children:[r.jsx("strong",{children:"Date:"})," ",oe(se.start_at)]}),r.jsxs("p",{className:"text-sm text-gray-900",children:[r.jsx("strong",{children:"Time:"})," ",new Date(se.start_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})," ","-"," ",new Date(se.end_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})]}),r.jsxs("p",{className:"text-sm text-gray-900",children:[r.jsx("strong",{children:"Status:"})," ",se.status]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Customer Information"}),q?r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),r.jsx("p",{className:"font-semibold text-gray-900",children:q.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Email"}),r.jsx("a",{href:`mailto:${q.email}`,className:"font-semibold text-blue-600 hover:text-blue-700",children:q.email})]}),(de==null?void 0:de.phone)&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Phone"}),r.jsx("a",{href:`tel:${de.phone}`,className:"font-semibold text-blue-600 hover:text-blue-700",children:de.phone})]}),(de==null?void 0:de.company_name)&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Company"}),r.jsx("p",{className:"font-semibold text-gray-900",children:de.company_name})]}),(de==null?void 0:de.address)&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Address"}),r.jsx("p",{className:"font-semibold text-gray-900",children:de.address})]})]}):r.jsx("p",{className:"text-gray-500",children:"Loading customer information..."})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Financial Summary"}),r.jsxs("div",{className:"space-y-3",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Subtotal"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:["",Number(H.total_subtotal||0).toFixed(2)]})]}),(se==null?void 0:se.is_emergency)&&r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-600",children:["Emergency Fee (",se.urgent_fee_pct,"%)"]}),r.jsxs("span",{className:"font-semibold text-yellow-700",children:["",(Number(H.total_subtotal||0)*Number(se.urgent_fee_pct||0)/100).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Tax"}),r.jsxs("span",{className:"font-semibold text-gray-900",children:["",Number(H.tax_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between pt-3 border-t border-gray-200",children:[r.jsx("span",{className:"font-bold text-gray-900",children:"Total Amount"}),r.jsxs("span",{className:"font-bold text-gray-900 text-lg",children:["",Number(H.total_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"pt-3 border-t border-gray-200 space-y-2",children:[r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("span",{className:"text-gray-600",children:["Deposit (",H.deposit_pct,"%)",D.deposit_paid&&r.jsx("span",{className:"ml-2 text-green-600",children:""})]}),r.jsxs("span",{className:"font-semibold text-gray-900",children:["",Number(H.deposit_amount||0).toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"text-gray-600",children:"Total Paid"}),r.jsxs("span",{className:"font-semibold text-green-600",children:["",D.total_paid.toFixed(2)]})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsx("span",{className:"font-bold text-gray-900",children:"Balance Due"}),r.jsxs("span",{className:`font-bold text-lg ${D.balance_due>0?"text-orange-600":"text-green-600"}`,children:["",D.balance_due.toFixed(2)]})]})]})]}),C&&C.length>0&&r.jsxs("div",{className:"mt-6 pt-6 border-t border-gray-200",children:[r.jsx("h3",{className:"font-semibold text-gray-900 mb-3",children:"Payment History"}),r.jsx("div",{className:"space-y-2",children:C.map(Q=>r.jsxs("div",{className:"flex justify-between items-center p-3 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:[Q.method," - ",Number(Q.amount||0).toFixed(2)]}),r.jsx("p",{className:"text-xs text-gray-500",children:oe(Q.created_at)}),Q.transaction_ref&&r.jsxs("p",{className:"text-xs text-gray-500",children:["Ref: ",Q.transaction_ref]})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Q.status==="COMPLETED"?"bg-green-100 text-green-800":"bg-yellow-100 text-yellow-800"}`,children:Q.status})]},Q.id))})]})]}),$&&$.length>0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Proof Versions"}),r.jsx("div",{className:"space-y-4",children:$.map(Q=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex justify-between items-start mb-3",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"font-semibold text-gray-900",children:["Version ",Q.version_number]}),r.jsx("p",{className:"text-sm text-gray-500",children:oe(Q.created_at)})]}),r.jsx("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${Q.status==="APPROVED"?"bg-green-100 text-green-800":Q.status==="REVISION_REQUESTED"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:Q.status})]}),r.jsx("a",{href:Q.file_url,target:"_blank",rel:"noopener noreferrer",className:"text-blue-600 hover:text-blue-700 text-sm font-medium",children:"View Proof "}),Q.customer_comment&&r.jsxs("div",{className:"mt-3 pt-3 border-t border-gray-200",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Customer Comment:"}),r.jsxs("p",{className:"text-sm text-gray-900 italic",children:['"',Q.customer_comment,'"']})]}),Q.internal_notes&&r.jsxs("div",{className:"mt-2",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Internal Notes:"}),r.jsx("p",{className:"text-sm text-gray-700",children:Q.internal_notes})]})]},Q.id))})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Status Management"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Assigned Staff Member"}),r.jsxs("select",{value:o.assigned_staff_id||"",onChange:Q=>V(Q.target.value),disabled:F.isPending,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"Unassigned"}),(re=A==null?void 0:A.users)==null?void 0:re.map(Q=>r.jsx("option",{value:Q.user.id,children:Q.user.name},Q.user.id))]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Current Status"}),r.jsx("p",{className:"font-bold text-gray-900 text-lg mb-2",children:H.status.replace(/_/g," ")}),r.jsxs("p",{className:"text-sm text-gray-600",children:["Last updated: ",oe(H.updated_at)]}),H.revision_count>0&&r.jsxs("p",{className:"text-sm text-gray-600 mt-2",children:["Revisions: ",H.revision_count]})]})]}),U&&r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Messages"}),r.jsx("div",{className:"space-y-3 mb-4 max-h-96 overflow-y-auto",children:R&&R.length>0?R.map(Q=>r.jsxs("div",{className:`p-3 rounded-lg ${Q.sender_user_id===(s==null?void 0:s.id)?"bg-blue-50 ml-8":"bg-gray-100 mr-8"}`,children:[r.jsxs("div",{className:"flex justify-between items-start mb-1",children:[r.jsxs("p",{className:"text-xs font-semibold text-gray-700",children:[Q.sender_name||"Unknown"," ",r.jsxs("span",{className:"text-gray-500",children:["(",Q.sender_role||"N/A",")"]})]}),r.jsx("p",{className:"text-xs text-gray-500",children:new Date(Q.created_at).toLocaleTimeString("en-US",{hour:"2-digit",minute:"2-digit"})})]}),r.jsx("p",{className:"text-sm text-gray-900",children:Q.body})]},Q.id)):r.jsx("p",{className:"text-gray-500 text-sm text-center py-4",children:"No messages yet"})}),r.jsxs("div",{className:"border-t border-gray-200 pt-4",children:[r.jsx("textarea",{value:m,onChange:Q=>{w(null),u(Q.target.value)},placeholder:"Type your message to customer...",rows:3,maxLength:1e3,className:"w-full px-3 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-blue-500 resize-none"}),r.jsxs("div",{className:"flex justify-between items-center mt-2",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:[m.length," / 1000"]}),r.jsx("button",{onClick:ne,disabled:y||!m.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:y?"Sending...":"Send Message"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-4",children:"Admin Actions"}),r.jsxs("div",{className:"space-y-3",children:[r.jsx("button",{onClick:()=>{window.open(`https://123project-build-a-production-ready-w.launchpulse.ai/api/invoices/${H.id}/download`,"_blank")},className:"w-full px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors border border-gray-300",children:"Download Invoice"}),r.jsx(ie,{to:`/admin/quotes/${H.quote_id}`,className:"block w-full px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors border border-gray-300 text-center",children:"View Related Quote"})]})]})]})]})]}),h&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>f(!1),children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",onClick:Q=>Q.stopPropagation(),children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Record Manual Payment"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Amount"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:a.amount||"",onChange:Q=>{w(null),i({...a,amount:parseFloat(Q.target.value)})},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"0.00"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Balance due: ",D.balance_due.toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Method"}),r.jsxs("select",{value:a.method,onChange:Q=>i({...a,method:Q.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[r.jsx("option",{value:"CASH",children:"Cash"}),r.jsx("option",{value:"CHECK",children:"Check"}),r.jsx("option",{value:"WIRE",children:"Bank Transfer"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Transaction Reference"}),r.jsx("input",{type:"text",value:a.transaction_ref,onChange:Q=>i({...a,transaction_ref:Q.target.value}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"Transaction ID or check number"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),r.jsx("textarea",{value:a.notes,onChange:Q=>i({...a,notes:Q.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"Internal notes..."})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>f(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:W,disabled:O.isPending||!a.amount,className:"flex-1 px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:O.isPending?"Recording...":"Record Payment"})]})]})}),x&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>p(!1),children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",onClick:Q=>Q.stopPropagation(),children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Update Order Status"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"New Status"}),r.jsxs("select",{value:c.new_status,onChange:Q=>{w(null),d({...c,new_status:Q.target.value})},className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",children:[r.jsx("option",{value:"",children:"Select new status..."}),r.jsx("option",{value:"QUOTE_REQUESTED",children:"Quote Requested"}),r.jsx("option",{value:"APPROVED",children:"Approved"}),r.jsx("option",{value:"IN_PRODUCTION",children:"In Production"}),r.jsx("option",{value:"PROOF_SENT",children:"Proof Sent"}),r.jsx("option",{value:"AWAITING_APPROVAL",children:"Awaiting Approval"}),r.jsx("option",{value:"READY_FOR_PICKUP",children:"Ready for Pickup"}),r.jsx("option",{value:"COMPLETED",children:"Completed"}),r.jsx("option",{value:"CANCELLED",children:"Cancelled"})]}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Current: ",H.status.replace(/_/g," ")]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Notes (Optional)"}),r.jsx("textarea",{value:c.notes,onChange:Q=>d({...c,notes:Q.target.value}),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100",placeholder:"Reason for status change..."})]})]}),r.jsxs("div",{className:"flex gap-3 mt-6",children:[r.jsx("button",{onClick:()=>p(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:P,disabled:L.isPending||!c.new_status,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:L.isPending?"Updating...":"Update Status"})]})]})}),b&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 z-50 flex items-center justify-center p-4",onClick:()=>g(!1),children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-md w-full p-6",onClick:Q=>Q.stopPropagation(),children:[r.jsxs("div",{className:"text-center mb-6",children:[r.jsx("div",{className:"w-16 h-16 bg-red-100 rounded-full flex items-center justify-center mx-auto mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Cancel This Order?"}),r.jsx("p",{className:"text-gray-600 mb-4",children:"This action will cancel the order. Customer will be notified."}),D.total_paid>0&&r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4 mb-4",children:[r.jsx("p",{className:"text-sm text-yellow-800 mb-2",children:r.jsx("strong",{children:"Refund Calculation:"})}),r.jsxs("p",{className:"text-sm text-yellow-800",children:["Total Paid: ",D.total_paid.toFixed(2)]}),r.jsxs("p",{className:"text-sm text-yellow-800 font-semibold mt-1",children:["Estimated Refund: ",D.total_paid.toFixed(2)]})]})]}),r.jsxs("div",{className:"flex gap-3",children:[r.jsx("button",{onClick:()=>g(!1),className:"flex-1 px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Keep Order"}),r.jsx("button",{onClick:K,disabled:L.isPending,className:"flex-1 px-4 py-2 bg-red-600 text-white rounded-lg font-medium hover:bg-red-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:L.isPending?"Cancelling...":"Confirm Cancellation"})]})]})})]})})},JF=()=>{Le();const[e,t]=Ye(),n=ae(G=>G.authentication_state.auth_token);ae(G=>G.authentication_state.current_user);const s=ae(G=>G.show_toast),a=e.get("status")||null,i=e.get("customer")||null,o=parseInt(e.get("page")||"1"),[l,c]=k.useState({status:a,customer_search:i,service_id:null,page:o}),[d,m]=k.useState([]),[u,h]=k.useState(!1),[f,b]=k.useState({sort_by:"created_at",sort_order:"desc"}),[g,x]=k.useState(i||""),{data:p,isLoading:y,error:v,refetch:N}=pe({queryKey:["admin-quotes",l.status,l.customer_search,l.service_id,l.page],queryFn:async()=>{const G=new URLSearchParams;return l.status&&G.append("status",l.status),l.customer_search&&G.append("customer",l.customer_search),l.service_id&&G.append("service_id",l.service_id),G.append("page",l.page.toString()),(await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/quotes?${G.toString()}`,{headers:{Authorization:`Bearer ${n}`}})).data},enabled:!!n,staleTime:6e4,refetchOnWindowFocus:!1}),{data:w}=pe({queryKey:["admin-services-filter"],queryFn:async()=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/services",{headers:{Authorization:`Bearer ${n}`}})).data.map(oe=>{var H,ee;return{id:oe.id||((H=oe.service)==null?void 0:H.id),name:oe.name||((ee=oe.service)==null?void 0:ee.name)}}),enabled:!!n,staleTime:5*60*1e3}),j=(p==null?void 0:p.quotes)||[],_=(p==null?void 0:p.total)||0,S=k.useMemo(()=>j.length?j.reduce((G,oe)=>(G.total_quotes++,oe.quote.status==="SUBMITTED"&&G.submitted_count++,oe.quote.status==="IN_REVIEW"&&G.in_review_count++,oe.quote.status==="APPROVED"&&G.finalized_count++,G),{total_quotes:0,submitted_count:0,in_review_count:0,finalized_count:0,converted_count:0}):{total_quotes:0,submitted_count:0,in_review_count:0,finalized_count:0,converted_count:0},[j]),T={current_page:l.page,total_pages:Math.ceil(_/20),total_items:_,items_per_page:20},A=w||[],E=G=>{c(H=>({...H,status:G,page:1})),m([]);const oe=new URLSearchParams(e);G?oe.set("status",G):oe.delete("status"),oe.set("page","1"),t(oe)},R=G=>{c(H=>({...H,customer_search:G||null,page:1}));const oe=new URLSearchParams(e);G?oe.set("customer",G):oe.delete("customer"),oe.set("page","1"),t(oe)},I=G=>{c(oe=>({...oe,service_id:G,page:1})),m([])},O=G=>{c(H=>({...H,page:G}));const oe=new URLSearchParams(e);oe.set("page",G.toString()),t(oe),window.scrollTo({top:0,behavior:"smooth"})},L=G=>{b(oe=>oe.sort_by===G?{...oe,sort_order:oe.sort_order==="asc"?"desc":"asc"}:{sort_by:G,sort_order:"asc"})},F=G=>{m(oe=>oe.includes(G)?oe.filter(H=>H!==G):[...oe,G])},M=()=>{d.length===j.length?m([]):m(j.map(G=>G.quote.id))},D=()=>{if(d.length===0){s({type:"warning",message:"Please select quotes to export",duration:3e3});return}const G=j.filter($=>d.includes($.quote.id)),oe=`Quote ID,Customer Name,Customer Email,Service,Tier,Status,Estimate,Final Price,Created At
`,H=G.map($=>{const C=$.quote.estimate_subtotal?`${Number($.quote.estimate_subtotal).toFixed(2)}`:"N/A",U=$.quote.final_subtotal?`${Number($.quote.final_subtotal).toFixed(2)}`:"N/A",q=new Date($.quote.created_at).toLocaleDateString();return`${$.quote.id},"${$.customer.name}",${$.customer.email},"${$.service.name}","${$.tier.name}",${$.quote.status},${C},${U},${q}`}).join(`
`),ee=oe+H,J=new Blob([ee],{type:"text/csv;charset=utf-8;"}),X=document.createElement("a"),se=URL.createObjectURL(J);X.setAttribute("href",se),X.setAttribute("download",`quotes_export_${new Date().toISOString().split("T")[0]}.csv`),X.style.visibility="hidden",document.body.appendChild(X),X.click(),document.body.removeChild(X),s({type:"success",message:`${d.length} quotes exported successfully`,duration:3e3})},W=async()=>{if(d.length===0){s({type:"warning",message:"Please select quotes to assign",duration:3e3});return}h(!0);try{await Promise.all(d.map(G=>te.patch(`https://123project-build-a-production-ready-w.launchpulse.ai/api/quotes/${G}`,{status:"IN_REVIEW"},{headers:{Authorization:`Bearer ${n}`}}))),s({type:"success",message:`${d.length} quotes updated to In Review`,duration:3e3}),m([]),N()}catch{s({type:"error",message:"Failed to update quotes",duration:5e3})}finally{h(!1)}},P=k.useMemo(()=>{const G=[...j];return G.sort((oe,H)=>{let ee,J;switch(f.sort_by){case"customer_name":ee=oe.customer.name,J=H.customer.name;break;case"service_name":ee=oe.service.name,J=H.service.name;break;case"created_at":ee=new Date(oe.quote.created_at).getTime(),J=new Date(H.quote.created_at).getTime();break;case"final_subtotal":ee=oe.quote.final_subtotal||0,J=H.quote.final_subtotal||0;break;default:ee=oe.quote.created_at,J=H.quote.created_at}return ee<J?f.sort_order==="asc"?-1:1:ee>J?f.sort_order==="asc"?1:-1:0}),G},[j,f]);k.useEffect(()=>{const G=setTimeout(()=>{g!==l.customer_search&&R(g)},500);return()=>clearTimeout(G)},[g]);const V=G=>{switch(G){case"SUBMITTED":return"bg-gray-100 text-gray-800";case"IN_REVIEW":return"bg-yellow-100 text-yellow-800";case"APPROVED":return"bg-green-100 text-green-800";case"REJECTED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},K=G=>G==null?"N/A":`${Number(G).toFixed(2)}`,ne=G=>{const oe=new Date(G),ee=new Date().getTime()-oe.getTime(),J=Math.floor(ee/(1e3*60*60*24));return J===0?"Today":J===1?"Yesterday":J<7?`${J} days ago`:oe.toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"})};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"md:flex md:items-center md:justify-between",children:[r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Quote Management"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Review and finalize customer quote requests"})]}),r.jsx("div",{className:"mt-4 flex md:mt-0 md:ml-4",children:r.jsxs("button",{onClick:()=>N(),className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-md shadow-sm text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 transition-colors",children:[r.jsx("svg",{className:"h-5 w-5 mr-2 text-gray-500",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-5 gap-4 mb-8",children:[r.jsxs("button",{onClick:()=>E(null),className:`bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow text-left ${l.status===null?"ring-2 ring-blue-500":""}`,children:[r.jsx("div",{className:"text-sm font-medium text-gray-600",children:"All Quotes"}),r.jsx("div",{className:"mt-2 text-3xl font-bold text-gray-900",children:S.total_quotes})]}),r.jsxs("button",{onClick:()=>E("SUBMITTED"),className:`bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow text-left ${l.status==="SUBMITTED"?"ring-2 ring-blue-500":""}`,children:[r.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Submitted"}),r.jsx("div",{className:"mt-2 text-3xl font-bold text-gray-900",children:S.submitted_count})]}),r.jsxs("button",{onClick:()=>E("IN_REVIEW"),className:`bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow text-left ${l.status==="IN_REVIEW"?"ring-2 ring-blue-500":""}`,children:[r.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Under Review"}),r.jsx("div",{className:"mt-2 text-3xl font-bold text-yellow-600",children:S.in_review_count})]}),r.jsxs("button",{onClick:()=>E("APPROVED"),className:`bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow text-left ${l.status==="APPROVED"?"ring-2 ring-blue-500":""}`,children:[r.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Finalized"}),r.jsx("div",{className:"mt-2 text-3xl font-bold text-green-600",children:S.finalized_count})]}),r.jsxs("button",{onClick:()=>E("REJECTED"),className:`bg-white rounded-lg shadow p-6 hover:shadow-lg transition-shadow text-left ${l.status==="REJECTED"?"ring-2 ring-blue-500":""}`,children:[r.jsx("div",{className:"text-sm font-medium text-gray-600",children:"Rejected"}),r.jsx("div",{className:"mt-2 text-3xl font-bold text-red-600",children:j.filter(G=>G.quote.status==="REJECTED").length})]})]}),r.jsx("div",{className:"bg-white rounded-lg shadow mb-6 p-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-12 gap-4",children:[r.jsxs("div",{className:"md:col-span-4",children:[r.jsx("label",{htmlFor:"customer-search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Customer"}),r.jsx("input",{type:"text",id:"customer-search",value:g,onChange:G=>x(G.target.value),placeholder:"Name, email, or quote ID...",className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]}),r.jsxs("div",{className:"md:col-span-3",children:[r.jsx("label",{htmlFor:"service-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Service"}),r.jsxs("select",{id:"service-filter",value:l.service_id||"",onChange:G=>I(G.target.value||null),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"",children:"All Services"}),A.map(G=>r.jsx("option",{value:G.id,children:G.name},G.id))]})]}),r.jsxs("div",{className:"md:col-span-5 flex items-end gap-2",children:[r.jsxs("button",{onClick:D,disabled:d.length===0,className:"flex-1 px-4 py-2 bg-gray-100 text-gray-900 border border-gray-300 rounded-md hover:bg-gray-200 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-gray-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:[r.jsx("svg",{className:"inline-block h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 10v6m0 0l-3-3m3 3l3-3m2 8H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),"Export (",d.length,")"]}),r.jsx("button",{onClick:W,disabled:d.length===0||u,className:"flex-1 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors text-sm font-medium",children:u?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"inline-block animate-spin h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Processing..."]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"inline-block h-5 w-5 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4.354a4 4 0 110 5.292M15 21H3v-1a6 6 0 0112 0v1zm0 0h6v-1a6 6 0 00-9-5.197M13 7a4 4 0 11-8 0 4 4 0 018 0z"})}),"Assign Staff (",d.length,")"]})})]})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:y?r.jsxs("div",{className:"p-12 text-center",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 mx-auto text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading quotes..."})]}):v?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("div",{className:"text-red-600 mb-4",children:r.jsx("svg",{className:"h-12 w-12 mx-auto",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsx("p",{className:"text-gray-900 font-medium",children:"Failed to load quotes"}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:"Please try refreshing the page"}),r.jsx("button",{onClick:()=>N(),className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Retry"})]}):P.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("svg",{className:"h-12 w-12 mx-auto text-gray-400 mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-900 font-medium",children:"No quotes found"}),r.jsx("p",{className:"text-gray-600 text-sm mt-2",children:l.status||l.customer_search||l.service_id?"Try adjusting your filters":"Quotes will appear here when customers submit requests"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left",children:r.jsx("input",{type:"checkbox",checked:d.length===P.length&&P.length>0,onChange:M,className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quote ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("customer_name"),children:r.jsxs("div",{className:"flex items-center",children:["Customer",f.sort_by==="customer_name"&&r.jsx("svg",{className:`ml-1 h-4 w-4 ${f.sort_order==="desc"?"transform rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("service_name"),children:r.jsxs("div",{className:"flex items-center",children:["Service",f.sort_by==="service_name"&&r.jsx("svg",{className:`ml-1 h-4 w-4 ${f.sort_order==="desc"?"transform rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("final_subtotal"),children:r.jsxs("div",{className:"flex items-center",children:["Price",f.sort_by==="final_subtotal"&&r.jsx("svg",{className:`ml-1 h-4 w-4 ${f.sort_order==="desc"?"transform rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider cursor-pointer hover:bg-gray-100",onClick:()=>L("created_at"),children:r.jsxs("div",{className:"flex items-center",children:["Date",f.sort_by==="created_at"&&r.jsx("svg",{className:`ml-1 h-4 w-4 ${f.sort_order==="desc"?"transform rotate-180":""}`,fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:P.map(G=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("input",{type:"checkbox",checked:d.includes(G.quote.id),onChange:()=>F(G.quote.id),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",G.quote.id.substring(0,8)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"flex items-center",children:r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[G.customer.name,(G.quote.is_guest||G.customer.is_guest)&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Guest"})]}),r.jsx("div",{className:"text-sm text-gray-500",children:G.customer.email})]})})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:G.service.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:G.tier.name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${V(G.quote.status)}`,children:G.quote.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:G.quote.final_subtotal?K(G.quote.final_subtotal):G.quote.estimate_subtotal?`~${K(G.quote.estimate_subtotal)}`:"Pending"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:ne(G.quote.created_at)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx(ie,{to:`/admin/quotes/${G.quote.id}`,className:"text-blue-600 hover:text-blue-900 transition-colors",children:"View Details"})})]},G.quote.id))})]})}),r.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:P.map(G=>r.jsxs("div",{className:"p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:d.includes(G.quote.id),onChange:()=>F(G.quote.id),className:"h-4 w-4 text-blue-600 border-gray-300 rounded focus:ring-blue-500 mr-3"}),r.jsxs("div",{children:[r.jsxs("div",{className:"text-sm font-medium text-gray-900",children:["#",G.quote.id.substring(0,8)]}),r.jsx("div",{className:"text-xs text-gray-500 mt-1",children:ne(G.quote.created_at)})]})]}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${V(G.quote.status)}`,children:G.quote.status})]}),r.jsxs("div",{className:"space-y-2 mb-3",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Customer:"}),r.jsxs("div",{className:"text-sm font-medium text-gray-900 flex items-center gap-2",children:[G.customer.name,(G.quote.is_guest||G.customer.is_guest)&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded text-xs font-medium bg-purple-100 text-purple-800",children:"Guest"})]}),r.jsx("div",{className:"text-xs text-gray-500",children:G.customer.email})]}),r.jsxs("div",{children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Service:"}),r.jsx("div",{className:"text-sm text-gray-900",children:G.service.name})]}),r.jsxs("div",{className:"flex justify-between",children:[r.jsxs("div",{children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Tier:"}),r.jsx("div",{className:"text-sm text-gray-900",children:G.tier.name})]}),r.jsxs("div",{className:"text-right",children:[r.jsx("span",{className:"text-xs text-gray-500",children:"Price:"}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:G.quote.final_subtotal?K(G.quote.final_subtotal):G.quote.estimate_subtotal?`~${K(G.quote.estimate_subtotal)}`:"Pending"})]})]})]}),r.jsx(ie,{to:`/admin/quotes/${G.quote.id}`,className:"block w-full text-center px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors text-sm font-medium",children:"View Details"})]},G.quote.id))}),T.total_pages>1&&r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1 flex justify-between sm:hidden",children:[r.jsx("button",{onClick:()=>O(l.page-1),disabled:l.page===1,className:"relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsx("button",{onClick:()=>O(l.page+1),disabled:l.page>=T.total_pages,className:"ml-3 relative inline-flex items-center px-4 py-2 border border-gray-300 text-sm font-medium rounded-md text-gray-700 bg-white hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]}),r.jsxs("div",{className:"hidden sm:flex-1 sm:flex sm:items-center sm:justify-between",children:[r.jsx("div",{children:r.jsxs("p",{className:"text-sm text-gray-700",children:["Showing"," ",r.jsx("span",{className:"font-medium",children:(l.page-1)*T.items_per_page+1})," ","to"," ",r.jsx("span",{className:"font-medium",children:Math.min(l.page*T.items_per_page,T.total_items)})," ","of"," ",r.jsx("span",{className:"font-medium",children:T.total_items})," results"]})}),r.jsx("div",{children:r.jsxs("nav",{className:"relative z-0 inline-flex rounded-md shadow-sm -space-x-px","aria-label":"Pagination",children:[r.jsx("button",{onClick:()=>O(l.page-1),disabled:l.page===1,className:"relative inline-flex items-center px-2 py-2 rounded-l-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),[...Array(Math.min(T.total_pages,5))].map((G,oe)=>{const H=oe+1;return r.jsx("button",{onClick:()=>O(H),className:`relative inline-flex items-center px-4 py-2 border text-sm font-medium ${l.page===H?"z-10 bg-blue-50 border-blue-500 text-blue-600":"bg-white border-gray-300 text-gray-500 hover:bg-gray-50"}`,children:H},H)}),r.jsx("button",{onClick:()=>O(l.page+1),disabled:l.page>=T.total_pages,className:"relative inline-flex items-center px-2 py-2 rounded-r-md border border-gray-300 bg-white text-sm font-medium text-gray-500 hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed",children:r.jsx("svg",{className:"h-5 w-5",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})})]})})]})]})]})})]})]})})},ju="https://123project-build-a-production-ready-w.launchpulse.ai",ZF=async(e,t)=>(await te.get(`${ju}/api/quotes/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data,eB=async(e,t)=>{var a;const s=(a=(await te.get(`${ju}/api/admin/users?search=${e}`,{headers:{Authorization:`Bearer ${t}`}})).data.users)==null?void 0:a.find(i=>{var o;return((o=i.user)==null?void 0:o.id)===e});return(s==null?void 0:s.user)||null},tB=async(e,t,n)=>(await te.post(`${ju}/api/admin/quotes/${e}/finalize`,t,{headers:{Authorization:`Bearer ${n}`}})).data,rB=async(e,t,n)=>(await te.post(`${ju}/api/message-threads/${e}/messages`,t,{headers:{Authorization:`Bearer ${n}`}})).data,nB=e=>{if(e===0)return"0 Bytes";const t=1024,n=["Bytes","KB","MB","GB"],s=Math.floor(Math.log(e)/Math.log(t));return Math.round(e/Math.pow(t,s)*100)/100+" "+n[s]},sB=e=>new Date(e).toLocaleDateString("en-US",{year:"numeric",month:"long",day:"numeric",hour:"2-digit",minute:"2-digit"}),aB=e=>{try{return JSON.parse(e)}catch{return e}},vN=()=>{var O,L;const{quote_id:e}=fr();Le();const t=et(),n=ae(F=>F.authentication_state.auth_token);ae(F=>F.authentication_state.current_user);const s=ae(F=>F.show_toast),[a,i]=k.useState({final_subtotal:null,tax_rate:.23,tax_amount:0,total_amount:0,notes:""}),[o,l]=k.useState(""),[c,d]=k.useState(!1),[m,u]=k.useState(!1),{data:h,isLoading:f,error:b}=pe({queryKey:["quote-details",e],queryFn:()=>ZF(e,n),enabled:!!e&&!!n,staleTime:3e4,refetchOnWindowFocus:!1}),{data:g,isLoading:x}=pe({queryKey:["customer-info",h==null?void 0:h.quote.customer_id],queryFn:()=>eB(h.quote.customer_id,n),enabled:!!(h!=null&&h.quote.customer_id)&&!!n,staleTime:6e4}),p=ve({mutationFn:F=>tB(e,F,n),onSuccess:F=>{s({type:"success",message:"Quote finalized successfully! Customer has been notified.",duration:5e3}),t.invalidateQueries({queryKey:["quote-details",e]}),d(!0)},onError:F=>{var M,D;s({type:"error",message:((D=(M=F.response)==null?void 0:M.data)==null?void 0:D.message)||"Failed to finalize quote",duration:5e3})}}),y=ve({mutationFn:F=>rB(h.message_thread.id,F,n),onSuccess:()=>{s({type:"success",message:"Information request sent to customer",duration:5e3}),l(""),u(!1)},onError:F=>{var M,D;s({type:"error",message:((D=(M=F.response)==null?void 0:M.data)==null?void 0:D.message)||"Failed to send message",duration:5e3})}});k.useEffect(()=>{if(h!=null&&h.quote&&a.final_subtotal===null){const F=Number(h.quote.estimate_subtotal||h.quote.final_subtotal||0),M=F*a.tax_rate,D=F+M;i(W=>({...W,final_subtotal:F,tax_amount:Number((M||0).toFixed(2)),total_amount:Number((D||0).toFixed(2)),notes:h.quote.notes||""}))}},[h]);const v=F=>{const M=parseFloat(F)||0,D=M*a.tax_rate,W=M+D;i(P=>({...P,final_subtotal:M,tax_amount:Number((D||0).toFixed(2)),total_amount:Number((W||0).toFixed(2))}))},N=()=>{if(!a.final_subtotal||a.final_subtotal<=0){s({type:"error",message:"Please enter a valid final price",duration:5e3});return}p.mutate({final_subtotal:a.final_subtotal,notes:a.notes||null})},w=()=>{if(!o.trim()){s({type:"error",message:"Please enter a message",duration:3e3});return}if(!(h!=null&&h.message_thread)){s({type:"error",message:"No message thread found for this quote",duration:3e3});return}y.mutate({body:o})},j=F=>{window.open(`${ju}${F.file_url}`,"_blank")},_=F=>{switch(F){case"SUBMITTED":return"bg-gray-200 text-gray-800";case"IN_REVIEW":return"bg-yellow-200 text-yellow-800";case"APPROVED":return"bg-green-200 text-green-800";case"REJECTED":return"bg-red-200 text-red-800";default:return"bg-gray-200 text-gray-800"}};if(f||x)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"flex flex-col items-center space-y-4",children:[r.jsxs("svg",{className:"animate-spin h-12 w-12 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"text-gray-600 text-lg",children:"Loading quote details..."})]})})});if(b)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"max-w-md w-full bg-white shadow-lg rounded-lg p-8",children:[r.jsx("div",{className:"flex items-center justify-center w-12 h-12 mx-auto bg-red-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 text-center mb-2",children:"Error Loading Quote"}),r.jsx("p",{className:"text-gray-600 text-center mb-6",children:((L=(O=b==null?void 0:b.response)==null?void 0:O.data)==null?void 0:L.message)||"Quote not found or access denied"}),r.jsx(ie,{to:"/admin/quotes",className:"w-full inline-flex justify-center items-center px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Back to Quotes"})]})})});if(!h)return null;const{quote:S,quote_answers:T,service:A,tier:E,uploads:R,message_thread:I}=h;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(ie,{to:"/admin/quotes",className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",title:"Back to Quotes",children:r.jsx("svg",{className:"w-6 h-6 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Quote Review & Finalization"}),r.jsxs("p",{className:"text-sm text-gray-500 mt-1",children:["Quote ID: ",S.id.substring(0,8),"...  Submitted ",sB(S.created_at)]})]})]}),r.jsx("div",{className:"flex items-center space-x-3",children:r.jsx("span",{className:`px-4 py-2 rounded-full text-sm font-semibold ${_(S.status)}`,children:S.status.replace("_"," ")})})]})})}),c&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"bg-green-50 border-2 border-green-200 rounded-xl p-8 text-center",children:[r.jsx("div",{className:"flex items-center justify-center w-16 h-16 mx-auto bg-green-100 rounded-full mb-4",children:r.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Quote Finalized Successfully!"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The customer has been notified and can now proceed to book their appointment."}),r.jsxs("div",{className:"flex items-center justify-center space-x-4",children:[r.jsx(ie,{to:"/admin/quotes",className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Back to Quotes"}),r.jsx(ie,{to:`/admin/orders?customer=${g==null?void 0:g.email}`,className:"px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium",children:"View Customer's Orders"})]})]})}),!c&&r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Customer Information"})}),r.jsx("div",{className:"p-6",children:x?r.jsx("div",{className:"flex items-center justify-center py-8",children:r.jsxs("svg",{className:"animate-spin h-6 w-6 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]})}):g?r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Customer Name"}),r.jsx("p",{className:"text-base font-semibold text-gray-900",children:g.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-1",children:"Email"}),r.jsx("a",{href:`mailto:${g.email}`,className:"text-base font-medium text-blue-600 hover:text-blue-800",children:g.email})]})]}):r.jsx("p",{className:"text-gray-500",children:"Customer information not available"})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Service & Tier Selection"})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Service"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"text-xl font-bold text-gray-900",children:A.name}),A.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1 leading-relaxed",children:A.description})]}),A.requires_booking&&r.jsx("span",{className:"px-3 py-1 bg-blue-100 text-blue-800 text-xs font-medium rounded-full",children:"Requires Booking"}),A.requires_proof&&r.jsx("span",{className:"px-3 py-1 bg-purple-100 text-purple-800 text-xs font-medium rounded-full",children:"Requires Proof"})]})]}),r.jsxs("div",{className:"border-t border-gray-200 pt-6",children:[r.jsx("p",{className:"text-sm text-gray-500 mb-2",children:"Selected Tier"}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-lg font-bold text-gray-900",children:E.name}),E.description&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:E.description})]}),r.jsxs("span",{className:"px-4 py-2 bg-gradient-to-r from-yellow-400 to-amber-400 text-gray-900 text-sm font-bold rounded-lg",children:[E.name," Tier"]})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Project Specifications"})}),r.jsx("div",{className:"p-6",children:T.length>0?r.jsx("dl",{className:"space-y-4",children:T.map(F=>{const M=aB(F.value),D=typeof M=="object"?JSON.stringify(M,null,2):String(M);return r.jsxs("div",{className:"flex flex-col space-y-1",children:[r.jsx("dt",{className:"text-sm font-medium text-gray-500 capitalize",children:F.option_key.replace(/_/g," ")}),r.jsx("dd",{className:"text-base text-gray-900 font-semibold",children:D})]},F.id)})}):r.jsx("p",{className:"text-gray-500 italic",children:"No project specifications provided"})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:r.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Customer Files (",R.length,")"]})}),r.jsx("div",{className:"p-6",children:R.length>0?r.jsx("div",{className:"space-y-3",children:R.map(F=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3 flex-1 min-w-0",children:[r.jsx("div",{className:"flex-shrink-0",children:F.file_type.startsWith("image/")?r.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}):r.jsx("svg",{className:"w-8 h-8 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M7 21h10a2 2 0 002-2V9.414a1 1 0 00-.293-.707l-5.414-5.414A1 1 0 0012.586 3H7a2 2 0 00-2 2v14a2 2 0 002 2z"})})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("p",{className:"text-sm font-medium text-gray-900 truncate",children:F.file_name}),r.jsxs("div",{className:"flex items-center space-x-2 mt-1",children:[r.jsx("p",{className:"text-xs text-gray-500",children:nB(F.file_size_bytes)}),r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("p",{className:"text-xs text-gray-500 uppercase",children:F.file_type.split("/")[1]}),F.dpi_warning&&r.jsxs(r.Fragment,{children:[r.jsx("span",{className:"text-gray-400",children:""}),r.jsx("span",{className:"inline-flex items-center text-xs text-yellow-700 bg-yellow-100 px-2 py-0.5 rounded",children:" DPI Warning"})]})]})]})]}),r.jsx("button",{onClick:()=>j(F),className:"ml-4 px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-lg hover:bg-blue-700 transition-colors flex-shrink-0",children:"Download"})]},F.id))}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-500",children:"No files uploaded by customer"})]})})]})]}),r.jsxs("div",{className:"lg:col-span-1 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden sticky top-6",children:[r.jsx("div",{className:"bg-gradient-to-r from-yellow-400 to-amber-400 px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-bold text-gray-900",children:"Finalize Pricing"})}),r.jsxs("div",{className:"p-6 space-y-6",children:[S.estimate_subtotal&&r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs text-blue-700 font-medium mb-1",children:"ESTIMATED SUBTOTAL"}),r.jsxs("p",{className:"text-2xl font-bold text-blue-900",children:["",Number(S.estimate_subtotal||0).toFixed(2)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Final Subtotal (Before Tax) *"}),r.jsxs("div",{className:"relative",children:[r.jsx("span",{className:"absolute left-3 top-1/2 -translate-y-1/2 text-gray-500 font-medium",children:""}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:a.final_subtotal||"",onChange:F=>v(F.target.value),className:"w-full pl-8 pr-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 text-lg font-semibold transition-all",placeholder:"0.00"})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 space-y-3",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Tax Rate"}),r.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[(a.tax_rate*100).toFixed(0),"%"]})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Tax Amount"}),r.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["",Number(a.tax_amount||0).toFixed(2)]})]}),r.jsx("div",{className:"border-t border-gray-300 pt-3 mt-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-base font-bold text-gray-900",children:"Total Amount"}),r.jsxs("span",{className:"text-xl font-bold text-gray-900",children:["",Number(a.total_amount||0).toFixed(2)]})]})})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Notes (Optional)"}),r.jsx("textarea",{value:a.notes,onChange:F=>i(M=>({...M,notes:F.target.value})),rows:3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 resize-none transition-all",placeholder:"Add any internal notes about this quote..."})]}),r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4 space-y-2",children:[r.jsx("p",{className:"text-xs text-green-700 font-medium",children:"DEPOSIT REQUIRED (50%)"}),r.jsxs("p",{className:"text-lg font-bold text-green-900",children:["",(Number(a.total_amount||0)*.5).toFixed(2)]}),r.jsxs("p",{className:"text-xs text-green-700",children:["Balance due: ",(Number(a.total_amount||0)*.5).toFixed(2)]})]}),r.jsx("button",{onClick:N,disabled:p.isPending||!a.final_subtotal||a.final_subtotal<=0,className:"w-full px-6 py-4 bg-gradient-to-r from-yellow-400 to-amber-400 text-gray-900 rounded-lg hover:from-yellow-500 hover:to-amber-500 transition-all font-bold text-lg shadow-lg hover:shadow-xl disabled:opacity-50 disabled:cursor-not-allowed disabled:hover:shadow-lg",children:p.isPending?r.jsxs("span",{className:"flex items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-3 h-5 w-5 text-gray-900",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Finalizing Quote..."]}):"Finalize Quote & Create Invoice"}),r.jsx("button",{onClick:()=>u(!m),disabled:!I,className:"w-full px-4 py-3 bg-gray-100 text-gray-900 rounded-lg hover:bg-gray-200 transition-colors font-medium border-2 border-gray-300 disabled:opacity-50 disabled:cursor-not-allowed",children:m?"Cancel Info Request":"Request More Information"}),m&&I&&r.jsxs("div",{className:"mt-4 p-4 bg-blue-50 border-2 border-blue-200 rounded-lg space-y-3",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Message to Customer"}),r.jsx("textarea",{value:o,onChange:F=>l(F.target.value),rows:4,maxLength:1e3,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 resize-none transition-all",placeholder:"Please provide additional information about..."}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("span",{className:"text-xs text-gray-500",children:[o.length," / 1000 characters"]}),r.jsx("button",{onClick:w,disabled:y.isPending||!o.trim(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors font-medium text-sm disabled:opacity-50 disabled:cursor-not-allowed",children:y.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Sending..."]}):"Send Request"})]})]})]})]}),S.notes&&r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-50 to-indigo-50 px-6 py-4 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Customer Notes"})}),r.jsx("div",{className:"p-6",children:r.jsx("p",{className:"text-gray-700 leading-relaxed whitespace-pre-wrap",children:S.notes})})]})]})]})})]})})},iB=()=>{const e=ae(z=>z.authentication_state.auth_token);ae(z=>z.authentication_state.current_user);const t=ae(z=>z.show_toast),[n,s]=Ye(),a=n.get("category"),[i,o]=k.useState(a),[l,c]=k.useState(!1),[d,m]=k.useState(!1),[u,h]=k.useState(!1),[f,b]=k.useState(!1),[g,x]=k.useState(null),[p,y]=k.useState({title:"",image_url:"",thumbnail_url:"",description:"",alt_text:"",categories:[]}),[v,N]=k.useState({title:"",description:"",categories:[],is_active:!0}),[w,j]=k.useState({slug:"",title:"",service_id:"",tier_id:"",description:"",client_testimonial:"",is_published:!1}),_=et(),S="https://123project-build-a-production-ready-w.launchpulse.ai",T=async()=>{const z={};return i&&(z.categories=i),(await te.get(`${S}/api/admin/gallery-images`,{headers:{Authorization:`Bearer ${e}`},params:z})).data},A=async()=>(await te.get(`${S}/api/public/service-categories`)).data,E=async()=>(await te.get(`${S}/api/admin/services`,{headers:{Authorization:`Bearer ${e}`}})).data,R=async()=>(await te.get(`${S}/api/public/tiers`)).data,I=async z=>{await te.post(`${S}/api/admin/gallery-images`,z,{headers:{Authorization:`Bearer ${e}`}})},O=async z=>{await te.patch(`${S}/api/admin/gallery-images/${z.image_id}`,z.payload,{headers:{Authorization:`Bearer ${e}`}})},L=async z=>{await te.delete(`${S}/api/admin/gallery-images/${z}`,{headers:{Authorization:`Bearer ${e}`}})},F=async z=>{await te.post(`${S}/api/admin/case-studies`,z,{headers:{Authorization:`Bearer ${e}`}})},{data:M=[],isLoading:D}=pe({queryKey:["admin-gallery-images",i],queryFn:T,enabled:!!e,staleTime:6e4}),{data:W=[]}=pe({queryKey:["service-categories"],queryFn:A,staleTime:3e5}),{data:P=[]}=pe({queryKey:["admin-services"],queryFn:E,enabled:!!e&&u,staleTime:3e5}),{data:V=[]}=pe({queryKey:["tiers"],queryFn:R,enabled:u,staleTime:3e5}),K=ve({mutationFn:I,onSuccess:()=>{_.invalidateQueries({queryKey:["admin-gallery-images"]}),t({type:"success",message:"Image uploaded successfully",duration:5e3}),c(!1),y({title:"",image_url:"",thumbnail_url:"",description:"",alt_text:"",categories:[]})},onError:z=>{var B,re;t({type:"error",message:((re=(B=z.response)==null?void 0:B.data)==null?void 0:re.message)||"Failed to upload image",duration:5e3})}}),ne=ve({mutationFn:O,onSuccess:()=>{_.invalidateQueries({queryKey:["admin-gallery-images"]}),t({type:"success",message:"Image updated successfully",duration:5e3}),m(!1),x(null)},onError:z=>{var B,re;t({type:"error",message:((re=(B=z.response)==null?void 0:B.data)==null?void 0:re.message)||"Failed to update image",duration:5e3})}}),G=ve({mutationFn:L,onSuccess:()=>{_.invalidateQueries({queryKey:["admin-gallery-images"]}),t({type:"success",message:"Image deleted successfully",duration:5e3}),b(!1),x(null)},onError:z=>{var B,re;t({type:"error",message:((re=(B=z.response)==null?void 0:B.data)==null?void 0:re.message)||"Failed to delete image",duration:5e3})}}),oe=ve({mutationFn:F,onSuccess:()=>{t({type:"success",message:"Case study created successfully",duration:5e3}),h(!1),j({slug:"",title:"",service_id:"",tier_id:"",description:"",client_testimonial:"",is_published:!1}),x(null)},onError:z=>{var B,re;t({type:"error",message:((re=(B=z.response)==null?void 0:B.data)==null?void 0:re.message)||"Failed to create case study",duration:5e3})}}),H=z=>{o(z),s(z?{category:z}:{})},ee=()=>{y({title:"",image_url:"",thumbnail_url:"",description:"",alt_text:"",categories:[]}),c(!0)},J=z=>{x(z);let B=[];if(z.categories)try{const re=JSON.parse(z.categories);B=Array.isArray(re)?re:[]}catch{B=[]}N({title:z.title,description:z.description||"",categories:B,is_active:z.is_active}),m(!0)},X=z=>{x(z),j({slug:"",title:"",service_id:"",tier_id:"",description:"",client_testimonial:"",is_published:!1}),h(!0)},se=z=>{x(z),b(!0)},$=async z=>{await ne.mutateAsync({image_id:z.id,payload:{is_active:!z.is_active}})},C=z=>{z.preventDefault();const B={title:p.title,image_url:p.image_url,thumbnail_url:p.thumbnail_url||null,description:p.description||null,alt_text:p.alt_text||null,categories:JSON.stringify(p.categories)};K.mutate(B)},U=z=>{if(z.preventDefault(),!g)return;const B={title:v.title,description:v.description||null,categories:JSON.stringify(v.categories),is_active:v.is_active};ne.mutate({image_id:g.id,payload:B})},q=()=>{g&&G.mutate(g.id)},de=z=>{if(z.preventDefault(),!g)return;const B={slug:w.slug,title:w.title,service_id:w.service_id,tier_id:w.tier_id,gallery_image_id:g.id,description:w.description||null,client_testimonial:w.client_testimonial||null,is_published:w.is_published};oe.mutate(B)},he=z=>{const B=[...p.categories],re=B.indexOf(z);re>-1?B.splice(re,1):B.push(z),y(Q=>({...Q,categories:B}))},le=z=>{const B=[...v.categories],re=B.indexOf(z);re>-1?B.splice(re,1):B.push(z),N(Q=>({...Q,categories:B}))},be=z=>{if(!z)return[];try{const B=JSON.parse(z);return Array.isArray(B)?B:[]}catch{return[]}};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsxs("nav",{className:"text-sm text-gray-500 mb-2",children:[r.jsx(ie,{to:"/admin",className:"hover:text-gray-700",children:"Admin"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx(ie,{to:"/admin/content",className:"hover:text-gray-700",children:"Content"}),r.jsx("span",{className:"mx-2",children:"/"}),r.jsx("span",{className:"text-gray-900 font-medium",children:"Gallery"})]}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Portfolio Gallery Management"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage gallery images, categorization, and case studies"})]}),r.jsx("div",{className:"mt-4 sm:mt-0",children:r.jsxs("button",{onClick:ee,className:"inline-flex items-center px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-all duration-200 shadow-md hover:shadow-lg",children:[r.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Upload New Image"]})})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex flex-wrap items-center gap-3",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Filter by category:"}),r.jsx("button",{onClick:()=>H(null),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i===null?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All"}),W.map(z=>r.jsx("button",{onClick:()=>H(z.slug),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${i===z.slug?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:z.name},z.id))]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 pb-12",children:D?r.jsx("div",{className:"flex items-center justify-center py-24",children:r.jsxs("div",{className:"flex flex-col items-center",children:[r.jsxs("svg",{className:"animate-spin h-12 w-12 text-yellow-400",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading gallery images..."})]})}):M.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 16l4.586-4.586a2 2 0 012.828 0L16 16m-2-2l1.586-1.586a2 2 0 012.828 0L20 14m-6-6h.01M6 20h12a2 2 0 002-2V6a2 2 0 00-2-2H6a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No images found"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:i?"No images in this category. Try a different filter or upload new images.":"Get started by uploading your first gallery image."}),r.jsx("button",{onClick:ee,className:"mt-6 inline-flex items-center px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-all",children:"Upload First Image"})]}):r.jsx("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6",children:M.map(z=>{const B=be(z.categories);return r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden hover:shadow-xl transition-all duration-200",children:[r.jsxs("div",{className:"relative aspect-square bg-gray-100",children:[r.jsx("img",{src:z.thumbnail_url||z.image_url,alt:z.alt_text||z.title,className:"w-full h-full object-cover",loading:"lazy"}),r.jsx("div",{className:"absolute top-2 right-2",children:r.jsx("span",{className:`px-3 py-1 text-xs font-bold rounded-full ${z.is_active?"bg-green-500 text-white":"bg-gray-400 text-white"}`,children:z.is_active?"Active":"Inactive"})})]}),r.jsxs("div",{className:"p-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2 line-clamp-1",children:z.title}),z.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-3 line-clamp-2",children:z.description}),B.length>0&&r.jsxs("div",{className:"flex flex-wrap gap-1 mb-3",children:[B.slice(0,2).map(re=>{var Q;return r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md",children:((Q=W.find(me=>me.slug===re))==null?void 0:Q.name)||re},re)}),B.length>2&&r.jsxs("span",{className:"px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded-md",children:["+",B.length-2," more"]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[r.jsx("button",{onClick:()=>J(z),className:"px-3 py-2 bg-blue-600 hover:bg-blue-700 text-white text-sm font-medium rounded-md transition-colors",children:"Edit"}),r.jsx("button",{onClick:()=>$(z),className:`px-3 py-2 text-sm font-medium rounded-md transition-colors ${z.is_active?"bg-gray-200 hover:bg-gray-300 text-gray-900":"bg-green-600 hover:bg-green-700 text-white"}`,children:z.is_active?"Deactivate":"Activate"}),r.jsx("button",{onClick:()=>X(z),className:"px-3 py-2 bg-purple-600 hover:bg-purple-700 text-white text-sm font-medium rounded-md transition-colors",children:"Create Case Study"}),r.jsx("button",{onClick:()=>se(z),className:"px-3 py-2 bg-red-600 hover:bg-red-700 text-white text-sm font-medium rounded-md transition-colors",children:"Delete"})]})]})]},z.id)})})}),l&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 transition-opacity",onClick:()=>c(!1)}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:r.jsxs("form",{onSubmit:C,children:[r.jsxs("div",{className:"bg-white px-6 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Upload New Image"}),r.jsx("button",{type:"button",onClick:()=>c(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"upload-title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"upload-title",type:"text",required:!0,value:p.title,onChange:z=>y(B=>({...B,title:z.target.value})),placeholder:"E.g., Premium Business Cards with Spot UV",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"upload-image-url",className:"block text-sm font-medium text-gray-700 mb-1",children:["Image URL ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"upload-image-url",type:"url",required:!0,value:p.image_url,onChange:z=>y(B=>({...B,image_url:z.target.value})),placeholder:"https://images.unsplash.com/...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Full URL to the image file (PNG/JPEG/WebP)"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"upload-thumbnail-url",className:"block text-sm font-medium text-gray-700 mb-1",children:"Thumbnail URL (Optional)"}),r.jsx("input",{id:"upload-thumbnail-url",type:"url",value:p.thumbnail_url,onChange:z=>y(B=>({...B,thumbnail_url:z.target.value})),placeholder:"https://images.unsplash.com/...?w=400",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Optional optimized thumbnail (will use main image if blank)"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"upload-alt-text",className:"block text-sm font-medium text-gray-700 mb-1",children:["Alt Text (SEO) ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"upload-alt-text",type:"text",required:!0,value:p.alt_text,onChange:z=>y(B=>({...B,alt_text:z.target.value})),placeholder:"Descriptive alt text for accessibility and SEO",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"upload-description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),r.jsx("textarea",{id:"upload-description",rows:3,value:p.description,onChange:z=>y(B=>({...B,description:z.target.value})),placeholder:"Brief description of the project...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-vertical"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categories (Select multiple)"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:W.map(z=>r.jsxs("button",{type:"button",onClick:()=>he(z.slug),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${p.categories.includes(z.slug)?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[p.categories.includes(z.slug)&&r.jsx("svg",{className:"inline h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),z.name]},z.id))})]})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-6 py-2 bg-white border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:K.isPending,className:"px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:K.isPending?"Uploading...":"Upload Image"})]})]})})]})}),d&&g&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 transition-opacity",onClick:()=>m(!1)}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:r.jsxs("form",{onSubmit:U,children:[r.jsxs("div",{className:"bg-white px-6 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Edit Image"}),r.jsx("button",{type:"button",onClick:()=>m(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"edit-title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Title ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"edit-title",type:"text",required:!0,value:v.title,onChange:z=>N(B=>({...B,title:z.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit-description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Description (Optional)"}),r.jsx("textarea",{id:"edit-description",rows:3,value:v.description,onChange:z=>N(B=>({...B,description:z.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-vertical"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Categories"}),r.jsx("div",{className:"flex flex-wrap gap-2",children:W.map(z=>r.jsxs("button",{type:"button",onClick:()=>le(z.slug),className:`px-4 py-2 rounded-lg text-sm font-medium transition-all ${v.categories.includes(z.slug)?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:[v.categories.includes(z.slug)&&r.jsx("svg",{className:"inline h-4 w-4 mr-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),z.name]},z.id))})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"edit-is-active",type:"checkbox",checked:v.is_active,onChange:z=>N(B=>({...B,is_active:z.target.checked})),className:"h-5 w-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),r.jsx("label",{htmlFor:"edit-is-active",className:"ml-3 text-sm font-medium text-gray-700",children:"Active (visible in public gallery)"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-6 py-2 bg-white border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:ne.isPending,className:"px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:ne.isPending?"Saving...":"Save Changes"})]})]})})]})}),u&&g&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 transition-opacity",onClick:()=>h(!1)}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:r.jsxs("form",{onSubmit:de,children:[r.jsxs("div",{className:"bg-white px-6 py-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Create Case Study"}),r.jsx("button",{type:"button",onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"mb-6 p-4 bg-blue-50 border border-blue-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-blue-800",children:[r.jsx("strong",{children:"Selected Image:"})," ",g.title]})}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"cs-title",className:"block text-sm font-medium text-gray-700 mb-1",children:["Case Study Title ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"cs-title",type:"text",required:!0,value:w.title,onChange:z=>j(B=>({...B,title:z.target.value})),placeholder:"E.g., Corporate Rebranding Package",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"cs-slug",className:"block text-sm font-medium text-gray-700 mb-1",children:["URL Slug ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"cs-slug",type:"text",required:!0,value:w.slug,onChange:z=>j(B=>({...B,slug:z.target.value.toLowerCase().replace(/[^a-z0-9-]/g,"-")})),placeholder:"corporate-rebranding-package",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"URL-friendly identifier (lowercase, hyphens only)"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"cs-service",className:"block text-sm font-medium text-gray-700 mb-1",children:["Service Used ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("select",{id:"cs-service",required:!0,value:w.service_id,onChange:z=>j(B=>({...B,service_id:z.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[r.jsx("option",{value:"",children:"Select service..."}),P.map(z=>r.jsx("option",{value:z.id,children:z.name},z.id))]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"cs-tier",className:"block text-sm font-medium text-gray-700 mb-1",children:["Tier Delivered ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("select",{id:"cs-tier",required:!0,value:w.tier_id,onChange:z=>j(B=>({...B,tier_id:z.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[r.jsx("option",{value:"",children:"Select tier..."}),V.map(z=>r.jsx("option",{value:z.tier.id,children:z.tier.name},z.tier.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"cs-description",className:"block text-sm font-medium text-gray-700 mb-1",children:"Project Description"}),r.jsx("textarea",{id:"cs-description",rows:4,value:w.description,onChange:z=>j(B=>({...B,description:z.target.value})),placeholder:"Detailed description of the project, challenges, and outcomes...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-vertical"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"cs-testimonial",className:"block text-sm font-medium text-gray-700 mb-1",children:"Client Testimonial (Optional)"}),r.jsx("textarea",{id:"cs-testimonial",rows:3,value:w.client_testimonial,onChange:z=>j(B=>({...B,client_testimonial:z.target.value})),placeholder:"Client feedback or testimonial...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-vertical"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{id:"cs-published",type:"checkbox",checked:w.is_published,onChange:z=>j(B=>({...B,is_published:z.target.checked})),className:"h-5 w-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),r.jsx("label",{htmlFor:"cs-published",className:"ml-3 text-sm font-medium text-gray-700",children:"Publish immediately (make visible on public site)"})]})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>h(!1),className:"px-6 py-2 bg-white border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:oe.isPending,className:"px-6 py-2 bg-purple-600 hover:bg-purple-700 text-white font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:oe.isPending?"Creating...":"Create Case Study"})]})]})})]})}),f&&g&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 transition-opacity",onClick:()=>b(!1)}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-md sm:w-full",children:[r.jsx("div",{className:"bg-white px-6 py-6",children:r.jsxs("div",{className:"flex items-start mb-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-12 w-12 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsxs("div",{className:"ml-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-2",children:"Delete Gallery Image"}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:["Are you sure you want to delete ",r.jsx("strong",{children:g.title}),"?"]}),r.jsx("p",{className:"text-sm text-red-600 font-medium",children:"This action cannot be undone."})]})]})}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>b(!1),className:"px-6 py-2 bg-white border-2 border-gray-300 text-gray-700 font-medium rounded-lg hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"button",onClick:q,disabled:G.isPending,className:"px-6 py-2 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:G.isPending?"Deleting...":"Delete Image"})]})]})]})})]})})};function sr(e){return`Minified Redux error #${e}; visit https://redux.js.org/Errors?code=${e} for the full message or use the non-minified dev environment for full errors. `}var oB=typeof Symbol=="function"&&Symbol.observable||"@@observable",jN=oB,wN=()=>Math.random().toString(36).substring(7).split("").join("."),lB={INIT:`@@redux/INIT${wN()}`,REPLACE:`@@redux/REPLACE${wN()}`},NN=lB;function cB(e){if(typeof e!="object"||e===null)return!1;let t=e;for(;Object.getPrototypeOf(t)!==null;)t=Object.getPrototypeOf(t);return Object.getPrototypeOf(e)===t||Object.getPrototypeOf(e)===null}function dA(e,t,n){if(typeof e!="function")throw new Error(sr(2));if(typeof t=="function"&&typeof n=="function"||typeof n=="function"&&typeof arguments[3]=="function")throw new Error(sr(0));if(typeof t=="function"&&typeof n>"u"&&(n=t,t=void 0),typeof n<"u"){if(typeof n!="function")throw new Error(sr(1));return n(dA)(e,t)}let s=e,a=t,i=new Map,o=i,l=0,c=!1;function d(){o===i&&(o=new Map,i.forEach((x,p)=>{o.set(p,x)}))}function m(){if(c)throw new Error(sr(3));return a}function u(x){if(typeof x!="function")throw new Error(sr(4));if(c)throw new Error(sr(5));let p=!0;d();const y=l++;return o.set(y,x),function(){if(p){if(c)throw new Error(sr(6));p=!1,d(),o.delete(y),i=null}}}function h(x){if(!cB(x))throw new Error(sr(7));if(typeof x.type>"u")throw new Error(sr(8));if(typeof x.type!="string")throw new Error(sr(17));if(c)throw new Error(sr(9));try{c=!0,a=s(a,x)}finally{c=!1}return(i=o).forEach(y=>{y()}),x}function f(x){if(typeof x!="function")throw new Error(sr(10));s=x,h({type:NN.REPLACE})}function b(){const x=u;return{subscribe(p){if(typeof p!="object"||p===null)throw new Error(sr(11));function y(){const N=p;N.next&&N.next(m())}return y(),{unsubscribe:x(y)}},[jN](){return this}}}return h({type:NN.INIT}),{dispatch:h,subscribe:u,getState:m,replaceReducer:f,[jN]:b}}function _N(e,t){return function(...n){return t(e.apply(this,n))}}function kN(e,t){if(typeof e=="function")return _N(e,t);if(typeof e!="object"||e===null)throw new Error(sr(16));const n={};for(const s in e){const a=e[s];typeof a=="function"&&(n[s]=_N(a,t))}return n}function uA(...e){return e.length===0?t=>t:e.length===1?e[0]:e.reduce((t,n)=>(...s)=>t(n(...s)))}function dB(...e){return t=>(n,s)=>{const a=t(n,s);let i=()=>{throw new Error(sr(15))};const o={getState:a.getState,dispatch:(c,...d)=>i(c,...d)},l=e.map(c=>c(o));return i=uA(...l)(a.dispatch),{...a,dispatch:i}}}var uB={};/**
 * @license React
 * use-sync-external-store-with-selector.production.js
 *
 * Copyright (c) Meta Platforms, Inc. and affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wu=k;function mB(e,t){return e===t&&(e!==0||1/e===1/t)||e!==e&&t!==t}var hB=typeof Object.is=="function"?Object.is:mB,pB=wu.useSyncExternalStore,fB=wu.useRef,xB=wu.useEffect,gB=wu.useMemo,yB=wu.useDebugValue;uB.useSyncExternalStoreWithSelector=function(e,t,n,s,a){var i=fB(null);if(i.current===null){var o={hasValue:!1,value:null};i.current=o}else o=i.current;i=gB(function(){function c(f){if(!d){if(d=!0,m=f,f=s(f),a!==void 0&&o.hasValue){var b=o.value;if(a(b,f))return u=b}return u=f}if(b=u,hB(m,f))return b;var g=s(f);return a!==void 0&&a(b,g)?(m=f,b):(m=f,u=g)}var d=!1,m,u,h=n===void 0?null:n;return[function(){return c(t())},h===null?void 0:function(){return c(h())}]},[t,n,s,a]);var l=pB(e,i[0],i[1]);return xB(function(){o.hasValue=!0,o.value=l},[l]),yB(l),l};var bB=k.version.startsWith("19"),vB=Symbol.for(bB?"react.transitional.element":"react.element"),jB=Symbol.for("react.portal"),wB=Symbol.for("react.fragment"),NB=Symbol.for("react.strict_mode"),_B=Symbol.for("react.profiler"),kB=Symbol.for("react.consumer"),SB=Symbol.for("react.context"),mA=Symbol.for("react.forward_ref"),CB=Symbol.for("react.suspense"),AB=Symbol.for("react.suspense_list"),w1=Symbol.for("react.memo"),PB=Symbol.for("react.lazy"),EB=mA,OB=w1;function TB(e){if(typeof e=="object"&&e!==null){const{$$typeof:t}=e;switch(t){case vB:switch(e=e.type,e){case wB:case _B:case NB:case CB:case AB:return e;default:switch(e=e&&e.$$typeof,e){case SB:case mA:case PB:case w1:return e;case kB:return e;default:return t}}case jB:return t}}}function MB(e){return TB(e)===w1}function LB(e,t,n,s,{areStatesEqual:a,areOwnPropsEqual:i,areStatePropsEqual:o}){let l=!1,c,d,m,u,h;function f(y,v){return c=y,d=v,m=e(c,d),u=t(s,d),h=n(m,u,d),l=!0,h}function b(){return m=e(c,d),t.dependsOnOwnProps&&(u=t(s,d)),h=n(m,u,d),h}function g(){return e.dependsOnOwnProps&&(m=e(c,d)),t.dependsOnOwnProps&&(u=t(s,d)),h=n(m,u,d),h}function x(){const y=e(c,d),v=!o(y,m);return m=y,v&&(h=n(m,u,d)),h}function p(y,v){const N=!i(v,d),w=!a(y,c,v,d);return c=y,d=v,N&&w?b():N?g():w?x():h}return function(v,N){return l?p(v,N):f(v,N)}}function $B(e,{initMapStateToProps:t,initMapDispatchToProps:n,initMergeProps:s,...a}){const i=t(e,a),o=n(e,a),l=s(e,a);return LB(i,o,l,e,a)}function RB(e,t){const n={};for(const s in e){const a=e[s];typeof a=="function"&&(n[s]=(...i)=>t(a(...i)))}return n}function jy(e){return function(n){const s=e(n);function a(){return s}return a.dependsOnOwnProps=!1,a}}function SN(e){return e.dependsOnOwnProps?!!e.dependsOnOwnProps:e.length!==1}function hA(e,t){return function(s,{displayName:a}){const i=function(l,c){return i.dependsOnOwnProps?i.mapToProps(l,c):i.mapToProps(l,void 0)};return i.dependsOnOwnProps=!0,i.mapToProps=function(l,c){i.mapToProps=e,i.dependsOnOwnProps=SN(e);let d=i(l,c);return typeof d=="function"&&(i.mapToProps=d,i.dependsOnOwnProps=SN(d),d=i(l,c)),d},i}}function N1(e,t){return(n,s)=>{throw new Error(`Invalid value of type ${typeof e} for ${t} argument when connecting component ${s.wrappedComponentName}.`)}}function IB(e){return e&&typeof e=="object"?jy(t=>RB(e,t)):e?typeof e=="function"?hA(e):N1(e,"mapDispatchToProps"):jy(t=>({dispatch:t}))}function DB(e){return e?typeof e=="function"?hA(e):N1(e,"mapStateToProps"):jy(()=>({}))}function FB(e,t,n){return{...n,...e,...t}}function BB(e){return function(n,{displayName:s,areMergedPropsEqual:a}){let i=!1,o;return function(c,d,m){const u=e(c,d,m);return i?a(u,o)||(o=u):(i=!0,o=u),o}}}function zB(e){return e?typeof e=="function"?BB(e):N1(e,"mergeProps"):()=>FB}function qB(e){e()}function UB(){let e=null,t=null;return{clear(){e=null,t=null},notify(){qB(()=>{let n=e;for(;n;)n.callback(),n=n.next})},get(){const n=[];let s=e;for(;s;)n.push(s),s=s.next;return n},subscribe(n){let s=!0;const a=t={callback:n,next:null,prev:t};return a.prev?a.prev.next=a:e=a,function(){!s||e===null||(s=!1,a.next?a.next.prev=a.prev:t=a.prev,a.prev?a.prev.next=a.next:e=a.next)}}}}var CN={notify(){},get:()=>[]};function pA(e,t){let n,s=CN,a=0,i=!1;function o(g){m();const x=s.subscribe(g);let p=!1;return()=>{p||(p=!0,x(),u())}}function l(){s.notify()}function c(){b.onStateChange&&b.onStateChange()}function d(){return i}function m(){a++,n||(n=t?t.addNestedSub(c):e.subscribe(c),s=UB())}function u(){a--,n&&a===0&&(n(),n=void 0,s.clear(),s=CN)}function h(){i||(i=!0,m())}function f(){i&&(i=!1,u())}const b={addNestedSub:o,notifyNestedSubs:l,handleChangeWrapper:c,isSubscribed:d,trySubscribe:h,tryUnsubscribe:f,getListeners:()=>s};return b}var WB=()=>typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u",VB=WB(),HB=()=>typeof navigator<"u"&&navigator.product==="ReactNative",KB=HB(),GB=()=>VB||KB?k.useLayoutEffect:k.useEffect,Ah=GB();function AN(e,t){return e===t?e!==0||t!==0||1/e===1/t:e!==e&&t!==t}function rx(e,t){if(AN(e,t))return!0;if(typeof e!="object"||e===null||typeof t!="object"||t===null)return!1;const n=Object.keys(e),s=Object.keys(t);if(n.length!==s.length)return!1;for(let a=0;a<n.length;a++)if(!Object.prototype.hasOwnProperty.call(t,n[a])||!AN(e[n[a]],t[n[a]]))return!1;return!0}var QB={childContextTypes:!0,contextType:!0,contextTypes:!0,defaultProps:!0,displayName:!0,getDefaultProps:!0,getDerivedStateFromError:!0,getDerivedStateFromProps:!0,mixins:!0,propTypes:!0,type:!0},YB={name:!0,length:!0,prototype:!0,caller:!0,callee:!0,arguments:!0,arity:!0},XB={$$typeof:!0,render:!0,defaultProps:!0,displayName:!0,propTypes:!0},fA={$$typeof:!0,compare:!0,defaultProps:!0,displayName:!0,propTypes:!0,type:!0},JB={[EB]:XB,[OB]:fA};function PN(e){return MB(e)?fA:JB[e.$$typeof]||QB}var ZB=Object.defineProperty,ez=Object.getOwnPropertyNames,EN=Object.getOwnPropertySymbols,tz=Object.getOwnPropertyDescriptor,rz=Object.getPrototypeOf,ON=Object.prototype;function wy(e,t){if(typeof t!="string"){if(ON){const i=rz(t);i&&i!==ON&&wy(e,i)}let n=ez(t);EN&&(n=n.concat(EN(t)));const s=PN(e),a=PN(t);for(let i=0;i<n.length;++i){const o=n[i];if(!YB[o]&&!(a&&a[o])&&!(s&&s[o])){const l=tz(t,o);try{ZB(e,o,l)}catch{}}}}return e}var nx=Symbol.for("react-redux-context"),sx=typeof globalThis<"u"?globalThis:{};function nz(){if(!k.createContext)return{};const e=sx[nx]??(sx[nx]=new Map);let t=e.get(k.createContext);return t||(t=k.createContext(null),e.set(k.createContext,t)),t}var xA=nz(),sz=[null,null];function az(e,t,n){Ah(()=>e(...t),n)}function iz(e,t,n,s,a,i){e.current=s,n.current=!1,a.current&&(a.current=null,i())}function oz(e,t,n,s,a,i,o,l,c,d,m){if(!e)return()=>{};let u=!1,h=null;const f=()=>{if(u||!l.current)return;const g=t.getState();let x,p;try{x=s(g,a.current)}catch(y){p=y,h=y}p||(h=null),x===i.current?o.current||d():(i.current=x,c.current=x,o.current=!0,m())};return n.onStateChange=f,n.trySubscribe(),f(),()=>{if(u=!0,n.tryUnsubscribe(),n.onStateChange=null,h)throw h}}function lz(e,t){return e===t}function cz(e,t,n,{pure:s,areStatesEqual:a=lz,areOwnPropsEqual:i=rx,areStatePropsEqual:o=rx,areMergedPropsEqual:l=rx,forwardRef:c=!1,context:d=xA}={}){const m=d,u=DB(e),h=IB(t),f=zB(n),b=!!e;return x=>{const p=x.displayName||x.name||"Component",y=`Connect(${p})`,v={shouldHandleStateChanges:b,displayName:y,wrappedComponentName:p,WrappedComponent:x,initMapStateToProps:u,initMapDispatchToProps:h,initMergeProps:f,areStatesEqual:a,areStatePropsEqual:o,areOwnPropsEqual:i,areMergedPropsEqual:l};function N(_){const[S,T,A]=k.useMemo(()=>{const{reactReduxForwardedRef:C,...U}=_;return[_.context,C,U]},[_]),E=k.useMemo(()=>{let C=m;return S!=null&&S.Consumer,C},[S,m]),R=k.useContext(E),I=!!_.store&&!!_.store.getState&&!!_.store.dispatch,O=!!R&&!!R.store,L=I?_.store:R.store,F=O?R.getServerState:L.getState,M=k.useMemo(()=>$B(L.dispatch,v),[L]),[D,W]=k.useMemo(()=>{if(!b)return sz;const C=pA(L,I?void 0:R.subscription),U=C.notifyNestedSubs.bind(C);return[C,U]},[L,I,R]),P=k.useMemo(()=>I?R:{...R,subscription:D},[I,R,D]),V=k.useRef(void 0),K=k.useRef(A),ne=k.useRef(void 0),G=k.useRef(!1),oe=k.useRef(!1),H=k.useRef(void 0);Ah(()=>(oe.current=!0,()=>{oe.current=!1}),[]);const ee=k.useMemo(()=>()=>ne.current&&A===K.current?ne.current:M(L.getState(),A),[L,A]),J=k.useMemo(()=>U=>D?oz(b,L,D,M,K,V,G,oe,ne,W,U):()=>{},[D]);az(iz,[K,V,G,A,ne,W]);let X;try{X=k.useSyncExternalStore(J,ee,F?()=>M(F(),A):ee)}catch(C){throw H.current&&(C.message+=`
The error may be correlated with this previous error:
${H.current.stack}

`),C}Ah(()=>{H.current=void 0,ne.current=void 0,V.current=X});const se=k.useMemo(()=>k.createElement(x,{...X,ref:T}),[T,x,X]);return k.useMemo(()=>b?k.createElement(E.Provider,{value:P},se):se,[E,se,P])}const j=k.memo(N);if(j.WrappedComponent=x,j.displayName=N.displayName=y,c){const S=k.forwardRef(function(A,E){return k.createElement(j,{...A,reactReduxForwardedRef:E})});return S.displayName=y,S.WrappedComponent=x,wy(S,x)}return wy(j,x)}}var gA=cz;function dz(e){const{children:t,context:n,serverState:s,store:a}=e,i=k.useMemo(()=>{const c=pA(a);return{store:a,subscription:c,getServerState:s?()=>s:void 0}},[a,s]),o=k.useMemo(()=>a.getState(),[a]);Ah(()=>{const{subscription:c}=i;return c.onStateChange=c.notifyNestedSubs,c.trySubscribe(),o!==a.getState()&&c.notifyNestedSubs(),()=>{c.tryUnsubscribe(),c.onStateChange=void 0}},[i,o]);const l=n||xA;return k.createElement(l.Provider,{value:i},t)}var uz=dz,mz="Invariant failed";function va(e,t){throw new Error(mz)}var Cn=function(t){var n=t.top,s=t.right,a=t.bottom,i=t.left,o=s-i,l=a-n,c={top:n,right:s,bottom:a,left:i,width:o,height:l,x:i,y:n,center:{x:(s+i)/2,y:(a+n)/2}};return c},_1=function(t,n){return{top:t.top-n.top,left:t.left-n.left,bottom:t.bottom+n.bottom,right:t.right+n.right}},TN=function(t,n){return{top:t.top+n.top,left:t.left+n.left,bottom:t.bottom-n.bottom,right:t.right-n.right}},hz=function(t,n){return{top:t.top+n.y,left:t.left+n.x,bottom:t.bottom+n.y,right:t.right+n.x}},ax={top:0,right:0,bottom:0,left:0},k1=function(t){var n=t.borderBox,s=t.margin,a=s===void 0?ax:s,i=t.border,o=i===void 0?ax:i,l=t.padding,c=l===void 0?ax:l,d=Cn(_1(n,a)),m=Cn(TN(n,o)),u=Cn(TN(m,c));return{marginBox:d,borderBox:Cn(n),paddingBox:m,contentBox:u,margin:a,border:o,padding:c}},Kr=function(t){var n=t.slice(0,-2),s=t.slice(-2);if(s!=="px")return 0;var a=Number(n);return isNaN(a)&&va(),a},pz=function(){return{x:window.pageXOffset,y:window.pageYOffset}},Ph=function(t,n){var s=t.borderBox,a=t.border,i=t.margin,o=t.padding,l=hz(s,n);return k1({borderBox:l,border:a,margin:i,padding:o})},Eh=function(t,n){return n===void 0&&(n=pz()),Ph(t,n)},yA=function(t,n){var s={top:Kr(n.marginTop),right:Kr(n.marginRight),bottom:Kr(n.marginBottom),left:Kr(n.marginLeft)},a={top:Kr(n.paddingTop),right:Kr(n.paddingRight),bottom:Kr(n.paddingBottom),left:Kr(n.paddingLeft)},i={top:Kr(n.borderTopWidth),right:Kr(n.borderRightWidth),bottom:Kr(n.borderBottomWidth),left:Kr(n.borderLeftWidth)};return k1({borderBox:t,margin:s,padding:a,border:i})},bA=function(t){var n=t.getBoundingClientRect(),s=window.getComputedStyle(t);return yA(n,s)},fd=function(t){var n=[],s=null,a=function(){for(var o=arguments.length,l=new Array(o),c=0;c<o;c++)l[c]=arguments[c];n=l,!s&&(s=requestAnimationFrame(function(){s=null,t.apply(void 0,n)}))};return a.cancel=function(){s&&(cancelAnimationFrame(s),s=null)},a};function Oh(){return Oh=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)({}).hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Oh.apply(null,arguments)}function vA(e,t){}vA.bind(null,"warn");vA.bind(null,"error");function pa(){}function fz(e,t){return{...e,...t}}function an(e,t,n){const s=t.map(a=>{const i=fz(n,a.options);return e.addEventListener(a.eventName,a.fn,i),function(){e.removeEventListener(a.eventName,a.fn,i)}});return function(){s.forEach(i=>{i()})}}const xz="Invariant failed";class Th extends Error{}Th.prototype.toString=function(){return this.message};function ye(e,t){throw new Th(xz)}class gz extends Y.Component{constructor(...t){super(...t),this.callbacks=null,this.unbind=pa,this.onWindowError=n=>{const s=this.getCallbacks();s.isDragging()&&s.tryAbort(),n.error instanceof Th&&n.preventDefault()},this.getCallbacks=()=>{if(!this.callbacks)throw new Error("Unable to find AppCallbacks in <ErrorBoundary/>");return this.callbacks},this.setCallbacks=n=>{this.callbacks=n}}componentDidMount(){this.unbind=an(window,[{eventName:"error",fn:this.onWindowError}])}componentDidCatch(t){if(t instanceof Th){this.setState({});return}throw t}componentWillUnmount(){this.unbind()}render(){return this.props.children(this.setCallbacks)}}const yz=`
  Press space bar to start a drag.
  When dragging you can use the arrow keys to move the item around and escape to cancel.
  Some screen readers may require you to be in focus mode or to use your pass through key
`,Mh=e=>e+1,bz=e=>`
  You have lifted an item in position ${Mh(e.source.index)}
`,jA=(e,t)=>{const n=e.droppableId===t.droppableId,s=Mh(e.index),a=Mh(t.index);return n?`
      You have moved the item from position ${s}
      to position ${a}
    `:`
    You have moved the item from position ${s}
    in list ${e.droppableId}
    to list ${t.droppableId}
    in position ${a}
  `},wA=(e,t,n)=>t.droppableId===n.droppableId?`
      The item ${e}
      has been combined with ${n.draggableId}`:`
      The item ${e}
      in list ${t.droppableId}
      has been combined with ${n.draggableId}
      in list ${n.droppableId}
    `,vz=e=>{const t=e.destination;if(t)return jA(e.source,t);const n=e.combine;return n?wA(e.draggableId,e.source,n):"You are over an area that cannot be dropped on"},MN=e=>`
  The item has returned to its starting position
  of ${Mh(e.index)}
`,jz=e=>{if(e.reason==="CANCEL")return`
      Movement cancelled.
      ${MN(e.source)}
    `;const t=e.destination,n=e.combine;return t?`
      You have dropped the item.
      ${jA(e.source,t)}
    `:n?`
      You have dropped the item.
      ${wA(e.draggableId,e.source,n)}
    `:`
    The item has been dropped while not over a drop area.
    ${MN(e.source)}
  `},Qm={dragHandleUsageInstructions:yz,onDragStart:bz,onDragUpdate:vz,onDragEnd:jz};function wz(e,t){return!!(e===t||Number.isNaN(e)&&Number.isNaN(t))}function NA(e,t){if(e.length!==t.length)return!1;for(let n=0;n<e.length;n++)if(!wz(e[n],t[n]))return!1;return!0}function qe(e,t){const n=k.useState(()=>({inputs:t,result:e()}))[0],s=k.useRef(!0),a=k.useRef(n),o=s.current||!!(t&&a.current.inputs&&NA(t,a.current.inputs))?a.current:{inputs:t,result:e()};return k.useEffect(()=>{s.current=!1,a.current=o},[o]),o.result}function Ae(e,t){return qe(()=>e,t)}const Dt={x:0,y:0},qt=(e,t)=>({x:e.x+t.x,y:e.y+t.y}),Fr=(e,t)=>({x:e.x-t.x,y:e.y-t.y}),fa=(e,t)=>e.x===t.x&&e.y===t.y,El=e=>({x:e.x!==0?-e.x:0,y:e.y!==0?-e.y:0}),ki=(e,t,n=0)=>e==="x"?{x:t,y:n}:{x:n,y:t},xd=(e,t)=>Math.sqrt((t.x-e.x)**2+(t.y-e.y)**2),LN=(e,t)=>Math.min(...t.map(n=>xd(e,n))),_A=e=>t=>({x:e(t.x),y:e(t.y)});var Nz=(e,t)=>{const n=Cn({top:Math.max(t.top,e.top),right:Math.min(t.right,e.right),bottom:Math.min(t.bottom,e.bottom),left:Math.max(t.left,e.left)});return n.width<=0||n.height<=0?null:n};const Nu=(e,t)=>({top:e.top+t.y,left:e.left+t.x,bottom:e.bottom+t.y,right:e.right+t.x}),$N=e=>[{x:e.left,y:e.top},{x:e.right,y:e.top},{x:e.left,y:e.bottom},{x:e.right,y:e.bottom}],_z={top:0,right:0,bottom:0,left:0},kz=(e,t)=>t?Nu(e,t.scroll.diff.displacement):e,Sz=(e,t,n)=>n&&n.increasedBy?{...e,[t.end]:e[t.end]+n.increasedBy[t.line]}:e,Cz=(e,t)=>t&&t.shouldClipSubject?Nz(t.pageMarginBox,e):Cn(e);var Qo=({page:e,withPlaceholder:t,axis:n,frame:s})=>{const a=kz(e.marginBox,s),i=Sz(a,n,t),o=Cz(i,s);return{page:e,withPlaceholder:t,active:o}},S1=(e,t)=>{e.frame||ye();const n=e.frame,s=Fr(t,n.scroll.initial),a=El(s),i={...n,scroll:{initial:n.scroll.initial,current:t,diff:{value:s,displacement:a},max:n.scroll.max}},o=Qo({page:e.subject.page,withPlaceholder:e.subject.withPlaceholder,axis:e.axis,frame:i});return{...e,frame:i,subject:o}};function It(e,t=NA){let n=null;function s(...a){if(n&&n.lastThis===this&&t(a,n.lastArgs))return n.lastResult;const i=e.apply(this,a);return n={lastResult:i,lastArgs:a,lastThis:this},i}return s.clear=function(){n=null},s}const kA=It(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),SA=It(e=>e.reduce((t,n)=>(t[n.descriptor.id]=n,t),{})),dp=It(e=>Object.values(e)),Az=It(e=>Object.values(e));var Ol=It((e,t)=>Az(t).filter(s=>e===s.descriptor.droppableId).sort((s,a)=>s.descriptor.index-a.descriptor.index));function C1(e){return e.at&&e.at.type==="REORDER"?e.at.destination:null}function up(e){return e.at&&e.at.type==="COMBINE"?e.at.combine:null}var mp=It((e,t)=>t.filter(n=>n.descriptor.id!==e.descriptor.id)),Pz=({isMovingForward:e,draggable:t,destination:n,insideDestination:s,previousImpact:a})=>{if(!n.isCombineEnabled||!C1(a))return null;function o(f){const b={type:"COMBINE",combine:{draggableId:f,droppableId:n.descriptor.id}};return{...a,at:b}}const l=a.displaced.all,c=l.length?l[0]:null;if(e)return c?o(c):null;const d=mp(t,s);if(!c){if(!d.length)return null;const f=d[d.length-1];return o(f.descriptor.id)}const m=d.findIndex(f=>f.descriptor.id===c);m===-1&&ye();const u=m-1;if(u<0)return null;const h=d[u];return o(h.descriptor.id)},Tl=(e,t)=>e.descriptor.droppableId===t.descriptor.id;const CA={point:Dt,value:0},gd={invisible:{},visible:{},all:[]},Ez={displaced:gd,displacedBy:CA,at:null};var cn=(e,t)=>n=>e<=n&&n<=t,AA=e=>{const t=cn(e.top,e.bottom),n=cn(e.left,e.right);return s=>{if(t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right))return!0;const i=t(s.top)||t(s.bottom),o=n(s.left)||n(s.right);if(i&&o)return!0;const c=s.top<e.top&&s.bottom>e.bottom,d=s.left<e.left&&s.right>e.right;return c&&d?!0:c&&o||d&&i}},Oz=e=>{const t=cn(e.top,e.bottom),n=cn(e.left,e.right);return s=>t(s.top)&&t(s.bottom)&&n(s.left)&&n(s.right)};const A1={direction:"vertical",line:"y",crossAxisLine:"x",start:"top",end:"bottom",size:"height",crossAxisStart:"left",crossAxisEnd:"right",crossAxisSize:"width"},PA={direction:"horizontal",line:"x",crossAxisLine:"y",start:"left",end:"right",size:"width",crossAxisStart:"top",crossAxisEnd:"bottom",crossAxisSize:"height"};var Tz=e=>t=>{const n=cn(t.top,t.bottom),s=cn(t.left,t.right);return a=>e===A1?n(a.top)&&n(a.bottom):s(a.left)&&s(a.right)};const Mz=(e,t)=>{const n=t.frame?t.frame.scroll.diff.displacement:Dt;return Nu(e,n)},Lz=(e,t,n)=>t.subject.active?n(t.subject.active)(e):!1,$z=(e,t,n)=>n(t)(e),P1=({target:e,destination:t,viewport:n,withDroppableDisplacement:s,isVisibleThroughFrameFn:a})=>{const i=s?Mz(e,t):e;return Lz(i,t,a)&&$z(i,n,a)},Rz=e=>P1({...e,isVisibleThroughFrameFn:AA}),EA=e=>P1({...e,isVisibleThroughFrameFn:Oz}),Iz=e=>P1({...e,isVisibleThroughFrameFn:Tz(e.destination.axis)}),Dz=(e,t,n)=>{if(typeof n=="boolean")return n;if(!t)return!0;const{invisible:s,visible:a}=t;if(s[e])return!1;const i=a[e];return i?i.shouldAnimate:!0};function Fz(e,t){const n=e.page.marginBox,s={top:t.point.y,right:0,bottom:0,left:t.point.x};return Cn(_1(n,s))}function yd({afterDragging:e,destination:t,displacedBy:n,viewport:s,forceShouldAnimate:a,last:i}){return e.reduce(function(l,c){const d=Fz(c,n),m=c.descriptor.id;if(l.all.push(m),!Rz({target:d,destination:t,viewport:s,withDroppableDisplacement:!0}))return l.invisible[c.descriptor.id]=!0,l;const h=Dz(m,i,a),f={draggableId:m,shouldAnimate:h};return l.visible[m]=f,l},{all:[],visible:{},invisible:{}})}function Bz(e,t){if(!e.length)return 0;const n=e[e.length-1].descriptor.index;return t.inHomeList?n:n+1}function RN({insideDestination:e,inHomeList:t,displacedBy:n,destination:s}){const a=Bz(e,{inHomeList:t});return{displaced:gd,displacedBy:n,at:{type:"REORDER",destination:{droppableId:s.descriptor.id,index:a}}}}function Lh({draggable:e,insideDestination:t,destination:n,viewport:s,displacedBy:a,last:i,index:o,forceShouldAnimate:l}){const c=Tl(e,n);if(o==null)return RN({insideDestination:t,inHomeList:c,displacedBy:a,destination:n});const d=t.find(b=>b.descriptor.index===o);if(!d)return RN({insideDestination:t,inHomeList:c,displacedBy:a,destination:n});const m=mp(e,t),u=t.indexOf(d),h=m.slice(u);return{displaced:yd({afterDragging:h,destination:n,displacedBy:a,last:i,viewport:s.frame,forceShouldAnimate:l}),displacedBy:a,at:{type:"REORDER",destination:{droppableId:n.descriptor.id,index:o}}}}function ja(e,t){return!!t.effected[e]}var zz=({isMovingForward:e,destination:t,draggables:n,combine:s,afterCritical:a})=>{if(!t.isCombineEnabled)return null;const i=s.draggableId,l=n[i].descriptor.index;return ja(i,a)?e?l:l-1:e?l+1:l},qz=({isMovingForward:e,isInHomeList:t,insideDestination:n,location:s})=>{if(!n.length)return null;const a=s.index,i=e?a+1:a-1,o=n[0].descriptor.index,l=n[n.length-1].descriptor.index,c=t?l:l+1;return i<o||i>c?null:i},Uz=({isMovingForward:e,isInHomeList:t,draggable:n,draggables:s,destination:a,insideDestination:i,previousImpact:o,viewport:l,afterCritical:c})=>{const d=o.at;if(d||ye(),d.type==="REORDER"){const u=qz({isMovingForward:e,isInHomeList:t,location:d.destination,insideDestination:i});return u==null?null:Lh({draggable:n,insideDestination:i,destination:a,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:u})}const m=zz({isMovingForward:e,destination:a,displaced:o.displaced,draggables:s,combine:d.combine,afterCritical:c});return m==null?null:Lh({draggable:n,insideDestination:i,destination:a,viewport:l,last:o.displaced,displacedBy:o.displacedBy,index:m})},Wz=({displaced:e,afterCritical:t,combineWith:n,displacedBy:s})=>{const a=!!(e.visible[n]||e.invisible[n]);return ja(n,t)?a?Dt:El(s.point):a?s.point:Dt},Vz=({afterCritical:e,impact:t,draggables:n})=>{const s=up(t);s||ye();const a=s.draggableId,i=n[a].page.borderBox.center,o=Wz({displaced:t.displaced,afterCritical:e,combineWith:a,displacedBy:t.displacedBy});return qt(i,o)};const OA=(e,t)=>t.margin[e.start]+t.borderBox[e.size]/2,Hz=(e,t)=>t.margin[e.end]+t.borderBox[e.size]/2,E1=(e,t,n)=>t[e.crossAxisStart]+n.margin[e.crossAxisStart]+n.borderBox[e.crossAxisSize]/2,IN=({axis:e,moveRelativeTo:t,isMoving:n})=>ki(e.line,t.marginBox[e.end]+OA(e,n),E1(e,t.marginBox,n)),DN=({axis:e,moveRelativeTo:t,isMoving:n})=>ki(e.line,t.marginBox[e.start]-Hz(e,n),E1(e,t.marginBox,n)),Kz=({axis:e,moveInto:t,isMoving:n})=>ki(e.line,t.contentBox[e.start]+OA(e,n),E1(e,t.contentBox,n));var Gz=({impact:e,draggable:t,draggables:n,droppable:s,afterCritical:a})=>{const i=Ol(s.descriptor.id,n),o=t.page,l=s.axis;if(!i.length)return Kz({axis:l,moveInto:s.page,isMoving:o});const{displaced:c,displacedBy:d}=e,m=c.all[0];if(m){const h=n[m];if(ja(m,a))return DN({axis:l,moveRelativeTo:h.page,isMoving:o});const f=Ph(h.page,d.point);return DN({axis:l,moveRelativeTo:f,isMoving:o})}const u=i[i.length-1];if(u.descriptor.id===t.descriptor.id)return o.borderBox.center;if(ja(u.descriptor.id,a)){const h=Ph(u.page,El(a.displacedBy.point));return IN({axis:l,moveRelativeTo:h,isMoving:o})}return IN({axis:l,moveRelativeTo:u.page,isMoving:o})},Ny=(e,t)=>{const n=e.frame;return n?qt(t,n.scroll.diff.displacement):t};const Qz=({impact:e,draggable:t,droppable:n,draggables:s,afterCritical:a})=>{const i=t.page.borderBox.center,o=e.at;return!n||!o?i:o.type==="REORDER"?Gz({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:a}):Vz({impact:e,draggables:s,afterCritical:a})};var hp=e=>{const t=Qz(e),n=e.droppable;return n?Ny(n,t):t},TA=(e,t)=>{const n=Fr(t,e.scroll.initial),s=El(n);return{frame:Cn({top:t.y,bottom:t.y+e.frame.height,left:t.x,right:t.x+e.frame.width}),scroll:{initial:e.scroll.initial,max:e.scroll.max,current:t,diff:{value:n,displacement:s}}}};function FN(e,t){return e.map(n=>t[n])}function Yz(e,t){for(let n=0;n<t.length;n++){const s=t[n].visible[e];if(s)return s}return null}var Xz=({impact:e,viewport:t,destination:n,draggables:s,maxScrollChange:a})=>{const i=TA(t,qt(t.scroll.current,a)),o=n.frame?S1(n,qt(n.frame.scroll.current,a)):n,l=e.displaced,c=yd({afterDragging:FN(l.all,s),destination:n,displacedBy:e.displacedBy,viewport:i.frame,last:l,forceShouldAnimate:!1}),d=yd({afterDragging:FN(l.all,s),destination:o,displacedBy:e.displacedBy,viewport:t.frame,last:l,forceShouldAnimate:!1}),m={},u={},h=[l,c,d];return l.all.forEach(b=>{const g=Yz(b,h);if(g){u[b]=g;return}m[b]=!0}),{...e,displaced:{all:l.all,invisible:m,visible:u}}},Jz=(e,t)=>qt(e.scroll.diff.displacement,t),O1=({pageBorderBoxCenter:e,draggable:t,viewport:n})=>{const s=Jz(n,e),a=Fr(s,t.page.borderBox.center);return qt(t.client.borderBox.center,a)},MA=({draggable:e,destination:t,newPageBorderBoxCenter:n,viewport:s,withDroppableDisplacement:a,onlyOnMainAxis:i=!1})=>{const o=Fr(n,e.page.borderBox.center),c={target:Nu(e.page.borderBox,o),destination:t,withDroppableDisplacement:a,viewport:s};return i?Iz(c):EA(c)},Zz=({isMovingForward:e,draggable:t,destination:n,draggables:s,previousImpact:a,viewport:i,previousPageBorderBoxCenter:o,previousClientSelection:l,afterCritical:c})=>{if(!n.isEnabled)return null;const d=Ol(n.descriptor.id,s),m=Tl(t,n),u=Pz({isMovingForward:e,draggable:t,destination:n,insideDestination:d,previousImpact:a})||Uz({isMovingForward:e,isInHomeList:m,draggable:t,draggables:s,destination:n,insideDestination:d,previousImpact:a,viewport:i,afterCritical:c});if(!u)return null;const h=hp({impact:u,draggable:t,droppable:n,draggables:s,afterCritical:c});if(MA({draggable:t,destination:n,newPageBorderBoxCenter:h,viewport:i.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0}))return{clientSelection:O1({pageBorderBoxCenter:h,draggable:t,viewport:i}),impact:u,scrollJumpRequest:null};const b=Fr(h,o),g=Xz({impact:u,viewport:i,destination:n,draggables:s,maxScrollChange:b});return{clientSelection:l,impact:g,scrollJumpRequest:b}};const nr=e=>{const t=e.subject.active;return t||ye(),t};var eq=({isMovingForward:e,pageBorderBoxCenter:t,source:n,droppables:s,viewport:a})=>{const i=n.subject.active;if(!i)return null;const o=n.axis,l=cn(i[o.start],i[o.end]),c=dp(s).filter(m=>m!==n).filter(m=>m.isEnabled).filter(m=>!!m.subject.active).filter(m=>AA(a.frame)(nr(m))).filter(m=>{const u=nr(m);return e?i[o.crossAxisEnd]<u[o.crossAxisEnd]:u[o.crossAxisStart]<i[o.crossAxisStart]}).filter(m=>{const u=nr(m),h=cn(u[o.start],u[o.end]);return l(u[o.start])||l(u[o.end])||h(i[o.start])||h(i[o.end])}).sort((m,u)=>{const h=nr(m)[o.crossAxisStart],f=nr(u)[o.crossAxisStart];return e?h-f:f-h}).filter((m,u,h)=>nr(m)[o.crossAxisStart]===nr(h[0])[o.crossAxisStart]);if(!c.length)return null;if(c.length===1)return c[0];const d=c.filter(m=>cn(nr(m)[o.start],nr(m)[o.end])(t[o.line]));return d.length===1?d[0]:d.length>1?d.sort((m,u)=>nr(m)[o.start]-nr(u)[o.start])[0]:c.sort((m,u)=>{const h=LN(t,$N(nr(m))),f=LN(t,$N(nr(u)));return h!==f?h-f:nr(m)[o.start]-nr(u)[o.start]})[0]};const BN=(e,t)=>{const n=e.page.borderBox.center;return ja(e.descriptor.id,t)?Fr(n,t.displacedBy.point):n},tq=(e,t)=>{const n=e.page.borderBox;return ja(e.descriptor.id,t)?Nu(n,El(t.displacedBy.point)):n};var rq=({pageBorderBoxCenter:e,viewport:t,destination:n,insideDestination:s,afterCritical:a})=>s.filter(o=>EA({target:tq(o,a),destination:n,viewport:t.frame,withDroppableDisplacement:!0})).sort((o,l)=>{const c=xd(e,Ny(n,BN(o,a))),d=xd(e,Ny(n,BN(l,a)));return c<d?-1:d<c?1:o.descriptor.index-l.descriptor.index})[0]||null,_u=It(function(t,n){const s=n[t.line];return{value:s,point:ki(t.line,s)}});const nq=(e,t,n)=>{const s=e.axis;if(e.descriptor.mode==="virtual")return ki(s.line,t[s.line]);const a=e.subject.page.contentBox[s.size],c=Ol(e.descriptor.id,n).reduce((d,m)=>d+m.client.marginBox[s.size],0)+t[s.line]-a;return c<=0?null:ki(s.line,c)},LA=(e,t)=>({...e,scroll:{...e.scroll,max:t}}),$A=(e,t,n)=>{const s=e.frame;Tl(t,e)&&ye(),e.subject.withPlaceholder&&ye();const a=_u(e.axis,t.displaceBy).point,i=nq(e,a,n),o={placeholderSize:a,increasedBy:i,oldFrameMaxScroll:e.frame?e.frame.scroll.max:null};if(!s){const m=Qo({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:e.frame});return{...e,subject:m}}const l=i?qt(s.scroll.max,i):s.scroll.max,c=LA(s,l),d=Qo({page:e.subject.page,withPlaceholder:o,axis:e.axis,frame:c});return{...e,subject:d,frame:c}},sq=e=>{const t=e.subject.withPlaceholder;t||ye();const n=e.frame;if(!n){const o=Qo({page:e.subject.page,axis:e.axis,frame:null,withPlaceholder:null});return{...e,subject:o}}const s=t.oldFrameMaxScroll;s||ye();const a=LA(n,s),i=Qo({page:e.subject.page,axis:e.axis,frame:a,withPlaceholder:null});return{...e,subject:i,frame:a}};var aq=({previousPageBorderBoxCenter:e,moveRelativeTo:t,insideDestination:n,draggable:s,draggables:a,destination:i,viewport:o,afterCritical:l})=>{if(!t){if(n.length)return null;const u={displaced:gd,displacedBy:CA,at:{type:"REORDER",destination:{droppableId:i.descriptor.id,index:0}}},h=hp({impact:u,draggable:s,droppable:i,draggables:a,afterCritical:l}),f=Tl(s,i)?i:$A(i,s,a);return MA({draggable:s,destination:f,newPageBorderBoxCenter:h,viewport:o.frame,withDroppableDisplacement:!1,onlyOnMainAxis:!0})?u:null}const c=e[i.axis.line]<=t.page.borderBox.center[i.axis.line],d=(()=>{const u=t.descriptor.index;return t.descriptor.id===s.descriptor.id||c?u:u+1})(),m=_u(i.axis,s.displaceBy);return Lh({draggable:s,insideDestination:n,destination:i,viewport:o,displacedBy:m,last:gd,index:d})},iq=({isMovingForward:e,previousPageBorderBoxCenter:t,draggable:n,isOver:s,draggables:a,droppables:i,viewport:o,afterCritical:l})=>{const c=eq({isMovingForward:e,pageBorderBoxCenter:t,source:s,droppables:i,viewport:o});if(!c)return null;const d=Ol(c.descriptor.id,a),m=rq({pageBorderBoxCenter:t,viewport:o,destination:c,insideDestination:d,afterCritical:l}),u=aq({previousPageBorderBoxCenter:t,destination:c,draggable:n,draggables:a,moveRelativeTo:m,insideDestination:d,viewport:o,afterCritical:l});if(!u)return null;const h=hp({impact:u,draggable:n,droppable:c,draggables:a,afterCritical:l});return{clientSelection:O1({pageBorderBoxCenter:h,draggable:n,viewport:o}),impact:u,scrollJumpRequest:null}},zr=e=>{const t=e.at;return t?t.type==="REORDER"?t.destination.droppableId:t.combine.droppableId:null};const oq=(e,t)=>{const n=zr(e);return n?t[n]:null};var lq=({state:e,type:t})=>{const n=oq(e.impact,e.dimensions.droppables),s=!!n,a=e.dimensions.droppables[e.critical.droppable.id],i=n||a,o=i.axis.direction,l=o==="vertical"&&(t==="MOVE_UP"||t==="MOVE_DOWN")||o==="horizontal"&&(t==="MOVE_LEFT"||t==="MOVE_RIGHT");if(l&&!s)return null;const c=t==="MOVE_DOWN"||t==="MOVE_RIGHT",d=e.dimensions.draggables[e.critical.draggable.id],m=e.current.page.borderBoxCenter,{draggables:u,droppables:h}=e.dimensions;return l?Zz({isMovingForward:c,previousPageBorderBoxCenter:m,draggable:d,destination:i,draggables:u,viewport:e.viewport,previousClientSelection:e.current.client.selection,previousImpact:e.impact,afterCritical:e.afterCritical}):iq({isMovingForward:c,previousPageBorderBoxCenter:m,draggable:d,isOver:i,draggables:u,droppables:h,viewport:e.viewport,afterCritical:e.afterCritical})};function Ba(e){return e.phase==="DRAGGING"||e.phase==="COLLECTING"}function RA(e){const t=cn(e.top,e.bottom),n=cn(e.left,e.right);return function(a){return t(a.y)&&n(a.x)}}function cq(e,t){return e.left<t.right&&e.right>t.left&&e.top<t.bottom&&e.bottom>t.top}function dq({pageBorderBox:e,draggable:t,candidates:n}){const s=t.page.borderBox.center,a=n.map(i=>{const o=i.axis,l=ki(i.axis.line,e.center[o.line],i.page.borderBox.center[o.crossAxisLine]);return{id:i.descriptor.id,distance:xd(s,l)}}).sort((i,o)=>o.distance-i.distance);return a[0]?a[0].id:null}function uq({pageBorderBox:e,draggable:t,droppables:n}){const s=dp(n).filter(a=>{if(!a.isEnabled)return!1;const i=a.subject.active;if(!i||!cq(e,i))return!1;if(RA(i)(e.center))return!0;const o=a.axis,l=i.center[o.crossAxisLine],c=e[o.crossAxisStart],d=e[o.crossAxisEnd],m=cn(i[o.crossAxisStart],i[o.crossAxisEnd]),u=m(c),h=m(d);return!u&&!h?!0:u?c<l:d>l});return s.length?s.length===1?s[0].descriptor.id:dq({pageBorderBox:e,draggable:t,candidates:s}):null}const IA=(e,t)=>Cn(Nu(e,t));var mq=(e,t)=>{const n=e.frame;return n?IA(t,n.scroll.diff.value):t};function DA({displaced:e,id:t}){return!!(e.visible[t]||e.invisible[t])}function hq({draggable:e,closest:t,inHomeList:n}){return t?n&&t.descriptor.index>e.descriptor.index?t.descriptor.index-1:t.descriptor.index:null}var pq=({pageBorderBoxWithDroppableScroll:e,draggable:t,destination:n,insideDestination:s,last:a,viewport:i,afterCritical:o})=>{const l=n.axis,c=_u(n.axis,t.displaceBy),d=c.value,m=e[l.start],u=e[l.end],f=mp(t,s).find(g=>{const x=g.descriptor.id,p=g.page.borderBox.center[l.line],y=ja(x,o),v=DA({displaced:a,id:x});return y?v?u<=p:m<p-d:v?u<=p+d:m<p})||null,b=hq({draggable:t,closest:f,inHomeList:Tl(t,n)});return Lh({draggable:t,insideDestination:s,destination:n,viewport:i,last:a,displacedBy:c,index:b})};const fq=4;var xq=({draggable:e,pageBorderBoxWithDroppableScroll:t,previousImpact:n,destination:s,insideDestination:a,afterCritical:i})=>{if(!s.isCombineEnabled)return null;const o=s.axis,l=_u(s.axis,e.displaceBy),c=l.value,d=t[o.start],m=t[o.end],h=mp(e,a).find(b=>{const g=b.descriptor.id,x=b.page.borderBox,y=x[o.size]/fq,v=ja(g,i),N=DA({displaced:n.displaced,id:g});return v?N?m>x[o.start]+y&&m<x[o.end]-y:d>x[o.start]-c+y&&d<x[o.end]-c-y:N?m>x[o.start]+c+y&&m<x[o.end]+c-y:d>x[o.start]+y&&d<x[o.end]-y});return h?{displacedBy:l,displaced:n.displaced,at:{type:"COMBINE",combine:{draggableId:h.descriptor.id,droppableId:s.descriptor.id}}}:null},FA=({pageOffset:e,draggable:t,draggables:n,droppables:s,previousImpact:a,viewport:i,afterCritical:o})=>{const l=IA(t.page.borderBox,e),c=uq({pageBorderBox:l,draggable:t,droppables:s});if(!c)return Ez;const d=s[c],m=Ol(d.descriptor.id,n),u=mq(d,l);return xq({pageBorderBoxWithDroppableScroll:u,draggable:t,previousImpact:a,destination:d,insideDestination:m,afterCritical:o})||pq({pageBorderBoxWithDroppableScroll:u,draggable:t,destination:d,insideDestination:m,last:a.displaced,viewport:i,afterCritical:o})},T1=(e,t)=>({...e,[t.descriptor.id]:t});const gq=({previousImpact:e,impact:t,droppables:n})=>{const s=zr(e),a=zr(t);if(!s||s===a)return n;const i=n[s];if(!i.subject.withPlaceholder)return n;const o=sq(i);return T1(n,o)};var yq=({draggable:e,draggables:t,droppables:n,previousImpact:s,impact:a})=>{const i=gq({previousImpact:s,impact:a,droppables:n}),o=zr(a);if(!o)return i;const l=n[o];if(Tl(e,l)||l.subject.withPlaceholder)return i;const c=$A(l,e,t);return T1(i,c)},Fc=({state:e,clientSelection:t,dimensions:n,viewport:s,impact:a,scrollJumpRequest:i})=>{const o=s||e.viewport,l=n||e.dimensions,c=t||e.current.client.selection,d=Fr(c,e.initial.client.selection),m={offset:d,selection:c,borderBoxCenter:qt(e.initial.client.borderBoxCenter,d)},u={selection:qt(m.selection,o.scroll.current),borderBoxCenter:qt(m.borderBoxCenter,o.scroll.current),offset:qt(m.offset,o.scroll.diff.value)},h={client:m,page:u};if(e.phase==="COLLECTING")return{...e,dimensions:l,viewport:o,current:h};const f=l.draggables[e.critical.draggable.id],b=a||FA({pageOffset:u.offset,draggable:f,draggables:l.draggables,droppables:l.droppables,previousImpact:e.impact,viewport:o,afterCritical:e.afterCritical}),g=yq({draggable:f,impact:b,previousImpact:e.impact,draggables:l.draggables,droppables:l.droppables});return{...e,current:h,dimensions:{draggables:l.draggables,droppables:g},impact:b,viewport:o,scrollJumpRequest:i||null,forceShouldAnimate:i?!1:null}};function bq(e,t){return e.map(n=>t[n])}var BA=({impact:e,viewport:t,draggables:n,destination:s,forceShouldAnimate:a})=>{const i=e.displaced,o=bq(i.all,n),l=yd({afterDragging:o,destination:s,displacedBy:e.displacedBy,viewport:t.frame,forceShouldAnimate:a,last:i});return{...e,displaced:l}},zA=({impact:e,draggable:t,droppable:n,draggables:s,viewport:a,afterCritical:i})=>{const o=hp({impact:e,draggable:t,draggables:s,droppable:n,afterCritical:i});return O1({pageBorderBoxCenter:o,draggable:t,viewport:a})},qA=({state:e,dimensions:t,viewport:n})=>{e.movementMode!=="SNAP"&&ye();const s=e.impact,a=n||e.viewport,i=t||e.dimensions,{draggables:o,droppables:l}=i,c=o[e.critical.draggable.id],d=zr(s);d||ye();const m=l[d],u=BA({impact:s,viewport:a,destination:m,draggables:o}),h=zA({impact:u,draggable:c,droppable:m,draggables:o,viewport:a,afterCritical:e.afterCritical});return Fc({impact:u,clientSelection:h,state:e,dimensions:i,viewport:a})},vq=e=>({index:e.index,droppableId:e.droppableId}),UA=({draggable:e,home:t,draggables:n,viewport:s})=>{const a=_u(t.axis,e.displaceBy),i=Ol(t.descriptor.id,n),o=i.indexOf(e);o===-1&&ye();const l=i.slice(o+1),c=l.reduce((h,f)=>(h[f.descriptor.id]=!0,h),{}),d={inVirtualList:t.descriptor.mode==="virtual",displacedBy:a,effected:c};return{impact:{displaced:yd({afterDragging:l,destination:t,displacedBy:a,last:null,viewport:s.frame,forceShouldAnimate:!1}),displacedBy:a,at:{type:"REORDER",destination:vq(e.descriptor)}},afterCritical:d}},jq=(e,t)=>({draggables:e.draggables,droppables:T1(e.droppables,t)}),wq=({draggable:e,offset:t,initialWindowScroll:n})=>{const s=Ph(e.client,t),a=Eh(s,n);return{...e,placeholder:{...e.placeholder,client:s},client:s,page:a}},Nq=e=>{const t=e.frame;return t||ye(),t},_q=({additions:e,updatedDroppables:t,viewport:n})=>{const s=n.scroll.diff.value;return e.map(a=>{const i=a.descriptor.droppableId,o=t[i],c=Nq(o).scroll.diff.value,d=qt(s,c);return wq({draggable:a,offset:d,initialWindowScroll:n.scroll.initial})})},kq=({state:e,published:t})=>{const n=t.modified.map(p=>{const y=e.dimensions.droppables[p.droppableId];return S1(y,p.scroll)}),s={...e.dimensions.droppables,...kA(n)},a=SA(_q({additions:t.additions,updatedDroppables:s,viewport:e.viewport})),i={...e.dimensions.draggables,...a};t.removals.forEach(p=>{delete i[p]});const o={droppables:s,draggables:i},l=zr(e.impact),c=l?o.droppables[l]:null,d=o.draggables[e.critical.draggable.id],m=o.droppables[e.critical.droppable.id],{impact:u,afterCritical:h}=UA({draggable:d,home:m,draggables:i,viewport:e.viewport}),f=c&&c.isCombineEnabled?e.impact:u,b=FA({pageOffset:e.current.page.offset,draggable:o.draggables[e.critical.draggable.id],draggables:o.draggables,droppables:o.droppables,previousImpact:f,viewport:e.viewport,afterCritical:h}),g={...e,phase:"DRAGGING",impact:b,onLiftImpact:u,dimensions:o,afterCritical:h,forceShouldAnimate:!1};return e.phase==="COLLECTING"?g:{...g,phase:"DROP_PENDING",reason:e.reason,isWaiting:!1}};const _y=e=>e.movementMode==="SNAP",ix=(e,t,n)=>{const s=jq(e.dimensions,t);return!_y(e)||n?Fc({state:e,dimensions:s}):qA({state:e,dimensions:s})};function ox(e){return e.isDragging&&e.movementMode==="SNAP"?{...e,scrollJumpRequest:null}:e}const zN={phase:"IDLE",completed:null,shouldFlush:!1};var Sq=(e=zN,t)=>{if(t.type==="FLUSH")return{...zN,shouldFlush:!0};if(t.type==="INITIAL_PUBLISH"){e.phase!=="IDLE"&&ye();const{critical:n,clientSelection:s,viewport:a,dimensions:i,movementMode:o}=t.payload,l=i.draggables[n.draggable.id],c=i.droppables[n.droppable.id],d={selection:s,borderBoxCenter:l.client.borderBox.center,offset:Dt},m={client:d,page:{selection:qt(d.selection,a.scroll.initial),borderBoxCenter:qt(d.selection,a.scroll.initial),offset:qt(d.selection,a.scroll.diff.value)}},u=dp(i.droppables).every(g=>!g.isFixedOnPage),{impact:h,afterCritical:f}=UA({draggable:l,home:c,draggables:i.draggables,viewport:a});return{phase:"DRAGGING",isDragging:!0,critical:n,movementMode:o,dimensions:i,initial:m,current:m,isWindowScrollAllowed:u,impact:h,afterCritical:f,onLiftImpact:h,viewport:a,scrollJumpRequest:null,forceShouldAnimate:null}}if(t.type==="COLLECTION_STARTING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"?e:(e.phase!=="DRAGGING"&&ye(),{...e,phase:"COLLECTING"});if(t.type==="PUBLISH_WHILE_DRAGGING")return e.phase==="COLLECTING"||e.phase==="DROP_PENDING"||ye(),kq({state:e,published:t.payload});if(t.type==="MOVE"){if(e.phase==="DROP_PENDING")return e;Ba(e)||ye();const{client:n}=t.payload;return fa(n,e.current.client.selection)?e:Fc({state:e,clientSelection:n,impact:_y(e)?e.impact:null})}if(t.type==="UPDATE_DROPPABLE_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="COLLECTING")return ox(e);Ba(e)||ye();const{id:n,newScroll:s}=t.payload,a=e.dimensions.droppables[n];if(!a)return e;const i=S1(a,s);return ix(e,i,!1)}if(t.type==="UPDATE_DROPPABLE_IS_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ba(e)||ye();const{id:n,isEnabled:s}=t.payload,a=e.dimensions.droppables[n];a||ye(),a.isEnabled===s&&ye();const i={...a,isEnabled:s};return ix(e,i,!0)}if(t.type==="UPDATE_DROPPABLE_IS_COMBINE_ENABLED"){if(e.phase==="DROP_PENDING")return e;Ba(e)||ye();const{id:n,isCombineEnabled:s}=t.payload,a=e.dimensions.droppables[n];a||ye(),a.isCombineEnabled===s&&ye();const i={...a,isCombineEnabled:s};return ix(e,i,!0)}if(t.type==="MOVE_BY_WINDOW_SCROLL"){if(e.phase==="DROP_PENDING"||e.phase==="DROP_ANIMATING")return e;Ba(e)||ye(),e.isWindowScrollAllowed||ye();const n=t.payload.newScroll;if(fa(e.viewport.scroll.current,n))return ox(e);const s=TA(e.viewport,n);return _y(e)?qA({state:e,viewport:s}):Fc({state:e,viewport:s})}if(t.type==="UPDATE_VIEWPORT_MAX_SCROLL"){if(!Ba(e))return e;const n=t.payload.maxScroll;if(fa(n,e.viewport.scroll.max))return e;const s={...e.viewport,scroll:{...e.viewport.scroll,max:n}};return{...e,viewport:s}}if(t.type==="MOVE_UP"||t.type==="MOVE_DOWN"||t.type==="MOVE_LEFT"||t.type==="MOVE_RIGHT"){if(e.phase==="COLLECTING"||e.phase==="DROP_PENDING")return e;e.phase!=="DRAGGING"&&ye();const n=lq({state:e,type:t.type});return n?Fc({state:e,impact:n.impact,clientSelection:n.clientSelection,scrollJumpRequest:n.scrollJumpRequest}):e}if(t.type==="DROP_PENDING"){const n=t.payload.reason;return e.phase!=="COLLECTING"&&ye(),{...e,phase:"DROP_PENDING",isWaiting:!0,reason:n}}if(t.type==="DROP_ANIMATE"){const{completed:n,dropDuration:s,newHomeClientOffset:a}=t.payload;return e.phase==="DRAGGING"||e.phase==="DROP_PENDING"||ye(),{phase:"DROP_ANIMATING",completed:n,dropDuration:s,newHomeClientOffset:a,dimensions:e.dimensions}}if(t.type==="DROP_COMPLETE"){const{completed:n}=t.payload;return{phase:"IDLE",completed:n,shouldFlush:!1}}return e};function Ve(e,t){return e instanceof Object&&"type"in e&&e.type===t}const Cq=e=>({type:"BEFORE_INITIAL_CAPTURE",payload:e}),Aq=e=>({type:"LIFT",payload:e}),Pq=e=>({type:"INITIAL_PUBLISH",payload:e}),Eq=e=>({type:"PUBLISH_WHILE_DRAGGING",payload:e}),Oq=()=>({type:"COLLECTION_STARTING",payload:null}),Tq=e=>({type:"UPDATE_DROPPABLE_SCROLL",payload:e}),Mq=e=>({type:"UPDATE_DROPPABLE_IS_ENABLED",payload:e}),Lq=e=>({type:"UPDATE_DROPPABLE_IS_COMBINE_ENABLED",payload:e}),WA=e=>({type:"MOVE",payload:e}),$q=e=>({type:"MOVE_BY_WINDOW_SCROLL",payload:e}),Rq=e=>({type:"UPDATE_VIEWPORT_MAX_SCROLL",payload:e}),Iq=()=>({type:"MOVE_UP",payload:null}),Dq=()=>({type:"MOVE_DOWN",payload:null}),Fq=()=>({type:"MOVE_RIGHT",payload:null}),Bq=()=>({type:"MOVE_LEFT",payload:null}),M1=()=>({type:"FLUSH",payload:null}),zq=e=>({type:"DROP_ANIMATE",payload:e}),L1=e=>({type:"DROP_COMPLETE",payload:e}),VA=e=>({type:"DROP",payload:e}),qq=e=>({type:"DROP_PENDING",payload:e}),HA=()=>({type:"DROP_ANIMATION_FINISHED",payload:null});var Uq=e=>({getState:t,dispatch:n})=>s=>a=>{if(!Ve(a,"LIFT")){s(a);return}const{id:i,clientSelection:o,movementMode:l}=a.payload,c=t();c.phase==="DROP_ANIMATING"&&n(L1({completed:c.completed})),t().phase!=="IDLE"&&ye(),n(M1()),n(Cq({draggableId:i,movementMode:l}));const m={draggableId:i,scrollOptions:{shouldPublishImmediately:l==="SNAP"}},{critical:u,dimensions:h,viewport:f}=e.startPublishing(m);n(Pq({critical:u,dimensions:h,clientSelection:o,movementMode:l,viewport:f}))},Wq=e=>()=>t=>n=>{Ve(n,"INITIAL_PUBLISH")&&e.dragging(),Ve(n,"DROP_ANIMATE")&&e.dropping(n.payload.completed.result.reason),(Ve(n,"FLUSH")||Ve(n,"DROP_COMPLETE"))&&e.resting(),t(n)};const $1={outOfTheWay:"cubic-bezier(0.2, 0, 0, 1)",drop:"cubic-bezier(.2,1,.1,1)"},bd={opacity:{drop:0,combining:.7},scale:{drop:.75}},KA={outOfTheWay:.2,minDropTime:.33,maxDropTime:.55},Ta=`${KA.outOfTheWay}s ${$1.outOfTheWay}`,Bc={fluid:`opacity ${Ta}`,snap:`transform ${Ta}, opacity ${Ta}`,drop:e=>{const t=`${e}s ${$1.drop}`;return`transform ${t}, opacity ${t}`},outOfTheWay:`transform ${Ta}`,placeholder:`height ${Ta}, width ${Ta}, margin ${Ta}`},qN=e=>fa(e,Dt)?void 0:`translate(${e.x}px, ${e.y}px)`,ky={moveTo:qN,drop:(e,t)=>{const n=qN(e);if(n)return t?`${n} scale(${bd.scale.drop})`:n}},{minDropTime:Sy,maxDropTime:GA}=KA,Vq=GA-Sy,UN=1500,Hq=.6;var Kq=({current:e,destination:t,reason:n})=>{const s=xd(e,t);if(s<=0)return Sy;if(s>=UN)return GA;const a=s/UN,i=Sy+Vq*a,o=n==="CANCEL"?i*Hq:i;return Number(o.toFixed(2))},Gq=({impact:e,draggable:t,dimensions:n,viewport:s,afterCritical:a})=>{const{draggables:i,droppables:o}=n,l=zr(e),c=l?o[l]:null,d=o[t.descriptor.droppableId],m=zA({impact:e,draggable:t,draggables:i,afterCritical:a,droppable:c||d,viewport:s});return Fr(m,t.client.borderBox.center)},Qq=({draggables:e,reason:t,lastImpact:n,home:s,viewport:a,onLiftImpact:i})=>!n.at||t!=="DROP"?{impact:BA({draggables:e,impact:i,destination:s,viewport:a,forceShouldAnimate:!0}),didDropInsideDroppable:!1}:n.at.type==="REORDER"?{impact:n,didDropInsideDroppable:!0}:{impact:{...n,displaced:gd},didDropInsideDroppable:!0};const Yq=({getState:e,dispatch:t})=>n=>s=>{if(!Ve(s,"DROP")){n(s);return}const a=e(),i=s.payload.reason;if(a.phase==="COLLECTING"){t(qq({reason:i}));return}if(a.phase==="IDLE")return;a.phase==="DROP_PENDING"&&a.isWaiting&&ye(),a.phase==="DRAGGING"||a.phase==="DROP_PENDING"||ye();const l=a.critical,c=a.dimensions,d=c.draggables[a.critical.draggable.id],{impact:m,didDropInsideDroppable:u}=Qq({reason:i,lastImpact:a.impact,afterCritical:a.afterCritical,onLiftImpact:a.onLiftImpact,home:a.dimensions.droppables[a.critical.droppable.id],viewport:a.viewport,draggables:a.dimensions.draggables}),h=u?C1(m):null,f=u?up(m):null,b={index:l.draggable.index,droppableId:l.droppable.id},g={draggableId:d.descriptor.id,type:d.descriptor.type,source:b,reason:i,mode:a.movementMode,destination:h,combine:f},x=Gq({impact:m,draggable:d,dimensions:c,viewport:a.viewport,afterCritical:a.afterCritical}),p={critical:a.critical,afterCritical:a.afterCritical,result:g,impact:m};if(!(!fa(a.current.client.offset,x)||!!g.combine)){t(L1({completed:p}));return}const v=Kq({current:a.current.client.offset,destination:x,reason:i});t(zq({newHomeClientOffset:x,dropDuration:v,completed:p}))};var QA=()=>({x:window.pageXOffset,y:window.pageYOffset});function Xq(e){return{eventName:"scroll",options:{passive:!0,capture:!1},fn:t=>{t.target!==window&&t.target!==window.document||e()}}}function Jq({onWindowScroll:e}){function t(){e(QA())}const n=fd(t),s=Xq(n);let a=pa;function i(){return a!==pa}function o(){i()&&ye(),a=an(window,[s])}function l(){i()||ye(),n.cancel(),a(),a=pa}return{start:o,stop:l,isActive:i}}const Zq=e=>Ve(e,"DROP_COMPLETE")||Ve(e,"DROP_ANIMATE")||Ve(e,"FLUSH"),eU=e=>{const t=Jq({onWindowScroll:n=>{e.dispatch($q({newScroll:n}))}});return n=>s=>{!t.isActive()&&Ve(s,"INITIAL_PUBLISH")&&t.start(),t.isActive()&&Zq(s)&&t.stop(),n(s)}};var tU=e=>{let t=!1,n=!1;const s=setTimeout(()=>{n=!0}),a=i=>{t||n||(t=!0,e(i),clearTimeout(s))};return a.wasCalled=()=>t,a},rU=()=>{const e=[],t=a=>{const i=e.findIndex(l=>l.timerId===a);i===-1&&ye();const[o]=e.splice(i,1);o.callback()};return{add:a=>{const i=setTimeout(()=>t(i)),o={timerId:i,callback:a};e.push(o)},flush:()=>{if(!e.length)return;const a=[...e];e.length=0,a.forEach(i=>{clearTimeout(i.timerId),i.callback()})}}};const nU=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.droppableId===t.droppableId&&e.index===t.index,sU=(e,t)=>e==null&&t==null?!0:e==null||t==null?!1:e.draggableId===t.draggableId&&e.droppableId===t.droppableId,aU=(e,t)=>{if(e===t)return!0;const n=e.draggable.id===t.draggable.id&&e.draggable.droppableId===t.draggable.droppableId&&e.draggable.type===t.draggable.type&&e.draggable.index===t.draggable.index,s=e.droppable.id===t.droppable.id&&e.droppable.type===t.droppable.type;return n&&s},ic=(e,t)=>{t()},om=(e,t)=>({draggableId:e.draggable.id,type:e.droppable.type,source:{droppableId:e.droppable.id,index:e.draggable.index},mode:t});function lx(e,t,n,s){if(!e){n(s(t));return}const a=tU(n);e(t,{announce:a}),a.wasCalled()||n(s(t))}var iU=(e,t)=>{const n=rU();let s=null;const a=(u,h)=>{s&&ye(),ic("onBeforeCapture",()=>{const f=e().onBeforeCapture;f&&f({draggableId:u,mode:h})})},i=(u,h)=>{s&&ye(),ic("onBeforeDragStart",()=>{const f=e().onBeforeDragStart;f&&f(om(u,h))})},o=(u,h)=>{s&&ye();const f=om(u,h);s={mode:h,lastCritical:u,lastLocation:f.source,lastCombine:null},n.add(()=>{ic("onDragStart",()=>lx(e().onDragStart,f,t,Qm.onDragStart))})},l=(u,h)=>{const f=C1(h),b=up(h);s||ye();const g=!aU(u,s.lastCritical);g&&(s.lastCritical=u);const x=!nU(s.lastLocation,f);x&&(s.lastLocation=f);const p=!sU(s.lastCombine,b);if(p&&(s.lastCombine=b),!g&&!x&&!p)return;const y={...om(u,s.mode),combine:b,destination:f};n.add(()=>{ic("onDragUpdate",()=>lx(e().onDragUpdate,y,t,Qm.onDragUpdate))})},c=()=>{s||ye(),n.flush()},d=u=>{s||ye(),s=null,ic("onDragEnd",()=>lx(e().onDragEnd,u,t,Qm.onDragEnd))};return{beforeCapture:a,beforeStart:i,start:o,update:l,flush:c,drop:d,abort:()=>{if(!s)return;const u={...om(s.lastCritical,s.mode),combine:null,destination:null,reason:"CANCEL"};d(u)}}},oU=(e,t)=>{const n=iU(e,t);return s=>a=>i=>{if(Ve(i,"BEFORE_INITIAL_CAPTURE")){n.beforeCapture(i.payload.draggableId,i.payload.movementMode);return}if(Ve(i,"INITIAL_PUBLISH")){const l=i.payload.critical;n.beforeStart(l,i.payload.movementMode),a(i),n.start(l,i.payload.movementMode);return}if(Ve(i,"DROP_COMPLETE")){const l=i.payload.completed.result;n.flush(),a(i),n.drop(l);return}if(a(i),Ve(i,"FLUSH")){n.abort();return}const o=s.getState();o.phase==="DRAGGING"&&n.update(o.critical,o.impact)}};const lU=e=>t=>n=>{if(!Ve(n,"DROP_ANIMATION_FINISHED")){t(n);return}const s=e.getState();s.phase!=="DROP_ANIMATING"&&ye(),e.dispatch(L1({completed:s.completed}))},cU=e=>{let t=null,n=null;function s(){n&&(cancelAnimationFrame(n),n=null),t&&(t(),t=null)}return a=>i=>{if((Ve(i,"FLUSH")||Ve(i,"DROP_COMPLETE")||Ve(i,"DROP_ANIMATION_FINISHED"))&&s(),a(i),!Ve(i,"DROP_ANIMATE"))return;const o={eventName:"scroll",options:{capture:!0,passive:!1,once:!0},fn:function(){e.getState().phase==="DROP_ANIMATING"&&e.dispatch(HA())}};n=requestAnimationFrame(()=>{n=null,t=an(window,[o])})}};var dU=e=>()=>t=>n=>{(Ve(n,"DROP_COMPLETE")||Ve(n,"FLUSH")||Ve(n,"DROP_ANIMATE"))&&e.stopPublishing(),t(n)},uU=e=>{let t=!1;return()=>n=>s=>{if(Ve(s,"INITIAL_PUBLISH")){t=!0,e.tryRecordFocus(s.payload.critical.draggable.id),n(s),e.tryRestoreFocusRecorded();return}if(n(s),!!t){if(Ve(s,"FLUSH")){t=!1,e.tryRestoreFocusRecorded();return}if(Ve(s,"DROP_COMPLETE")){t=!1;const a=s.payload.completed.result;a.combine&&e.tryShiftRecord(a.draggableId,a.combine.draggableId),e.tryRestoreFocusRecorded()}}}};const mU=e=>Ve(e,"DROP_COMPLETE")||Ve(e,"DROP_ANIMATE")||Ve(e,"FLUSH");var hU=e=>t=>n=>s=>{if(mU(s)){e.stop(),n(s);return}if(Ve(s,"INITIAL_PUBLISH")){n(s);const a=t.getState();a.phase!=="DRAGGING"&&ye(),e.start(a);return}n(s),e.scroll(t.getState())};const pU=e=>t=>n=>{if(t(n),!Ve(n,"PUBLISH_WHILE_DRAGGING"))return;const s=e.getState();s.phase==="DROP_PENDING"&&(s.isWaiting||e.dispatch(VA({reason:s.reason})))},fU=uA;var xU=({dimensionMarshal:e,focusMarshal:t,styleMarshal:n,getResponders:s,announce:a,autoScroller:i})=>dA(Sq,fU(dB(Wq(n),dU(e),Uq(e),Yq,lU,cU,pU,hU(i),eU,uU(t),oU(s,a))));const cx=()=>({additions:{},removals:{},modified:{}});function gU({registry:e,callbacks:t}){let n=cx(),s=null;const a=()=>{s||(t.collectionStarting(),s=requestAnimationFrame(()=>{s=null;const{additions:c,removals:d,modified:m}=n,u=Object.keys(c).map(b=>e.draggable.getById(b).getDimension(Dt)).sort((b,g)=>b.descriptor.index-g.descriptor.index),h=Object.keys(m).map(b=>{const x=e.droppable.getById(b).callbacks.getScrollWhileDragging();return{droppableId:b,scroll:x}}),f={additions:u,removals:Object.keys(d),modified:h};n=cx(),t.publish(f)}))};return{add:c=>{const d=c.descriptor.id;n.additions[d]=c,n.modified[c.descriptor.droppableId]=!0,n.removals[d]&&delete n.removals[d],a()},remove:c=>{const d=c.descriptor;n.removals[d.id]=!0,n.modified[d.droppableId]=!0,n.additions[d.id]&&delete n.additions[d.id],a()},stop:()=>{s&&(cancelAnimationFrame(s),s=null,n=cx())}}}var YA=({scrollHeight:e,scrollWidth:t,height:n,width:s})=>{const a=Fr({x:t,y:e},{x:s,y:n});return{x:Math.max(0,a.x),y:Math.max(0,a.y)}},XA=()=>{const e=document.documentElement;return e||ye(),e},JA=()=>{const e=XA();return YA({scrollHeight:e.scrollHeight,scrollWidth:e.scrollWidth,width:e.clientWidth,height:e.clientHeight})},yU=()=>{const e=QA(),t=JA(),n=e.y,s=e.x,a=XA(),i=a.clientWidth,o=a.clientHeight,l=s+i,c=n+o;return{frame:Cn({top:n,left:s,right:l,bottom:c}),scroll:{initial:e,current:e,max:t,diff:{value:Dt,displacement:Dt}}}},bU=({critical:e,scrollOptions:t,registry:n})=>{const s=yU(),a=s.scroll.current,i=e.droppable,o=n.droppable.getAllByType(i.type).map(m=>m.callbacks.getDimensionAndWatchScroll(a,t)),l=n.draggable.getAllByType(e.draggable.type).map(m=>m.getDimension(a));return{dimensions:{draggables:SA(l),droppables:kA(o)},critical:e,viewport:s}};function WN(e,t,n){return!(n.descriptor.id===t.id||n.descriptor.type!==t.type||e.droppable.getById(n.descriptor.droppableId).descriptor.mode!=="virtual")}var vU=(e,t)=>{let n=null;const s=gU({callbacks:{publish:t.publishWhileDragging,collectionStarting:t.collectionStarting},registry:e}),a=(h,f)=>{e.droppable.exists(h)||ye(),n&&t.updateDroppableIsEnabled({id:h,isEnabled:f})},i=(h,f)=>{n&&(e.droppable.exists(h)||ye(),t.updateDroppableIsCombineEnabled({id:h,isCombineEnabled:f}))},o=(h,f)=>{n&&(e.droppable.exists(h)||ye(),t.updateDroppableScroll({id:h,newScroll:f}))},l=(h,f)=>{n&&e.droppable.getById(h).callbacks.scroll(f)},c=()=>{if(!n)return;s.stop();const h=n.critical.droppable;e.droppable.getAllByType(h.type).forEach(f=>f.callbacks.dragStopped()),n.unsubscribe(),n=null},d=h=>{n||ye();const f=n.critical.draggable;h.type==="ADDITION"&&WN(e,f,h.value)&&s.add(h.value),h.type==="REMOVAL"&&WN(e,f,h.value)&&s.remove(h.value)};return{updateDroppableIsEnabled:a,updateDroppableIsCombineEnabled:i,scrollDroppable:l,updateDroppableScroll:o,startPublishing:h=>{n&&ye();const f=e.draggable.getById(h.draggableId),b=e.droppable.getById(f.descriptor.droppableId),g={draggable:f.descriptor,droppable:b.descriptor},x=e.subscribe(d);return n={critical:g,unsubscribe:x},bU({critical:g,registry:e,scrollOptions:h.scrollOptions})},stopPublishing:c}},ZA=(e,t)=>e.phase==="IDLE"?!0:e.phase!=="DROP_ANIMATING"||e.completed.result.draggableId===t?!1:e.completed.result.reason==="DROP",jU=e=>{window.scrollBy(e.x,e.y)};const wU=It(e=>dp(e).filter(t=>!(!t.isEnabled||!t.frame))),NU=(e,t)=>wU(t).find(s=>(s.frame||ye(),RA(s.frame.pageMarginBox)(e)))||null;var _U=({center:e,destination:t,droppables:n})=>{if(t){const a=n[t];return a.frame?a:null}return NU(e,n)};const vd={startFromPercentage:.25,maxScrollAtPercentage:.05,maxPixelScroll:28,ease:e=>e**2,durationDampening:{stopDampeningAt:1200,accelerateAt:360},disabled:!1};var kU=(e,t,n=()=>vd)=>{const s=n(),a=e[t.size]*s.startFromPercentage,i=e[t.size]*s.maxScrollAtPercentage;return{startScrollingFrom:a,maxScrollValueAt:i}},eP=({startOfRange:e,endOfRange:t,current:n})=>{const s=t-e;return s===0?0:(n-e)/s},R1=1,SU=(e,t,n=()=>vd)=>{const s=n();if(e>t.startScrollingFrom)return 0;if(e<=t.maxScrollValueAt)return s.maxPixelScroll;if(e===t.startScrollingFrom)return R1;const i=1-eP({startOfRange:t.maxScrollValueAt,endOfRange:t.startScrollingFrom,current:e}),o=s.maxPixelScroll*s.ease(i);return Math.ceil(o)},CU=(e,t,n)=>{const s=n(),a=s.durationDampening.accelerateAt,i=s.durationDampening.stopDampeningAt,o=t,l=i,d=Date.now()-o;if(d>=i)return e;if(d<a)return R1;const m=eP({startOfRange:a,endOfRange:l,current:d}),u=e*s.ease(m);return Math.ceil(u)},VN=({distanceToEdge:e,thresholds:t,dragStartTime:n,shouldUseTimeDampening:s,getAutoScrollerOptions:a})=>{const i=SU(e,t,a);return i===0?0:s?Math.max(CU(i,n,a),R1):i},HN=({container:e,distanceToEdges:t,dragStartTime:n,axis:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const o=kU(e,s,i);return t[s.end]<t[s.start]?VN({distanceToEdge:t[s.end],thresholds:o,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i}):-1*VN({distanceToEdge:t[s.start],thresholds:o,dragStartTime:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i})},AU=({container:e,subject:t,proposedScroll:n})=>{const s=t.height>e.height,a=t.width>e.width;return!a&&!s?n:a&&s?null:{x:a?0:n.x,y:s?0:n.y}};const PU=_A(e=>e===0?0:e);var tP=({dragStartTime:e,container:t,subject:n,center:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const o={top:s.y-t.top,right:t.right-s.x,bottom:t.bottom-s.y,left:s.x-t.left},l=HN({container:t,distanceToEdges:o,dragStartTime:e,axis:A1,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),c=HN({container:t,distanceToEdges:o,dragStartTime:e,axis:PA,shouldUseTimeDampening:a,getAutoScrollerOptions:i}),d=PU({x:c,y:l});if(fa(d,Dt))return null;const m=AU({container:t,subject:n,proposedScroll:d});return m?fa(m,Dt)?null:m:null};const EU=_A(e=>e===0?0:e>0?1:-1),I1=(()=>{const e=(t,n)=>t<0?t:t>n?t-n:0;return({current:t,max:n,change:s})=>{const a=qt(t,s),i={x:e(a.x,n.x),y:e(a.y,n.y)};return fa(i,Dt)?null:i}})(),rP=({max:e,current:t,change:n})=>{const s={x:Math.max(t.x,e.x),y:Math.max(t.y,e.y)},a=EU(n),i=I1({max:s,current:t,change:a});return!i||a.x!==0&&i.x===0||a.y!==0&&i.y===0},D1=(e,t)=>rP({current:e.scroll.current,max:e.scroll.max,change:t}),OU=(e,t)=>{if(!D1(e,t))return null;const n=e.scroll.max,s=e.scroll.current;return I1({current:s,max:n,change:t})},F1=(e,t)=>{const n=e.frame;return n?rP({current:n.scroll.current,max:n.scroll.max,change:t}):!1},TU=(e,t)=>{const n=e.frame;return!n||!F1(e,t)?null:I1({current:n.scroll.current,max:n.scroll.max,change:t})};var MU=({viewport:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const o=tP({dragStartTime:s,container:e.frame,subject:t,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return o&&D1(e,o)?o:null},LU=({droppable:e,subject:t,center:n,dragStartTime:s,shouldUseTimeDampening:a,getAutoScrollerOptions:i})=>{const o=e.frame;if(!o)return null;const l=tP({dragStartTime:s,container:o.pageMarginBox,subject:t,center:n,shouldUseTimeDampening:a,getAutoScrollerOptions:i});return l&&F1(e,l)?l:null},KN=({state:e,dragStartTime:t,shouldUseTimeDampening:n,scrollWindow:s,scrollDroppable:a,getAutoScrollerOptions:i})=>{const o=e.current.page.borderBoxCenter,c=e.dimensions.draggables[e.critical.draggable.id].page.marginBox;if(e.isWindowScrollAllowed){const u=e.viewport,h=MU({dragStartTime:t,viewport:u,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});if(h){s(h);return}}const d=_U({center:o,destination:zr(e.impact),droppables:e.dimensions.droppables});if(!d)return;const m=LU({dragStartTime:t,droppable:d,subject:c,center:o,shouldUseTimeDampening:n,getAutoScrollerOptions:i});m&&a(d.descriptor.id,m)},$U=({scrollWindow:e,scrollDroppable:t,getAutoScrollerOptions:n=()=>vd})=>{const s=fd(e),a=fd(t);let i=null;const o=d=>{i||ye();const{shouldUseTimeDampening:m,dragStartTime:u}=i;KN({state:d,scrollWindow:s,scrollDroppable:a,dragStartTime:u,shouldUseTimeDampening:m,getAutoScrollerOptions:n})};return{start:d=>{i&&ye();const m=Date.now();let u=!1;const h=()=>{u=!0};KN({state:d,dragStartTime:0,shouldUseTimeDampening:!1,scrollWindow:h,scrollDroppable:h,getAutoScrollerOptions:n}),i={dragStartTime:m,shouldUseTimeDampening:u},u&&o(d)},stop:()=>{i&&(s.cancel(),a.cancel(),i=null)},scroll:o}},RU=({move:e,scrollDroppable:t,scrollWindow:n})=>{const s=(l,c)=>{const d=qt(l.current.client.selection,c);e({client:d})},a=(l,c)=>{if(!F1(l,c))return c;const d=TU(l,c);if(!d)return t(l.descriptor.id,c),null;const m=Fr(c,d);return t(l.descriptor.id,m),Fr(c,m)},i=(l,c,d)=>{if(!l||!D1(c,d))return d;const m=OU(c,d);if(!m)return n(d),null;const u=Fr(d,m);return n(u),Fr(d,u)};return l=>{const c=l.scrollJumpRequest;if(!c)return;const d=zr(l.impact);d||ye();const m=a(l.dimensions.droppables[d],c);if(!m)return;const u=l.viewport,h=i(l.isWindowScrollAllowed,u,m);h&&s(l,h)}},IU=({scrollDroppable:e,scrollWindow:t,move:n,getAutoScrollerOptions:s})=>{const a=$U({scrollWindow:t,scrollDroppable:e,getAutoScrollerOptions:s}),i=RU({move:n,scrollWindow:t,scrollDroppable:e});return{scroll:c=>{if(!(s().disabled||c.phase!=="DRAGGING")){if(c.movementMode==="FLUID"){a.scroll(c);return}c.scrollJumpRequest&&i(c)}},start:a.start,stop:a.stop}};const Yo="data-rfd",Xo=(()=>{const e=`${Yo}-drag-handle`;return{base:e,draggableId:`${e}-draggable-id`,contextId:`${e}-context-id`}})(),Cy=(()=>{const e=`${Yo}-draggable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),DU=(()=>{const e=`${Yo}-droppable`;return{base:e,contextId:`${e}-context-id`,id:`${e}-id`}})(),GN={contextId:`${Yo}-scroll-container-context-id`},FU=e=>t=>`[${t}="${e}"]`,oc=(e,t)=>e.map(n=>{const s=n.styles[t];return s?`${n.selector} { ${s} }`:""}).join(" "),BU="pointer-events: none;";var zU=e=>{const t=FU(e),n=(()=>{const l=`
      cursor: -webkit-grab;
      cursor: grab;
    `;return{selector:t(Xo.contextId),styles:{always:`
          -webkit-touch-callout: none;
          -webkit-tap-highlight-color: rgba(0,0,0,0);
          touch-action: manipulation;
        `,resting:l,dragging:BU,dropAnimating:l}}})(),s=(()=>{const l=`
      transition: ${Bc.outOfTheWay};
    `;return{selector:t(Cy.contextId),styles:{dragging:l,dropAnimating:l,userCancel:l}}})(),a={selector:t(DU.contextId),styles:{always:"overflow-anchor: none;"}},o=[s,n,a,{selector:"body",styles:{dragging:`
        cursor: grabbing;
        cursor: -webkit-grabbing;
        user-select: none;
        -webkit-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        overflow-anchor: none;
      `}}];return{always:oc(o,"always"),resting:oc(o,"resting"),dragging:oc(o,"dragging"),dropAnimating:oc(o,"dropAnimating"),userCancel:oc(o,"userCancel")}};const qr=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u"?k.useLayoutEffect:k.useEffect,dx=()=>{const e=document.querySelector("head");return e||ye(),e},QN=e=>{const t=document.createElement("style");return e&&t.setAttribute("nonce",e),t.type="text/css",t};function qU(e,t){const n=qe(()=>zU(e),[e]),s=k.useRef(null),a=k.useRef(null),i=Ae(It(u=>{const h=a.current;h||ye(),h.textContent=u}),[]),o=Ae(u=>{const h=s.current;h||ye(),h.textContent=u},[]);qr(()=>{!s.current&&!a.current||ye();const u=QN(t),h=QN(t);return s.current=u,a.current=h,u.setAttribute(`${Yo}-always`,e),h.setAttribute(`${Yo}-dynamic`,e),dx().appendChild(u),dx().appendChild(h),o(n.always),i(n.resting),()=>{const f=b=>{const g=b.current;g||ye(),dx().removeChild(g),b.current=null};f(s),f(a)}},[t,o,i,n.always,n.resting,e]);const l=Ae(()=>i(n.dragging),[i,n.dragging]),c=Ae(u=>{if(u==="DROP"){i(n.dropAnimating);return}i(n.userCancel)},[i,n.dropAnimating,n.userCancel]),d=Ae(()=>{a.current&&i(n.resting)},[i,n.resting]);return qe(()=>({dragging:l,dropping:c,resting:d}),[l,c,d])}function nP(e,t){return Array.from(e.querySelectorAll(t))}var sP=e=>e&&e.ownerDocument&&e.ownerDocument.defaultView?e.ownerDocument.defaultView:window;function pp(e){return e instanceof sP(e).HTMLElement}function UU(e,t){const n=`[${Xo.contextId}="${e}"]`,s=nP(document,n);if(!s.length)return null;const a=s.find(i=>i.getAttribute(Xo.draggableId)===t);return!a||!pp(a)?null:a}function WU(e){const t=k.useRef({}),n=k.useRef(null),s=k.useRef(null),a=k.useRef(!1),i=Ae(function(h,f){const b={id:h,focus:f};return t.current[h]=b,function(){const x=t.current;x[h]!==b&&delete x[h]}},[]),o=Ae(function(h){const f=UU(e,h);f&&f!==document.activeElement&&f.focus()},[e]),l=Ae(function(h,f){n.current===h&&(n.current=f)},[]),c=Ae(function(){s.current||a.current&&(s.current=requestAnimationFrame(()=>{s.current=null;const h=n.current;h&&o(h)}))},[o]),d=Ae(function(h){n.current=null;const f=document.activeElement;f&&f.getAttribute(Xo.draggableId)===h&&(n.current=h)},[]);return qr(()=>(a.current=!0,function(){a.current=!1;const h=s.current;h&&cancelAnimationFrame(h)}),[]),qe(()=>({register:i,tryRecordFocus:d,tryRestoreFocusRecorded:c,tryShiftRecord:l}),[i,d,c,l])}function VU(){const e={draggables:{},droppables:{}},t=[];function n(u){return t.push(u),function(){const f=t.indexOf(u);f!==-1&&t.splice(f,1)}}function s(u){t.length&&t.forEach(h=>h(u))}function a(u){return e.draggables[u]||null}function i(u){const h=a(u);return h||ye(),h}const o={register:u=>{e.draggables[u.descriptor.id]=u,s({type:"ADDITION",value:u})},update:(u,h)=>{const f=e.draggables[h.descriptor.id];f&&f.uniqueId===u.uniqueId&&(delete e.draggables[h.descriptor.id],e.draggables[u.descriptor.id]=u)},unregister:u=>{const h=u.descriptor.id,f=a(h);f&&u.uniqueId===f.uniqueId&&(delete e.draggables[h],e.droppables[u.descriptor.droppableId]&&s({type:"REMOVAL",value:u}))},getById:i,findById:a,exists:u=>!!a(u),getAllByType:u=>Object.values(e.draggables).filter(h=>h.descriptor.type===u)};function l(u){return e.droppables[u]||null}function c(u){const h=l(u);return h||ye(),h}const d={register:u=>{e.droppables[u.descriptor.id]=u},unregister:u=>{const h=l(u.descriptor.id);h&&u.uniqueId===h.uniqueId&&delete e.droppables[u.descriptor.id]},getById:c,findById:l,exists:u=>!!l(u),getAllByType:u=>Object.values(e.droppables).filter(h=>h.descriptor.type===u)};function m(){e.draggables={},e.droppables={},t.length=0}return{draggable:o,droppable:d,subscribe:n,clean:m}}function HU(){const e=qe(VU,[]);return k.useEffect(()=>function(){e.clean()},[e]),e}var B1=Y.createContext(null),$h=()=>{const e=document.body;return e||ye(),e};const KU={position:"absolute",width:"1px",height:"1px",margin:"-1px",border:"0",padding:"0",overflow:"hidden",clip:"rect(0 0 0 0)","clip-path":"inset(100%)"},GU=e=>`rfd-announcement-${e}`;function QU(e){const t=qe(()=>GU(e),[e]),n=k.useRef(null);return k.useEffect(function(){const i=document.createElement("div");return n.current=i,i.id=t,i.setAttribute("aria-live","assertive"),i.setAttribute("aria-atomic","true"),Oh(i.style,KU),$h().appendChild(i),function(){setTimeout(function(){const c=$h();c.contains(i)&&c.removeChild(i),i===n.current&&(n.current=null)})}},[t]),Ae(a=>{const i=n.current;if(i){i.textContent=a;return}},[])}const YU={separator:"::"};function z1(e,t=YU){const n=Y.useId();return qe(()=>`${e}${t.separator}${n}`,[t.separator,e,n])}function XU({contextId:e,uniqueId:t}){return`rfd-hidden-text-${e}-${t}`}function JU({contextId:e,text:t}){const n=z1("hidden-text",{separator:"-"}),s=qe(()=>XU({contextId:e,uniqueId:n}),[n,e]);return k.useEffect(function(){const i=document.createElement("div");return i.id=s,i.textContent=t,i.style.display="none",$h().appendChild(i),function(){const l=$h();l.contains(i)&&l.removeChild(i)}},[s,t]),s}var fp=Y.createContext(null);function aP(e){const t=k.useRef(e);return k.useEffect(()=>{t.current=e}),t}function ZU(){let e=null;function t(){return!!e}function n(o){return o===e}function s(o){e&&ye();const l={abandon:o};return e=l,l}function a(){e||ye(),e=null}function i(){e&&(e.abandon(),a())}return{isClaimed:t,isActive:n,claim:s,release:a,tryAbandon:i}}function jd(e){return e.phase==="IDLE"||e.phase==="DROP_ANIMATING"?!1:e.isDragging}const eW=9,tW=13,q1=27,iP=32,rW=33,nW=34,sW=35,aW=36,iW=37,oW=38,lW=39,cW=40,dW={[tW]:!0,[eW]:!0};var oP=e=>{dW[e.keyCode]&&e.preventDefault()};const xp=(()=>{const e="visibilitychange";return typeof document>"u"?e:[e,`ms${e}`,`webkit${e}`,`moz${e}`,`o${e}`].find(s=>`on${s}`in document)||e})(),lP=0,YN=5;function uW(e,t){return Math.abs(t.x-e.x)>=YN||Math.abs(t.y-e.y)>=YN}const XN={type:"IDLE"};function mW({cancel:e,completed:t,getPhase:n,setPhase:s}){return[{eventName:"mousemove",fn:a=>{const{button:i,clientX:o,clientY:l}=a;if(i!==lP)return;const c={x:o,y:l},d=n();if(d.type==="DRAGGING"){a.preventDefault(),d.actions.move(c);return}d.type!=="PENDING"&&ye();const m=d.point;if(!uW(m,c))return;a.preventDefault();const u=d.actions.fluidLift(c);s({type:"DRAGGING",actions:u})}},{eventName:"mouseup",fn:a=>{const i=n();if(i.type!=="DRAGGING"){e();return}a.preventDefault(),i.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"mousedown",fn:a=>{n().type==="DRAGGING"&&a.preventDefault(),e()}},{eventName:"keydown",fn:a=>{if(n().type==="PENDING"){e();return}if(a.keyCode===q1){a.preventDefault(),e();return}oP(a)}},{eventName:"resize",fn:e},{eventName:"scroll",options:{passive:!0,capture:!1},fn:()=>{n().type==="PENDING"&&e()}},{eventName:"webkitmouseforcedown",fn:a=>{const i=n();if(i.type==="IDLE"&&ye(),i.actions.shouldRespectForcePress()){e();return}a.preventDefault()}},{eventName:xp,fn:e}]}function hW(e){const t=k.useRef(XN),n=k.useRef(pa),s=qe(()=>({eventName:"mousedown",fn:function(u){if(u.defaultPrevented||u.button!==lP||u.ctrlKey||u.metaKey||u.shiftKey||u.altKey)return;const h=e.findClosestDraggableId(u);if(!h)return;const f=e.tryGetLock(h,o,{sourceEvent:u});if(!f)return;u.preventDefault();const b={x:u.clientX,y:u.clientY};n.current(),d(f,b)}}),[e]),a=qe(()=>({eventName:"webkitmouseforcewillbegin",fn:m=>{if(m.defaultPrevented)return;const u=e.findClosestDraggableId(m);if(!u)return;const h=e.findOptionsForDraggable(u);h&&(h.shouldRespectForcePress||e.canGetLock(u)&&m.preventDefault())}}),[e]),i=Ae(function(){const u={passive:!1,capture:!0};n.current=an(window,[a,s],u)},[a,s]),o=Ae(()=>{t.current.type!=="IDLE"&&(t.current=XN,n.current(),i())},[i]),l=Ae(()=>{const m=t.current;o(),m.type==="DRAGGING"&&m.actions.cancel({shouldBlockNextClick:!0}),m.type==="PENDING"&&m.actions.abort()},[o]),c=Ae(function(){const u={capture:!0,passive:!1},h=mW({cancel:l,completed:o,getPhase:()=>t.current,setPhase:f=>{t.current=f}});n.current=an(window,h,u)},[l,o]),d=Ae(function(u,h){t.current.type!=="IDLE"&&ye(),t.current={type:"PENDING",point:h,actions:u},c()},[c]);qr(function(){return i(),function(){n.current()}},[i])}function pW(){}const fW={[nW]:!0,[rW]:!0,[aW]:!0,[sW]:!0};function xW(e,t){function n(){t(),e.cancel()}function s(){t(),e.drop()}return[{eventName:"keydown",fn:a=>{if(a.keyCode===q1){a.preventDefault(),n();return}if(a.keyCode===iP){a.preventDefault(),s();return}if(a.keyCode===cW){a.preventDefault(),e.moveDown();return}if(a.keyCode===oW){a.preventDefault(),e.moveUp();return}if(a.keyCode===lW){a.preventDefault(),e.moveRight();return}if(a.keyCode===iW){a.preventDefault(),e.moveLeft();return}if(fW[a.keyCode]){a.preventDefault();return}oP(a)}},{eventName:"mousedown",fn:n},{eventName:"mouseup",fn:n},{eventName:"click",fn:n},{eventName:"touchstart",fn:n},{eventName:"resize",fn:n},{eventName:"wheel",fn:n,options:{passive:!0}},{eventName:xp,fn:n}]}function gW(e){const t=k.useRef(pW),n=qe(()=>({eventName:"keydown",fn:function(i){if(i.defaultPrevented||i.keyCode!==iP)return;const o=e.findClosestDraggableId(i);if(!o)return;const l=e.tryGetLock(o,m,{sourceEvent:i});if(!l)return;i.preventDefault();let c=!0;const d=l.snapLift();t.current();function m(){c||ye(),c=!1,t.current(),s()}t.current=an(window,xW(d,m),{capture:!0,passive:!1})}}),[e]),s=Ae(function(){const i={passive:!1,capture:!0};t.current=an(window,[n],i)},[n]);qr(function(){return s(),function(){t.current()}},[s])}const ux={type:"IDLE"},yW=120,bW=.15;function vW({cancel:e,getPhase:t}){return[{eventName:"orientationchange",fn:e},{eventName:"resize",fn:e},{eventName:"contextmenu",fn:n=>{n.preventDefault()}},{eventName:"keydown",fn:n=>{if(t().type!=="DRAGGING"){e();return}n.keyCode===q1&&n.preventDefault(),e()}},{eventName:xp,fn:e}]}function jW({cancel:e,completed:t,getPhase:n}){return[{eventName:"touchmove",options:{capture:!1},fn:s=>{const a=n();if(a.type!=="DRAGGING"){e();return}a.hasMoved=!0;const{clientX:i,clientY:o}=s.touches[0],l={x:i,y:o};s.preventDefault(),a.actions.move(l)}},{eventName:"touchend",fn:s=>{const a=n();if(a.type!=="DRAGGING"){e();return}s.preventDefault(),a.actions.drop({shouldBlockNextClick:!0}),t()}},{eventName:"touchcancel",fn:s=>{if(n().type!=="DRAGGING"){e();return}s.preventDefault(),e()}},{eventName:"touchforcechange",fn:s=>{const a=n();a.type==="IDLE"&&ye();const i=s.touches[0];if(!i||!(i.force>=bW))return;const l=a.actions.shouldRespectForcePress();if(a.type==="PENDING"){l&&e();return}if(l){if(a.hasMoved){s.preventDefault();return}e();return}s.preventDefault()}},{eventName:xp,fn:e}]}function wW(e){const t=k.useRef(ux),n=k.useRef(pa),s=Ae(function(){return t.current},[]),a=Ae(function(f){t.current=f},[]),i=qe(()=>({eventName:"touchstart",fn:function(f){if(f.defaultPrevented)return;const b=e.findClosestDraggableId(f);if(!b)return;const g=e.tryGetLock(b,l,{sourceEvent:f});if(!g)return;const x=f.touches[0],{clientX:p,clientY:y}=x,v={x:p,y};n.current(),u(g,v)}}),[e]),o=Ae(function(){const f={capture:!0,passive:!1};n.current=an(window,[i],f)},[i]),l=Ae(()=>{const h=t.current;h.type!=="IDLE"&&(h.type==="PENDING"&&clearTimeout(h.longPressTimerId),a(ux),n.current(),o())},[o,a]),c=Ae(()=>{const h=t.current;l(),h.type==="DRAGGING"&&h.actions.cancel({shouldBlockNextClick:!0}),h.type==="PENDING"&&h.actions.abort()},[l]),d=Ae(function(){const f={capture:!0,passive:!1},b={cancel:c,completed:l,getPhase:s},g=an(window,jW(b),f),x=an(window,vW(b),f);n.current=function(){g(),x()}},[c,s,l]),m=Ae(function(){const f=s();f.type!=="PENDING"&&ye();const b=f.actions.fluidLift(f.point);a({type:"DRAGGING",actions:b,hasMoved:!1})},[s,a]),u=Ae(function(f,b){s().type!=="IDLE"&&ye();const g=setTimeout(m,yW);a({type:"PENDING",point:b,actions:f,longPressTimerId:g}),d()},[d,s,a,m]);qr(function(){return o(),function(){n.current();const b=s();b.type==="PENDING"&&(clearTimeout(b.longPressTimerId),a(ux))}},[s,o,a]),qr(function(){return an(window,[{eventName:"touchmove",fn:()=>{},options:{capture:!1,passive:!1}}])},[])}const NW=["input","button","textarea","select","option","optgroup","video","audio"];function cP(e,t){if(t==null)return!1;if(NW.includes(t.tagName.toLowerCase()))return!0;const s=t.getAttribute("contenteditable");return s==="true"||s===""?!0:t===e?!1:cP(e,t.parentElement)}function _W(e,t){const n=t.target;return pp(n)?cP(e,n):!1}var kW=e=>Cn(e.getBoundingClientRect()).center;function SW(e){return e instanceof sP(e).Element}const CW=(()=>{const e="matches";return typeof document>"u"?e:[e,"msMatchesSelector","webkitMatchesSelector"].find(s=>s in Element.prototype)||e})();function dP(e,t){return e==null?null:e[CW](t)?e:dP(e.parentElement,t)}function AW(e,t){return e.closest?e.closest(t):dP(e,t)}function PW(e){return`[${Xo.contextId}="${e}"]`}function EW(e,t){const n=t.target;if(!SW(n))return null;const s=PW(e),a=AW(n,s);return!a||!pp(a)?null:a}function OW(e,t){const n=EW(e,t);return n?n.getAttribute(Xo.draggableId):null}function TW(e,t){const n=`[${Cy.contextId}="${e}"]`,a=nP(document,n).find(i=>i.getAttribute(Cy.id)===t);return!a||!pp(a)?null:a}function MW(e){e.preventDefault()}function lm({expected:e,phase:t,isLockActive:n,shouldWarn:s}){return!(!n()||e!==t)}function uP({lockAPI:e,store:t,registry:n,draggableId:s}){if(e.isClaimed())return!1;const a=n.draggable.findById(s);return!(!a||!a.options.isEnabled||!ZA(t.getState(),s))}function LW({lockAPI:e,contextId:t,store:n,registry:s,draggableId:a,forceSensorStop:i,sourceEvent:o}){if(!uP({lockAPI:e,store:n,registry:s,draggableId:a}))return null;const c=s.draggable.getById(a),d=TW(t,c.descriptor.id);if(!d||o&&!c.options.canDragInteractiveElements&&_W(d,o))return null;const m=e.claim(i||pa);let u="PRE_DRAG";function h(){return c.options.shouldRespectForcePress}function f(){return e.isActive(m)}function b(w,j){lm({expected:w,phase:u,isLockActive:f,shouldWarn:!0})&&n.dispatch(j())}const g=b.bind(null,"DRAGGING");function x(w){function j(){e.release(),u="COMPLETED"}u!=="PRE_DRAG"&&(j(),ye()),n.dispatch(Aq(w.liftActionArgs)),u="DRAGGING";function _(S,T={shouldBlockNextClick:!1}){if(w.cleanup(),T.shouldBlockNextClick){const A=an(window,[{eventName:"click",fn:MW,options:{once:!0,passive:!1,capture:!0}}]);setTimeout(A)}j(),n.dispatch(VA({reason:S}))}return{isActive:()=>lm({expected:"DRAGGING",phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:h,drop:S=>_("DROP",S),cancel:S=>_("CANCEL",S),...w.actions}}function p(w){const j=fd(S=>{g(()=>WA({client:S}))});return{...x({liftActionArgs:{id:a,clientSelection:w,movementMode:"FLUID"},cleanup:()=>j.cancel(),actions:{move:j}}),move:j}}function y(){const w={moveUp:()=>g(Iq),moveRight:()=>g(Fq),moveDown:()=>g(Dq),moveLeft:()=>g(Bq)};return x({liftActionArgs:{id:a,clientSelection:kW(d),movementMode:"SNAP"},cleanup:pa,actions:w})}function v(){lm({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!0})&&e.release()}return{isActive:()=>lm({expected:"PRE_DRAG",phase:u,isLockActive:f,shouldWarn:!1}),shouldRespectForcePress:h,fluidLift:p,snapLift:y,abort:v}}const $W=[hW,gW,wW];function RW({contextId:e,store:t,registry:n,customSensors:s,enableDefaultSensors:a}){const i=[...a?$W:[],...s||[]],o=k.useState(()=>ZU())[0],l=Ae(function(x,p){jd(x)&&!jd(p)&&o.tryAbandon()},[o]);qr(function(){let x=t.getState();return t.subscribe(()=>{const y=t.getState();l(x,y),x=y})},[o,t,l]),qr(()=>o.tryAbandon,[o.tryAbandon]);const c=Ae(g=>uP({lockAPI:o,registry:n,store:t,draggableId:g}),[o,n,t]),d=Ae((g,x,p)=>LW({lockAPI:o,registry:n,contextId:e,store:t,draggableId:g,forceSensorStop:x||null,sourceEvent:p&&p.sourceEvent?p.sourceEvent:null}),[e,o,n,t]),m=Ae(g=>OW(e,g),[e]),u=Ae(g=>{const x=n.draggable.findById(g);return x?x.options:null},[n.draggable]),h=Ae(function(){o.isClaimed()&&(o.tryAbandon(),t.getState().phase!=="IDLE"&&t.dispatch(M1()))},[o,t]),f=Ae(()=>o.isClaimed(),[o]),b=qe(()=>({canGetLock:c,tryGetLock:d,findClosestDraggableId:m,findOptionsForDraggable:u,tryReleaseLock:h,isLockClaimed:f}),[c,d,m,u,h,f]);for(let g=0;g<i.length;g++)i[g](b)}const IW=e=>({onBeforeCapture:t=>{const n=()=>{e.onBeforeCapture&&e.onBeforeCapture(t)};J0.flushSync(n)},onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragEnd:e.onDragEnd,onDragUpdate:e.onDragUpdate}),DW=e=>({...vd,...e.autoScrollerOptions,durationDampening:{...vd.durationDampening,...e.autoScrollerOptions}});function lc(e){return e.current||ye(),e.current}function FW(e){const{contextId:t,setCallbacks:n,sensors:s,nonce:a,dragHandleUsageInstructions:i}=e,o=k.useRef(null),l=aP(e),c=Ae(()=>IW(l.current),[l]),d=Ae(()=>DW(l.current),[l]),m=QU(t),u=JU({contextId:t,text:i}),h=qU(t,a),f=Ae(A=>{lc(o).dispatch(A)},[]),b=qe(()=>kN({publishWhileDragging:Eq,updateDroppableScroll:Tq,updateDroppableIsEnabled:Mq,updateDroppableIsCombineEnabled:Lq,collectionStarting:Oq},f),[f]),g=HU(),x=qe(()=>vU(g,b),[g,b]),p=qe(()=>IU({scrollWindow:jU,scrollDroppable:x.scrollDroppable,getAutoScrollerOptions:d,...kN({move:WA},f)}),[x.scrollDroppable,f,d]),y=WU(t),v=qe(()=>xU({announce:m,autoScroller:p,dimensionMarshal:x,focusMarshal:y,getResponders:c,styleMarshal:h}),[m,p,x,y,c,h]);o.current=v;const N=Ae(()=>{const A=lc(o);A.getState().phase!=="IDLE"&&A.dispatch(M1())},[]),w=Ae(()=>{const A=lc(o).getState();return A.phase==="DROP_ANIMATING"?!0:A.phase==="IDLE"?!1:A.isDragging},[]),j=qe(()=>({isDragging:w,tryAbort:N}),[w,N]);n(j);const _=Ae(A=>ZA(lc(o).getState(),A),[]),S=Ae(()=>Ba(lc(o).getState()),[]),T=qe(()=>({marshal:x,focus:y,contextId:t,canLift:_,isMovementAllowed:S,dragHandleUsageInstructionsId:u,registry:g}),[t,x,u,y,_,S,g]);return RW({contextId:t,store:v,registry:g,customSensors:s||null,enableDefaultSensors:e.enableDefaultSensors!==!1}),k.useEffect(()=>N,[N]),Y.createElement(fp.Provider,{value:T},Y.createElement(uz,{context:B1,store:v},e.children))}function BW(){return Y.useId()}function zW(e){const t=BW(),n=e.dragHandleUsageInstructions||Qm.dragHandleUsageInstructions;return Y.createElement(gz,null,s=>Y.createElement(FW,{nonce:e.nonce,contextId:t,setCallbacks:s,dragHandleUsageInstructions:n,enableDefaultSensors:e.enableDefaultSensors,sensors:e.sensors,onBeforeCapture:e.onBeforeCapture,onBeforeDragStart:e.onBeforeDragStart,onDragStart:e.onDragStart,onDragUpdate:e.onDragUpdate,onDragEnd:e.onDragEnd,autoScrollerOptions:e.autoScrollerOptions},e.children))}const JN={dragging:5e3,dropAnimating:4500},qW=(e,t)=>t?Bc.drop(t.duration):e?Bc.snap:Bc.fluid,UW=(e,t)=>{if(e)return t?bd.opacity.drop:bd.opacity.combining},WW=e=>e.forceShouldAnimate!=null?e.forceShouldAnimate:e.mode==="SNAP";function VW(e){const n=e.dimension.client,{offset:s,combineWith:a,dropping:i}=e,o=!!a,l=WW(e),c=!!i,d=c?ky.drop(s,o):ky.moveTo(s);return{position:"fixed",top:n.marginBox.top,left:n.marginBox.left,boxSizing:"border-box",width:n.borderBox.width,height:n.borderBox.height,transition:qW(l,i),transform:d,opacity:UW(o,c),zIndex:c?JN.dropAnimating:JN.dragging,pointerEvents:"none"}}function HW(e){return{transform:ky.moveTo(e.offset),transition:e.shouldAnimateDisplacement?void 0:"none"}}function KW(e){return e.type==="DRAGGING"?VW(e):HW(e)}function GW(e,t,n=Dt){const s=window.getComputedStyle(t),a=t.getBoundingClientRect(),i=yA(a,s),o=Eh(i,n),l={client:i,tagName:t.tagName.toLowerCase(),display:s.display},c={x:i.marginBox.width,y:i.marginBox.height};return{descriptor:e,placeholder:l,displaceBy:c,client:i,page:o}}function QW(e){const t=z1("draggable"),{descriptor:n,registry:s,getDraggableRef:a,canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}=e,c=qe(()=>({canDragInteractiveElements:i,shouldRespectForcePress:o,isEnabled:l}),[i,l,o]),d=Ae(f=>{const b=a();return b||ye(),GW(n,b,f)},[n,a]),m=qe(()=>({uniqueId:t,descriptor:n,options:c,getDimension:d}),[n,d,c,t]),u=k.useRef(m),h=k.useRef(!0);qr(()=>(s.draggable.register(u.current),()=>s.draggable.unregister(u.current)),[s.draggable]),qr(()=>{if(h.current){h.current=!1;return}const f=u.current;u.current=m,s.draggable.update(m,f)},[m,s.draggable])}var U1=Y.createContext(null);function Rh(e){const t=k.useContext(e);return t||ye(),t}function YW(e){e.preventDefault()}const XW=e=>{const t=k.useRef(null),n=Ae((j=null)=>{t.current=j},[]),s=Ae(()=>t.current,[]),{contextId:a,dragHandleUsageInstructionsId:i,registry:o}=Rh(fp),{type:l,droppableId:c}=Rh(U1),d=qe(()=>({id:e.draggableId,index:e.index,type:l,droppableId:c}),[e.draggableId,e.index,l,c]),{children:m,draggableId:u,isEnabled:h,shouldRespectForcePress:f,canDragInteractiveElements:b,isClone:g,mapped:x,dropAnimationFinished:p}=e;if(!g){const j=qe(()=>({descriptor:d,registry:o,getDraggableRef:s,canDragInteractiveElements:b,shouldRespectForcePress:f,isEnabled:h}),[d,o,s,b,f,h]);QW(j)}const y=qe(()=>h?{tabIndex:0,role:"button","aria-describedby":i,"data-rfd-drag-handle-draggable-id":u,"data-rfd-drag-handle-context-id":a,draggable:!1,onDragStart:YW}:null,[a,i,u,h]),v=Ae(j=>{x.type==="DRAGGING"&&x.dropping&&j.propertyName==="transform"&&J0.flushSync(p)},[p,x]),N=qe(()=>{const j=KW(x),_=x.type==="DRAGGING"&&x.dropping?v:void 0;return{innerRef:n,draggableProps:{"data-rfd-draggable-context-id":a,"data-rfd-draggable-id":u,style:j,onTransitionEnd:_},dragHandleProps:y}},[a,y,u,x,v,n]),w=qe(()=>({draggableId:d.id,type:d.type,source:{index:d.index,droppableId:d.droppableId}}),[d.droppableId,d.id,d.index,d.type]);return Y.createElement(Y.Fragment,null,m(N,x.snapshot,w))};var mP=(e,t)=>e===t,hP=e=>{const{combine:t,destination:n}=e;return n?n.droppableId:t?t.droppableId:null};const JW=e=>e.combine?e.combine.draggableId:null,ZW=e=>e.at&&e.at.type==="COMBINE"?e.at.combine.draggableId:null;function eV(){const e=It((a,i)=>({x:a,y:i})),t=It((a,i,o=null,l=null,c=null)=>({isDragging:!0,isClone:i,isDropAnimating:!!c,dropAnimation:c,mode:a,draggingOver:o,combineWith:l,combineTargetFor:null})),n=It((a,i,o,l,c=null,d=null,m=null)=>({mapped:{type:"DRAGGING",dropping:null,draggingOver:c,combineWith:d,mode:i,offset:a,dimension:o,forceShouldAnimate:m,snapshot:t(i,l,c,d,null)}}));return(a,i)=>{if(jd(a)){if(a.critical.draggable.id!==i.draggableId)return null;const o=a.current.client.offset,l=a.dimensions.draggables[i.draggableId],c=zr(a.impact),d=ZW(a.impact),m=a.forceShouldAnimate;return n(e(o.x,o.y),a.movementMode,l,i.isClone,c,d,m)}if(a.phase==="DROP_ANIMATING"){const o=a.completed;if(o.result.draggableId!==i.draggableId)return null;const l=i.isClone,c=a.dimensions.draggables[i.draggableId],d=o.result,m=d.mode,u=hP(d),h=JW(d),b={duration:a.dropDuration,curve:$1.drop,moveTo:a.newHomeClientOffset,opacity:h?bd.opacity.drop:null,scale:h?bd.scale.drop:null};return{mapped:{type:"DRAGGING",offset:a.newHomeClientOffset,dimension:c,dropping:b,draggingOver:u,combineWith:h,mode:m,forceShouldAnimate:null,snapshot:t(m,l,u,h,b)}}}return null}}function pP(e=null){return{isDragging:!1,isDropAnimating:!1,isClone:!1,dropAnimation:null,mode:null,draggingOver:null,combineTargetFor:e,combineWith:null}}const tV={mapped:{type:"SECONDARY",offset:Dt,combineTargetFor:null,shouldAnimateDisplacement:!0,snapshot:pP(null)}};function rV(){const e=It((o,l)=>({x:o,y:l})),t=It(pP),n=It((o,l=null,c)=>({mapped:{type:"SECONDARY",offset:o,combineTargetFor:l,shouldAnimateDisplacement:c,snapshot:t(l)}})),s=o=>o?n(Dt,o,!0):null,a=(o,l,c,d)=>{const m=c.displaced.visible[o],u=!!(d.inVirtualList&&d.effected[o]),h=up(c),f=h&&h.draggableId===o?l:null;if(!m){if(!u)return s(f);if(c.displaced.invisible[o])return null;const x=El(d.displacedBy.point),p=e(x.x,x.y);return n(p,f,!0)}if(u)return s(f);const b=c.displacedBy.point,g=e(b.x,b.y);return n(g,f,m.shouldAnimate)};return(o,l)=>{if(jd(o))return o.critical.draggable.id===l.draggableId?null:a(l.draggableId,o.critical.draggable.id,o.impact,o.afterCritical);if(o.phase==="DROP_ANIMATING"){const c=o.completed;return c.result.draggableId===l.draggableId?null:a(l.draggableId,c.result.draggableId,c.impact,c.afterCritical)}return null}}const nV=()=>{const e=eV(),t=rV();return(s,a)=>e(s,a)||t(s,a)||tV},sV={dropAnimationFinished:HA},aV=gA(nV,sV,null,{context:B1,areStatePropsEqual:mP})(XW);function fP(e){return Rh(U1).isUsingCloneFor===e.draggableId&&!e.isClone?null:Y.createElement(aV,e)}function iV(e){const t=typeof e.isDragDisabled=="boolean"?!e.isDragDisabled:!0,n=!!e.disableInteractiveElementBlocking,s=!!e.shouldRespectForcePress;return Y.createElement(fP,Oh({},e,{isClone:!1,isEnabled:t,canDragInteractiveElements:n,shouldRespectForcePress:s}))}const xP=e=>t=>e===t,oV=xP("scroll"),lV=xP("auto"),ZN=(e,t)=>t(e.overflowX)||t(e.overflowY),cV=e=>{const t=window.getComputedStyle(e),n={overflowX:t.overflowX,overflowY:t.overflowY};return ZN(n,oV)||ZN(n,lV)},dV=()=>!1,gP=e=>e==null?null:e===document.body?dV()?e:null:e===document.documentElement?null:cV(e)?e:gP(e.parentElement);var Ay=e=>({x:e.scrollLeft,y:e.scrollTop});const yP=e=>e?window.getComputedStyle(e).position==="fixed"?!0:yP(e.parentElement):!1;var uV=e=>{const t=gP(e),n=yP(e);return{closestScrollable:t,isFixedOnPage:n}},mV=({descriptor:e,isEnabled:t,isCombineEnabled:n,isFixedOnPage:s,direction:a,client:i,page:o,closest:l})=>{const c=(()=>{if(!l)return null;const{scrollSize:h,client:f}=l,b=YA({scrollHeight:h.scrollHeight,scrollWidth:h.scrollWidth,height:f.paddingBox.height,width:f.paddingBox.width});return{pageMarginBox:l.page.marginBox,frameClient:f,scrollSize:h,shouldClipSubject:l.shouldClipSubject,scroll:{initial:l.scroll,current:l.scroll,max:b,diff:{value:Dt,displacement:Dt}}}})(),d=a==="vertical"?A1:PA,m=Qo({page:o,withPlaceholder:null,axis:d,frame:c});return{descriptor:e,isCombineEnabled:n,isFixedOnPage:s,axis:d,isEnabled:t,client:i,page:o,frame:c,subject:m}};const hV=(e,t)=>{const n=bA(e);if(!t||e!==t)return n;const s=n.paddingBox.top-t.scrollTop,a=n.paddingBox.left-t.scrollLeft,i=s+t.scrollHeight,o=a+t.scrollWidth,c=_1({top:s,right:o,bottom:i,left:a},n.border);return k1({borderBox:c,margin:n.margin,border:n.border,padding:n.padding})};var pV=({ref:e,descriptor:t,env:n,windowScroll:s,direction:a,isDropDisabled:i,isCombineEnabled:o,shouldClipSubject:l})=>{const c=n.closestScrollable,d=hV(e,c),m=Eh(d,s),u=(()=>{if(!c)return null;const f=bA(c),b={scrollHeight:c.scrollHeight,scrollWidth:c.scrollWidth};return{client:f,page:Eh(f,s),scroll:Ay(c),scrollSize:b,shouldClipSubject:l}})();return mV({descriptor:t,isEnabled:!i,isCombineEnabled:o,isFixedOnPage:n.isFixedOnPage,direction:a,client:d,page:m,closest:u})};const fV={passive:!1},xV={passive:!0};var e_=e=>e.shouldPublishImmediately?fV:xV;const cm=e=>e&&e.env.closestScrollable||null;function gV(e){const t=k.useRef(null),n=Rh(fp),s=z1("droppable"),{registry:a,marshal:i}=n,o=aP(e),l=qe(()=>({id:e.droppableId,type:e.type,mode:e.mode}),[e.droppableId,e.mode,e.type]),c=k.useRef(l),d=qe(()=>It((N,w)=>{t.current||ye();const j={x:N,y:w};i.updateDroppableScroll(l.id,j)}),[l.id,i]),m=Ae(()=>{const N=t.current;return!N||!N.env.closestScrollable?Dt:Ay(N.env.closestScrollable)},[]),u=Ae(()=>{const N=m();d(N.x,N.y)},[m,d]),h=qe(()=>fd(u),[u]),f=Ae(()=>{const N=t.current,w=cm(N);if(N&&w||ye(),N.scrollOptions.shouldPublishImmediately){u();return}h()},[h,u]),b=Ae((N,w)=>{t.current&&ye();const j=o.current,_=j.getDroppableRef();_||ye();const S=uV(_),T={ref:_,descriptor:l,env:S,scrollOptions:w};t.current=T;const A=pV({ref:_,descriptor:l,env:S,windowScroll:N,direction:j.direction,isDropDisabled:j.isDropDisabled,isCombineEnabled:j.isCombineEnabled,shouldClipSubject:!j.ignoreContainerClipping}),E=S.closestScrollable;return E&&(E.setAttribute(GN.contextId,n.contextId),E.addEventListener("scroll",f,e_(T.scrollOptions))),A},[n.contextId,l,f,o]),g=Ae(()=>{const N=t.current,w=cm(N);return N&&w||ye(),Ay(w)},[]),x=Ae(()=>{const N=t.current;N||ye();const w=cm(N);t.current=null,w&&(h.cancel(),w.removeAttribute(GN.contextId),w.removeEventListener("scroll",f,e_(N.scrollOptions)))},[f,h]),p=Ae(N=>{const w=t.current;w||ye();const j=cm(w);j||ye(),j.scrollTop+=N.y,j.scrollLeft+=N.x},[]),y=qe(()=>({getDimensionAndWatchScroll:b,getScrollWhileDragging:g,dragStopped:x,scroll:p}),[x,b,g,p]),v=qe(()=>({uniqueId:s,descriptor:l,callbacks:y}),[y,l,s]);qr(()=>(c.current=v.descriptor,a.droppable.register(v),()=>{t.current&&x(),a.droppable.unregister(v)}),[y,l,x,v,i,a.droppable]),qr(()=>{t.current&&i.updateDroppableIsEnabled(c.current.id,!e.isDropDisabled)},[e.isDropDisabled,i]),qr(()=>{t.current&&i.updateDroppableIsCombineEnabled(c.current.id,e.isCombineEnabled)},[e.isCombineEnabled,i])}function mx(){}const t_={width:0,height:0,margin:_z},yV=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>e||n==="close"?t_:{height:t.client.borderBox.height,width:t.client.borderBox.width,margin:t.client.margin},bV=({isAnimatingOpenOnMount:e,placeholder:t,animate:n})=>{const s=yV({isAnimatingOpenOnMount:e,placeholder:t,animate:n});return{display:t.display,boxSizing:"border-box",width:s.width,height:s.height,marginTop:s.margin.top,marginRight:s.margin.right,marginBottom:s.margin.bottom,marginLeft:s.margin.left,flexShrink:"0",flexGrow:"0",pointerEvents:"none",transition:n!=="none"?Bc.placeholder:null}},vV=e=>{const t=k.useRef(null),n=Ae(()=>{t.current&&(clearTimeout(t.current),t.current=null)},[]),{animate:s,onTransitionEnd:a,onClose:i,contextId:o}=e,[l,c]=k.useState(e.animate==="open");k.useEffect(()=>l?s!=="open"?(n(),c(!1),mx):t.current?mx:(t.current=setTimeout(()=>{t.current=null,c(!1)}),n):mx,[s,l,n]);const d=Ae(u=>{u.propertyName==="height"&&(a(),s==="close"&&i())},[s,i,a]),m=bV({isAnimatingOpenOnMount:l,animate:e.animate,placeholder:e.placeholder});return Y.createElement(e.placeholder.tagName,{style:m,"data-rfd-placeholder-context-id":o,onTransitionEnd:d,ref:e.innerRef})};var jV=Y.memo(vV);class wV extends Y.PureComponent{constructor(...t){super(...t),this.state={isVisible:!!this.props.on,data:this.props.on,animate:this.props.shouldAnimate&&this.props.on?"open":"none"},this.onClose=()=>{this.state.animate==="close"&&this.setState({isVisible:!1})}}static getDerivedStateFromProps(t,n){return t.shouldAnimate?t.on?{isVisible:!0,data:t.on,animate:"open"}:n.isVisible?{isVisible:!0,data:n.data,animate:"close"}:{isVisible:!1,animate:"close",data:null}:{isVisible:!!t.on,data:t.on,animate:"none"}}render(){if(!this.state.isVisible)return null;const t={onClose:this.onClose,data:this.state.data,animate:this.state.animate};return this.props.children(t)}}const NV=e=>{const t=k.useContext(fp);t||ye();const{contextId:n,isMovementAllowed:s}=t,a=k.useRef(null),i=k.useRef(null),{children:o,droppableId:l,type:c,mode:d,direction:m,ignoreContainerClipping:u,isDropDisabled:h,isCombineEnabled:f,snapshot:b,useClone:g,updateViewportMaxScroll:x,getContainerForClone:p}=e,y=Ae(()=>a.current,[]),v=Ae((E=null)=>{a.current=E},[]);Ae(()=>i.current,[]);const N=Ae((E=null)=>{i.current=E},[]),w=Ae(()=>{s()&&x({maxScroll:JA()})},[s,x]);gV({droppableId:l,type:c,mode:d,direction:m,isDropDisabled:h,isCombineEnabled:f,ignoreContainerClipping:u,getDroppableRef:y});const j=qe(()=>Y.createElement(wV,{on:e.placeholder,shouldAnimate:e.shouldAnimatePlaceholder},({onClose:E,data:R,animate:I})=>Y.createElement(jV,{placeholder:R,onClose:E,innerRef:N,animate:I,contextId:n,onTransitionEnd:w})),[n,w,e.placeholder,e.shouldAnimatePlaceholder,N]),_=qe(()=>({innerRef:v,placeholder:j,droppableProps:{"data-rfd-droppable-id":l,"data-rfd-droppable-context-id":n}}),[n,l,j,v]),S=g?g.dragging.draggableId:null,T=qe(()=>({droppableId:l,type:c,isUsingCloneFor:S}),[l,S,c]);function A(){if(!g)return null;const{dragging:E,render:R}=g,I=Y.createElement(fP,{draggableId:E.draggableId,index:E.source.index,isClone:!0,isEnabled:!0,shouldRespectForcePress:!1,canDragInteractiveElements:!0},(O,L)=>R(O,L,E));return PT.createPortal(I,p())}return Y.createElement(U1.Provider,{value:T},o(_,b),A())};function _V(){return document.body||ye(),document.body}const r_={mode:"standard",type:"DEFAULT",direction:"vertical",isDropDisabled:!1,isCombineEnabled:!1,ignoreContainerClipping:!1,renderClone:null,getContainerForClone:_V},bP=e=>{let t={...e},n;for(n in r_)e[n]===void 0&&(t={...t,[n]:r_[n]});return t},hx=(e,t)=>e===t.droppable.type,n_=(e,t)=>t.draggables[e.draggable.id],kV=()=>{const e={placeholder:null,shouldAnimatePlaceholder:!0,snapshot:{isDraggingOver:!1,draggingOverWith:null,draggingFromThisWith:null,isUsingPlaceholder:!1},useClone:null},t={...e,shouldAnimatePlaceholder:!1},n=It(i=>({draggableId:i.id,type:i.type,source:{index:i.index,droppableId:i.droppableId}})),s=It((i,o,l,c,d,m)=>{const u=d.descriptor.id;if(d.descriptor.droppableId===i){const b=m?{render:m,dragging:n(d.descriptor)}:null,g={isDraggingOver:l,draggingOverWith:l?u:null,draggingFromThisWith:u,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!1,snapshot:g,useClone:b}}if(!o)return t;if(!c)return e;const f={isDraggingOver:l,draggingOverWith:u,draggingFromThisWith:null,isUsingPlaceholder:!0};return{placeholder:d.placeholder,shouldAnimatePlaceholder:!0,snapshot:f,useClone:null}});return(i,o)=>{const l=bP(o),c=l.droppableId,d=l.type,m=!l.isDropDisabled,u=l.renderClone;if(jd(i)){const h=i.critical;if(!hx(d,h))return t;const f=n_(h,i.dimensions),b=zr(i.impact)===c;return s(c,m,b,b,f,u)}if(i.phase==="DROP_ANIMATING"){const h=i.completed;if(!hx(d,h.critical))return t;const f=n_(h.critical,i.dimensions);return s(c,m,hP(h.result)===c,zr(h.impact)===c,f,u)}if(i.phase==="IDLE"&&i.completed&&!i.shouldFlush){const h=i.completed;if(!hx(d,h.critical))return t;const f=zr(h.impact)===c,b=!!(h.impact.at&&h.impact.at.type==="COMBINE"),g=h.critical.droppable.id===c;return f?b?e:t:g?e:t}return t}},SV={updateViewportMaxScroll:Rq},CV=gA(kV,SV,(e,t,n)=>({...bP(n),...e,...t}),{context:B1,areStatePropsEqual:mP})(NV),AV=async e=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/tiers",{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data.map(s=>{const a=s.features||[],i=a.reduce((o,l)=>{const c=o.find(d=>d.group_name===l.group_name);return c?c.features.push(l):o.push({group_name:l.group_name,features:[l]}),o},[]);return{tier:s.tier,features_count:a.length,orders_count:0,feature_groups:i}}),PV=async(e,t)=>(await te.post("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/tiers",t,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data,s_=async(e,t,n)=>(await te.patch(`https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/tiers/${t}`,n,{headers:{Authorization:`Bearer ${e}`,"Content-Type":"application/json"}})).data,a_=e=>e.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,""),EV=()=>{const e=ae(E=>E.authentication_state.auth_token),t=ae(E=>E.authentication_state.current_user),n=ae(E=>E.show_toast),[s,a]=k.useState(!1),[i,o]=k.useState(null),[l,c]=k.useState(null),[d,m]=k.useState({name:"",slug:"",description:"",is_open:!1}),[u,h]=k.useState(!1),f=Le(),b=et();k.useEffect(()=>{t&&t.role!=="ADMIN"&&(f("/admin"),n({type:"error",message:"Admin access required",duration:5e3}))},[t,f,n]);const{data:g=[],isLoading:x,error:p}=pe({queryKey:["admin-tiers"],queryFn:()=>AV(e),enabled:!!e,staleTime:6e4,refetchOnWindowFocus:!1}),y=ve({mutationFn:E=>PV(e,E),onSuccess:()=>{b.invalidateQueries({queryKey:["admin-tiers"]}),n({type:"success",message:"Tier created successfully",duration:5e3}),m({name:"",slug:"",description:"",is_open:!1})},onError:E=>{var I,O;const R=((O=(I=E.response)==null?void 0:I.data)==null?void 0:O.message)||E.message||"Failed to create tier";n({type:"error",message:R,duration:5e3}),c(R)}}),v=ve({mutationFn:({tierId:E,updates:R})=>s_(e,E,R),onSuccess:()=>{b.invalidateQueries({queryKey:["admin-tiers"]}),n({type:"success",message:"Tier updated successfully",duration:5e3})},onError:E=>{var I,O;const R=((O=(I=E.response)==null?void 0:I.data)==null?void 0:O.message)||E.message||"Failed to update tier";n({type:"error",message:R,duration:5e3}),c(R)}}),N=async E=>{if(!E.destination)return;const R=E.source.index,I=E.destination.index;if(R===I)return;const O=Array.from(g),[L]=O.splice(R,1);O.splice(I,0,L),a(!0);try{const F=O.map((M,D)=>M.tier.sort_order!==D?s_(e,M.tier.id,{sort_order:D}):Promise.resolve());await Promise.all(F),b.invalidateQueries({queryKey:["admin-tiers"]}),n({type:"success",message:"Tier order updated successfully",duration:5e3})}catch{n({type:"error",message:"Failed to update tier order",duration:5e3})}finally{a(!1)}},w=async(E,R)=>{o(E),await v.mutateAsync({tierId:E,updates:{is_active:!R}}),o(null)},j=async E=>{if(E.preventDefault(),!d.name.trim()){c("Tier name is required");return}const R={name:d.name.trim(),slug:d.slug||a_(d.name),description:d.description.trim()||null,sort_order:g.length};await y.mutateAsync(R)},_=E=>{m(R=>({...R,name:E,slug:a_(E)})),c(null)},S=()=>{m({name:"",slug:"",description:"",is_open:!0}),c(null)},T=()=>{m({name:"",slug:"",description:"",is_open:!1}),c(null)},A=Y.useMemo(()=>{if(!g||g.length===0)return{feature_groups:[]};const E=new Set;return g.forEach(I=>{I.feature_groups.forEach(O=>{E.add(O.group_name)})}),{feature_groups:Array.from(E).map(I=>{const O=new Set;g.forEach(F=>{const M=F.feature_groups.find(D=>D.group_name===I);M&&M.features.forEach(D=>O.add(D.feature_label))});const L=Array.from(O).map(F=>{const M={feature_label:F};return g.forEach(D=>{const W=D.feature_groups.find(K=>K.group_name===I),P=W==null?void 0:W.features.find(K=>K.feature_label===F),V=D.tier.slug;P?M[V]=P.is_included?P.feature_value||"":"":M[V]=""}),M});return{group_name:I,features:L}})}},[g]);return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Service Tiers Management"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Configure tier packages, features, and comparison matrix for public pricing page"})]}),r.jsxs("div",{className:"flex flex-col sm:flex-row gap-3",children:[r.jsxs("button",{onClick:()=>h(!0),className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 17V7m0 10a2 2 0 01-2 2H5a2 2 0 01-2-2V7a2 2 0 012-2h2a2 2 0 012 2m0 10a2 2 0 002 2h2a2 2 0 002-2V7a2 2 0 00-2-2h-2a2 2 0 00-2 2m0 10V7"})}),"Preview Matrix"]}),r.jsxs("button",{onClick:S,className:"inline-flex items-center justify-center px-6 py-2 bg-yellow-400 text-black rounded-lg text-sm font-semibold hover:bg-yellow-500 transition-all shadow-sm",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Tier"]})]})]})})}),r.jsxs("main",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[x&&r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-gray-600 font-medium",children:"Loading tiers..."})]})}),p&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-6 h-6 text-red-600 mr-3 flex-shrink-0",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load tiers"}),r.jsx("p",{className:"mt-1 text-sm text-red-700",children:p instanceof Error?p.message:"An error occurred"})]})]})}),!x&&!p&&r.jsxs(r.Fragment,{children:[g.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),r.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No tiers configured"}),r.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by creating your first tier package."}),r.jsx("div",{className:"mt-6",children:r.jsxs("button",{onClick:S,className:"inline-flex items-center px-6 py-3 bg-yellow-400 text-black rounded-lg text-sm font-semibold hover:bg-yellow-500 transition-all",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create First Tier"]})})]}):r.jsx(zW,{onDragEnd:N,children:r.jsx(CV,{droppableId:"tiers-list",children:(E,R)=>r.jsxs("div",{...E.droppableProps,ref:E.innerRef,className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[g.map((I,O)=>r.jsx(iV,{draggableId:I.tier.id,index:O,children:(L,F)=>r.jsxs("div",{ref:L.innerRef,...L.draggableProps,className:`bg-white rounded-xl border-2 overflow-hidden transition-all ${F.isDragging?"border-yellow-400 shadow-2xl scale-105":I.tier.is_active?"border-gray-200 shadow-lg hover:shadow-xl":"border-gray-200 shadow-sm opacity-60"}`,children:[r.jsxs("div",{...L.dragHandleProps,className:"bg-gray-50 px-4 py-3 flex items-center justify-between border-b border-gray-200 cursor-grab active:cursor-grabbing",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 8h16M4 16h16"})}),r.jsxs("span",{className:"text-xs font-medium text-gray-500 uppercase tracking-wider",children:["Tier ",O+1]})]}),r.jsx("button",{onClick:()=>w(I.tier.id,I.tier.is_active),disabled:i===I.tier.id,className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors focus:outline-none focus:ring-2 focus:ring-yellow-500 focus:ring-offset-2 ${I.tier.is_active?"bg-green-600":"bg-gray-300"} ${i===I.tier.id?"opacity-50 cursor-not-allowed":""}`,"aria-label":`Toggle ${I.tier.name} active state`,children:r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-white transition-transform ${I.tier.is_active?"translate-x-6":"translate-x-1"}`})})]}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-xl font-bold text-gray-900 mb-1",children:I.tier.name}),r.jsx("span",{className:"inline-block px-3 py-1 bg-gray-100 text-gray-600 text-xs font-medium rounded-full",children:I.tier.slug})]}),I.tier.description&&r.jsx("p",{className:"text-sm text-gray-600 mb-4 line-clamp-2",children:I.tier.description}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{className:"bg-blue-50 rounded-lg p-3",children:[r.jsx("div",{className:"text-2xl font-bold text-blue-700",children:I.features_count}),r.jsx("div",{className:"text-xs text-blue-600 mt-1",children:"Features"})]}),r.jsxs("div",{className:"bg-purple-50 rounded-lg p-3",children:[r.jsx("div",{className:"text-2xl font-bold text-purple-700",children:I.orders_count}),r.jsx("div",{className:"text-xs text-purple-600 mt-1",children:"Orders"})]})]}),I.feature_groups.length>0&&r.jsxs("div",{className:"mb-4",children:[r.jsx("div",{className:"text-xs font-semibold text-gray-700 mb-2",children:"Feature Groups:"}),r.jsxs("div",{className:"flex flex-wrap gap-1",children:[I.feature_groups.slice(0,3).map(M=>r.jsx("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:M.group_name},M.group_name)),I.feature_groups.length>3&&r.jsxs("span",{className:"inline-block px-2 py-1 bg-gray-100 text-gray-700 text-xs rounded",children:["+",I.feature_groups.length-3," more"]})]})]}),r.jsx(ie,{to:`/admin/tiers/${I.tier.id}`,className:"block w-full text-center px-4 py-2 bg-black text-white rounded-lg text-sm font-semibold hover:bg-gray-800 transition-colors",children:"Edit Tier Details"})]}),!I.tier.is_active&&r.jsx("div",{className:"absolute top-16 right-4",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:"Inactive"})})]})},I.tier.id)),E.placeholder]})})}),s&&r.jsxs("div",{className:"fixed bottom-8 right-8 bg-blue-600 text-white px-6 py-3 rounded-lg shadow-lg flex items-center space-x-3 z-50",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"font-medium",children:"Updating tier order..."})]}),g.length>0&&A.feature_groups.length>0&&r.jsx("div",{className:"mt-12",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 overflow-hidden",children:[r.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Tier Comparison Preview"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"This table appears on the public pricing page"})]}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Feature"}),g.map(E=>r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider",children:E.tier.name},E.tier.id))]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.feature_groups.map((E,R)=>r.jsxs(Y.Fragment,{children:[r.jsx("tr",{className:"bg-gray-100",children:r.jsx("td",{colSpan:g.length+1,className:"px-6 py-3 text-sm font-bold text-gray-900",children:E.group_name})}),E.features.map((I,O)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900",children:I.feature_label}),g.map(L=>{const F=I[L.tier.slug];return r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:F===""?r.jsx("span",{className:"text-green-600 text-lg",children:""}):F===""?r.jsx("span",{className:"text-red-500 text-lg",children:""}):r.jsx("span",{className:"text-gray-700",children:F})},L.tier.id)})]},`${R}-${O}`))]},E.group_name))})]})})]})})]})]}),d.is_open&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 transition-opacity",onClick:T}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:r.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Create New Tier"}),r.jsx("button",{onClick:T,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("form",{onSubmit:j,className:"space-y-4",children:[l&&r.jsx("div",{className:"bg-red-50 border border-red-200 text-red-700 px-4 py-3 rounded-lg text-sm",children:l}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"tier-name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Tier Name ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),r.jsx("input",{id:"tier-name",type:"text",required:!0,value:d.name,onChange:E=>{c(null),_(E.target.value)},placeholder:"e.g., Premium, Enterprise",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-base"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"tier-slug",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Slug (URL-friendly identifier)"}),r.jsx("input",{id:"tier-slug",type:"text",value:d.slug,onChange:E=>{c(null),m(R=>({...R,slug:E.target.value}))},placeholder:"auto-generated",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-base bg-gray-50"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Auto-generated from name. Must be lowercase with hyphens."})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"tier-description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{id:"tier-description",rows:3,value:d.description,onChange:E=>{c(null),m(R=>({...R,description:E.target.value}))},placeholder:"Brief description of this tier's value proposition",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all text-base resize-vertical"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:T,disabled:y.isPending,className:"px-6 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors disabled:opacity-50",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:y.isPending||!d.name.trim(),className:"px-6 py-2 bg-yellow-400 text-black rounded-lg text-sm font-semibold hover:bg-yellow-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed inline-flex items-center",children:y.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Tier"})]})]})]})})]})}),u&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 transition-opacity",onClick:()=>h(!1)}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-2xl transform transition-all sm:my-8 sm:align-middle sm:max-w-6xl sm:w-full",children:r.jsxs("div",{className:"bg-white",children:[r.jsxs("div",{className:"bg-gradient-to-r from-gray-50 to-gray-100 px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Tier Comparison Matrix"}),r.jsx("button",{onClick:()=>h(!1),className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsx("div",{className:"px-6 py-4 max-h-[70vh] overflow-y-auto",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0 z-10",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Feature"}),g.map(E=>r.jsx("th",{className:"px-6 py-3 text-center text-xs font-semibold text-gray-700 uppercase tracking-wider",children:E.tier.name},E.tier.id))]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:A.feature_groups.map((E,R)=>r.jsxs(Y.Fragment,{children:[r.jsx("tr",{className:"bg-gray-100",children:r.jsx("td",{colSpan:g.length+1,className:"px-6 py-3 text-sm font-bold text-gray-900",children:E.group_name})}),E.features.map((I,O)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 text-sm text-gray-900 font-medium",children:I.feature_label}),g.map(L=>{const F=I[L.tier.slug];return r.jsx("td",{className:"px-6 py-4 text-center text-sm",children:F===""?r.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-green-100",children:r.jsx("span",{className:"text-green-600 text-lg font-bold",children:""})}):F===""?r.jsx("span",{className:"inline-flex items-center justify-center w-6 h-6 rounded-full bg-red-100",children:r.jsx("span",{className:"text-red-500 text-lg font-bold",children:""})}):r.jsx("span",{className:"text-gray-700 font-medium",children:F})},L.tier.id)})]},`${R}-${O}`))]},E.group_name))})]})})}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 border-t border-gray-200 flex justify-between items-center",children:[r.jsx("p",{className:"text-sm text-gray-600",children:"To edit individual features, go to the specific tier editor"}),r.jsx("button",{onClick:()=>h(!1),className:"px-6 py-2 bg-black text-white rounded-lg text-sm font-semibold hover:bg-gray-800 transition-colors",children:"Close Preview"})]})]})})]})})]})})},ku="https://123project-build-a-production-ready-w.launchpulse.ai",OV=async e=>(await te.get(`${ku}/api/admin/tiers`,{headers:{Authorization:`Bearer ${e}`}})).data,TV=async(e,t,n)=>(await te.patch(`${ku}/api/admin/tiers/${e}`,t,{headers:{Authorization:`Bearer ${n}`}})).data,MV=async(e,t)=>(await te.post(`${ku}/api/admin/tier-features`,e,{headers:{Authorization:`Bearer ${t}`}})).data,LV=async(e,t,n)=>(await te.patch(`${ku}/api/admin/tier-features/${e}`,t,{headers:{Authorization:`Bearer ${n}`}})).data,$V=async(e,t)=>{await te.delete(`${ku}/api/admin/tier-features/${e}`,{headers:{Authorization:`Bearer ${t}`}})},cc=e=>{const t=[];return e.forEach(n=>{const s=t.find(a=>a.group_name===n.group_name);s?s.features.push(n):t.push({group_name:n.group_name,features:[n]})}),t.forEach(n=>{n.features.sort((s,a)=>s.sort_order-a.sort_order)}),t},RV=e=>/^[a-z0-9-]+$/.test(e),IV=e=>/^[a-z_]+$/.test(e),i_=()=>{const{tier_id:e}=fr(),t=Le(),n=et(),s=ae(C=>C.authentication_state.auth_token),a=ae(C=>C.authentication_state.current_user),i=ae(C=>C.show_toast);ae(C=>C.show_modal),ae(C=>C.close_modal);const[o,l]=k.useState(null),[c,d]=k.useState([]),[m,u]=k.useState([]),[h,f]=k.useState({name:"",slug:"",description:null,is_active:!0}),[b,g]=k.useState({group_name:"",feature_key:"",feature_label:"",feature_value:null,is_included:!0}),[x,p]=k.useState({tier:{},feature:{}}),[y,v]=k.useState({}),[N,w]=k.useState(null),[j,_]=k.useState(null),[S,T]=k.useState(""),[A,E]=k.useState(!1),R=e==="new";k.useEffect(()=>{(!a||a.role!=="ADMIN")&&(t("/admin"),i({type:"error",message:"Insufficient permissions",duration:5e3}))},[a,t,i]);const{data:I,isLoading:O,error:L}=pe({queryKey:["admin-tiers"],queryFn:()=>OV(s||""),enabled:!!s&&!R});k.useEffect(()=>{var C,U;L&&i({type:"error",message:((U=(C=L.response)==null?void 0:C.data)==null?void 0:U.message)||"Failed to load tier",duration:5e3})},[L,i]),k.useEffect(()=>{if(I){const C=I.find(q=>q.tier.id===e);if(!C){i({type:"error",message:"Tier not found",duration:5e3}),t("/admin/tiers");return}l(C.tier),d(C.features||[]),u(cc(C.features||[])),f({name:C.tier.name,slug:C.tier.slug,description:C.tier.description,is_active:C.tier.is_active});const U={};cc(C.features||[]).forEach(q=>{U[q.group_name]=!0}),v(U)}},[I,e,i,t]);const F=ve({mutationFn:C=>TV(e||"",C,s||""),onSuccess:()=>{i({type:"success",message:"Tier updated successfully",duration:5e3}),n.invalidateQueries({queryKey:["admin-tiers"]})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to update tier",duration:5e3})}}),M=ve({mutationFn:C=>MV(C,s||""),onSuccess:C=>{const U=[...c,C];d(U),u(cc(U)),g({group_name:"",feature_key:"",feature_label:"",feature_value:null,is_included:!0}),E(!1),i({type:"success",message:`Feature "${C.feature_label}" added`,duration:5e3}),n.invalidateQueries({queryKey:["admin-tiers"]})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to create feature",duration:5e3})}}),D=ve({mutationFn:({feature_id:C,data:U})=>LV(C,U,s||""),onSuccess:C=>{const U=c.map(q=>q.id===C.id?C:q);d(U),u(cc(U)),w(null),_(null),i({type:"success",message:"Feature updated",duration:3e3}),n.invalidateQueries({queryKey:["admin-tiers"]})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to update feature",duration:5e3}),w(null),_(null)}}),W=ve({mutationFn:C=>$V(C,s||""),onSuccess:(C,U)=>{const q=c.filter(de=>de.id!==U);d(q),u(cc(q)),i({type:"success",message:"Feature removed",duration:3e3}),n.invalidateQueries({queryKey:["admin-tiers"]})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to delete feature",duration:5e3})}}),P=(C,U)=>{f(q=>({...q,[C]:U})),x.tier[C]&&p(q=>({...q,tier:{...q.tier,[C]:""}}))},V=()=>{const C={};return h.name.trim()||(C.name="Tier name is required"),h.slug.trim()?RV(h.slug)||(C.slug="Slug must be lowercase letters, numbers, and hyphens only"):C.slug="Tier slug is required",p(U=>({...U,tier:C})),Object.keys(C).length===0},K=async()=>{V()&&F.mutate({name:h.name,description:h.description,is_active:h.is_active})},ne=()=>{const C={};return b.group_name.trim()||(C.group_name="Group name is required"),b.feature_key.trim()?IV(b.feature_key)||(C.feature_key="Feature key must be lowercase letters and underscores only"):C.feature_key="Feature key is required",b.feature_label.trim()||(C.feature_label="Feature label is required"),p(U=>({...U,feature:C})),Object.keys(C).length===0},G=async()=>{!ne()||!o||M.mutate({tier_id:o.id,group_name:b.group_name,feature_key:b.feature_key,feature_label:b.feature_label,feature_value:b.feature_value,is_included:b.is_included})},oe=(C,U,q)=>{w(C),_(U),T(q||"")},H=async()=>{if(!N||!j)return;const C={};j==="label"?C.feature_label=S:C.feature_value=S||null,D.mutate({feature_id:N,data:C})},ee=()=>{w(null),_(null),T("")},J=async C=>{D.mutate({feature_id:C.id,data:{is_included:!C.is_included}})},X=C=>{window.confirm(`Delete feature "${C.feature_label}"? This cannot be undone.`)&&W.mutate(C.id)},se=C=>{v(U=>({...U,[C]:!U[C]}))},$=(C,U)=>{g(q=>({...q,[C]:U})),x.feature[C]&&p(q=>({...q,feature:{...q.feature,[C]:""}}))};return O?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-t-2 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading tier configuration..."})]})})}):L?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"text-center max-w-md",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[r.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load tier configuration"}),r.jsx("p",{className:"text-red-600 text-sm mt-2",children:"Please try again or contact support."}),r.jsx(ie,{to:"/admin/tiers",className:"mt-4 inline-block bg-gray-600 text-white px-4 py-2 rounded-md hover:bg-gray-700 transition-colors",children:"Back to Tiers"})]})})})}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("nav",{className:"flex items-center space-x-2 text-sm text-gray-500 mb-4",children:[r.jsx(ie,{to:"/admin",className:"hover:text-gray-700",children:"Admin"}),r.jsx("span",{children:""}),r.jsx(ie,{to:"/admin/tiers",className:"hover:text-gray-700",children:"Tiers"}),r.jsx("span",{children:""}),r.jsx("span",{className:"text-gray-900 font-medium",children:R?"New Tier":(o==null?void 0:o.name)||"Edit Tier"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:R?"Create New Tier":`Configure ${o==null?void 0:o.name} Tier`}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Define tier features and deliverables for customer selection and staff checklists"})]}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs(ie,{to:"/admin/tiers",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:[r.jsx(Wm,{className:"w-4 h-4 mr-2"}),"Back to Tiers"]}),r.jsx("button",{onClick:K,disabled:F.isPending,className:"inline-flex items-center px-6 py-2 bg-yellow-400 text-black rounded-lg text-sm font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:F.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-black mr-2"}),"Saving..."]}):r.jsxs(r.Fragment,{children:[r.jsx(CC,{className:"w-4 h-4 mr-2"}),"Save Tier"]})})]})]})]})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsx("div",{className:"lg:col-span-1",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900 mb-6",children:"Tier Information"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"tier_name",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Tier Name ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),r.jsx("input",{id:"tier_name",type:"text",value:h.name,onChange:C=>P("name",C.target.value),placeholder:"e.g., Basic, Standard, Gold",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${x.tier.name?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`}),x.tier.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.tier.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"tier_slug",className:"block text-sm font-semibold text-gray-700 mb-2",children:["URL Slug ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),r.jsx("input",{id:"tier_slug",type:"text",value:h.slug,onChange:C=>P("slug",C.target.value.toLowerCase()),placeholder:"e.g., basic, standard, premium",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${x.tier.slug?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lowercase letters, numbers, and hyphens only"}),x.tier.slug&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.tier.slug})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"tier_description",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Description"}),r.jsx("textarea",{id:"tier_description",rows:4,value:h.description||"",onChange:C=>P("description",C.target.value||null),placeholder:"Brief description of this tier...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500 resize-none"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{htmlFor:"tier_active",className:"block text-sm font-semibold text-gray-700",children:"Active Status"}),r.jsxs("button",{type:"button",onClick:()=>P("is_active",!h.is_active),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${h.is_active?"bg-yellow-400":"bg-gray-300"}`,children:[r.jsx("span",{className:"sr-only",children:"Toggle active status"}),r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-black transition-transform ${h.is_active?"translate-x-6":"translate-x-1"}`})]})]}),o&&r.jsxs("div",{className:"pt-4 border-t border-gray-200",children:[r.jsxs("p",{className:"text-xs text-gray-500",children:["Created: ",new Date(o.created_at).toLocaleDateString()]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:["Last updated: ",new Date(o.updated_at).toLocaleDateString()]})]})]})]})}),r.jsx("div",{className:"lg:col-span-2",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Tier Features & Deliverables"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Features appear in customer tier selection and staff job checklists"})]}),r.jsxs("button",{onClick:()=>E(!0),disabled:!o,className:"inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:[r.jsx(no,{className:"w-4 h-4 mr-2"}),"Add Feature"]})]})}),r.jsx("div",{className:"p-6",children:m.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:r.jsx(no,{className:"w-8 h-8 text-gray-400"})}),r.jsx("p",{className:"text-gray-600 font-medium",children:"No features configured yet"}),r.jsx("p",{className:"text-gray-500 text-sm mt-1",children:"Add your first feature to define this tier's offerings"}),r.jsxs("button",{onClick:()=>E(!0),disabled:!o,className:"mt-4 inline-flex items-center px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors disabled:opacity-50",children:[r.jsx(no,{className:"w-4 h-4 mr-2"}),"Add Feature"]})]}):r.jsx("div",{className:"space-y-4",children:m.map(C=>r.jsxs("div",{className:"border border-gray-200 rounded-lg overflow-hidden",children:[r.jsx("button",{onClick:()=>se(C.group_name),className:"w-full px-4 py-3 bg-gray-50 hover:bg-gray-100 flex items-center justify-between transition-colors",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[y[C.group_name]?r.jsx(SR,{className:"w-5 h-5 text-gray-500"}):r.jsx(NR,{className:"w-5 h-5 text-gray-500"}),r.jsx("span",{className:"font-semibold text-gray-900",children:C.group_name}),r.jsxs("span",{className:"text-sm text-gray-500",children:["(",C.features.length," features)"]})]})}),y[C.group_name]&&r.jsx("div",{className:"divide-y divide-gray-200",children:C.features.map(U=>r.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-start space-x-4",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx(PR,{className:"w-5 h-5 text-gray-400 cursor-move"})}),r.jsxs("div",{className:"flex-1 min-w-0",children:[r.jsx("div",{className:"mb-2",children:N===U.id&&j==="label"?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:S,onChange:q=>T(q.target.value),className:"flex-1 px-3 py-1 border-2 border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-100",autoFocus:!0,onKeyDown:q=>{q.key==="Enter"&&H(),q.key==="Escape"&&ee()}}),r.jsx("button",{onClick:H,className:"p-1 text-green-600 hover:bg-green-50 rounded",children:r.jsx(Dc,{className:"w-4 h-4"})}),r.jsx("button",{onClick:ee,className:"p-1 text-red-600 hover:bg-red-50 rounded",children:r.jsx(lr,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"font-medium text-gray-900",children:U.feature_label}),r.jsx("button",{onClick:()=>oe(U.id,"label",U.feature_label),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded",children:r.jsx(md,{className:"w-3 h-3"})})]})}),r.jsx("div",{className:"mb-2",children:N===U.id&&j==="value"?r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("input",{type:"text",value:S,onChange:q=>T(q.target.value),placeholder:"Feature value (optional)",className:"flex-1 px-3 py-1 border-2 border-blue-500 rounded focus:outline-none focus:ring-2 focus:ring-blue-100 text-sm",autoFocus:!0,onKeyDown:q=>{q.key==="Enter"&&H(),q.key==="Escape"&&ee()}}),r.jsx("button",{onClick:H,className:"p-1 text-green-600 hover:bg-green-50 rounded",children:r.jsx(Dc,{className:"w-4 h-4"})}),r.jsx("button",{onClick:ee,className:"p-1 text-red-600 hover:bg-red-50 rounded",children:r.jsx(lr,{className:"w-4 h-4"})})]}):r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("span",{className:"text-sm text-gray-600",children:U.feature_value||r.jsx("span",{className:"text-gray-400 italic",children:"No value set"})}),r.jsx("button",{onClick:()=>oe(U.id,"value",U.feature_value||""),className:"p-1 text-gray-400 hover:text-blue-600 hover:bg-blue-50 rounded",children:r.jsx(md,{className:"w-3 h-3"})})]})}),r.jsx("div",{children:r.jsx("span",{className:"text-xs text-gray-400 font-mono",children:U.feature_key})})]}),r.jsxs("div",{className:"flex-shrink-0 flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>J(U),disabled:D.isPending,className:`px-3 py-1 rounded-full text-xs font-semibold transition-colors ${U.is_included?"bg-green-100 text-green-700 hover:bg-green-200":"bg-gray-100 text-gray-600 hover:bg-gray-200"}`,children:U.is_included?" Included":" Excluded"}),r.jsx("button",{onClick:()=>X(U),disabled:W.isPending,className:"p-1 text-red-600 hover:bg-red-50 rounded transition-colors",title:"Delete feature",children:r.jsx(xo,{className:"w-4 h-4"})})]})]})},U.id))})]},C.group_name))})})]})})]})}),A&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[r.jsx("div",{className:"p-6 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("h3",{className:"text-xl font-bold text-gray-900",children:["Add Feature to ",o==null?void 0:o.name]}),r.jsx("button",{onClick:()=>{E(!1),g({group_name:"",feature_key:"",feature_label:"",feature_value:null,is_included:!0}),p(C=>({...C,feature:{}}))},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx(lr,{className:"w-6 h-6"})})]})}),r.jsxs("div",{className:"p-6 space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"feature_group",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Feature Group ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),r.jsx("input",{id:"feature_group",type:"text",list:"existing_groups",value:b.group_name,onChange:C=>$("group_name",C.target.value),placeholder:"e.g., Turnaround, Design Services, Support",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${x.feature.group_name?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`}),r.jsx("datalist",{id:"existing_groups",children:m.map(C=>r.jsx("option",{value:C.group_name},C.group_name))}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Enter new group or select existing from suggestions"}),x.feature.group_name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.feature.group_name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"feature_key",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Feature Key ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),r.jsx("input",{id:"feature_key",type:"text",value:b.feature_key,onChange:C=>$("feature_key",C.target.value.toLowerCase()),placeholder:"e.g., turnaround_days, revision_limit",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 font-mono text-sm ${x.feature.feature_key?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Lowercase letters and underscores only (used internally)"}),x.feature.feature_key&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.feature.feature_key})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"feature_label",className:"block text-sm font-semibold text-gray-700 mb-2",children:["Feature Label ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),r.jsx("input",{id:"feature_label",type:"text",value:b.feature_label,onChange:C=>$("feature_label",C.target.value),placeholder:"e.g., Standard Turnaround, Unlimited Revisions",className:`w-full px-4 py-3 border-2 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 ${x.feature.feature_label?"border-red-500 focus:border-red-500":"border-gray-200 focus:border-blue-500"}`}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Customer-facing display name"}),x.feature.feature_label&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:x.feature.feature_label})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"feature_value",className:"block text-sm font-semibold text-gray-700 mb-2",children:"Feature Value"}),r.jsx("input",{id:"feature_value",type:"text",value:b.feature_value||"",onChange:C=>$("feature_value",C.target.value||null),placeholder:"e.g., 3 days, 2 revisions, 24/7 support",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:outline-none focus:ring-4 focus:ring-blue-100 focus:border-blue-500"}),r.jsx("p",{className:"mt-1 text-xs text-gray-500",children:"Specific detail or quantity (optional)"})]}),r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("label",{className:"block text-sm font-semibold text-gray-700",children:"Include in Tier"}),r.jsxs("button",{type:"button",onClick:()=>$("is_included",!b.is_included),className:`relative inline-flex h-6 w-11 items-center rounded-full transition-colors ${b.is_included?"bg-yellow-400":"bg-gray-300"}`,children:[r.jsx("span",{className:"sr-only",children:"Toggle inclusion"}),r.jsx("span",{className:`inline-block h-4 w-4 transform rounded-full bg-black transition-transform ${b.is_included?"translate-x-6":"translate-x-1"}`})]})]})]}),r.jsxs("div",{className:"p-6 bg-gray-50 border-t border-gray-200 flex items-center justify-end space-x-3",children:[r.jsx("button",{onClick:()=>{E(!1),g({group_name:"",feature_key:"",feature_label:"",feature_value:null,is_included:!0}),p(C=>({...C,feature:{}}))},className:"px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:G,disabled:M.isPending,className:"px-6 py-2 bg-yellow-400 text-black rounded-lg text-sm font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:M.isPending?r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-4 w-4 border-t-2 border-b-2 border-black mr-2"}),"Adding..."]}):r.jsxs(r.Fragment,{children:[r.jsx(no,{className:"w-4 h-4 inline mr-2"}),"Add Feature"]})})]})]})})]})})},gp="https://123project-build-a-production-ready-w.launchpulse.ai/api",o_=async(e,t)=>(await te.get(`${gp}/admin/marketing-content`,{params:{page_key:e},headers:{Authorization:`Bearer ${t}`}})).data,DV=async e=>(await te.get(`${gp}/admin/services`,{headers:{Authorization:`Bearer ${e}`}})).data.map(n=>({id:n.id,name:n.name,category_name:n.category_name||"Uncategorized",is_top_seller:n.is_top_seller||!1})),Ma=async(e,t,n)=>{await te.patch(`${gp}/admin/marketing-content/${e}`,{content:t},{headers:{Authorization:`Bearer ${n}`}})},FV=async(e,t,n)=>{await te.patch(`${gp}/admin/services/${e}`,{is_top_seller:t},{headers:{Authorization:`Bearer ${n}`}})},BV=()=>{const e=Le(),[t,n]=Ye(),s=et(),a=ae(ee=>ee.authentication_state.current_user),i=ae(ee=>ee.authentication_state.auth_token);ae(ee=>ee.show_toast);const[o,l]=k.useState("homepage"),[c,d]=k.useState({hero_headline:"",hero_subtext:"",hero_cta_text:"Get a Quote",top_services_ids:[]}),[m,u]=k.useState({brand_purpose:"",values_content:"",approach_content:""}),[h,f]=k.useState({payment_terms:"",tax_vat:"",file_requirements:"",refunds:"",revision_policy:"",turnaround:""}),[b,g]=k.useState([]),[x,p]=k.useState(!1),[y,v]=k.useState(!1),[N,w]=k.useState(null),[j,_]=k.useState(!1),[S,T]=k.useState(!1),[A,E]=k.useState({});k.useEffect(()=>{(!a||a.role!=="ADMIN")&&e("/login?returnTo=/admin/content")},[a,e]),k.useEffect(()=>{const ee=t.get("section");ee&&["homepage","about","policies"].includes(ee)&&l(ee)},[t]);const{data:R,isLoading:I}=pe({queryKey:["marketing-content","home"],queryFn:()=>o_("home",i||""),enabled:!!i&&o==="homepage",staleTime:6e4,refetchOnWindowFocus:!1,select:ee=>{const J={},X={};ee.forEach($=>{J[$.section_key]=$.content,X[`home_${$.section_key}`]=$.id}),E($=>({...$,...X}));let se=[];try{se=JSON.parse(J.top_services_ids||"[]")}catch{se=[]}return{hero_headline:J.hero_headline||"",hero_subtext:J.hero_subtext||"",hero_cta_text:J.hero_cta_text||"Get a Quote",top_services_ids:se}}}),{data:O,isLoading:L}=pe({queryKey:["marketing-content","about"],queryFn:()=>o_("about",i||""),enabled:!!i&&o==="about",staleTime:6e4,refetchOnWindowFocus:!1,select:ee=>{const J={},X={};return ee.forEach(se=>{J[se.section_key]=se.content,X[`about_${se.section_key}`]=se.id}),E(se=>({...se,...X})),{brand_purpose:J.brand_purpose||"",values_content:J.values_content||"",approach_content:J.approach_content||""}}}),{data:F}=pe({queryKey:["admin-services"],queryFn:()=>DV(i||""),enabled:!!i,staleTime:3e5,refetchOnWindowFocus:!1});k.useEffect(()=>{R&&o==="homepage"&&d(R)},[R,o]),k.useEffect(()=>{O&&o==="about"&&u(O)},[O,o]),k.useEffect(()=>{F&&g(F)},[F]);const M=ve({mutationFn:async()=>{if(!i)throw new Error("Not authenticated");const ee=[];o==="homepage"?(A.home_hero_headline&&ee.push(Ma(A.home_hero_headline,c.hero_headline,i)),A.home_hero_subtext&&ee.push(Ma(A.home_hero_subtext,c.hero_subtext,i)),A.home_hero_cta_text&&ee.push(Ma(A.home_hero_cta_text,c.hero_cta_text,i)),A.home_top_services_ids&&ee.push(Ma(A.home_top_services_ids,JSON.stringify(c.top_services_ids),i))):o==="about"&&(A.about_brand_purpose&&ee.push(Ma(A.about_brand_purpose,m.brand_purpose,i)),A.about_values_content&&ee.push(Ma(A.about_values_content,m.values_content,i)),A.about_approach_content&&ee.push(Ma(A.about_approach_content,m.approach_content,i))),ee.length>0&&await Promise.all(ee)},onSuccess:()=>{p(!1),w({type:"success",message:"Content saved successfully!"}),setTimeout(()=>w(null),5e3),s.invalidateQueries({queryKey:["marketing-content"]})},onError:ee=>{w({type:"error",message:ee.message||"Failed to save content"}),setTimeout(()=>w(null),5e3)}}),D=ee=>{if(x){T(!0);return}l(ee),n({section:ee})},W=(ee,J)=>{d(X=>({...X,[ee]:J})),p(!0)},P=(ee,J)=>{u(X=>({...X,[ee]:J})),p(!0)},V=(ee,J)=>{f(X=>({...X,[ee]:J})),p(!0)},K=async(ee,J)=>{try{await FV(ee,J,i||""),s.invalidateQueries({queryKey:["admin-services"]}),w({type:"success",message:"Service updated"}),setTimeout(()=>w(null),3e3)}catch{w({type:"error",message:"Failed to update service"}),setTimeout(()=>w(null),3e3)}},ne=async()=>{v(!0);try{await M.mutateAsync(),v(!1)}catch{v(!1)}},G=()=>{s.invalidateQueries({queryKey:["marketing-content"]}),p(!1),T(!1),w({type:"info",message:"Changes discarded"}),setTimeout(()=>w(null),3e3)},oe=()=>{_(!0)};if(!a||a.role!=="ADMIN")return null;const H=I||L;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Marketing Content Management"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage homepage, about page, and policies content"})]}),r.jsx(ie,{to:"/admin",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:" Back to Dashboard"})]})})}),N&&r.jsx("div",{className:`fixed top-4 right-4 z-50 px-6 py-4 rounded-lg shadow-lg ${N.type==="success"?"bg-green-600 text-white":N.type==="error"?"bg-red-600 text-white":"bg-blue-600 text-white"}`,children:N.message}),x&&r.jsx("div",{className:"bg-yellow-50 border-b border-yellow-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-3",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("p",{className:"text-sm text-yellow-800",children:" You have unsaved changes"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("button",{onClick:()=>T(!0),className:"text-sm text-yellow-800 hover:text-yellow-900 font-medium",children:"Discard"}),r.jsx("button",{onClick:ne,disabled:y,className:"px-4 py-2 bg-yellow-600 text-white rounded-lg text-sm font-medium hover:bg-yellow-700 disabled:opacity-50 transition-colors",children:y?"Saving...":"Save Changes"})]})]})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("nav",{className:"flex space-x-8","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>D("homepage"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${o==="homepage"?"border-yellow-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Homepage"}),r.jsx("button",{onClick:()=>D("about"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${o==="about"?"border-yellow-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"About Page"}),r.jsx("button",{onClick:()=>D("policies"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${o==="policies"?"border-yellow-500 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Policies"})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:H?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("svg",{className:"animate-spin h-6 w-6 text-gray-500",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-gray-600",children:"Loading content..."})]})}):r.jsxs("div",{className:"space-y-6",children:[o==="homepage"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Hero Section"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hero_headline",className:"block text-sm font-medium text-gray-700 mb-2",children:"Hero Headline"}),r.jsx("input",{id:"hero_headline",type:"text",value:c.hero_headline,onChange:ee=>W("hero_headline",ee.target.value),placeholder:"Disciplined Premium Print, Signage & Branding",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hero_subtext",className:"block text-sm font-medium text-gray-700 mb-2",children:"Hero Subtext (2-3 lines)"}),r.jsx("textarea",{id:"hero_subtext",rows:3,value:c.hero_subtext,onChange:ee=>W("hero_subtext",ee.target.value),placeholder:"Brand promise subheadline...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"hero_cta_text",className:"block text-sm font-medium text-gray-700 mb-2",children:"Primary CTA Button Text"}),r.jsx("input",{id:"hero_cta_text",type:"text",value:c.hero_cta_text,onChange:ee=>W("hero_cta_text",ee.target.value),placeholder:"Get a Quote",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Top Selling Services"}),r.jsx("p",{className:"text-sm text-gray-600 mb-4",children:"Select up to 6 services to feature on the homepage"}),r.jsx("div",{className:"space-y-2 max-h-96 overflow-y-auto",children:b.map(ee=>r.jsxs("div",{className:"flex items-center justify-between p-4 border border-gray-200 rounded-lg hover:border-gray-300 transition-colors",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"checkbox",id:`service_${ee.id}`,checked:ee.is_top_seller,onChange:J=>K(ee.id,J.target.checked),className:"h-5 w-5 text-yellow-600 border-gray-300 rounded focus:ring-yellow-500"}),r.jsxs("label",{htmlFor:`service_${ee.id}`,className:"flex-1 cursor-pointer",children:[r.jsx("span",{className:"font-medium text-gray-900",children:ee.name}),r.jsxs("span",{className:"ml-2 text-sm text-gray-500",children:["(",ee.category_name,")"]})]})]}),ee.is_top_seller&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:"Featured"})]},ee.id))})]})]}),o==="about"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"About Page Content"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"brand_purpose",className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand Purpose Statement"}),r.jsx("textarea",{id:"brand_purpose",rows:4,value:m.brand_purpose,onChange:ee=>P("brand_purpose",ee.target.value),placeholder:"Empower businesses through personalised visual identity...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"values_content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Brand Values Content"}),r.jsx("textarea",{id:"values_content",rows:8,value:m.values_content,onChange:ee=>P("values_content",ee.target.value),placeholder:"Detailed explanation of 7 core values...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"approach_content",className:"block text-sm font-medium text-gray-700 mb-2",children:"Approach Content"}),r.jsx("textarea",{id:"approach_content",rows:6,value:m.approach_content,onChange:ee=>P("approach_content",ee.target.value),placeholder:"How we work and deliver value...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]})]})]})}),o==="policies"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Policies Content"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"payment_terms",className:"block text-sm font-medium text-gray-700 mb-2",children:"Payment Terms"}),r.jsx("textarea",{id:"payment_terms",rows:4,value:h.payment_terms,onChange:ee=>V("payment_terms",ee.target.value),placeholder:"50% deposit required, balance due before delivery...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"tax_vat",className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax/VAT Information"}),r.jsx("textarea",{id:"tax_vat",rows:3,value:h.tax_vat,onChange:ee=>V("tax_vat",ee.target.value),placeholder:"Current VAT rate, tax ID...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"file_requirements",className:"block text-sm font-medium text-gray-700 mb-2",children:"File Requirements"}),r.jsx("textarea",{id:"file_requirements",rows:5,value:h.file_requirements,onChange:ee=>V("file_requirements",ee.target.value),placeholder:"Accepted formats, DPI requirements, bleed specifications...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"refunds",className:"block text-sm font-medium text-gray-700 mb-2",children:"Refunds & Cancellations"}),r.jsx("textarea",{id:"refunds",rows:4,value:h.refunds,onChange:ee=>V("refunds",ee.target.value),placeholder:"Refund policy, cancellation terms...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"revision_policy",className:"block text-sm font-medium text-gray-700 mb-2",children:"Revision Policy"}),r.jsx("textarea",{id:"revision_policy",rows:4,value:h.revision_policy,onChange:ee=>V("revision_policy",ee.target.value),placeholder:"Revision limits by tier, what constitutes a revision...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"turnaround",className:"block text-sm font-medium text-gray-700 mb-2",children:"Turnaround Times"}),r.jsx("textarea",{id:"turnaround",rows:4,value:h.turnaround,onChange:ee=>V("turnaround",ee.target.value),placeholder:"Tier-based turnaround commitments, rush options...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 focus:outline-none transition-colors resize-none"})]})]})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6 lg:p-8",children:r.jsxs("div",{className:"flex flex-col sm:flex-row items-center justify-between space-y-4 sm:space-y-0 sm:space-x-4",children:[r.jsx("button",{onClick:oe,className:"w-full sm:w-auto px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-all duration-200",children:"Preview Changes"}),r.jsxs("div",{className:"flex flex-col sm:flex-row items-center space-y-3 sm:space-y-0 sm:space-x-3 w-full sm:w-auto",children:[r.jsx("button",{onClick:()=>T(!0),disabled:!x,className:"w-full sm:w-auto px-6 py-3 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200",children:"Discard Changes"}),r.jsx("button",{onClick:ne,disabled:!x||y,className:"w-full sm:w-auto px-6 py-3 bg-yellow-600 text-black rounded-lg font-medium hover:bg-yellow-700 disabled:opacity-50 disabled:cursor-not-allowed transition-all duration-200 shadow-lg hover:shadow-xl",children:y?"Saving...":"Save Changes"})]})]})})]})}),j&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>_(!1)}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full sm:p-6",children:[r.jsx("div",{className:"absolute top-0 right-0 pt-4 pr-4",children:r.jsxs("button",{onClick:()=>_(!1),className:"bg-white rounded-md text-gray-400 hover:text-gray-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500",children:[r.jsx("span",{className:"sr-only",children:"Close"}),r.jsx("svg",{className:"h-6 w-6",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})]})}),r.jsx("div",{className:"sm:flex sm:items-start",children:r.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:text-left w-full",children:[r.jsxs("h3",{className:"text-lg leading-6 font-medium text-gray-900 mb-4",id:"modal-title",children:["Content Preview - ",o]}),r.jsxs("div",{className:"mt-4 bg-gray-50 rounded-lg p-6 max-h-96 overflow-y-auto",children:[o==="homepage"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Hero Headline:"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900",children:c.hero_headline||"(Empty)"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Hero Subtext:"}),r.jsx("p",{className:"text-gray-700",children:c.hero_subtext||"(Empty)"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"CTA Button:"}),r.jsx("button",{className:"px-6 py-3 bg-yellow-600 text-black rounded-lg font-medium",children:c.hero_cta_text})]})]}),o==="about"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Brand Purpose:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:m.brand_purpose||"(Empty)"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Values Content:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:m.values_content||"(Empty)"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Approach Content:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap",children:m.approach_content||"(Empty)"})]})]}),o==="policies"&&r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Payment Terms:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap text-sm",children:h.payment_terms||"(Empty)"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Tax/VAT:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap text-sm",children:h.tax_vat||"(Empty)"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"File Requirements:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap text-sm",children:h.file_requirements||"(Empty)"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Refunds:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap text-sm",children:h.refunds||"(Empty)"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Revision Policy:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap text-sm",children:h.revision_policy||"(Empty)"})]}),r.jsxs("div",{children:[r.jsx("h4",{className:"text-sm font-medium text-gray-700 mb-1",children:"Turnaround Times:"}),r.jsx("p",{className:"text-gray-700 whitespace-pre-wrap text-sm",children:h.turnaround||"(Empty)"})]})]})]}),r.jsx("div",{className:"mt-6 flex justify-end",children:r.jsx("button",{onClick:()=>_(!1),className:"px-6 py-3 bg-gray-200 text-gray-900 rounded-lg font-medium hover:bg-gray-300 transition-colors",children:"Close Preview"})})]})})]})]})}),S&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>T(!1)}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg px-4 pt-5 pb-4 text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full sm:p-6",children:[r.jsxs("div",{className:"sm:flex sm:items-start",children:[r.jsx("div",{className:"mx-auto flex-shrink-0 flex items-center justify-center h-12 w-12 rounded-full bg-yellow-100 sm:mx-0 sm:h-10 sm:w-10",children:r.jsx("svg",{className:"h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})}),r.jsxs("div",{className:"mt-3 text-center sm:mt-0 sm:ml-4 sm:text-left",children:[r.jsx("h3",{className:"text-lg leading-6 font-medium text-gray-900",children:"Discard unsaved changes?"}),r.jsx("div",{className:"mt-2",children:r.jsx("p",{className:"text-sm text-gray-500",children:"Are you sure you want to discard all unsaved changes? This action cannot be undone."})})]})]}),r.jsxs("div",{className:"mt-5 sm:mt-4 sm:flex sm:flex-row-reverse",children:[r.jsx("button",{onClick:G,className:"w-full inline-flex justify-center rounded-lg border border-transparent shadow-sm px-4 py-2 bg-red-600 text-base font-medium text-white hover:bg-red-700 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-red-500 sm:ml-3 sm:w-auto sm:text-sm transition-colors",children:"Discard Changes"}),r.jsx("button",{onClick:()=>T(!1),className:"mt-3 w-full inline-flex justify-center rounded-lg border border-gray-300 shadow-sm px-4 py-2 bg-white text-base font-medium text-gray-700 hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 sm:mt-0 sm:w-auto sm:text-sm transition-colors",children:"Cancel"})]})]})]})})]})})},zV=()=>{var W;const e=et(),t=ae(P=>P.authentication_state.auth_token),n=ae(P=>P.authentication_state.current_user),s=ae(P=>P.show_toast),[a,i]=k.useState(null),[o,l]=k.useState(!1),[c,d]=k.useState(!1),[m,u]=k.useState({rush_fee_percentage:25,emergency_booking_fee:20,tax_rate:23,deposit_percentage:50}),[h,f]=k.useState([]),[b,g]=k.useState({material_type:"",cost_per_unit:0,markup_percentage:0}),x="https://123project-build-a-production-ready-w.launchpulse.ai",{data:p,isLoading:y,error:v}=pe({queryKey:["admin-services-pricing"],queryFn:async()=>(await te.get(`${x}/api/admin/services`,{headers:{Authorization:`Bearer ${t}`}})).data,enabled:!!t,staleTime:6e4,refetchOnWindowFocus:!1}),{data:N,isLoading:w,error:j}=pe({queryKey:["admin-settings-pricing"],queryFn:async()=>(await te.get(`${x}/api/admin/settings`,{headers:{Authorization:`Bearer ${t}`}})).data,enabled:!!t,staleTime:6e4,refetchOnWindowFocus:!1}),_=k.useMemo(()=>{if(!N)return m;const P=N.reduce((V,K)=>(V[K.key]=K.value,V),{});return{rush_fee_percentage:parseFloat(P.rush_fee_percentage||"25"),emergency_booking_fee:parseFloat(P.urgent_fee_pct||"20"),tax_rate:parseFloat(P.tax_rate||"23"),deposit_percentage:parseFloat(P.deposit_pct||"50")}},[N]),S=k.useMemo(()=>{if(!N)return[];const P=N.find(V=>V.key==="materials_pricing");if(!P)return[];try{const V=JSON.parse(P.value);return Array.isArray(V)?V:[]}catch{return[]}},[N]);k.useEffect(()=>{u(_)},[_]),k.useEffect(()=>{f(S)},[S]);const T=ve({mutationFn:async P=>(await te.patch(`${x}/api/admin/settings/${P.key}`,{value:P.value},{headers:{Authorization:`Bearer ${t}`}})).data,onSuccess:()=>{e.invalidateQueries({queryKey:["admin-settings-pricing"]}),s({type:"success",message:"Global modifier updated successfully",duration:3e3}),l(!1)},onError:P=>{var V,K;s({type:"error",message:((K=(V=P.response)==null?void 0:V.data)==null?void 0:K.message)||"Failed to update modifier",duration:5e3})}}),A=ve({mutationFn:async P=>(await te.patch(`${x}/api/admin/settings/materials_pricing`,{value:JSON.stringify(P)},{headers:{Authorization:`Bearer ${t}`}})).data,onSuccess:()=>{e.invalidateQueries({queryKey:["admin-settings-pricing"]}),s({type:"success",message:"Material costs updated successfully",duration:3e3}),d(!1)},onError:P=>{var V,K;s({type:"error",message:((K=(V=P.response)==null?void 0:V.data)==null?void 0:K.message)||"Failed to update materials",duration:5e3})}}),E=async()=>{try{await T.mutateAsync({key:"rush_fee_percentage",value:m.rush_fee_percentage.toString()}),await T.mutateAsync({key:"urgent_fee_pct",value:m.emergency_booking_fee.toString()}),await T.mutateAsync({key:"tax_rate",value:m.tax_rate.toString()}),await T.mutateAsync({key:"deposit_pct",value:m.deposit_percentage.toString()})}catch(P){console.error("Error saving modifiers:",P)}},R=()=>{A.mutate(h)},I=()=>{if(!b.material_type||b.cost_per_unit<=0){s({type:"error",message:"Please enter material type and valid cost",duration:3e3});return}f([...h,b]),g({material_type:"",cost_per_unit:0,markup_percentage:0})},O=P=>{f(h.filter((V,K)=>K!==P))},L=(P,V,K)=>{const ne=[...h];ne[P]={...ne[P],[V]:K},f(ne)},F=(P,V,K,ne)=>{let G=P*V;V>50&&(G*=.9),K&&(G*=1+m.rush_fee_percentage/100),ne&&(G*=1+m.emergency_booking_fee/100);const oe=G*(m.tax_rate/100),H=G+oe,ee=H*(m.deposit_percentage/100);return{subtotal:G.toFixed(2),tax:oe.toFixed(2),total:H.toFixed(2),deposit:ee.toFixed(2)}},M=y||w,D=v||j;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Pricing Rules & Materials"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Configure automated pricing logic, material costs, and system-wide modifiers"})]}),r.jsx("div",{className:"flex items-center space-x-3",children:n&&r.jsxs("span",{className:"text-sm text-gray-600",children:["Logged in as ",r.jsx("span",{className:"font-semibold",children:n.name})]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[M&&r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading pricing configuration..."})]}),D&&r.jsxs("div",{className:"bg-red-50 border border-red-200 text-red-700 px-6 py-4 rounded-lg",children:[r.jsx("p",{className:"font-semibold",children:"Error loading pricing data"}),r.jsx("p",{className:"text-sm mt-1",children:((W=v||j)==null?void 0:W.message)||"Unknown error"})]}),!M&&!D&&r.jsxs("div",{className:"space-y-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-blue-600 to-indigo-600 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Global Pricing Modifiers"}),!o&&r.jsx("button",{onClick:()=>l(!0),className:"px-4 py-2 bg-white text-blue-600 rounded-lg font-medium hover:bg-blue-50 transition-colors",children:"Edit Modifiers"})]})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Rush Fee (%)"}),o?r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:m.rush_fee_percentage,onChange:P=>u({...m,rush_fee_percentage:parseFloat(P.target.value)||0}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}):r.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[_.rush_fee_percentage,"%"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Applied to rush orders"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Emergency Booking Fee (%)"}),o?r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:m.emergency_booking_fee,onChange:P=>u({...m,emergency_booking_fee:parseFloat(P.target.value)||0}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}):r.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[_.emergency_booking_fee,"%"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Applied to emergency bookings"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Tax Rate / VAT (%)"}),o?r.jsx("input",{type:"number",min:"0",max:"100",step:"0.1",value:m.tax_rate,onChange:P=>u({...m,tax_rate:parseFloat(P.target.value)||0}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}):r.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[_.tax_rate,"%"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Applied to all invoices"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Deposit Requirement (%)"}),o?r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:m.deposit_percentage,onChange:P=>u({...m,deposit_percentage:parseFloat(P.target.value)||0}),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}):r.jsxs("div",{className:"text-3xl font-bold text-gray-900",children:[_.deposit_percentage,"%"]}),r.jsx("p",{className:"text-xs text-gray-500",children:"Required upfront payment"})]})]}),o&&r.jsxs("div",{className:"mt-6 flex items-center justify-end space-x-3",children:[r.jsx("button",{onClick:()=>{u(_),l(!1)},className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:E,disabled:T.isPending,className:"px-6 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[T.isPending&&r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Save Changes"]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"bg-gradient-to-r from-green-600 to-teal-600 px-6 py-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Material Costs & Markup"}),!c&&r.jsx("button",{onClick:()=>d(!0),className:"px-4 py-2 bg-white text-green-600 rounded-lg font-medium hover:bg-green-50 transition-colors",children:"Edit Materials"})]})}),r.jsxs("div",{className:"p-6",children:[r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Material Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Cost per Unit ()"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Markup (%)"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Final Price ()"}),c&&r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsxs("tbody",{className:"bg-white divide-y divide-gray-200",children:[h.length===0&&r.jsx("tr",{children:r.jsx("td",{colSpan:5,className:"px-6 py-8 text-center text-gray-500",children:"No materials configured. Add a material to get started."})}),h.map((P,V)=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c?r.jsx("input",{type:"text",value:P.material_type,onChange:K=>L(V,"material_type",K.target.value),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):r.jsx("span",{className:"text-sm font-medium text-gray-900",children:P.material_type})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c?r.jsx("input",{type:"number",min:"0",step:"0.01",value:P.cost_per_unit,onChange:K=>L(V,"cost_per_unit",parseFloat(K.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):r.jsxs("span",{className:"text-sm text-gray-900",children:["",Number(P.cost_per_unit||0).toFixed(2)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:c?r.jsx("input",{type:"number",min:"0",max:"1000",step:"1",value:P.markup_percentage,onChange:K=>L(V,"markup_percentage",parseFloat(K.target.value)||0),className:"w-full px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}):r.jsxs("span",{className:"text-sm text-gray-900",children:[Number(P.markup_percentage||0).toFixed(0),"%"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:"text-sm font-semibold text-green-600",children:["",(Number(P.cost_per_unit||0)*(1+Number(P.markup_percentage||0)/100)).toFixed(2)]})}),c&&r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("button",{onClick:()=>O(V),className:"text-red-600 hover:text-red-800 font-medium text-sm",children:"Remove"})})]},V))]})]})}),c&&r.jsxs("div",{className:"mt-6 space-y-4",children:[r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border-2 border-dashed border-gray-300",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Add New Material"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-3",children:[r.jsx("input",{type:"text",placeholder:"Material Type",value:b.material_type,onChange:P=>g({...b,material_type:P.target.value}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("input",{type:"number",placeholder:"Cost per Unit ()",min:"0",step:"0.01",value:b.cost_per_unit||"",onChange:P=>g({...b,cost_per_unit:parseFloat(P.target.value)||0}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("input",{type:"number",placeholder:"Markup (%)",min:"0",max:"1000",step:"1",value:b.markup_percentage||"",onChange:P=>g({...b,markup_percentage:parseFloat(P.target.value)||0}),className:"px-3 py-2 border border-gray-300 rounded-md focus:outline-none focus:ring-2 focus:ring-blue-500"}),r.jsx("button",{onClick:I,className:"px-4 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors",children:"Add Material"})]})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[r.jsx("button",{onClick:()=>{f(S),d(!1),g({material_type:"",cost_per_unit:0,markup_percentage:0})},className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsxs("button",{onClick:R,disabled:A.isPending,className:"px-6 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[A.isPending&&r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Save Materials"]})]})]})]})]}),r.jsxs("div",{className:"bg-blue-50 rounded-xl p-6 border border-blue-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-3",children:"Automated Pricing Rules"}),r.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Quantity Discounts:"})," Orders with quantity > 50 units automatically receive 10% discount"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Rush Fees:"})," Standard rush orders add ",_.rush_fee_percentage,"% to base price"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Emergency Bookings:"})," Full-day emergency bookings add ",_.emergency_booking_fee,"% to total"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Tax Calculation:"})," ",_.tax_rate,"% VAT applied to all invoices (subtotal  tax rate)"]}),r.jsxs("p",{children:[r.jsx("span",{className:"font-semibold",children:"Deposit:"})," ",_.deposit_percentage,"% deposit required upfront, balance due before delivery"]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[r.jsx("div",{className:"bg-gradient-to-r from-purple-600 to-pink-600 px-6 py-4",children:r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Price Estimation Calculator"})}),r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Base Price ()"}),r.jsx("input",{type:"number",id:"calc-base-price",min:"0",step:"0.01",defaultValue:"100",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:ring-4 focus:ring-purple-100"})]}),r.jsxs("div",{className:"space-y-2",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700",children:"Quantity"}),r.jsx("input",{type:"number",id:"calc-quantity",min:"1",step:"1",defaultValue:"10",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-purple-500 focus:ring-4 focus:ring-purple-100"})]})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4 mb-6",children:[r.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",id:"calc-rush",className:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Apply Rush Fee (+",_.rush_fee_percentage,"%)"]})]}),r.jsxs("label",{className:"flex items-center space-x-3 p-4 border-2 border-gray-200 rounded-lg cursor-pointer hover:bg-gray-50",children:[r.jsx("input",{type:"checkbox",id:"calc-emergency",className:"w-5 h-5 text-purple-600 border-gray-300 rounded focus:ring-purple-500"}),r.jsxs("span",{className:"text-sm font-medium text-gray-700",children:["Apply Emergency Fee (+",_.emergency_booking_fee,"%)"]})]})]}),r.jsx("button",{onClick:()=>{var H,ee,J,X;const P=parseFloat(((H=document.getElementById("calc-base-price"))==null?void 0:H.value)||"0"),V=parseInt(((ee=document.getElementById("calc-quantity"))==null?void 0:ee.value)||"0"),K=((J=document.getElementById("calc-rush"))==null?void 0:J.checked)||!1,ne=((X=document.getElementById("calc-emergency"))==null?void 0:X.checked)||!1,G=F(P,V,K,ne),oe=document.getElementById("calc-result");oe&&(oe.innerHTML=`
                          <div class="space-y-3">
                            <div class="flex justify-between">
                              <span class="text-gray-600">Subtotal:</span>
                              <span class="font-semibold text-gray-900">${G.subtotal}</span>
                            </div>
                            <div class="flex justify-between">
                              <span class="text-gray-600">Tax (${m.tax_rate}%):</span>
                              <span class="font-semibold text-gray-900">${G.tax}</span>
                            </div>
                            <div class="flex justify-between text-lg border-t pt-3">
                              <span class="font-bold text-gray-900">Total:</span>
                              <span class="font-bold text-green-600">${G.total}</span>
                            </div>
                            <div class="flex justify-between text-sm bg-blue-50 p-3 rounded-lg">
                              <span class="text-blue-800">Deposit (${m.deposit_percentage}%):</span>
                              <span class="font-semibold text-blue-900">${G.deposit}</span>
                            </div>
                          </div>
                        `,oe.classList.remove("hidden"))},className:"w-full px-6 py-3 bg-purple-600 text-white rounded-lg font-medium hover:bg-purple-700 transition-colors",children:"Calculate Estimate"}),r.jsx("div",{id:"calc-result",className:"hidden mt-6 bg-gray-50 rounded-lg p-6 border border-gray-200"})]})]}),c&&r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"flex items-center justify-end space-x-3",children:[r.jsx("button",{onClick:()=>{f(S),d(!1),g({material_type:"",cost_per_unit:0,markup_percentage:0})},className:"px-6 py-2 border-2 border-gray-300 text-gray-700 rounded-lg font-medium hover:bg-gray-50 transition-colors",children:"Cancel All Changes"}),r.jsxs("button",{onClick:R,disabled:A.isPending,className:"px-6 py-2 bg-green-600 text-white rounded-lg font-medium hover:bg-green-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:[A.isPending&&r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Save All Material Changes"]})]})})}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100",children:[r.jsx("div",{className:"bg-gradient-to-r from-gray-700 to-gray-900 px-6 py-4",children:r.jsx("h2",{className:"text-xl font-semibold text-white",children:"Service-Specific Rules"})}),r.jsxs("div",{className:"p-6",children:[r.jsx("p",{className:"text-gray-600 mb-4",children:"Select a service to configure custom pricing rules and modifiers (coming soon)"}),p&&p.length>0&&r.jsxs("select",{value:a||"",onChange:P=>i(P.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-gray-500 focus:ring-4 focus:ring-gray-100",children:[r.jsx("option",{value:"",children:"Select a service..."}),p.map(P=>r.jsxs("option",{value:P.id,children:[P.name," (",P.category_name||"Uncategorized",")"]},P.id))]}),a&&r.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-4",children:r.jsx("p",{className:"text-sm text-blue-800",children:"Service-specific pricing rules configuration will be available in a future update. Currently, all services use the global modifiers and material costs configured above."})})]})]}),r.jsxs("div",{className:"bg-gray-50 rounded-xl p-6 border border-gray-200",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Pricing Configuration Guidelines"}),r.jsxs("div",{className:"space-y-3 text-sm text-gray-700",children:[r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("p",{children:"Material costs should include supplier costs plus overhead allocation"})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("p",{children:"Markup percentages should account for labor, equipment wear, and profit margin"})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("p",{children:"Rush fees compensate for schedule disruption and expedited processing"})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("p",{children:"Emergency booking fees reflect capacity constraints and priority handling"})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("svg",{className:"w-5 h-5 text-green-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})}),r.jsx("p",{children:"Tax rates must comply with local VAT/sales tax regulations"})]}),r.jsxs("div",{className:"flex items-start space-x-2",children:[r.jsx("svg",{className:"w-5 h-5 text-yellow-600 mt-0.5 flex-shrink-0",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})}),r.jsxs("p",{className:"text-yellow-800",children:[r.jsx("strong",{children:"Manual Override:"})," Admins can manually adjust final prices during quote finalization regardless of automated calculations"]})]})]})]})]})]})]})})},qV="https://123project-build-a-production-ready-w.launchpulse.ai",Li=te.create({baseURL:qV,headers:{"Content-Type":"application/json"}});async function UV(e){return(await Li.get("/api/admin/calendar-settings",{headers:{Authorization:`Bearer ${e}`}})).data}async function WV(e){return(await Li.get("/api/admin/blackout-dates",{headers:{Authorization:`Bearer ${e}`}})).data}async function VV(e){const t=await Li.get("/api/admin/settings/urgent_fee_pct",{headers:{Authorization:`Bearer ${e}`}});return parseFloat(t.data.value||"20")}async function HV(e,t){await Li.patch("/api/admin/calendar-settings",t,{headers:{Authorization:`Bearer ${e}`}})}async function KV(e,t){await Li.patch("/api/admin/settings/urgent_fee_pct",{value:t},{headers:{Authorization:`Bearer ${e}`}})}async function GV(e,t){await Li.post("/api/admin/blackout-dates",t,{headers:{Authorization:`Bearer ${e}`}})}async function QV(e,t){await Li.delete(`/api/admin/blackout-dates/${t}`,{headers:{Authorization:`Bearer ${e}`}})}const YV=()=>{const e=ae(O=>O.authentication_state.auth_token);ae(O=>O.authentication_state.current_user);const t=ae(O=>O.show_toast),n=et(),{data:s,isLoading:a,error:i}=pe({queryKey:["calendar_settings"],queryFn:()=>UV(e),enabled:!!e,staleTime:6e4,refetchOnWindowFocus:!1}),{data:o=[],isLoading:l,error:c}=pe({queryKey:["blackout_dates"],queryFn:()=>WV(e),enabled:!!e,staleTime:6e4,refetchOnWindowFocus:!1}),{data:d=20,isLoading:m}=pe({queryKey:["urgent_fee_pct"],queryFn:()=>VV(e),enabled:!!e,staleTime:6e4,refetchOnWindowFocus:!1}),[u,h]=k.useState({working_days:[1,2,3,4,5],start_hour:9,end_hour:18,slot_duration_minutes:120,emergency_slots_per_day:2}),[f,b]=k.useState({date:"",reason:""}),[g,x]=k.useState(20),p=Math.floor((u.end_hour-u.start_hour)*60/u.slot_duration_minutes);k.useEffect(()=>{if(s){const O=JSON.parse(s.working_days||"[1,2,3,4,5]");h({working_days:O,start_hour:s.start_hour,end_hour:s.end_hour,slot_duration_minutes:s.slot_duration_minutes,emergency_slots_per_day:s.emergency_slots_per_day})}},[s]),k.useEffect(()=>{d!==void 0&&x(d)},[d]);const y=ve({mutationFn:async()=>{if(!e)throw new Error("Not authenticated");await HV(e,{working_days:JSON.stringify(u.working_days),start_hour:u.start_hour,end_hour:u.end_hour,slot_duration_minutes:u.slot_duration_minutes,emergency_slots_per_day:u.emergency_slots_per_day})},onSuccess:()=>{n.invalidateQueries({queryKey:["calendar_settings"]}),t({type:"success",message:"Calendar settings saved successfully",duration:5e3})},onError:O=>{var L,F;t({type:"error",message:((F=(L=O.response)==null?void 0:L.data)==null?void 0:F.message)||"Failed to save settings",duration:5e3})}}),v=ve({mutationFn:async O=>{if(!e)throw new Error("Not authenticated");await KV(e,O.toString())},onSuccess:()=>{n.invalidateQueries({queryKey:["urgent_fee_pct"]}),t({type:"success",message:"Emergency booking fee updated",duration:5e3})},onError:O=>{var L,F;t({type:"error",message:((F=(L=O.response)==null?void 0:L.data)==null?void 0:F.message)||"Failed to update fee",duration:5e3})}}),N=ve({mutationFn:async O=>{if(!e)throw new Error("Not authenticated");await GV(e,O)},onSuccess:()=>{n.invalidateQueries({queryKey:["blackout_dates"]}),b({date:"",reason:""}),t({type:"success",message:"Blackout date added successfully",duration:5e3})},onError:O=>{var L,F;t({type:"error",message:((F=(L=O.response)==null?void 0:L.data)==null?void 0:F.message)||"Failed to add blackout date",duration:5e3})}}),w=ve({mutationFn:async O=>{if(!e)throw new Error("Not authenticated");await QV(e,O)},onSuccess:()=>{n.invalidateQueries({queryKey:["blackout_dates"]}),t({type:"success",message:"Blackout date removed successfully",duration:5e3})},onError:O=>{var L,F;t({type:"error",message:((F=(L=O.response)==null?void 0:L.data)==null?void 0:F.message)||"Failed to remove blackout date",duration:5e3})}}),j=O=>{h(L=>({...L,working_days:L.working_days.includes(O)?L.working_days.filter(F=>F!==O):[...L.working_days,O].sort()}))},_=()=>{if(u.working_days.length===0){t({type:"error",message:"Please select at least one working day",duration:5e3});return}if(u.start_hour>=u.end_hour){t({type:"error",message:"End hour must be after start hour",duration:5e3});return}if(u.slot_duration_minutes<=0){t({type:"error",message:"Slot duration must be positive",duration:5e3});return}y.mutate()},S=()=>{if(g<0||g>100){t({type:"error",message:"Urgent fee must be between 0 and 100",duration:5e3});return}v.mutate(g)},T=O=>{if(O.preventDefault(),!f.date){t({type:"error",message:"Please select a date",duration:5e3});return}N.mutate({date:f.date,reason:f.reason||null})},A=O=>{confirm("Are you sure you want to remove this blackout date?")&&w.mutate(O)},E=[{value:1,label:"Monday"},{value:2,label:"Tuesday"},{value:3,label:"Wednesday"},{value:4,label:"Thursday"},{value:5,label:"Friday"},{value:6,label:"Saturday"},{value:0,label:"Sunday"}],R=a||l||m,I=y.isPending||v.isPending;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Calendar & Capacity Configuration"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Configure working hours, booking slots, blackout dates, and emergency booking parameters"})]}),r.jsx("button",{onClick:_,disabled:I||R,className:"bg-yellow-400 text-black font-semibold px-6 py-3 rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:I?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):"Save Settings"})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:R?r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 text-gray-400",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading settings..."})]}):r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Working Days & Hours"}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Working Days"}),r.jsx("div",{className:"grid grid-cols-2 sm:grid-cols-4 lg:grid-cols-7 gap-3",children:E.map(O=>r.jsxs("label",{className:"flex items-center space-x-2 cursor-pointer bg-gray-50 p-3 rounded-lg border border-gray-200 hover:bg-gray-100 transition-colors",children:[r.jsx("input",{type:"checkbox",checked:u.working_days.includes(O.value),onChange:()=>j(O.value),className:"w-5 h-5 text-yellow-400 border-gray-300 rounded focus:ring-yellow-400"}),r.jsx("span",{className:"text-sm font-medium text-gray-900",children:O.label})]},O.value))})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"start_hour",className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Hour"}),r.jsx("select",{id:"start_hour",value:u.start_hour,onChange:O=>h(L=>({...L,start_hour:parseInt(O.target.value)})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:Array.from({length:24},(O,L)=>r.jsx("option",{value:L,children:L===0?"12 AM":L<12?`${L} AM`:L===12?"12 PM":`${L-12} PM`},L))})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"end_hour",className:"block text-sm font-medium text-gray-700 mb-2",children:"End Hour"}),r.jsx("select",{id:"end_hour",value:u.end_hour,onChange:O=>h(L=>({...L,end_hour:parseInt(O.target.value)})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:Array.from({length:24},(O,L)=>r.jsx("option",{value:L,children:L===0?"12 AM":L<12?`${L} AM`:L===12?"12 PM":`${L-12} PM`},L))})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("label",{htmlFor:"slot_duration",className:"block text-sm font-medium text-gray-700 mb-2",children:"Slot Duration (minutes)"}),r.jsx("input",{type:"number",id:"slot_duration",min:"15",step:"15",value:u.slot_duration_minutes,onChange:O=>h(L=>({...L,slot_duration_minutes:parseInt(O.target.value)||0})),className:"w-full sm:w-64 px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Recommended: 60, 90, 120, or 180 minutes"})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsxs("p",{className:"text-blue-900 font-medium",children:[" Calculated Slots Per Day: ",r.jsx("span",{className:"text-2xl ml-2",children:p})]}),r.jsxs("p",{className:"text-blue-700 text-sm mt-2",children:["Based on ",u.end_hour-u.start_hour," working hours and ",u.slot_duration_minutes," minute slots"]})]})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Emergency Booking Settings"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"emergency_slots",className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Slots Per Day"}),r.jsx("input",{type:"number",id:"emergency_slots",min:"0",max:p,value:u.emergency_slots_per_day,onChange:O=>h(L=>({...L,emergency_slots_per_day:parseInt(O.target.value)||0})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Available when regular slots are full (max: ",p,")"]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"urgent_fee",className:"block text-sm font-medium text-gray-700 mb-2",children:"Urgent Fee Percentage (%)"}),r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("input",{type:"number",id:"urgent_fee",min:"0",max:"100",step:"5",value:g,onChange:O=>x(parseFloat(O.target.value)||0),onBlur:S,className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("button",{onClick:S,disabled:v.isPending,className:"bg-gray-100 hover:bg-gray-200 text-gray-900 px-4 py-3 rounded-lg font-medium transition-colors disabled:opacity-50",children:"Update"})]}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Additional fee applied to emergency bookings (default: 20%)"})]})]}),r.jsx("div",{className:"mt-6 bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:r.jsxs("p",{className:"text-yellow-900 text-sm",children:[r.jsx("strong",{children:" Emergency Booking Rules:"})," Customers can request emergency bookings on fully booked dates. An additional ",g,"% fee will be applied to the total order amount."]})})]}),r.jsxs("div",{className:"bg-white shadow rounded-lg p-6",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Blackout Dates"}),r.jsxs("form",{onSubmit:T,className:"mb-6 bg-gray-50 border border-gray-200 rounded-lg p-4",children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Add New Blackout Date"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-3 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"blackout_date",className:"block text-sm font-medium text-gray-700 mb-2",children:"Date"}),r.jsx("input",{type:"date",id:"blackout_date",value:f.date,onChange:O=>b(L=>({...L,date:O.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"blackout_reason",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reason (optional)"}),r.jsx("input",{type:"text",id:"blackout_reason",placeholder:"e.g., Public Holiday",value:f.reason,onChange:O=>b(L=>({...L,reason:O.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsx("div",{className:"flex items-end",children:r.jsx("button",{type:"submit",disabled:N.isPending||!f.date,className:"w-full bg-blue-600 text-white font-semibold px-6 py-3 rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:N.isPending?"Adding...":"Add Blackout Date"})})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-900 mb-4",children:"Configured Blackout Dates"}),o.length===0?r.jsxs("div",{className:"text-center py-8 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("p",{className:"mt-2 text-gray-600",children:"No blackout dates configured"}),r.jsx("p",{className:"text-sm text-gray-500",children:"Add dates when booking should not be allowed"})]}):r.jsx("div",{className:"overflow-hidden border border-gray-200 rounded-lg",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reason"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:o.map(O=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm font-medium text-gray-900",children:new Date(O.date).toLocaleDateString("en-IE",{weekday:"long",year:"numeric",month:"long",day:"numeric"})})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("span",{className:"text-sm text-gray-600",children:O.reason||"No reason specified"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right",children:r.jsx("button",{onClick:()=>A(O.id),disabled:w.isPending,className:"text-red-600 hover:text-red-800 font-medium text-sm transition-colors disabled:opacity-50",children:"Remove"})})]},O.id))})]})})]})]}),r.jsxs("div",{className:"bg-gradient-to-br from-blue-50 to-indigo-100 border border-blue-200 rounded-lg p-6",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Working Days"}),r.jsx("div",{className:"text-3xl font-bold text-gray-900",children:u.working_days.length})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Slots Per Day"}),r.jsx("div",{className:"text-3xl font-bold text-blue-600",children:p})]}),r.jsxs("div",{className:"bg-white rounded-lg p-4 shadow-sm",children:[r.jsx("div",{className:"text-sm font-medium text-gray-600 mb-1",children:"Emergency Slots/Day"}),r.jsx("div",{className:"text-3xl font-bold text-yellow-600",children:u.emergency_slots_per_day})]})]}),r.jsxs("div",{className:"mt-4 text-sm text-blue-900",children:[r.jsx("strong",{children:" Capacity Calculation:"})," With ",u.working_days.length," working days per week and ",p," slots per day, you can accommodate approximately"," ",r.jsx("strong",{children:u.working_days.length*p})," bookings per week."]})]})]})})]})})},XV=()=>{const[e,t]=Ye(),n=et(),s=ae(P=>P.authentication_state.auth_token);ae(P=>P.authentication_state.current_user);const a=ae(P=>P.show_toast),[i,o]=k.useState(e.get("tab")||"features"),[l,c]=k.useState({feature_b2b_enabled:!1,feature_inventory_enabled:!1,feature_analytics_enabled:!1}),[d,m]=k.useState({stripe_enabled:!1,stripe_mode:"test",test_pk:"",test_sk:"",live_pk:"",live_sk:"",webhook_secret:""}),[u,h]=k.useState({tax_rate:"23",vat_number:"",effective_date:""}),[f,b]=k.useState({urgent_fee_pct:"20",emergency_slots_per_day:"2",deposit_pct:"50"}),[g,x]=k.useState({user_id:"",action:"",object_type:"",start_date:"",end_date:"",page:1}),[p,y]=k.useState("idle"),[v,N]=k.useState(null),w="https://123project-build-a-production-ready-w.launchpulse.ai",{data:j,isLoading:_}=pe({queryKey:["admin_settings"],queryFn:async()=>(await te.get(`${w}/api/admin/settings`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s,staleTime:6e4,retry:1});k.useEffect(()=>{var P,V,K,ne,G,oe,H,ee,J,X,se,$,C,U,q,de;if(j){const he=j,le={feature_b2b_enabled:((P=he.find(re=>re.key==="feature_b2b_enabled"))==null?void 0:P.value)==="true",feature_inventory_enabled:((V=he.find(re=>re.key==="feature_inventory_enabled"))==null?void 0:V.value)==="true",feature_analytics_enabled:((K=he.find(re=>re.key==="feature_analytics_enabled"))==null?void 0:K.value)==="true"},be={stripe_enabled:((ne=he.find(re=>re.key==="stripe_enabled"))==null?void 0:ne.value)==="true",stripe_mode:((G=he.find(re=>re.key==="stripe_mode"))==null?void 0:G.value)||"test",test_pk:((oe=he.find(re=>re.key==="stripe_test_pk"))==null?void 0:oe.value)||"",test_sk:((H=he.find(re=>re.key==="stripe_test_sk"))==null?void 0:H.value)||"",live_pk:((ee=he.find(re=>re.key==="stripe_live_pk"))==null?void 0:ee.value)||"",live_sk:((J=he.find(re=>re.key==="stripe_live_sk"))==null?void 0:J.value)||"",webhook_secret:((X=he.find(re=>re.key==="stripe_webhook_secret"))==null?void 0:X.value)||""},z={tax_rate:((se=he.find(re=>re.key==="tax_rate"))==null?void 0:se.value)||"23",vat_number:(($=he.find(re=>re.key==="vat_number"))==null?void 0:$.value)||"",effective_date:((C=he.find(re=>re.key==="tax_effective_date"))==null?void 0:C.value)||""},B={urgent_fee_pct:((U=he.find(re=>re.key==="urgent_fee_pct"))==null?void 0:U.value)||"20",emergency_slots_per_day:((q=he.find(re=>re.key==="emergency_slots_per_day"))==null?void 0:q.value)||"2",deposit_pct:((de=he.find(re=>re.key==="deposit_pct"))==null?void 0:de.value)||"50"};c(le),m(be),h(z),b(B)}},[j]);const{data:S,isLoading:T}=pe({queryKey:["audit_logs",g],queryFn:async()=>{const P={page:g.page.toString()};return g.user_id&&(P.user_id=g.user_id),g.action&&(P.action=g.action),g.object_type&&(P.object_type=g.object_type),g.start_date&&(P.start_date=g.start_date),g.end_date&&(P.end_date=g.end_date),(await te.get(`${w}/api/admin/audit-logs`,{headers:{Authorization:`Bearer ${s}`},params:P})).data},enabled:!!s&&i==="audit",staleTime:3e4,retry:1}),A=ve({mutationFn:async({key:P,value:V})=>(await te.patch(`${w}/api/admin/settings/${P}`,{value:V},{headers:{Authorization:`Bearer ${s}`}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["admin_settings"]}),a({type:"success",message:"Setting updated successfully",duration:3e3})},onError:P=>{var V,K;a({type:"error",message:((K=(V=P.response)==null?void 0:V.data)==null?void 0:K.message)||"Failed to update setting",duration:5e3})}}),E=P=>{o(P),t({tab:P})},R=async P=>{const V=!l[P];c(K=>({...K,[P]:V})),await A.mutateAsync({key:P,value:V.toString()})},I=async()=>{const P=[{key:"stripe_enabled",value:d.stripe_enabled.toString()},{key:"stripe_mode",value:d.stripe_mode},{key:"stripe_test_pk",value:d.test_pk},{key:"stripe_test_sk",value:d.test_sk},{key:"stripe_live_pk",value:d.live_pk},{key:"stripe_live_sk",value:d.live_sk},{key:"stripe_webhook_secret",value:d.webhook_secret}];try{for(const V of P)await A.mutateAsync(V);a({type:"success",message:"Stripe settings saved successfully",duration:3e3})}catch{}},O=async()=>{y("testing"),setTimeout(()=>{d.stripe_mode==="test"&&d.test_pk&&d.test_sk?(y("success"),a({type:"success",message:"Stripe connection successful",duration:3e3})):d.stripe_mode==="live"&&d.live_pk&&d.live_sk?(y("success"),a({type:"success",message:"Stripe connection successful",duration:3e3})):(y("error"),a({type:"error",message:"Invalid Stripe keys",duration:5e3})),setTimeout(()=>y("idle"),3e3)},1500)},L=async()=>{const P=parseFloat(u.tax_rate);if(isNaN(P)||P<0||P>100){a({type:"error",message:"Tax rate must be between 0 and 100",duration:5e3});return}const V=[{key:"tax_rate",value:u.tax_rate},{key:"vat_number",value:u.vat_number},{key:"tax_effective_date",value:u.effective_date}];try{for(const K of V)await A.mutateAsync(K);a({type:"success",message:"Tax settings saved successfully",duration:3e3})}catch{}},F=async()=>{const P=parseFloat(f.urgent_fee_pct),V=parseInt(f.emergency_slots_per_day),K=parseFloat(f.deposit_pct);if(isNaN(P)||P<0||P>100){a({type:"error",message:"Emergency fee must be between 0 and 100",duration:5e3});return}if(isNaN(V)||V<0){a({type:"error",message:"Emergency slots must be a positive number",duration:5e3});return}if(isNaN(K)||K<0||K>100){a({type:"error",message:"Deposit percentage must be between 0 and 100",duration:5e3});return}const ne=[{key:"urgent_fee_pct",value:f.urgent_fee_pct},{key:"emergency_slots_per_day",value:f.emergency_slots_per_day},{key:"deposit_pct",value:f.deposit_pct}];try{for(const G of ne)await A.mutateAsync(G);a({type:"success",message:"Calendar settings saved successfully",duration:3e3})}catch{}},M=(P,V)=>{x(K=>({...K,[P]:V,page:P!=="page"?1:Number(V)}))},D=()=>{x({user_id:"",action:"",object_type:"",start_date:"",end_date:"",page:1})},W=()=>{if(!S)return;const V=[["Timestamp","User","Action","Object Type","Object ID","IP Address","Metadata"].join(","),...S.logs.map(G=>[G.log.created_at,`"${G.user.name} (${G.user.role})"`,G.log.action,G.log.object_type,G.log.object_id,G.log.ip_address||"N/A",G.log.metadata?`"${G.log.metadata.replace(/"/g,'""')}"`:"N/A"].join(","))].join(`
`),K=new Blob([V],{type:"text/csv;charset=utf-8;"}),ne=document.createElement("a");ne.href=URL.createObjectURL(K),ne.download=`audit_logs_${new Date().toISOString().split("T")[0]}.csv`,ne.click()};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"System Settings"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Configure system-wide settings, feature flags, and view audit logs"})]}),r.jsx(ie,{to:"/admin",className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors",children:"Back to Dashboard"})]})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("nav",{className:"flex space-x-8 overflow-x-auto","aria-label":"Settings tabs",children:[{id:"features",label:"Feature Flags"},{id:"payments",label:"Payment Settings"},{id:"tax",label:"Tax Settings"},{id:"calendar",label:"Calendar Settings"},{id:"audit",label:"Audit Logs"}].map(P=>r.jsx("button",{onClick:()=>E(P.id),className:`py-4 px-1 border-b-3 font-medium text-sm whitespace-nowrap transition-colors ${i===P.id?"border-yellow-400 text-gray-900":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:P.label},P.id))})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:_&&i!=="audit"?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):r.jsxs(r.Fragment,{children:[i==="features"&&r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Phase 2 Feature Flags"}),r.jsx("p",{className:"text-gray-600 mb-8",children:"Enable or disable advanced features. Changes take effect immediately."}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"flex items-start justify-between p-6 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"B2B Accounts & Contract Pricing"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Enable B2B account management, multi-location orders, contract pricing rules, and consolidated invoicing. Adds /admin/b2b section to admin menu."})]}),r.jsx("button",{onClick:()=>R("feature_b2b_enabled"),disabled:A.isPending,className:`ml-6 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${l.feature_b2b_enabled?"bg-yellow-400":"bg-gray-200"} ${A.isPending?"opacity-50 cursor-not-allowed":""}`,children:r.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition duration-200 ease-in-out ${l.feature_b2b_enabled?"translate-x-5":"translate-x-0"}`})})]}),r.jsxs("div",{className:"flex items-start justify-between p-6 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Inventory Management"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Enable material inventory tracking, low stock alerts, consumption rules, and purchase order management. Adds /admin/inventory section to admin menu."})]}),r.jsx("button",{onClick:()=>R("feature_inventory_enabled"),disabled:A.isPending,className:`ml-6 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${l.feature_inventory_enabled?"bg-yellow-400":"bg-gray-200"} ${A.isPending?"opacity-50 cursor-not-allowed":""}`,children:r.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition duration-200 ease-in-out ${l.feature_inventory_enabled?"translate-x-5":"translate-x-0"}`})})]}),r.jsxs("div",{className:"flex items-start justify-between p-6 bg-gray-50 rounded-lg",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Analytics Dashboard"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Enable comprehensive analytics including conversion funnel, revenue metrics, turnaround performance, and SLA monitoring. Adds /admin/analytics section to admin menu."})]}),r.jsx("button",{onClick:()=>R("feature_analytics_enabled"),disabled:A.isPending,className:`ml-6 relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${l.feature_analytics_enabled?"bg-yellow-400":"bg-gray-200"} ${A.isPending?"opacity-50 cursor-not-allowed":""}`,children:r.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition duration-200 ease-in-out ${l.feature_analytics_enabled?"translate-x-5":"translate-x-0"}`})})]})]})]}),i==="payments"&&r.jsx("div",{className:"space-y-6",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Stripe Integration"}),r.jsx("p",{className:"text-gray-600 mt-1",children:"Configure Stripe payment processing"})]}),r.jsx("button",{onClick:()=>m(P=>({...P,stripe_enabled:!P.stripe_enabled})),className:`relative inline-flex h-6 w-11 flex-shrink-0 cursor-pointer rounded-full border-2 border-transparent transition-colors duration-200 ease-in-out focus:outline-none focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 ${d.stripe_enabled?"bg-yellow-400":"bg-gray-200"}`,children:r.jsx("span",{className:`inline-block h-5 w-5 transform rounded-full bg-white shadow transition duration-200 ease-in-out ${d.stripe_enabled?"translate-x-5":"translate-x-0"}`})})]}),d.stripe_enabled&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-3",children:"Mode"}),r.jsxs("div",{className:"flex space-x-4",children:[r.jsx("button",{onClick:()=>m(P=>({...P,stripe_mode:"test"})),className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all ${d.stripe_mode==="test"?"bg-yellow-400 text-gray-900 shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Test Mode"}),r.jsx("button",{onClick:()=>m(P=>({...P,stripe_mode:"live"})),className:`flex-1 px-6 py-3 rounded-lg font-medium transition-all ${d.stripe_mode==="live"?"bg-yellow-400 text-gray-900 shadow-lg":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Live Mode"})]})]}),d.stripe_mode==="test"&&r.jsxs("div",{className:"space-y-4 p-4 bg-blue-50 rounded-lg border border-blue-200",children:[r.jsx("h3",{className:"text-sm font-semibold text-blue-900",children:"Test Mode Keys"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Publishable Key"}),r.jsx("input",{type:"text",value:d.test_pk,onChange:P=>m(V=>({...V,test_pk:P.target.value})),placeholder:"pk_test_...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Test Secret Key"}),r.jsx("input",{type:"password",value:d.test_sk,onChange:P=>m(V=>({...V,test_sk:P.target.value})),placeholder:"sk_test_...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),d.stripe_mode==="live"&&r.jsxs("div",{className:"space-y-4 p-4 bg-red-50 rounded-lg border border-red-200",children:[r.jsx("h3",{className:"text-sm font-semibold text-red-900",children:"Live Mode Keys (Production)"}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Live Publishable Key"}),r.jsx("input",{type:"text",value:d.live_pk,onChange:P=>m(V=>({...V,live_pk:P.target.value})),placeholder:"pk_live_...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Live Secret Key"}),r.jsx("input",{type:"password",value:d.live_sk,onChange:P=>m(V=>({...V,live_sk:P.target.value})),placeholder:"sk_live_...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Webhook Secret"}),r.jsx("input",{type:"password",value:d.webhook_secret,onChange:P=>m(V=>({...V,webhook_secret:P.target.value})),placeholder:"whsec_...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Webhook secret for signature verification"})]}),r.jsxs("div",{className:"flex space-x-4 pt-4",children:[r.jsx("button",{onClick:O,disabled:p==="testing",className:"px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:p==="testing"?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Testing..."]}):p==="success"?r.jsxs("span",{className:"flex items-center text-green-600",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M16.707 5.293a1 1 0 010 1.414l-8 8a1 1 0 01-1.414 0l-4-4a1 1 0 011.414-1.414L8 12.586l7.293-7.293a1 1 0 011.414 0z",clipRule:"evenodd"})}),"Connected"]}):p==="error"?r.jsxs("span",{className:"flex items-center text-red-600",children:[r.jsx("svg",{className:"w-4 h-4 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),"Failed"]}):"Test Connection"}),r.jsx("button",{onClick:I,disabled:A.isPending,className:"flex-1 px-6 py-3 bg-yellow-400 text-gray-900 rounded-lg font-medium hover:bg-yellow-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:A.isPending?"Saving...":"Save Stripe Settings"})]})]})]})}),i==="tax"&&r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Tax & VAT Configuration"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Tax Rate (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",step:"0.01",value:u.tax_rate,onChange:P=>h(V=>({...V,tax_rate:P.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Current rate applied to all invoices (e.g., 23 for Irish VAT)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"VAT Number / Tax ID"}),r.jsx("input",{type:"text",value:u.vat_number,onChange:P=>h(V=>({...V,vat_number:P.target.value})),placeholder:"IE1234567X",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Displayed on invoices and receipts"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Effective Date (Optional)"}),r.jsx("input",{type:"date",value:u.effective_date,onChange:P=>h(V=>({...V,effective_date:P.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Schedule future tax rate changes (leave empty for current rate)"})]}),r.jsx("button",{onClick:L,disabled:A.isPending,className:"w-full px-6 py-3 bg-yellow-400 text-gray-900 rounded-lg font-medium hover:bg-yellow-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:A.isPending?"Saving...":"Save Tax Settings"})]})]}),i==="calendar"&&r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Calendar & Booking Settings"}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Booking Fee (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:f.urgent_fee_pct,onChange:P=>b(V=>({...V,urgent_fee_pct:P.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Additional fee charged for emergency bookings on fully booked dates (default: 20%)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Emergency Slots Per Day"}),r.jsx("input",{type:"number",min:"0",step:"1",value:f.emergency_slots_per_day,onChange:P=>b(V=>({...V,emergency_slots_per_day:P.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Number of emergency booking slots available per day (default: 2)"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Deposit Requirement (%)"}),r.jsx("input",{type:"number",min:"0",max:"100",step:"1",value:f.deposit_pct,onChange:P=>b(V=>({...V,deposit_pct:P.target.value})),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("p",{className:"mt-2 text-xs text-gray-500",children:"Percentage of total amount required as deposit (default: 50%)"})]}),r.jsx("button",{onClick:F,disabled:A.isPending,className:"w-full px-6 py-3 bg-yellow-400 text-gray-900 rounded-lg font-medium hover:bg-yellow-500 transition-all disabled:opacity-50 disabled:cursor-not-allowed shadow-lg",children:A.isPending?"Saving...":"Save Calendar Settings"})]})]}),i==="audit"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-8",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Filter Audit Logs"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Action Type"}),r.jsxs("select",{value:g.action,onChange:P=>M("action",P.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[r.jsx("option",{value:"",children:"All Actions"}),r.jsx("option",{value:"CREATE",children:"Create"}),r.jsx("option",{value:"UPDATE",children:"Update"}),r.jsx("option",{value:"DELETE",children:"Delete"}),r.jsx("option",{value:"LOGIN",children:"Login"}),r.jsx("option",{value:"REGISTER",children:"Register"}),r.jsx("option",{value:"FINALIZE",children:"Finalize"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Object Type"}),r.jsxs("select",{value:g.object_type,onChange:P=>M("object_type",P.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[r.jsx("option",{value:"",children:"All Objects"}),r.jsx("option",{value:"USER",children:"User"}),r.jsx("option",{value:"QUOTE",children:"Quote"}),r.jsx("option",{value:"ORDER",children:"Order"}),r.jsx("option",{value:"PAYMENT",children:"Payment"}),r.jsx("option",{value:"SERVICE",children:"Service"}),r.jsx("option",{value:"SETTING",children:"Setting"})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Start Date"}),r.jsx("input",{type:"date",value:g.start_date,onChange:P=>M("start_date",P.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"End Date"}),r.jsx("input",{type:"date",value:g.end_date,onChange:P=>M("end_date",P.target.value),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{className:"flex items-end space-x-2",children:[r.jsx("button",{onClick:D,className:"flex-1 px-6 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-all",children:"Clear Filters"}),r.jsx("button",{onClick:W,disabled:!S||S.logs.length===0,className:"flex-1 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all disabled:opacity-50 disabled:cursor-not-allowed",children:"Export CSV"})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-8 py-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900",children:"Audit Trail"}),r.jsx("p",{className:"text-gray-600 mt-1",children:S?`Showing ${S.logs.length} of ${S.total} entries`:"Loading..."})]}),T?r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"})}):!S||S.logs.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"mt-4 text-gray-600",children:"No audit logs found"})]}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden md:block overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Timestamp"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"User"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Action"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Object"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"IP Address"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Details"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:S.logs.map(P=>r.jsxs(Y.Fragment,{children:[r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date(P.log.created_at).toLocaleString()}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.user.name}),r.jsx("div",{className:"text-xs text-gray-500",children:P.user.role})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:P.log.action})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:[P.log.object_type," #",P.log.object_id.substring(0,8)]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:P.log.ip_address||"N/A"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:P.log.metadata&&r.jsx("button",{onClick:()=>N(v===P.log.id?null:P.log.id),className:"text-blue-600 hover:text-blue-800 font-medium",children:v===P.log.id?"Hide":"View"})})]}),v===P.log.id&&P.log.metadata&&r.jsx("tr",{children:r.jsx("td",{colSpan:6,className:"px-6 py-4 bg-gray-50",children:r.jsx("pre",{className:"text-xs text-gray-700 overflow-auto max-h-48",children:JSON.stringify(JSON.parse(P.log.metadata),null,2)})})})]},P.log.id))})]})}),r.jsx("div",{className:"md:hidden divide-y divide-gray-200",children:S.logs.map(P=>r.jsxs("div",{className:"p-6 space-y-3",children:[r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-900",children:P.user.name}),r.jsx("p",{className:"text-xs text-gray-500",children:P.user.role})]}),r.jsx("span",{className:"px-2 py-1 text-xs font-semibold rounded-full bg-blue-100 text-blue-800",children:P.log.action})]}),r.jsxs("div",{className:"text-sm text-gray-700",children:[r.jsx("span",{className:"font-medium",children:P.log.object_type})," #",P.log.object_id.substring(0,8)]}),r.jsxs("div",{className:"flex items-center justify-between text-xs text-gray-500",children:[r.jsx("span",{children:new Date(P.log.created_at).toLocaleString()}),r.jsx("span",{children:P.log.ip_address||"N/A"})]}),P.log.metadata&&r.jsx("button",{onClick:()=>N(v===P.log.id?null:P.log.id),className:"text-blue-600 hover:text-blue-800 font-medium text-sm",children:v===P.log.id?"Hide Details":"View Details"}),v===P.log.id&&P.log.metadata&&r.jsx("pre",{className:"text-xs text-gray-700 overflow-auto max-h-48 bg-gray-50 p-3 rounded",children:JSON.stringify(JSON.parse(P.log.metadata),null,2)})]},P.log.id))}),S&&S.total>100&&r.jsxs("div",{className:"px-6 py-4 border-t border-gray-200 flex items-center justify-between",children:[r.jsx("button",{onClick:()=>M("page",Math.max(1,g.page-1)),disabled:g.page<=1,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Previous"}),r.jsxs("span",{className:"text-sm text-gray-600",children:["Page ",g.page," of ",Math.ceil(S.total/100)]}),r.jsx("button",{onClick:()=>M("page",g.page+1),disabled:g.page>=Math.ceil(S.total/100),className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg hover:bg-gray-200 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:"Next"})]})]})]})]})]})})]})})},JV=()=>{const[e,t]=Ye(),n=et(),s=ae(B=>B.authentication_state.auth_token),a=ae(B=>B.show_toast),[i,o]=k.useState({category:e.get("category")||null,active:e.get("active")==="true"?!0:e.get("active")==="false"?!1:null,search:""}),[l,c]=k.useState(!1),[d,m]=k.useState(!1),[u,h]=k.useState(!1),[f,b]=k.useState(!1),[g,x]=k.useState(!1),[p,y]=k.useState(null),[v,N]=k.useState(null),[w,j]=k.useState({name:"",slug:"",description:"",base_price:0,thumbnail_url:"",category_id:"",config_schema:null}),[_,S]=k.useState({name:"",slug:"",description:"",base_price:0,thumbnail_url:"",category_id:"",config_schema:null}),[T,A]=k.useState({name:"",slug:"",sort_order:0}),[E,R]=k.useState({label:"",quantity:100,unit_price:0,total_price:0,compare_at_price:null,discount_label:"",sort_order:0}),I="https://123project-build-a-production-ready-w.launchpulse.ai";k.useEffect(()=>{const B=new URLSearchParams;i.category&&B.set("category",i.category),i.active!==null&&B.set("active",String(i.active)),t(B)},[i.category,i.active,t]),k.useEffect(()=>{if(w.name&&!w.slug){const B=w.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");j(re=>({...re,slug:B}))}},[w.name]),k.useEffect(()=>{if(T.name&&!T.slug){const B=T.name.toLowerCase().replace(/[^a-z0-9]+/g,"-").replace(/^-|-$/g,"");A(re=>({...re,slug:B}))}},[T.name]),k.useEffect(()=>{if(E.unit_price&&E.quantity){const B=E.unit_price*E.quantity;R(re=>({...re,total_price:parseFloat(B.toFixed(2))}))}},[E.unit_price,E.quantity]);const{data:O=[],isLoading:L}=pe({queryKey:["admin-product-categories"],queryFn:async()=>(await te.get(`${I}/api/admin/product-categories`,{headers:{Authorization:`Bearer ${s}`}})).data,enabled:!!s,staleTime:3e5,refetchOnWindowFocus:!1}),{data:F=[],isLoading:M,error:D}=pe({queryKey:["admin-products",i.category,i.active],queryFn:async()=>{const B=new URLSearchParams;return i.category&&B.set("category",i.category),i.active!==null&&B.set("is_active",String(i.active)),(await te.get(`${I}/api/admin/products?${B.toString()}`,{headers:{Authorization:`Bearer ${s}`}})).data},enabled:!!s,staleTime:6e4,refetchOnWindowFocus:!1,retry:1}),{data:W=[],isLoading:P}=pe({queryKey:["admin-product-variants",p==null?void 0:p.id],queryFn:async()=>p!=null&&p.id?(await te.get(`${I}/api/admin/products/${p.id}/variants`,{headers:{Authorization:`Bearer ${s}`}})).data:[],enabled:!!s&&!!(p!=null&&p.id)&&f,staleTime:6e4,refetchOnWindowFocus:!1}),V=ve({mutationFn:async B=>(await te.post(`${I}/api/admin/products`,B,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["admin-products"]}),c(!1),j({name:"",slug:"",description:"",base_price:0,thumbnail_url:"",category_id:"",config_schema:null}),a({type:"success",message:"Product created successfully",duration:5e3})},onError:B=>{var Q,me;const re=((me=(Q=B.response)==null?void 0:Q.data)==null?void 0:me.message)||"Failed to create product";a({type:"error",message:re,duration:5e3})}}),K=ve({mutationFn:async({product_id:B,data:re})=>(await te.patch(`${I}/api/admin/products/${B}`,re,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["admin-products"]}),h(!1),y(null),a({type:"success",message:"Product updated successfully",duration:5e3})},onError:B=>{var Q,me;const re=((me=(Q=B.response)==null?void 0:Q.data)==null?void 0:me.message)||"Failed to update product";a({type:"error",message:re,duration:5e3})}}),ne=ve({mutationFn:async B=>(await te.post(`${I}/api/admin/product-categories`,B,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["admin-product-categories"]}),m(!1),A({name:"",slug:"",sort_order:O.length}),a({type:"success",message:"Category created successfully",duration:5e3})},onError:B=>{var Q,me;const re=((me=(Q=B.response)==null?void 0:Q.data)==null?void 0:me.message)||"Failed to create category";a({type:"error",message:re,duration:5e3})}}),G=ve({mutationFn:async({product_id:B,is_active:re})=>(await te.patch(`${I}/api/admin/products/${B}`,{is_active:re},{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,onMutate:async({product_id:B,is_active:re})=>{await n.cancelQueries({queryKey:["admin-products"]});const Q=n.getQueryData(["admin-products",i.category,i.active]);return n.setQueryData(["admin-products",i.category,i.active],(me=[])=>me.map(Pe=>Pe.id===B?{...Pe,is_active:re}:Pe)),{previous_products:Q}},onError:(B,re,Q)=>{Q!=null&&Q.previous_products&&n.setQueryData(["admin-products",i.category,i.active],Q.previous_products),a({type:"error",message:"Failed to update product status",duration:5e3})},onSuccess:()=>{a({type:"success",message:"Product status updated",duration:3e3})},onSettled:()=>{n.invalidateQueries({queryKey:["admin-products"]})}}),oe=ve({mutationFn:async B=>{await te.delete(`${I}/api/admin/products/${B}`,{headers:{Authorization:`Bearer ${s}`}})},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-products"]}),a({type:"success",message:"Product deactivated successfully",duration:5e3})},onError:B=>{var Q,me;const re=((me=(Q=B.response)==null?void 0:Q.data)==null?void 0:me.message)||"Failed to delete product";a({type:"error",message:re,duration:5e3})}}),H=ve({mutationFn:async({product_id:B,data:re})=>(await te.post(`${I}/api/admin/products/${B}/variants`,re,{headers:{Authorization:`Bearer ${s}`,"Content-Type":"application/json"}})).data,onSuccess:()=>{n.invalidateQueries({queryKey:["admin-product-variants",p==null?void 0:p.id]}),n.invalidateQueries({queryKey:["admin-products"]}),x(!1),R({label:"",quantity:100,unit_price:0,total_price:0,compare_at_price:null,discount_label:"",sort_order:W.length}),a({type:"success",message:"Variant created successfully",duration:5e3})},onError:B=>{var Q,me;const re=((me=(Q=B.response)==null?void 0:Q.data)==null?void 0:me.message)||"Failed to create variant";a({type:"error",message:re,duration:5e3})}}),ee=ve({mutationFn:async B=>{await te.delete(`${I}/api/admin/product-variants/${B}`,{headers:{Authorization:`Bearer ${s}`}})},onSuccess:()=>{n.invalidateQueries({queryKey:["admin-product-variants",p==null?void 0:p.id]}),n.invalidateQueries({queryKey:["admin-products"]}),a({type:"success",message:"Variant deleted successfully",duration:5e3})},onError:B=>{var Q,me;const re=((me=(Q=B.response)==null?void 0:Q.data)==null?void 0:me.message)||"Failed to delete variant";a({type:"error",message:re,duration:5e3})}}),J=(B,re)=>{o(Q=>({...Q,[B]:re}))},X=B=>{o(re=>({...re,search:B}))},se=B=>{if(B.preventDefault(),!w.name||!w.slug){a({type:"error",message:"Please fill in all required fields",duration:5e3});return}V.mutate(w)},$=B=>{if(B.preventDefault(),!p||!_.name){a({type:"error",message:"Please fill in all required fields",duration:5e3});return}K.mutate({product_id:p.id,data:_})},C=B=>{if(B.preventDefault(),!T.name||!T.slug){a({type:"error",message:"Please fill in all required fields",duration:5e3});return}ne.mutate(T)},U=B=>{if(B.preventDefault(),!p||!E.label||!E.quantity){a({type:"error",message:"Please fill in all required fields",duration:5e3});return}H.mutate({product_id:p.id,data:E})},q=(B,re)=>{G.mutate({product_id:B,is_active:!re})},de=B=>{y(B),S({name:B.name,slug:B.slug,description:B.description||"",base_price:B.base_price,thumbnail_url:B.thumbnail_url||"",category_id:B.category_id||"",config_schema:B.config_schema?JSON.parse(B.config_schema):null}),h(!0)},he=B=>{y(B),b(!0)},le=B=>{window.confirm("Are you sure you want to deactivate this product?")&&oe.mutate(B)},be=B=>{window.confirm("Are you sure you want to delete this variant?")&&ee.mutate(B)},z=F.filter(B=>{var Q,me;if(!i.search)return!0;const re=i.search.toLowerCase();return B.name.toLowerCase().includes(re)||((Q=B.description)==null?void 0:Q.toLowerCase().includes(re))||((me=B.category_name)==null?void 0:me.toLowerCase().includes(re))});return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Products & Categories"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage your product catalog for direct purchase (no quotes required)"})]}),r.jsxs("div",{className:"mt-4 sm:mt-0 flex space-x-3",children:[r.jsx("button",{onClick:()=>m(!0),className:"px-4 py-2 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors border border-gray-300",children:"Add Category"}),r.jsxs("button",{onClick:()=>c(!0),className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors shadow-sm flex items-center gap-2",children:[r.jsx(no,{className:"h-4 w-4"}),"Add Product"]})]})]})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"md:col-span-2",children:[r.jsx("label",{htmlFor:"search",className:"block text-sm font-medium text-gray-700 mb-1",children:"Search Products"}),r.jsxs("div",{className:"relative",children:[r.jsx(AC,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-gray-400"}),r.jsx("input",{id:"search",type:"text",value:i.search,onChange:B=>X(B.target.value),placeholder:"Search by name, description...",className:"w-full pl-10 pr-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"category-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{id:"category-filter",value:i.category||"",onChange:B=>J("category",B.target.value||null),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Categories"}),O.map(B=>r.jsx("option",{value:B.slug,children:B.name},B.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"active-filter",className:"block text-sm font-medium text-gray-700 mb-1",children:"Status"}),r.jsxs("select",{id:"active-filter",value:i.active===null?"":String(i.active),onChange:B=>J("active",B.target.value===""?null:B.target.value==="true"),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[r.jsx("option",{value:"",children:"All Products"}),r.jsx("option",{value:"true",children:"Active Only"}),r.jsx("option",{value:"false",children:"Inactive Only"})]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[M&&r.jsx("div",{className:"flex justify-center py-12",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("svg",{className:"animate-spin h-6 w-6 text-yellow-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-gray-600",children:"Loading products..."})]})}),D&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsx("p",{className:"text-red-700",children:"Failed to load products. Please try again."})}),!M&&z.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-flex items-center justify-center w-16 h-16 bg-gray-100 rounded-full mb-4",children:r.jsx(wi,{className:"w-8 h-8 text-gray-400"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No products found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:i.search||i.category||i.active!==null?"Try adjusting your filters":"Get started by creating your first product"}),!i.search&&!i.category&&i.active===null&&r.jsx("button",{onClick:()=>c(!0),className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:"Create First Product"})]}),!M&&z.length>0&&r.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Product"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Category"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Base Price"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Variants"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{scope:"col",className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:z.map(B=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center",children:[B.thumbnail_url?r.jsx("img",{src:B.thumbnail_url,alt:B.name,className:"h-12 w-12 rounded-lg object-cover mr-4"}):r.jsx("div",{className:"h-12 w-12 rounded-lg bg-gray-100 flex items-center justify-center mr-4",children:r.jsx(wi,{className:"h-6 w-6 text-gray-400"})}),r.jsxs("div",{className:"flex flex-col",children:[r.jsx("div",{className:"text-sm font-semibold text-gray-900",children:B.name}),B.description&&r.jsx("div",{className:"text-sm text-gray-500 mt-1 line-clamp-1 max-w-xs",children:B.description})]})]})}),r.jsx("td",{className:"px-6 py-4",children:B.category_name?r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:B.category_name}):r.jsx("span",{className:"text-gray-400 text-sm",children:"No category"})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("div",{className:"flex items-center text-sm font-medium text-gray-900",children:[r.jsx(Ko,{className:"h-4 w-4 text-gray-400 mr-1"}),Number(B.base_price||0).toFixed(2)]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsxs("button",{onClick:()=>he(B),className:"inline-flex items-center px-2.5 py-1 rounded-md text-xs font-medium bg-gray-100 text-gray-800 hover:bg-gray-200 transition-colors",children:[r.jsx(Bw,{className:"h-3 w-3 mr-1"}),B.variants_count||0," variants"]})}),r.jsx("td",{className:"px-6 py-4",children:r.jsx("button",{onClick:()=>q(B.id,B.is_active),disabled:G.isPending,className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-semibold transition-colors ${B.is_active?"bg-green-100 text-green-800 hover:bg-green-200":"bg-gray-100 text-gray-800 hover:bg-gray-200"}`,children:B.is_active?r.jsxs(r.Fragment,{children:[r.jsx(kC,{className:"h-3 w-3 mr-1"}),"Active"]}):r.jsxs(r.Fragment,{children:[r.jsx(_C,{className:"h-3 w-3 mr-1"}),"Inactive"]})})}),r.jsx("td",{className:"px-6 py-4 text-right",children:r.jsxs("div",{className:"flex items-center justify-end space-x-2",children:[r.jsx("button",{onClick:()=>de(B),className:"p-2 text-gray-500 hover:text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",title:"Edit product",children:r.jsx(md,{className:"h-4 w-4"})}),r.jsx("button",{onClick:()=>le(B.id),disabled:oe.isPending,className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Deactivate product",children:r.jsx(xo,{className:"h-4 w-4"})})]})})]},B.id))})]})})})]})]}),l&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create New Product"}),r.jsx("button",{onClick:()=>c(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(lr,{className:"h-5 w-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:se,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),r.jsx("input",{type:"text",value:w.name,onChange:B=>j(re=>({...re,name:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"e.g., Business Cards",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),r.jsx("input",{type:"text",value:w.slug,onChange:B=>j(re=>({...re,slug:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"business-cards",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:w.description,onChange:B=>j(re=>({...re,description:B.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"Product description..."})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Price ($)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:w.base_price,onChange:B=>j(re=>({...re,base_price:parseFloat(B.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{value:w.category_id,onChange:B=>j(re=>({...re,category_id:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select category"}),O.map(B=>r.jsx("option",{value:B.id,children:B.name},B.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thumbnail URL"}),r.jsx("input",{type:"url",value:w.thumbnail_url,onChange:B=>j(re=>({...re,thumbnail_url:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"https://..."})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>c(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:V.isPending,className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50",children:V.isPending?"Creating...":"Create Product"})]})]})]})}),u&&p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-lg w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Edit Product"}),r.jsx("button",{onClick:()=>{h(!1),y(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(lr,{className:"h-5 w-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:$,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Product Name *"}),r.jsx("input",{type:"text",value:_.name,onChange:B=>S(re=>({...re,name:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Description"}),r.jsx("textarea",{value:_.description,onChange:B=>S(re=>({...re,description:B.target.value})),rows:3,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Base Price ($)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:_.base_price,onChange:B=>S(re=>({...re,base_price:parseFloat(B.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category"}),r.jsxs("select",{value:_.category_id,onChange:B=>S(re=>({...re,category_id:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",children:[r.jsx("option",{value:"",children:"Select category"}),O.map(B=>r.jsx("option",{value:B.id,children:B.name},B.id))]})]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Thumbnail URL"}),r.jsx("input",{type:"url",value:_.thumbnail_url,onChange:B=>S(re=>({...re,thumbnail_url:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>{h(!1),y(null)},className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:K.isPending,className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50",children:K.isPending?"Saving...":"Save Changes"})]})]})]})}),d&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Create Product Category"}),r.jsx("button",{onClick:()=>m(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(lr,{className:"h-5 w-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:C,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Category Name *"}),r.jsx("input",{type:"text",value:T.name,onChange:B=>A(re=>({...re,name:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"e.g., Business Essentials",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Slug *"}),r.jsx("input",{type:"text",value:T.slug,onChange:B=>A(re=>({...re,slug:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"business-essentials",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),r.jsx("input",{type:"number",value:T.sort_order,onChange:B=>A(re=>({...re,sort_order:parseInt(B.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>m(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:ne.isPending,className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50",children:ne.isPending?"Creating...":"Create Category"})]})]})]})}),f&&p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-2xl w-full max-h-[90vh] overflow-y-auto",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 sticky top-0 bg-white z-10",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Product Variants"}),r.jsx("p",{className:"text-sm text-gray-500",children:p.name})]}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsxs("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors flex items-center gap-2",children:[r.jsx(no,{className:"h-4 w-4"}),"Add Variant"]}),r.jsx("button",{onClick:()=>{b(!1),y(null)},className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(lr,{className:"h-5 w-5 text-gray-500"})})]})]}),r.jsx("div",{className:"p-6",children:P?r.jsx("div",{className:"flex justify-center py-8",children:r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-yellow-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-gray-600",children:"Loading variants..."})]})}):W.length===0?r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Bw,{className:"h-12 w-12 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"No variants yet. Add quantity-based pricing tiers."}),r.jsx("button",{onClick:()=>x(!0),className:"px-4 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors",children:"Add First Variant"})]}):r.jsx("div",{className:"space-y-3",children:W.map(B=>r.jsxs("div",{className:"flex items-center justify-between p-4 bg-gray-50 rounded-lg border border-gray-200",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3",children:[r.jsx("span",{className:"font-medium text-gray-900",children:B.label}),B.discount_label&&r.jsx("span",{className:"px-2 py-0.5 bg-green-100 text-green-700 text-xs font-medium rounded-full",children:B.discount_label})]}),r.jsxs("div",{className:"text-sm text-gray-500 mt-1",children:["Qty: ",B.quantity," | Unit: $",B.unit_price.toFixed(2)," | Total: $",B.total_price.toFixed(2),B.compare_at_price&&r.jsxs("span",{className:"ml-2 line-through text-gray-400",children:["$",B.compare_at_price.toFixed(2)]})]})]}),r.jsx("button",{onClick:()=>be(B.id),disabled:ee.isPending,className:"p-2 text-red-500 hover:text-red-700 hover:bg-red-50 rounded-lg transition-colors",title:"Delete variant",children:r.jsx(xo,{className:"h-4 w-4"})})]},B.id))})})]})}),g&&p&&r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-[60] p-4",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-xl max-w-md w-full",children:[r.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[r.jsx("h2",{className:"text-xl font-bold text-gray-900",children:"Add Variant"}),r.jsx("button",{onClick:()=>x(!1),className:"p-2 hover:bg-gray-100 rounded-lg transition-colors",children:r.jsx(lr,{className:"h-5 w-5 text-gray-500"})})]}),r.jsxs("form",{onSubmit:U,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Label *"}),r.jsx("input",{type:"text",value:E.label,onChange:B=>R(re=>({...re,label:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"e.g., 100 cards",required:!0})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Quantity *"}),r.jsx("input",{type:"number",min:"1",value:E.quantity,onChange:B=>R(re=>({...re,quantity:parseInt(B.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",required:!0})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Unit Price ($)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:E.unit_price,onChange:B=>R(re=>({...re,unit_price:parseFloat(B.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Total Price ($)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:E.total_price,onChange:B=>R(re=>({...re,total_price:parseFloat(B.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Compare At Price ($)"}),r.jsx("input",{type:"number",step:"0.01",min:"0",value:E.compare_at_price||"",onChange:B=>R(re=>({...re,compare_at_price:B.target.value?parseFloat(B.target.value):null})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"Optional"})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Discount Label"}),r.jsx("input",{type:"text",value:E.discount_label,onChange:B=>R(re=>({...re,discount_label:B.target.value})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent",placeholder:"e.g., Save 20%"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Sort Order"}),r.jsx("input",{type:"number",value:E.sort_order,onChange:B=>R(re=>({...re,sort_order:parseInt(B.target.value)||0})),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:outline-none focus:ring-2 focus:ring-yellow-400 focus:border-transparent"})]})]}),r.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:()=>x(!1),className:"px-4 py-2 text-gray-700 hover:bg-gray-100 rounded-lg transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:H.isPending,className:"px-6 py-2 bg-yellow-400 text-black rounded-lg font-semibold hover:bg-yellow-500 transition-colors disabled:opacity-50",children:H.isPending?"Creating...":"Add Variant"})]})]})]})})]})},ZV=()=>{const e=Le(),[t,n]=Ye(),s=et(),a=ae($=>$.authentication_state.auth_token);ae($=>$.authentication_state.current_user);const i=ae($=>$.authentication_state.authentication_status.is_authenticated),o=ae($=>$.feature_flags.feature_inventory_enabled),l=ae($=>$.show_toast),[c,d]=k.useState(t.get("status")||null),[m,u]=k.useState(t.get("category")||null),[h,f]=k.useState(!1),[b,g]=k.useState(!1),[x,p]=k.useState(!1),[y,v]=k.useState(null),[N,w]=k.useState({sku:"",name:"",unit:"",qty_on_hand:"0",reorder_point:"0",reorder_qty:"0",supplier_name:"",cost_per_unit:"0"}),[j,_]=k.useState({qty_on_hand:"0",reorder_point:"0",reorder_qty:"0",cost_per_unit:"0",is_active:!0}),[S,T]=k.useState({});k.useEffect(()=>{o||(l({type:"error",message:"Inventory features are not enabled. Enable in Settings > Features.",duration:5e3}),e("/admin"))},[o,e,l]),k.useEffect(()=>{const $={};c&&($.status=c),m&&($.category=m),n($,{replace:!0})},[c,m,n]);const A=async()=>{if(!a)throw new Error("No auth token");const $={};return c==="low_stock"&&($.low_stock=!0),(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/inventory-items",{headers:{Authorization:`Bearer ${a}`},params:$})).data},E=async $=>{if(!a)throw new Error("No auth token");return(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/inventory-transactions",{headers:{Authorization:`Bearer ${a}`},params:{inventory_item_id:$}})).data},R=async $=>{if(!a)throw new Error("No auth token");return(await te.post("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/inventory-items",$,{headers:{Authorization:`Bearer ${a}`}})).data},I=async $=>{if(!a)throw new Error("No auth token");return(await te.patch(`https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/inventory-items/${$.itemId}`,$.data,{headers:{Authorization:`Bearer ${a}`}})).data},{data:O=[],isLoading:L,error:F}=pe({queryKey:["inventory-items",{status:c,category:m}],queryFn:A,enabled:!!a&&i&&o,staleTime:3e4,refetchOnWindowFocus:!1}),{data:M=[],isLoading:D}=pe({queryKey:["inventory-transactions",y],queryFn:()=>E(y),enabled:!!y&&x,staleTime:6e4}),W=ve({mutationFn:R,onSuccess:()=>{s.invalidateQueries({queryKey:["inventory-items"]}),f(!1),ne(),l({type:"success",message:"Inventory item created successfully",duration:5e3})},onError:$=>{var C,U;l({type:"error",message:((U=(C=$.response)==null?void 0:C.data)==null?void 0:U.message)||"Failed to create inventory item",duration:5e3})}}),P=ve({mutationFn:I,onSuccess:()=>{s.invalidateQueries({queryKey:["inventory-items"]}),g(!1),v(null),l({type:"success",message:"Inventory item updated successfully",duration:5e3})},onError:$=>{var C,U;l({type:"error",message:((U=(C=$.response)==null?void 0:C.data)==null?void 0:U.message)||"Failed to update inventory item",duration:5e3})}}),V=O.filter($=>c==="in_stock"?$.stock_status==="in_stock":c==="low_stock"?$.stock_status==="low_stock":c==="out_of_stock"?$.stock_status==="out_of_stock":!0),K={total_items:O.length,low_stock_count:O.filter($=>$.stock_status==="low_stock").length,out_of_stock_count:O.filter($=>$.stock_status==="out_of_stock").length,total_value:O.reduce(($,C)=>$+Number(C.item.qty_on_hand)*Number(C.item.cost_per_unit),0)},ne=()=>{w({sku:"",name:"",unit:"",qty_on_hand:"0",reorder_point:"0",reorder_qty:"0",supplier_name:"",cost_per_unit:"0"}),T({})},G=()=>{const $={};return N.sku.trim()||($.sku="SKU is required"),N.name.trim()||($.name="Name is required"),N.unit.trim()||($.unit="Unit is required"),parseFloat(N.qty_on_hand)<0&&($.qty_on_hand="Quantity must be non-negative"),parseFloat(N.reorder_point)<0&&($.reorder_point="Reorder point must be non-negative"),parseFloat(N.reorder_qty)<0&&($.reorder_qty="Reorder quantity must be non-negative"),parseFloat(N.cost_per_unit)<0&&($.cost_per_unit="Cost must be non-negative"),T($),Object.keys($).length===0},oe=$=>{if($.preventDefault(),!G())return;const C={sku:N.sku.trim(),name:N.name.trim(),unit:N.unit.trim(),qty_on_hand:parseFloat(N.qty_on_hand),reorder_point:parseFloat(N.reorder_point),reorder_qty:parseFloat(N.reorder_qty),supplier_name:N.supplier_name.trim()||null,cost_per_unit:parseFloat(N.cost_per_unit)};W.mutate(C)},H=$=>{if($.preventDefault(),!y)return;const C={qty_on_hand:parseFloat(j.qty_on_hand),reorder_point:parseFloat(j.reorder_point),reorder_qty:parseFloat(j.reorder_qty),cost_per_unit:parseFloat(j.cost_per_unit),is_active:j.is_active};P.mutate({itemId:y,data:C})},ee=$=>{v($.id),_({qty_on_hand:$.qty_on_hand.toString(),reorder_point:$.reorder_point.toString(),reorder_qty:$.reorder_qty.toString(),cost_per_unit:$.cost_per_unit.toString(),is_active:$.is_active}),g(!0)},J=$=>{v($),p(!0)},X=$=>{switch($){case"in_stock":return"bg-green-100 text-green-800 border-green-200";case"low_stock":return"bg-orange-100 text-orange-800 border-orange-200";case"out_of_stock":return"bg-red-100 text-red-800 border-red-200";default:return"bg-gray-100 text-gray-800 border-gray-200"}},se=$=>{switch($){case"in_stock":return"In Stock";case"low_stock":return"Low Stock";case"out_of_stock":return"Out of Stock";default:return"Unknown"}};return o?r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Inventory Management"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Track materials, monitor stock levels, and manage reorder points"})]}),r.jsxs("button",{onClick:()=>f(!0),className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-black bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 transition-colors",children:[r.jsx("svg",{className:"h-5 w-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Add Inventory Item"]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2 lg:grid-cols-4",children:[r.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Items"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:K.total_items})]}),r.jsx("div",{className:"h-12 w-12 bg-blue-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Low Stock"}),r.jsx("p",{className:"text-3xl font-bold text-orange-600 mt-2",children:K.low_stock_count})]}),r.jsx("div",{className:"h-12 w-12 bg-orange-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"h-6 w-6 text-orange-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Out of Stock"}),r.jsx("p",{className:"text-3xl font-bold text-red-600 mt-2",children:K.out_of_stock_count})]}),r.jsx("div",{className:"h-12 w-12 bg-red-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"h-6 w-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsx("div",{className:"bg-white rounded-lg shadow-md border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Value"}),r.jsxs("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:["",Number(K.total_value||0).toFixed(2)]})]}),r.jsx("div",{className:"h-12 w-12 bg-green-100 rounded-lg flex items-center justify-center",children:r.jsx("svg",{className:"h-6 w-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),r.jsxs("div",{className:"mt-8 bg-white rounded-lg shadow-md border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{className:"flex space-x-2",children:[r.jsx("button",{onClick:()=>d(null),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c===null?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Items"}),r.jsx("button",{onClick:()=>d("in_stock"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c==="in_stock"?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"In Stock"}),r.jsxs("button",{onClick:()=>d("low_stock"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c==="low_stock"?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Low Stock",K.low_stock_count>0&&r.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-orange-600 text-white",children:K.low_stock_count})]}),r.jsxs("button",{onClick:()=>d("out_of_stock"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors ${c==="out_of_stock"?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:["Out of Stock",K.out_of_stock_count>0&&r.jsx("span",{className:"ml-2 inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-red-600 text-white",children:K.out_of_stock_count})]})]}),r.jsxs(ie,{to:"/admin/inventory/consumption",className:"inline-flex items-center px-4 py-2 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:["Consumption Rules",r.jsx("svg",{className:"ml-2 h-4 w-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})]}),L&&r.jsx("div",{className:"space-y-4",children:[1,2,3,4,5].map($=>r.jsxs("div",{className:"animate-pulse flex space-x-4 p-4 bg-gray-50 rounded-lg",children:[r.jsx("div",{className:"h-10 w-10 bg-gray-300 rounded"}),r.jsxs("div",{className:"flex-1 space-y-2",children:[r.jsx("div",{className:"h-4 bg-gray-300 rounded w-3/4"}),r.jsx("div",{className:"h-4 bg-gray-300 rounded w-1/2"})]})]},$))}),F&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-red-600 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-red-700 font-medium",children:"Failed to load inventory items"}),r.jsx("p",{className:"text-red-600 text-sm mt-2",children:F==null?void 0:F.message})]}),!L&&!F&&V.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 7l-8-4-8 4m16 0l-8 4m8-4v10l-8 4m0-10L4 7m8 4v10M4 7v10l8 4"})}),r.jsx("p",{className:"text-gray-600 font-medium mb-2",children:"No inventory items found"}),r.jsx("p",{className:"text-gray-500 text-sm mb-6",children:c?"Try adjusting your filters or add your first inventory item":"Add your first inventory item to get started"}),r.jsx("button",{onClick:()=>f(!0),className:"inline-flex items-center px-6 py-3 border border-transparent text-base font-medium rounded-lg text-black bg-yellow-400 hover:bg-yellow-500 transition-colors",children:"Add Inventory Item"})]}),!L&&!F&&V.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"SKU"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Item Name"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Unit"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Qty on Hand"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reorder Point"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Supplier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map($=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:$.item.sku}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:$.item.name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:$.item.unit}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsx("span",{className:`font-semibold ${$.stock_status==="out_of_stock"?"text-red-600":$.stock_status==="low_stock"?"text-orange-600":"text-green-600"}`,children:Number($.item.qty_on_hand||0).toFixed(2)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:Number($.item.reorder_point||0).toFixed(2)}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium border ${X($.stock_status)}`,children:se($.stock_status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:$.item.supplier_name||"-"}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("button",{onClick:()=>ee($.item),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Edit"}),r.jsx("button",{onClick:()=>J($.item.id),className:"inline-flex items-center px-3 py-1 border border-gray-300 rounded-md text-xs font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"History"})]})})]},$.item.id))})]})})]}),r.jsxs("div",{className:"mt-8 grid grid-cols-1 gap-6 sm:grid-cols-2",children:[r.jsx(ie,{to:"/admin/inventory/consumption",className:"block bg-white rounded-lg shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Consumption Rules"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Configure material consumption formulas for services"})]}),r.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})}),r.jsx(ie,{to:"/admin/inventory/purchase-orders",className:"block bg-white rounded-lg shadow-md border border-gray-200 p-6 hover:shadow-lg transition-shadow",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Purchase Orders"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Manage purchase orders and restock inventory"})]}),r.jsx("svg",{className:"h-8 w-8 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})})]})]}),h&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:()=>{f(!1),ne()}}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:r.jsxs("form",{onSubmit:oe,children:[r.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Add Inventory Item"}),r.jsx("button",{type:"button",onClick:()=>{f(!1),ne()},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"sku",className:"block text-sm font-medium text-gray-700 mb-2",children:["SKU ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"text",id:"sku",required:!0,value:N.sku,onChange:$=>{w({...N,sku:$.target.value}),T({...S,sku:""})},className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"e.g., PV-ROLL-001"}),S.sku&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.sku})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"name",className:"block text-sm font-medium text-gray-700 mb-2",children:["Item Name ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"text",id:"name",required:!0,value:N.name,onChange:$=>{w({...N,name:$.target.value}),T({...S,name:""})},className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"e.g., Premium Vinyl Roll"}),S.name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"unit",className:"block text-sm font-medium text-gray-700 mb-2",children:["Unit ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"text",id:"unit",required:!0,value:N.unit,onChange:$=>{w({...N,unit:$.target.value}),T({...S,unit:""})},className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"e.g., roll, sheet, liter"}),S.unit&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.unit})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"qty_on_hand",className:"block text-sm font-medium text-gray-700 mb-2",children:["Quantity on Hand ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"number",id:"qty_on_hand",required:!0,min:"0",step:"0.01",value:N.qty_on_hand,onChange:$=>{w({...N,qty_on_hand:$.target.value}),T({...S,qty_on_hand:""})},className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"0.00"}),S.qty_on_hand&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.qty_on_hand})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"reorder_point",className:"block text-sm font-medium text-gray-700 mb-2",children:["Reorder Point ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"number",id:"reorder_point",required:!0,min:"0",step:"0.01",value:N.reorder_point,onChange:$=>{w({...N,reorder_point:$.target.value}),T({...S,reorder_point:""})},className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"0.00"}),S.reorder_point&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.reorder_point})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"reorder_qty",className:"block text-sm font-medium text-gray-700 mb-2",children:["Reorder Quantity ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"number",id:"reorder_qty",required:!0,min:"0",step:"0.01",value:N.reorder_qty,onChange:$=>{w({...N,reorder_qty:$.target.value}),T({...S,reorder_qty:""})},className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"0.00"}),S.reorder_qty&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.reorder_qty})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"supplier_name",className:"block text-sm font-medium text-gray-700 mb-2",children:"Supplier Name"}),r.jsx("input",{type:"text",id:"supplier_name",value:N.supplier_name,onChange:$=>w({...N,supplier_name:$.target.value}),className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"e.g., Acme Supplies"})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"cost_per_unit",className:"block text-sm font-medium text-gray-700 mb-2",children:["Cost per Unit () ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"number",id:"cost_per_unit",required:!0,min:"0",step:"0.01",value:N.cost_per_unit,onChange:$=>{w({...N,cost_per_unit:$.target.value}),T({...S,cost_per_unit:""})},className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"0.00"}),S.cost_per_unit&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:S.cost_per_unit})]})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>{f(!1),ne()},className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:W.isPending,className:"px-6 py-3 border border-transparent rounded-lg text-sm font-medium text-black bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:W.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Item"})]})]})})]})}),b&&y&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:()=>{g(!1),v(null)}}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:r.jsxs("form",{onSubmit:H,children:[r.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Edit Inventory Item"}),r.jsx("button",{type:"button",onClick:()=>{g(!1),v(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"grid grid-cols-1 gap-6 sm:grid-cols-2",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit_qty_on_hand",className:"block text-sm font-medium text-gray-700 mb-2",children:"Quantity on Hand"}),r.jsx("input",{type:"number",id:"edit_qty_on_hand",required:!0,min:"0",step:"0.01",value:j.qty_on_hand,onChange:$=>_({...j,qty_on_hand:$.target.value}),className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit_reorder_point",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder Point"}),r.jsx("input",{type:"number",id:"edit_reorder_point",required:!0,min:"0",step:"0.01",value:j.reorder_point,onChange:$=>_({...j,reorder_point:$.target.value}),className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit_reorder_qty",className:"block text-sm font-medium text-gray-700 mb-2",children:"Reorder Quantity"}),r.jsx("input",{type:"number",id:"edit_reorder_qty",required:!0,min:"0",step:"0.01",value:j.reorder_qty,onChange:$=>_({...j,reorder_qty:$.target.value}),className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"edit_cost_per_unit",className:"block text-sm font-medium text-gray-700 mb-2",children:"Cost per Unit ()"}),r.jsx("input",{type:"number",id:"edit_cost_per_unit",required:!0,min:"0",step:"0.01",value:j.cost_per_unit,onChange:$=>_({...j,cost_per_unit:$.target.value}),className:"block w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsx("div",{className:"sm:col-span-2",children:r.jsxs("label",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",checked:j.is_active,onChange:$=>_({...j,is_active:$.target.checked}),className:"h-5 w-5 text-yellow-400 focus:ring-yellow-500 border-gray-300 rounded"}),r.jsx("span",{className:"ml-3 text-sm font-medium text-gray-700",children:"Item is active"})]})})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end space-x-3",children:[r.jsx("button",{type:"button",onClick:()=>{g(!1),v(null)},className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:P.isPending,className:"px-6 py-3 border border-transparent rounded-lg text-sm font-medium text-black bg-yellow-400 hover:bg-yellow-500 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-yellow-500 disabled:opacity-50 disabled:cursor-not-allowed transition-all",children:P.isPending?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-black",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Updating..."]}):"Update Item"})]})]})})]})}),x&&y&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex items-center justify-center min-h-screen pt-4 px-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:()=>{p(!1),v(null)}}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-xl text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-4xl sm:w-full",children:[r.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Transaction History"}),r.jsx("button",{type:"button",onClick:()=>{p(!1),v(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"h-6 w-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),D&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-yellow-400"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading transaction history..."})]}),!D&&M.length===0&&r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-16 w-16 text-gray-400 mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-600 font-medium",children:"No transaction history"}),r.jsx("p",{className:"text-gray-500 text-sm mt-2",children:"This item has no recorded transactions yet"})]}),!D&&M.length>0&&r.jsx("div",{className:"overflow-x-auto max-h-96",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50 sticky top-0",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Type"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Quantity"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Reference"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Notes"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:M.map($=>r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900",children:new Date($.created_at).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${$.transaction_type==="ADDITION"?"bg-green-100 text-green-800":$.transaction_type==="CONSUMPTION"?"bg-red-100 text-red-800":"bg-blue-100 text-blue-800"}`,children:$.transaction_type})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm",children:r.jsxs("span",{className:`font-semibold ${$.transaction_type==="ADDITION"?"text-green-600":$.transaction_type==="CONSUMPTION"?"text-red-600":"text-blue-600"}`,children:[$.transaction_type==="ADDITION"?"+":$.transaction_type==="CONSUMPTION"?"-":"",Number($.qty||0).toFixed(2)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:$.reference_type&&$.reference_id?`${$.reference_type}: ${$.reference_id}`:"-"}),r.jsx("td",{className:"px-6 py-4 text-sm text-gray-600",children:$.notes||"-"})]},$.id))})]})})]}),r.jsx("div",{className:"bg-gray-50 px-6 py-4 flex items-center justify-end",children:r.jsx("button",{type:"button",onClick:()=>{p(!1),v(null)},className:"px-6 py-3 border border-gray-300 rounded-lg text-sm font-medium text-gray-700 bg-white hover:bg-gray-50 transition-colors",children:"Close"})})]})]})})]})}):null},eH=()=>{const[e,t]=Ye(),n=Le(),s=et(),a=ae(q=>q.authentication_state.auth_token);ae(q=>q.authentication_state.current_user);const i=ae(q=>q.feature_flags.feature_inventory_enabled),o=ae(q=>q.show_toast),[l,c]=k.useState(e.get("status")),[d,m]=k.useState(!1),[u,h]=k.useState(!1),[f,b]=k.useState(null),[g,x]=k.useState({supplier_name:"",items:[],notes:""}),[p,y]=k.useState({});k.useEffect(()=>{i||(o({type:"error",message:"Inventory features are not enabled. Enable in Settings.",duration:5e3}),n("/admin"))},[i,n,o]),k.useEffect(()=>{const q=e.get("status");q!==l&&c(q)},[e]);const v="https://123project-build-a-production-ready-w.launchpulse.ai",N=async()=>{const q={};return l&&(q.status=l),(await te.get(`${v}/api/admin/purchase-orders`,{headers:{Authorization:`Bearer ${a}`},params:q})).data.map(he=>({id:he.purchase_order.id,supplier_name:he.purchase_order.supplier_name,status:he.purchase_order.status,ordered_at:he.purchase_order.ordered_at,received_at:he.purchase_order.received_at,notes:he.purchase_order.notes,created_at:he.purchase_order.created_at,updated_at:he.purchase_order.updated_at,items_count:he.items.length,total_cost:he.items.reduce((le,be)=>le+Number(be.qty)*Number(be.unit_cost),0)}))},w=async()=>(await te.get(`${v}/api/admin/inventory-items`,{headers:{Authorization:`Bearer ${a}`},params:{is_active:!0,low_stock:!0}})).data,j=async q=>{const he=(await te.get(`${v}/api/admin/purchase-orders`,{headers:{Authorization:`Bearer ${a}`}})).data.find(z=>z.purchase_order.id===q);if(!he)throw new Error("Purchase order not found");const le=await te.get(`${v}/api/admin/inventory-items`,{headers:{Authorization:`Bearer ${a}`}}),be=he.items.map(z=>{const B=le.data.find(re=>re.id===z.inventory_item_id);return{...z,item_name:(B==null?void 0:B.name)||"Unknown Item",sku:(B==null?void 0:B.sku)||"N/A"}});return{po:he.purchase_order,items:be}},{data:_=[],isLoading:S,error:T,refetch:A}=pe({queryKey:["purchase-orders",l],queryFn:N,enabled:!!a&&i,staleTime:6e4,refetchOnWindowFocus:!1}),{data:E=[],isLoading:R}=pe({queryKey:["inventory-items-for-po"],queryFn:w,enabled:d&&!!a,staleTime:3e5}),{data:I,isLoading:O}=pe({queryKey:["purchase-order-detail",f],queryFn:()=>j(f),enabled:!!f&&u&&!!a}),L=ve({mutationFn:async q=>(await te.post(`${v}/api/admin/purchase-orders`,q,{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["purchase-orders"]}),o({type:"success",message:"Purchase order created successfully",duration:5e3}),m(!1),D()},onError:q=>{var de,he;o({type:"error",message:((he=(de=q.response)==null?void 0:de.data)==null?void 0:he.message)||"Failed to create purchase order",duration:5e3})}}),F=ve({mutationFn:async({poId:q,payload:de})=>(await te.patch(`${v}/api/admin/purchase-orders/${q}`,de,{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["purchase-orders"]}),s.invalidateQueries({queryKey:["purchase-order-detail"]}),s.invalidateQueries({queryKey:["inventory-items"]}),o({type:"success",message:"Purchase order status updated successfully",duration:5e3}),h(!1),b(null)},onError:q=>{var de,he;o({type:"error",message:((he=(de=q.response)==null?void 0:de.data)==null?void 0:he.message)||"Failed to update purchase order",duration:5e3})}}),M=q=>{c(q),t(q?{status:q}:{})},D=()=>{x({supplier_name:"",items:[],notes:""}),y({})},W=()=>{D(),m(!0)},P=()=>{m(!1),D()},V=q=>{const de=E.find(he=>he.id===q);if(de){if(g.items.some(he=>he.inventory_item_id===q)){o({type:"warning",message:"Item already added to purchase order",duration:3e3});return}x(he=>({...he,items:[...he.items,{inventory_item_id:q,qty:de.reorder_qty||1,unit_cost:de.cost_per_unit||0}]}))}},K=(q,de,he)=>{x(le=>({...le,items:le.items.map((be,z)=>z===q?{...be,[de]:he}:be)}))},ne=q=>{x(de=>({...de,items:de.items.filter((he,le)=>le!==q)}))},G=()=>{const q={};return g.supplier_name.trim()||(q.supplier_name="Supplier name is required"),g.items.length===0&&(q.items="At least one item is required"),y(q),Object.keys(q).length===0},oe=()=>{G()&&L.mutate({supplier_name:g.supplier_name.trim(),notes:g.notes.trim()||null})},H=q=>{b(q),h(!0)},ee=q=>{F.mutate({poId:q,payload:{status:"ORDERED",ordered_at:new Date().toISOString()}})},J=q=>{F.mutate({poId:q,payload:{status:"RECEIVED",received_at:new Date().toISOString()}})},X=q=>{F.mutate({poId:q,payload:{status:"CANCELLED"}})},se={total_pos:_.length,draft_count:_.filter(q=>q.status==="DRAFT").length,ordered_count:_.filter(q=>q.status==="ORDERED").length,total_pending_value:_.filter(q=>q.status==="DRAFT"||q.status==="ORDERED").reduce((q,de)=>q+Number(de.total_cost||0),0)},$=q=>{switch(q){case"DRAFT":return"bg-gray-100 text-gray-800";case"ORDERED":return"bg-yellow-100 text-yellow-800";case"RECEIVED":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},C=q=>q?new Date(q).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",U=q=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(Number(q||0));return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Purchase Orders"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Manage inventory replenishment and supplier orders"})]}),r.jsxs("button",{onClick:W,className:"inline-flex items-center px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors shadow-lg",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create Purchase Order"]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total POs"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:se.total_pos})]}),r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-8 h-8 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Draft"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900 mt-2",children:se.draft_count})]}),r.jsx("div",{className:"p-3 bg-gray-100 rounded-lg",children:r.jsx("svg",{className:"w-8 h-8 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Ordered"}),r.jsx("p",{className:"text-3xl font-bold text-yellow-600 mt-2",children:se.ordered_count})]}),r.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:r.jsx("svg",{className:"w-8 h-8 text-yellow-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Pending Value"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-2",children:U(se.total_pending_value)})]}),r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx("svg",{className:"w-8 h-8 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-4 mb-6",children:r.jsxs("div",{className:"flex flex-wrap gap-2",children:[r.jsx("button",{onClick:()=>M(null),className:`px-4 py-2 rounded-lg font-medium transition-all ${l?"bg-gray-100 text-gray-700 hover:bg-gray-200":"bg-yellow-400 text-black"}`,children:"All"}),r.jsx("button",{onClick:()=>M("DRAFT"),className:`px-4 py-2 rounded-lg font-medium transition-all ${l==="DRAFT"?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Draft"}),r.jsx("button",{onClick:()=>M("ORDERED"),className:`px-4 py-2 rounded-lg font-medium transition-all ${l==="ORDERED"?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Ordered"}),r.jsx("button",{onClick:()=>M("RECEIVED"),className:`px-4 py-2 rounded-lg font-medium transition-all ${l==="RECEIVED"?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Received"}),r.jsx("button",{onClick:()=>M("CANCELLED"),className:`px-4 py-2 rounded-lg font-medium transition-all ${l==="CANCELLED"?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Cancelled"})]})}),S?r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12",children:r.jsxs("div",{className:"flex flex-col items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin h-12 w-12 text-yellow-400",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading purchase orders..."})]})}):T?r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-red-500 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Error Loading Purchase Orders"}),r.jsx("p",{className:"text-gray-600 mb-4",children:T.message||"Failed to load data"}),r.jsx("button",{onClick:()=>A(),className:"px-6 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors",children:"Retry"})]})}):_.length===0?r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-12",children:r.jsxs("div",{className:"text-center",children:[r.jsx("svg",{className:"w-20 h-20 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No Purchase Orders Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:l?`No purchase orders with status "${l}"`:"Get started by creating your first purchase order"}),!l&&r.jsx("button",{onClick:W,className:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors",children:"Create Purchase Order"})]})}):r.jsxs(r.Fragment,{children:[r.jsx("div",{className:"hidden lg:block bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"PO Number"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Supplier"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Items"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Total Cost"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Created"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:_.map(q=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:["PO-",q.id.slice(0,8).toUpperCase()]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-900",children:q.supplier_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("span",{className:"text-sm text-gray-600",children:[q.items_count," items"]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${$(q.status)}`,children:q.status})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:U(q.total_cost)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-600",children:C(q.created_at)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsxs("div",{className:"flex items-center justify-end gap-2",children:[r.jsx("button",{onClick:()=>H(q.id),className:"text-blue-600 hover:text-blue-900 transition-colors",title:"View Details",children:r.jsxs("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 12a3 3 0 11-6 0 3 3 0 016 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M2.458 12C3.732 7.943 7.523 5 12 5c4.478 0 8.268 2.943 9.542 7-1.274 4.057-5.064 7-9.542 7-4.477 0-8.268-2.943-9.542-7z"})]})}),q.status==="DRAFT"&&r.jsx("button",{onClick:()=>ee(q.id),className:"text-yellow-600 hover:text-yellow-900 transition-colors",title:"Mark as Ordered",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})}),q.status==="ORDERED"&&r.jsx("button",{onClick:()=>J(q.id),className:"text-green-600 hover:text-green-900 transition-colors",title:"Mark as Received",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 13l4 4L19 7"})})}),(q.status==="DRAFT"||q.status==="ORDERED")&&r.jsx("button",{onClick:()=>X(q.id),className:"text-red-600 hover:text-red-900 transition-colors",title:"Cancel PO",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})})]},q.id))})]})}),r.jsx("div",{className:"lg:hidden space-y-4",children:_.map(q=>r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{children:[r.jsxs("p",{className:"text-xs text-gray-500 mb-1",children:["PO-",q.id.slice(0,8).toUpperCase()]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:q.supplier_name})]}),r.jsx("span",{className:`px-3 py-1 text-xs font-semibold rounded-full ${$(q.status)}`,children:q.status})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Items"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:q.items_count})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Total Cost"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:U(q.total_cost)})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Created"}),r.jsx("p",{className:"text-sm text-gray-900",children:C(q.created_at)})]}),q.ordered_at&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Ordered"}),r.jsx("p",{className:"text-sm text-gray-900",children:C(q.ordered_at)})]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx("button",{onClick:()=>H(q.id),className:"flex-1 px-4 py-2 bg-gray-100 hover:bg-gray-200 text-gray-900 font-medium rounded-lg transition-colors",children:"View Details"}),q.status==="DRAFT"&&r.jsx("button",{onClick:()=>ee(q.id),className:"flex-1 px-4 py-2 bg-yellow-400 hover:bg-yellow-500 text-black font-medium rounded-lg transition-colors",children:"Mark Ordered"}),q.status==="ORDERED"&&r.jsx("button",{onClick:()=>J(q.id),className:"flex-1 px-4 py-2 bg-green-600 hover:bg-green-700 text-white font-medium rounded-lg transition-colors",children:"Receive"})]})]},q.id))})]})]})]}),d&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:P}),r.jsxs("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-2xl sm:w-full",children:[r.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h3",{className:"text-2xl font-bold text-gray-900",children:"Create Purchase Order"}),r.jsx("button",{onClick:P,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"supplier_name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Supplier Name ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),r.jsx("input",{id:"supplier_name",type:"text",value:g.supplier_name,onChange:q=>{x(de=>({...de,supplier_name:q.target.value})),y(de=>({...de,supplier_name:void 0}))},placeholder:"Enter supplier name",className:`w-full px-4 py-3 rounded-lg border-2 transition-all ${p.supplier_name?"border-red-500 focus:border-red-500 focus:ring-4 focus:ring-red-100":"border-gray-200 focus:border-yellow-500 focus:ring-4 focus:ring-yellow-100"}`}),p.supplier_name&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:p.supplier_name})]}),r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-semibold text-gray-900 mb-2",children:["Items ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),R?r.jsxs("div",{className:"text-center py-4",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 text-yellow-400 mx-auto",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"text-sm text-gray-600 mt-2",children:"Loading inventory items..."})]}):r.jsxs(r.Fragment,{children:[r.jsxs("select",{onChange:q=>{q.target.value&&(V(q.target.value),q.target.value="")},className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-500 focus:ring-4 focus:ring-yellow-100 mb-4",children:[r.jsx("option",{value:"",children:"Select item to add..."}),E.map(q=>r.jsxs("option",{value:q.id,children:[q.name," (",q.sku,") - ",q.qty_on_hand," ",q.unit," on hand"]},q.id))]}),g.items.length===0?r.jsxs("div",{className:"border-2 border-dashed border-gray-200 rounded-lg p-6 text-center",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M20 13V6a2 2 0 00-2-2H6a2 2 0 00-2 2v7m16 0v5a2 2 0 01-2 2H6a2 2 0 01-2-2v-5m16 0h-2.586a1 1 0 00-.707.293l-2.414 2.414a1 1 0 01-.707.293h-3.172a1 1 0 01-.707-.293l-2.414-2.414A1 1 0 006.586 13H4"})}),r.jsx("p",{className:"text-sm text-gray-600",children:"No items added yet"})]}):r.jsx("div",{className:"space-y-3",children:g.items.map((q,de)=>{const he=E.find(le=>le.id===q.inventory_item_id);return r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("p",{className:"font-semibold text-gray-900",children:he==null?void 0:he.name}),r.jsxs("p",{className:"text-xs text-gray-500",children:["SKU: ",he==null?void 0:he.sku]})]}),r.jsx("button",{onClick:()=>ne(de),className:"text-red-600 hover:text-red-900",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:["Quantity (",he==null?void 0:he.unit,")"]}),r.jsx("input",{type:"number",min:"1",value:q.qty,onChange:le=>K(de,"qty",parseFloat(le.target.value)||0),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-100"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-medium text-gray-700 mb-1",children:"Unit Cost ()"}),r.jsx("input",{type:"number",min:"0",step:"0.01",value:q.unit_cost,onChange:le=>K(de,"unit_cost",parseFloat(le.target.value)||0),className:"w-full px-3 py-2 rounded-lg border-2 border-gray-200 focus:border-yellow-500 focus:ring-2 focus:ring-yellow-100"})]})]}),r.jsx("div",{className:"mt-2 text-right",children:r.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:["Subtotal: ",U(Number(q.qty)*Number(q.unit_cost))]})})]},de)})}),p.items&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:p.items})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"notes",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Notes (Optional)"}),r.jsx("textarea",{id:"notes",rows:3,value:g.notes,onChange:q=>x(de=>({...de,notes:q.target.value})),placeholder:"Add any additional notes or instructions...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-yellow-500 focus:ring-4 focus:ring-yellow-100"})]}),g.items.length>0&&r.jsx("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:"Total PO Value:"}),r.jsx("span",{className:"text-2xl font-bold text-gray-900",children:U(g.items.reduce((q,de)=>q+Number(de.qty)*Number(de.unit_cost),0))})]})})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 sm:flex sm:flex-row-reverse gap-3",children:[r.jsx("button",{onClick:oe,disabled:L.isPending,className:"w-full sm:w-auto inline-flex justify-center items-center px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:L.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Purchase Order"}),r.jsx("button",{onClick:P,className:"mt-3 w-full sm:mt-0 sm:w-auto inline-flex justify-center px-6 py-3 bg-white hover:bg-gray-100 text-gray-900 font-medium rounded-lg border-2 border-gray-300 transition-colors",children:"Cancel"})]})]})]})}),u&&f&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"detail-modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex min-h-screen items-end justify-center px-4 pt-4 pb-20 text-center sm:block sm:p-0",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-500 bg-opacity-75 transition-opacity",onClick:()=>{h(!1),b(null)}}),r.jsx("div",{className:"inline-block align-bottom bg-white rounded-lg text-left overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-3xl sm:w-full",children:O?r.jsx("div",{className:"p-12",children:r.jsxs("div",{className:"flex flex-col items-center justify-center",children:[r.jsxs("svg",{className:"animate-spin h-12 w-12 text-yellow-400",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading details..."})]})}):I?r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"bg-white px-6 pt-6 pb-4",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-2xl font-bold text-gray-900",children:["PO-",I.po.id.slice(0,8).toUpperCase()]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:I.po.supplier_name})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-4 py-2 text-sm font-semibold rounded-full ${$(I.po.status)}`,children:I.po.status}),r.jsx("button",{onClick:()=>{h(!1),b(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-6 p-4 bg-gray-50 rounded-lg",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Created"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:C(I.po.created_at)})]}),I.po.ordered_at&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Ordered"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:C(I.po.ordered_at)})]}),I.po.received_at&&r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-600",children:"Received"}),r.jsx("p",{className:"text-sm font-semibold text-gray-900",children:C(I.po.received_at)})]})]}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h4",{className:"text-lg font-semibold text-gray-900 mb-3",children:"Items"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"Item"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-semibold text-gray-700 uppercase",children:"SKU"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Qty"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Unit Cost"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-semibold text-gray-700 uppercase",children:"Total"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:I.items.map(q=>r.jsxs("tr",{children:[r.jsx("td",{className:"px-4 py-3 text-sm text-gray-900",children:q.item_name}),r.jsx("td",{className:"px-4 py-3 text-sm text-gray-600",children:q.sku}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:Number(q.qty).toFixed(2)}),r.jsx("td",{className:"px-4 py-3 text-sm text-right text-gray-900",children:U(q.unit_cost)}),r.jsx("td",{className:"px-4 py-3 text-sm text-right font-semibold text-gray-900",children:U(Number(q.qty)*Number(q.unit_cost))})]},q.id))}),r.jsx("tfoot",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("td",{colSpan:4,className:"px-4 py-3 text-sm font-semibold text-gray-900 text-right",children:"Total:"}),r.jsx("td",{className:"px-4 py-3 text-sm font-bold text-gray-900 text-right",children:U(I.items.reduce((q,de)=>q+Number(de.qty)*Number(de.unit_cost),0))})]})})]})})]}),I.po.notes&&r.jsxs("div",{className:"mb-4",children:[r.jsx("h4",{className:"text-sm font-semibold text-gray-900 mb-2",children:"Notes"}),r.jsx("p",{className:"text-sm text-gray-600 bg-gray-50 p-3 rounded-lg",children:I.po.notes})]})]}),r.jsxs("div",{className:"bg-gray-50 px-6 py-4 flex flex-wrap gap-3",children:[I.po.status==="DRAFT"&&r.jsx("button",{onClick:()=>ee(f),disabled:F.isPending,className:"px-6 py-3 bg-yellow-400 hover:bg-yellow-500 text-black font-semibold rounded-lg transition-colors disabled:opacity-50",children:"Mark as Ordered"}),I.po.status==="ORDERED"&&r.jsx("button",{onClick:()=>J(f),disabled:F.isPending,className:"px-6 py-3 bg-green-600 hover:bg-green-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:"Mark as Received"}),(I.po.status==="DRAFT"||I.po.status==="ORDERED")&&r.jsx("button",{onClick:()=>X(f),disabled:F.isPending,className:"px-6 py-3 bg-red-600 hover:bg-red-700 text-white font-semibold rounded-lg transition-colors disabled:opacity-50",children:"Cancel PO"}),r.jsx("button",{onClick:()=>{h(!1),b(null)},className:"ml-auto px-6 py-3 bg-white hover:bg-gray-100 text-gray-900 font-medium rounded-lg border-2 border-gray-300 transition-colors",children:"Close"})]})]}):r.jsx("div",{className:"p-12 text-center",children:r.jsx("p",{className:"text-gray-600",children:"Purchase order not found"})})})]})})]})};var tH=Array.isArray,Or=tH,rH=typeof Iu=="object"&&Iu&&Iu.Object===Object&&Iu,vP=rH,nH=vP,sH=typeof self=="object"&&self&&self.Object===Object&&self,aH=nH||sH||Function("return this")(),Yn=aH,iH=Yn,oH=iH.Symbol,Su=oH,l_=Su,jP=Object.prototype,lH=jP.hasOwnProperty,cH=jP.toString,dc=l_?l_.toStringTag:void 0;function dH(e){var t=lH.call(e,dc),n=e[dc];try{e[dc]=void 0;var s=!0}catch{}var a=cH.call(e);return s&&(t?e[dc]=n:delete e[dc]),a}var uH=dH,mH=Object.prototype,hH=mH.toString;function pH(e){return hH.call(e)}var fH=pH,c_=Su,xH=uH,gH=fH,yH="[object Null]",bH="[object Undefined]",d_=c_?c_.toStringTag:void 0;function vH(e){return e==null?e===void 0?bH:yH:d_&&d_ in Object(e)?xH(e):gH(e)}var As=vH;function jH(e){return e!=null&&typeof e=="object"}var Ps=jH,wH=As,NH=Ps,_H="[object Symbol]";function kH(e){return typeof e=="symbol"||NH(e)&&wH(e)==_H}var Ml=kH,SH=Or,CH=Ml,AH=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,PH=/^\w*$/;function EH(e,t){if(SH(e))return!1;var n=typeof e;return n=="number"||n=="symbol"||n=="boolean"||e==null||CH(e)?!0:PH.test(e)||!AH.test(e)||t!=null&&e in Object(t)}var W1=EH;function OH(e){var t=typeof e;return e!=null&&(t=="object"||t=="function")}var Sa=OH;const Ll=Ke(Sa);var TH=As,MH=Sa,LH="[object AsyncFunction]",$H="[object Function]",RH="[object GeneratorFunction]",IH="[object Proxy]";function DH(e){if(!MH(e))return!1;var t=TH(e);return t==$H||t==RH||t==LH||t==IH}var V1=DH;const Me=Ke(V1);var FH=Yn,BH=FH["__core-js_shared__"],zH=BH,px=zH,u_=function(){var e=/[^.]+$/.exec(px&&px.keys&&px.keys.IE_PROTO||"");return e?"Symbol(src)_1."+e:""}();function qH(e){return!!u_&&u_ in e}var UH=qH,WH=Function.prototype,VH=WH.toString;function HH(e){if(e!=null){try{return VH.call(e)}catch{}try{return e+""}catch{}}return""}var wP=HH,KH=V1,GH=UH,QH=Sa,YH=wP,XH=/[\\^$.*+?()[\]{}|]/g,JH=/^\[object .+?Constructor\]$/,ZH=Function.prototype,eK=Object.prototype,tK=ZH.toString,rK=eK.hasOwnProperty,nK=RegExp("^"+tK.call(rK).replace(XH,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$");function sK(e){if(!QH(e)||GH(e))return!1;var t=KH(e)?nK:JH;return t.test(YH(e))}var aK=sK;function iK(e,t){return e==null?void 0:e[t]}var oK=iK,lK=aK,cK=oK;function dK(e,t){var n=cK(e,t);return lK(n)?n:void 0}var $i=dK,uK=$i,mK=uK(Object,"create"),yp=mK,m_=yp;function hK(){this.__data__=m_?m_(null):{},this.size=0}var pK=hK;function fK(e){var t=this.has(e)&&delete this.__data__[e];return this.size-=t?1:0,t}var xK=fK,gK=yp,yK="__lodash_hash_undefined__",bK=Object.prototype,vK=bK.hasOwnProperty;function jK(e){var t=this.__data__;if(gK){var n=t[e];return n===yK?void 0:n}return vK.call(t,e)?t[e]:void 0}var wK=jK,NK=yp,_K=Object.prototype,kK=_K.hasOwnProperty;function SK(e){var t=this.__data__;return NK?t[e]!==void 0:kK.call(t,e)}var CK=SK,AK=yp,PK="__lodash_hash_undefined__";function EK(e,t){var n=this.__data__;return this.size+=this.has(e)?0:1,n[e]=AK&&t===void 0?PK:t,this}var OK=EK,TK=pK,MK=xK,LK=wK,$K=CK,RK=OK;function $l(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}$l.prototype.clear=TK;$l.prototype.delete=MK;$l.prototype.get=LK;$l.prototype.has=$K;$l.prototype.set=RK;var IK=$l;function DK(){this.__data__=[],this.size=0}var FK=DK;function BK(e,t){return e===t||e!==e&&t!==t}var H1=BK,zK=H1;function qK(e,t){for(var n=e.length;n--;)if(zK(e[n][0],t))return n;return-1}var bp=qK,UK=bp,WK=Array.prototype,VK=WK.splice;function HK(e){var t=this.__data__,n=UK(t,e);if(n<0)return!1;var s=t.length-1;return n==s?t.pop():VK.call(t,n,1),--this.size,!0}var KK=HK,GK=bp;function QK(e){var t=this.__data__,n=GK(t,e);return n<0?void 0:t[n][1]}var YK=QK,XK=bp;function JK(e){return XK(this.__data__,e)>-1}var ZK=JK,eG=bp;function tG(e,t){var n=this.__data__,s=eG(n,e);return s<0?(++this.size,n.push([e,t])):n[s][1]=t,this}var rG=tG,nG=FK,sG=KK,aG=YK,iG=ZK,oG=rG;function Rl(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Rl.prototype.clear=nG;Rl.prototype.delete=sG;Rl.prototype.get=aG;Rl.prototype.has=iG;Rl.prototype.set=oG;var vp=Rl,lG=$i,cG=Yn,dG=lG(cG,"Map"),K1=dG,h_=IK,uG=vp,mG=K1;function hG(){this.size=0,this.__data__={hash:new h_,map:new(mG||uG),string:new h_}}var pG=hG;function fG(e){var t=typeof e;return t=="string"||t=="number"||t=="symbol"||t=="boolean"?e!=="__proto__":e===null}var xG=fG,gG=xG;function yG(e,t){var n=e.__data__;return gG(t)?n[typeof t=="string"?"string":"hash"]:n.map}var jp=yG,bG=jp;function vG(e){var t=bG(this,e).delete(e);return this.size-=t?1:0,t}var jG=vG,wG=jp;function NG(e){return wG(this,e).get(e)}var _G=NG,kG=jp;function SG(e){return kG(this,e).has(e)}var CG=SG,AG=jp;function PG(e,t){var n=AG(this,e),s=n.size;return n.set(e,t),this.size+=n.size==s?0:1,this}var EG=PG,OG=pG,TG=jG,MG=_G,LG=CG,$G=EG;function Il(e){var t=-1,n=e==null?0:e.length;for(this.clear();++t<n;){var s=e[t];this.set(s[0],s[1])}}Il.prototype.clear=OG;Il.prototype.delete=TG;Il.prototype.get=MG;Il.prototype.has=LG;Il.prototype.set=$G;var G1=Il,NP=G1,RG="Expected a function";function Q1(e,t){if(typeof e!="function"||t!=null&&typeof t!="function")throw new TypeError(RG);var n=function(){var s=arguments,a=t?t.apply(this,s):s[0],i=n.cache;if(i.has(a))return i.get(a);var o=e.apply(this,s);return n.cache=i.set(a,o)||i,o};return n.cache=new(Q1.Cache||NP),n}Q1.Cache=NP;var _P=Q1;const IG=Ke(_P);var DG=_P,FG=500;function BG(e){var t=DG(e,function(s){return n.size===FG&&n.clear(),s}),n=t.cache;return t}var zG=BG,qG=zG,UG=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,WG=/\\(\\)?/g,VG=qG(function(e){var t=[];return e.charCodeAt(0)===46&&t.push(""),e.replace(UG,function(n,s,a,i){t.push(a?i.replace(WG,"$1"):s||n)}),t}),HG=VG;function KG(e,t){for(var n=-1,s=e==null?0:e.length,a=Array(s);++n<s;)a[n]=t(e[n],n,e);return a}var Y1=KG,p_=Su,GG=Y1,QG=Or,YG=Ml,f_=p_?p_.prototype:void 0,x_=f_?f_.toString:void 0;function kP(e){if(typeof e=="string")return e;if(QG(e))return GG(e,kP)+"";if(YG(e))return x_?x_.call(e):"";var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var XG=kP,JG=XG;function ZG(e){return e==null?"":JG(e)}var SP=ZG,eQ=Or,tQ=W1,rQ=HG,nQ=SP;function sQ(e,t){return eQ(e)?e:tQ(e,t)?[e]:rQ(nQ(e))}var CP=sQ,aQ=Ml;function iQ(e){if(typeof e=="string"||aQ(e))return e;var t=e+"";return t=="0"&&1/e==-1/0?"-0":t}var wp=iQ,oQ=CP,lQ=wp;function cQ(e,t){t=oQ(t,e);for(var n=0,s=t.length;e!=null&&n<s;)e=e[lQ(t[n++])];return n&&n==s?e:void 0}var X1=cQ,dQ=X1;function uQ(e,t,n){var s=e==null?void 0:dQ(e,t);return s===void 0?n:s}var AP=uQ;const Ur=Ke(AP);function mQ(e){return e==null}var hQ=mQ;const Fe=Ke(hQ);var pQ=As,fQ=Or,xQ=Ps,gQ="[object String]";function yQ(e){return typeof e=="string"||!fQ(e)&&xQ(e)&&pQ(e)==gQ}var bQ=yQ;const Si=Ke(bQ);var PP={exports:{}},Xe={};/**
 * @license React
 * react-is.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var J1=Symbol.for("react.element"),Z1=Symbol.for("react.portal"),Np=Symbol.for("react.fragment"),_p=Symbol.for("react.strict_mode"),kp=Symbol.for("react.profiler"),Sp=Symbol.for("react.provider"),Cp=Symbol.for("react.context"),vQ=Symbol.for("react.server_context"),Ap=Symbol.for("react.forward_ref"),Pp=Symbol.for("react.suspense"),Ep=Symbol.for("react.suspense_list"),Op=Symbol.for("react.memo"),Tp=Symbol.for("react.lazy"),jQ=Symbol.for("react.offscreen"),EP;EP=Symbol.for("react.module.reference");function pn(e){if(typeof e=="object"&&e!==null){var t=e.$$typeof;switch(t){case J1:switch(e=e.type,e){case Np:case kp:case _p:case Pp:case Ep:return e;default:switch(e=e&&e.$$typeof,e){case vQ:case Cp:case Ap:case Tp:case Op:case Sp:return e;default:return t}}case Z1:return t}}}Xe.ContextConsumer=Cp;Xe.ContextProvider=Sp;Xe.Element=J1;Xe.ForwardRef=Ap;Xe.Fragment=Np;Xe.Lazy=Tp;Xe.Memo=Op;Xe.Portal=Z1;Xe.Profiler=kp;Xe.StrictMode=_p;Xe.Suspense=Pp;Xe.SuspenseList=Ep;Xe.isAsyncMode=function(){return!1};Xe.isConcurrentMode=function(){return!1};Xe.isContextConsumer=function(e){return pn(e)===Cp};Xe.isContextProvider=function(e){return pn(e)===Sp};Xe.isElement=function(e){return typeof e=="object"&&e!==null&&e.$$typeof===J1};Xe.isForwardRef=function(e){return pn(e)===Ap};Xe.isFragment=function(e){return pn(e)===Np};Xe.isLazy=function(e){return pn(e)===Tp};Xe.isMemo=function(e){return pn(e)===Op};Xe.isPortal=function(e){return pn(e)===Z1};Xe.isProfiler=function(e){return pn(e)===kp};Xe.isStrictMode=function(e){return pn(e)===_p};Xe.isSuspense=function(e){return pn(e)===Pp};Xe.isSuspenseList=function(e){return pn(e)===Ep};Xe.isValidElementType=function(e){return typeof e=="string"||typeof e=="function"||e===Np||e===kp||e===_p||e===Pp||e===Ep||e===jQ||typeof e=="object"&&e!==null&&(e.$$typeof===Tp||e.$$typeof===Op||e.$$typeof===Sp||e.$$typeof===Cp||e.$$typeof===Ap||e.$$typeof===EP||e.getModuleId!==void 0)};Xe.typeOf=pn;PP.exports=Xe;var wQ=PP.exports,NQ=As,_Q=Ps,kQ="[object Number]";function SQ(e){return typeof e=="number"||_Q(e)&&NQ(e)==kQ}var OP=SQ;const CQ=Ke(OP);var AQ=OP;function PQ(e){return AQ(e)&&e!=+e}var EQ=PQ;const Cu=Ke(EQ);var cr=function(t){return t===0?0:t>0?1:-1},Xa=function(t){return Si(t)&&t.indexOf("%")===t.length-1},ge=function(t){return CQ(t)&&!Cu(t)},OQ=function(t){return Fe(t)},Et=function(t){return ge(t)||Si(t)},TQ=0,Au=function(t){var n=++TQ;return"".concat(t||"").concat(n)},dr=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:0,a=arguments.length>3&&arguments[3]!==void 0?arguments[3]:!1;if(!ge(t)&&!Si(t))return s;var i;if(Xa(t)){var o=t.indexOf("%");i=n*parseFloat(t.slice(0,o))/100}else i=+t;return Cu(i)&&(i=s),a&&i>n&&(i=n),i},qs=function(t){if(!t)return null;var n=Object.keys(t);return n&&n.length?t[n[0]]:null},MQ=function(t){if(!Array.isArray(t))return!1;for(var n=t.length,s={},a=0;a<n;a++)if(!s[t[a]])s[t[a]]=!0;else return!0;return!1},Is=function(t,n){return ge(t)&&ge(n)?function(s){return t+s*(n-t)}:function(){return n}};function Py(e,t,n){return!e||!e.length?null:e.find(function(s){return s&&(typeof t=="function"?t(s):Ur(s,t))===n})}var LQ=function(t,n){return ge(t)&&ge(n)?t-n:Si(t)&&Si(n)?t.localeCompare(n):t instanceof Date&&n instanceof Date?t.getTime()-n.getTime():String(t).localeCompare(String(n))};function yo(e,t){for(var n in e)if({}.hasOwnProperty.call(e,n)&&(!{}.hasOwnProperty.call(t,n)||e[n]!==t[n]))return!1;for(var s in t)if({}.hasOwnProperty.call(t,s)&&!{}.hasOwnProperty.call(e,s))return!1;return!0}function Ey(e){"@babel/helpers - typeof";return Ey=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ey(e)}var $Q=["viewBox","children"],RQ=["aria-activedescendant","aria-atomic","aria-autocomplete","aria-busy","aria-checked","aria-colcount","aria-colindex","aria-colspan","aria-controls","aria-current","aria-describedby","aria-details","aria-disabled","aria-errormessage","aria-expanded","aria-flowto","aria-haspopup","aria-hidden","aria-invalid","aria-keyshortcuts","aria-label","aria-labelledby","aria-level","aria-live","aria-modal","aria-multiline","aria-multiselectable","aria-orientation","aria-owns","aria-placeholder","aria-posinset","aria-pressed","aria-readonly","aria-relevant","aria-required","aria-roledescription","aria-rowcount","aria-rowindex","aria-rowspan","aria-selected","aria-setsize","aria-sort","aria-valuemax","aria-valuemin","aria-valuenow","aria-valuetext","className","color","height","id","lang","max","media","method","min","name","style","target","width","role","tabIndex","accentHeight","accumulate","additive","alignmentBaseline","allowReorder","alphabetic","amplitude","arabicForm","ascent","attributeName","attributeType","autoReverse","azimuth","baseFrequency","baselineShift","baseProfile","bbox","begin","bias","by","calcMode","capHeight","clip","clipPath","clipPathUnits","clipRule","colorInterpolation","colorInterpolationFilters","colorProfile","colorRendering","contentScriptType","contentStyleType","cursor","cx","cy","d","decelerate","descent","diffuseConstant","direction","display","divisor","dominantBaseline","dur","dx","dy","edgeMode","elevation","enableBackground","end","exponent","externalResourcesRequired","fill","fillOpacity","fillRule","filter","filterRes","filterUnits","floodColor","floodOpacity","focusable","fontFamily","fontSize","fontSizeAdjust","fontStretch","fontStyle","fontVariant","fontWeight","format","from","fx","fy","g1","g2","glyphName","glyphOrientationHorizontal","glyphOrientationVertical","glyphRef","gradientTransform","gradientUnits","hanging","horizAdvX","horizOriginX","href","ideographic","imageRendering","in2","in","intercept","k1","k2","k3","k4","k","kernelMatrix","kernelUnitLength","kerning","keyPoints","keySplines","keyTimes","lengthAdjust","letterSpacing","lightingColor","limitingConeAngle","local","markerEnd","markerHeight","markerMid","markerStart","markerUnits","markerWidth","mask","maskContentUnits","maskUnits","mathematical","mode","numOctaves","offset","opacity","operator","order","orient","orientation","origin","overflow","overlinePosition","overlineThickness","paintOrder","panose1","pathLength","patternContentUnits","patternTransform","patternUnits","pointerEvents","pointsAtX","pointsAtY","pointsAtZ","preserveAlpha","preserveAspectRatio","primitiveUnits","r","radius","refX","refY","renderingIntent","repeatCount","repeatDur","requiredExtensions","requiredFeatures","restart","result","rotate","rx","ry","seed","shapeRendering","slope","spacing","specularConstant","specularExponent","speed","spreadMethod","startOffset","stdDeviation","stemh","stemv","stitchTiles","stopColor","stopOpacity","strikethroughPosition","strikethroughThickness","string","stroke","strokeDasharray","strokeDashoffset","strokeLinecap","strokeLinejoin","strokeMiterlimit","strokeOpacity","strokeWidth","surfaceScale","systemLanguage","tableValues","targetX","targetY","textAnchor","textDecoration","textLength","textRendering","to","transform","u1","u2","underlinePosition","underlineThickness","unicode","unicodeBidi","unicodeRange","unitsPerEm","vAlphabetic","values","vectorEffect","version","vertAdvY","vertOriginX","vertOriginY","vHanging","vIdeographic","viewTarget","visibility","vMathematical","widths","wordSpacing","writingMode","x1","x2","x","xChannelSelector","xHeight","xlinkActuate","xlinkArcrole","xlinkHref","xlinkRole","xlinkShow","xlinkTitle","xlinkType","xmlBase","xmlLang","xmlns","xmlnsXlink","xmlSpace","y1","y2","y","yChannelSelector","z","zoomAndPan","ref","key","angle"],g_=["points","pathLength"],fx={svg:$Q,polygon:g_,polyline:g_},e2=["dangerouslySetInnerHTML","onCopy","onCopyCapture","onCut","onCutCapture","onPaste","onPasteCapture","onCompositionEnd","onCompositionEndCapture","onCompositionStart","onCompositionStartCapture","onCompositionUpdate","onCompositionUpdateCapture","onFocus","onFocusCapture","onBlur","onBlurCapture","onChange","onChangeCapture","onBeforeInput","onBeforeInputCapture","onInput","onInputCapture","onReset","onResetCapture","onSubmit","onSubmitCapture","onInvalid","onInvalidCapture","onLoad","onLoadCapture","onError","onErrorCapture","onKeyDown","onKeyDownCapture","onKeyPress","onKeyPressCapture","onKeyUp","onKeyUpCapture","onAbort","onAbortCapture","onCanPlay","onCanPlayCapture","onCanPlayThrough","onCanPlayThroughCapture","onDurationChange","onDurationChangeCapture","onEmptied","onEmptiedCapture","onEncrypted","onEncryptedCapture","onEnded","onEndedCapture","onLoadedData","onLoadedDataCapture","onLoadedMetadata","onLoadedMetadataCapture","onLoadStart","onLoadStartCapture","onPause","onPauseCapture","onPlay","onPlayCapture","onPlaying","onPlayingCapture","onProgress","onProgressCapture","onRateChange","onRateChangeCapture","onSeeked","onSeekedCapture","onSeeking","onSeekingCapture","onStalled","onStalledCapture","onSuspend","onSuspendCapture","onTimeUpdate","onTimeUpdateCapture","onVolumeChange","onVolumeChangeCapture","onWaiting","onWaitingCapture","onAuxClick","onAuxClickCapture","onClick","onClickCapture","onContextMenu","onContextMenuCapture","onDoubleClick","onDoubleClickCapture","onDrag","onDragCapture","onDragEnd","onDragEndCapture","onDragEnter","onDragEnterCapture","onDragExit","onDragExitCapture","onDragLeave","onDragLeaveCapture","onDragOver","onDragOverCapture","onDragStart","onDragStartCapture","onDrop","onDropCapture","onMouseDown","onMouseDownCapture","onMouseEnter","onMouseLeave","onMouseMove","onMouseMoveCapture","onMouseOut","onMouseOutCapture","onMouseOver","onMouseOverCapture","onMouseUp","onMouseUpCapture","onSelect","onSelectCapture","onTouchCancel","onTouchCancelCapture","onTouchEnd","onTouchEndCapture","onTouchMove","onTouchMoveCapture","onTouchStart","onTouchStartCapture","onPointerDown","onPointerDownCapture","onPointerMove","onPointerMoveCapture","onPointerUp","onPointerUpCapture","onPointerCancel","onPointerCancelCapture","onPointerEnter","onPointerEnterCapture","onPointerLeave","onPointerLeaveCapture","onPointerOver","onPointerOverCapture","onPointerOut","onPointerOutCapture","onGotPointerCapture","onGotPointerCaptureCapture","onLostPointerCapture","onLostPointerCaptureCapture","onScroll","onScrollCapture","onWheel","onWheelCapture","onAnimationStart","onAnimationStartCapture","onAnimationEnd","onAnimationEndCapture","onAnimationIteration","onAnimationIterationCapture","onTransitionEnd","onTransitionEndCapture"],Ih=function(t,n){if(!t||typeof t=="function"||typeof t=="boolean")return null;var s=t;if(k.isValidElement(t)&&(s=t.props),!Ll(s))return null;var a={};return Object.keys(s).forEach(function(i){e2.includes(i)&&(a[i]=n||function(o){return s[i](s,o)})}),a},IQ=function(t,n,s){return function(a){return t(n,s,a),null}},Ci=function(t,n,s){if(!Ll(t)||Ey(t)!=="object")return null;var a=null;return Object.keys(t).forEach(function(i){var o=t[i];e2.includes(i)&&typeof o=="function"&&(a||(a={}),a[i]=IQ(o,n,s))}),a},DQ=["children"],FQ=["children"];function y_(e,t){if(e==null)return{};var n=BQ(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function BQ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var b_={click:"onClick",mousedown:"onMouseDown",mouseup:"onMouseUp",mouseover:"onMouseOver",mousemove:"onMouseMove",mouseout:"onMouseOut",mouseenter:"onMouseEnter",mouseleave:"onMouseLeave",touchcancel:"onTouchCancel",touchend:"onTouchEnd",touchmove:"onTouchMove",touchstart:"onTouchStart",contextmenu:"onContextMenu",dblclick:"onDoubleClick"},ps=function(t){return typeof t=="string"?t:t?t.displayName||t.name||"Component":""},v_=null,xx=null,t2=function e(t){if(t===v_&&Array.isArray(xx))return xx;var n=[];return k.Children.forEach(t,function(s){Fe(s)||(wQ.isFragment(s)?n=n.concat(e(s.props.children)):n.push(s))}),xx=n,v_=t,n};function dn(e,t){var n=[],s=[];return Array.isArray(t)?s=t.map(function(a){return ps(a)}):s=[ps(t)],t2(e).forEach(function(a){var i=Ur(a,"type.displayName")||Ur(a,"type.name");s.indexOf(i)!==-1&&n.push(a)}),n}function $r(e,t){var n=dn(e,t);return n&&n[0]}var j_=function(t){if(!t||!t.props)return!1;var n=t.props,s=n.width,a=n.height;return!(!ge(s)||s<=0||!ge(a)||a<=0)},zQ=["a","altGlyph","altGlyphDef","altGlyphItem","animate","animateColor","animateMotion","animateTransform","circle","clipPath","color-profile","cursor","defs","desc","ellipse","feBlend","feColormatrix","feComponentTransfer","feComposite","feConvolveMatrix","feDiffuseLighting","feDisplacementMap","feDistantLight","feFlood","feFuncA","feFuncB","feFuncG","feFuncR","feGaussianBlur","feImage","feMerge","feMergeNode","feMorphology","feOffset","fePointLight","feSpecularLighting","feSpotLight","feTile","feTurbulence","filter","font","font-face","font-face-format","font-face-name","font-face-url","foreignObject","g","glyph","glyphRef","hkern","image","line","lineGradient","marker","mask","metadata","missing-glyph","mpath","path","pattern","polygon","polyline","radialGradient","rect","script","set","stop","style","svg","switch","symbol","text","textPath","title","tref","tspan","use","view","vkern"],qQ=function(t){return t&&t.type&&Si(t.type)&&zQ.indexOf(t.type)>=0},UQ=function(t,n,s,a){var i,o=(i=fx==null?void 0:fx[a])!==null&&i!==void 0?i:[];return n.startsWith("data-")||!Me(t)&&(a&&o.includes(n)||RQ.includes(n))||s&&e2.includes(n)},Te=function(t,n,s){if(!t||typeof t=="function"||typeof t=="boolean")return null;var a=t;if(k.isValidElement(t)&&(a=t.props),!Ll(a))return null;var i={};return Object.keys(a).forEach(function(o){var l;UQ((l=a)===null||l===void 0?void 0:l[o],o,n,s)&&(i[o]=a[o])}),i},Oy=function e(t,n){if(t===n)return!0;var s=k.Children.count(t);if(s!==k.Children.count(n))return!1;if(s===0)return!0;if(s===1)return w_(Array.isArray(t)?t[0]:t,Array.isArray(n)?n[0]:n);for(var a=0;a<s;a++){var i=t[a],o=n[a];if(Array.isArray(i)||Array.isArray(o)){if(!e(i,o))return!1}else if(!w_(i,o))return!1}return!0},w_=function(t,n){if(Fe(t)&&Fe(n))return!0;if(!Fe(t)&&!Fe(n)){var s=t.props||{},a=s.children,i=y_(s,DQ),o=n.props||{},l=o.children,c=y_(o,FQ);return a&&l?yo(i,c)&&Oy(a,l):!a&&!l?yo(i,c):!1}return!1},N_=function(t,n){var s=[],a={};return t2(t).forEach(function(i,o){if(qQ(i))s.push(i);else if(i){var l=ps(i.type),c=n[l]||{},d=c.handler,m=c.once;if(d&&(!m||!a[l])){var u=d(i,l,o);s.push(u),a[l]=!0}}}),s},WQ=function(t){var n=t&&t.type;return n&&b_[n]?b_[n]:null},VQ=function(t,n){return t2(n).indexOf(t)},HQ=["children","width","height","viewBox","className","style","title","desc"];function Ty(){return Ty=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ty.apply(this,arguments)}function KQ(e,t){if(e==null)return{};var n=GQ(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function GQ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function My(e){var t=e.children,n=e.width,s=e.height,a=e.viewBox,i=e.className,o=e.style,l=e.title,c=e.desc,d=KQ(e,HQ),m=a||{width:n,height:s,x:0,y:0},u=De("recharts-surface",i);return Y.createElement("svg",Ty({},Te(d,!0,"svg"),{className:u,width:n,height:s,style:o,viewBox:"".concat(m.x," ").concat(m.y," ").concat(m.width," ").concat(m.height)}),Y.createElement("title",null,l),Y.createElement("desc",null,c),t)}var QQ=["children","className"];function Ly(){return Ly=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Ly.apply(this,arguments)}function YQ(e,t){if(e==null)return{};var n=XQ(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function XQ(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Ge=Y.forwardRef(function(e,t){var n=e.children,s=e.className,a=YQ(e,QQ),i=De("recharts-layer",s);return Y.createElement("g",Ly({className:i},Te(a,!0),{ref:t}),n)}),En=function(t,n){for(var s=arguments.length,a=new Array(s>2?s-2:0),i=2;i<s;i++)a[i-2]=arguments[i]};function JQ(e,t,n){var s=-1,a=e.length;t<0&&(t=-t>a?0:a+t),n=n>a?a:n,n<0&&(n+=a),a=t>n?0:n-t>>>0,t>>>=0;for(var i=Array(a);++s<a;)i[s]=e[s+t];return i}var ZQ=JQ,eY=ZQ;function tY(e,t,n){var s=e.length;return n=n===void 0?s:n,!t&&n>=s?e:eY(e,t,n)}var rY=tY,nY="\\ud800-\\udfff",sY="\\u0300-\\u036f",aY="\\ufe20-\\ufe2f",iY="\\u20d0-\\u20ff",oY=sY+aY+iY,lY="\\ufe0e\\ufe0f",cY="\\u200d",dY=RegExp("["+cY+nY+oY+lY+"]");function uY(e){return dY.test(e)}var TP=uY;function mY(e){return e.split("")}var hY=mY,MP="\\ud800-\\udfff",pY="\\u0300-\\u036f",fY="\\ufe20-\\ufe2f",xY="\\u20d0-\\u20ff",gY=pY+fY+xY,yY="\\ufe0e\\ufe0f",bY="["+MP+"]",$y="["+gY+"]",Ry="\\ud83c[\\udffb-\\udfff]",vY="(?:"+$y+"|"+Ry+")",LP="[^"+MP+"]",$P="(?:\\ud83c[\\udde6-\\uddff]){2}",RP="[\\ud800-\\udbff][\\udc00-\\udfff]",jY="\\u200d",IP=vY+"?",DP="["+yY+"]?",wY="(?:"+jY+"(?:"+[LP,$P,RP].join("|")+")"+DP+IP+")*",NY=DP+IP+wY,_Y="(?:"+[LP+$y+"?",$y,$P,RP,bY].join("|")+")",kY=RegExp(Ry+"(?="+Ry+")|"+_Y+NY,"g");function SY(e){return e.match(kY)||[]}var CY=SY,AY=hY,PY=TP,EY=CY;function OY(e){return PY(e)?EY(e):AY(e)}var TY=OY,MY=rY,LY=TP,$Y=TY,RY=SP;function IY(e){return function(t){t=RY(t);var n=LY(t)?$Y(t):void 0,s=n?n[0]:t.charAt(0),a=n?MY(n,1).join(""):t.slice(1);return s[e]()+a}}var DY=IY,FY=DY,BY=FY("toUpperCase"),zY=BY;const Mp=Ke(zY);function rt(e){return function(){return e}}const FP=Math.cos,Dh=Math.sin,Mn=Math.sqrt,Fh=Math.PI,Lp=2*Fh,Iy=Math.PI,Dy=2*Iy,za=1e-6,qY=Dy-za;function BP(e){this._+=e[0];for(let t=1,n=e.length;t<n;++t)this._+=arguments[t]+e[t]}function UY(e){let t=Math.floor(e);if(!(t>=0))throw new Error(`invalid digits: ${e}`);if(t>15)return BP;const n=10**t;return function(s){this._+=s[0];for(let a=1,i=s.length;a<i;++a)this._+=Math.round(arguments[a]*n)/n+s[a]}}class WY{constructor(t){this._x0=this._y0=this._x1=this._y1=null,this._="",this._append=t==null?BP:UY(t)}moveTo(t,n){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}`}closePath(){this._x1!==null&&(this._x1=this._x0,this._y1=this._y0,this._append`Z`)}lineTo(t,n){this._append`L${this._x1=+t},${this._y1=+n}`}quadraticCurveTo(t,n,s,a){this._append`Q${+t},${+n},${this._x1=+s},${this._y1=+a}`}bezierCurveTo(t,n,s,a,i,o){this._append`C${+t},${+n},${+s},${+a},${this._x1=+i},${this._y1=+o}`}arcTo(t,n,s,a,i){if(t=+t,n=+n,s=+s,a=+a,i=+i,i<0)throw new Error(`negative radius: ${i}`);let o=this._x1,l=this._y1,c=s-t,d=a-n,m=o-t,u=l-n,h=m*m+u*u;if(this._x1===null)this._append`M${this._x1=t},${this._y1=n}`;else if(h>za)if(!(Math.abs(u*c-d*m)>za)||!i)this._append`L${this._x1=t},${this._y1=n}`;else{let f=s-o,b=a-l,g=c*c+d*d,x=f*f+b*b,p=Math.sqrt(g),y=Math.sqrt(h),v=i*Math.tan((Iy-Math.acos((g+h-x)/(2*p*y)))/2),N=v/y,w=v/p;Math.abs(N-1)>za&&this._append`L${t+N*m},${n+N*u}`,this._append`A${i},${i},0,0,${+(u*f>m*b)},${this._x1=t+w*c},${this._y1=n+w*d}`}}arc(t,n,s,a,i,o){if(t=+t,n=+n,s=+s,o=!!o,s<0)throw new Error(`negative radius: ${s}`);let l=s*Math.cos(a),c=s*Math.sin(a),d=t+l,m=n+c,u=1^o,h=o?a-i:i-a;this._x1===null?this._append`M${d},${m}`:(Math.abs(this._x1-d)>za||Math.abs(this._y1-m)>za)&&this._append`L${d},${m}`,s&&(h<0&&(h=h%Dy+Dy),h>qY?this._append`A${s},${s},0,1,${u},${t-l},${n-c}A${s},${s},0,1,${u},${this._x1=d},${this._y1=m}`:h>za&&this._append`A${s},${s},0,${+(h>=Iy)},${u},${this._x1=t+s*Math.cos(i)},${this._y1=n+s*Math.sin(i)}`)}rect(t,n,s,a){this._append`M${this._x0=this._x1=+t},${this._y0=this._y1=+n}h${s=+s}v${+a}h${-s}Z`}toString(){return this._}}function r2(e){let t=3;return e.digits=function(n){if(!arguments.length)return t;if(n==null)t=null;else{const s=Math.floor(n);if(!(s>=0))throw new RangeError(`invalid digits: ${n}`);t=s}return e},()=>new WY(t)}function n2(e){return typeof e=="object"&&"length"in e?e:Array.from(e)}function zP(e){this._context=e}zP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:this._context.lineTo(e,t);break}}};function $p(e){return new zP(e)}function qP(e){return e[0]}function UP(e){return e[1]}function WP(e,t){var n=rt(!0),s=null,a=$p,i=null,o=r2(l);e=typeof e=="function"?e:e===void 0?qP:rt(e),t=typeof t=="function"?t:t===void 0?UP:rt(t);function l(c){var d,m=(c=n2(c)).length,u,h=!1,f;for(s==null&&(i=a(f=o())),d=0;d<=m;++d)!(d<m&&n(u=c[d],d,c))===h&&((h=!h)?i.lineStart():i.lineEnd()),h&&i.point(+e(u,d,c),+t(u,d,c));if(f)return i=null,f+""||null}return l.x=function(c){return arguments.length?(e=typeof c=="function"?c:rt(+c),l):e},l.y=function(c){return arguments.length?(t=typeof c=="function"?c:rt(+c),l):t},l.defined=function(c){return arguments.length?(n=typeof c=="function"?c:rt(!!c),l):n},l.curve=function(c){return arguments.length?(a=c,s!=null&&(i=a(s)),l):a},l.context=function(c){return arguments.length?(c==null?s=i=null:i=a(s=c),l):s},l}function dm(e,t,n){var s=null,a=rt(!0),i=null,o=$p,l=null,c=r2(d);e=typeof e=="function"?e:e===void 0?qP:rt(+e),t=typeof t=="function"?t:rt(t===void 0?0:+t),n=typeof n=="function"?n:n===void 0?UP:rt(+n);function d(u){var h,f,b,g=(u=n2(u)).length,x,p=!1,y,v=new Array(g),N=new Array(g);for(i==null&&(l=o(y=c())),h=0;h<=g;++h){if(!(h<g&&a(x=u[h],h,u))===p)if(p=!p)f=h,l.areaStart(),l.lineStart();else{for(l.lineEnd(),l.lineStart(),b=h-1;b>=f;--b)l.point(v[b],N[b]);l.lineEnd(),l.areaEnd()}p&&(v[h]=+e(x,h,u),N[h]=+t(x,h,u),l.point(s?+s(x,h,u):v[h],n?+n(x,h,u):N[h]))}if(y)return l=null,y+""||null}function m(){return WP().defined(a).curve(o).context(i)}return d.x=function(u){return arguments.length?(e=typeof u=="function"?u:rt(+u),s=null,d):e},d.x0=function(u){return arguments.length?(e=typeof u=="function"?u:rt(+u),d):e},d.x1=function(u){return arguments.length?(s=u==null?null:typeof u=="function"?u:rt(+u),d):s},d.y=function(u){return arguments.length?(t=typeof u=="function"?u:rt(+u),n=null,d):t},d.y0=function(u){return arguments.length?(t=typeof u=="function"?u:rt(+u),d):t},d.y1=function(u){return arguments.length?(n=u==null?null:typeof u=="function"?u:rt(+u),d):n},d.lineX0=d.lineY0=function(){return m().x(e).y(t)},d.lineY1=function(){return m().x(e).y(n)},d.lineX1=function(){return m().x(s).y(t)},d.defined=function(u){return arguments.length?(a=typeof u=="function"?u:rt(!!u),d):a},d.curve=function(u){return arguments.length?(o=u,i!=null&&(l=o(i)),d):o},d.context=function(u){return arguments.length?(u==null?i=l=null:l=o(i=u),d):i},d}class VP{constructor(t,n){this._context=t,this._x=n}areaStart(){this._line=0}areaEnd(){this._line=NaN}lineStart(){this._point=0}lineEnd(){(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line}point(t,n){switch(t=+t,n=+n,this._point){case 0:{this._point=1,this._line?this._context.lineTo(t,n):this._context.moveTo(t,n);break}case 1:this._point=2;default:{this._x?this._context.bezierCurveTo(this._x0=(this._x0+t)/2,this._y0,this._x0,n,t,n):this._context.bezierCurveTo(this._x0,this._y0=(this._y0+n)/2,t,this._y0,t,n);break}}this._x0=t,this._y0=n}}function VY(e){return new VP(e,!0)}function HY(e){return new VP(e,!1)}const s2={draw(e,t){const n=Mn(t/Fh);e.moveTo(n,0),e.arc(0,0,n,0,Lp)}},KY={draw(e,t){const n=Mn(t/5)/2;e.moveTo(-3*n,-n),e.lineTo(-n,-n),e.lineTo(-n,-3*n),e.lineTo(n,-3*n),e.lineTo(n,-n),e.lineTo(3*n,-n),e.lineTo(3*n,n),e.lineTo(n,n),e.lineTo(n,3*n),e.lineTo(-n,3*n),e.lineTo(-n,n),e.lineTo(-3*n,n),e.closePath()}},HP=Mn(1/3),GY=HP*2,QY={draw(e,t){const n=Mn(t/GY),s=n*HP;e.moveTo(0,-n),e.lineTo(s,0),e.lineTo(0,n),e.lineTo(-s,0),e.closePath()}},YY={draw(e,t){const n=Mn(t),s=-n/2;e.rect(s,s,n,n)}},XY=.8908130915292852,KP=Dh(Fh/10)/Dh(7*Fh/10),JY=Dh(Lp/10)*KP,ZY=-FP(Lp/10)*KP,eX={draw(e,t){const n=Mn(t*XY),s=JY*n,a=ZY*n;e.moveTo(0,-n),e.lineTo(s,a);for(let i=1;i<5;++i){const o=Lp*i/5,l=FP(o),c=Dh(o);e.lineTo(c*n,-l*n),e.lineTo(l*s-c*a,c*s+l*a)}e.closePath()}},gx=Mn(3),tX={draw(e,t){const n=-Mn(t/(gx*3));e.moveTo(0,n*2),e.lineTo(-gx*n,-n),e.lineTo(gx*n,-n),e.closePath()}},Gr=-.5,Qr=Mn(3)/2,Fy=1/Mn(12),rX=(Fy/2+1)*3,nX={draw(e,t){const n=Mn(t/rX),s=n/2,a=n*Fy,i=s,o=n*Fy+n,l=-i,c=o;e.moveTo(s,a),e.lineTo(i,o),e.lineTo(l,c),e.lineTo(Gr*s-Qr*a,Qr*s+Gr*a),e.lineTo(Gr*i-Qr*o,Qr*i+Gr*o),e.lineTo(Gr*l-Qr*c,Qr*l+Gr*c),e.lineTo(Gr*s+Qr*a,Gr*a-Qr*s),e.lineTo(Gr*i+Qr*o,Gr*o-Qr*i),e.lineTo(Gr*l+Qr*c,Gr*c-Qr*l),e.closePath()}};function sX(e,t){let n=null,s=r2(a);e=typeof e=="function"?e:rt(e||s2),t=typeof t=="function"?t:rt(t===void 0?64:+t);function a(){let i;if(n||(n=i=s()),e.apply(this,arguments).draw(n,+t.apply(this,arguments)),i)return n=null,i+""||null}return a.type=function(i){return arguments.length?(e=typeof i=="function"?i:rt(i),a):e},a.size=function(i){return arguments.length?(t=typeof i=="function"?i:rt(+i),a):t},a.context=function(i){return arguments.length?(n=i??null,a):n},a}function Bh(){}function zh(e,t,n){e._context.bezierCurveTo((2*e._x0+e._x1)/3,(2*e._y0+e._y1)/3,(e._x0+2*e._x1)/3,(e._y0+2*e._y1)/3,(e._x0+4*e._x1+t)/6,(e._y0+4*e._y1+n)/6)}function GP(e){this._context=e}GP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:zh(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1);break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:zh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function aX(e){return new GP(e)}function QP(e){this._context=e}QP.prototype={areaStart:Bh,areaEnd:Bh,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:{this._context.moveTo(this._x2,this._y2),this._context.closePath();break}case 2:{this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break}case 3:{this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4);break}}},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._x2=e,this._y2=t;break;case 1:this._point=2,this._x3=e,this._y3=t;break;case 2:this._point=3,this._x4=e,this._y4=t,this._context.moveTo((this._x0+4*this._x1+e)/6,(this._y0+4*this._y1+t)/6);break;default:zh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function iX(e){return new QP(e)}function YP(e){this._context=e}YP.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||this._line!==0&&this._point===3)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+e)/6,s=(this._y0+4*this._y1+t)/6;this._line?this._context.lineTo(n,s):this._context.moveTo(n,s);break;case 3:this._point=4;default:zh(this,e,t);break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t}};function oX(e){return new YP(e)}function XP(e){this._context=e}XP.prototype={areaStart:Bh,areaEnd:Bh,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(e,t){e=+e,t=+t,this._point?this._context.lineTo(e,t):(this._point=1,this._context.moveTo(e,t))}};function lX(e){return new XP(e)}function __(e){return e<0?-1:1}function k_(e,t,n){var s=e._x1-e._x0,a=t-e._x1,i=(e._y1-e._y0)/(s||a<0&&-0),o=(n-e._y1)/(a||s<0&&-0),l=(i*a+o*s)/(s+a);return(__(i)+__(o))*Math.min(Math.abs(i),Math.abs(o),.5*Math.abs(l))||0}function S_(e,t){var n=e._x1-e._x0;return n?(3*(e._y1-e._y0)/n-t)/2:t}function yx(e,t,n){var s=e._x0,a=e._y0,i=e._x1,o=e._y1,l=(i-s)/3;e._context.bezierCurveTo(s+l,a+l*t,i-l,o-l*n,i,o)}function qh(e){this._context=e}qh.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:yx(this,this._t0,S_(this,this._t0));break}(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line=1-this._line},point:function(e,t){var n=NaN;if(e=+e,t=+t,!(e===this._x1&&t===this._y1)){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;break;case 2:this._point=3,yx(this,S_(this,n=k_(this,e,t)),n);break;default:yx(this,this._t0,n=k_(this,e,t));break}this._x0=this._x1,this._x1=e,this._y0=this._y1,this._y1=t,this._t0=n}}};function JP(e){this._context=new ZP(e)}(JP.prototype=Object.create(qh.prototype)).point=function(e,t){qh.prototype.point.call(this,t,e)};function ZP(e){this._context=e}ZP.prototype={moveTo:function(e,t){this._context.moveTo(t,e)},closePath:function(){this._context.closePath()},lineTo:function(e,t){this._context.lineTo(t,e)},bezierCurveTo:function(e,t,n,s,a,i){this._context.bezierCurveTo(t,e,s,n,i,a)}};function cX(e){return new qh(e)}function dX(e){return new JP(e)}function eE(e){this._context=e}eE.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var e=this._x,t=this._y,n=e.length;if(n)if(this._line?this._context.lineTo(e[0],t[0]):this._context.moveTo(e[0],t[0]),n===2)this._context.lineTo(e[1],t[1]);else for(var s=C_(e),a=C_(t),i=0,o=1;o<n;++i,++o)this._context.bezierCurveTo(s[0][i],a[0][i],s[1][i],a[1][i],e[o],t[o]);(this._line||this._line!==0&&n===1)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(e,t){this._x.push(+e),this._y.push(+t)}};function C_(e){var t,n=e.length-1,s,a=new Array(n),i=new Array(n),o=new Array(n);for(a[0]=0,i[0]=2,o[0]=e[0]+2*e[1],t=1;t<n-1;++t)a[t]=1,i[t]=4,o[t]=4*e[t]+2*e[t+1];for(a[n-1]=2,i[n-1]=7,o[n-1]=8*e[n-1]+e[n],t=1;t<n;++t)s=a[t]/i[t-1],i[t]-=s,o[t]-=s*o[t-1];for(a[n-1]=o[n-1]/i[n-1],t=n-2;t>=0;--t)a[t]=(o[t]-a[t+1])/i[t];for(i[n-1]=(e[n]+a[n-1])/2,t=0;t<n-1;++t)i[t]=2*e[t+1]-a[t+1];return[a,i]}function uX(e){return new eE(e)}function Rp(e,t){this._context=e,this._t=t}Rp.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&this._point===2&&this._context.lineTo(this._x,this._y),(this._line||this._line!==0&&this._point===1)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(e,t){switch(e=+e,t=+t,this._point){case 0:this._point=1,this._line?this._context.lineTo(e,t):this._context.moveTo(e,t);break;case 1:this._point=2;default:{if(this._t<=0)this._context.lineTo(this._x,t),this._context.lineTo(e,t);else{var n=this._x*(1-this._t)+e*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,t)}break}}this._x=e,this._y=t}};function mX(e){return new Rp(e,.5)}function hX(e){return new Rp(e,0)}function pX(e){return new Rp(e,1)}function Jo(e,t){if((o=e.length)>1)for(var n=1,s,a,i=e[t[0]],o,l=i.length;n<o;++n)for(a=i,i=e[t[n]],s=0;s<l;++s)i[s][1]+=i[s][0]=isNaN(a[s][1])?a[s][0]:a[s][1]}function By(e){for(var t=e.length,n=new Array(t);--t>=0;)n[t]=t;return n}function fX(e,t){return e[t]}function xX(e){const t=[];return t.key=e,t}function gX(){var e=rt([]),t=By,n=Jo,s=fX;function a(i){var o=Array.from(e.apply(this,arguments),xX),l,c=o.length,d=-1,m;for(const u of i)for(l=0,++d;l<c;++l)(o[l][d]=[0,+s(u,o[l].key,d,i)]).data=u;for(l=0,m=n2(t(o));l<c;++l)o[m[l]].index=l;return n(o,m),o}return a.keys=function(i){return arguments.length?(e=typeof i=="function"?i:rt(Array.from(i)),a):e},a.value=function(i){return arguments.length?(s=typeof i=="function"?i:rt(+i),a):s},a.order=function(i){return arguments.length?(t=i==null?By:typeof i=="function"?i:rt(Array.from(i)),a):t},a.offset=function(i){return arguments.length?(n=i??Jo,a):n},a}function yX(e,t){if((s=e.length)>0){for(var n,s,a=0,i=e[0].length,o;a<i;++a){for(o=n=0;n<s;++n)o+=e[n][a][1]||0;if(o)for(n=0;n<s;++n)e[n][a][1]/=o}Jo(e,t)}}function bX(e,t){if((a=e.length)>0){for(var n=0,s=e[t[0]],a,i=s.length;n<i;++n){for(var o=0,l=0;o<a;++o)l+=e[o][n][1]||0;s[n][1]+=s[n][0]=-l/2}Jo(e,t)}}function vX(e,t){if(!(!((o=e.length)>0)||!((i=(a=e[t[0]]).length)>0))){for(var n=0,s=1,a,i,o;s<i;++s){for(var l=0,c=0,d=0;l<o;++l){for(var m=e[t[l]],u=m[s][1]||0,h=m[s-1][1]||0,f=(u-h)/2,b=0;b<l;++b){var g=e[t[b]],x=g[s][1]||0,p=g[s-1][1]||0;f+=x-p}c+=u,d+=f*u}a[s-1][1]+=a[s-1][0]=n,c&&(n-=d/c)}a[s-1][1]+=a[s-1][0]=n,Jo(e,t)}}function wd(e){"@babel/helpers - typeof";return wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wd(e)}var jX=["type","size","sizeType"];function zy(){return zy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zy.apply(this,arguments)}function A_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function P_(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?A_(Object(n),!0).forEach(function(s){wX(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):A_(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function wX(e,t,n){return t=NX(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NX(e){var t=_X(e,"string");return wd(t)=="symbol"?t:t+""}function _X(e,t){if(wd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(wd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function kX(e,t){if(e==null)return{};var n=SX(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function SX(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var tE={symbolCircle:s2,symbolCross:KY,symbolDiamond:QY,symbolSquare:YY,symbolStar:eX,symbolTriangle:tX,symbolWye:nX},CX=Math.PI/180,AX=function(t){var n="symbol".concat(Mp(t));return tE[n]||s2},PX=function(t,n,s){if(n==="area")return t;switch(s){case"cross":return 5*t*t/9;case"diamond":return .5*t*t/Math.sqrt(3);case"square":return t*t;case"star":{var a=18*CX;return 1.25*t*t*(Math.tan(a)-Math.tan(a*2)*Math.pow(Math.tan(a),2))}case"triangle":return Math.sqrt(3)*t*t/4;case"wye":return(21-10*Math.sqrt(3))*t*t/8;default:return Math.PI*t*t/4}},EX=function(t,n){tE["symbol".concat(Mp(t))]=n},a2=function(t){var n=t.type,s=n===void 0?"circle":n,a=t.size,i=a===void 0?64:a,o=t.sizeType,l=o===void 0?"area":o,c=kX(t,jX),d=P_(P_({},c),{},{type:s,size:i,sizeType:l}),m=function(){var x=AX(s),p=sX().type(x).size(PX(i,l,s));return p()},u=d.className,h=d.cx,f=d.cy,b=Te(d,!0);return h===+h&&f===+f&&i===+i?Y.createElement("path",zy({},b,{className:De("recharts-symbols",u),transform:"translate(".concat(h,", ").concat(f,")"),d:m()})):null};a2.registerSymbol=EX;function Zo(e){"@babel/helpers - typeof";return Zo=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zo(e)}function qy(){return qy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qy.apply(this,arguments)}function E_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function OX(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E_(Object(n),!0).forEach(function(s){Nd(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E_(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function TX(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function MX(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,nE(s.key),s)}}function LX(e,t,n){return t&&MX(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function $X(e,t,n){return t=Uh(t),RX(e,rE()?Reflect.construct(t,n||[],Uh(e).constructor):t.apply(e,n))}function RX(e,t){if(t&&(Zo(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return IX(e)}function IX(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function rE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(rE=function(){return!!e})()}function Uh(e){return Uh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Uh(e)}function DX(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Uy(e,t)}function Uy(e,t){return Uy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Uy(e,t)}function Nd(e,t,n){return t=nE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nE(e){var t=FX(e,"string");return Zo(t)=="symbol"?t:t+""}function FX(e,t){if(Zo(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Zo(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Yr=32,i2=function(e){function t(){return TX(this,t),$X(this,t,arguments)}return DX(t,e),LX(t,[{key:"renderIcon",value:function(s){var a=this.props.inactiveColor,i=Yr/2,o=Yr/6,l=Yr/3,c=s.inactive?a:s.color;if(s.type==="plainline")return Y.createElement("line",{strokeWidth:4,fill:"none",stroke:c,strokeDasharray:s.payload.strokeDasharray,x1:0,y1:i,x2:Yr,y2:i,className:"recharts-legend-icon"});if(s.type==="line")return Y.createElement("path",{strokeWidth:4,fill:"none",stroke:c,d:"M0,".concat(i,"h").concat(l,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(2*l,",").concat(i,`
            H`).concat(Yr,"M").concat(2*l,",").concat(i,`
            A`).concat(o,",").concat(o,",0,1,1,").concat(l,",").concat(i),className:"recharts-legend-icon"});if(s.type==="rect")return Y.createElement("path",{stroke:"none",fill:c,d:"M0,".concat(Yr/8,"h").concat(Yr,"v").concat(Yr*3/4,"h").concat(-Yr,"z"),className:"recharts-legend-icon"});if(Y.isValidElement(s.legendIcon)){var d=OX({},s);return delete d.legendIcon,Y.cloneElement(s.legendIcon,d)}return Y.createElement(a2,{fill:c,cx:i,cy:i,size:Yr,sizeType:"diameter",type:s.type})}},{key:"renderItems",value:function(){var s=this,a=this.props,i=a.payload,o=a.iconSize,l=a.layout,c=a.formatter,d=a.inactiveColor,m={x:0,y:0,width:Yr,height:Yr},u={display:l==="horizontal"?"inline-block":"block",marginRight:10},h={display:"inline-block",verticalAlign:"middle",marginRight:4};return i.map(function(f,b){var g=f.formatter||c,x=De(Nd(Nd({"recharts-legend-item":!0},"legend-item-".concat(b),!0),"inactive",f.inactive));if(f.type==="none")return null;var p=Me(f.value)?null:f.value;En(!Me(f.value),`The name property is also required when using a function for the dataKey of a chart's cartesian components. Ex: <Bar name="Name of my Data"/>`);var y=f.inactive?d:f.color;return Y.createElement("li",qy({className:x,style:u,key:"legend-item-".concat(b)},Ci(s.props,f,b)),Y.createElement(My,{width:o,height:o,viewBox:m,style:h},s.renderIcon(f)),Y.createElement("span",{className:"recharts-legend-item-text",style:{color:y}},g?g(p,f,b):p))})}},{key:"render",value:function(){var s=this.props,a=s.payload,i=s.layout,o=s.align;if(!a||!a.length)return null;var l={padding:0,margin:0,textAlign:i==="horizontal"?o:"left"};return Y.createElement("ul",{className:"recharts-default-legend",style:l},this.renderItems())}}])}(k.PureComponent);Nd(i2,"displayName","Legend");Nd(i2,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"middle",inactiveColor:"#ccc"});var BX=vp;function zX(){this.__data__=new BX,this.size=0}var qX=zX;function UX(e){var t=this.__data__,n=t.delete(e);return this.size=t.size,n}var WX=UX;function VX(e){return this.__data__.get(e)}var HX=VX;function KX(e){return this.__data__.has(e)}var GX=KX,QX=vp,YX=K1,XX=G1,JX=200;function ZX(e,t){var n=this.__data__;if(n instanceof QX){var s=n.__data__;if(!YX||s.length<JX-1)return s.push([e,t]),this.size=++n.size,this;n=this.__data__=new XX(s)}return n.set(e,t),this.size=n.size,this}var eJ=ZX,tJ=vp,rJ=qX,nJ=WX,sJ=HX,aJ=GX,iJ=eJ;function Dl(e){var t=this.__data__=new tJ(e);this.size=t.size}Dl.prototype.clear=rJ;Dl.prototype.delete=nJ;Dl.prototype.get=sJ;Dl.prototype.has=aJ;Dl.prototype.set=iJ;var sE=Dl,oJ="__lodash_hash_undefined__";function lJ(e){return this.__data__.set(e,oJ),this}var cJ=lJ;function dJ(e){return this.__data__.has(e)}var uJ=dJ,mJ=G1,hJ=cJ,pJ=uJ;function Wh(e){var t=-1,n=e==null?0:e.length;for(this.__data__=new mJ;++t<n;)this.add(e[t])}Wh.prototype.add=Wh.prototype.push=hJ;Wh.prototype.has=pJ;var aE=Wh;function fJ(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(t(e[n],n,e))return!0;return!1}var iE=fJ;function xJ(e,t){return e.has(t)}var oE=xJ,gJ=aE,yJ=iE,bJ=oE,vJ=1,jJ=2;function wJ(e,t,n,s,a,i){var o=n&vJ,l=e.length,c=t.length;if(l!=c&&!(o&&c>l))return!1;var d=i.get(e),m=i.get(t);if(d&&m)return d==t&&m==e;var u=-1,h=!0,f=n&jJ?new gJ:void 0;for(i.set(e,t),i.set(t,e);++u<l;){var b=e[u],g=t[u];if(s)var x=o?s(g,b,u,t,e,i):s(b,g,u,e,t,i);if(x!==void 0){if(x)continue;h=!1;break}if(f){if(!yJ(t,function(p,y){if(!bJ(f,y)&&(b===p||a(b,p,n,s,i)))return f.push(y)})){h=!1;break}}else if(!(b===g||a(b,g,n,s,i))){h=!1;break}}return i.delete(e),i.delete(t),h}var lE=wJ,NJ=Yn,_J=NJ.Uint8Array,kJ=_J;function SJ(e){var t=-1,n=Array(e.size);return e.forEach(function(s,a){n[++t]=[a,s]}),n}var CJ=SJ;function AJ(e){var t=-1,n=Array(e.size);return e.forEach(function(s){n[++t]=s}),n}var o2=AJ,O_=Su,T_=kJ,PJ=H1,EJ=lE,OJ=CJ,TJ=o2,MJ=1,LJ=2,$J="[object Boolean]",RJ="[object Date]",IJ="[object Error]",DJ="[object Map]",FJ="[object Number]",BJ="[object RegExp]",zJ="[object Set]",qJ="[object String]",UJ="[object Symbol]",WJ="[object ArrayBuffer]",VJ="[object DataView]",M_=O_?O_.prototype:void 0,bx=M_?M_.valueOf:void 0;function HJ(e,t,n,s,a,i,o){switch(n){case VJ:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case WJ:return!(e.byteLength!=t.byteLength||!i(new T_(e),new T_(t)));case $J:case RJ:case FJ:return PJ(+e,+t);case IJ:return e.name==t.name&&e.message==t.message;case BJ:case qJ:return e==t+"";case DJ:var l=OJ;case zJ:var c=s&MJ;if(l||(l=TJ),e.size!=t.size&&!c)return!1;var d=o.get(e);if(d)return d==t;s|=LJ,o.set(e,t);var m=EJ(l(e),l(t),s,a,i,o);return o.delete(e),m;case UJ:if(bx)return bx.call(e)==bx.call(t)}return!1}var KJ=HJ;function GJ(e,t){for(var n=-1,s=t.length,a=e.length;++n<s;)e[a+n]=t[n];return e}var cE=GJ,QJ=cE,YJ=Or;function XJ(e,t,n){var s=t(e);return YJ(e)?s:QJ(s,n(e))}var JJ=XJ;function ZJ(e,t){for(var n=-1,s=e==null?0:e.length,a=0,i=[];++n<s;){var o=e[n];t(o,n,e)&&(i[a++]=o)}return i}var eZ=ZJ;function tZ(){return[]}var rZ=tZ,nZ=eZ,sZ=rZ,aZ=Object.prototype,iZ=aZ.propertyIsEnumerable,L_=Object.getOwnPropertySymbols,oZ=L_?function(e){return e==null?[]:(e=Object(e),nZ(L_(e),function(t){return iZ.call(e,t)}))}:sZ,lZ=oZ;function cZ(e,t){for(var n=-1,s=Array(e);++n<e;)s[n]=t(n);return s}var dZ=cZ,uZ=As,mZ=Ps,hZ="[object Arguments]";function pZ(e){return mZ(e)&&uZ(e)==hZ}var fZ=pZ,$_=fZ,xZ=Ps,dE=Object.prototype,gZ=dE.hasOwnProperty,yZ=dE.propertyIsEnumerable,bZ=$_(function(){return arguments}())?$_:function(e){return xZ(e)&&gZ.call(e,"callee")&&!yZ.call(e,"callee")},l2=bZ,Vh={exports:{}};function vZ(){return!1}var jZ=vZ;Vh.exports;(function(e,t){var n=Yn,s=jZ,a=t&&!t.nodeType&&t,i=a&&!0&&e&&!e.nodeType&&e,o=i&&i.exports===a,l=o?n.Buffer:void 0,c=l?l.isBuffer:void 0,d=c||s;e.exports=d})(Vh,Vh.exports);var uE=Vh.exports,wZ=9007199254740991,NZ=/^(?:0|[1-9]\d*)$/;function _Z(e,t){var n=typeof e;return t=t??wZ,!!t&&(n=="number"||n!="symbol"&&NZ.test(e))&&e>-1&&e%1==0&&e<t}var c2=_Z,kZ=9007199254740991;function SZ(e){return typeof e=="number"&&e>-1&&e%1==0&&e<=kZ}var d2=SZ,CZ=As,AZ=d2,PZ=Ps,EZ="[object Arguments]",OZ="[object Array]",TZ="[object Boolean]",MZ="[object Date]",LZ="[object Error]",$Z="[object Function]",RZ="[object Map]",IZ="[object Number]",DZ="[object Object]",FZ="[object RegExp]",BZ="[object Set]",zZ="[object String]",qZ="[object WeakMap]",UZ="[object ArrayBuffer]",WZ="[object DataView]",VZ="[object Float32Array]",HZ="[object Float64Array]",KZ="[object Int8Array]",GZ="[object Int16Array]",QZ="[object Int32Array]",YZ="[object Uint8Array]",XZ="[object Uint8ClampedArray]",JZ="[object Uint16Array]",ZZ="[object Uint32Array]",ot={};ot[VZ]=ot[HZ]=ot[KZ]=ot[GZ]=ot[QZ]=ot[YZ]=ot[XZ]=ot[JZ]=ot[ZZ]=!0;ot[EZ]=ot[OZ]=ot[UZ]=ot[TZ]=ot[WZ]=ot[MZ]=ot[LZ]=ot[$Z]=ot[RZ]=ot[IZ]=ot[DZ]=ot[FZ]=ot[BZ]=ot[zZ]=ot[qZ]=!1;function eee(e){return PZ(e)&&AZ(e.length)&&!!ot[CZ(e)]}var tee=eee;function ree(e){return function(t){return e(t)}}var mE=ree,Hh={exports:{}};Hh.exports;(function(e,t){var n=vP,s=t&&!t.nodeType&&t,a=s&&!0&&e&&!e.nodeType&&e,i=a&&a.exports===s,o=i&&n.process,l=function(){try{var c=a&&a.require&&a.require("util").types;return c||o&&o.binding&&o.binding("util")}catch{}}();e.exports=l})(Hh,Hh.exports);var nee=Hh.exports,see=tee,aee=mE,R_=nee,I_=R_&&R_.isTypedArray,iee=I_?aee(I_):see,hE=iee,oee=dZ,lee=l2,cee=Or,dee=uE,uee=c2,mee=hE,hee=Object.prototype,pee=hee.hasOwnProperty;function fee(e,t){var n=cee(e),s=!n&&lee(e),a=!n&&!s&&dee(e),i=!n&&!s&&!a&&mee(e),o=n||s||a||i,l=o?oee(e.length,String):[],c=l.length;for(var d in e)(t||pee.call(e,d))&&!(o&&(d=="length"||a&&(d=="offset"||d=="parent")||i&&(d=="buffer"||d=="byteLength"||d=="byteOffset")||uee(d,c)))&&l.push(d);return l}var xee=fee,gee=Object.prototype;function yee(e){var t=e&&e.constructor,n=typeof t=="function"&&t.prototype||gee;return e===n}var bee=yee;function vee(e,t){return function(n){return e(t(n))}}var pE=vee,jee=pE,wee=jee(Object.keys,Object),Nee=wee,_ee=bee,kee=Nee,See=Object.prototype,Cee=See.hasOwnProperty;function Aee(e){if(!_ee(e))return kee(e);var t=[];for(var n in Object(e))Cee.call(e,n)&&n!="constructor"&&t.push(n);return t}var Pee=Aee,Eee=V1,Oee=d2;function Tee(e){return e!=null&&Oee(e.length)&&!Eee(e)}var Pu=Tee,Mee=xee,Lee=Pee,$ee=Pu;function Ree(e){return $ee(e)?Mee(e):Lee(e)}var Ip=Ree,Iee=JJ,Dee=lZ,Fee=Ip;function Bee(e){return Iee(e,Fee,Dee)}var zee=Bee,D_=zee,qee=1,Uee=Object.prototype,Wee=Uee.hasOwnProperty;function Vee(e,t,n,s,a,i){var o=n&qee,l=D_(e),c=l.length,d=D_(t),m=d.length;if(c!=m&&!o)return!1;for(var u=c;u--;){var h=l[u];if(!(o?h in t:Wee.call(t,h)))return!1}var f=i.get(e),b=i.get(t);if(f&&b)return f==t&&b==e;var g=!0;i.set(e,t),i.set(t,e);for(var x=o;++u<c;){h=l[u];var p=e[h],y=t[h];if(s)var v=o?s(y,p,h,t,e,i):s(p,y,h,e,t,i);if(!(v===void 0?p===y||a(p,y,n,s,i):v)){g=!1;break}x||(x=h=="constructor")}if(g&&!x){var N=e.constructor,w=t.constructor;N!=w&&"constructor"in e&&"constructor"in t&&!(typeof N=="function"&&N instanceof N&&typeof w=="function"&&w instanceof w)&&(g=!1)}return i.delete(e),i.delete(t),g}var Hee=Vee,Kee=$i,Gee=Yn,Qee=Kee(Gee,"DataView"),Yee=Qee,Xee=$i,Jee=Yn,Zee=Xee(Jee,"Promise"),ete=Zee,tte=$i,rte=Yn,nte=tte(rte,"Set"),fE=nte,ste=$i,ate=Yn,ite=ste(ate,"WeakMap"),ote=ite,Wy=Yee,Vy=K1,Hy=ete,Ky=fE,Gy=ote,xE=As,Fl=wP,F_="[object Map]",lte="[object Object]",B_="[object Promise]",z_="[object Set]",q_="[object WeakMap]",U_="[object DataView]",cte=Fl(Wy),dte=Fl(Vy),ute=Fl(Hy),mte=Fl(Ky),hte=Fl(Gy),qa=xE;(Wy&&qa(new Wy(new ArrayBuffer(1)))!=U_||Vy&&qa(new Vy)!=F_||Hy&&qa(Hy.resolve())!=B_||Ky&&qa(new Ky)!=z_||Gy&&qa(new Gy)!=q_)&&(qa=function(e){var t=xE(e),n=t==lte?e.constructor:void 0,s=n?Fl(n):"";if(s)switch(s){case cte:return U_;case dte:return F_;case ute:return B_;case mte:return z_;case hte:return q_}return t});var pte=qa,vx=sE,fte=lE,xte=KJ,gte=Hee,W_=pte,V_=Or,H_=uE,yte=hE,bte=1,K_="[object Arguments]",G_="[object Array]",um="[object Object]",vte=Object.prototype,Q_=vte.hasOwnProperty;function jte(e,t,n,s,a,i){var o=V_(e),l=V_(t),c=o?G_:W_(e),d=l?G_:W_(t);c=c==K_?um:c,d=d==K_?um:d;var m=c==um,u=d==um,h=c==d;if(h&&H_(e)){if(!H_(t))return!1;o=!0,m=!1}if(h&&!m)return i||(i=new vx),o||yte(e)?fte(e,t,n,s,a,i):xte(e,t,c,n,s,a,i);if(!(n&bte)){var f=m&&Q_.call(e,"__wrapped__"),b=u&&Q_.call(t,"__wrapped__");if(f||b){var g=f?e.value():e,x=b?t.value():t;return i||(i=new vx),a(g,x,n,s,i)}}return h?(i||(i=new vx),gte(e,t,n,s,a,i)):!1}var wte=jte,Nte=wte,Y_=Ps;function gE(e,t,n,s,a){return e===t?!0:e==null||t==null||!Y_(e)&&!Y_(t)?e!==e&&t!==t:Nte(e,t,n,s,gE,a)}var u2=gE,_te=sE,kte=u2,Ste=1,Cte=2;function Ate(e,t,n,s){var a=n.length,i=a,o=!s;if(e==null)return!i;for(e=Object(e);a--;){var l=n[a];if(o&&l[2]?l[1]!==e[l[0]]:!(l[0]in e))return!1}for(;++a<i;){l=n[a];var c=l[0],d=e[c],m=l[1];if(o&&l[2]){if(d===void 0&&!(c in e))return!1}else{var u=new _te;if(s)var h=s(d,m,c,e,t,u);if(!(h===void 0?kte(m,d,Ste|Cte,s,u):h))return!1}}return!0}var Pte=Ate,Ete=Sa;function Ote(e){return e===e&&!Ete(e)}var yE=Ote,Tte=yE,Mte=Ip;function Lte(e){for(var t=Mte(e),n=t.length;n--;){var s=t[n],a=e[s];t[n]=[s,a,Tte(a)]}return t}var $te=Lte;function Rte(e,t){return function(n){return n==null?!1:n[e]===t&&(t!==void 0||e in Object(n))}}var bE=Rte,Ite=Pte,Dte=$te,Fte=bE;function Bte(e){var t=Dte(e);return t.length==1&&t[0][2]?Fte(t[0][0],t[0][1]):function(n){return n===e||Ite(n,e,t)}}var zte=Bte;function qte(e,t){return e!=null&&t in Object(e)}var Ute=qte,Wte=CP,Vte=l2,Hte=Or,Kte=c2,Gte=d2,Qte=wp;function Yte(e,t,n){t=Wte(t,e);for(var s=-1,a=t.length,i=!1;++s<a;){var o=Qte(t[s]);if(!(i=e!=null&&n(e,o)))break;e=e[o]}return i||++s!=a?i:(a=e==null?0:e.length,!!a&&Gte(a)&&Kte(o,a)&&(Hte(e)||Vte(e)))}var Xte=Yte,Jte=Ute,Zte=Xte;function ere(e,t){return e!=null&&Zte(e,t,Jte)}var tre=ere,rre=u2,nre=AP,sre=tre,are=W1,ire=yE,ore=bE,lre=wp,cre=1,dre=2;function ure(e,t){return are(e)&&ire(t)?ore(lre(e),t):function(n){var s=nre(n,e);return s===void 0&&s===t?sre(n,e):rre(t,s,cre|dre)}}var mre=ure;function hre(e){return e}var Bl=hre;function pre(e){return function(t){return t==null?void 0:t[e]}}var fre=pre,xre=X1;function gre(e){return function(t){return xre(t,e)}}var yre=gre,bre=fre,vre=yre,jre=W1,wre=wp;function Nre(e){return jre(e)?bre(wre(e)):vre(e)}var _re=Nre,kre=zte,Sre=mre,Cre=Bl,Are=Or,Pre=_re;function Ere(e){return typeof e=="function"?e:e==null?Cre:typeof e=="object"?Are(e)?Sre(e[0],e[1]):kre(e):Pre(e)}var Xn=Ere;function Ore(e,t,n,s){for(var a=e.length,i=n+(s?1:-1);s?i--:++i<a;)if(t(e[i],i,e))return i;return-1}var vE=Ore;function Tre(e){return e!==e}var Mre=Tre;function Lre(e,t,n){for(var s=n-1,a=e.length;++s<a;)if(e[s]===t)return s;return-1}var $re=Lre,Rre=vE,Ire=Mre,Dre=$re;function Fre(e,t,n){return t===t?Dre(e,t,n):Rre(e,Ire,n)}var Bre=Fre,zre=Bre;function qre(e,t){var n=e==null?0:e.length;return!!n&&zre(e,t,0)>-1}var Ure=qre;function Wre(e,t,n){for(var s=-1,a=e==null?0:e.length;++s<a;)if(n(t,e[s]))return!0;return!1}var Vre=Wre;function Hre(){}var Kre=Hre,jx=fE,Gre=Kre,Qre=o2,Yre=1/0,Xre=jx&&1/Qre(new jx([,-0]))[1]==Yre?function(e){return new jx(e)}:Gre,Jre=Xre,Zre=aE,ene=Ure,tne=Vre,rne=oE,nne=Jre,sne=o2,ane=200;function ine(e,t,n){var s=-1,a=ene,i=e.length,o=!0,l=[],c=l;if(n)o=!1,a=tne;else if(i>=ane){var d=t?null:nne(e);if(d)return sne(d);o=!1,a=rne,c=new Zre}else c=t?[]:l;e:for(;++s<i;){var m=e[s],u=t?t(m):m;if(m=n||m!==0?m:0,o&&u===u){for(var h=c.length;h--;)if(c[h]===u)continue e;t&&c.push(u),l.push(m)}else a(c,u,n)||(c!==l&&c.push(u),l.push(m))}return l}var one=ine,lne=Xn,cne=one;function dne(e,t){return e&&e.length?cne(e,lne(t)):[]}var une=dne;const X_=Ke(une);function jE(e,t,n){return t===!0?X_(e,n):Me(t)?X_(e,t):e}function el(e){"@babel/helpers - typeof";return el=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},el(e)}var mne=["ref"];function J_(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Jn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?J_(Object(n),!0).forEach(function(s){Dp(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):J_(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function hne(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Z_(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,NE(s.key),s)}}function pne(e,t,n){return t&&Z_(e.prototype,t),n&&Z_(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function fne(e,t,n){return t=Kh(t),xne(e,wE()?Reflect.construct(t,n||[],Kh(e).constructor):t.apply(e,n))}function xne(e,t){if(t&&(el(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return gne(e)}function gne(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function wE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(wE=function(){return!!e})()}function Kh(e){return Kh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Kh(e)}function yne(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qy(e,t)}function Qy(e,t){return Qy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Qy(e,t)}function Dp(e,t,n){return t=NE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function NE(e){var t=bne(e,"string");return el(t)=="symbol"?t:t+""}function bne(e,t){if(el(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(el(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function vne(e,t){if(e==null)return{};var n=jne(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function jne(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function wne(e){return e.value}function Nne(e,t){if(Y.isValidElement(e))return Y.cloneElement(e,t);if(typeof e=="function")return Y.createElement(e,t);t.ref;var n=vne(t,mne);return Y.createElement(i2,n)}var e4=1,bo=function(e){function t(){var n;hne(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=fne(this,t,[].concat(a)),Dp(n,"lastBoundingBox",{width:-1,height:-1}),n}return yne(t,e),pne(t,[{key:"componentDidMount",value:function(){this.updateBBox()}},{key:"componentDidUpdate",value:function(){this.updateBBox()}},{key:"getBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();return s.height=this.wrapperNode.offsetHeight,s.width=this.wrapperNode.offsetWidth,s}return null}},{key:"updateBBox",value:function(){var s=this.props.onBBoxUpdate,a=this.getBBox();a?(Math.abs(a.width-this.lastBoundingBox.width)>e4||Math.abs(a.height-this.lastBoundingBox.height)>e4)&&(this.lastBoundingBox.width=a.width,this.lastBoundingBox.height=a.height,s&&s(a)):(this.lastBoundingBox.width!==-1||this.lastBoundingBox.height!==-1)&&(this.lastBoundingBox.width=-1,this.lastBoundingBox.height=-1,s&&s(null))}},{key:"getBBoxSnapshot",value:function(){return this.lastBoundingBox.width>=0&&this.lastBoundingBox.height>=0?Jn({},this.lastBoundingBox):{width:0,height:0}}},{key:"getDefaultPosition",value:function(s){var a=this.props,i=a.layout,o=a.align,l=a.verticalAlign,c=a.margin,d=a.chartWidth,m=a.chartHeight,u,h;if(!s||(s.left===void 0||s.left===null)&&(s.right===void 0||s.right===null))if(o==="center"&&i==="vertical"){var f=this.getBBoxSnapshot();u={left:((d||0)-f.width)/2}}else u=o==="right"?{right:c&&c.right||0}:{left:c&&c.left||0};if(!s||(s.top===void 0||s.top===null)&&(s.bottom===void 0||s.bottom===null))if(l==="middle"){var b=this.getBBoxSnapshot();h={top:((m||0)-b.height)/2}}else h=l==="bottom"?{bottom:c&&c.bottom||0}:{top:c&&c.top||0};return Jn(Jn({},u),h)}},{key:"render",value:function(){var s=this,a=this.props,i=a.content,o=a.width,l=a.height,c=a.wrapperStyle,d=a.payloadUniqBy,m=a.payload,u=Jn(Jn({position:"absolute",width:o||"auto",height:l||"auto"},this.getDefaultPosition(c)),c);return Y.createElement("div",{className:"recharts-legend-wrapper",style:u,ref:function(f){s.wrapperNode=f}},Nne(i,Jn(Jn({},this.props),{},{payload:jE(m,d,wne)})))}}],[{key:"getWithHeight",value:function(s,a){var i=Jn(Jn({},this.defaultProps),s.props),o=i.layout;return o==="vertical"&&ge(s.props.height)?{height:s.props.height}:o==="horizontal"?{width:s.props.width||a}:null}}])}(k.PureComponent);Dp(bo,"displayName","Legend");Dp(bo,"defaultProps",{iconSize:14,layout:"horizontal",align:"center",verticalAlign:"bottom"});var t4=Su,_ne=l2,kne=Or,r4=t4?t4.isConcatSpreadable:void 0;function Sne(e){return kne(e)||_ne(e)||!!(r4&&e&&e[r4])}var Cne=Sne,Ane=cE,Pne=Cne;function _E(e,t,n,s,a){var i=-1,o=e.length;for(n||(n=Pne),a||(a=[]);++i<o;){var l=e[i];t>0&&n(l)?t>1?_E(l,t-1,n,s,a):Ane(a,l):s||(a[a.length]=l)}return a}var kE=_E;function Ene(e){return function(t,n,s){for(var a=-1,i=Object(t),o=s(t),l=o.length;l--;){var c=o[e?l:++a];if(n(i[c],c,i)===!1)break}return t}}var One=Ene,Tne=One,Mne=Tne(),Lne=Mne,$ne=Lne,Rne=Ip;function Ine(e,t){return e&&$ne(e,t,Rne)}var SE=Ine,Dne=Pu;function Fne(e,t){return function(n,s){if(n==null)return n;if(!Dne(n))return e(n,s);for(var a=n.length,i=t?a:-1,o=Object(n);(t?i--:++i<a)&&s(o[i],i,o)!==!1;);return n}}var Bne=Fne,zne=SE,qne=Bne,Une=qne(zne),m2=Une,Wne=m2,Vne=Pu;function Hne(e,t){var n=-1,s=Vne(e)?Array(e.length):[];return Wne(e,function(a,i,o){s[++n]=t(a,i,o)}),s}var CE=Hne;function Kne(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}var Gne=Kne,n4=Ml;function Qne(e,t){if(e!==t){var n=e!==void 0,s=e===null,a=e===e,i=n4(e),o=t!==void 0,l=t===null,c=t===t,d=n4(t);if(!l&&!d&&!i&&e>t||i&&o&&c&&!l&&!d||s&&o&&c||!n&&c||!a)return 1;if(!s&&!i&&!d&&e<t||d&&n&&a&&!s&&!i||l&&n&&a||!o&&a||!c)return-1}return 0}var Yne=Qne,Xne=Yne;function Jne(e,t,n){for(var s=-1,a=e.criteria,i=t.criteria,o=a.length,l=n.length;++s<o;){var c=Xne(a[s],i[s]);if(c){if(s>=l)return c;var d=n[s];return c*(d=="desc"?-1:1)}}return e.index-t.index}var Zne=Jne,wx=Y1,ese=X1,tse=Xn,rse=CE,nse=Gne,sse=mE,ase=Zne,ise=Bl,ose=Or;function lse(e,t,n){t.length?t=wx(t,function(i){return ose(i)?function(o){return ese(o,i.length===1?i[0]:i)}:i}):t=[ise];var s=-1;t=wx(t,sse(tse));var a=rse(e,function(i,o,l){var c=wx(t,function(d){return d(i)});return{criteria:c,index:++s,value:i}});return nse(a,function(i,o){return ase(i,o,n)})}var cse=lse;function dse(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}var use=dse,mse=use,s4=Math.max;function hse(e,t,n){return t=s4(t===void 0?e.length-1:t,0),function(){for(var s=arguments,a=-1,i=s4(s.length-t,0),o=Array(i);++a<i;)o[a]=s[t+a];a=-1;for(var l=Array(t+1);++a<t;)l[a]=s[a];return l[t]=n(o),mse(e,this,l)}}var pse=hse;function fse(e){return function(){return e}}var xse=fse,gse=$i,yse=function(){try{var e=gse(Object,"defineProperty");return e({},"",{}),e}catch{}}(),AE=yse,bse=xse,a4=AE,vse=Bl,jse=a4?function(e,t){return a4(e,"toString",{configurable:!0,enumerable:!1,value:bse(t),writable:!0})}:vse,wse=jse,Nse=800,_se=16,kse=Date.now;function Sse(e){var t=0,n=0;return function(){var s=kse(),a=_se-(s-n);if(n=s,a>0){if(++t>=Nse)return arguments[0]}else t=0;return e.apply(void 0,arguments)}}var Cse=Sse,Ase=wse,Pse=Cse,Ese=Pse(Ase),Ose=Ese,Tse=Bl,Mse=pse,Lse=Ose;function $se(e,t){return Lse(Mse(e,t,Tse),e+"")}var Rse=$se,Ise=H1,Dse=Pu,Fse=c2,Bse=Sa;function zse(e,t,n){if(!Bse(n))return!1;var s=typeof t;return(s=="number"?Dse(n)&&Fse(t,n.length):s=="string"&&t in n)?Ise(n[t],e):!1}var Fp=zse,qse=kE,Use=cse,Wse=Rse,i4=Fp,Vse=Wse(function(e,t){if(e==null)return[];var n=t.length;return n>1&&i4(e,t[0],t[1])?t=[]:n>2&&i4(t[0],t[1],t[2])&&(t=[t[0]]),Use(e,qse(t,1),[])}),Hse=Vse;const h2=Ke(Hse);function _d(e){"@babel/helpers - typeof";return _d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},_d(e)}function Yy(){return Yy=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Yy.apply(this,arguments)}function Kse(e,t){return Xse(e)||Yse(e,t)||Qse(e,t)||Gse()}function Gse(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Qse(e,t){if(e){if(typeof e=="string")return o4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o4(e,t)}}function o4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Yse(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Xse(e){if(Array.isArray(e))return e}function l4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Nx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l4(Object(n),!0).forEach(function(s){Jse(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l4(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Jse(e,t,n){return t=Zse(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Zse(e){var t=eae(e,"string");return _d(t)=="symbol"?t:t+""}function eae(e,t){if(_d(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(_d(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function tae(e){return Array.isArray(e)&&Et(e[0])&&Et(e[1])?e.join(" ~ "):e}var rae=function(t){var n=t.separator,s=n===void 0?" : ":n,a=t.contentStyle,i=a===void 0?{}:a,o=t.itemStyle,l=o===void 0?{}:o,c=t.labelStyle,d=c===void 0?{}:c,m=t.payload,u=t.formatter,h=t.itemSorter,f=t.wrapperClassName,b=t.labelClassName,g=t.label,x=t.labelFormatter,p=t.accessibilityLayer,y=p===void 0?!1:p,v=function(){if(m&&m.length){var R={padding:0,margin:0},I=(h?h2(m,h):m).map(function(O,L){if(O.type==="none")return null;var F=Nx({display:"block",paddingTop:4,paddingBottom:4,color:O.color||"#000"},l),M=O.formatter||u||tae,D=O.value,W=O.name,P=D,V=W;if(M&&P!=null&&V!=null){var K=M(D,W,O,L,m);if(Array.isArray(K)){var ne=Kse(K,2);P=ne[0],V=ne[1]}else P=K}return Y.createElement("li",{className:"recharts-tooltip-item",key:"tooltip-item-".concat(L),style:F},Et(V)?Y.createElement("span",{className:"recharts-tooltip-item-name"},V):null,Et(V)?Y.createElement("span",{className:"recharts-tooltip-item-separator"},s):null,Y.createElement("span",{className:"recharts-tooltip-item-value"},P),Y.createElement("span",{className:"recharts-tooltip-item-unit"},O.unit||""))});return Y.createElement("ul",{className:"recharts-tooltip-item-list",style:R},I)}return null},N=Nx({margin:0,padding:10,backgroundColor:"#fff",border:"1px solid #ccc",whiteSpace:"nowrap"},i),w=Nx({margin:0},d),j=!Fe(g),_=j?g:"",S=De("recharts-default-tooltip",f),T=De("recharts-tooltip-label",b);j&&x&&m!==void 0&&m!==null&&(_=x(g,m));var A=y?{role:"status","aria-live":"assertive"}:{};return Y.createElement("div",Yy({className:S,style:N},A),Y.createElement("p",{className:T,style:w},Y.isValidElement(_)?_:"".concat(_)),v())};function kd(e){"@babel/helpers - typeof";return kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},kd(e)}function mm(e,t,n){return t=nae(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function nae(e){var t=sae(e,"string");return kd(t)=="symbol"?t:t+""}function sae(e,t){if(kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(kd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var uc="recharts-tooltip-wrapper",aae={visibility:"hidden"};function iae(e){var t=e.coordinate,n=e.translateX,s=e.translateY;return De(uc,mm(mm(mm(mm({},"".concat(uc,"-right"),ge(n)&&t&&ge(t.x)&&n>=t.x),"".concat(uc,"-left"),ge(n)&&t&&ge(t.x)&&n<t.x),"".concat(uc,"-bottom"),ge(s)&&t&&ge(t.y)&&s>=t.y),"".concat(uc,"-top"),ge(s)&&t&&ge(t.y)&&s<t.y))}function c4(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.key,a=e.offsetTopLeft,i=e.position,o=e.reverseDirection,l=e.tooltipDimension,c=e.viewBox,d=e.viewBoxDimension;if(i&&ge(i[s]))return i[s];var m=n[s]-l-a,u=n[s]+a;if(t[s])return o[s]?m:u;if(o[s]){var h=m,f=c[s];return h<f?Math.max(u,c[s]):Math.max(m,c[s])}var b=u+l,g=c[s]+d;return b>g?Math.max(m,c[s]):Math.max(u,c[s])}function oae(e){var t=e.translateX,n=e.translateY,s=e.useTranslate3d;return{transform:s?"translate3d(".concat(t,"px, ").concat(n,"px, 0)"):"translate(".concat(t,"px, ").concat(n,"px)")}}function lae(e){var t=e.allowEscapeViewBox,n=e.coordinate,s=e.offsetTopLeft,a=e.position,i=e.reverseDirection,o=e.tooltipBox,l=e.useTranslate3d,c=e.viewBox,d,m,u;return o.height>0&&o.width>0&&n?(m=c4({allowEscapeViewBox:t,coordinate:n,key:"x",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.width,viewBox:c,viewBoxDimension:c.width}),u=c4({allowEscapeViewBox:t,coordinate:n,key:"y",offsetTopLeft:s,position:a,reverseDirection:i,tooltipDimension:o.height,viewBox:c,viewBoxDimension:c.height}),d=oae({translateX:m,translateY:u,useTranslate3d:l})):d=aae,{cssProperties:d,cssClasses:iae({translateX:m,translateY:u,coordinate:n})}}function tl(e){"@babel/helpers - typeof";return tl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tl(e)}function d4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function u4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?d4(Object(n),!0).forEach(function(s){Jy(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d4(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function cae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function dae(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,EE(s.key),s)}}function uae(e,t,n){return t&&dae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function mae(e,t,n){return t=Gh(t),hae(e,PE()?Reflect.construct(t,n||[],Gh(e).constructor):t.apply(e,n))}function hae(e,t){if(t&&(tl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return pae(e)}function pae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function PE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(PE=function(){return!!e})()}function Gh(e){return Gh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Gh(e)}function fae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Xy(e,t)}function Xy(e,t){return Xy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Xy(e,t)}function Jy(e,t,n){return t=EE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function EE(e){var t=xae(e,"string");return tl(t)=="symbol"?t:t+""}function xae(e,t){if(tl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(tl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var m4=1,gae=function(e){function t(){var n;cae(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=mae(this,t,[].concat(a)),Jy(n,"state",{dismissed:!1,dismissedAtCoordinate:{x:0,y:0},lastBoundingBox:{width:-1,height:-1}}),Jy(n,"handleKeyDown",function(o){if(o.key==="Escape"){var l,c,d,m;n.setState({dismissed:!0,dismissedAtCoordinate:{x:(l=(c=n.props.coordinate)===null||c===void 0?void 0:c.x)!==null&&l!==void 0?l:0,y:(d=(m=n.props.coordinate)===null||m===void 0?void 0:m.y)!==null&&d!==void 0?d:0}})}}),n}return fae(t,e),uae(t,[{key:"updateBBox",value:function(){if(this.wrapperNode&&this.wrapperNode.getBoundingClientRect){var s=this.wrapperNode.getBoundingClientRect();(Math.abs(s.width-this.state.lastBoundingBox.width)>m4||Math.abs(s.height-this.state.lastBoundingBox.height)>m4)&&this.setState({lastBoundingBox:{width:s.width,height:s.height}})}else(this.state.lastBoundingBox.width!==-1||this.state.lastBoundingBox.height!==-1)&&this.setState({lastBoundingBox:{width:-1,height:-1}})}},{key:"componentDidMount",value:function(){document.addEventListener("keydown",this.handleKeyDown),this.updateBBox()}},{key:"componentWillUnmount",value:function(){document.removeEventListener("keydown",this.handleKeyDown)}},{key:"componentDidUpdate",value:function(){var s,a;this.props.active&&this.updateBBox(),this.state.dismissed&&(((s=this.props.coordinate)===null||s===void 0?void 0:s.x)!==this.state.dismissedAtCoordinate.x||((a=this.props.coordinate)===null||a===void 0?void 0:a.y)!==this.state.dismissedAtCoordinate.y)&&(this.state.dismissed=!1)}},{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.children,m=a.coordinate,u=a.hasPayload,h=a.isAnimationActive,f=a.offset,b=a.position,g=a.reverseDirection,x=a.useTranslate3d,p=a.viewBox,y=a.wrapperStyle,v=lae({allowEscapeViewBox:o,coordinate:m,offsetTopLeft:f,position:b,reverseDirection:g,tooltipBox:this.state.lastBoundingBox,useTranslate3d:x,viewBox:p}),N=v.cssClasses,w=v.cssProperties,j=u4(u4({transition:h&&i?"transform ".concat(l,"ms ").concat(c):void 0},w),{},{pointerEvents:"none",visibility:!this.state.dismissed&&i&&u?"visible":"hidden",position:"absolute",top:0,left:0},y);return Y.createElement("div",{tabIndex:-1,className:N,style:j,ref:function(S){s.wrapperNode=S}},d)}}])}(k.PureComponent),yae=function(){return!(typeof window<"u"&&window.document&&window.document.createElement&&window.setTimeout)},zl={isSsr:yae()};function rl(e){"@babel/helpers - typeof";return rl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},rl(e)}function h4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function p4(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?h4(Object(n),!0).forEach(function(s){p2(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):h4(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function bae(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function vae(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,TE(s.key),s)}}function jae(e,t,n){return t&&vae(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function wae(e,t,n){return t=Qh(t),Nae(e,OE()?Reflect.construct(t,n||[],Qh(e).constructor):t.apply(e,n))}function Nae(e,t){if(t&&(rl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return _ae(e)}function _ae(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function OE(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(OE=function(){return!!e})()}function Qh(e){return Qh=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},Qh(e)}function kae(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zy(e,t)}function Zy(e,t){return Zy=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Zy(e,t)}function p2(e,t,n){return t=TE(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function TE(e){var t=Sae(e,"string");return rl(t)=="symbol"?t:t+""}function Sae(e,t){if(rl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(rl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Cae(e){return e.dataKey}function Aae(e,t){return Y.isValidElement(e)?Y.cloneElement(e,t):typeof e=="function"?Y.createElement(e,t):Y.createElement(rae,t)}var Nn=function(e){function t(){return bae(this,t),wae(this,t,arguments)}return kae(t,e),jae(t,[{key:"render",value:function(){var s=this,a=this.props,i=a.active,o=a.allowEscapeViewBox,l=a.animationDuration,c=a.animationEasing,d=a.content,m=a.coordinate,u=a.filterNull,h=a.isAnimationActive,f=a.offset,b=a.payload,g=a.payloadUniqBy,x=a.position,p=a.reverseDirection,y=a.useTranslate3d,v=a.viewBox,N=a.wrapperStyle,w=b??[];u&&w.length&&(w=jE(b.filter(function(_){return _.value!=null&&(_.hide!==!0||s.props.includeHidden)}),g,Cae));var j=w.length>0;return Y.createElement(gae,{allowEscapeViewBox:o,animationDuration:l,animationEasing:c,isAnimationActive:h,active:i,coordinate:m,hasPayload:j,offset:f,position:x,reverseDirection:p,useTranslate3d:y,viewBox:v,wrapperStyle:N},Aae(d,p4(p4({},this.props),{},{payload:w})))}}])}(k.PureComponent);p2(Nn,"displayName","Tooltip");p2(Nn,"defaultProps",{accessibilityLayer:!1,allowEscapeViewBox:{x:!1,y:!1},animationDuration:400,animationEasing:"ease",contentStyle:{},coordinate:{x:0,y:0},cursor:!0,cursorStyle:{},filterNull:!0,isAnimationActive:!zl.isSsr,itemStyle:{},labelStyle:{},offset:10,reverseDirection:{x:!1,y:!1},separator:" : ",trigger:"hover",useTranslate3d:!1,viewBox:{x:0,y:0,height:0,width:0},wrapperStyle:{}});var Pae=Yn,Eae=function(){return Pae.Date.now()},Oae=Eae,Tae=/\s/;function Mae(e){for(var t=e.length;t--&&Tae.test(e.charAt(t)););return t}var Lae=Mae,$ae=Lae,Rae=/^\s+/;function Iae(e){return e&&e.slice(0,$ae(e)+1).replace(Rae,"")}var Dae=Iae,Fae=Dae,f4=Sa,Bae=Ml,x4=NaN,zae=/^[-+]0x[0-9a-f]+$/i,qae=/^0b[01]+$/i,Uae=/^0o[0-7]+$/i,Wae=parseInt;function Vae(e){if(typeof e=="number")return e;if(Bae(e))return x4;if(f4(e)){var t=typeof e.valueOf=="function"?e.valueOf():e;e=f4(t)?t+"":t}if(typeof e!="string")return e===0?e:+e;e=Fae(e);var n=qae.test(e);return n||Uae.test(e)?Wae(e.slice(2),n?2:8):zae.test(e)?x4:+e}var ME=Vae,Hae=Sa,_x=Oae,g4=ME,Kae="Expected a function",Gae=Math.max,Qae=Math.min;function Yae(e,t,n){var s,a,i,o,l,c,d=0,m=!1,u=!1,h=!0;if(typeof e!="function")throw new TypeError(Kae);t=g4(t)||0,Hae(n)&&(m=!!n.leading,u="maxWait"in n,i=u?Gae(g4(n.maxWait)||0,t):i,h="trailing"in n?!!n.trailing:h);function f(j){var _=s,S=a;return s=a=void 0,d=j,o=e.apply(S,_),o}function b(j){return d=j,l=setTimeout(p,t),m?f(j):o}function g(j){var _=j-c,S=j-d,T=t-_;return u?Qae(T,i-S):T}function x(j){var _=j-c,S=j-d;return c===void 0||_>=t||_<0||u&&S>=i}function p(){var j=_x();if(x(j))return y(j);l=setTimeout(p,g(j))}function y(j){return l=void 0,h&&s?f(j):(s=a=void 0,o)}function v(){l!==void 0&&clearTimeout(l),d=0,s=c=a=l=void 0}function N(){return l===void 0?o:y(_x())}function w(){var j=_x(),_=x(j);if(s=arguments,a=this,c=j,_){if(l===void 0)return b(c);if(u)return clearTimeout(l),l=setTimeout(p,t),f(c)}return l===void 0&&(l=setTimeout(p,t)),o}return w.cancel=v,w.flush=N,w}var Xae=Yae,Jae=Xae,Zae=Sa,eie="Expected a function";function tie(e,t,n){var s=!0,a=!0;if(typeof e!="function")throw new TypeError(eie);return Zae(n)&&(s="leading"in n?!!n.leading:s,a="trailing"in n?!!n.trailing:a),Jae(e,t,{leading:s,maxWait:t,trailing:a})}var rie=tie;const LE=Ke(rie);function Sd(e){"@babel/helpers - typeof";return Sd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Sd(e)}function y4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function hm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?y4(Object(n),!0).forEach(function(s){nie(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):y4(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function nie(e,t,n){return t=sie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sie(e){var t=aie(e,"string");return Sd(t)=="symbol"?t:t+""}function aie(e,t){if(Sd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Sd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iie(e,t){return die(e)||cie(e,t)||lie(e,t)||oie()}function oie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lie(e,t){if(e){if(typeof e=="string")return b4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return b4(e,t)}}function b4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function cie(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function die(e){if(Array.isArray(e))return e}var v4=k.forwardRef(function(e,t){var n=e.aspect,s=e.initialDimension,a=s===void 0?{width:-1,height:-1}:s,i=e.width,o=i===void 0?"100%":i,l=e.height,c=l===void 0?"100%":l,d=e.minWidth,m=d===void 0?0:d,u=e.minHeight,h=e.maxHeight,f=e.children,b=e.debounce,g=b===void 0?0:b,x=e.id,p=e.className,y=e.onResize,v=e.style,N=v===void 0?{}:v,w=k.useRef(null),j=k.useRef();j.current=y,k.useImperativeHandle(t,function(){return Object.defineProperty(w.current,"current",{get:function(){return console.warn("The usage of ref.current.current is deprecated and will no longer be supported."),w.current},configurable:!0})});var _=k.useState({containerWidth:a.width,containerHeight:a.height}),S=iie(_,2),T=S[0],A=S[1],E=k.useCallback(function(I,O){A(function(L){var F=Math.round(I),M=Math.round(O);return L.containerWidth===F&&L.containerHeight===M?L:{containerWidth:F,containerHeight:M}})},[]);k.useEffect(function(){var I=function(W){var P,V=W[0].contentRect,K=V.width,ne=V.height;E(K,ne),(P=j.current)===null||P===void 0||P.call(j,K,ne)};g>0&&(I=LE(I,g,{trailing:!0,leading:!1}));var O=new ResizeObserver(I),L=w.current.getBoundingClientRect(),F=L.width,M=L.height;return E(F,M),O.observe(w.current),function(){O.disconnect()}},[E,g]);var R=k.useMemo(function(){var I=T.containerWidth,O=T.containerHeight;if(I<0||O<0)return null;En(Xa(o)||Xa(c),`The width(%s) and height(%s) are both fixed numbers,
       maybe you don't need to use a ResponsiveContainer.`,o,c),En(!n||n>0,"The aspect(%s) must be greater than zero.",n);var L=Xa(o)?I:o,F=Xa(c)?O:c;n&&n>0&&(L?F=L/n:F&&(L=F*n),h&&F>h&&(F=h)),En(L>0||F>0,`The width(%s) and height(%s) of chart should be greater than 0,
       please check the style of container, or the props width(%s) and height(%s),
       or add a minWidth(%s) or minHeight(%s) or use aspect(%s) to control the
       height and width.`,L,F,o,c,m,u,n);var M=!Array.isArray(f)&&ps(f.type).endsWith("Chart");return Y.Children.map(f,function(D){return Y.isValidElement(D)?k.cloneElement(D,hm({width:L,height:F},M?{style:hm({height:"100%",width:"100%",maxHeight:F,maxWidth:L},D.props.style)}:{})):D})},[n,f,c,h,u,m,T,o]);return Y.createElement("div",{id:x?"".concat(x):void 0,className:De("recharts-responsive-container",p),style:hm(hm({},N),{},{width:o,height:c,minWidth:m,minHeight:u,maxHeight:h}),ref:w},R)}),Bp=function(t){return null};Bp.displayName="Cell";function Cd(e){"@babel/helpers - typeof";return Cd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Cd(e)}function j4(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function eb(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j4(Object(n),!0).forEach(function(s){uie(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j4(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function uie(e,t,n){return t=mie(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function mie(e){var t=hie(e,"string");return Cd(t)=="symbol"?t:t+""}function hie(e,t){if(Cd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Cd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var qi={widthCache:{},cacheCount:0},pie=2e3,fie={position:"absolute",top:"-20000px",left:0,padding:0,margin:0,border:"none",whiteSpace:"pre"},w4="recharts_measurement_span";function xie(e){var t=eb({},e);return Object.keys(t).forEach(function(n){t[n]||delete t[n]}),t}var zc=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{};if(t==null||zl.isSsr)return{width:0,height:0};var s=xie(n),a=JSON.stringify({text:t,copyStyle:s});if(qi.widthCache[a])return qi.widthCache[a];try{var i=document.getElementById(w4);i||(i=document.createElement("span"),i.setAttribute("id",w4),i.setAttribute("aria-hidden","true"),document.body.appendChild(i));var o=eb(eb({},fie),s);Object.assign(i.style,o),i.textContent="".concat(t);var l=i.getBoundingClientRect(),c={width:l.width,height:l.height};return qi.widthCache[a]=c,++qi.cacheCount>pie&&(qi.cacheCount=0,qi.widthCache={}),c}catch{return{width:0,height:0}}},gie=function(t){return{top:t.top+window.scrollY-document.documentElement.clientTop,left:t.left+window.scrollX-document.documentElement.clientLeft}};function Ad(e){"@babel/helpers - typeof";return Ad=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ad(e)}function Yh(e,t){return jie(e)||vie(e,t)||bie(e,t)||yie()}function yie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bie(e,t){if(e){if(typeof e=="string")return N4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return N4(e,t)}}function N4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function vie(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function jie(e){if(Array.isArray(e))return e}function wie(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function _4(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,_ie(s.key),s)}}function Nie(e,t,n){return t&&_4(e.prototype,t),n&&_4(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function _ie(e){var t=kie(e,"string");return Ad(t)=="symbol"?t:t+""}function kie(e,t){if(Ad(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ad(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var k4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([*/])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,S4=/(-?\d+(?:\.\d+)?[a-zA-Z%]*)([+-])(-?\d+(?:\.\d+)?[a-zA-Z%]*)/,Sie=/^px|cm|vh|vw|em|rem|%|mm|in|pt|pc|ex|ch|vmin|vmax|Q$/,Cie=/(-?\d+(?:\.\d+)?)([a-zA-Z%]+)?/,$E={cm:96/2.54,mm:96/25.4,pt:96/72,pc:96/6,in:96,Q:96/(2.54*40),px:1},Aie=Object.keys($E),so="NaN";function Pie(e,t){return e*$E[t]}var pm=function(){function e(t,n){wie(this,e),this.num=t,this.unit=n,this.num=t,this.unit=n,Number.isNaN(t)&&(this.unit=""),n!==""&&!Sie.test(n)&&(this.num=NaN,this.unit=""),Aie.includes(n)&&(this.num=Pie(t,n),this.unit="px")}return Nie(e,[{key:"add",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num+n.num,this.unit)}},{key:"subtract",value:function(n){return this.unit!==n.unit?new e(NaN,""):new e(this.num-n.num,this.unit)}},{key:"multiply",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num*n.num,this.unit||n.unit)}},{key:"divide",value:function(n){return this.unit!==""&&n.unit!==""&&this.unit!==n.unit?new e(NaN,""):new e(this.num/n.num,this.unit||n.unit)}},{key:"toString",value:function(){return"".concat(this.num).concat(this.unit)}},{key:"isNaN",value:function(){return Number.isNaN(this.num)}}],[{key:"parse",value:function(n){var s,a=(s=Cie.exec(n))!==null&&s!==void 0?s:[],i=Yh(a,3),o=i[1],l=i[2];return new e(parseFloat(o),l??"")}}])}();function RE(e){if(e.includes(so))return so;for(var t=e;t.includes("*")||t.includes("/");){var n,s=(n=k4.exec(t))!==null&&n!==void 0?n:[],a=Yh(s,4),i=a[1],o=a[2],l=a[3],c=pm.parse(i??""),d=pm.parse(l??""),m=o==="*"?c.multiply(d):c.divide(d);if(m.isNaN())return so;t=t.replace(k4,m.toString())}for(;t.includes("+")||/.-\d+(?:\.\d+)?/.test(t);){var u,h=(u=S4.exec(t))!==null&&u!==void 0?u:[],f=Yh(h,4),b=f[1],g=f[2],x=f[3],p=pm.parse(b??""),y=pm.parse(x??""),v=g==="+"?p.add(y):p.subtract(y);if(v.isNaN())return so;t=t.replace(S4,v.toString())}return t}var C4=/\(([^()]*)\)/;function Eie(e){for(var t=e;t.includes("(");){var n=C4.exec(t),s=Yh(n,2),a=s[1];t=t.replace(C4,RE(a))}return t}function Oie(e){var t=e.replace(/\s+/g,"");return t=Eie(t),t=RE(t),t}function Tie(e){try{return Oie(e)}catch{return so}}function kx(e){var t=Tie(e.slice(5,-1));return t===so?"":t}var Mie=["x","y","lineHeight","capHeight","scaleToFit","textAnchor","verticalAnchor","fill"],Lie=["dx","dy","angle","className","breakAll"];function tb(){return tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},tb.apply(this,arguments)}function A4(e,t){if(e==null)return{};var n=$ie(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function $ie(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function P4(e,t){return Fie(e)||Die(e,t)||Iie(e,t)||Rie()}function Rie(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Iie(e,t){if(e){if(typeof e=="string")return E4(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return E4(e,t)}}function E4(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Die(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t===0){if(Object(n)!==n)return;c=!1}else for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Fie(e){if(Array.isArray(e))return e}var IE=/[ \f\n\r\t\v\u2028\u2029]+/,DE=function(t){var n=t.children,s=t.breakAll,a=t.style;try{var i=[];Fe(n)||(s?i=n.toString().split(""):i=n.toString().split(IE));var o=i.map(function(c){return{word:c,width:zc(c,a).width}}),l=s?0:zc("",a).width;return{wordsWithComputedWidth:o,spaceWidth:l}}catch{return null}},Bie=function(t,n,s,a,i){var o=t.maxLines,l=t.children,c=t.style,d=t.breakAll,m=ge(o),u=l,h=function(){var L=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[];return L.reduce(function(F,M){var D=M.word,W=M.width,P=F[F.length-1];if(P&&(a==null||i||P.width+W+s<Number(a)))P.words.push(D),P.width+=W+s;else{var V={words:[D],width:W};F.push(V)}return F},[])},f=h(n),b=function(L){return L.reduce(function(F,M){return F.width>M.width?F:M})};if(!m)return f;for(var g="",x=function(L){var F=u.slice(0,L),M=DE({breakAll:d,style:c,children:F+g}).wordsWithComputedWidth,D=h(M),W=D.length>o||b(D).width>Number(a);return[W,D]},p=0,y=u.length-1,v=0,N;p<=y&&v<=u.length-1;){var w=Math.floor((p+y)/2),j=w-1,_=x(j),S=P4(_,2),T=S[0],A=S[1],E=x(w),R=P4(E,1),I=R[0];if(!T&&!I&&(p=w+1),T&&I&&(y=w-1),!T&&I){N=A;break}v++}return N||f},O4=function(t){var n=Fe(t)?[]:t.toString().split(IE);return[{words:n}]},zie=function(t){var n=t.width,s=t.scaleToFit,a=t.children,i=t.style,o=t.breakAll,l=t.maxLines;if((n||s)&&!zl.isSsr){var c,d,m=DE({breakAll:o,children:a,style:i});if(m){var u=m.wordsWithComputedWidth,h=m.spaceWidth;c=u,d=h}else return O4(a);return Bie({breakAll:o,children:a,maxLines:l,style:i},c,d,n,s)}return O4(a)},T4="#808080",Ai=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.lineHeight,l=o===void 0?"1em":o,c=t.capHeight,d=c===void 0?"0.71em":c,m=t.scaleToFit,u=m===void 0?!1:m,h=t.textAnchor,f=h===void 0?"start":h,b=t.verticalAnchor,g=b===void 0?"end":b,x=t.fill,p=x===void 0?T4:x,y=A4(t,Mie),v=k.useMemo(function(){return zie({breakAll:y.breakAll,children:y.children,maxLines:y.maxLines,scaleToFit:u,style:y.style,width:y.width})},[y.breakAll,y.children,y.maxLines,u,y.style,y.width]),N=y.dx,w=y.dy,j=y.angle,_=y.className,S=y.breakAll,T=A4(y,Lie);if(!Et(s)||!Et(i))return null;var A=s+(ge(N)?N:0),E=i+(ge(w)?w:0),R;switch(g){case"start":R=kx("calc(".concat(d,")"));break;case"middle":R=kx("calc(".concat((v.length-1)/2," * -").concat(l," + (").concat(d," / 2))"));break;default:R=kx("calc(".concat(v.length-1," * -").concat(l,")"));break}var I=[];if(u){var O=v[0].width,L=y.width;I.push("scale(".concat((ge(L)?L/O:1)/O,")"))}return j&&I.push("rotate(".concat(j,", ").concat(A,", ").concat(E,")")),I.length&&(T.transform=I.join(" ")),Y.createElement("text",tb({},Te(T,!0),{x:A,y:E,className:De("recharts-text",_),textAnchor:f,fill:p.includes("url")?T4:p}),v.map(function(F,M){var D=F.words.join(S?"":" ");return Y.createElement("tspan",{x:A,dy:M===0?R:l,key:"".concat(D,"-").concat(M)},D)}))};function xa(e,t){return e==null||t==null?NaN:e<t?-1:e>t?1:e>=t?0:NaN}function qie(e,t){return e==null||t==null?NaN:t<e?-1:t>e?1:t>=e?0:NaN}function f2(e){let t,n,s;e.length!==2?(t=xa,n=(l,c)=>xa(e(l),c),s=(l,c)=>e(l)-c):(t=e===xa||e===qie?e:Uie,n=e,s=e);function a(l,c,d=0,m=l.length){if(d<m){if(t(c,c)!==0)return m;do{const u=d+m>>>1;n(l[u],c)<0?d=u+1:m=u}while(d<m)}return d}function i(l,c,d=0,m=l.length){if(d<m){if(t(c,c)!==0)return m;do{const u=d+m>>>1;n(l[u],c)<=0?d=u+1:m=u}while(d<m)}return d}function o(l,c,d=0,m=l.length){const u=a(l,c,d,m-1);return u>d&&s(l[u-1],c)>-s(l[u],c)?u-1:u}return{left:a,center:o,right:i}}function Uie(){return 0}function FE(e){return e===null?NaN:+e}function*Wie(e,t){for(let n of e)n!=null&&(n=+n)>=n&&(yield n)}const Vie=f2(xa),Eu=Vie.right;f2(FE).center;class M4 extends Map{constructor(t,n=Gie){if(super(),Object.defineProperties(this,{_intern:{value:new Map},_key:{value:n}}),t!=null)for(const[s,a]of t)this.set(s,a)}get(t){return super.get(L4(this,t))}has(t){return super.has(L4(this,t))}set(t,n){return super.set(Hie(this,t),n)}delete(t){return super.delete(Kie(this,t))}}function L4({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):n}function Hie({_intern:e,_key:t},n){const s=t(n);return e.has(s)?e.get(s):(e.set(s,n),n)}function Kie({_intern:e,_key:t},n){const s=t(n);return e.has(s)&&(n=e.get(s),e.delete(s)),n}function Gie(e){return e!==null&&typeof e=="object"?e.valueOf():e}function Qie(e=xa){if(e===xa)return BE;if(typeof e!="function")throw new TypeError("compare is not a function");return(t,n)=>{const s=e(t,n);return s||s===0?s:(e(n,n)===0)-(e(t,t)===0)}}function BE(e,t){return(e==null||!(e>=e))-(t==null||!(t>=t))||(e<t?-1:e>t?1:0)}const Yie=Math.sqrt(50),Xie=Math.sqrt(10),Jie=Math.sqrt(2);function Xh(e,t,n){const s=(t-e)/Math.max(0,n),a=Math.floor(Math.log10(s)),i=s/Math.pow(10,a),o=i>=Yie?10:i>=Xie?5:i>=Jie?2:1;let l,c,d;return a<0?(d=Math.pow(10,-a)/o,l=Math.round(e*d),c=Math.round(t*d),l/d<e&&++l,c/d>t&&--c,d=-d):(d=Math.pow(10,a)*o,l=Math.round(e/d),c=Math.round(t/d),l*d<e&&++l,c*d>t&&--c),c<l&&.5<=n&&n<2?Xh(e,t,n*2):[l,c,d]}function rb(e,t,n){if(t=+t,e=+e,n=+n,!(n>0))return[];if(e===t)return[e];const s=t<e,[a,i,o]=s?Xh(t,e,n):Xh(e,t,n);if(!(i>=a))return[];const l=i-a+1,c=new Array(l);if(s)if(o<0)for(let d=0;d<l;++d)c[d]=(i-d)/-o;else for(let d=0;d<l;++d)c[d]=(i-d)*o;else if(o<0)for(let d=0;d<l;++d)c[d]=(a+d)/-o;else for(let d=0;d<l;++d)c[d]=(a+d)*o;return c}function nb(e,t,n){return t=+t,e=+e,n=+n,Xh(e,t,n)[2]}function sb(e,t,n){t=+t,e=+e,n=+n;const s=t<e,a=s?nb(t,e,n):nb(e,t,n);return(s?-1:1)*(a<0?1/-a:a)}function $4(e,t){let n;for(const s of e)s!=null&&(n<s||n===void 0&&s>=s)&&(n=s);return n}function R4(e,t){let n;for(const s of e)s!=null&&(n>s||n===void 0&&s>=s)&&(n=s);return n}function zE(e,t,n=0,s=1/0,a){if(t=Math.floor(t),n=Math.floor(Math.max(0,n)),s=Math.floor(Math.min(e.length-1,s)),!(n<=t&&t<=s))return e;for(a=a===void 0?BE:Qie(a);s>n;){if(s-n>600){const c=s-n+1,d=t-n+1,m=Math.log(c),u=.5*Math.exp(2*m/3),h=.5*Math.sqrt(m*u*(c-u)/c)*(d-c/2<0?-1:1),f=Math.max(n,Math.floor(t-d*u/c+h)),b=Math.min(s,Math.floor(t+(c-d)*u/c+h));zE(e,t,f,b,a)}const i=e[t];let o=n,l=s;for(mc(e,n,t),a(e[s],i)>0&&mc(e,n,s);o<l;){for(mc(e,o,l),++o,--l;a(e[o],i)<0;)++o;for(;a(e[l],i)>0;)--l}a(e[n],i)===0?mc(e,n,l):(++l,mc(e,l,s)),l<=t&&(n=l+1),t<=l&&(s=l-1)}return e}function mc(e,t,n){const s=e[t];e[t]=e[n],e[n]=s}function Zie(e,t,n){if(e=Float64Array.from(Wie(e)),!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return R4(e);if(t>=1)return $4(e);var s,a=(s-1)*t,i=Math.floor(a),o=$4(zE(e,i).subarray(0,i+1)),l=R4(e.subarray(i+1));return o+(l-o)*(a-i)}}function eoe(e,t,n=FE){if(!(!(s=e.length)||isNaN(t=+t))){if(t<=0||s<2)return+n(e[0],0,e);if(t>=1)return+n(e[s-1],s-1,e);var s,a=(s-1)*t,i=Math.floor(a),o=+n(e[i],i,e),l=+n(e[i+1],i+1,e);return o+(l-o)*(a-i)}}function toe(e,t,n){e=+e,t=+t,n=(a=arguments.length)<2?(t=e,e=0,1):a<3?1:+n;for(var s=-1,a=Math.max(0,Math.ceil((t-e)/n))|0,i=new Array(a);++s<a;)i[s]=e+s*n;return i}function fn(e,t){switch(arguments.length){case 0:break;case 1:this.range(e);break;default:this.range(t).domain(e);break}return this}function Es(e,t){switch(arguments.length){case 0:break;case 1:{typeof e=="function"?this.interpolator(e):this.range(e);break}default:{this.domain(e),typeof t=="function"?this.interpolator(t):this.range(t);break}}return this}const ab=Symbol("implicit");function x2(){var e=new M4,t=[],n=[],s=ab;function a(i){let o=e.get(i);if(o===void 0){if(s!==ab)return s;e.set(i,o=t.push(i)-1)}return n[o%n.length]}return a.domain=function(i){if(!arguments.length)return t.slice();t=[],e=new M4;for(const o of i)e.has(o)||e.set(o,t.push(o)-1);return a},a.range=function(i){return arguments.length?(n=Array.from(i),a):n.slice()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return x2(t,n).unknown(s)},fn.apply(a,arguments),a}function Pd(){var e=x2().unknown(void 0),t=e.domain,n=e.range,s=0,a=1,i,o,l=!1,c=0,d=0,m=.5;delete e.unknown;function u(){var h=t().length,f=a<s,b=f?a:s,g=f?s:a;i=(g-b)/Math.max(1,h-c+d*2),l&&(i=Math.floor(i)),b+=(g-b-i*(h-c))*m,o=i*(1-c),l&&(b=Math.round(b),o=Math.round(o));var x=toe(h).map(function(p){return b+i*p});return n(f?x.reverse():x)}return e.domain=function(h){return arguments.length?(t(h),u()):t()},e.range=function(h){return arguments.length?([s,a]=h,s=+s,a=+a,u()):[s,a]},e.rangeRound=function(h){return[s,a]=h,s=+s,a=+a,l=!0,u()},e.bandwidth=function(){return o},e.step=function(){return i},e.round=function(h){return arguments.length?(l=!!h,u()):l},e.padding=function(h){return arguments.length?(c=Math.min(1,d=+h),u()):c},e.paddingInner=function(h){return arguments.length?(c=Math.min(1,h),u()):c},e.paddingOuter=function(h){return arguments.length?(d=+h,u()):d},e.align=function(h){return arguments.length?(m=Math.max(0,Math.min(1,h)),u()):m},e.copy=function(){return Pd(t(),[s,a]).round(l).paddingInner(c).paddingOuter(d).align(m)},fn.apply(u(),arguments)}function qE(e){var t=e.copy;return e.padding=e.paddingOuter,delete e.paddingInner,delete e.paddingOuter,e.copy=function(){return qE(t())},e}function qc(){return qE(Pd.apply(null,arguments).paddingInner(1))}function g2(e,t,n){e.prototype=t.prototype=n,n.constructor=e}function UE(e,t){var n=Object.create(e.prototype);for(var s in t)n[s]=t[s];return n}function Ou(){}var Ed=.7,Jh=1/Ed,vo="\\s*([+-]?\\d+)\\s*",Od="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)\\s*",Hn="\\s*([+-]?(?:\\d*\\.)?\\d+(?:[eE][+-]?\\d+)?)%\\s*",roe=/^#([0-9a-f]{3,8})$/,noe=new RegExp(`^rgb\\(${vo},${vo},${vo}\\)$`),soe=new RegExp(`^rgb\\(${Hn},${Hn},${Hn}\\)$`),aoe=new RegExp(`^rgba\\(${vo},${vo},${vo},${Od}\\)$`),ioe=new RegExp(`^rgba\\(${Hn},${Hn},${Hn},${Od}\\)$`),ooe=new RegExp(`^hsl\\(${Od},${Hn},${Hn}\\)$`),loe=new RegExp(`^hsla\\(${Od},${Hn},${Hn},${Od}\\)$`),I4={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};g2(Ou,Td,{copy(e){return Object.assign(new this.constructor,this,e)},displayable(){return this.rgb().displayable()},hex:D4,formatHex:D4,formatHex8:coe,formatHsl:doe,formatRgb:F4,toString:F4});function D4(){return this.rgb().formatHex()}function coe(){return this.rgb().formatHex8()}function doe(){return WE(this).formatHsl()}function F4(){return this.rgb().formatRgb()}function Td(e){var t,n;return e=(e+"").trim().toLowerCase(),(t=roe.exec(e))?(n=t[1].length,t=parseInt(t[1],16),n===6?B4(t):n===3?new Nr(t>>8&15|t>>4&240,t>>4&15|t&240,(t&15)<<4|t&15,1):n===8?fm(t>>24&255,t>>16&255,t>>8&255,(t&255)/255):n===4?fm(t>>12&15|t>>8&240,t>>8&15|t>>4&240,t>>4&15|t&240,((t&15)<<4|t&15)/255):null):(t=noe.exec(e))?new Nr(t[1],t[2],t[3],1):(t=soe.exec(e))?new Nr(t[1]*255/100,t[2]*255/100,t[3]*255/100,1):(t=aoe.exec(e))?fm(t[1],t[2],t[3],t[4]):(t=ioe.exec(e))?fm(t[1]*255/100,t[2]*255/100,t[3]*255/100,t[4]):(t=ooe.exec(e))?U4(t[1],t[2]/100,t[3]/100,1):(t=loe.exec(e))?U4(t[1],t[2]/100,t[3]/100,t[4]):I4.hasOwnProperty(e)?B4(I4[e]):e==="transparent"?new Nr(NaN,NaN,NaN,0):null}function B4(e){return new Nr(e>>16&255,e>>8&255,e&255,1)}function fm(e,t,n,s){return s<=0&&(e=t=n=NaN),new Nr(e,t,n,s)}function uoe(e){return e instanceof Ou||(e=Td(e)),e?(e=e.rgb(),new Nr(e.r,e.g,e.b,e.opacity)):new Nr}function ib(e,t,n,s){return arguments.length===1?uoe(e):new Nr(e,t,n,s??1)}function Nr(e,t,n,s){this.r=+e,this.g=+t,this.b=+n,this.opacity=+s}g2(Nr,ib,UE(Ou,{brighter(e){return e=e==null?Jh:Math.pow(Jh,e),new Nr(this.r*e,this.g*e,this.b*e,this.opacity)},darker(e){return e=e==null?Ed:Math.pow(Ed,e),new Nr(this.r*e,this.g*e,this.b*e,this.opacity)},rgb(){return this},clamp(){return new Nr(hi(this.r),hi(this.g),hi(this.b),Zh(this.opacity))},displayable(){return-.5<=this.r&&this.r<255.5&&-.5<=this.g&&this.g<255.5&&-.5<=this.b&&this.b<255.5&&0<=this.opacity&&this.opacity<=1},hex:z4,formatHex:z4,formatHex8:moe,formatRgb:q4,toString:q4}));function z4(){return`#${Ja(this.r)}${Ja(this.g)}${Ja(this.b)}`}function moe(){return`#${Ja(this.r)}${Ja(this.g)}${Ja(this.b)}${Ja((isNaN(this.opacity)?1:this.opacity)*255)}`}function q4(){const e=Zh(this.opacity);return`${e===1?"rgb(":"rgba("}${hi(this.r)}, ${hi(this.g)}, ${hi(this.b)}${e===1?")":`, ${e})`}`}function Zh(e){return isNaN(e)?1:Math.max(0,Math.min(1,e))}function hi(e){return Math.max(0,Math.min(255,Math.round(e)||0))}function Ja(e){return e=hi(e),(e<16?"0":"")+e.toString(16)}function U4(e,t,n,s){return s<=0?e=t=n=NaN:n<=0||n>=1?e=t=NaN:t<=0&&(e=NaN),new Sn(e,t,n,s)}function WE(e){if(e instanceof Sn)return new Sn(e.h,e.s,e.l,e.opacity);if(e instanceof Ou||(e=Td(e)),!e)return new Sn;if(e instanceof Sn)return e;e=e.rgb();var t=e.r/255,n=e.g/255,s=e.b/255,a=Math.min(t,n,s),i=Math.max(t,n,s),o=NaN,l=i-a,c=(i+a)/2;return l?(t===i?o=(n-s)/l+(n<s)*6:n===i?o=(s-t)/l+2:o=(t-n)/l+4,l/=c<.5?i+a:2-i-a,o*=60):l=c>0&&c<1?0:o,new Sn(o,l,c,e.opacity)}function hoe(e,t,n,s){return arguments.length===1?WE(e):new Sn(e,t,n,s??1)}function Sn(e,t,n,s){this.h=+e,this.s=+t,this.l=+n,this.opacity=+s}g2(Sn,hoe,UE(Ou,{brighter(e){return e=e==null?Jh:Math.pow(Jh,e),new Sn(this.h,this.s,this.l*e,this.opacity)},darker(e){return e=e==null?Ed:Math.pow(Ed,e),new Sn(this.h,this.s,this.l*e,this.opacity)},rgb(){var e=this.h%360+(this.h<0)*360,t=isNaN(e)||isNaN(this.s)?0:this.s,n=this.l,s=n+(n<.5?n:1-n)*t,a=2*n-s;return new Nr(Sx(e>=240?e-240:e+120,a,s),Sx(e,a,s),Sx(e<120?e+240:e-120,a,s),this.opacity)},clamp(){return new Sn(W4(this.h),xm(this.s),xm(this.l),Zh(this.opacity))},displayable(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1},formatHsl(){const e=Zh(this.opacity);return`${e===1?"hsl(":"hsla("}${W4(this.h)}, ${xm(this.s)*100}%, ${xm(this.l)*100}%${e===1?")":`, ${e})`}`}}));function W4(e){return e=(e||0)%360,e<0?e+360:e}function xm(e){return Math.max(0,Math.min(1,e||0))}function Sx(e,t,n){return(e<60?t+(n-t)*e/60:e<180?n:e<240?t+(n-t)*(240-e)/60:t)*255}const y2=e=>()=>e;function poe(e,t){return function(n){return e+n*t}}function foe(e,t,n){return e=Math.pow(e,n),t=Math.pow(t,n)-e,n=1/n,function(s){return Math.pow(e+s*t,n)}}function xoe(e){return(e=+e)==1?VE:function(t,n){return n-t?foe(t,n,e):y2(isNaN(t)?n:t)}}function VE(e,t){var n=t-e;return n?poe(e,n):y2(isNaN(e)?t:e)}const V4=function e(t){var n=xoe(t);function s(a,i){var o=n((a=ib(a)).r,(i=ib(i)).r),l=n(a.g,i.g),c=n(a.b,i.b),d=VE(a.opacity,i.opacity);return function(m){return a.r=o(m),a.g=l(m),a.b=c(m),a.opacity=d(m),a+""}}return s.gamma=e,s}(1);function goe(e,t){t||(t=[]);var n=e?Math.min(t.length,e.length):0,s=t.slice(),a;return function(i){for(a=0;a<n;++a)s[a]=e[a]*(1-i)+t[a]*i;return s}}function yoe(e){return ArrayBuffer.isView(e)&&!(e instanceof DataView)}function boe(e,t){var n=t?t.length:0,s=e?Math.min(n,e.length):0,a=new Array(s),i=new Array(n),o;for(o=0;o<s;++o)a[o]=ql(e[o],t[o]);for(;o<n;++o)i[o]=t[o];return function(l){for(o=0;o<s;++o)i[o]=a[o](l);return i}}function voe(e,t){var n=new Date;return e=+e,t=+t,function(s){return n.setTime(e*(1-s)+t*s),n}}function e0(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function joe(e,t){var n={},s={},a;(e===null||typeof e!="object")&&(e={}),(t===null||typeof t!="object")&&(t={});for(a in t)a in e?n[a]=ql(e[a],t[a]):s[a]=t[a];return function(i){for(a in n)s[a]=n[a](i);return s}}var ob=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,Cx=new RegExp(ob.source,"g");function woe(e){return function(){return e}}function Noe(e){return function(t){return e(t)+""}}function _oe(e,t){var n=ob.lastIndex=Cx.lastIndex=0,s,a,i,o=-1,l=[],c=[];for(e=e+"",t=t+"";(s=ob.exec(e))&&(a=Cx.exec(t));)(i=a.index)>n&&(i=t.slice(n,i),l[o]?l[o]+=i:l[++o]=i),(s=s[0])===(a=a[0])?l[o]?l[o]+=a:l[++o]=a:(l[++o]=null,c.push({i:o,x:e0(s,a)})),n=Cx.lastIndex;return n<t.length&&(i=t.slice(n),l[o]?l[o]+=i:l[++o]=i),l.length<2?c[0]?Noe(c[0].x):woe(t):(t=c.length,function(d){for(var m=0,u;m<t;++m)l[(u=c[m]).i]=u.x(d);return l.join("")})}function ql(e,t){var n=typeof t,s;return t==null||n==="boolean"?y2(t):(n==="number"?e0:n==="string"?(s=Td(t))?(t=s,V4):_oe:t instanceof Td?V4:t instanceof Date?voe:yoe(t)?goe:Array.isArray(t)?boe:typeof t.valueOf!="function"&&typeof t.toString!="function"||isNaN(t)?joe:e0)(e,t)}function b2(e,t){return e=+e,t=+t,function(n){return Math.round(e*(1-n)+t*n)}}function koe(e,t){t===void 0&&(t=e,e=ql);for(var n=0,s=t.length-1,a=t[0],i=new Array(s<0?0:s);n<s;)i[n]=e(a,a=t[++n]);return function(o){var l=Math.max(0,Math.min(s-1,Math.floor(o*=s)));return i[l](o-l)}}function Soe(e){return function(){return e}}function t0(e){return+e}var H4=[0,1];function ur(e){return e}function lb(e,t){return(t-=e=+e)?function(n){return(n-e)/t}:Soe(isNaN(t)?NaN:.5)}function Coe(e,t){var n;return e>t&&(n=e,e=t,t=n),function(s){return Math.max(e,Math.min(t,s))}}function Aoe(e,t,n){var s=e[0],a=e[1],i=t[0],o=t[1];return a<s?(s=lb(a,s),i=n(o,i)):(s=lb(s,a),i=n(i,o)),function(l){return i(s(l))}}function Poe(e,t,n){var s=Math.min(e.length,t.length)-1,a=new Array(s),i=new Array(s),o=-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++o<s;)a[o]=lb(e[o],e[o+1]),i[o]=n(t[o],t[o+1]);return function(l){var c=Eu(e,l,1,s)-1;return i[c](a[c](l))}}function Tu(e,t){return t.domain(e.domain()).range(e.range()).interpolate(e.interpolate()).clamp(e.clamp()).unknown(e.unknown())}function zp(){var e=H4,t=H4,n=ql,s,a,i,o=ur,l,c,d;function m(){var h=Math.min(e.length,t.length);return o!==ur&&(o=Coe(e[0],e[h-1])),l=h>2?Poe:Aoe,c=d=null,u}function u(h){return h==null||isNaN(h=+h)?i:(c||(c=l(e.map(s),t,n)))(s(o(h)))}return u.invert=function(h){return o(a((d||(d=l(t,e.map(s),e0)))(h)))},u.domain=function(h){return arguments.length?(e=Array.from(h,t0),m()):e.slice()},u.range=function(h){return arguments.length?(t=Array.from(h),m()):t.slice()},u.rangeRound=function(h){return t=Array.from(h),n=b2,m()},u.clamp=function(h){return arguments.length?(o=h?!0:ur,m()):o!==ur},u.interpolate=function(h){return arguments.length?(n=h,m()):n},u.unknown=function(h){return arguments.length?(i=h,u):i},function(h,f){return s=h,a=f,m()}}function v2(){return zp()(ur,ur)}function Eoe(e){return Math.abs(e=Math.round(e))>=1e21?e.toLocaleString("en").replace(/,/g,""):e.toString(10)}function r0(e,t){if((n=(e=t?e.toExponential(t-1):e.toExponential()).indexOf("e"))<0)return null;var n,s=e.slice(0,n);return[s.length>1?s[0]+s.slice(2):s,+e.slice(n+1)]}function nl(e){return e=r0(Math.abs(e)),e?e[1]:NaN}function Ooe(e,t){return function(n,s){for(var a=n.length,i=[],o=0,l=e[0],c=0;a>0&&l>0&&(c+l+1>s&&(l=Math.max(1,s-c)),i.push(n.substring(a-=l,a+l)),!((c+=l+1)>s));)l=e[o=(o+1)%e.length];return i.reverse().join(t)}}function Toe(e){return function(t){return t.replace(/[0-9]/g,function(n){return e[+n]})}}var Moe=/^(?:(.)?([<>=^]))?([+\-( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?(~)?([a-z%])?$/i;function Md(e){if(!(t=Moe.exec(e)))throw new Error("invalid format: "+e);var t;return new j2({fill:t[1],align:t[2],sign:t[3],symbol:t[4],zero:t[5],width:t[6],comma:t[7],precision:t[8]&&t[8].slice(1),trim:t[9],type:t[10]})}Md.prototype=j2.prototype;function j2(e){this.fill=e.fill===void 0?" ":e.fill+"",this.align=e.align===void 0?">":e.align+"",this.sign=e.sign===void 0?"-":e.sign+"",this.symbol=e.symbol===void 0?"":e.symbol+"",this.zero=!!e.zero,this.width=e.width===void 0?void 0:+e.width,this.comma=!!e.comma,this.precision=e.precision===void 0?void 0:+e.precision,this.trim=!!e.trim,this.type=e.type===void 0?"":e.type+""}j2.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(this.width===void 0?"":Math.max(1,this.width|0))+(this.comma?",":"")+(this.precision===void 0?"":"."+Math.max(0,this.precision|0))+(this.trim?"~":"")+this.type};function Loe(e){e:for(var t=e.length,n=1,s=-1,a;n<t;++n)switch(e[n]){case".":s=a=n;break;case"0":s===0&&(s=n),a=n;break;default:if(!+e[n])break e;s>0&&(s=0);break}return s>0?e.slice(0,s)+e.slice(a+1):e}var HE;function $oe(e,t){var n=r0(e,t);if(!n)return e+"";var s=n[0],a=n[1],i=a-(HE=Math.max(-8,Math.min(8,Math.floor(a/3)))*3)+1,o=s.length;return i===o?s:i>o?s+new Array(i-o+1).join("0"):i>0?s.slice(0,i)+"."+s.slice(i):"0."+new Array(1-i).join("0")+r0(e,Math.max(0,t+i-1))[0]}function K4(e,t){var n=r0(e,t);if(!n)return e+"";var s=n[0],a=n[1];return a<0?"0."+new Array(-a).join("0")+s:s.length>a+1?s.slice(0,a+1)+"."+s.slice(a+1):s+new Array(a-s.length+2).join("0")}const G4={"%":(e,t)=>(e*100).toFixed(t),b:e=>Math.round(e).toString(2),c:e=>e+"",d:Eoe,e:(e,t)=>e.toExponential(t),f:(e,t)=>e.toFixed(t),g:(e,t)=>e.toPrecision(t),o:e=>Math.round(e).toString(8),p:(e,t)=>K4(e*100,t),r:K4,s:$oe,X:e=>Math.round(e).toString(16).toUpperCase(),x:e=>Math.round(e).toString(16)};function Q4(e){return e}var Y4=Array.prototype.map,X4=["y","z","a","f","p","n","","m","","k","M","G","T","P","E","Z","Y"];function Roe(e){var t=e.grouping===void 0||e.thousands===void 0?Q4:Ooe(Y4.call(e.grouping,Number),e.thousands+""),n=e.currency===void 0?"":e.currency[0]+"",s=e.currency===void 0?"":e.currency[1]+"",a=e.decimal===void 0?".":e.decimal+"",i=e.numerals===void 0?Q4:Toe(Y4.call(e.numerals,String)),o=e.percent===void 0?"%":e.percent+"",l=e.minus===void 0?"":e.minus+"",c=e.nan===void 0?"NaN":e.nan+"";function d(u){u=Md(u);var h=u.fill,f=u.align,b=u.sign,g=u.symbol,x=u.zero,p=u.width,y=u.comma,v=u.precision,N=u.trim,w=u.type;w==="n"?(y=!0,w="g"):G4[w]||(v===void 0&&(v=12),N=!0,w="g"),(x||h==="0"&&f==="=")&&(x=!0,h="0",f="=");var j=g==="$"?n:g==="#"&&/[boxX]/.test(w)?"0"+w.toLowerCase():"",_=g==="$"?s:/[%p]/.test(w)?o:"",S=G4[w],T=/[defgprs%]/.test(w);v=v===void 0?6:/[gprs]/.test(w)?Math.max(1,Math.min(21,v)):Math.max(0,Math.min(20,v));function A(E){var R=j,I=_,O,L,F;if(w==="c")I=S(E)+I,E="";else{E=+E;var M=E<0||1/E<0;if(E=isNaN(E)?c:S(Math.abs(E),v),N&&(E=Loe(E)),M&&+E==0&&b!=="+"&&(M=!1),R=(M?b==="("?b:l:b==="-"||b==="("?"":b)+R,I=(w==="s"?X4[8+HE/3]:"")+I+(M&&b==="("?")":""),T){for(O=-1,L=E.length;++O<L;)if(F=E.charCodeAt(O),48>F||F>57){I=(F===46?a+E.slice(O+1):E.slice(O))+I,E=E.slice(0,O);break}}}y&&!x&&(E=t(E,1/0));var D=R.length+E.length+I.length,W=D<p?new Array(p-D+1).join(h):"";switch(y&&x&&(E=t(W+E,W.length?p-I.length:1/0),W=""),f){case"<":E=R+E+I+W;break;case"=":E=R+W+E+I;break;case"^":E=W.slice(0,D=W.length>>1)+R+E+I+W.slice(D);break;default:E=W+R+E+I;break}return i(E)}return A.toString=function(){return u+""},A}function m(u,h){var f=d((u=Md(u),u.type="f",u)),b=Math.max(-8,Math.min(8,Math.floor(nl(h)/3)))*3,g=Math.pow(10,-b),x=X4[8+b/3];return function(p){return f(g*p)+x}}return{format:d,formatPrefix:m}}var gm,w2,KE;Ioe({thousands:",",grouping:[3],currency:["$",""]});function Ioe(e){return gm=Roe(e),w2=gm.format,KE=gm.formatPrefix,gm}function Doe(e){return Math.max(0,-nl(Math.abs(e)))}function Foe(e,t){return Math.max(0,Math.max(-8,Math.min(8,Math.floor(nl(t)/3)))*3-nl(Math.abs(e)))}function Boe(e,t){return e=Math.abs(e),t=Math.abs(t)-e,Math.max(0,nl(t)-nl(e))+1}function GE(e,t,n,s){var a=sb(e,t,n),i;switch(s=Md(s??",f"),s.type){case"s":{var o=Math.max(Math.abs(e),Math.abs(t));return s.precision==null&&!isNaN(i=Foe(a,o))&&(s.precision=i),KE(s,o)}case"":case"e":case"g":case"p":case"r":{s.precision==null&&!isNaN(i=Boe(a,Math.max(Math.abs(e),Math.abs(t))))&&(s.precision=i-(s.type==="e"));break}case"f":case"%":{s.precision==null&&!isNaN(i=Doe(a))&&(s.precision=i-(s.type==="%")*2);break}}return w2(s)}function Ca(e){var t=e.domain;return e.ticks=function(n){var s=t();return rb(s[0],s[s.length-1],n??10)},e.tickFormat=function(n,s){var a=t();return GE(a[0],a[a.length-1],n??10,s)},e.nice=function(n){n==null&&(n=10);var s=t(),a=0,i=s.length-1,o=s[a],l=s[i],c,d,m=10;for(l<o&&(d=o,o=l,l=d,d=a,a=i,i=d);m-- >0;){if(d=nb(o,l,n),d===c)return s[a]=o,s[i]=l,t(s);if(d>0)o=Math.floor(o/d)*d,l=Math.ceil(l/d)*d;else if(d<0)o=Math.ceil(o*d)/d,l=Math.floor(l*d)/d;else break;c=d}return e},e}function n0(){var e=v2();return e.copy=function(){return Tu(e,n0())},fn.apply(e,arguments),Ca(e)}function QE(e){var t;function n(s){return s==null||isNaN(s=+s)?t:s}return n.invert=n,n.domain=n.range=function(s){return arguments.length?(e=Array.from(s,t0),n):e.slice()},n.unknown=function(s){return arguments.length?(t=s,n):t},n.copy=function(){return QE(e).unknown(t)},e=arguments.length?Array.from(e,t0):[0,1],Ca(n)}function YE(e,t){e=e.slice();var n=0,s=e.length-1,a=e[n],i=e[s],o;return i<a&&(o=n,n=s,s=o,o=a,a=i,i=o),e[n]=t.floor(a),e[s]=t.ceil(i),e}function J4(e){return Math.log(e)}function Z4(e){return Math.exp(e)}function zoe(e){return-Math.log(-e)}function qoe(e){return-Math.exp(-e)}function Uoe(e){return isFinite(e)?+("1e"+e):e<0?0:e}function Woe(e){return e===10?Uoe:e===Math.E?Math.exp:t=>Math.pow(e,t)}function Voe(e){return e===Math.E?Math.log:e===10&&Math.log10||e===2&&Math.log2||(e=Math.log(e),t=>Math.log(t)/e)}function ek(e){return(t,n)=>-e(-t,n)}function N2(e){const t=e(J4,Z4),n=t.domain;let s=10,a,i;function o(){return a=Voe(s),i=Woe(s),n()[0]<0?(a=ek(a),i=ek(i),e(zoe,qoe)):e(J4,Z4),t}return t.base=function(l){return arguments.length?(s=+l,o()):s},t.domain=function(l){return arguments.length?(n(l),o()):n()},t.ticks=l=>{const c=n();let d=c[0],m=c[c.length-1];const u=m<d;u&&([d,m]=[m,d]);let h=a(d),f=a(m),b,g;const x=l==null?10:+l;let p=[];if(!(s%1)&&f-h<x){if(h=Math.floor(h),f=Math.ceil(f),d>0){for(;h<=f;++h)for(b=1;b<s;++b)if(g=h<0?b/i(-h):b*i(h),!(g<d)){if(g>m)break;p.push(g)}}else for(;h<=f;++h)for(b=s-1;b>=1;--b)if(g=h>0?b/i(-h):b*i(h),!(g<d)){if(g>m)break;p.push(g)}p.length*2<x&&(p=rb(d,m,x))}else p=rb(h,f,Math.min(f-h,x)).map(i);return u?p.reverse():p},t.tickFormat=(l,c)=>{if(l==null&&(l=10),c==null&&(c=s===10?"s":","),typeof c!="function"&&(!(s%1)&&(c=Md(c)).precision==null&&(c.trim=!0),c=w2(c)),l===1/0)return c;const d=Math.max(1,s*l/t.ticks().length);return m=>{let u=m/i(Math.round(a(m)));return u*s<s-.5&&(u*=s),u<=d?c(m):""}},t.nice=()=>n(YE(n(),{floor:l=>i(Math.floor(a(l))),ceil:l=>i(Math.ceil(a(l)))})),t}function XE(){const e=N2(zp()).domain([1,10]);return e.copy=()=>Tu(e,XE()).base(e.base()),fn.apply(e,arguments),e}function tk(e){return function(t){return Math.sign(t)*Math.log1p(Math.abs(t/e))}}function rk(e){return function(t){return Math.sign(t)*Math.expm1(Math.abs(t))*e}}function _2(e){var t=1,n=e(tk(t),rk(t));return n.constant=function(s){return arguments.length?e(tk(t=+s),rk(t)):t},Ca(n)}function JE(){var e=_2(zp());return e.copy=function(){return Tu(e,JE()).constant(e.constant())},fn.apply(e,arguments)}function nk(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function Hoe(e){return e<0?-Math.sqrt(-e):Math.sqrt(e)}function Koe(e){return e<0?-e*e:e*e}function k2(e){var t=e(ur,ur),n=1;function s(){return n===1?e(ur,ur):n===.5?e(Hoe,Koe):e(nk(n),nk(1/n))}return t.exponent=function(a){return arguments.length?(n=+a,s()):n},Ca(t)}function S2(){var e=k2(zp());return e.copy=function(){return Tu(e,S2()).exponent(e.exponent())},fn.apply(e,arguments),e}function Goe(){return S2.apply(null,arguments).exponent(.5)}function sk(e){return Math.sign(e)*e*e}function Qoe(e){return Math.sign(e)*Math.sqrt(Math.abs(e))}function ZE(){var e=v2(),t=[0,1],n=!1,s;function a(i){var o=Qoe(e(i));return isNaN(o)?s:n?Math.round(o):o}return a.invert=function(i){return e.invert(sk(i))},a.domain=function(i){return arguments.length?(e.domain(i),a):e.domain()},a.range=function(i){return arguments.length?(e.range((t=Array.from(i,t0)).map(sk)),a):t.slice()},a.rangeRound=function(i){return a.range(i).round(!0)},a.round=function(i){return arguments.length?(n=!!i,a):n},a.clamp=function(i){return arguments.length?(e.clamp(i),a):e.clamp()},a.unknown=function(i){return arguments.length?(s=i,a):s},a.copy=function(){return ZE(e.domain(),t).round(n).clamp(e.clamp()).unknown(s)},fn.apply(a,arguments),Ca(a)}function e8(){var e=[],t=[],n=[],s;function a(){var o=0,l=Math.max(1,t.length);for(n=new Array(l-1);++o<l;)n[o-1]=eoe(e,o/l);return i}function i(o){return o==null||isNaN(o=+o)?s:t[Eu(n,o)]}return i.invertExtent=function(o){var l=t.indexOf(o);return l<0?[NaN,NaN]:[l>0?n[l-1]:e[0],l<n.length?n[l]:e[e.length-1]]},i.domain=function(o){if(!arguments.length)return e.slice();e=[];for(let l of o)l!=null&&!isNaN(l=+l)&&e.push(l);return e.sort(xa),a()},i.range=function(o){return arguments.length?(t=Array.from(o),a()):t.slice()},i.unknown=function(o){return arguments.length?(s=o,i):s},i.quantiles=function(){return n.slice()},i.copy=function(){return e8().domain(e).range(t).unknown(s)},fn.apply(i,arguments)}function t8(){var e=0,t=1,n=1,s=[.5],a=[0,1],i;function o(c){return c!=null&&c<=c?a[Eu(s,c,0,n)]:i}function l(){var c=-1;for(s=new Array(n);++c<n;)s[c]=((c+1)*t-(c-n)*e)/(n+1);return o}return o.domain=function(c){return arguments.length?([e,t]=c,e=+e,t=+t,l()):[e,t]},o.range=function(c){return arguments.length?(n=(a=Array.from(c)).length-1,l()):a.slice()},o.invertExtent=function(c){var d=a.indexOf(c);return d<0?[NaN,NaN]:d<1?[e,s[0]]:d>=n?[s[n-1],t]:[s[d-1],s[d]]},o.unknown=function(c){return arguments.length&&(i=c),o},o.thresholds=function(){return s.slice()},o.copy=function(){return t8().domain([e,t]).range(a).unknown(i)},fn.apply(Ca(o),arguments)}function r8(){var e=[.5],t=[0,1],n,s=1;function a(i){return i!=null&&i<=i?t[Eu(e,i,0,s)]:n}return a.domain=function(i){return arguments.length?(e=Array.from(i),s=Math.min(e.length,t.length-1),a):e.slice()},a.range=function(i){return arguments.length?(t=Array.from(i),s=Math.min(e.length,t.length-1),a):t.slice()},a.invertExtent=function(i){var o=t.indexOf(i);return[e[o-1],e[o]]},a.unknown=function(i){return arguments.length?(n=i,a):n},a.copy=function(){return r8().domain(e).range(t).unknown(n)},fn.apply(a,arguments)}const Ax=new Date,Px=new Date;function Ot(e,t,n,s){function a(i){return e(i=arguments.length===0?new Date:new Date(+i)),i}return a.floor=i=>(e(i=new Date(+i)),i),a.ceil=i=>(e(i=new Date(i-1)),t(i,1),e(i),i),a.round=i=>{const o=a(i),l=a.ceil(i);return i-o<l-i?o:l},a.offset=(i,o)=>(t(i=new Date(+i),o==null?1:Math.floor(o)),i),a.range=(i,o,l)=>{const c=[];if(i=a.ceil(i),l=l==null?1:Math.floor(l),!(i<o)||!(l>0))return c;let d;do c.push(d=new Date(+i)),t(i,l),e(i);while(d<i&&i<o);return c},a.filter=i=>Ot(o=>{if(o>=o)for(;e(o),!i(o);)o.setTime(o-1)},(o,l)=>{if(o>=o)if(l<0)for(;++l<=0;)for(;t(o,-1),!i(o););else for(;--l>=0;)for(;t(o,1),!i(o););}),n&&(a.count=(i,o)=>(Ax.setTime(+i),Px.setTime(+o),e(Ax),e(Px),Math.floor(n(Ax,Px))),a.every=i=>(i=Math.floor(i),!isFinite(i)||!(i>0)?null:i>1?a.filter(s?o=>s(o)%i===0:o=>a.count(0,o)%i===0):a)),a}const s0=Ot(()=>{},(e,t)=>{e.setTime(+e+t)},(e,t)=>t-e);s0.every=e=>(e=Math.floor(e),!isFinite(e)||!(e>0)?null:e>1?Ot(t=>{t.setTime(Math.floor(t/e)*e)},(t,n)=>{t.setTime(+t+n*e)},(t,n)=>(n-t)/e):s0);s0.range;const cs=1e3,on=cs*60,ds=on*60,js=ds*24,C2=js*7,ak=js*30,Ex=js*365,Za=Ot(e=>{e.setTime(e-e.getMilliseconds())},(e,t)=>{e.setTime(+e+t*cs)},(e,t)=>(t-e)/cs,e=>e.getUTCSeconds());Za.range;const A2=Ot(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cs)},(e,t)=>{e.setTime(+e+t*on)},(e,t)=>(t-e)/on,e=>e.getMinutes());A2.range;const P2=Ot(e=>{e.setUTCSeconds(0,0)},(e,t)=>{e.setTime(+e+t*on)},(e,t)=>(t-e)/on,e=>e.getUTCMinutes());P2.range;const E2=Ot(e=>{e.setTime(e-e.getMilliseconds()-e.getSeconds()*cs-e.getMinutes()*on)},(e,t)=>{e.setTime(+e+t*ds)},(e,t)=>(t-e)/ds,e=>e.getHours());E2.range;const O2=Ot(e=>{e.setUTCMinutes(0,0,0)},(e,t)=>{e.setTime(+e+t*ds)},(e,t)=>(t-e)/ds,e=>e.getUTCHours());O2.range;const Mu=Ot(e=>e.setHours(0,0,0,0),(e,t)=>e.setDate(e.getDate()+t),(e,t)=>(t-e-(t.getTimezoneOffset()-e.getTimezoneOffset())*on)/js,e=>e.getDate()-1);Mu.range;const qp=Ot(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/js,e=>e.getUTCDate()-1);qp.range;const n8=Ot(e=>{e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCDate(e.getUTCDate()+t)},(e,t)=>(t-e)/js,e=>Math.floor(e/js));n8.range;function Ri(e){return Ot(t=>{t.setDate(t.getDate()-(t.getDay()+7-e)%7),t.setHours(0,0,0,0)},(t,n)=>{t.setDate(t.getDate()+n*7)},(t,n)=>(n-t-(n.getTimezoneOffset()-t.getTimezoneOffset())*on)/C2)}const Up=Ri(0),a0=Ri(1),Yoe=Ri(2),Xoe=Ri(3),sl=Ri(4),Joe=Ri(5),Zoe=Ri(6);Up.range;a0.range;Yoe.range;Xoe.range;sl.range;Joe.range;Zoe.range;function Ii(e){return Ot(t=>{t.setUTCDate(t.getUTCDate()-(t.getUTCDay()+7-e)%7),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCDate(t.getUTCDate()+n*7)},(t,n)=>(n-t)/C2)}const Wp=Ii(0),i0=Ii(1),ele=Ii(2),tle=Ii(3),al=Ii(4),rle=Ii(5),nle=Ii(6);Wp.range;i0.range;ele.range;tle.range;al.range;rle.range;nle.range;const T2=Ot(e=>{e.setDate(1),e.setHours(0,0,0,0)},(e,t)=>{e.setMonth(e.getMonth()+t)},(e,t)=>t.getMonth()-e.getMonth()+(t.getFullYear()-e.getFullYear())*12,e=>e.getMonth());T2.range;const M2=Ot(e=>{e.setUTCDate(1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCMonth(e.getUTCMonth()+t)},(e,t)=>t.getUTCMonth()-e.getUTCMonth()+(t.getUTCFullYear()-e.getUTCFullYear())*12,e=>e.getUTCMonth());M2.range;const ws=Ot(e=>{e.setMonth(0,1),e.setHours(0,0,0,0)},(e,t)=>{e.setFullYear(e.getFullYear()+t)},(e,t)=>t.getFullYear()-e.getFullYear(),e=>e.getFullYear());ws.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ot(t=>{t.setFullYear(Math.floor(t.getFullYear()/e)*e),t.setMonth(0,1),t.setHours(0,0,0,0)},(t,n)=>{t.setFullYear(t.getFullYear()+n*e)});ws.range;const Ns=Ot(e=>{e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},(e,t)=>{e.setUTCFullYear(e.getUTCFullYear()+t)},(e,t)=>t.getUTCFullYear()-e.getUTCFullYear(),e=>e.getUTCFullYear());Ns.every=e=>!isFinite(e=Math.floor(e))||!(e>0)?null:Ot(t=>{t.setUTCFullYear(Math.floor(t.getUTCFullYear()/e)*e),t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},(t,n)=>{t.setUTCFullYear(t.getUTCFullYear()+n*e)});Ns.range;function s8(e,t,n,s,a,i){const o=[[Za,1,cs],[Za,5,5*cs],[Za,15,15*cs],[Za,30,30*cs],[i,1,on],[i,5,5*on],[i,15,15*on],[i,30,30*on],[a,1,ds],[a,3,3*ds],[a,6,6*ds],[a,12,12*ds],[s,1,js],[s,2,2*js],[n,1,C2],[t,1,ak],[t,3,3*ak],[e,1,Ex]];function l(d,m,u){const h=m<d;h&&([d,m]=[m,d]);const f=u&&typeof u.range=="function"?u:c(d,m,u),b=f?f.range(d,+m+1):[];return h?b.reverse():b}function c(d,m,u){const h=Math.abs(m-d)/u,f=f2(([,,x])=>x).right(o,h);if(f===o.length)return e.every(sb(d/Ex,m/Ex,u));if(f===0)return s0.every(Math.max(sb(d,m,u),1));const[b,g]=o[h/o[f-1][2]<o[f][2]/h?f-1:f];return b.every(g)}return[l,c]}const[sle,ale]=s8(Ns,M2,Wp,n8,O2,P2),[ile,ole]=s8(ws,T2,Up,Mu,E2,A2);function Ox(e){if(0<=e.y&&e.y<100){var t=new Date(-1,e.m,e.d,e.H,e.M,e.S,e.L);return t.setFullYear(e.y),t}return new Date(e.y,e.m,e.d,e.H,e.M,e.S,e.L)}function Tx(e){if(0<=e.y&&e.y<100){var t=new Date(Date.UTC(-1,e.m,e.d,e.H,e.M,e.S,e.L));return t.setUTCFullYear(e.y),t}return new Date(Date.UTC(e.y,e.m,e.d,e.H,e.M,e.S,e.L))}function hc(e,t,n){return{y:e,m:t,d:n,H:0,M:0,S:0,L:0}}function lle(e){var t=e.dateTime,n=e.date,s=e.time,a=e.periods,i=e.days,o=e.shortDays,l=e.months,c=e.shortMonths,d=pc(a),m=fc(a),u=pc(i),h=fc(i),f=pc(o),b=fc(o),g=pc(l),x=fc(l),p=pc(c),y=fc(c),v={a:M,A:D,b:W,B:P,c:null,d:uk,e:uk,f:Ole,g:zle,G:Ule,H:Ale,I:Ple,j:Ele,L:a8,m:Tle,M:Mle,p:V,q:K,Q:pk,s:fk,S:Lle,u:$le,U:Rle,V:Ile,w:Dle,W:Fle,x:null,X:null,y:Ble,Y:qle,Z:Wle,"%":hk},N={a:ne,A:G,b:oe,B:H,c:null,d:mk,e:mk,f:Gle,g:sce,G:ice,H:Vle,I:Hle,j:Kle,L:o8,m:Qle,M:Yle,p:ee,q:J,Q:pk,s:fk,S:Xle,u:Jle,U:Zle,V:ece,w:tce,W:rce,x:null,X:null,y:nce,Y:ace,Z:oce,"%":hk},w={a:A,A:E,b:R,B:I,c:O,d:ck,e:ck,f:_le,g:lk,G:ok,H:dk,I:dk,j:vle,L:Nle,m:ble,M:jle,p:T,q:yle,Q:Sle,s:Cle,S:wle,u:hle,U:ple,V:fle,w:mle,W:xle,x:L,X:F,y:lk,Y:ok,Z:gle,"%":kle};v.x=j(n,v),v.X=j(s,v),v.c=j(t,v),N.x=j(n,N),N.X=j(s,N),N.c=j(t,N);function j(X,se){return function($){var C=[],U=-1,q=0,de=X.length,he,le,be;for($ instanceof Date||($=new Date(+$));++U<de;)X.charCodeAt(U)===37&&(C.push(X.slice(q,U)),(le=ik[he=X.charAt(++U)])!=null?he=X.charAt(++U):le=he==="e"?" ":"0",(be=se[he])&&(he=be($,le)),C.push(he),q=U+1);return C.push(X.slice(q,U)),C.join("")}}function _(X,se){return function($){var C=hc(1900,void 0,1),U=S(C,X,$+="",0),q,de;if(U!=$.length)return null;if("Q"in C)return new Date(C.Q);if("s"in C)return new Date(C.s*1e3+("L"in C?C.L:0));if(se&&!("Z"in C)&&(C.Z=0),"p"in C&&(C.H=C.H%12+C.p*12),C.m===void 0&&(C.m="q"in C?C.q:0),"V"in C){if(C.V<1||C.V>53)return null;"w"in C||(C.w=1),"Z"in C?(q=Tx(hc(C.y,0,1)),de=q.getUTCDay(),q=de>4||de===0?i0.ceil(q):i0(q),q=qp.offset(q,(C.V-1)*7),C.y=q.getUTCFullYear(),C.m=q.getUTCMonth(),C.d=q.getUTCDate()+(C.w+6)%7):(q=Ox(hc(C.y,0,1)),de=q.getDay(),q=de>4||de===0?a0.ceil(q):a0(q),q=Mu.offset(q,(C.V-1)*7),C.y=q.getFullYear(),C.m=q.getMonth(),C.d=q.getDate()+(C.w+6)%7)}else("W"in C||"U"in C)&&("w"in C||(C.w="u"in C?C.u%7:"W"in C?1:0),de="Z"in C?Tx(hc(C.y,0,1)).getUTCDay():Ox(hc(C.y,0,1)).getDay(),C.m=0,C.d="W"in C?(C.w+6)%7+C.W*7-(de+5)%7:C.w+C.U*7-(de+6)%7);return"Z"in C?(C.H+=C.Z/100|0,C.M+=C.Z%100,Tx(C)):Ox(C)}}function S(X,se,$,C){for(var U=0,q=se.length,de=$.length,he,le;U<q;){if(C>=de)return-1;if(he=se.charCodeAt(U++),he===37){if(he=se.charAt(U++),le=w[he in ik?se.charAt(U++):he],!le||(C=le(X,$,C))<0)return-1}else if(he!=$.charCodeAt(C++))return-1}return C}function T(X,se,$){var C=d.exec(se.slice($));return C?(X.p=m.get(C[0].toLowerCase()),$+C[0].length):-1}function A(X,se,$){var C=f.exec(se.slice($));return C?(X.w=b.get(C[0].toLowerCase()),$+C[0].length):-1}function E(X,se,$){var C=u.exec(se.slice($));return C?(X.w=h.get(C[0].toLowerCase()),$+C[0].length):-1}function R(X,se,$){var C=p.exec(se.slice($));return C?(X.m=y.get(C[0].toLowerCase()),$+C[0].length):-1}function I(X,se,$){var C=g.exec(se.slice($));return C?(X.m=x.get(C[0].toLowerCase()),$+C[0].length):-1}function O(X,se,$){return S(X,t,se,$)}function L(X,se,$){return S(X,n,se,$)}function F(X,se,$){return S(X,s,se,$)}function M(X){return o[X.getDay()]}function D(X){return i[X.getDay()]}function W(X){return c[X.getMonth()]}function P(X){return l[X.getMonth()]}function V(X){return a[+(X.getHours()>=12)]}function K(X){return 1+~~(X.getMonth()/3)}function ne(X){return o[X.getUTCDay()]}function G(X){return i[X.getUTCDay()]}function oe(X){return c[X.getUTCMonth()]}function H(X){return l[X.getUTCMonth()]}function ee(X){return a[+(X.getUTCHours()>=12)]}function J(X){return 1+~~(X.getUTCMonth()/3)}return{format:function(X){var se=j(X+="",v);return se.toString=function(){return X},se},parse:function(X){var se=_(X+="",!1);return se.toString=function(){return X},se},utcFormat:function(X){var se=j(X+="",N);return se.toString=function(){return X},se},utcParse:function(X){var se=_(X+="",!0);return se.toString=function(){return X},se}}}var ik={"-":"",_:" ",0:"0"},Ft=/^\s*\d+/,cle=/^%/,dle=/[\\^$*+?|[\]().{}]/g;function We(e,t,n){var s=e<0?"-":"",a=(s?-e:e)+"",i=a.length;return s+(i<n?new Array(n-i+1).join(t)+a:a)}function ule(e){return e.replace(dle,"\\$&")}function pc(e){return new RegExp("^(?:"+e.map(ule).join("|")+")","i")}function fc(e){return new Map(e.map((t,n)=>[t.toLowerCase(),n]))}function mle(e,t,n){var s=Ft.exec(t.slice(n,n+1));return s?(e.w=+s[0],n+s[0].length):-1}function hle(e,t,n){var s=Ft.exec(t.slice(n,n+1));return s?(e.u=+s[0],n+s[0].length):-1}function ple(e,t,n){var s=Ft.exec(t.slice(n,n+2));return s?(e.U=+s[0],n+s[0].length):-1}function fle(e,t,n){var s=Ft.exec(t.slice(n,n+2));return s?(e.V=+s[0],n+s[0].length):-1}function xle(e,t,n){var s=Ft.exec(t.slice(n,n+2));return s?(e.W=+s[0],n+s[0].length):-1}function ok(e,t,n){var s=Ft.exec(t.slice(n,n+4));return s?(e.y=+s[0],n+s[0].length):-1}function lk(e,t,n){var s=Ft.exec(t.slice(n,n+2));return s?(e.y=+s[0]+(+s[0]>68?1900:2e3),n+s[0].length):-1}function gle(e,t,n){var s=/^(Z)|([+-]\d\d)(?::?(\d\d))?/.exec(t.slice(n,n+6));return s?(e.Z=s[1]?0:-(s[2]+(s[3]||"00")),n+s[0].length):-1}function yle(e,t,n){var s=Ft.exec(t.slice(n,n+1));return s?(e.q=s[0]*3-3,n+s[0].length):-1}function ble(e,t,n){var s=Ft.exec(t.slice(n,n+2));return s?(e.m=s[0]-1,n+s[0].length):-1}function ck(e,t,n){var s=Ft.exec(t.slice(n,n+2));return s?(e.d=+s[0],n+s[0].length):-1}function vle(e,t,n){var s=Ft.exec(t.slice(n,n+3));return s?(e.m=0,e.d=+s[0],n+s[0].length):-1}function dk(e,t,n){var s=Ft.exec(t.slice(n,n+2));return s?(e.H=+s[0],n+s[0].length):-1}function jle(e,t,n){var s=Ft.exec(t.slice(n,n+2));return s?(e.M=+s[0],n+s[0].length):-1}function wle(e,t,n){var s=Ft.exec(t.slice(n,n+2));return s?(e.S=+s[0],n+s[0].length):-1}function Nle(e,t,n){var s=Ft.exec(t.slice(n,n+3));return s?(e.L=+s[0],n+s[0].length):-1}function _le(e,t,n){var s=Ft.exec(t.slice(n,n+6));return s?(e.L=Math.floor(s[0]/1e3),n+s[0].length):-1}function kle(e,t,n){var s=cle.exec(t.slice(n,n+1));return s?n+s[0].length:-1}function Sle(e,t,n){var s=Ft.exec(t.slice(n));return s?(e.Q=+s[0],n+s[0].length):-1}function Cle(e,t,n){var s=Ft.exec(t.slice(n));return s?(e.s=+s[0],n+s[0].length):-1}function uk(e,t){return We(e.getDate(),t,2)}function Ale(e,t){return We(e.getHours(),t,2)}function Ple(e,t){return We(e.getHours()%12||12,t,2)}function Ele(e,t){return We(1+Mu.count(ws(e),e),t,3)}function a8(e,t){return We(e.getMilliseconds(),t,3)}function Ole(e,t){return a8(e,t)+"000"}function Tle(e,t){return We(e.getMonth()+1,t,2)}function Mle(e,t){return We(e.getMinutes(),t,2)}function Lle(e,t){return We(e.getSeconds(),t,2)}function $le(e){var t=e.getDay();return t===0?7:t}function Rle(e,t){return We(Up.count(ws(e)-1,e),t,2)}function i8(e){var t=e.getDay();return t>=4||t===0?sl(e):sl.ceil(e)}function Ile(e,t){return e=i8(e),We(sl.count(ws(e),e)+(ws(e).getDay()===4),t,2)}function Dle(e){return e.getDay()}function Fle(e,t){return We(a0.count(ws(e)-1,e),t,2)}function Ble(e,t){return We(e.getFullYear()%100,t,2)}function zle(e,t){return e=i8(e),We(e.getFullYear()%100,t,2)}function qle(e,t){return We(e.getFullYear()%1e4,t,4)}function Ule(e,t){var n=e.getDay();return e=n>=4||n===0?sl(e):sl.ceil(e),We(e.getFullYear()%1e4,t,4)}function Wle(e){var t=e.getTimezoneOffset();return(t>0?"-":(t*=-1,"+"))+We(t/60|0,"0",2)+We(t%60,"0",2)}function mk(e,t){return We(e.getUTCDate(),t,2)}function Vle(e,t){return We(e.getUTCHours(),t,2)}function Hle(e,t){return We(e.getUTCHours()%12||12,t,2)}function Kle(e,t){return We(1+qp.count(Ns(e),e),t,3)}function o8(e,t){return We(e.getUTCMilliseconds(),t,3)}function Gle(e,t){return o8(e,t)+"000"}function Qle(e,t){return We(e.getUTCMonth()+1,t,2)}function Yle(e,t){return We(e.getUTCMinutes(),t,2)}function Xle(e,t){return We(e.getUTCSeconds(),t,2)}function Jle(e){var t=e.getUTCDay();return t===0?7:t}function Zle(e,t){return We(Wp.count(Ns(e)-1,e),t,2)}function l8(e){var t=e.getUTCDay();return t>=4||t===0?al(e):al.ceil(e)}function ece(e,t){return e=l8(e),We(al.count(Ns(e),e)+(Ns(e).getUTCDay()===4),t,2)}function tce(e){return e.getUTCDay()}function rce(e,t){return We(i0.count(Ns(e)-1,e),t,2)}function nce(e,t){return We(e.getUTCFullYear()%100,t,2)}function sce(e,t){return e=l8(e),We(e.getUTCFullYear()%100,t,2)}function ace(e,t){return We(e.getUTCFullYear()%1e4,t,4)}function ice(e,t){var n=e.getUTCDay();return e=n>=4||n===0?al(e):al.ceil(e),We(e.getUTCFullYear()%1e4,t,4)}function oce(){return"+0000"}function hk(){return"%"}function pk(e){return+e}function fk(e){return Math.floor(+e/1e3)}var Ui,c8,d8;lce({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});function lce(e){return Ui=lle(e),c8=Ui.format,Ui.parse,d8=Ui.utcFormat,Ui.utcParse,Ui}function cce(e){return new Date(e)}function dce(e){return e instanceof Date?+e:+new Date(+e)}function L2(e,t,n,s,a,i,o,l,c,d){var m=v2(),u=m.invert,h=m.domain,f=d(".%L"),b=d(":%S"),g=d("%I:%M"),x=d("%I %p"),p=d("%a %d"),y=d("%b %d"),v=d("%B"),N=d("%Y");function w(j){return(c(j)<j?f:l(j)<j?b:o(j)<j?g:i(j)<j?x:s(j)<j?a(j)<j?p:y:n(j)<j?v:N)(j)}return m.invert=function(j){return new Date(u(j))},m.domain=function(j){return arguments.length?h(Array.from(j,dce)):h().map(cce)},m.ticks=function(j){var _=h();return e(_[0],_[_.length-1],j??10)},m.tickFormat=function(j,_){return _==null?w:d(_)},m.nice=function(j){var _=h();return(!j||typeof j.range!="function")&&(j=t(_[0],_[_.length-1],j??10)),j?h(YE(_,j)):m},m.copy=function(){return Tu(m,L2(e,t,n,s,a,i,o,l,c,d))},m}function uce(){return fn.apply(L2(ile,ole,ws,T2,Up,Mu,E2,A2,Za,c8).domain([new Date(2e3,0,1),new Date(2e3,0,2)]),arguments)}function mce(){return fn.apply(L2(sle,ale,Ns,M2,Wp,qp,O2,P2,Za,d8).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)]),arguments)}function Vp(){var e=0,t=1,n,s,a,i,o=ur,l=!1,c;function d(u){return u==null||isNaN(u=+u)?c:o(a===0?.5:(u=(i(u)-n)*a,l?Math.max(0,Math.min(1,u)):u))}d.domain=function(u){return arguments.length?([e,t]=u,n=i(e=+e),s=i(t=+t),a=n===s?0:1/(s-n),d):[e,t]},d.clamp=function(u){return arguments.length?(l=!!u,d):l},d.interpolator=function(u){return arguments.length?(o=u,d):o};function m(u){return function(h){var f,b;return arguments.length?([f,b]=h,o=u(f,b),d):[o(0),o(1)]}}return d.range=m(ql),d.rangeRound=m(b2),d.unknown=function(u){return arguments.length?(c=u,d):c},function(u){return i=u,n=u(e),s=u(t),a=n===s?0:1/(s-n),d}}function Aa(e,t){return t.domain(e.domain()).interpolator(e.interpolator()).clamp(e.clamp()).unknown(e.unknown())}function u8(){var e=Ca(Vp()(ur));return e.copy=function(){return Aa(e,u8())},Es.apply(e,arguments)}function m8(){var e=N2(Vp()).domain([1,10]);return e.copy=function(){return Aa(e,m8()).base(e.base())},Es.apply(e,arguments)}function h8(){var e=_2(Vp());return e.copy=function(){return Aa(e,h8()).constant(e.constant())},Es.apply(e,arguments)}function $2(){var e=k2(Vp());return e.copy=function(){return Aa(e,$2()).exponent(e.exponent())},Es.apply(e,arguments)}function hce(){return $2.apply(null,arguments).exponent(.5)}function p8(){var e=[],t=ur;function n(s){if(s!=null&&!isNaN(s=+s))return t((Eu(e,s,1)-1)/(e.length-1))}return n.domain=function(s){if(!arguments.length)return e.slice();e=[];for(let a of s)a!=null&&!isNaN(a=+a)&&e.push(a);return e.sort(xa),n},n.interpolator=function(s){return arguments.length?(t=s,n):t},n.range=function(){return e.map((s,a)=>t(a/(e.length-1)))},n.quantiles=function(s){return Array.from({length:s+1},(a,i)=>Zie(e,i/s))},n.copy=function(){return p8(t).domain(e)},Es.apply(n,arguments)}function Hp(){var e=0,t=.5,n=1,s=1,a,i,o,l,c,d=ur,m,u=!1,h;function f(g){return isNaN(g=+g)?h:(g=.5+((g=+m(g))-i)*(s*g<s*i?l:c),d(u?Math.max(0,Math.min(1,g)):g))}f.domain=function(g){return arguments.length?([e,t,n]=g,a=m(e=+e),i=m(t=+t),o=m(n=+n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,f):[e,t,n]},f.clamp=function(g){return arguments.length?(u=!!g,f):u},f.interpolator=function(g){return arguments.length?(d=g,f):d};function b(g){return function(x){var p,y,v;return arguments.length?([p,y,v]=x,d=koe(g,[p,y,v]),f):[d(0),d(.5),d(1)]}}return f.range=b(ql),f.rangeRound=b(b2),f.unknown=function(g){return arguments.length?(h=g,f):h},function(g){return m=g,a=g(e),i=g(t),o=g(n),l=a===i?0:.5/(i-a),c=i===o?0:.5/(o-i),s=i<a?-1:1,f}}function f8(){var e=Ca(Hp()(ur));return e.copy=function(){return Aa(e,f8())},Es.apply(e,arguments)}function x8(){var e=N2(Hp()).domain([.1,1,10]);return e.copy=function(){return Aa(e,x8()).base(e.base())},Es.apply(e,arguments)}function g8(){var e=_2(Hp());return e.copy=function(){return Aa(e,g8()).constant(e.constant())},Es.apply(e,arguments)}function R2(){var e=k2(Hp());return e.copy=function(){return Aa(e,R2()).exponent(e.exponent())},Es.apply(e,arguments)}function pce(){return R2.apply(null,arguments).exponent(.5)}const xk=Object.freeze(Object.defineProperty({__proto__:null,scaleBand:Pd,scaleDiverging:f8,scaleDivergingLog:x8,scaleDivergingPow:R2,scaleDivergingSqrt:pce,scaleDivergingSymlog:g8,scaleIdentity:QE,scaleImplicit:ab,scaleLinear:n0,scaleLog:XE,scaleOrdinal:x2,scalePoint:qc,scalePow:S2,scaleQuantile:e8,scaleQuantize:t8,scaleRadial:ZE,scaleSequential:u8,scaleSequentialLog:m8,scaleSequentialPow:$2,scaleSequentialQuantile:p8,scaleSequentialSqrt:hce,scaleSequentialSymlog:h8,scaleSqrt:Goe,scaleSymlog:JE,scaleThreshold:r8,scaleTime:uce,scaleUtc:mce,tickFormat:GE},Symbol.toStringTag,{value:"Module"}));var fce=Ml;function xce(e,t,n){for(var s=-1,a=e.length;++s<a;){var i=e[s],o=t(i);if(o!=null&&(l===void 0?o===o&&!fce(o):n(o,l)))var l=o,c=i}return c}var Kp=xce;function gce(e,t){return e>t}var y8=gce,yce=Kp,bce=y8,vce=Bl;function jce(e){return e&&e.length?yce(e,vce,bce):void 0}var wce=jce;const Gp=Ke(wce);function Nce(e,t){return e<t}var b8=Nce,_ce=Kp,kce=b8,Sce=Bl;function Cce(e){return e&&e.length?_ce(e,Sce,kce):void 0}var Ace=Cce;const Qp=Ke(Ace);var Pce=Y1,Ece=Xn,Oce=CE,Tce=Or;function Mce(e,t){var n=Tce(e)?Pce:Oce;return n(e,Ece(t))}var Lce=Mce,$ce=kE,Rce=Lce;function Ice(e,t){return $ce(Rce(e,t),1)}var Dce=Ice;const Fce=Ke(Dce);var Bce=u2;function zce(e,t){return Bce(e,t)}var qce=zce;const Yp=Ke(qce);var Ul=1e9,Uce={precision:20,rounding:4,toExpNeg:-7,toExpPos:21,LN10:"2.302585092994045684017991454684364207601101488628772976033327900967572609677352480235997205089598298341967784042286"},D2,ut=!0,hn="[DecimalError] ",pi=hn+"Invalid argument: ",I2=hn+"Exponent out of range: ",Wl=Math.floor,Ua=Math.pow,Wce=/^(\d+(\.\d*)?|\.\d+)(e[+-]?\d+)?$/i,Ir,Mt=1e7,lt=7,v8=9007199254740991,o0=Wl(v8/lt),_e={};_e.absoluteValue=_e.abs=function(){var e=new this.constructor(this);return e.s&&(e.s=1),e};_e.comparedTo=_e.cmp=function(e){var t,n,s,a,i=this;if(e=new i.constructor(e),i.s!==e.s)return i.s||-e.s;if(i.e!==e.e)return i.e>e.e^i.s<0?1:-1;for(s=i.d.length,a=e.d.length,t=0,n=s<a?s:a;t<n;++t)if(i.d[t]!==e.d[t])return i.d[t]>e.d[t]^i.s<0?1:-1;return s===a?0:s>a^i.s<0?1:-1};_e.decimalPlaces=_e.dp=function(){var e=this,t=e.d.length-1,n=(t-e.e)*lt;if(t=e.d[t],t)for(;t%10==0;t/=10)n--;return n<0?0:n};_e.dividedBy=_e.div=function(e){return fs(this,new this.constructor(e))};_e.dividedToIntegerBy=_e.idiv=function(e){var t=this,n=t.constructor;return Ze(fs(t,new n(e),0,1),n.precision)};_e.equals=_e.eq=function(e){return!this.cmp(e)};_e.exponent=function(){return _t(this)};_e.greaterThan=_e.gt=function(e){return this.cmp(e)>0};_e.greaterThanOrEqualTo=_e.gte=function(e){return this.cmp(e)>=0};_e.isInteger=_e.isint=function(){return this.e>this.d.length-2};_e.isNegative=_e.isneg=function(){return this.s<0};_e.isPositive=_e.ispos=function(){return this.s>0};_e.isZero=function(){return this.s===0};_e.lessThan=_e.lt=function(e){return this.cmp(e)<0};_e.lessThanOrEqualTo=_e.lte=function(e){return this.cmp(e)<1};_e.logarithm=_e.log=function(e){var t,n=this,s=n.constructor,a=s.precision,i=a+5;if(e===void 0)e=new s(10);else if(e=new s(e),e.s<1||e.eq(Ir))throw Error(hn+"NaN");if(n.s<1)throw Error(hn+(n.s?"NaN":"-Infinity"));return n.eq(Ir)?new s(0):(ut=!1,t=fs(Ld(n,i),Ld(e,i),i),ut=!0,Ze(t,a))};_e.minus=_e.sub=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?N8(t,e):j8(t,(e.s=-e.s,e))};_e.modulo=_e.mod=function(e){var t,n=this,s=n.constructor,a=s.precision;if(e=new s(e),!e.s)throw Error(hn+"NaN");return n.s?(ut=!1,t=fs(n,e,0,1).times(e),ut=!0,n.minus(t)):Ze(new s(n),a)};_e.naturalExponential=_e.exp=function(){return w8(this)};_e.naturalLogarithm=_e.ln=function(){return Ld(this)};_e.negated=_e.neg=function(){var e=new this.constructor(this);return e.s=-e.s||0,e};_e.plus=_e.add=function(e){var t=this;return e=new t.constructor(e),t.s==e.s?j8(t,e):N8(t,(e.s=-e.s,e))};_e.precision=_e.sd=function(e){var t,n,s,a=this;if(e!==void 0&&e!==!!e&&e!==1&&e!==0)throw Error(pi+e);if(t=_t(a)+1,s=a.d.length-1,n=s*lt+1,s=a.d[s],s){for(;s%10==0;s/=10)n--;for(s=a.d[0];s>=10;s/=10)n++}return e&&t>n?t:n};_e.squareRoot=_e.sqrt=function(){var e,t,n,s,a,i,o,l=this,c=l.constructor;if(l.s<1){if(!l.s)return new c(0);throw Error(hn+"NaN")}for(e=_t(l),ut=!1,a=Math.sqrt(+l),a==0||a==1/0?(t=qn(l.d),(t.length+e)%2==0&&(t+="0"),a=Math.sqrt(t),e=Wl((e+1)/2)-(e<0||e%2),a==1/0?t="5e"+e:(t=a.toExponential(),t=t.slice(0,t.indexOf("e")+1)+e),s=new c(t)):s=new c(a.toString()),n=c.precision,a=o=n+3;;)if(i=s,s=i.plus(fs(l,i,o+2)).times(.5),qn(i.d).slice(0,o)===(t=qn(s.d)).slice(0,o)){if(t=t.slice(o-3,o+1),a==o&&t=="4999"){if(Ze(i,n+1,0),i.times(i).eq(l)){s=i;break}}else if(t!="9999")break;o+=4}return ut=!0,Ze(s,n)};_e.times=_e.mul=function(e){var t,n,s,a,i,o,l,c,d,m=this,u=m.constructor,h=m.d,f=(e=new u(e)).d;if(!m.s||!e.s)return new u(0);for(e.s*=m.s,n=m.e+e.e,c=h.length,d=f.length,c<d&&(i=h,h=f,f=i,o=c,c=d,d=o),i=[],o=c+d,s=o;s--;)i.push(0);for(s=d;--s>=0;){for(t=0,a=c+s;a>s;)l=i[a]+f[s]*h[a-s-1]+t,i[a--]=l%Mt|0,t=l/Mt|0;i[a]=(i[a]+t)%Mt|0}for(;!i[--o];)i.pop();return t?++n:i.shift(),e.d=i,e.e=n,ut?Ze(e,u.precision):e};_e.toDecimalPlaces=_e.todp=function(e,t){var n=this,s=n.constructor;return n=new s(n),e===void 0?n:(Qn(e,0,Ul),t===void 0?t=s.rounding:Qn(t,0,8),Ze(n,e+_t(n)+1,t))};_e.toExponential=function(e,t){var n,s=this,a=s.constructor;return e===void 0?n=Pi(s,!0):(Qn(e,0,Ul),t===void 0?t=a.rounding:Qn(t,0,8),s=Ze(new a(s),e+1,t),n=Pi(s,!0,e+1)),n};_e.toFixed=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?Pi(a):(Qn(e,0,Ul),t===void 0?t=i.rounding:Qn(t,0,8),s=Ze(new i(a),e+_t(a)+1,t),n=Pi(s.abs(),!1,e+_t(s)+1),a.isneg()&&!a.isZero()?"-"+n:n)};_e.toInteger=_e.toint=function(){var e=this,t=e.constructor;return Ze(new t(e),_t(e)+1,t.rounding)};_e.toNumber=function(){return+this};_e.toPower=_e.pow=function(e){var t,n,s,a,i,o,l=this,c=l.constructor,d=12,m=+(e=new c(e));if(!e.s)return new c(Ir);if(l=new c(l),!l.s){if(e.s<1)throw Error(hn+"Infinity");return l}if(l.eq(Ir))return l;if(s=c.precision,e.eq(Ir))return Ze(l,s);if(t=e.e,n=e.d.length-1,o=t>=n,i=l.s,o){if((n=m<0?-m:m)<=v8){for(a=new c(Ir),t=Math.ceil(s/lt+4),ut=!1;n%2&&(a=a.times(l),yk(a.d,t)),n=Wl(n/2),n!==0;)l=l.times(l),yk(l.d,t);return ut=!0,e.s<0?new c(Ir).div(a):Ze(a,s)}}else if(i<0)throw Error(hn+"NaN");return i=i<0&&e.d[Math.max(t,n)]&1?-1:1,l.s=1,ut=!1,a=e.times(Ld(l,s+d)),ut=!0,a=w8(a),a.s=i,a};_e.toPrecision=function(e,t){var n,s,a=this,i=a.constructor;return e===void 0?(n=_t(a),s=Pi(a,n<=i.toExpNeg||n>=i.toExpPos)):(Qn(e,1,Ul),t===void 0?t=i.rounding:Qn(t,0,8),a=Ze(new i(a),e,t),n=_t(a),s=Pi(a,e<=n||n<=i.toExpNeg,e)),s};_e.toSignificantDigits=_e.tosd=function(e,t){var n=this,s=n.constructor;return e===void 0?(e=s.precision,t=s.rounding):(Qn(e,1,Ul),t===void 0?t=s.rounding:Qn(t,0,8)),Ze(new s(n),e,t)};_e.toString=_e.valueOf=_e.val=_e.toJSON=_e[Symbol.for("nodejs.util.inspect.custom")]=function(){var e=this,t=_t(e),n=e.constructor;return Pi(e,t<=n.toExpNeg||t>=n.toExpPos)};function j8(e,t){var n,s,a,i,o,l,c,d,m=e.constructor,u=m.precision;if(!e.s||!t.s)return t.s||(t=new m(e)),ut?Ze(t,u):t;if(c=e.d,d=t.d,o=e.e,a=t.e,c=c.slice(),i=o-a,i){for(i<0?(s=c,i=-i,l=d.length):(s=d,a=o,l=c.length),o=Math.ceil(u/lt),l=o>l?o+1:l+1,i>l&&(i=l,s.length=1),s.reverse();i--;)s.push(0);s.reverse()}for(l=c.length,i=d.length,l-i<0&&(i=l,s=d,d=c,c=s),n=0;i;)n=(c[--i]=c[i]+d[i]+n)/Mt|0,c[i]%=Mt;for(n&&(c.unshift(n),++a),l=c.length;c[--l]==0;)c.pop();return t.d=c,t.e=a,ut?Ze(t,u):t}function Qn(e,t,n){if(e!==~~e||e<t||e>n)throw Error(pi+e)}function qn(e){var t,n,s,a=e.length-1,i="",o=e[0];if(a>0){for(i+=o,t=1;t<a;t++)s=e[t]+"",n=lt-s.length,n&&(i+=Ds(n)),i+=s;o=e[t],s=o+"",n=lt-s.length,n&&(i+=Ds(n))}else if(o===0)return"0";for(;o%10===0;)o/=10;return i+o}var fs=function(){function e(s,a){var i,o=0,l=s.length;for(s=s.slice();l--;)i=s[l]*a+o,s[l]=i%Mt|0,o=i/Mt|0;return o&&s.unshift(o),s}function t(s,a,i,o){var l,c;if(i!=o)c=i>o?1:-1;else for(l=c=0;l<i;l++)if(s[l]!=a[l]){c=s[l]>a[l]?1:-1;break}return c}function n(s,a,i){for(var o=0;i--;)s[i]-=o,o=s[i]<a[i]?1:0,s[i]=o*Mt+s[i]-a[i];for(;!s[0]&&s.length>1;)s.shift()}return function(s,a,i,o){var l,c,d,m,u,h,f,b,g,x,p,y,v,N,w,j,_,S,T=s.constructor,A=s.s==a.s?1:-1,E=s.d,R=a.d;if(!s.s)return new T(s);if(!a.s)throw Error(hn+"Division by zero");for(c=s.e-a.e,_=R.length,w=E.length,f=new T(A),b=f.d=[],d=0;R[d]==(E[d]||0);)++d;if(R[d]>(E[d]||0)&&--c,i==null?y=i=T.precision:o?y=i+(_t(s)-_t(a))+1:y=i,y<0)return new T(0);if(y=y/lt+2|0,d=0,_==1)for(m=0,R=R[0],y++;(d<w||m)&&y--;d++)v=m*Mt+(E[d]||0),b[d]=v/R|0,m=v%R|0;else{for(m=Mt/(R[0]+1)|0,m>1&&(R=e(R,m),E=e(E,m),_=R.length,w=E.length),N=_,g=E.slice(0,_),x=g.length;x<_;)g[x++]=0;S=R.slice(),S.unshift(0),j=R[0],R[1]>=Mt/2&&++j;do m=0,l=t(R,g,_,x),l<0?(p=g[0],_!=x&&(p=p*Mt+(g[1]||0)),m=p/j|0,m>1?(m>=Mt&&(m=Mt-1),u=e(R,m),h=u.length,x=g.length,l=t(u,g,h,x),l==1&&(m--,n(u,_<h?S:R,h))):(m==0&&(l=m=1),u=R.slice()),h=u.length,h<x&&u.unshift(0),n(g,u,x),l==-1&&(x=g.length,l=t(R,g,_,x),l<1&&(m++,n(g,_<x?S:R,x))),x=g.length):l===0&&(m++,g=[0]),b[d++]=m,l&&g[0]?g[x++]=E[N]||0:(g=[E[N]],x=1);while((N++<w||g[0]!==void 0)&&y--)}return b[0]||b.shift(),f.e=c,Ze(f,o?i+_t(f)+1:i)}}();function w8(e,t){var n,s,a,i,o,l,c=0,d=0,m=e.constructor,u=m.precision;if(_t(e)>16)throw Error(I2+_t(e));if(!e.s)return new m(Ir);for(ut=!1,l=u,o=new m(.03125);e.abs().gte(.1);)e=e.times(o),d+=5;for(s=Math.log(Ua(2,d))/Math.LN10*2+5|0,l+=s,n=a=i=new m(Ir),m.precision=l;;){if(a=Ze(a.times(e),l),n=n.times(++c),o=i.plus(fs(a,n,l)),qn(o.d).slice(0,l)===qn(i.d).slice(0,l)){for(;d--;)i=Ze(i.times(i),l);return m.precision=u,t==null?(ut=!0,Ze(i,u)):i}i=o}}function _t(e){for(var t=e.e*lt,n=e.d[0];n>=10;n/=10)t++;return t}function Mx(e,t,n){if(t>e.LN10.sd())throw ut=!0,n&&(e.precision=n),Error(hn+"LN10 precision limit exceeded");return Ze(new e(e.LN10),t)}function Ds(e){for(var t="";e--;)t+="0";return t}function Ld(e,t){var n,s,a,i,o,l,c,d,m,u=1,h=10,f=e,b=f.d,g=f.constructor,x=g.precision;if(f.s<1)throw Error(hn+(f.s?"NaN":"-Infinity"));if(f.eq(Ir))return new g(0);if(t==null?(ut=!1,d=x):d=t,f.eq(10))return t==null&&(ut=!0),Mx(g,d);if(d+=h,g.precision=d,n=qn(b),s=n.charAt(0),i=_t(f),Math.abs(i)<15e14){for(;s<7&&s!=1||s==1&&n.charAt(1)>3;)f=f.times(e),n=qn(f.d),s=n.charAt(0),u++;i=_t(f),s>1?(f=new g("0."+n),i++):f=new g(s+"."+n.slice(1))}else return c=Mx(g,d+2,x).times(i+""),f=Ld(new g(s+"."+n.slice(1)),d-h).plus(c),g.precision=x,t==null?(ut=!0,Ze(f,x)):f;for(l=o=f=fs(f.minus(Ir),f.plus(Ir),d),m=Ze(f.times(f),d),a=3;;){if(o=Ze(o.times(m),d),c=l.plus(fs(o,new g(a),d)),qn(c.d).slice(0,d)===qn(l.d).slice(0,d))return l=l.times(2),i!==0&&(l=l.plus(Mx(g,d+2,x).times(i+""))),l=fs(l,new g(u),d),g.precision=x,t==null?(ut=!0,Ze(l,x)):l;l=c,a+=2}}function gk(e,t){var n,s,a;for((n=t.indexOf("."))>-1&&(t=t.replace(".","")),(s=t.search(/e/i))>0?(n<0&&(n=s),n+=+t.slice(s+1),t=t.substring(0,s)):n<0&&(n=t.length),s=0;t.charCodeAt(s)===48;)++s;for(a=t.length;t.charCodeAt(a-1)===48;)--a;if(t=t.slice(s,a),t){if(a-=s,n=n-s-1,e.e=Wl(n/lt),e.d=[],s=(n+1)%lt,n<0&&(s+=lt),s<a){for(s&&e.d.push(+t.slice(0,s)),a-=lt;s<a;)e.d.push(+t.slice(s,s+=lt));t=t.slice(s),s=lt-t.length}else s-=a;for(;s--;)t+="0";if(e.d.push(+t),ut&&(e.e>o0||e.e<-o0))throw Error(I2+n)}else e.s=0,e.e=0,e.d=[0];return e}function Ze(e,t,n){var s,a,i,o,l,c,d,m,u=e.d;for(o=1,i=u[0];i>=10;i/=10)o++;if(s=t-o,s<0)s+=lt,a=t,d=u[m=0];else{if(m=Math.ceil((s+1)/lt),i=u.length,m>=i)return e;for(d=i=u[m],o=1;i>=10;i/=10)o++;s%=lt,a=s-lt+o}if(n!==void 0&&(i=Ua(10,o-a-1),l=d/i%10|0,c=t<0||u[m+1]!==void 0||d%i,c=n<4?(l||c)&&(n==0||n==(e.s<0?3:2)):l>5||l==5&&(n==4||c||n==6&&(s>0?a>0?d/Ua(10,o-a):0:u[m-1])%10&1||n==(e.s<0?8:7))),t<1||!u[0])return c?(i=_t(e),u.length=1,t=t-i-1,u[0]=Ua(10,(lt-t%lt)%lt),e.e=Wl(-t/lt)||0):(u.length=1,u[0]=e.e=e.s=0),e;if(s==0?(u.length=m,i=1,m--):(u.length=m+1,i=Ua(10,lt-s),u[m]=a>0?(d/Ua(10,o-a)%Ua(10,a)|0)*i:0),c)for(;;)if(m==0){(u[0]+=i)==Mt&&(u[0]=1,++e.e);break}else{if(u[m]+=i,u[m]!=Mt)break;u[m--]=0,i=1}for(s=u.length;u[--s]===0;)u.pop();if(ut&&(e.e>o0||e.e<-o0))throw Error(I2+_t(e));return e}function N8(e,t){var n,s,a,i,o,l,c,d,m,u,h=e.constructor,f=h.precision;if(!e.s||!t.s)return t.s?t.s=-t.s:t=new h(e),ut?Ze(t,f):t;if(c=e.d,u=t.d,s=t.e,d=e.e,c=c.slice(),o=d-s,o){for(m=o<0,m?(n=c,o=-o,l=u.length):(n=u,s=d,l=c.length),a=Math.max(Math.ceil(f/lt),l)+2,o>a&&(o=a,n.length=1),n.reverse(),a=o;a--;)n.push(0);n.reverse()}else{for(a=c.length,l=u.length,m=a<l,m&&(l=a),a=0;a<l;a++)if(c[a]!=u[a]){m=c[a]<u[a];break}o=0}for(m&&(n=c,c=u,u=n,t.s=-t.s),l=c.length,a=u.length-l;a>0;--a)c[l++]=0;for(a=u.length;a>o;){if(c[--a]<u[a]){for(i=a;i&&c[--i]===0;)c[i]=Mt-1;--c[i],c[a]+=Mt}c[a]-=u[a]}for(;c[--l]===0;)c.pop();for(;c[0]===0;c.shift())--s;return c[0]?(t.d=c,t.e=s,ut?Ze(t,f):t):new h(0)}function Pi(e,t,n){var s,a=_t(e),i=qn(e.d),o=i.length;return t?(n&&(s=n-o)>0?i=i.charAt(0)+"."+i.slice(1)+Ds(s):o>1&&(i=i.charAt(0)+"."+i.slice(1)),i=i+(a<0?"e":"e+")+a):a<0?(i="0."+Ds(-a-1)+i,n&&(s=n-o)>0&&(i+=Ds(s))):a>=o?(i+=Ds(a+1-o),n&&(s=n-a-1)>0&&(i=i+"."+Ds(s))):((s=a+1)<o&&(i=i.slice(0,s)+"."+i.slice(s)),n&&(s=n-o)>0&&(a+1===o&&(i+="."),i+=Ds(s))),e.s<0?"-"+i:i}function yk(e,t){if(e.length>t)return e.length=t,!0}function _8(e){var t,n,s;function a(i){var o=this;if(!(o instanceof a))return new a(i);if(o.constructor=a,i instanceof a){o.s=i.s,o.e=i.e,o.d=(i=i.d)?i.slice():i;return}if(typeof i=="number"){if(i*0!==0)throw Error(pi+i);if(i>0)o.s=1;else if(i<0)i=-i,o.s=-1;else{o.s=0,o.e=0,o.d=[0];return}if(i===~~i&&i<1e7){o.e=0,o.d=[i];return}return gk(o,i.toString())}else if(typeof i!="string")throw Error(pi+i);if(i.charCodeAt(0)===45?(i=i.slice(1),o.s=-1):o.s=1,Wce.test(i))gk(o,i);else throw Error(pi+i)}if(a.prototype=_e,a.ROUND_UP=0,a.ROUND_DOWN=1,a.ROUND_CEIL=2,a.ROUND_FLOOR=3,a.ROUND_HALF_UP=4,a.ROUND_HALF_DOWN=5,a.ROUND_HALF_EVEN=6,a.ROUND_HALF_CEIL=7,a.ROUND_HALF_FLOOR=8,a.clone=_8,a.config=a.set=Vce,e===void 0&&(e={}),e)for(s=["precision","rounding","toExpNeg","toExpPos","LN10"],t=0;t<s.length;)e.hasOwnProperty(n=s[t++])||(e[n]=this[n]);return a.config(e),a}function Vce(e){if(!e||typeof e!="object")throw Error(hn+"Object expected");var t,n,s,a=["precision",1,Ul,"rounding",0,8,"toExpNeg",-1/0,0,"toExpPos",0,1/0];for(t=0;t<a.length;t+=3)if((s=e[n=a[t]])!==void 0)if(Wl(s)===s&&s>=a[t+1]&&s<=a[t+2])this[n]=s;else throw Error(pi+n+": "+s);if((s=e[n="LN10"])!==void 0)if(s==Math.LN10)this[n]=new this(s);else throw Error(pi+n+": "+s);return this}var D2=_8(Uce);Ir=new D2(1);const Je=D2;function Hce(e){return Yce(e)||Qce(e)||Gce(e)||Kce()}function Kce(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Gce(e,t){if(e){if(typeof e=="string")return cb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return cb(e,t)}}function Qce(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function Yce(e){if(Array.isArray(e))return cb(e)}function cb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var Xce=function(t){return t},k8={},S8=function(t){return t===k8},bk=function(t){return function n(){return arguments.length===0||arguments.length===1&&S8(arguments.length<=0?void 0:arguments[0])?n:t.apply(void 0,arguments)}},Jce=function e(t,n){return t===1?n:bk(function(){for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];var o=a.filter(function(l){return l!==k8}).length;return o>=t?n.apply(void 0,a):e(t-o,bk(function(){for(var l=arguments.length,c=new Array(l),d=0;d<l;d++)c[d]=arguments[d];var m=a.map(function(u){return S8(u)?c.shift():u});return n.apply(void 0,Hce(m).concat(c))}))})},Xp=function(t){return Jce(t.length,t)},db=function(t,n){for(var s=[],a=t;a<n;++a)s[a-t]=a;return s},Zce=Xp(function(e,t){return Array.isArray(t)?t.map(e):Object.keys(t).map(function(n){return t[n]}).map(e)}),ede=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];if(!n.length)return Xce;var a=n.reverse(),i=a[0],o=a.slice(1);return function(){return o.reduce(function(l,c){return c(l)},i.apply(void 0,arguments))}},ub=function(t){return Array.isArray(t)?t.reverse():t.split("").reverse.join("")},C8=function(t){var n=null,s=null;return function(){for(var a=arguments.length,i=new Array(a),o=0;o<a;o++)i[o]=arguments[o];return n&&i.every(function(l,c){return l===n[c]})||(n=i,s=t.apply(void 0,i)),s}};function tde(e){var t;return e===0?t=1:t=Math.floor(new Je(e).abs().log(10).toNumber())+1,t}function rde(e,t,n){for(var s=new Je(e),a=0,i=[];s.lt(t)&&a<1e5;)i.push(s.toNumber()),s=s.add(n),a++;return i}var nde=Xp(function(e,t,n){var s=+e,a=+t;return s+n*(a-s)}),sde=Xp(function(e,t,n){var s=t-+e;return s=s||1/0,(n-e)/s}),ade=Xp(function(e,t,n){var s=t-+e;return s=s||1/0,Math.max(0,Math.min(1,(n-e)/s))});const Jp={rangeStep:rde,getDigitCount:tde,interpolateNumber:nde,uninterpolateNumber:sde,uninterpolateTruncation:ade};function mb(e){return lde(e)||ode(e)||A8(e)||ide()}function ide(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function ode(e){if(typeof Symbol<"u"&&Symbol.iterator in Object(e))return Array.from(e)}function lde(e){if(Array.isArray(e))return hb(e)}function $d(e,t){return ude(e)||dde(e,t)||A8(e,t)||cde()}function cde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function A8(e,t){if(e){if(typeof e=="string")return hb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return hb(e,t)}}function hb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function dde(e,t){if(!(typeof Symbol>"u"||!(Symbol.iterator in Object(e)))){var n=[],s=!0,a=!1,i=void 0;try{for(var o=e[Symbol.iterator](),l;!(s=(l=o.next()).done)&&(n.push(l.value),!(t&&n.length===t));s=!0);}catch(c){a=!0,i=c}finally{try{!s&&o.return!=null&&o.return()}finally{if(a)throw i}}return n}}function ude(e){if(Array.isArray(e))return e}function P8(e){var t=$d(e,2),n=t[0],s=t[1],a=n,i=s;return n>s&&(a=s,i=n),[a,i]}function E8(e,t,n){if(e.lte(0))return new Je(0);var s=Jp.getDigitCount(e.toNumber()),a=new Je(10).pow(s),i=e.div(a),o=s!==1?.05:.1,l=new Je(Math.ceil(i.div(o).toNumber())).add(n).mul(o),c=l.mul(a);return t?c:new Je(Math.ceil(c))}function mde(e,t,n){var s=1,a=new Je(e);if(!a.isint()&&n){var i=Math.abs(e);i<1?(s=new Je(10).pow(Jp.getDigitCount(e)-1),a=new Je(Math.floor(a.div(s).toNumber())).mul(s)):i>1&&(a=new Je(Math.floor(e)))}else e===0?a=new Je(Math.floor((t-1)/2)):n||(a=new Je(Math.floor(e)));var o=Math.floor((t-1)/2),l=ede(Zce(function(c){return a.add(new Je(c-o).mul(s)).toNumber()}),db);return l(0,t)}function O8(e,t,n,s){var a=arguments.length>4&&arguments[4]!==void 0?arguments[4]:0;if(!Number.isFinite((t-e)/(n-1)))return{step:new Je(0),tickMin:new Je(0),tickMax:new Je(0)};var i=E8(new Je(t).sub(e).div(n-1),s,a),o;e<=0&&t>=0?o=new Je(0):(o=new Je(e).add(t).div(2),o=o.sub(new Je(o).mod(i)));var l=Math.ceil(o.sub(e).div(i).toNumber()),c=Math.ceil(new Je(t).sub(o).div(i).toNumber()),d=l+c+1;return d>n?O8(e,t,n,s,a+1):(d<n&&(c=t>0?c+(n-d):c,l=t>0?l:l+(n-d)),{step:i,tickMin:o.sub(new Je(l).mul(i)),tickMax:o.add(new Je(c).mul(i))})}function hde(e){var t=$d(e,2),n=t[0],s=t[1],a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:6,i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=Math.max(a,2),l=P8([n,s]),c=$d(l,2),d=c[0],m=c[1];if(d===-1/0||m===1/0){var u=m===1/0?[d].concat(mb(db(0,a-1).map(function(){return 1/0}))):[].concat(mb(db(0,a-1).map(function(){return-1/0})),[m]);return n>s?ub(u):u}if(d===m)return mde(d,a,i);var h=O8(d,m,o,i),f=h.step,b=h.tickMin,g=h.tickMax,x=Jp.rangeStep(b,g.add(new Je(.1).mul(f)),f);return n>s?ub(x):x}function pde(e,t){var n=$d(e,2),s=n[0],a=n[1],i=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0,o=P8([s,a]),l=$d(o,2),c=l[0],d=l[1];if(c===-1/0||d===1/0)return[s,a];if(c===d)return[c];var m=Math.max(t,2),u=E8(new Je(d).sub(c).div(m-1),i,0),h=[].concat(mb(Jp.rangeStep(new Je(c),new Je(d).sub(new Je(.99).mul(u)),u)),[d]);return s>a?ub(h):h}var fde=C8(hde),xde=C8(pde),gde=["offset","layout","width","dataKey","data","dataPointFormatter","xAxis","yAxis"];function il(e){"@babel/helpers - typeof";return il=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},il(e)}function l0(){return l0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},l0.apply(this,arguments)}function yde(e,t){return wde(e)||jde(e,t)||vde(e,t)||bde()}function bde(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vde(e,t){if(e){if(typeof e=="string")return vk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return vk(e,t)}}function vk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function jde(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function wde(e){if(Array.isArray(e))return e}function Nde(e,t){if(e==null)return{};var n=_de(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _de(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function kde(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Sde(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,L8(s.key),s)}}function Cde(e,t,n){return t&&Sde(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ade(e,t,n){return t=c0(t),Pde(e,T8()?Reflect.construct(t,n||[],c0(e).constructor):t.apply(e,n))}function Pde(e,t){if(t&&(il(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Ede(e)}function Ede(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T8(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T8=function(){return!!e})()}function c0(e){return c0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},c0(e)}function Ode(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&pb(e,t)}function pb(e,t){return pb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},pb(e,t)}function M8(e,t,n){return t=L8(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function L8(e){var t=Tde(e,"string");return il(t)=="symbol"?t:t+""}function Tde(e,t){if(il(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(il(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Zp=function(e){function t(){return kde(this,t),Ade(this,t,arguments)}return Ode(t,e),Cde(t,[{key:"render",value:function(){var s=this.props,a=s.offset,i=s.layout,o=s.width,l=s.dataKey,c=s.data,d=s.dataPointFormatter,m=s.xAxis,u=s.yAxis,h=Nde(s,gde),f=Te(h,!1);this.props.direction==="x"&&m.type!=="number"&&va();var b=c.map(function(g){var x=d(g,l),p=x.x,y=x.y,v=x.value,N=x.errorVal;if(!N)return null;var w=[],j,_;if(Array.isArray(N)){var S=yde(N,2);j=S[0],_=S[1]}else j=_=N;if(i==="vertical"){var T=m.scale,A=y+a,E=A+o,R=A-o,I=T(v-j),O=T(v+_);w.push({x1:O,y1:E,x2:O,y2:R}),w.push({x1:I,y1:A,x2:O,y2:A}),w.push({x1:I,y1:E,x2:I,y2:R})}else if(i==="horizontal"){var L=u.scale,F=p+a,M=F-o,D=F+o,W=L(v-j),P=L(v+_);w.push({x1:M,y1:P,x2:D,y2:P}),w.push({x1:F,y1:W,x2:F,y2:P}),w.push({x1:M,y1:W,x2:D,y2:W})}return Y.createElement(Ge,l0({className:"recharts-errorBar",key:"bar-".concat(w.map(function(V){return"".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))},f),w.map(function(V){return Y.createElement("line",l0({},V,{key:"line-".concat(V.x1,"-").concat(V.x2,"-").concat(V.y1,"-").concat(V.y2)}))}))});return Y.createElement(Ge,{className:"recharts-errorBars"},b)}}])}(Y.Component);M8(Zp,"defaultProps",{stroke:"black",strokeWidth:1.5,width:5,offset:0,layout:"horizontal"});M8(Zp,"displayName","ErrorBar");function Rd(e){"@babel/helpers - typeof";return Rd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Rd(e)}function jk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function La(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?jk(Object(n),!0).forEach(function(s){Mde(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):jk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Mde(e,t,n){return t=Lde(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Lde(e){var t=$de(e,"string");return Rd(t)=="symbol"?t:t+""}function $de(e,t){if(Rd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Rd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var $8=function(t){var n=t.children,s=t.formattedGraphicalItems,a=t.legendWidth,i=t.legendContent,o=$r(n,bo);if(!o)return null;var l=bo.defaultProps,c=l!==void 0?La(La({},l),o.props):{},d;return o.props&&o.props.payload?d=o.props&&o.props.payload:i==="children"?d=(s||[]).reduce(function(m,u){var h=u.item,f=u.props,b=f.sectors||f.data||[];return m.concat(b.map(function(g){return{type:o.props.iconType||h.props.legendType,value:g.name,color:g.fill,payload:g}}))},[]):d=(s||[]).map(function(m){var u=m.item,h=u.type.defaultProps,f=h!==void 0?La(La({},h),u.props):{},b=f.dataKey,g=f.name,x=f.legendType,p=f.hide;return{inactive:p,dataKey:b,type:c.iconType||x||"square",color:F2(u),value:g||b,payload:f}}),La(La(La({},c),bo.getWithHeight(o,a)),{},{payload:d,item:o})};function Id(e){"@babel/helpers - typeof";return Id=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Id(e)}function wk(e){return Fde(e)||Dde(e)||Ide(e)||Rde()}function Rde(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Ide(e,t){if(e){if(typeof e=="string")return fb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return fb(e,t)}}function Dde(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Fde(e){if(Array.isArray(e))return fb(e)}function fb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Nk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Nk(Object(n),!0).forEach(function(s){jo(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Nk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function jo(e,t,n){return t=Bde(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Bde(e){var t=zde(e,"string");return Id(t)=="symbol"?t:t+""}function zde(e,t){if(Id(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Id(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function er(e,t,n){return Fe(e)||Fe(t)?n:Et(t)?Ur(e,t,n):Me(t)?t(e):n}function Uc(e,t,n,s){var a=Fce(e,function(l){return er(l,t)});if(n==="number"){var i=a.filter(function(l){return ge(l)||parseFloat(l)});return i.length?[Qp(i),Gp(i)]:[1/0,-1/0]}var o=s?a.filter(function(l){return!Fe(l)}):a;return o.map(function(l){return Et(l)||l instanceof Date?l:""})}var qde=function(t){var n,s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:[],a=arguments.length>2?arguments[2]:void 0,i=arguments.length>3?arguments[3]:void 0,o=-1,l=(n=s==null?void 0:s.length)!==null&&n!==void 0?n:0;if(l<=1)return 0;if(i&&i.axisType==="angleAxis"&&Math.abs(Math.abs(i.range[1]-i.range[0])-360)<=1e-6)for(var c=i.range,d=0;d<l;d++){var m=d>0?a[d-1].coordinate:a[l-1].coordinate,u=a[d].coordinate,h=d>=l-1?a[0].coordinate:a[d+1].coordinate,f=void 0;if(cr(u-m)!==cr(h-u)){var b=[];if(cr(h-u)===cr(c[1]-c[0])){f=h;var g=u+c[1]-c[0];b[0]=Math.min(g,(g+m)/2),b[1]=Math.max(g,(g+m)/2)}else{f=m;var x=h+c[1]-c[0];b[0]=Math.min(u,(x+u)/2),b[1]=Math.max(u,(x+u)/2)}var p=[Math.min(u,(f+u)/2),Math.max(u,(f+u)/2)];if(t>p[0]&&t<=p[1]||t>=b[0]&&t<=b[1]){o=a[d].index;break}}else{var y=Math.min(m,h),v=Math.max(m,h);if(t>(y+u)/2&&t<=(v+u)/2){o=a[d].index;break}}}else for(var N=0;N<l;N++)if(N===0&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N>0&&N<l-1&&t>(s[N].coordinate+s[N-1].coordinate)/2&&t<=(s[N].coordinate+s[N+1].coordinate)/2||N===l-1&&t>(s[N].coordinate+s[N-1].coordinate)/2){o=s[N].index;break}return o},F2=function(t){var n,s=t,a=s.type.displayName,i=(n=t.type)!==null&&n!==void 0&&n.defaultProps?gt(gt({},t.type.defaultProps),t.props):t.props,o=i.stroke,l=i.fill,c;switch(a){case"Line":c=o;break;case"Area":case"Radar":c=o&&o!=="none"?o:l;break;default:c=l;break}return c},Ude=function(t){var n=t.barSize,s=t.totalSize,a=t.stackGroups,i=a===void 0?{}:a;if(!i)return{};for(var o={},l=Object.keys(i),c=0,d=l.length;c<d;c++)for(var m=i[l[c]].stackGroups,u=Object.keys(m),h=0,f=u.length;h<f;h++){var b=m[u[h]],g=b.items,x=b.cateAxisId,p=g.filter(function(_){return ps(_.type).indexOf("Bar")>=0});if(p&&p.length){var y=p[0].type.defaultProps,v=y!==void 0?gt(gt({},y),p[0].props):p[0].props,N=v.barSize,w=v[x];o[w]||(o[w]=[]);var j=Fe(N)?n:N;o[w].push({item:p[0],stackList:p.slice(1),barSize:Fe(j)?void 0:dr(j,s,0)})}}return o},Wde=function(t){var n=t.barGap,s=t.barCategoryGap,a=t.bandSize,i=t.sizeList,o=i===void 0?[]:i,l=t.maxBarSize,c=o.length;if(c<1)return null;var d=dr(n,a,0,!0),m,u=[];if(o[0].barSize===+o[0].barSize){var h=!1,f=a/c,b=o.reduce(function(N,w){return N+w.barSize||0},0);b+=(c-1)*d,b>=a&&(b-=(c-1)*d,d=0),b>=a&&f>0&&(h=!0,f*=.9,b=c*f);var g=(a-b)/2>>0,x={offset:g-d,size:0};m=o.reduce(function(N,w){var j={item:w.item,position:{offset:x.offset+x.size+d,size:h?f:w.barSize}},_=[].concat(wk(N),[j]);return x=_[_.length-1].position,w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){_.push({item:S,position:x})}),_},u)}else{var p=dr(s,a,0,!0);a-2*p-(c-1)*d<=0&&(d=0);var y=(a-2*p-(c-1)*d)/c;y>1&&(y>>=0);var v=l===+l?Math.min(y,l):y;m=o.reduce(function(N,w,j){var _=[].concat(wk(N),[{item:w.item,position:{offset:p+(y+d)*j+(y-v)/2,size:v}}]);return w.stackList&&w.stackList.length&&w.stackList.forEach(function(S){_.push({item:S,position:_[_.length-1].position})}),_},u)}return m},Vde=function(t,n,s,a){var i=s.children,o=s.width,l=s.margin,c=o-(l.left||0)-(l.right||0),d=$8({children:i,legendWidth:c});if(d){var m=a||{},u=m.width,h=m.height,f=d.align,b=d.verticalAlign,g=d.layout;if((g==="vertical"||g==="horizontal"&&b==="middle")&&f!=="center"&&ge(t[f]))return gt(gt({},t),{},jo({},f,t[f]+(u||0)));if((g==="horizontal"||g==="vertical"&&f==="center")&&b!=="middle"&&ge(t[b]))return gt(gt({},t),{},jo({},b,t[b]+(h||0)))}return t},Hde=function(t,n,s){return Fe(n)?!0:t==="horizontal"?n==="yAxis":t==="vertical"||s==="x"?n==="xAxis":s==="y"?n==="yAxis":!0},R8=function(t,n,s,a,i){var o=n.props.children,l=dn(o,Zp).filter(function(d){return Hde(a,i,d.props.direction)});if(l&&l.length){var c=l.map(function(d){return d.props.dataKey});return t.reduce(function(d,m){var u=er(m,s);if(Fe(u))return d;var h=Array.isArray(u)?[Qp(u),Gp(u)]:[u,u],f=c.reduce(function(b,g){var x=er(m,g,0),p=h[0]-Math.abs(Array.isArray(x)?x[0]:x),y=h[1]+Math.abs(Array.isArray(x)?x[1]:x);return[Math.min(p,b[0]),Math.max(y,b[1])]},[1/0,-1/0]);return[Math.min(f[0],d[0]),Math.max(f[1],d[1])]},[1/0,-1/0])}return null},Kde=function(t,n,s,a,i){var o=n.map(function(l){return R8(t,l,s,i,a)}).filter(function(l){return!Fe(l)});return o&&o.length?o.reduce(function(l,c){return[Math.min(l[0],c[0]),Math.max(l[1],c[1])]},[1/0,-1/0]):null},I8=function(t,n,s,a,i){var o=n.map(function(c){var d=c.props.dataKey;return s==="number"&&d&&R8(t,c,d,a)||Uc(t,d,s,i)});if(s==="number")return o.reduce(function(c,d){return[Math.min(c[0],d[0]),Math.max(c[1],d[1])]},[1/0,-1/0]);var l={};return o.reduce(function(c,d){for(var m=0,u=d.length;m<u;m++)l[d[m]]||(l[d[m]]=!0,c.push(d[m]));return c},[])},D8=function(t,n){return t==="horizontal"&&n==="xAxis"||t==="vertical"&&n==="yAxis"||t==="centric"&&n==="angleAxis"||t==="radial"&&n==="radiusAxis"},F8=function(t,n,s,a){if(a)return t.map(function(c){return c.coordinate});var i,o,l=t.map(function(c){return c.coordinate===n&&(i=!0),c.coordinate===s&&(o=!0),c.coordinate});return i||l.push(n),o||l.push(s),l},us=function(t,n,s){if(!t)return null;var a=t.scale,i=t.duplicateDomain,o=t.type,l=t.range,c=t.realScaleType==="scaleBand"?a.bandwidth()/2:2,d=(n||s)&&o==="category"&&a.bandwidth?a.bandwidth()/c:0;if(d=t.axisType==="angleAxis"&&(l==null?void 0:l.length)>=2?cr(l[0]-l[1])*2*d:d,n&&(t.ticks||t.niceTicks)){var m=(t.ticks||t.niceTicks).map(function(u){var h=i?i.indexOf(u):u;return{coordinate:a(h)+d,value:u,offset:d}});return m.filter(function(u){return!Cu(u.coordinate)})}return t.isCategorical&&t.categoricalDomain?t.categoricalDomain.map(function(u,h){return{coordinate:a(u)+d,value:u,index:h,offset:d}}):a.ticks&&!s?a.ticks(t.tickCount).map(function(u){return{coordinate:a(u)+d,value:u,offset:d}}):a.domain().map(function(u,h){return{coordinate:a(u)+d,value:i?i[u]:u,index:h,offset:d}})},Lx=new WeakMap,ym=function(t,n){if(typeof n!="function")return t;Lx.has(t)||Lx.set(t,new WeakMap);var s=Lx.get(t);if(s.has(n))return s.get(n);var a=function(){t.apply(void 0,arguments),n.apply(void 0,arguments)};return s.set(n,a),a},B8=function(t,n,s){var a=t.scale,i=t.type,o=t.layout,l=t.axisType;if(a==="auto")return o==="radial"&&l==="radiusAxis"?{scale:Pd(),realScaleType:"band"}:o==="radial"&&l==="angleAxis"?{scale:n0(),realScaleType:"linear"}:i==="category"&&n&&(n.indexOf("LineChart")>=0||n.indexOf("AreaChart")>=0||n.indexOf("ComposedChart")>=0&&!s)?{scale:qc(),realScaleType:"point"}:i==="category"?{scale:Pd(),realScaleType:"band"}:{scale:n0(),realScaleType:"linear"};if(Si(a)){var c="scale".concat(Mp(a));return{scale:(xk[c]||qc)(),realScaleType:xk[c]?c:"point"}}return Me(a)?{scale:a}:{scale:qc(),realScaleType:"point"}},_k=1e-4,z8=function(t){var n=t.domain();if(!(!n||n.length<=2)){var s=n.length,a=t.range(),i=Math.min(a[0],a[1])-_k,o=Math.max(a[0],a[1])+_k,l=t(n[0]),c=t(n[s-1]);(l<i||l>o||c<i||c>o)&&t.domain([n[0],n[s-1]])}},Gde=function(t,n){if(!t)return null;for(var s=0,a=t.length;s<a;s++)if(t[s].item===n)return t[s].position;return null},Qde=function(t,n){if(!n||n.length!==2||!ge(n[0])||!ge(n[1]))return t;var s=Math.min(n[0],n[1]),a=Math.max(n[0],n[1]),i=[t[0],t[1]];return(!ge(t[0])||t[0]<s)&&(i[0]=s),(!ge(t[1])||t[1]>a)&&(i[1]=a),i[0]>a&&(i[0]=a),i[1]<s&&(i[1]=s),i},Yde=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0,l=0;l<n;++l){var c=Cu(t[l][s][1])?t[l][s][0]:t[l][s][1];c>=0?(t[l][s][0]=i,t[l][s][1]=i+c,i=t[l][s][1]):(t[l][s][0]=o,t[l][s][1]=o+c,o=t[l][s][1])}},Xde=function(t){var n=t.length;if(!(n<=0))for(var s=0,a=t[0].length;s<a;++s)for(var i=0,o=0;o<n;++o){var l=Cu(t[o][s][1])?t[o][s][0]:t[o][s][1];l>=0?(t[o][s][0]=i,t[o][s][1]=i+l,i=t[o][s][1]):(t[o][s][0]=0,t[o][s][1]=0)}},Jde={sign:Yde,expand:yX,none:Jo,silhouette:bX,wiggle:vX,positive:Xde},Zde=function(t,n,s){var a=n.map(function(l){return l.props.dataKey}),i=Jde[s],o=gX().keys(a).value(function(l,c){return+er(l,c,0)}).order(By).offset(i);return o(t)},eue=function(t,n,s,a,i,o){if(!t)return null;var l=o?n.reverse():n,c={},d=l.reduce(function(u,h){var f,b=(f=h.type)!==null&&f!==void 0&&f.defaultProps?gt(gt({},h.type.defaultProps),h.props):h.props,g=b.stackId,x=b.hide;if(x)return u;var p=b[s],y=u[p]||{hasStack:!1,stackGroups:{}};if(Et(g)){var v=y.stackGroups[g]||{numericAxisId:s,cateAxisId:a,items:[]};v.items.push(h),y.hasStack=!0,y.stackGroups[g]=v}else y.stackGroups[Au("_stackId_")]={numericAxisId:s,cateAxisId:a,items:[h]};return gt(gt({},u),{},jo({},p,y))},c),m={};return Object.keys(d).reduce(function(u,h){var f=d[h];if(f.hasStack){var b={};f.stackGroups=Object.keys(f.stackGroups).reduce(function(g,x){var p=f.stackGroups[x];return gt(gt({},g),{},jo({},x,{numericAxisId:s,cateAxisId:a,items:p.items,stackedData:Zde(t,p.items,i)}))},b)}return gt(gt({},u),{},jo({},h,f))},m)},q8=function(t,n){var s=n.realScaleType,a=n.type,i=n.tickCount,o=n.originalDomain,l=n.allowDecimals,c=s||n.scale;if(c!=="auto"&&c!=="linear")return null;if(i&&a==="number"&&o&&(o[0]==="auto"||o[1]==="auto")){var d=t.domain();if(!d.length)return null;var m=fde(d,i,l);return t.domain([Qp(m),Gp(m)]),{niceTicks:m}}if(i&&a==="number"){var u=t.domain(),h=xde(u,i,l);return{niceTicks:h}}return null},kk=function(t){var n=t.axis,s=t.ticks,a=t.offset,i=t.bandSize,o=t.entry,l=t.index;if(n.type==="category")return s[l]?s[l].coordinate+a:null;var c=er(o,n.dataKey,n.domain[l]);return Fe(c)?null:n.scale(c)-i/2+a},tue=function(t){var n=t.numericAxis,s=n.scale.domain();if(n.type==="number"){var a=Math.min(s[0],s[1]),i=Math.max(s[0],s[1]);return a<=0&&i>=0?0:i<0?i:a}return s[0]},rue=function(t,n){var s,a=(s=t.type)!==null&&s!==void 0&&s.defaultProps?gt(gt({},t.type.defaultProps),t.props):t.props,i=a.stackId;if(Et(i)){var o=n[i];if(o){var l=o.items.indexOf(t);return l>=0?o.stackedData[l]:null}}return null},nue=function(t){return t.reduce(function(n,s){return[Qp(s.concat([n[0]]).filter(ge)),Gp(s.concat([n[1]]).filter(ge))]},[1/0,-1/0])},U8=function(t,n,s){return Object.keys(t).reduce(function(a,i){var o=t[i],l=o.stackedData,c=l.reduce(function(d,m){var u=nue(m.slice(n,s+1));return[Math.min(d[0],u[0]),Math.max(d[1],u[1])]},[1/0,-1/0]);return[Math.min(c[0],a[0]),Math.max(c[1],a[1])]},[1/0,-1/0]).map(function(a){return a===1/0||a===-1/0?0:a})},Sk=/^dataMin[\s]*-[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,Ck=/^dataMax[\s]*\+[\s]*([0-9]+([.]{1}[0-9]+){0,1})$/,xb=function(t,n,s){if(Me(t))return t(n,s);if(!Array.isArray(t))return n;var a=[];if(ge(t[0]))a[0]=s?t[0]:Math.min(t[0],n[0]);else if(Sk.test(t[0])){var i=+Sk.exec(t[0])[1];a[0]=n[0]-i}else Me(t[0])?a[0]=t[0](n[0]):a[0]=n[0];if(ge(t[1]))a[1]=s?t[1]:Math.max(t[1],n[1]);else if(Ck.test(t[1])){var o=+Ck.exec(t[1])[1];a[1]=n[1]+o}else Me(t[1])?a[1]=t[1](n[1]):a[1]=n[1];return a},d0=function(t,n,s){if(t&&t.scale&&t.scale.bandwidth){var a=t.scale.bandwidth();if(!s||a>0)return a}if(t&&n&&n.length>=2){for(var i=h2(n,function(u){return u.coordinate}),o=1/0,l=1,c=i.length;l<c;l++){var d=i[l],m=i[l-1];o=Math.min((d.coordinate||0)-(m.coordinate||0),o)}return o===1/0?0:o}return s?void 0:0},Ak=function(t,n,s){return!t||!t.length||Yp(t,Ur(s,"type.defaultProps.domain"))?n:t},W8=function(t,n){var s=t.type.defaultProps?gt(gt({},t.type.defaultProps),t.props):t.props,a=s.dataKey,i=s.name,o=s.unit,l=s.formatter,c=s.tooltipType,d=s.chartType,m=s.hide;return gt(gt({},Te(t,!1)),{},{dataKey:a,unit:o,formatter:l,name:i||a,color:F2(t),value:er(n,a),type:c,payload:n,chartType:d,hide:m})};function Dd(e){"@babel/helpers - typeof";return Dd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Dd(e)}function Pk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ts(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Pk(Object(n),!0).forEach(function(s){V8(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Pk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function V8(e,t,n){return t=sue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function sue(e){var t=aue(e,"string");return Dd(t)=="symbol"?t:t+""}function aue(e,t){if(Dd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Dd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function iue(e,t){return due(e)||cue(e,t)||lue(e,t)||oue()}function oue(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function lue(e,t){if(e){if(typeof e=="string")return Ek(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ek(e,t)}}function Ek(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function cue(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function due(e){if(Array.isArray(e))return e}var u0=Math.PI/180,uue=function(t){return t*180/Math.PI},st=function(t,n,s,a){return{x:t+Math.cos(-u0*a)*s,y:n+Math.sin(-u0*a)*s}},H8=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:{top:0,right:0,bottom:0,left:0};return Math.min(Math.abs(t-(s.left||0)-(s.right||0)),Math.abs(n-(s.top||0)-(s.bottom||0)))/2},mue=function(t,n,s,a,i){var o=t.width,l=t.height,c=t.startAngle,d=t.endAngle,m=dr(t.cx,o,o/2),u=dr(t.cy,l,l/2),h=H8(o,l,s),f=dr(t.innerRadius,h,0),b=dr(t.outerRadius,h,h*.8),g=Object.keys(n);return g.reduce(function(x,p){var y=n[p],v=y.domain,N=y.reversed,w;if(Fe(y.range))a==="angleAxis"?w=[c,d]:a==="radiusAxis"&&(w=[f,b]),N&&(w=[w[1],w[0]]);else{w=y.range;var j=w,_=iue(j,2);c=_[0],d=_[1]}var S=B8(y,i),T=S.realScaleType,A=S.scale;A.domain(v).range(w),z8(A);var E=q8(A,ts(ts({},y),{},{realScaleType:T})),R=ts(ts(ts({},y),E),{},{range:w,radius:b,realScaleType:T,scale:A,cx:m,cy:u,innerRadius:f,outerRadius:b,startAngle:c,endAngle:d});return ts(ts({},x),{},V8({},p,R))},{})},hue=function(t,n){var s=t.x,a=t.y,i=n.x,o=n.y;return Math.sqrt(Math.pow(s-i,2)+Math.pow(a-o,2))},pue=function(t,n){var s=t.x,a=t.y,i=n.cx,o=n.cy,l=hue({x:s,y:a},{x:i,y:o});if(l<=0)return{radius:l};var c=(s-i)/l,d=Math.acos(c);return a>o&&(d=2*Math.PI-d),{radius:l,angle:uue(d),angleInRadian:d}},fue=function(t){var n=t.startAngle,s=t.endAngle,a=Math.floor(n/360),i=Math.floor(s/360),o=Math.min(a,i);return{startAngle:n-o*360,endAngle:s-o*360}},xue=function(t,n){var s=n.startAngle,a=n.endAngle,i=Math.floor(s/360),o=Math.floor(a/360),l=Math.min(i,o);return t+l*360},Ok=function(t,n){var s=t.x,a=t.y,i=pue({x:s,y:a},n),o=i.radius,l=i.angle,c=n.innerRadius,d=n.outerRadius;if(o<c||o>d)return!1;if(o===0)return!0;var m=fue(n),u=m.startAngle,h=m.endAngle,f=l,b;if(u<=h){for(;f>h;)f-=360;for(;f<u;)f+=360;b=f>=u&&f<=h}else{for(;f>u;)f-=360;for(;f<h;)f+=360;b=f>=h&&f<=u}return b?ts(ts({},n),{},{radius:o,angle:xue(f,n)}):null},K8=function(t){return!k.isValidElement(t)&&!Me(t)&&typeof t!="boolean"?t.className:""};function Fd(e){"@babel/helpers - typeof";return Fd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Fd(e)}var gue=["offset"];function yue(e){return wue(e)||jue(e)||vue(e)||bue()}function bue(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function vue(e,t){if(e){if(typeof e=="string")return gb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return gb(e,t)}}function jue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function wue(e){if(Array.isArray(e))return gb(e)}function gb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Nue(e,t){if(e==null)return{};var n=_ue(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function _ue(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Tk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ct(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Tk(Object(n),!0).forEach(function(s){kue(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Tk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function kue(e,t,n){return t=Sue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Sue(e){var t=Cue(e,"string");return Fd(t)=="symbol"?t:t+""}function Cue(e,t){if(Fd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Fd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bd(){return Bd=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Bd.apply(this,arguments)}var Aue=function(t){var n=t.value,s=t.formatter,a=Fe(t.children)?n:t.children;return Me(s)?s(a):a},Pue=function(t,n){var s=cr(n-t),a=Math.min(Math.abs(n-t),360);return s*a},Eue=function(t,n,s){var a=t.position,i=t.viewBox,o=t.offset,l=t.className,c=i,d=c.cx,m=c.cy,u=c.innerRadius,h=c.outerRadius,f=c.startAngle,b=c.endAngle,g=c.clockWise,x=(u+h)/2,p=Pue(f,b),y=p>=0?1:-1,v,N;a==="insideStart"?(v=f+y*o,N=g):a==="insideEnd"?(v=b-y*o,N=!g):a==="end"&&(v=b+y*o,N=g),N=p<=0?N:!N;var w=st(d,m,x,v),j=st(d,m,x,v+(N?1:-1)*359),_="M".concat(w.x,",").concat(w.y,`
    A`).concat(x,",").concat(x,",0,1,").concat(N?0:1,`,
    `).concat(j.x,",").concat(j.y),S=Fe(t.id)?Au("recharts-radial-line-"):t.id;return Y.createElement("text",Bd({},s,{dominantBaseline:"central",className:De("recharts-radial-bar-label",l)}),Y.createElement("defs",null,Y.createElement("path",{id:S,d:_})),Y.createElement("textPath",{xlinkHref:"#".concat(S)},n))},Oue=function(t){var n=t.viewBox,s=t.offset,a=t.position,i=n,o=i.cx,l=i.cy,c=i.innerRadius,d=i.outerRadius,m=i.startAngle,u=i.endAngle,h=(m+u)/2;if(a==="outside"){var f=st(o,l,d+s,h),b=f.x,g=f.y;return{x:b,y:g,textAnchor:b>=o?"start":"end",verticalAnchor:"middle"}}if(a==="center")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"middle"};if(a==="centerTop")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"start"};if(a==="centerBottom")return{x:o,y:l,textAnchor:"middle",verticalAnchor:"end"};var x=(c+d)/2,p=st(o,l,x,h),y=p.x,v=p.y;return{x:y,y:v,textAnchor:"middle",verticalAnchor:"middle"}},Tue=function(t){var n=t.viewBox,s=t.parentViewBox,a=t.offset,i=t.position,o=n,l=o.x,c=o.y,d=o.width,m=o.height,u=m>=0?1:-1,h=u*a,f=u>0?"end":"start",b=u>0?"start":"end",g=d>=0?1:-1,x=g*a,p=g>0?"end":"start",y=g>0?"start":"end";if(i==="top"){var v={x:l+d/2,y:c-u*a,textAnchor:"middle",verticalAnchor:f};return Ct(Ct({},v),s?{height:Math.max(c-s.y,0),width:d}:{})}if(i==="bottom"){var N={x:l+d/2,y:c+m+h,textAnchor:"middle",verticalAnchor:b};return Ct(Ct({},N),s?{height:Math.max(s.y+s.height-(c+m),0),width:d}:{})}if(i==="left"){var w={x:l-x,y:c+m/2,textAnchor:p,verticalAnchor:"middle"};return Ct(Ct({},w),s?{width:Math.max(w.x-s.x,0),height:m}:{})}if(i==="right"){var j={x:l+d+x,y:c+m/2,textAnchor:y,verticalAnchor:"middle"};return Ct(Ct({},j),s?{width:Math.max(s.x+s.width-j.x,0),height:m}:{})}var _=s?{width:d,height:m}:{};return i==="insideLeft"?Ct({x:l+x,y:c+m/2,textAnchor:y,verticalAnchor:"middle"},_):i==="insideRight"?Ct({x:l+d-x,y:c+m/2,textAnchor:p,verticalAnchor:"middle"},_):i==="insideTop"?Ct({x:l+d/2,y:c+h,textAnchor:"middle",verticalAnchor:b},_):i==="insideBottom"?Ct({x:l+d/2,y:c+m-h,textAnchor:"middle",verticalAnchor:f},_):i==="insideTopLeft"?Ct({x:l+x,y:c+h,textAnchor:y,verticalAnchor:b},_):i==="insideTopRight"?Ct({x:l+d-x,y:c+h,textAnchor:p,verticalAnchor:b},_):i==="insideBottomLeft"?Ct({x:l+x,y:c+m-h,textAnchor:y,verticalAnchor:f},_):i==="insideBottomRight"?Ct({x:l+d-x,y:c+m-h,textAnchor:p,verticalAnchor:f},_):Ll(i)&&(ge(i.x)||Xa(i.x))&&(ge(i.y)||Xa(i.y))?Ct({x:l+dr(i.x,d),y:c+dr(i.y,m),textAnchor:"end",verticalAnchor:"end"},_):Ct({x:l+d/2,y:c+m/2,textAnchor:"middle",verticalAnchor:"middle"},_)},Mue=function(t){return"cx"in t&&ge(t.cx)};function $t(e){var t=e.offset,n=t===void 0?5:t,s=Nue(e,gue),a=Ct({offset:n},s),i=a.viewBox,o=a.position,l=a.value,c=a.children,d=a.content,m=a.className,u=m===void 0?"":m,h=a.textBreakAll;if(!i||Fe(l)&&Fe(c)&&!k.isValidElement(d)&&!Me(d))return null;if(k.isValidElement(d))return k.cloneElement(d,a);var f;if(Me(d)){if(f=k.createElement(d,a),k.isValidElement(f))return f}else f=Aue(a);var b=Mue(i),g=Te(a,!0);if(b&&(o==="insideStart"||o==="insideEnd"||o==="end"))return Eue(a,f,g);var x=b?Oue(a):Tue(a);return Y.createElement(Ai,Bd({className:De("recharts-label",u)},g,x,{breakAll:h}),f)}$t.displayName="Label";var G8=function(t){var n=t.cx,s=t.cy,a=t.angle,i=t.startAngle,o=t.endAngle,l=t.r,c=t.radius,d=t.innerRadius,m=t.outerRadius,u=t.x,h=t.y,f=t.top,b=t.left,g=t.width,x=t.height,p=t.clockWise,y=t.labelViewBox;if(y)return y;if(ge(g)&&ge(x)){if(ge(u)&&ge(h))return{x:u,y:h,width:g,height:x};if(ge(f)&&ge(b))return{x:f,y:b,width:g,height:x}}return ge(u)&&ge(h)?{x:u,y:h,width:0,height:0}:ge(n)&&ge(s)?{cx:n,cy:s,startAngle:i||a||0,endAngle:o||a||0,innerRadius:d||0,outerRadius:m||c||l||0,clockWise:p}:t.viewBox?t.viewBox:{}},Lue=function(t,n){return t?t===!0?Y.createElement($t,{key:"label-implicit",viewBox:n}):Et(t)?Y.createElement($t,{key:"label-implicit",viewBox:n,value:t}):k.isValidElement(t)?t.type===$t?k.cloneElement(t,{key:"label-implicit",viewBox:n}):Y.createElement($t,{key:"label-implicit",content:t,viewBox:n}):Me(t)?Y.createElement($t,{key:"label-implicit",content:t,viewBox:n}):Ll(t)?Y.createElement($t,Bd({viewBox:n},t,{key:"label-implicit"})):null:null},$ue=function(t,n){var s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!t||!t.children&&s&&!t.label)return null;var a=t.children,i=G8(t),o=dn(a,$t).map(function(c,d){return k.cloneElement(c,{viewBox:n||i,key:"label-".concat(d)})});if(!s)return o;var l=Lue(t.label,n||i);return[l].concat(yue(o))};$t.parseViewBox=G8;$t.renderCallByParent=$ue;function Rue(e){var t=e==null?0:e.length;return t?e[t-1]:void 0}var Iue=Rue;const Due=Ke(Iue);function zd(e){"@babel/helpers - typeof";return zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},zd(e)}var Fue=["valueAccessor"],Bue=["data","dataKey","clockWise","id","textBreakAll"];function zue(e){return Vue(e)||Wue(e)||Uue(e)||que()}function que(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Uue(e,t){if(e){if(typeof e=="string")return yb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return yb(e,t)}}function Wue(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Vue(e){if(Array.isArray(e))return yb(e)}function yb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function m0(){return m0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},m0.apply(this,arguments)}function Mk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Lk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Mk(Object(n),!0).forEach(function(s){Hue(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Mk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Hue(e,t,n){return t=Kue(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Kue(e){var t=Gue(e,"string");return zd(t)=="symbol"?t:t+""}function Gue(e,t){if(zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(zd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function $k(e,t){if(e==null)return{};var n=Que(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Que(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Yue=function(t){return Array.isArray(t.value)?Due(t.value):t.value};function ga(e){var t=e.valueAccessor,n=t===void 0?Yue:t,s=$k(e,Fue),a=s.data,i=s.dataKey,o=s.clockWise,l=s.id,c=s.textBreakAll,d=$k(s,Bue);return!a||!a.length?null:Y.createElement(Ge,{className:"recharts-label-list"},a.map(function(m,u){var h=Fe(i)?n(m,u):er(m&&m.payload,i),f=Fe(l)?{}:{id:"".concat(l,"-").concat(u)};return Y.createElement($t,m0({},Te(m,!0),d,f,{parentViewBox:m.parentViewBox,value:h,textBreakAll:c,viewBox:$t.parseViewBox(Fe(o)?m:Lk(Lk({},m),{},{clockWise:o})),key:"label-".concat(u),index:u}))}))}ga.displayName="LabelList";function Xue(e,t){return e?e===!0?Y.createElement(ga,{key:"labelList-implicit",data:t}):Y.isValidElement(e)||Me(e)?Y.createElement(ga,{key:"labelList-implicit",data:t,content:e}):Ll(e)?Y.createElement(ga,m0({data:t},e,{key:"labelList-implicit"})):null:null}function Jue(e,t){var n=arguments.length>2&&arguments[2]!==void 0?arguments[2]:!0;if(!e||!e.children&&n&&!e.label)return null;var s=e.children,a=dn(s,ga).map(function(o,l){return k.cloneElement(o,{data:t,key:"labelList-".concat(l)})});if(!n)return a;var i=Xue(e.label,t);return[i].concat(zue(a))}ga.renderCallByParent=Jue;function qd(e){"@babel/helpers - typeof";return qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},qd(e)}function bb(){return bb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},bb.apply(this,arguments)}function Rk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ik(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Rk(Object(n),!0).forEach(function(s){Zue(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Rk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Zue(e,t,n){return t=eme(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function eme(e){var t=tme(e,"string");return qd(t)=="symbol"?t:t+""}function tme(e,t){if(qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(qd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var rme=function(t,n){var s=cr(n-t),a=Math.min(Math.abs(n-t),359.999);return s*a},bm=function(t){var n=t.cx,s=t.cy,a=t.radius,i=t.angle,o=t.sign,l=t.isExternal,c=t.cornerRadius,d=t.cornerIsExternal,m=c*(l?1:-1)+a,u=Math.asin(c/m)/u0,h=d?i:i+o*u,f=st(n,s,m,h),b=st(n,s,a,h),g=d?i-o*u:i,x=st(n,s,m*Math.cos(u*u0),g);return{center:f,circleTangency:b,lineTangency:x,theta:u}},Q8=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.startAngle,l=t.endAngle,c=rme(o,l),d=o+c,m=st(n,s,i,o),u=st(n,s,i,d),h="M ".concat(m.x,",").concat(m.y,`
    A `).concat(i,",").concat(i,`,0,
    `).concat(+(Math.abs(c)>180),",").concat(+(o>d),`,
    `).concat(u.x,",").concat(u.y,`
  `);if(a>0){var f=st(n,s,a,o),b=st(n,s,a,d);h+="L ".concat(b.x,",").concat(b.y,`
            A `).concat(a,",").concat(a,`,0,
            `).concat(+(Math.abs(c)>180),",").concat(+(o<=d),`,
            `).concat(f.x,",").concat(f.y," Z")}else h+="L ".concat(n,",").concat(s," Z");return h},nme=function(t){var n=t.cx,s=t.cy,a=t.innerRadius,i=t.outerRadius,o=t.cornerRadius,l=t.forceCornerRadius,c=t.cornerIsExternal,d=t.startAngle,m=t.endAngle,u=cr(m-d),h=bm({cx:n,cy:s,radius:i,angle:d,sign:u,cornerRadius:o,cornerIsExternal:c}),f=h.circleTangency,b=h.lineTangency,g=h.theta,x=bm({cx:n,cy:s,radius:i,angle:m,sign:-u,cornerRadius:o,cornerIsExternal:c}),p=x.circleTangency,y=x.lineTangency,v=x.theta,N=c?Math.abs(d-m):Math.abs(d-m)-g-v;if(N<0)return l?"M ".concat(b.x,",").concat(b.y,`
        a`).concat(o,",").concat(o,",0,0,1,").concat(o*2,`,0
        a`).concat(o,",").concat(o,",0,0,1,").concat(-o*2,`,0
      `):Q8({cx:n,cy:s,innerRadius:a,outerRadius:i,startAngle:d,endAngle:m});var w="M ".concat(b.x,",").concat(b.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(f.x,",").concat(f.y,`
    A`).concat(i,",").concat(i,",0,").concat(+(N>180),",").concat(+(u<0),",").concat(p.x,",").concat(p.y,`
    A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(y.x,",").concat(y.y,`
  `);if(a>0){var j=bm({cx:n,cy:s,radius:a,angle:d,sign:u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),_=j.circleTangency,S=j.lineTangency,T=j.theta,A=bm({cx:n,cy:s,radius:a,angle:m,sign:-u,isExternal:!0,cornerRadius:o,cornerIsExternal:c}),E=A.circleTangency,R=A.lineTangency,I=A.theta,O=c?Math.abs(d-m):Math.abs(d-m)-T-I;if(O<0&&o===0)return"".concat(w,"L").concat(n,",").concat(s,"Z");w+="L".concat(R.x,",").concat(R.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(E.x,",").concat(E.y,`
      A`).concat(a,",").concat(a,",0,").concat(+(O>180),",").concat(+(u>0),",").concat(_.x,",").concat(_.y,`
      A`).concat(o,",").concat(o,",0,0,").concat(+(u<0),",").concat(S.x,",").concat(S.y,"Z")}else w+="L".concat(n,",").concat(s,"Z");return w},sme={cx:0,cy:0,innerRadius:0,outerRadius:0,startAngle:0,endAngle:0,cornerRadius:0,forceCornerRadius:!1,cornerIsExternal:!1},Y8=function(t){var n=Ik(Ik({},sme),t),s=n.cx,a=n.cy,i=n.innerRadius,o=n.outerRadius,l=n.cornerRadius,c=n.forceCornerRadius,d=n.cornerIsExternal,m=n.startAngle,u=n.endAngle,h=n.className;if(o<i||m===u)return null;var f=De("recharts-sector",h),b=o-i,g=dr(l,b,0,!0),x;return g>0&&Math.abs(m-u)<360?x=nme({cx:s,cy:a,innerRadius:i,outerRadius:o,cornerRadius:Math.min(g,b/2),forceCornerRadius:c,cornerIsExternal:d,startAngle:m,endAngle:u}):x=Q8({cx:s,cy:a,innerRadius:i,outerRadius:o,startAngle:m,endAngle:u}),Y.createElement("path",bb({},Te(n,!0),{className:f,d:x,role:"img"}))};function Ud(e){"@babel/helpers - typeof";return Ud=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ud(e)}function vb(){return vb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},vb.apply(this,arguments)}function Dk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Fk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Dk(Object(n),!0).forEach(function(s){ame(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Dk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ame(e,t,n){return t=ime(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ime(e){var t=ome(e,"string");return Ud(t)=="symbol"?t:t+""}function ome(e,t){if(Ud(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ud(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var Bk={curveBasisClosed:iX,curveBasisOpen:oX,curveBasis:aX,curveBumpX:VY,curveBumpY:HY,curveLinearClosed:lX,curveLinear:$p,curveMonotoneX:cX,curveMonotoneY:dX,curveNatural:uX,curveStep:mX,curveStepAfter:pX,curveStepBefore:hX},vm=function(t){return t.x===+t.x&&t.y===+t.y},xc=function(t){return t.x},gc=function(t){return t.y},lme=function(t,n){if(Me(t))return t;var s="curve".concat(Mp(t));return(s==="curveMonotone"||s==="curveBump")&&n?Bk["".concat(s).concat(n==="vertical"?"Y":"X")]:Bk[s]||$p},cme=function(t){var n=t.type,s=n===void 0?"linear":n,a=t.points,i=a===void 0?[]:a,o=t.baseLine,l=t.layout,c=t.connectNulls,d=c===void 0?!1:c,m=lme(s,l),u=d?i.filter(function(g){return vm(g)}):i,h;if(Array.isArray(o)){var f=d?o.filter(function(g){return vm(g)}):o,b=u.map(function(g,x){return Fk(Fk({},g),{},{base:f[x]})});return l==="vertical"?h=dm().y(gc).x1(xc).x0(function(g){return g.base.x}):h=dm().x(xc).y1(gc).y0(function(g){return g.base.y}),h.defined(vm).curve(m),h(b)}return l==="vertical"&&ge(o)?h=dm().y(gc).x1(xc).x0(o):ge(o)?h=dm().x(xc).y1(gc).y0(o):h=WP().x(xc).y(gc),h.defined(vm).curve(m),h(u)},jb=function(t){var n=t.className,s=t.points,a=t.path,i=t.pathRef;if((!s||!s.length)&&!a)return null;var o=s&&s.length?cme(t):a;return k.createElement("path",vb({},Te(t,!1),Ih(t),{className:De("recharts-curve",n),d:o,ref:i}))};const{getOwnPropertyNames:dme,getOwnPropertySymbols:ume}=Object,{hasOwnProperty:mme}=Object.prototype;function $x(e,t){return function(s,a,i){return e(s,a,i)&&t(s,a,i)}}function jm(e){return function(n,s,a){if(!n||!s||typeof n!="object"||typeof s!="object")return e(n,s,a);const{cache:i}=a,o=i.get(n),l=i.get(s);if(o&&l)return o===s&&l===n;i.set(n,s),i.set(s,n);const c=e(n,s,a);return i.delete(n),i.delete(s),c}}function hme(e){return e!=null?e[Symbol.toStringTag]:void 0}function zk(e){return dme(e).concat(ume(e))}const pme=Object.hasOwn||((e,t)=>mme.call(e,t));function Di(e,t){return e===t||!e&&!t&&e!==e&&t!==t}const fme="__v",xme="__o",gme="_owner",{getOwnPropertyDescriptor:qk,keys:Uk}=Object;function yme(e,t){return e.byteLength===t.byteLength&&h0(new Uint8Array(e),new Uint8Array(t))}function bme(e,t,n){let s=e.length;if(t.length!==s)return!1;for(;s-- >0;)if(!n.equals(e[s],t[s],s,s,e,t,n))return!1;return!0}function vme(e,t){return e.byteLength===t.byteLength&&h0(new Uint8Array(e.buffer,e.byteOffset,e.byteLength),new Uint8Array(t.buffer,t.byteOffset,t.byteLength))}function jme(e,t){return Di(e.getTime(),t.getTime())}function wme(e,t){return e.name===t.name&&e.message===t.message&&e.cause===t.cause&&e.stack===t.stack}function Nme(e,t){return e===t}function Wk(e,t,n){const s=e.size;if(s!==t.size)return!1;if(!s)return!0;const a=new Array(s),i=e.entries();let o,l,c=0;for(;(o=i.next())&&!o.done;){const d=t.entries();let m=!1,u=0;for(;(l=d.next())&&!l.done;){if(a[u]){u++;continue}const h=o.value,f=l.value;if(n.equals(h[0],f[0],c,u,e,t,n)&&n.equals(h[1],f[1],h[0],f[0],e,t,n)){m=a[u]=!0;break}u++}if(!m)return!1;c++}return!0}const _me=Di;function kme(e,t,n){const s=Uk(e);let a=s.length;if(Uk(t).length!==a)return!1;for(;a-- >0;)if(!X8(e,t,n,s[a]))return!1;return!0}function yc(e,t,n){const s=zk(e);let a=s.length;if(zk(t).length!==a)return!1;let i,o,l;for(;a-- >0;)if(i=s[a],!X8(e,t,n,i)||(o=qk(e,i),l=qk(t,i),(o||l)&&(!o||!l||o.configurable!==l.configurable||o.enumerable!==l.enumerable||o.writable!==l.writable)))return!1;return!0}function Sme(e,t){return Di(e.valueOf(),t.valueOf())}function Cme(e,t){return e.source===t.source&&e.flags===t.flags}function Vk(e,t,n){const s=e.size;if(s!==t.size)return!1;if(!s)return!0;const a=new Array(s),i=e.values();let o,l;for(;(o=i.next())&&!o.done;){const c=t.values();let d=!1,m=0;for(;(l=c.next())&&!l.done;){if(!a[m]&&n.equals(o.value,l.value,o.value,l.value,e,t,n)){d=a[m]=!0;break}m++}if(!d)return!1}return!0}function h0(e,t){let n=e.byteLength;if(t.byteLength!==n||e.byteOffset!==t.byteOffset)return!1;for(;n-- >0;)if(e[n]!==t[n])return!1;return!0}function Ame(e,t){return e.hostname===t.hostname&&e.pathname===t.pathname&&e.protocol===t.protocol&&e.port===t.port&&e.hash===t.hash&&e.username===t.username&&e.password===t.password}function X8(e,t,n,s){return(s===gme||s===xme||s===fme)&&(e.$$typeof||t.$$typeof)?!0:pme(t,s)&&n.equals(e[s],t[s],s,s,e,t,n)}const Pme="[object ArrayBuffer]",Eme="[object Arguments]",Ome="[object Boolean]",Tme="[object DataView]",Mme="[object Date]",Lme="[object Error]",$me="[object Map]",Rme="[object Number]",Ime="[object Object]",Dme="[object RegExp]",Fme="[object Set]",Bme="[object String]",zme={"[object Int8Array]":!0,"[object Uint8Array]":!0,"[object Uint8ClampedArray]":!0,"[object Int16Array]":!0,"[object Uint16Array]":!0,"[object Int32Array]":!0,"[object Uint32Array]":!0,"[object Float16Array]":!0,"[object Float32Array]":!0,"[object Float64Array]":!0,"[object BigInt64Array]":!0,"[object BigUint64Array]":!0},qme="[object URL]",Ume=Object.prototype.toString;function Wme({areArrayBuffersEqual:e,areArraysEqual:t,areDataViewsEqual:n,areDatesEqual:s,areErrorsEqual:a,areFunctionsEqual:i,areMapsEqual:o,areNumbersEqual:l,areObjectsEqual:c,arePrimitiveWrappersEqual:d,areRegExpsEqual:m,areSetsEqual:u,areTypedArraysEqual:h,areUrlsEqual:f,unknownTagComparators:b}){return function(x,p,y){if(x===p)return!0;if(x==null||p==null)return!1;const v=typeof x;if(v!==typeof p)return!1;if(v!=="object")return v==="number"?l(x,p,y):v==="function"?i(x,p,y):!1;const N=x.constructor;if(N!==p.constructor)return!1;if(N===Object)return c(x,p,y);if(Array.isArray(x))return t(x,p,y);if(N===Date)return s(x,p,y);if(N===RegExp)return m(x,p,y);if(N===Map)return o(x,p,y);if(N===Set)return u(x,p,y);const w=Ume.call(x);if(w===Mme)return s(x,p,y);if(w===Dme)return m(x,p,y);if(w===$me)return o(x,p,y);if(w===Fme)return u(x,p,y);if(w===Ime)return typeof x.then!="function"&&typeof p.then!="function"&&c(x,p,y);if(w===qme)return f(x,p,y);if(w===Lme)return a(x,p,y);if(w===Eme)return c(x,p,y);if(zme[w])return h(x,p,y);if(w===Pme)return e(x,p,y);if(w===Tme)return n(x,p,y);if(w===Ome||w===Rme||w===Bme)return d(x,p,y);if(b){let j=b[w];if(!j){const _=hme(x);_&&(j=b[_])}if(j)return j(x,p,y)}return!1}}function Vme({circular:e,createCustomConfig:t,strict:n}){let s={areArrayBuffersEqual:yme,areArraysEqual:n?yc:bme,areDataViewsEqual:vme,areDatesEqual:jme,areErrorsEqual:wme,areFunctionsEqual:Nme,areMapsEqual:n?$x(Wk,yc):Wk,areNumbersEqual:_me,areObjectsEqual:n?yc:kme,arePrimitiveWrappersEqual:Sme,areRegExpsEqual:Cme,areSetsEqual:n?$x(Vk,yc):Vk,areTypedArraysEqual:n?$x(h0,yc):h0,areUrlsEqual:Ame,unknownTagComparators:void 0};if(t&&(s=Object.assign({},s,t(s))),e){const a=jm(s.areArraysEqual),i=jm(s.areMapsEqual),o=jm(s.areObjectsEqual),l=jm(s.areSetsEqual);s=Object.assign({},s,{areArraysEqual:a,areMapsEqual:i,areObjectsEqual:o,areSetsEqual:l})}return s}function Hme(e){return function(t,n,s,a,i,o,l){return e(t,n,l)}}function Kme({circular:e,comparator:t,createState:n,equals:s,strict:a}){if(n)return function(l,c){const{cache:d=e?new WeakMap:void 0,meta:m}=n();return t(l,c,{cache:d,equals:s,meta:m,strict:a})};if(e)return function(l,c){return t(l,c,{cache:new WeakMap,equals:s,meta:void 0,strict:a})};const i={cache:void 0,equals:s,meta:void 0,strict:a};return function(l,c){return t(l,c,i)}}const Gme=Pa();Pa({strict:!0});Pa({circular:!0});Pa({circular:!0,strict:!0});Pa({createInternalComparator:()=>Di});Pa({strict:!0,createInternalComparator:()=>Di});Pa({circular:!0,createInternalComparator:()=>Di});Pa({circular:!0,createInternalComparator:()=>Di,strict:!0});function Pa(e={}){const{circular:t=!1,createInternalComparator:n,createState:s,strict:a=!1}=e,i=Vme(e),o=Wme(i),l=n?n(o):Hme(o);return Kme({circular:t,comparator:o,createState:s,equals:l,strict:a})}function Qme(e){typeof requestAnimationFrame<"u"&&requestAnimationFrame(e)}function Hk(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,n=-1,s=function a(i){n<0&&(n=i),i-n>t?(e(i),n=-1):Qme(a)};requestAnimationFrame(s)}function wb(e){"@babel/helpers - typeof";return wb=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},wb(e)}function Yme(e){return ehe(e)||Zme(e)||Jme(e)||Xme()}function Xme(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Jme(e,t){if(e){if(typeof e=="string")return Kk(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Kk(e,t)}}function Kk(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Zme(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function ehe(e){if(Array.isArray(e))return e}function the(){var e={},t=function(){return null},n=!1,s=function a(i){if(!n){if(Array.isArray(i)){if(!i.length)return;var o=i,l=Yme(o),c=l[0],d=l.slice(1);if(typeof c=="number"){Hk(a.bind(null,d),c);return}a(c),Hk(a.bind(null,d));return}wb(i)==="object"&&(e=i,t(e)),typeof i=="function"&&i()}};return{stop:function(){n=!0},start:function(i){n=!1,s(i)},subscribe:function(i){return t=i,function(){t=function(){return null}}}}}function Wd(e){"@babel/helpers - typeof";return Wd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Wd(e)}function Gk(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Qk(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Gk(Object(n),!0).forEach(function(s){J8(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Gk(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function J8(e,t,n){return t=rhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rhe(e){var t=nhe(e,"string");return Wd(t)==="symbol"?t:String(t)}function nhe(e,t){if(Wd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Wd(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var she=function(t,n){return[Object.keys(t),Object.keys(n)].reduce(function(s,a){return s.filter(function(i){return a.includes(i)})})},ahe=function(t){return t},ihe=function(t){return t.replace(/([A-Z])/g,function(n){return"-".concat(n.toLowerCase())})},Wc=function(t,n){return Object.keys(n).reduce(function(s,a){return Qk(Qk({},s),{},J8({},a,t(a,n[a])))},{})},Yk=function(t,n,s){return t.map(function(a){return"".concat(ihe(a)," ").concat(n,"ms ").concat(s)}).join(",")};function ohe(e,t){return dhe(e)||che(e,t)||Z8(e,t)||lhe()}function lhe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function che(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function dhe(e){if(Array.isArray(e))return e}function uhe(e){return phe(e)||hhe(e)||Z8(e)||mhe()}function mhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Z8(e,t){if(e){if(typeof e=="string")return Nb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Nb(e,t)}}function hhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function phe(e){if(Array.isArray(e))return Nb(e)}function Nb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var p0=1e-4,e7=function(t,n){return[0,3*t,3*n-6*t,3*t-3*n+1]},t7=function(t,n){return t.map(function(s,a){return s*Math.pow(n,a)}).reduce(function(s,a){return s+a})},Xk=function(t,n){return function(s){var a=e7(t,n);return t7(a,s)}},fhe=function(t,n){return function(s){var a=e7(t,n),i=[].concat(uhe(a.map(function(o,l){return o*l}).slice(1)),[0]);return t7(i,s)}},Jk=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0],i=n[1],o=n[2],l=n[3];if(n.length===1)switch(n[0]){case"linear":a=0,i=0,o=1,l=1;break;case"ease":a=.25,i=.1,o=.25,l=1;break;case"ease-in":a=.42,i=0,o=1,l=1;break;case"ease-out":a=.42,i=0,o=.58,l=1;break;case"ease-in-out":a=0,i=0,o=.58,l=1;break;default:{var c=n[0].split("(");if(c[0]==="cubic-bezier"&&c[1].split(")")[0].split(",").length===4){var d=c[1].split(")")[0].split(",").map(function(x){return parseFloat(x)}),m=ohe(d,4);a=m[0],i=m[1],o=m[2],l=m[3]}}}var u=Xk(a,o),h=Xk(i,l),f=fhe(a,o),b=function(p){return p>1?1:p<0?0:p},g=function(p){for(var y=p>1?1:p,v=y,N=0;N<8;++N){var w=u(v)-y,j=f(v);if(Math.abs(w-y)<p0||j<p0)return h(v);v=b(v-w/j)}return h(v)};return g.isStepper=!1,g},xhe=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:{},n=t.stiff,s=n===void 0?100:n,a=t.damping,i=a===void 0?8:a,o=t.dt,l=o===void 0?17:o,c=function(m,u,h){var f=-(m-u)*s,b=h*i,g=h+(f-b)*l/1e3,x=h*l/1e3+m;return Math.abs(x-u)<p0&&Math.abs(g)<p0?[u,0]:[x,g]};return c.isStepper=!0,c.dt=l,c},ghe=function(){for(var t=arguments.length,n=new Array(t),s=0;s<t;s++)n[s]=arguments[s];var a=n[0];if(typeof a=="string")switch(a){case"ease":case"ease-in-out":case"ease-out":case"ease-in":case"linear":return Jk(a);case"spring":return xhe();default:if(a.split("(")[0]==="cubic-bezier")return Jk(a)}return typeof a=="function"?a:null};function Vd(e){"@babel/helpers - typeof";return Vd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Vd(e)}function Zk(e){return vhe(e)||bhe(e)||r7(e)||yhe()}function yhe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function bhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function vhe(e){if(Array.isArray(e))return kb(e)}function e5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Bt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?e5(Object(n),!0).forEach(function(s){_b(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):e5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function _b(e,t,n){return t=jhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jhe(e){var t=whe(e,"string");return Vd(t)==="symbol"?t:String(t)}function whe(e,t){if(Vd(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Vd(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Nhe(e,t){return She(e)||khe(e,t)||r7(e,t)||_he()}function _he(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function r7(e,t){if(e){if(typeof e=="string")return kb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return kb(e,t)}}function kb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function khe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function She(e){if(Array.isArray(e))return e}var f0=function(t,n,s){return t+(n-t)*s},Sb=function(t){var n=t.from,s=t.to;return n!==s},Che=function e(t,n,s){var a=Wc(function(i,o){if(Sb(o)){var l=t(o.from,o.to,o.velocity),c=Nhe(l,2),d=c[0],m=c[1];return Bt(Bt({},o),{},{from:d,velocity:m})}return o},n);return s<1?Wc(function(i,o){return Sb(o)?Bt(Bt({},o),{},{velocity:f0(o.velocity,a[i].velocity,s),from:f0(o.from,a[i].from,s)}):o},n):e(t,a,s-1)};const Ahe=function(e,t,n,s,a){var i=she(e,t),o=i.reduce(function(x,p){return Bt(Bt({},x),{},_b({},p,[e[p],t[p]]))},{}),l=i.reduce(function(x,p){return Bt(Bt({},x),{},_b({},p,{from:e[p],velocity:0,to:t[p]}))},{}),c=-1,d,m,u=function(){return null},h=function(){return Wc(function(p,y){return y.from},l)},f=function(){return!Object.values(l).filter(Sb).length},b=function(p){d||(d=p);var y=p-d,v=y/n.dt;l=Che(n,l,v),a(Bt(Bt(Bt({},e),t),h())),d=p,f()||(c=requestAnimationFrame(u))},g=function(p){m||(m=p);var y=(p-m)/s,v=Wc(function(w,j){return f0.apply(void 0,Zk(j).concat([n(y)]))},o);if(a(Bt(Bt(Bt({},e),t),v)),y<1)c=requestAnimationFrame(u);else{var N=Wc(function(w,j){return f0.apply(void 0,Zk(j).concat([n(1)]))},o);a(Bt(Bt(Bt({},e),t),N))}};return u=n.isStepper?b:g,function(){return requestAnimationFrame(u),function(){cancelAnimationFrame(c)}}};function ol(e){"@babel/helpers - typeof";return ol=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ol(e)}var Phe=["children","begin","duration","attributeName","easing","isActive","steps","from","to","canBegin","onAnimationEnd","shouldReAnimate","onAnimationReStart"];function Ehe(e,t){if(e==null)return{};var n=Ohe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Ohe(e,t){if(e==null)return{};var n={},s=Object.keys(e),a,i;for(i=0;i<s.length;i++)a=s[i],!(t.indexOf(a)>=0)&&(n[a]=e[a]);return n}function Rx(e){return $he(e)||Lhe(e)||Mhe(e)||The()}function The(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Mhe(e,t){if(e){if(typeof e=="string")return Cb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Cb(e,t)}}function Lhe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function $he(e){if(Array.isArray(e))return Cb(e)}function Cb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function t5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function gn(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?t5(Object(n),!0).forEach(function(s){Ac(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):t5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ac(e,t,n){return t=n7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Rhe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ihe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,n7(s.key),s)}}function Dhe(e,t,n){return t&&Ihe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function n7(e){var t=Fhe(e,"string");return ol(t)==="symbol"?t:String(t)}function Fhe(e,t){if(ol(e)!=="object"||e===null)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ol(s)!=="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bhe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ab(e,t)}function Ab(e,t){return Ab=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ab(e,t)}function zhe(e){var t=qhe();return function(){var s=x0(e),a;if(t){var i=x0(this).constructor;a=Reflect.construct(s,arguments,i)}else a=s.apply(this,arguments);return Pb(this,a)}}function Pb(e,t){if(t&&(ol(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Eb(e)}function Eb(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function qhe(){if(typeof Reflect>"u"||!Reflect.construct||Reflect.construct.sham)return!1;if(typeof Proxy=="function")return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){})),!0}catch{return!1}}function x0(e){return x0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},x0(e)}var _s=function(e){Bhe(n,e);var t=zhe(n);function n(s,a){var i;Rhe(this,n),i=t.call(this,s,a);var o=i.props,l=o.isActive,c=o.attributeName,d=o.from,m=o.to,u=o.steps,h=o.children,f=o.duration;if(i.handleStyleChange=i.handleStyleChange.bind(Eb(i)),i.changeStyle=i.changeStyle.bind(Eb(i)),!l||f<=0)return i.state={style:{}},typeof h=="function"&&(i.state={style:m}),Pb(i);if(u&&u.length)i.state={style:u[0].style};else if(d){if(typeof h=="function")return i.state={style:d},Pb(i);i.state={style:c?Ac({},c,d):d}}else i.state={style:{}};return i}return Dhe(n,[{key:"componentDidMount",value:function(){var a=this.props,i=a.isActive,o=a.canBegin;this.mounted=!0,!(!i||!o)&&this.runAnimation(this.props)}},{key:"componentDidUpdate",value:function(a){var i=this.props,o=i.isActive,l=i.canBegin,c=i.attributeName,d=i.shouldReAnimate,m=i.to,u=i.from,h=this.state.style;if(l){if(!o){var f={style:c?Ac({},c,m):m};this.state&&h&&(c&&h[c]!==m||!c&&h!==m)&&this.setState(f);return}if(!(Gme(a.to,m)&&a.canBegin&&a.isActive)){var b=!a.canBegin||!a.isActive;this.manager&&this.manager.stop(),this.stopJSAnimation&&this.stopJSAnimation();var g=b||d?u:a.to;if(this.state&&h){var x={style:c?Ac({},c,g):g};(c&&h[c]!==g||!c&&h!==g)&&this.setState(x)}this.runAnimation(gn(gn({},this.props),{},{from:g,begin:0}))}}}},{key:"componentWillUnmount",value:function(){this.mounted=!1;var a=this.props.onAnimationEnd;this.unSubscribe&&this.unSubscribe(),this.manager&&(this.manager.stop(),this.manager=null),this.stopJSAnimation&&this.stopJSAnimation(),a&&a()}},{key:"handleStyleChange",value:function(a){this.changeStyle(a)}},{key:"changeStyle",value:function(a){this.mounted&&this.setState({style:a})}},{key:"runJSAnimation",value:function(a){var i=this,o=a.from,l=a.to,c=a.duration,d=a.easing,m=a.begin,u=a.onAnimationEnd,h=a.onAnimationStart,f=Ahe(o,l,ghe(d),c,this.changeStyle),b=function(){i.stopJSAnimation=f()};this.manager.start([h,m,b,c,u])}},{key:"runStepAnimation",value:function(a){var i=this,o=a.steps,l=a.begin,c=a.onAnimationStart,d=o[0],m=d.style,u=d.duration,h=u===void 0?0:u,f=function(g,x,p){if(p===0)return g;var y=x.duration,v=x.easing,N=v===void 0?"ease":v,w=x.style,j=x.properties,_=x.onAnimationEnd,S=p>0?o[p-1]:x,T=j||Object.keys(w);if(typeof N=="function"||N==="spring")return[].concat(Rx(g),[i.runJSAnimation.bind(i,{from:S.style,to:w,duration:y,easing:N}),y]);var A=Yk(T,y,N),E=gn(gn(gn({},S.style),w),{},{transition:A});return[].concat(Rx(g),[E,y,_]).filter(ahe)};return this.manager.start([c].concat(Rx(o.reduce(f,[m,Math.max(h,l)])),[a.onAnimationEnd]))}},{key:"runAnimation",value:function(a){this.manager||(this.manager=the());var i=a.begin,o=a.duration,l=a.attributeName,c=a.to,d=a.easing,m=a.onAnimationStart,u=a.onAnimationEnd,h=a.steps,f=a.children,b=this.manager;if(this.unSubscribe=b.subscribe(this.handleStyleChange),typeof d=="function"||typeof f=="function"||d==="spring"){this.runJSAnimation(a);return}if(h.length>1){this.runStepAnimation(a);return}var g=l?Ac({},l,c):c,x=Yk(Object.keys(g),o,d);b.start([m,i,gn(gn({},g),{},{transition:x}),o,u])}},{key:"render",value:function(){var a=this.props,i=a.children;a.begin;var o=a.duration;a.attributeName,a.easing;var l=a.isActive;a.steps,a.from,a.to,a.canBegin,a.onAnimationEnd,a.shouldReAnimate,a.onAnimationReStart;var c=Ehe(a,Phe),d=k.Children.count(i),m=this.state.style;if(typeof i=="function")return i(m);if(!l||d===0||o<=0)return i;var u=function(f){var b=f.props,g=b.style,x=g===void 0?{}:g,p=b.className,y=k.cloneElement(f,gn(gn({},c),{},{style:gn(gn({},x),m),className:p}));return y};return d===1?u(k.Children.only(i)):Y.createElement("div",null,k.Children.map(i,function(h){return u(h)}))}}]),n}(k.PureComponent);_s.displayName="Animate";_s.defaultProps={begin:0,duration:1e3,from:"",to:"",attributeName:"",easing:"ease",isActive:!0,canBegin:!0,steps:[],onAnimationEnd:function(){},onAnimationStart:function(){}};_s.propTypes={from:Ce.oneOfType([Ce.object,Ce.string]),to:Ce.oneOfType([Ce.object,Ce.string]),attributeName:Ce.string,duration:Ce.number,begin:Ce.number,easing:Ce.oneOfType([Ce.string,Ce.func]),steps:Ce.arrayOf(Ce.shape({duration:Ce.number.isRequired,style:Ce.object.isRequired,easing:Ce.oneOfType([Ce.oneOf(["ease","ease-in","ease-out","ease-in-out","linear"]),Ce.func]),properties:Ce.arrayOf("string"),onAnimationEnd:Ce.func})),children:Ce.oneOfType([Ce.node,Ce.func]),isActive:Ce.bool,canBegin:Ce.bool,onAnimationEnd:Ce.func,shouldReAnimate:Ce.bool,onAnimationStart:Ce.func,onAnimationReStart:Ce.func};function Hd(e){"@babel/helpers - typeof";return Hd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Hd(e)}function g0(){return g0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},g0.apply(this,arguments)}function Uhe(e,t){return Khe(e)||Hhe(e,t)||Vhe(e,t)||Whe()}function Whe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Vhe(e,t){if(e){if(typeof e=="string")return r5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return r5(e,t)}}function r5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Hhe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Khe(e){if(Array.isArray(e))return e}function n5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function s5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?n5(Object(n),!0).forEach(function(s){Ghe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):n5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ghe(e,t,n){return t=Qhe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qhe(e){var t=Yhe(e,"string");return Hd(t)=="symbol"?t:t+""}function Yhe(e,t){if(Hd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Hd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var a5=function(t,n,s,a,i){var o=Math.min(Math.abs(s)/2,Math.abs(a)/2),l=a>=0?1:-1,c=s>=0?1:-1,d=a>=0&&s>=0||a<0&&s<0?1:0,m;if(o>0&&i instanceof Array){for(var u=[0,0,0,0],h=0,f=4;h<f;h++)u[h]=i[h]>o?o:i[h];m="M".concat(t,",").concat(n+l*u[0]),u[0]>0&&(m+="A ".concat(u[0],",").concat(u[0],",0,0,").concat(d,",").concat(t+c*u[0],",").concat(n)),m+="L ".concat(t+s-c*u[1],",").concat(n),u[1]>0&&(m+="A ".concat(u[1],",").concat(u[1],",0,0,").concat(d,`,
        `).concat(t+s,",").concat(n+l*u[1])),m+="L ".concat(t+s,",").concat(n+a-l*u[2]),u[2]>0&&(m+="A ".concat(u[2],",").concat(u[2],",0,0,").concat(d,`,
        `).concat(t+s-c*u[2],",").concat(n+a)),m+="L ".concat(t+c*u[3],",").concat(n+a),u[3]>0&&(m+="A ".concat(u[3],",").concat(u[3],",0,0,").concat(d,`,
        `).concat(t,",").concat(n+a-l*u[3])),m+="Z"}else if(o>0&&i===+i&&i>0){var b=Math.min(o,i);m="M ".concat(t,",").concat(n+l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+c*b,",").concat(n,`
            L `).concat(t+s-c*b,",").concat(n,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+s,",").concat(n+l*b,`
            L `).concat(t+s,",").concat(n+a-l*b,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t+s-c*b,",").concat(n+a,`
            L `).concat(t+c*b,",").concat(n+a,`
            A `).concat(b,",").concat(b,",0,0,").concat(d,",").concat(t,",").concat(n+a-l*b," Z")}else m="M ".concat(t,",").concat(n," h ").concat(s," v ").concat(a," h ").concat(-s," Z");return m},Xhe=function(t,n){if(!t||!n)return!1;var s=t.x,a=t.y,i=n.x,o=n.y,l=n.width,c=n.height;if(Math.abs(l)>0&&Math.abs(c)>0){var d=Math.min(i,i+l),m=Math.max(i,i+l),u=Math.min(o,o+c),h=Math.max(o,o+c);return s>=d&&s<=m&&a>=u&&a<=h}return!1},Jhe={x:0,y:0,width:0,height:0,radius:0,isAnimationActive:!1,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},B2=function(t){var n=s5(s5({},Jhe),t),s=k.useRef(),a=k.useState(-1),i=Uhe(a,2),o=i[0],l=i[1];k.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var N=s.current.getTotalLength();N&&l(N)}catch{}},[]);var c=n.x,d=n.y,m=n.width,u=n.height,h=n.radius,f=n.className,b=n.animationEasing,g=n.animationDuration,x=n.animationBegin,p=n.isAnimationActive,y=n.isUpdateAnimationActive;if(c!==+c||d!==+d||m!==+m||u!==+u||m===0||u===0)return null;var v=De("recharts-rectangle",f);return y?Y.createElement(_s,{canBegin:o>0,from:{width:m,height:u,x:c,y:d},to:{width:m,height:u,x:c,y:d},duration:g,animationEasing:b,isActive:y},function(N){var w=N.width,j=N.height,_=N.x,S=N.y;return Y.createElement(_s,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,isActive:p,easing:b},Y.createElement("path",g0({},Te(n,!0),{className:v,d:a5(_,S,w,j,h),ref:s})))}):Y.createElement("path",g0({},Te(n,!0),{className:v,d:a5(c,d,m,u,h)}))},Zhe=["points","className","baseLinePoints","connectNulls"];function ao(){return ao=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ao.apply(this,arguments)}function e0e(e,t){if(e==null)return{};var n=t0e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function t0e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function i5(e){return a0e(e)||s0e(e)||n0e(e)||r0e()}function r0e(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function n0e(e,t){if(e){if(typeof e=="string")return Ob(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Ob(e,t)}}function s0e(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function a0e(e){if(Array.isArray(e))return Ob(e)}function Ob(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var o5=function(t){return t&&t.x===+t.x&&t.y===+t.y},i0e=function(){var t=arguments.length>0&&arguments[0]!==void 0?arguments[0]:[],n=[[]];return t.forEach(function(s){o5(s)?n[n.length-1].push(s):n[n.length-1].length>0&&n.push([])}),o5(t[0])&&n[n.length-1].push(t[0]),n[n.length-1].length<=0&&(n=n.slice(0,-1)),n},Vc=function(t,n){var s=i0e(t);n&&(s=[s.reduce(function(i,o){return[].concat(i5(i),i5(o))},[])]);var a=s.map(function(i){return i.reduce(function(o,l,c){return"".concat(o).concat(c===0?"M":"L").concat(l.x,",").concat(l.y)},"")}).join("");return s.length===1?"".concat(a,"Z"):a},o0e=function(t,n,s){var a=Vc(t,s);return"".concat(a.slice(-1)==="Z"?a.slice(0,-1):a,"L").concat(Vc(n.reverse(),s).slice(1))},l0e=function(t){var n=t.points,s=t.className,a=t.baseLinePoints,i=t.connectNulls,o=e0e(t,Zhe);if(!n||!n.length)return null;var l=De("recharts-polygon",s);if(a&&a.length){var c=o.stroke&&o.stroke!=="none",d=o0e(n,a,i);return Y.createElement("g",{className:l},Y.createElement("path",ao({},Te(o,!0),{fill:d.slice(-1)==="Z"?o.fill:"none",stroke:"none",d})),c?Y.createElement("path",ao({},Te(o,!0),{fill:"none",d:Vc(n,i)})):null,c?Y.createElement("path",ao({},Te(o,!0),{fill:"none",d:Vc(a,i)})):null)}var m=Vc(n,i);return Y.createElement("path",ao({},Te(o,!0),{fill:m.slice(-1)==="Z"?o.fill:"none",className:l,d:m}))};function Tb(){return Tb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Tb.apply(this,arguments)}var z2=function(t){var n=t.cx,s=t.cy,a=t.r,i=t.className,o=De("recharts-dot",i);return n===+n&&s===+s&&a===+a?k.createElement("circle",Tb({},Te(t,!1),Ih(t),{className:o,cx:n,cy:s,r:a})):null};function Kd(e){"@babel/helpers - typeof";return Kd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Kd(e)}var c0e=["x","y","top","left","width","height","className"];function Mb(){return Mb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Mb.apply(this,arguments)}function l5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function d0e(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?l5(Object(n),!0).forEach(function(s){u0e(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function u0e(e,t,n){return t=m0e(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function m0e(e){var t=h0e(e,"string");return Kd(t)=="symbol"?t:t+""}function h0e(e,t){if(Kd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Kd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function p0e(e,t){if(e==null)return{};var n=f0e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function f0e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var x0e=function(t,n,s,a,i,o){return"M".concat(t,",").concat(i,"v").concat(a,"M").concat(o,",").concat(n,"h").concat(s)},g0e=function(t){var n=t.x,s=n===void 0?0:n,a=t.y,i=a===void 0?0:a,o=t.top,l=o===void 0?0:o,c=t.left,d=c===void 0?0:c,m=t.width,u=m===void 0?0:m,h=t.height,f=h===void 0?0:h,b=t.className,g=p0e(t,c0e),x=d0e({x:s,y:i,top:l,left:d,width:u,height:f},g);return!ge(s)||!ge(i)||!ge(u)||!ge(f)||!ge(l)||!ge(d)?null:Y.createElement("path",Mb({},Te(x,!0),{className:De("recharts-cross",b),d:x0e(s,i,u,f,l,d)}))},y0e=Kp,b0e=y8,v0e=Xn;function j0e(e,t){return e&&e.length?y0e(e,v0e(t),b0e):void 0}var w0e=j0e;const N0e=Ke(w0e);var _0e=Kp,k0e=Xn,S0e=b8;function C0e(e,t){return e&&e.length?_0e(e,k0e(t),S0e):void 0}var A0e=C0e;const P0e=Ke(A0e);var E0e=["cx","cy","angle","ticks","axisLine"],O0e=["ticks","tick","angle","tickFormatter","stroke"];function ll(e){"@babel/helpers - typeof";return ll=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ll(e)}function Hc(){return Hc=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Hc.apply(this,arguments)}function c5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function $a(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?c5(Object(n),!0).forEach(function(s){ef(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function d5(e,t){if(e==null)return{};var n=T0e(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function T0e(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function M0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function u5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,a7(s.key),s)}}function L0e(e,t,n){return t&&u5(e.prototype,t),n&&u5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $0e(e,t,n){return t=y0(t),R0e(e,s7()?Reflect.construct(t,n||[],y0(e).constructor):t.apply(e,n))}function R0e(e,t){if(t&&(ll(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return I0e(e)}function I0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function s7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(s7=function(){return!!e})()}function y0(e){return y0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},y0(e)}function D0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Lb(e,t)}function Lb(e,t){return Lb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Lb(e,t)}function ef(e,t,n){return t=a7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a7(e){var t=F0e(e,"string");return ll(t)=="symbol"?t:t+""}function F0e(e,t){if(ll(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ll(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var tf=function(e){function t(){return M0e(this,t),$0e(this,t,arguments)}return D0e(t,e),L0e(t,[{key:"getTickValueCoord",value:function(s){var a=s.coordinate,i=this.props,o=i.angle,l=i.cx,c=i.cy;return st(l,c,a,o)}},{key:"getTickTextAnchor",value:function(){var s=this.props.orientation,a;switch(s){case"left":a="end";break;case"right":a="start";break;default:a="middle";break}return a}},{key:"getViewBox",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=N0e(l,function(m){return m.coordinate||0}),d=P0e(l,function(m){return m.coordinate||0});return{cx:a,cy:i,startAngle:o,endAngle:o,innerRadius:d.coordinate||0,outerRadius:c.coordinate||0}}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.angle,l=s.ticks,c=s.axisLine,d=d5(s,E0e),m=l.reduce(function(b,g){return[Math.min(b[0],g.coordinate),Math.max(b[1],g.coordinate)]},[1/0,-1/0]),u=st(a,i,m[0],o),h=st(a,i,m[1],o),f=$a($a($a({},Te(d,!1)),{},{fill:"none"},Te(c,!1)),{},{x1:u.x,y1:u.y,x2:h.x,y2:h.y});return Y.createElement("line",Hc({className:"recharts-polar-radius-axis-line"},f))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.angle,c=a.tickFormatter,d=a.stroke,m=d5(a,O0e),u=this.getTickTextAnchor(),h=Te(m,!1),f=Te(o,!1),b=i.map(function(g,x){var p=s.getTickValueCoord(g),y=$a($a($a($a({textAnchor:u,transform:"rotate(".concat(90-l,", ").concat(p.x,", ").concat(p.y,")")},h),{},{stroke:"none",fill:d},f),{},{index:x},p),{},{payload:g});return Y.createElement(Ge,Hc({className:De("recharts-polar-radius-axis-tick",K8(o)),key:"tick-".concat(g.coordinate)},Ci(s.props,g,x)),t.renderTickItem(o,y,c?c(g.value,x):g.value))});return Y.createElement(Ge,{className:"recharts-polar-radius-axis-ticks"},b)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.axisLine,o=s.tick;return!a||!a.length?null:Y.createElement(Ge,{className:De("recharts-polar-radius-axis",this.props.className)},i&&this.renderAxisLine(),o&&this.renderTicks(),$t.renderCallByParent(this.props,this.getViewBox()))}}],[{key:"renderTickItem",value:function(s,a,i){var o;return Y.isValidElement(s)?o=Y.cloneElement(s,a):Me(s)?o=s(a):o=Y.createElement(Ai,Hc({},a,{className:"recharts-polar-radius-axis-tick-value"}),i),o}}])}(k.PureComponent);ef(tf,"displayName","PolarRadiusAxis");ef(tf,"axisType","radiusAxis");ef(tf,"defaultProps",{type:"number",radiusAxisId:0,cx:0,cy:0,angle:0,orientation:"right",stroke:"#ccc",axisLine:!0,tick:!0,tickCount:5,allowDataOverflow:!1,scale:"auto",allowDuplicatedCategory:!0});function cl(e){"@babel/helpers - typeof";return cl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},cl(e)}function Va(){return Va=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Va.apply(this,arguments)}function m5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Ra(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?m5(Object(n),!0).forEach(function(s){rf(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function B0e(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function h5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,o7(s.key),s)}}function z0e(e,t,n){return t&&h5(e.prototype,t),n&&h5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function q0e(e,t,n){return t=b0(t),U0e(e,i7()?Reflect.construct(t,n||[],b0(e).constructor):t.apply(e,n))}function U0e(e,t){if(t&&(cl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return W0e(e)}function W0e(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function i7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(i7=function(){return!!e})()}function b0(e){return b0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},b0(e)}function V0e(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&$b(e,t)}function $b(e,t){return $b=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},$b(e,t)}function rf(e,t,n){return t=o7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o7(e){var t=H0e(e,"string");return cl(t)=="symbol"?t:t+""}function H0e(e,t){if(cl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(cl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var K0e=Math.PI/180,p5=1e-5,nf=function(e){function t(){return B0e(this,t),q0e(this,t,arguments)}return V0e(t,e),z0e(t,[{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.cx,o=a.cy,l=a.radius,c=a.orientation,d=a.tickSize,m=d||8,u=st(i,o,l,s.coordinate),h=st(i,o,l+(c==="inner"?-1:1)*m,s.coordinate);return{x1:u.x,y1:u.y,x2:h.x,y2:h.y}}},{key:"getTickTextAnchor",value:function(s){var a=this.props.orientation,i=Math.cos(-s.coordinate*K0e),o;return i>p5?o=a==="outer"?"start":"end":i<-p5?o=a==="outer"?"end":"start":o="middle",o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.cx,i=s.cy,o=s.radius,l=s.axisLine,c=s.axisLineType,d=Ra(Ra({},Te(this.props,!1)),{},{fill:"none"},Te(l,!1));if(c==="circle")return Y.createElement(z2,Va({className:"recharts-polar-angle-axis-line"},d,{cx:a,cy:i,r:o}));var m=this.props.ticks,u=m.map(function(h){return st(a,i,o,h.coordinate)});return Y.createElement(l0e,Va({className:"recharts-polar-angle-axis-line"},d,{points:u}))}},{key:"renderTicks",value:function(){var s=this,a=this.props,i=a.ticks,o=a.tick,l=a.tickLine,c=a.tickFormatter,d=a.stroke,m=Te(this.props,!1),u=Te(o,!1),h=Ra(Ra({},m),{},{fill:"none"},Te(l,!1)),f=i.map(function(b,g){var x=s.getTickLineCoord(b),p=s.getTickTextAnchor(b),y=Ra(Ra(Ra({textAnchor:p},m),{},{stroke:"none",fill:d},u),{},{index:g,payload:b,x:x.x2,y:x.y2});return Y.createElement(Ge,Va({className:De("recharts-polar-angle-axis-tick",K8(o)),key:"tick-".concat(b.coordinate)},Ci(s.props,b,g)),l&&Y.createElement("line",Va({className:"recharts-polar-angle-axis-tick-line"},h,x)),o&&t.renderTickItem(o,y,c?c(b.value,g):b.value))});return Y.createElement(Ge,{className:"recharts-polar-angle-axis-ticks"},f)}},{key:"render",value:function(){var s=this.props,a=s.ticks,i=s.radius,o=s.axisLine;return i<=0||!a||!a.length?null:Y.createElement(Ge,{className:De("recharts-polar-angle-axis",this.props.className)},o&&this.renderAxisLine(),this.renderTicks())}}],[{key:"renderTickItem",value:function(s,a,i){var o;return Y.isValidElement(s)?o=Y.cloneElement(s,a):Me(s)?o=s(a):o=Y.createElement(Ai,Va({},a,{className:"recharts-polar-angle-axis-tick-value"}),i),o}}])}(k.PureComponent);rf(nf,"displayName","PolarAngleAxis");rf(nf,"axisType","angleAxis");rf(nf,"defaultProps",{type:"category",angleAxisId:0,scale:"auto",cx:0,cy:0,orientation:"outer",axisLine:!0,tickLine:!0,tickSize:8,tick:!0,hide:!1,allowDuplicatedCategory:!0});var G0e=pE,Q0e=G0e(Object.getPrototypeOf,Object),Y0e=Q0e,X0e=As,J0e=Y0e,Z0e=Ps,epe="[object Object]",tpe=Function.prototype,rpe=Object.prototype,l7=tpe.toString,npe=rpe.hasOwnProperty,spe=l7.call(Object);function ape(e){if(!Z0e(e)||X0e(e)!=epe)return!1;var t=J0e(e);if(t===null)return!0;var n=npe.call(t,"constructor")&&t.constructor;return typeof n=="function"&&n instanceof n&&l7.call(n)==spe}var ipe=ape;const ope=Ke(ipe);var lpe=As,cpe=Ps,dpe="[object Boolean]";function upe(e){return e===!0||e===!1||cpe(e)&&lpe(e)==dpe}var mpe=upe;const hpe=Ke(mpe);function Gd(e){"@babel/helpers - typeof";return Gd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Gd(e)}function v0(){return v0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},v0.apply(this,arguments)}function ppe(e,t){return ype(e)||gpe(e,t)||xpe(e,t)||fpe()}function fpe(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function xpe(e,t){if(e){if(typeof e=="string")return f5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f5(e,t)}}function f5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function gpe(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function ype(e){if(Array.isArray(e))return e}function x5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function g5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?x5(Object(n),!0).forEach(function(s){bpe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):x5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function bpe(e,t,n){return t=vpe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function vpe(e){var t=jpe(e,"string");return Gd(t)=="symbol"?t:t+""}function jpe(e,t){if(Gd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Gd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var y5=function(t,n,s,a,i){var o=s-a,l;return l="M ".concat(t,",").concat(n),l+="L ".concat(t+s,",").concat(n),l+="L ".concat(t+s-o/2,",").concat(n+i),l+="L ".concat(t+s-o/2-a,",").concat(n+i),l+="L ".concat(t,",").concat(n," Z"),l},wpe={x:0,y:0,upperWidth:0,lowerWidth:0,height:0,isUpdateAnimationActive:!1,animationBegin:0,animationDuration:1500,animationEasing:"ease"},Npe=function(t){var n=g5(g5({},wpe),t),s=k.useRef(),a=k.useState(-1),i=ppe(a,2),o=i[0],l=i[1];k.useEffect(function(){if(s.current&&s.current.getTotalLength)try{var v=s.current.getTotalLength();v&&l(v)}catch{}},[]);var c=n.x,d=n.y,m=n.upperWidth,u=n.lowerWidth,h=n.height,f=n.className,b=n.animationEasing,g=n.animationDuration,x=n.animationBegin,p=n.isUpdateAnimationActive;if(c!==+c||d!==+d||m!==+m||u!==+u||h!==+h||m===0&&u===0||h===0)return null;var y=De("recharts-trapezoid",f);return p?Y.createElement(_s,{canBegin:o>0,from:{upperWidth:0,lowerWidth:0,height:h,x:c,y:d},to:{upperWidth:m,lowerWidth:u,height:h,x:c,y:d},duration:g,animationEasing:b,isActive:p},function(v){var N=v.upperWidth,w=v.lowerWidth,j=v.height,_=v.x,S=v.y;return Y.createElement(_s,{canBegin:o>0,from:"0px ".concat(o===-1?1:o,"px"),to:"".concat(o,"px 0px"),attributeName:"strokeDasharray",begin:x,duration:g,easing:b},Y.createElement("path",v0({},Te(n,!0),{className:y,d:y5(_,S,N,w,j),ref:s})))}):Y.createElement("g",null,Y.createElement("path",v0({},Te(n,!0),{className:y,d:y5(c,d,m,u,h)})))},_pe=["option","shapeType","propTransformer","activeClassName","isActive"];function Qd(e){"@babel/helpers - typeof";return Qd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Qd(e)}function kpe(e,t){if(e==null)return{};var n=Spe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Spe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function b5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function j0(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?b5(Object(n),!0).forEach(function(s){Cpe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):b5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Cpe(e,t,n){return t=Ape(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Ape(e){var t=Ppe(e,"string");return Qd(t)=="symbol"?t:t+""}function Ppe(e,t){if(Qd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Qd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Epe(e,t){return j0(j0({},t),e)}function Ope(e,t){return e==="symbols"}function v5(e){var t=e.shapeType,n=e.elementProps;switch(t){case"rectangle":return Y.createElement(B2,n);case"trapezoid":return Y.createElement(Npe,n);case"sector":return Y.createElement(Y8,n);case"symbols":if(Ope(t))return Y.createElement(a2,n);break;default:return null}}function Tpe(e){return k.isValidElement(e)?e.props:e}function c7(e){var t=e.option,n=e.shapeType,s=e.propTransformer,a=s===void 0?Epe:s,i=e.activeClassName,o=i===void 0?"recharts-active-shape":i,l=e.isActive,c=kpe(e,_pe),d;if(k.isValidElement(t))d=k.cloneElement(t,j0(j0({},c),Tpe(t)));else if(Me(t))d=t(c);else if(ope(t)&&!hpe(t)){var m=a(t,c);d=Y.createElement(v5,{shapeType:n,elementProps:m})}else{var u=c;d=Y.createElement(v5,{shapeType:n,elementProps:u})}return l?Y.createElement(Ge,{className:o},d):d}function sf(e,t){return t!=null&&"trapezoids"in e.props}function af(e,t){return t!=null&&"sectors"in e.props}function Yd(e,t){return t!=null&&"points"in e.props}function Mpe(e,t){var n,s,a=e.x===(t==null||(n=t.labelViewBox)===null||n===void 0?void 0:n.x)||e.x===t.x,i=e.y===(t==null||(s=t.labelViewBox)===null||s===void 0?void 0:s.y)||e.y===t.y;return a&&i}function Lpe(e,t){var n=e.endAngle===t.endAngle,s=e.startAngle===t.startAngle;return n&&s}function $pe(e,t){var n=e.x===t.x,s=e.y===t.y,a=e.z===t.z;return n&&s&&a}function Rpe(e,t){var n;return sf(e,t)?n=Mpe:af(e,t)?n=Lpe:Yd(e,t)&&(n=$pe),n}function Ipe(e,t){var n;return sf(e,t)?n="trapezoids":af(e,t)?n="sectors":Yd(e,t)&&(n="points"),n}function Dpe(e,t){if(sf(e,t)){var n;return(n=t.tooltipPayload)===null||n===void 0||(n=n[0])===null||n===void 0||(n=n.payload)===null||n===void 0?void 0:n.payload}if(af(e,t)){var s;return(s=t.tooltipPayload)===null||s===void 0||(s=s[0])===null||s===void 0||(s=s.payload)===null||s===void 0?void 0:s.payload}return Yd(e,t)?t.payload:{}}function Fpe(e){var t=e.activeTooltipItem,n=e.graphicalItem,s=e.itemData,a=Ipe(n,t),i=Dpe(n,t),o=s.filter(function(c,d){var m=Yp(i,c),u=n.props[a].filter(function(b){var g=Rpe(n,t);return g(b,t)}),h=n.props[a].indexOf(u[u.length-1]),f=d===h;return m&&f}),l=s.indexOf(o[o.length-1]);return l}var Ym;function dl(e){"@babel/helpers - typeof";return dl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},dl(e)}function io(){return io=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},io.apply(this,arguments)}function j5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function tt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?j5(Object(n),!0).forEach(function(s){nn(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):j5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Bpe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function w5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,u7(s.key),s)}}function zpe(e,t,n){return t&&w5(e.prototype,t),n&&w5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function qpe(e,t,n){return t=w0(t),Upe(e,d7()?Reflect.construct(t,n||[],w0(e).constructor):t.apply(e,n))}function Upe(e,t){if(t&&(dl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Wpe(e)}function Wpe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function d7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(d7=function(){return!!e})()}function w0(e){return w0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},w0(e)}function Vpe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Rb(e,t)}function Rb(e,t){return Rb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Rb(e,t)}function nn(e,t,n){return t=u7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u7(e){var t=Hpe(e,"string");return dl(t)=="symbol"?t:t+""}function Hpe(e,t){if(dl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(dl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Os=function(e){function t(n){var s;return Bpe(this,t),s=qpe(this,t,[n]),nn(s,"pieRef",null),nn(s,"sectorRefs",[]),nn(s,"id",Au("recharts-pie-")),nn(s,"handleAnimationEnd",function(){var a=s.props.onAnimationEnd;s.setState({isAnimationFinished:!0}),Me(a)&&a()}),nn(s,"handleAnimationStart",function(){var a=s.props.onAnimationStart;s.setState({isAnimationFinished:!1}),Me(a)&&a()}),s.state={isAnimationFinished:!n.isAnimationActive,prevIsAnimationActive:n.isAnimationActive,prevAnimationId:n.animationId,sectorToFocus:0},s}return Vpe(t,e),zpe(t,[{key:"isActiveIndex",value:function(s){var a=this.props.activeIndex;return Array.isArray(a)?a.indexOf(s)!==-1:s===a}},{key:"hasActiveIndex",value:function(){var s=this.props.activeIndex;return Array.isArray(s)?s.length!==0:s||s===0}},{key:"renderLabels",value:function(s){var a=this.props.isAnimationActive;if(a&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.label,l=i.labelLine,c=i.dataKey,d=i.valueKey,m=Te(this.props,!1),u=Te(o,!1),h=Te(l,!1),f=o&&o.offsetRadius||20,b=s.map(function(g,x){var p=(g.startAngle+g.endAngle)/2,y=st(g.cx,g.cy,g.outerRadius+f,p),v=tt(tt(tt(tt({},m),g),{},{stroke:"none"},u),{},{index:x,textAnchor:t.getTextAnchor(y.x,g.cx)},y),N=tt(tt(tt(tt({},m),g),{},{fill:"none",stroke:g.fill},h),{},{index:x,points:[st(g.cx,g.cy,g.outerRadius,p),y]}),w=c;return Fe(c)&&Fe(d)?w="value":Fe(c)&&(w=d),Y.createElement(Ge,{key:"label-".concat(g.startAngle,"-").concat(g.endAngle,"-").concat(g.midAngle,"-").concat(x)},l&&t.renderLabelLineItem(l,N,"line"),t.renderLabelItem(o,v,er(g,w)))});return Y.createElement(Ge,{className:"recharts-pie-labels"},b)}},{key:"renderSectorsStatically",value:function(s){var a=this,i=this.props,o=i.activeShape,l=i.blendStroke,c=i.inactiveShape;return s.map(function(d,m){if((d==null?void 0:d.startAngle)===0&&(d==null?void 0:d.endAngle)===0&&s.length!==1)return null;var u=a.isActiveIndex(m),h=c&&a.hasActiveIndex()?c:null,f=u?o:h,b=tt(tt({},d),{},{stroke:l?d.fill:d.stroke,tabIndex:-1});return Y.createElement(Ge,io({ref:function(x){x&&!a.sectorRefs.includes(x)&&a.sectorRefs.push(x)},tabIndex:-1,className:"recharts-pie-sector"},Ci(a.props,d,m),{key:"sector-".concat(d==null?void 0:d.startAngle,"-").concat(d==null?void 0:d.endAngle,"-").concat(d.midAngle,"-").concat(m)}),Y.createElement(c7,io({option:f,isActive:u,shapeType:"sector"},b)))})}},{key:"renderSectorsWithAnimation",value:function(){var s=this,a=this.props,i=a.sectors,o=a.isAnimationActive,l=a.animationBegin,c=a.animationDuration,d=a.animationEasing,m=a.animationId,u=this.state,h=u.prevSectors,f=u.prevIsAnimationActive;return Y.createElement(_s,{begin:l,duration:c,isActive:o,easing:d,from:{t:0},to:{t:1},key:"pie-".concat(m,"-").concat(f),onAnimationStart:this.handleAnimationStart,onAnimationEnd:this.handleAnimationEnd},function(b){var g=b.t,x=[],p=i&&i[0],y=p.startAngle;return i.forEach(function(v,N){var w=h&&h[N],j=N>0?Ur(v,"paddingAngle",0):0;if(w){var _=Is(w.endAngle-w.startAngle,v.endAngle-v.startAngle),S=tt(tt({},v),{},{startAngle:y+j,endAngle:y+_(g)+j});x.push(S),y=S.endAngle}else{var T=v.endAngle,A=v.startAngle,E=Is(0,T-A),R=E(g),I=tt(tt({},v),{},{startAngle:y+j,endAngle:y+R+j});x.push(I),y=I.endAngle}}),Y.createElement(Ge,null,s.renderSectorsStatically(x))})}},{key:"attachKeyboardHandlers",value:function(s){var a=this;s.onkeydown=function(i){if(!i.altKey)switch(i.key){case"ArrowLeft":{var o=++a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[o].focus(),a.setState({sectorToFocus:o});break}case"ArrowRight":{var l=--a.state.sectorToFocus<0?a.sectorRefs.length-1:a.state.sectorToFocus%a.sectorRefs.length;a.sectorRefs[l].focus(),a.setState({sectorToFocus:l});break}case"Escape":{a.sectorRefs[a.state.sectorToFocus].blur(),a.setState({sectorToFocus:0});break}}}}},{key:"renderSectors",value:function(){var s=this.props,a=s.sectors,i=s.isAnimationActive,o=this.state.prevSectors;return i&&a&&a.length&&(!o||!Yp(o,a))?this.renderSectorsWithAnimation():this.renderSectorsStatically(a)}},{key:"componentDidMount",value:function(){this.pieRef&&this.attachKeyboardHandlers(this.pieRef)}},{key:"render",value:function(){var s=this,a=this.props,i=a.hide,o=a.sectors,l=a.className,c=a.label,d=a.cx,m=a.cy,u=a.innerRadius,h=a.outerRadius,f=a.isAnimationActive,b=this.state.isAnimationFinished;if(i||!o||!o.length||!ge(d)||!ge(m)||!ge(u)||!ge(h))return null;var g=De("recharts-pie",l);return Y.createElement(Ge,{tabIndex:this.props.rootTabIndex,className:g,ref:function(p){s.pieRef=p}},this.renderSectors(),c&&this.renderLabels(o),$t.renderCallByParent(this.props,null,!1),(!f||b)&&ga.renderCallByParent(this.props,o,!1))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return a.prevIsAnimationActive!==s.isAnimationActive?{prevIsAnimationActive:s.isAnimationActive,prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:[],isAnimationFinished:!0}:s.isAnimationActive&&s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curSectors:s.sectors,prevSectors:a.curSectors,isAnimationFinished:!0}:s.sectors!==a.curSectors?{curSectors:s.sectors,isAnimationFinished:!0}:null}},{key:"getTextAnchor",value:function(s,a){return s>a?"start":s<a?"end":"middle"}},{key:"renderLabelLineItem",value:function(s,a,i){if(Y.isValidElement(s))return Y.cloneElement(s,a);if(Me(s))return s(a);var o=De("recharts-pie-label-line",typeof s!="boolean"?s.className:"");return Y.createElement(jb,io({},a,{key:i,type:"linear",className:o}))}},{key:"renderLabelItem",value:function(s,a,i){if(Y.isValidElement(s))return Y.cloneElement(s,a);var o=i;if(Me(s)&&(o=s(a),Y.isValidElement(o)))return o;var l=De("recharts-pie-label-text",typeof s!="boolean"&&!Me(s)?s.className:"");return Y.createElement(Ai,io({},a,{alignmentBaseline:"middle",className:l}),o)}}])}(k.PureComponent);Ym=Os;nn(Os,"displayName","Pie");nn(Os,"defaultProps",{stroke:"#fff",fill:"#808080",legendType:"rect",cx:"50%",cy:"50%",startAngle:0,endAngle:360,innerRadius:0,outerRadius:"80%",paddingAngle:0,labelLine:!0,hide:!1,minAngle:0,isAnimationActive:!zl.isSsr,animationBegin:400,animationDuration:1500,animationEasing:"ease",nameKey:"name",blendStroke:!1,rootTabIndex:0});nn(Os,"parseDeltaAngle",function(e,t){var n=cr(t-e),s=Math.min(Math.abs(t-e),360);return n*s});nn(Os,"getRealPieData",function(e){var t=e.data,n=e.children,s=Te(e,!1),a=dn(n,Bp);return t&&t.length?t.map(function(i,o){return tt(tt(tt({payload:i},s),i),a&&a[o]&&a[o].props)}):a&&a.length?a.map(function(i){return tt(tt({},s),i.props)}):[]});nn(Os,"parseCoordinateOfPie",function(e,t){var n=t.top,s=t.left,a=t.width,i=t.height,o=H8(a,i),l=s+dr(e.cx,a,a/2),c=n+dr(e.cy,i,i/2),d=dr(e.innerRadius,o,0),m=dr(e.outerRadius,o,o*.8),u=e.maxRadius||Math.sqrt(a*a+i*i)/2;return{cx:l,cy:c,innerRadius:d,outerRadius:m,maxRadius:u}});nn(Os,"getComposedData",function(e){var t=e.item,n=e.offset,s=t.type.defaultProps!==void 0?tt(tt({},t.type.defaultProps),t.props):t.props,a=Ym.getRealPieData(s);if(!a||!a.length)return null;var i=s.cornerRadius,o=s.startAngle,l=s.endAngle,c=s.paddingAngle,d=s.dataKey,m=s.nameKey,u=s.valueKey,h=s.tooltipType,f=Math.abs(s.minAngle),b=Ym.parseCoordinateOfPie(s,n),g=Ym.parseDeltaAngle(o,l),x=Math.abs(g),p=d;Fe(d)&&Fe(u)?(En(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p="value"):Fe(d)&&(En(!1,`Use "dataKey" to specify the value of pie,
      the props "valueKey" will be deprecated in 1.1.0`),p=u);var y=a.filter(function(S){return er(S,p,0)!==0}).length,v=(x>=360?y:y-1)*c,N=x-y*f-v,w=a.reduce(function(S,T){var A=er(T,p,0);return S+(ge(A)?A:0)},0),j;if(w>0){var _;j=a.map(function(S,T){var A=er(S,p,0),E=er(S,m,T),R=(ge(A)?A:0)/w,I;T?I=_.endAngle+cr(g)*c*(A!==0?1:0):I=o;var O=I+cr(g)*((A!==0?f:0)+R*N),L=(I+O)/2,F=(b.innerRadius+b.outerRadius)/2,M=[{name:E,value:A,payload:S,dataKey:p,type:h}],D=st(b.cx,b.cy,F,L);return _=tt(tt(tt({percent:R,cornerRadius:i,name:E,tooltipPayload:M,midAngle:L,middleRadius:F,tooltipPosition:D},S),b),{},{value:er(S,p),startAngle:I,endAngle:O,payload:S,paddingAngle:cr(g)*c}),_})}return tt(tt({},b),{},{sectors:j,data:a})});var Kpe=Math.ceil,Gpe=Math.max;function Qpe(e,t,n,s){for(var a=-1,i=Gpe(Kpe((t-e)/(n||1)),0),o=Array(i);i--;)o[s?i:++a]=e,e+=n;return o}var Ype=Qpe,Xpe=ME,N5=1/0,Jpe=17976931348623157e292;function Zpe(e){if(!e)return e===0?e:0;if(e=Xpe(e),e===N5||e===-N5){var t=e<0?-1:1;return t*Jpe}return e===e?e:0}var m7=Zpe,efe=Ype,tfe=Fp,Ix=m7;function rfe(e){return function(t,n,s){return s&&typeof s!="number"&&tfe(t,n,s)&&(n=s=void 0),t=Ix(t),n===void 0?(n=t,t=0):n=Ix(n),s=s===void 0?t<n?1:-1:Ix(s),efe(t,n,s,e)}}var nfe=rfe,sfe=nfe,afe=sfe(),ife=afe;const N0=Ke(ife);function Xd(e){"@babel/helpers - typeof";return Xd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Xd(e)}function _5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function k5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?_5(Object(n),!0).forEach(function(s){h7(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):_5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function h7(e,t,n){return t=ofe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ofe(e){var t=lfe(e,"string");return Xd(t)=="symbol"?t:t+""}function lfe(e,t){if(Xd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Xd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var cfe=["Webkit","Moz","O","ms"],dfe=function(t,n){var s=t.replace(/(\w)/,function(i){return i.toUpperCase()}),a=cfe.reduce(function(i,o){return k5(k5({},i),{},h7({},o+s,n))},{});return a[t]=n,a};function ul(e){"@babel/helpers - typeof";return ul=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ul(e)}function _0(){return _0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},_0.apply(this,arguments)}function S5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Dx(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?S5(Object(n),!0).forEach(function(s){Tr(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):S5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function ufe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function C5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,f7(s.key),s)}}function mfe(e,t,n){return t&&C5(e.prototype,t),n&&C5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function hfe(e,t,n){return t=k0(t),pfe(e,p7()?Reflect.construct(t,n||[],k0(e).constructor):t.apply(e,n))}function pfe(e,t){if(t&&(ul(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return ffe(e)}function ffe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function p7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(p7=function(){return!!e})()}function k0(e){return k0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},k0(e)}function xfe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ib(e,t)}function Ib(e,t){return Ib=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ib(e,t)}function Tr(e,t,n){return t=f7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f7(e){var t=gfe(e,"string");return ul(t)=="symbol"?t:t+""}function gfe(e,t){if(ul(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ul(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var yfe=function(t){var n=t.data,s=t.startIndex,a=t.endIndex,i=t.x,o=t.width,l=t.travellerWidth;if(!n||!n.length)return{};var c=n.length,d=qc().domain(N0(0,c)).range([i,i+o-l]),m=d.domain().map(function(u){return d(u)});return{isTextActive:!1,isSlideMoving:!1,isTravellerMoving:!1,isTravellerFocused:!1,startX:d(s),endX:d(a),scale:d,scaleValues:m}},A5=function(t){return t.changedTouches&&!!t.changedTouches.length},ml=function(e){function t(n){var s;return ufe(this,t),s=hfe(this,t,[n]),Tr(s,"handleDrag",function(a){s.leaveTimer&&(clearTimeout(s.leaveTimer),s.leaveTimer=null),s.state.isTravellerMoving?s.handleTravellerMove(a):s.state.isSlideMoving&&s.handleSlideDrag(a)}),Tr(s,"handleTouchMove",function(a){a.changedTouches!=null&&a.changedTouches.length>0&&s.handleDrag(a.changedTouches[0])}),Tr(s,"handleDragEnd",function(){s.setState({isTravellerMoving:!1,isSlideMoving:!1},function(){var a=s.props,i=a.endIndex,o=a.onDragEnd,l=a.startIndex;o==null||o({endIndex:i,startIndex:l})}),s.detachDragEndListener()}),Tr(s,"handleLeaveWrapper",function(){(s.state.isTravellerMoving||s.state.isSlideMoving)&&(s.leaveTimer=window.setTimeout(s.handleDragEnd,s.props.leaveTimeOut))}),Tr(s,"handleEnterSlideOrTraveller",function(){s.setState({isTextActive:!0})}),Tr(s,"handleLeaveSlideOrTraveller",function(){s.setState({isTextActive:!1})}),Tr(s,"handleSlideDragStart",function(a){var i=A5(a)?a.changedTouches[0]:a;s.setState({isTravellerMoving:!1,isSlideMoving:!0,slideMoveStartX:i.pageX}),s.attachDragEndListener()}),s.travellerDragStartHandlers={startX:s.handleTravellerDragStart.bind(s,"startX"),endX:s.handleTravellerDragStart.bind(s,"endX")},s.state={},s}return xfe(t,e),mfe(t,[{key:"componentWillUnmount",value:function(){this.leaveTimer&&(clearTimeout(this.leaveTimer),this.leaveTimer=null),this.detachDragEndListener()}},{key:"getIndex",value:function(s){var a=s.startX,i=s.endX,o=this.state.scaleValues,l=this.props,c=l.gap,d=l.data,m=d.length-1,u=Math.min(a,i),h=Math.max(a,i),f=t.getIndexInRange(o,u),b=t.getIndexInRange(o,h);return{startIndex:f-f%c,endIndex:b===m?m:b-b%c}}},{key:"getTextOfTick",value:function(s){var a=this.props,i=a.data,o=a.tickFormatter,l=a.dataKey,c=er(i[s],l,s);return Me(o)?o(c,s):c}},{key:"attachDragEndListener",value:function(){window.addEventListener("mouseup",this.handleDragEnd,!0),window.addEventListener("touchend",this.handleDragEnd,!0),window.addEventListener("mousemove",this.handleDrag,!0)}},{key:"detachDragEndListener",value:function(){window.removeEventListener("mouseup",this.handleDragEnd,!0),window.removeEventListener("touchend",this.handleDragEnd,!0),window.removeEventListener("mousemove",this.handleDrag,!0)}},{key:"handleSlideDrag",value:function(s){var a=this.state,i=a.slideMoveStartX,o=a.startX,l=a.endX,c=this.props,d=c.x,m=c.width,u=c.travellerWidth,h=c.startIndex,f=c.endIndex,b=c.onChange,g=s.pageX-i;g>0?g=Math.min(g,d+m-u-l,d+m-u-o):g<0&&(g=Math.max(g,d-o,d-l));var x=this.getIndex({startX:o+g,endX:l+g});(x.startIndex!==h||x.endIndex!==f)&&b&&b(x),this.setState({startX:o+g,endX:l+g,slideMoveStartX:s.pageX})}},{key:"handleTravellerDragStart",value:function(s,a){var i=A5(a)?a.changedTouches[0]:a;this.setState({isSlideMoving:!1,isTravellerMoving:!0,movingTravellerId:s,brushMoveStartX:i.pageX}),this.attachDragEndListener()}},{key:"handleTravellerMove",value:function(s){var a=this.state,i=a.brushMoveStartX,o=a.movingTravellerId,l=a.endX,c=a.startX,d=this.state[o],m=this.props,u=m.x,h=m.width,f=m.travellerWidth,b=m.onChange,g=m.gap,x=m.data,p={startX:this.state.startX,endX:this.state.endX},y=s.pageX-i;y>0?y=Math.min(y,u+h-f-d):y<0&&(y=Math.max(y,u-d)),p[o]=d+y;var v=this.getIndex(p),N=v.startIndex,w=v.endIndex,j=function(){var S=x.length-1;return o==="startX"&&(l>c?N%g===0:w%g===0)||l<c&&w===S||o==="endX"&&(l>c?w%g===0:N%g===0)||l>c&&w===S};this.setState(Tr(Tr({},o,d+y),"brushMoveStartX",s.pageX),function(){b&&j()&&b(v)})}},{key:"handleTravellerMoveKeyboard",value:function(s,a){var i=this,o=this.state,l=o.scaleValues,c=o.startX,d=o.endX,m=this.state[a],u=l.indexOf(m);if(u!==-1){var h=u+s;if(!(h===-1||h>=l.length)){var f=l[h];a==="startX"&&f>=d||a==="endX"&&f<=c||this.setState(Tr({},a,f),function(){i.props.onChange(i.getIndex({startX:i.state.startX,endX:i.state.endX}))})}}}},{key:"renderBackground",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.fill,d=s.stroke;return Y.createElement("rect",{stroke:d,fill:c,x:a,y:i,width:o,height:l})}},{key:"renderPanorama",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.data,d=s.children,m=s.padding,u=k.Children.only(d);return u?Y.cloneElement(u,{x:a,y:i,width:o,height:l,margin:m,compact:!0,data:c}):null}},{key:"renderTravellerLayer",value:function(s,a){var i,o,l=this,c=this.props,d=c.y,m=c.travellerWidth,u=c.height,h=c.traveller,f=c.ariaLabel,b=c.data,g=c.startIndex,x=c.endIndex,p=Math.max(s,this.props.x),y=Dx(Dx({},Te(this.props,!1)),{},{x:p,y:d,width:m,height:u}),v=f||"Min value: ".concat((i=b[g])===null||i===void 0?void 0:i.name,", Max value: ").concat((o=b[x])===null||o===void 0?void 0:o.name);return Y.createElement(Ge,{tabIndex:0,role:"slider","aria-label":v,"aria-valuenow":s,className:"recharts-brush-traveller",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.travellerDragStartHandlers[a],onTouchStart:this.travellerDragStartHandlers[a],onKeyDown:function(w){["ArrowLeft","ArrowRight"].includes(w.key)&&(w.preventDefault(),w.stopPropagation(),l.handleTravellerMoveKeyboard(w.key==="ArrowRight"?1:-1,a))},onFocus:function(){l.setState({isTravellerFocused:!0})},onBlur:function(){l.setState({isTravellerFocused:!1})},style:{cursor:"col-resize"}},t.renderTraveller(h,y))}},{key:"renderSlide",value:function(s,a){var i=this.props,o=i.y,l=i.height,c=i.stroke,d=i.travellerWidth,m=Math.min(s,a)+d,u=Math.max(Math.abs(a-s)-d,0);return Y.createElement("rect",{className:"recharts-brush-slide",onMouseEnter:this.handleEnterSlideOrTraveller,onMouseLeave:this.handleLeaveSlideOrTraveller,onMouseDown:this.handleSlideDragStart,onTouchStart:this.handleSlideDragStart,style:{cursor:"move"},stroke:"none",fill:c,fillOpacity:.2,x:m,y:o,width:u,height:l})}},{key:"renderText",value:function(){var s=this.props,a=s.startIndex,i=s.endIndex,o=s.y,l=s.height,c=s.travellerWidth,d=s.stroke,m=this.state,u=m.startX,h=m.endX,f=5,b={pointerEvents:"none",fill:d};return Y.createElement(Ge,{className:"recharts-brush-texts"},Y.createElement(Ai,_0({textAnchor:"end",verticalAnchor:"middle",x:Math.min(u,h)-f,y:o+l/2},b),this.getTextOfTick(a)),Y.createElement(Ai,_0({textAnchor:"start",verticalAnchor:"middle",x:Math.max(u,h)+c+f,y:o+l/2},b),this.getTextOfTick(i)))}},{key:"render",value:function(){var s=this.props,a=s.data,i=s.className,o=s.children,l=s.x,c=s.y,d=s.width,m=s.height,u=s.alwaysShowText,h=this.state,f=h.startX,b=h.endX,g=h.isTextActive,x=h.isSlideMoving,p=h.isTravellerMoving,y=h.isTravellerFocused;if(!a||!a.length||!ge(l)||!ge(c)||!ge(d)||!ge(m)||d<=0||m<=0)return null;var v=De("recharts-brush",i),N=Y.Children.count(o)===1,w=dfe("userSelect","none");return Y.createElement(Ge,{className:v,onMouseLeave:this.handleLeaveWrapper,onTouchMove:this.handleTouchMove,style:w},this.renderBackground(),N&&this.renderPanorama(),this.renderSlide(f,b),this.renderTravellerLayer(f,"startX"),this.renderTravellerLayer(b,"endX"),(g||x||p||y||u)&&this.renderText())}}],[{key:"renderDefaultTraveller",value:function(s){var a=s.x,i=s.y,o=s.width,l=s.height,c=s.stroke,d=Math.floor(i+l/2)-1;return Y.createElement(Y.Fragment,null,Y.createElement("rect",{x:a,y:i,width:o,height:l,fill:c,stroke:"none"}),Y.createElement("line",{x1:a+1,y1:d,x2:a+o-1,y2:d,fill:"none",stroke:"#fff"}),Y.createElement("line",{x1:a+1,y1:d+2,x2:a+o-1,y2:d+2,fill:"none",stroke:"#fff"}))}},{key:"renderTraveller",value:function(s,a){var i;return Y.isValidElement(s)?i=Y.cloneElement(s,a):Me(s)?i=s(a):i=t.renderDefaultTraveller(a),i}},{key:"getDerivedStateFromProps",value:function(s,a){var i=s.data,o=s.width,l=s.x,c=s.travellerWidth,d=s.updateId,m=s.startIndex,u=s.endIndex;if(i!==a.prevData||d!==a.prevUpdateId)return Dx({prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o},i&&i.length?yfe({data:i,width:o,x:l,travellerWidth:c,startIndex:m,endIndex:u}):{scale:null,scaleValues:null});if(a.scale&&(o!==a.prevWidth||l!==a.prevX||c!==a.prevTravellerWidth)){a.scale.range([l,l+o-c]);var h=a.scale.domain().map(function(f){return a.scale(f)});return{prevData:i,prevTravellerWidth:c,prevUpdateId:d,prevX:l,prevWidth:o,startX:a.scale(s.startIndex),endX:a.scale(s.endIndex),scaleValues:h}}return null}},{key:"getIndexInRange",value:function(s,a){for(var i=s.length,o=0,l=i-1;l-o>1;){var c=Math.floor((o+l)/2);s[c]>a?l=c:o=c}return a>=s[l]?l:o}}])}(k.PureComponent);Tr(ml,"displayName","Brush");Tr(ml,"defaultProps",{height:40,travellerWidth:5,gap:1,fill:"#fff",stroke:"#666",padding:{top:1,right:1,bottom:1,left:1},leaveTimeOut:1e3,alwaysShowText:!1});var bfe=m2;function vfe(e,t){var n;return bfe(e,function(s,a,i){return n=t(s,a,i),!n}),!!n}var jfe=vfe,wfe=iE,Nfe=Xn,_fe=jfe,kfe=Or,Sfe=Fp;function Cfe(e,t,n){var s=kfe(e)?wfe:_fe;return n&&Sfe(e,t,n)&&(t=void 0),s(e,Nfe(t))}var Afe=Cfe;const Pfe=Ke(Afe);var Kn=function(t,n){var s=t.alwaysShow,a=t.ifOverflow;return s&&(a="extendDomain"),a===n},P5=AE;function Efe(e,t,n){t=="__proto__"&&P5?P5(e,t,{configurable:!0,enumerable:!0,value:n,writable:!0}):e[t]=n}var Ofe=Efe,Tfe=Ofe,Mfe=SE,Lfe=Xn;function $fe(e,t){var n={};return t=Lfe(t),Mfe(e,function(s,a,i){Tfe(n,a,t(s,a,i))}),n}var Rfe=$fe;const Ife=Ke(Rfe);function Dfe(e,t){for(var n=-1,s=e==null?0:e.length;++n<s;)if(!t(e[n],n,e))return!1;return!0}var Ffe=Dfe,Bfe=m2;function zfe(e,t){var n=!0;return Bfe(e,function(s,a,i){return n=!!t(s,a,i),n}),n}var qfe=zfe,Ufe=Ffe,Wfe=qfe,Vfe=Xn,Hfe=Or,Kfe=Fp;function Gfe(e,t,n){var s=Hfe(e)?Ufe:Wfe;return n&&Kfe(e,t,n)&&(t=void 0),s(e,Vfe(t))}var Qfe=Gfe;const x7=Ke(Qfe);var Yfe=["x","y"];function Jd(e){"@babel/helpers - typeof";return Jd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Jd(e)}function Db(){return Db=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Db.apply(this,arguments)}function E5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function bc(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?E5(Object(n),!0).forEach(function(s){Xfe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):E5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Xfe(e,t,n){return t=Jfe(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Jfe(e){var t=Zfe(e,"string");return Jd(t)=="symbol"?t:t+""}function Zfe(e,t){if(Jd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Jd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function exe(e,t){if(e==null)return{};var n=txe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function txe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function rxe(e,t){var n=e.x,s=e.y,a=exe(e,Yfe),i="".concat(n),o=parseInt(i,10),l="".concat(s),c=parseInt(l,10),d="".concat(t.height||a.height),m=parseInt(d,10),u="".concat(t.width||a.width),h=parseInt(u,10);return bc(bc(bc(bc(bc({},t),a),o?{x:o}:{}),c?{y:c}:{}),{},{height:m,width:h,name:t.name,radius:t.radius})}function O5(e){return Y.createElement(c7,Db({shapeType:"rectangle",propTransformer:rxe,activeClassName:"recharts-active-bar"},e))}var nxe=function(t){var n=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0;return function(s,a){if(typeof t=="number")return t;var i=ge(s)||OQ(s);return i?t(s,a):(i||va(),n)}},sxe=["value","background"],g7;function hl(e){"@babel/helpers - typeof";return hl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},hl(e)}function axe(e,t){if(e==null)return{};var n=ixe(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function ixe(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function S0(){return S0=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},S0.apply(this,arguments)}function T5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?T5(Object(n),!0).forEach(function(s){ra(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):T5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function oxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function M5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,b7(s.key),s)}}function lxe(e,t,n){return t&&M5(e.prototype,t),n&&M5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function cxe(e,t,n){return t=C0(t),dxe(e,y7()?Reflect.construct(t,n||[],C0(e).constructor):t.apply(e,n))}function dxe(e,t){if(t&&(hl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return uxe(e)}function uxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function y7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(y7=function(){return!!e})()}function C0(e){return C0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},C0(e)}function mxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Fb(e,t)}function Fb(e,t){return Fb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Fb(e,t)}function ra(e,t,n){return t=b7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function b7(e){var t=hxe(e,"string");return hl(t)=="symbol"?t:t+""}function hxe(e,t){if(hl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(hl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Fi=function(e){function t(){var n;oxe(this,t);for(var s=arguments.length,a=new Array(s),i=0;i<s;i++)a[i]=arguments[i];return n=cxe(this,t,[].concat(a)),ra(n,"state",{isAnimationFinished:!1}),ra(n,"id",Au("recharts-bar-")),ra(n,"handleAnimationEnd",function(){var o=n.props.onAnimationEnd;n.setState({isAnimationFinished:!0}),o&&o()}),ra(n,"handleAnimationStart",function(){var o=n.props.onAnimationStart;n.setState({isAnimationFinished:!1}),o&&o()}),n}return mxe(t,e),lxe(t,[{key:"renderRectanglesStatically",value:function(s){var a=this,i=this.props,o=i.shape,l=i.dataKey,c=i.activeIndex,d=i.activeBar,m=Te(this.props,!1);return s&&s.map(function(u,h){var f=h===c,b=f?d:o,g=jt(jt(jt({},m),u),{},{isActive:f,option:b,index:h,dataKey:l,onAnimationStart:a.handleAnimationStart,onAnimationEnd:a.handleAnimationEnd});return Y.createElement(Ge,S0({className:"recharts-bar-rectangle"},Ci(a.props,u,h),{key:"rectangle-".concat(u==null?void 0:u.x,"-").concat(u==null?void 0:u.y,"-").concat(u==null?void 0:u.value,"-").concat(h)}),Y.createElement(O5,g))})}},{key:"renderRectanglesWithAnimation",value:function(){var s=this,a=this.props,i=a.data,o=a.layout,l=a.isAnimationActive,c=a.animationBegin,d=a.animationDuration,m=a.animationEasing,u=a.animationId,h=this.state.prevData;return Y.createElement(_s,{begin:c,duration:d,isActive:l,easing:m,from:{t:0},to:{t:1},key:"bar-".concat(u),onAnimationEnd:this.handleAnimationEnd,onAnimationStart:this.handleAnimationStart},function(f){var b=f.t,g=i.map(function(x,p){var y=h&&h[p];if(y){var v=Is(y.x,x.x),N=Is(y.y,x.y),w=Is(y.width,x.width),j=Is(y.height,x.height);return jt(jt({},x),{},{x:v(b),y:N(b),width:w(b),height:j(b)})}if(o==="horizontal"){var _=Is(0,x.height),S=_(b);return jt(jt({},x),{},{y:x.y+x.height-S,height:S})}var T=Is(0,x.width),A=T(b);return jt(jt({},x),{},{width:A})});return Y.createElement(Ge,null,s.renderRectanglesStatically(g))})}},{key:"renderRectangles",value:function(){var s=this.props,a=s.data,i=s.isAnimationActive,o=this.state.prevData;return i&&a&&a.length&&(!o||!Yp(o,a))?this.renderRectanglesWithAnimation():this.renderRectanglesStatically(a)}},{key:"renderBackground",value:function(){var s=this,a=this.props,i=a.data,o=a.dataKey,l=a.activeIndex,c=Te(this.props.background,!1);return i.map(function(d,m){d.value;var u=d.background,h=axe(d,sxe);if(!u)return null;var f=jt(jt(jt(jt(jt({},h),{},{fill:"#eee"},u),c),Ci(s.props,d,m)),{},{onAnimationStart:s.handleAnimationStart,onAnimationEnd:s.handleAnimationEnd,dataKey:o,index:m,className:"recharts-bar-background-rectangle"});return Y.createElement(O5,S0({key:"background-bar-".concat(m),option:s.props.background,isActive:m===l},f))})}},{key:"renderErrorBar",value:function(s,a){if(this.props.isAnimationActive&&!this.state.isAnimationFinished)return null;var i=this.props,o=i.data,l=i.xAxis,c=i.yAxis,d=i.layout,m=i.children,u=dn(m,Zp);if(!u)return null;var h=d==="vertical"?o[0].height/2:o[0].width/2,f=function(x,p){var y=Array.isArray(x.value)?x.value[1]:x.value;return{x:x.x,y:x.y,value:y,errorVal:er(x,p)}},b={clipPath:s?"url(#clipPath-".concat(a,")"):null};return Y.createElement(Ge,b,u.map(function(g){return Y.cloneElement(g,{key:"error-bar-".concat(a,"-").concat(g.props.dataKey),data:o,xAxis:l,yAxis:c,layout:d,offset:h,dataPointFormatter:f})}))}},{key:"render",value:function(){var s=this.props,a=s.hide,i=s.data,o=s.className,l=s.xAxis,c=s.yAxis,d=s.left,m=s.top,u=s.width,h=s.height,f=s.isAnimationActive,b=s.background,g=s.id;if(a||!i||!i.length)return null;var x=this.state.isAnimationFinished,p=De("recharts-bar",o),y=l&&l.allowDataOverflow,v=c&&c.allowDataOverflow,N=y||v,w=Fe(g)?this.id:g;return Y.createElement(Ge,{className:p},y||v?Y.createElement("defs",null,Y.createElement("clipPath",{id:"clipPath-".concat(w)},Y.createElement("rect",{x:y?d:d-u/2,y:v?m:m-h/2,width:y?u:u*2,height:v?h:h*2}))):null,Y.createElement(Ge,{className:"recharts-bar-rectangles",clipPath:N?"url(#clipPath-".concat(w,")"):null},b?this.renderBackground():null,this.renderRectangles()),this.renderErrorBar(N,w),(!f||x)&&ga.renderCallByParent(this.props,i))}}],[{key:"getDerivedStateFromProps",value:function(s,a){return s.animationId!==a.prevAnimationId?{prevAnimationId:s.animationId,curData:s.data,prevData:a.curData}:s.data!==a.curData?{curData:s.data}:null}}])}(k.PureComponent);g7=Fi;ra(Fi,"displayName","Bar");ra(Fi,"defaultProps",{xAxisId:0,yAxisId:0,legendType:"rect",minPointSize:0,hide:!1,data:[],layout:"vertical",activeBar:!1,isAnimationActive:!zl.isSsr,animationBegin:0,animationDuration:400,animationEasing:"ease"});ra(Fi,"getComposedData",function(e){var t=e.props,n=e.item,s=e.barPosition,a=e.bandSize,i=e.xAxis,o=e.yAxis,l=e.xAxisTicks,c=e.yAxisTicks,d=e.stackedData,m=e.dataStartIndex,u=e.displayedData,h=e.offset,f=Gde(s,n);if(!f)return null;var b=t.layout,g=n.type.defaultProps,x=g!==void 0?jt(jt({},g),n.props):n.props,p=x.dataKey,y=x.children,v=x.minPointSize,N=b==="horizontal"?o:i,w=d?N.scale.domain():null,j=tue({numericAxis:N}),_=dn(y,Bp),S=u.map(function(T,A){var E,R,I,O,L,F;d?E=Qde(d[m+A],w):(E=er(T,p),Array.isArray(E)||(E=[j,E]));var M=nxe(v,g7.defaultProps.minPointSize)(E[1],A);if(b==="horizontal"){var D,W=[o.scale(E[0]),o.scale(E[1])],P=W[0],V=W[1];R=kk({axis:i,ticks:l,bandSize:a,offset:f.offset,entry:T,index:A}),I=(D=V??P)!==null&&D!==void 0?D:void 0,O=f.size;var K=P-V;if(L=Number.isNaN(K)?0:K,F={x:R,y:o.y,width:O,height:o.height},Math.abs(M)>0&&Math.abs(L)<Math.abs(M)){var ne=cr(L||M)*(Math.abs(M)-Math.abs(L));I-=ne,L+=ne}}else{var G=[i.scale(E[0]),i.scale(E[1])],oe=G[0],H=G[1];if(R=oe,I=kk({axis:o,ticks:c,bandSize:a,offset:f.offset,entry:T,index:A}),O=H-oe,L=f.size,F={x:i.x,y:I,width:i.width,height:L},Math.abs(M)>0&&Math.abs(O)<Math.abs(M)){var ee=cr(O||M)*(Math.abs(M)-Math.abs(O));O+=ee}}return jt(jt(jt({},T),{},{x:R,y:I,width:O,height:L,value:d?E:E[1],payload:T,background:F},_&&_[A]&&_[A].props),{},{tooltipPayload:[W8(n,T)],tooltipPosition:{x:R+O/2,y:I+L/2}})});return jt({data:S,layout:b},h)});function Zd(e){"@babel/helpers - typeof";return Zd=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Zd(e)}function pxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function L5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,v7(s.key),s)}}function fxe(e,t,n){return t&&L5(e.prototype,t),n&&L5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function $5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function _n(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?$5(Object(n),!0).forEach(function(s){of(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):$5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function of(e,t,n){return t=v7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function v7(e){var t=xxe(e,"string");return Zd(t)=="symbol"?t:t+""}function xxe(e,t){if(Zd(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Zd(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var gxe=function(t,n,s,a,i){var o=t.width,l=t.height,c=t.layout,d=t.children,m=Object.keys(n),u={left:s.left,leftMirror:s.left,right:o-s.right,rightMirror:o-s.right,top:s.top,topMirror:s.top,bottom:l-s.bottom,bottomMirror:l-s.bottom},h=!!$r(d,Fi);return m.reduce(function(f,b){var g=n[b],x=g.orientation,p=g.domain,y=g.padding,v=y===void 0?{}:y,N=g.mirror,w=g.reversed,j="".concat(x).concat(N?"Mirror":""),_,S,T,A,E;if(g.type==="number"&&(g.padding==="gap"||g.padding==="no-gap")){var R=p[1]-p[0],I=1/0,O=g.categoricalDomain.sort(LQ);if(O.forEach(function(G,oe){oe>0&&(I=Math.min((G||0)-(O[oe-1]||0),I))}),Number.isFinite(I)){var L=I/R,F=g.layout==="vertical"?s.height:s.width;if(g.padding==="gap"&&(_=L*F/2),g.padding==="no-gap"){var M=dr(t.barCategoryGap,L*F),D=L*F/2;_=D-M-(D-M)/F*M}}}a==="xAxis"?S=[s.left+(v.left||0)+(_||0),s.left+s.width-(v.right||0)-(_||0)]:a==="yAxis"?S=c==="horizontal"?[s.top+s.height-(v.bottom||0),s.top+(v.top||0)]:[s.top+(v.top||0)+(_||0),s.top+s.height-(v.bottom||0)-(_||0)]:S=g.range,w&&(S=[S[1],S[0]]);var W=B8(g,i,h),P=W.scale,V=W.realScaleType;P.domain(p).range(S),z8(P);var K=q8(P,_n(_n({},g),{},{realScaleType:V}));a==="xAxis"?(E=x==="top"&&!N||x==="bottom"&&N,T=s.left,A=u[j]-E*g.height):a==="yAxis"&&(E=x==="left"&&!N||x==="right"&&N,T=u[j]-E*g.width,A=s.top);var ne=_n(_n(_n({},g),K),{},{realScaleType:V,x:T,y:A,scale:P,width:a==="xAxis"?s.width:g.width,height:a==="yAxis"?s.height:g.height});return ne.bandSize=d0(ne,K),!g.hide&&a==="xAxis"?u[j]+=(E?-1:1)*ne.height:g.hide||(u[j]+=(E?-1:1)*ne.width),_n(_n({},f),{},of({},b,ne))},{})},j7=function(t,n){var s=t.x,a=t.y,i=n.x,o=n.y;return{x:Math.min(s,i),y:Math.min(a,o),width:Math.abs(i-s),height:Math.abs(o-a)}},yxe=function(t){var n=t.x1,s=t.y1,a=t.x2,i=t.y2;return j7({x:n,y:s},{x:a,y:i})},w7=function(){function e(t){pxe(this,e),this.scale=t}return fxe(e,[{key:"domain",get:function(){return this.scale.domain}},{key:"range",get:function(){return this.scale.range}},{key:"rangeMin",get:function(){return this.range()[0]}},{key:"rangeMax",get:function(){return this.range()[1]}},{key:"bandwidth",get:function(){return this.scale.bandwidth}},{key:"apply",value:function(n){var s=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},a=s.bandAware,i=s.position;if(n!==void 0){if(i)switch(i){case"start":return this.scale(n);case"middle":{var o=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+o}case"end":{var l=this.bandwidth?this.bandwidth():0;return this.scale(n)+l}default:return this.scale(n)}if(a){var c=this.bandwidth?this.bandwidth()/2:0;return this.scale(n)+c}return this.scale(n)}}},{key:"isInRange",value:function(n){var s=this.range(),a=s[0],i=s[s.length-1];return a<=i?n>=a&&n<=i:n>=i&&n<=a}}],[{key:"create",value:function(n){return new e(n)}}])}();of(w7,"EPS",1e-4);var q2=function(t){var n=Object.keys(t).reduce(function(s,a){return _n(_n({},s),{},of({},a,w7.create(t[a])))},{});return _n(_n({},n),{},{apply:function(a){var i=arguments.length>1&&arguments[1]!==void 0?arguments[1]:{},o=i.bandAware,l=i.position;return Ife(a,function(c,d){return n[d].apply(c,{bandAware:o,position:l})})},isInRange:function(a){return x7(a,function(i,o){return n[o].isInRange(i)})}})};function bxe(e){return(e%180+180)%180}var vxe=function(t){var n=t.width,s=t.height,a=arguments.length>1&&arguments[1]!==void 0?arguments[1]:0,i=bxe(a),o=i*Math.PI/180,l=Math.atan(s/n),c=o>l&&o<Math.PI-l?s/Math.sin(o):n/Math.cos(o);return Math.abs(c)},jxe=Xn,wxe=Pu,Nxe=Ip;function _xe(e){return function(t,n,s){var a=Object(t);if(!wxe(t)){var i=jxe(n);t=Nxe(t),n=function(l){return i(a[l],l,a)}}var o=e(t,n,s);return o>-1?a[i?t[o]:o]:void 0}}var kxe=_xe,Sxe=m7;function Cxe(e){var t=Sxe(e),n=t%1;return t===t?n?t-n:t:0}var Axe=Cxe,Pxe=vE,Exe=Xn,Oxe=Axe,Txe=Math.max;function Mxe(e,t,n){var s=e==null?0:e.length;if(!s)return-1;var a=n==null?0:Oxe(n);return a<0&&(a=Txe(s+a,0)),Pxe(e,Exe(t),a)}var Lxe=Mxe,$xe=kxe,Rxe=Lxe,Ixe=$xe(Rxe),Dxe=Ixe;const Fxe=Ke(Dxe);var Bxe=IG(function(e){return{x:e.left,y:e.top,width:e.width,height:e.height}},function(e){return["l",e.left,"t",e.top,"w",e.width,"h",e.height].join("")}),U2=k.createContext(void 0),W2=k.createContext(void 0),N7=k.createContext(void 0),_7=k.createContext({}),k7=k.createContext(void 0),S7=k.createContext(0),C7=k.createContext(0),R5=function(t){var n=t.state,s=n.xAxisMap,a=n.yAxisMap,i=n.offset,o=t.clipPathId,l=t.children,c=t.width,d=t.height,m=Bxe(i);return Y.createElement(U2.Provider,{value:s},Y.createElement(W2.Provider,{value:a},Y.createElement(_7.Provider,{value:i},Y.createElement(N7.Provider,{value:m},Y.createElement(k7.Provider,{value:o},Y.createElement(S7.Provider,{value:d},Y.createElement(C7.Provider,{value:c},l)))))))},zxe=function(){return k.useContext(k7)},A7=function(t){var n=k.useContext(U2);n==null&&va();var s=n[t];return s==null&&va(),s},qxe=function(){var t=k.useContext(U2);return qs(t)},Uxe=function(){var t=k.useContext(W2),n=Fxe(t,function(s){return x7(s.domain,Number.isFinite)});return n||qs(t)},P7=function(t){var n=k.useContext(W2);n==null&&va();var s=n[t];return s==null&&va(),s},Wxe=function(){var t=k.useContext(N7);return t},Vxe=function(){return k.useContext(_7)},V2=function(){return k.useContext(C7)},H2=function(){return k.useContext(S7)};function pl(e){"@babel/helpers - typeof";return pl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},pl(e)}function Hxe(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Kxe(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,O7(s.key),s)}}function Gxe(e,t,n){return t&&Kxe(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Qxe(e,t,n){return t=A0(t),Yxe(e,E7()?Reflect.construct(t,n||[],A0(e).constructor):t.apply(e,n))}function Yxe(e,t){if(t&&(pl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Xxe(e)}function Xxe(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function E7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(E7=function(){return!!e})()}function A0(e){return A0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},A0(e)}function Jxe(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Bb(e,t)}function Bb(e,t){return Bb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Bb(e,t)}function I5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function D5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?I5(Object(n),!0).forEach(function(s){K2(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):I5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function K2(e,t,n){return t=O7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function O7(e){var t=Zxe(e,"string");return pl(t)=="symbol"?t:t+""}function Zxe(e,t){if(pl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(pl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function ege(e,t){return sge(e)||nge(e,t)||rge(e,t)||tge()}function tge(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function rge(e,t){if(e){if(typeof e=="string")return F5(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return F5(e,t)}}function F5(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function nge(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function sge(e){if(Array.isArray(e))return e}function zb(){return zb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},zb.apply(this,arguments)}var age=function(t,n){var s;return Y.isValidElement(t)?s=Y.cloneElement(t,n):Me(t)?s=t(n):s=Y.createElement("line",zb({},n,{className:"recharts-reference-line-line"})),s},ige=function(t,n,s,a,i,o,l,c,d){var m=i.x,u=i.y,h=i.width,f=i.height;if(s){var b=d.y,g=t.y.apply(b,{position:o});if(Kn(d,"discard")&&!t.y.isInRange(g))return null;var x=[{x:m+h,y:g},{x:m,y:g}];return c==="left"?x.reverse():x}if(n){var p=d.x,y=t.x.apply(p,{position:o});if(Kn(d,"discard")&&!t.x.isInRange(y))return null;var v=[{x:y,y:u+f},{x:y,y:u}];return l==="top"?v.reverse():v}if(a){var N=d.segment,w=N.map(function(j){return t.apply(j,{position:o})});return Kn(d,"discard")&&Pfe(w,function(j){return!t.isInRange(j)})?null:w}return null};function oge(e){var t=e.x,n=e.y,s=e.segment,a=e.xAxisId,i=e.yAxisId,o=e.shape,l=e.className,c=e.alwaysShow,d=zxe(),m=A7(a),u=P7(i),h=Wxe();if(!d||!h)return null;En(c===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var f=q2({x:m.scale,y:u.scale}),b=Et(t),g=Et(n),x=s&&s.length===2,p=ige(f,b,g,x,h,e.position,m.orientation,u.orientation,e);if(!p)return null;var y=ege(p,2),v=y[0],N=v.x,w=v.y,j=y[1],_=j.x,S=j.y,T=Kn(e,"hidden")?"url(#".concat(d,")"):void 0,A=D5(D5({clipPath:T},Te(e,!0)),{},{x1:N,y1:w,x2:_,y2:S});return Y.createElement(Ge,{className:De("recharts-reference-line",l)},age(o,A),$t.renderCallByParent(e,yxe({x1:N,y1:w,x2:_,y2:S})))}var G2=function(e){function t(){return Hxe(this,t),Qxe(this,t,arguments)}return Jxe(t,e),Gxe(t,[{key:"render",value:function(){return Y.createElement(oge,this.props)}}])}(Y.Component);K2(G2,"displayName","ReferenceLine");K2(G2,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,fill:"none",stroke:"#ccc",fillOpacity:1,strokeWidth:1,position:"middle"});function qb(){return qb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},qb.apply(this,arguments)}function fl(e){"@babel/helpers - typeof";return fl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},fl(e)}function B5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function z5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?B5(Object(n),!0).forEach(function(s){lf(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):B5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function lge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function cge(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,M7(s.key),s)}}function dge(e,t,n){return t&&cge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function uge(e,t,n){return t=P0(t),mge(e,T7()?Reflect.construct(t,n||[],P0(e).constructor):t.apply(e,n))}function mge(e,t){if(t&&(fl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return hge(e)}function hge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function T7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(T7=function(){return!!e})()}function P0(e){return P0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},P0(e)}function pge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ub(e,t)}function Ub(e,t){return Ub=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Ub(e,t)}function lf(e,t,n){return t=M7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function M7(e){var t=fge(e,"string");return fl(t)=="symbol"?t:t+""}function fge(e,t){if(fl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(fl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var xge=function(t){var n=t.x,s=t.y,a=t.xAxis,i=t.yAxis,o=q2({x:a.scale,y:i.scale}),l=o.apply({x:n,y:s},{bandAware:!0});return Kn(t,"discard")&&!o.isInRange(l)?null:l},cf=function(e){function t(){return lge(this,t),uge(this,t,arguments)}return pge(t,e),dge(t,[{key:"render",value:function(){var s=this.props,a=s.x,i=s.y,o=s.r,l=s.alwaysShow,c=s.clipPathId,d=Et(a),m=Et(i);if(En(l===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.'),!d||!m)return null;var u=xge(this.props);if(!u)return null;var h=u.x,f=u.y,b=this.props,g=b.shape,x=b.className,p=Kn(this.props,"hidden")?"url(#".concat(c,")"):void 0,y=z5(z5({clipPath:p},Te(this.props,!0)),{},{cx:h,cy:f});return Y.createElement(Ge,{className:De("recharts-reference-dot",x)},t.renderDot(g,y),$t.renderCallByParent(this.props,{x:h-o,y:f-o,width:2*o,height:2*o}))}}])}(Y.Component);lf(cf,"displayName","ReferenceDot");lf(cf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#fff",stroke:"#ccc",fillOpacity:1,strokeWidth:1});lf(cf,"renderDot",function(e,t){var n;return Y.isValidElement(e)?n=Y.cloneElement(e,t):Me(e)?n=e(t):n=Y.createElement(z2,qb({},t,{cx:t.cx,cy:t.cy,className:"recharts-reference-dot-dot"})),n});function Wb(){return Wb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Wb.apply(this,arguments)}function xl(e){"@babel/helpers - typeof";return xl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},xl(e)}function q5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function U5(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?q5(Object(n),!0).forEach(function(s){df(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):q5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function gge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function yge(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,$7(s.key),s)}}function bge(e,t,n){return t&&yge(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function vge(e,t,n){return t=E0(t),jge(e,L7()?Reflect.construct(t,n||[],E0(e).constructor):t.apply(e,n))}function jge(e,t){if(t&&(xl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return wge(e)}function wge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function L7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(L7=function(){return!!e})()}function E0(e){return E0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},E0(e)}function Nge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Vb(e,t)}function Vb(e,t){return Vb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Vb(e,t)}function df(e,t,n){return t=$7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function $7(e){var t=_ge(e,"string");return xl(t)=="symbol"?t:t+""}function _ge(e,t){if(xl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(xl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var kge=function(t,n,s,a,i){var o=i.x1,l=i.x2,c=i.y1,d=i.y2,m=i.xAxis,u=i.yAxis;if(!m||!u)return null;var h=q2({x:m.scale,y:u.scale}),f={x:t?h.x.apply(o,{position:"start"}):h.x.rangeMin,y:s?h.y.apply(c,{position:"start"}):h.y.rangeMin},b={x:n?h.x.apply(l,{position:"end"}):h.x.rangeMax,y:a?h.y.apply(d,{position:"end"}):h.y.rangeMax};return Kn(i,"discard")&&(!h.isInRange(f)||!h.isInRange(b))?null:j7(f,b)},uf=function(e){function t(){return gge(this,t),vge(this,t,arguments)}return Nge(t,e),bge(t,[{key:"render",value:function(){var s=this.props,a=s.x1,i=s.x2,o=s.y1,l=s.y2,c=s.className,d=s.alwaysShow,m=s.clipPathId;En(d===void 0,'The alwaysShow prop is deprecated. Please use ifOverflow="extendDomain" instead.');var u=Et(a),h=Et(i),f=Et(o),b=Et(l),g=this.props.shape;if(!u&&!h&&!f&&!b&&!g)return null;var x=kge(u,h,f,b,this.props);if(!x&&!g)return null;var p=Kn(this.props,"hidden")?"url(#".concat(m,")"):void 0;return Y.createElement(Ge,{className:De("recharts-reference-area",c)},t.renderRect(g,U5(U5({clipPath:p},Te(this.props,!0)),x)),$t.renderCallByParent(this.props,x))}}])}(Y.Component);df(uf,"displayName","ReferenceArea");df(uf,"defaultProps",{isFront:!1,ifOverflow:"discard",xAxisId:0,yAxisId:0,r:10,fill:"#ccc",fillOpacity:.5,stroke:"none",strokeWidth:1});df(uf,"renderRect",function(e,t){var n;return Y.isValidElement(e)?n=Y.cloneElement(e,t):Me(e)?n=e(t):n=Y.createElement(B2,Wb({},t,{className:"recharts-reference-area-rect"})),n});function R7(e,t,n){if(t<1)return[];if(t===1&&n===void 0)return e;for(var s=[],a=0;a<e.length;a+=t)s.push(e[a]);return s}function Sge(e,t,n){var s={width:e.width+t.width,height:e.height+t.height};return vxe(s,n)}function Cge(e,t,n){var s=n==="width",a=e.x,i=e.y,o=e.width,l=e.height;return t===1?{start:s?a:i,end:s?a+o:i+l}:{start:s?a+o:i+l,end:s?a:i}}function O0(e,t,n,s,a){if(e*t<e*s||e*t>e*a)return!1;var i=n();return e*(t-e*i/2-s)>=0&&e*(t+e*i/2-a)<=0}function Age(e,t){return R7(e,t+1)}function Pge(e,t,n,s,a){for(var i=(s||[]).slice(),o=t.start,l=t.end,c=0,d=1,m=o,u=function(){var b=s==null?void 0:s[c];if(b===void 0)return{v:R7(s,d)};var g=c,x,p=function(){return x===void 0&&(x=n(b,g)),x},y=b.coordinate,v=c===0||O0(e,y,p,m,l);v||(c=0,m=o,d+=1),v&&(m=y+e*(p()/2+a),c+=d)},h;d<=i.length;)if(h=u(),h)return h.v;return[]}function eu(e){"@babel/helpers - typeof";return eu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},eu(e)}function W5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Gt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?W5(Object(n),!0).forEach(function(s){Ege(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):W5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Ege(e,t,n){return t=Oge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Oge(e){var t=Tge(e,"string");return eu(t)=="symbol"?t:t+""}function Tge(e,t){if(eu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(eu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Mge(e,t,n,s,a){for(var i=(s||[]).slice(),o=i.length,l=t.start,c=t.end,d=function(h){var f=i[h],b,g=function(){return b===void 0&&(b=n(f,h)),b};if(h===o-1){var x=e*(f.coordinate+e*g()/2-c);i[h]=f=Gt(Gt({},f),{},{tickCoord:x>0?f.coordinate-x*e:f.coordinate})}else i[h]=f=Gt(Gt({},f),{},{tickCoord:f.coordinate});var p=O0(e,f.tickCoord,g,l,c);p&&(c=f.tickCoord-e*(g()/2+a),i[h]=Gt(Gt({},f),{},{isShow:!0}))},m=o-1;m>=0;m--)d(m);return i}function Lge(e,t,n,s,a,i){var o=(s||[]).slice(),l=o.length,c=t.start,d=t.end;if(i){var m=s[l-1],u=n(m,l-1),h=e*(m.coordinate+e*u/2-d);o[l-1]=m=Gt(Gt({},m),{},{tickCoord:h>0?m.coordinate-h*e:m.coordinate});var f=O0(e,m.tickCoord,function(){return u},c,d);f&&(d=m.tickCoord-e*(u/2+a),o[l-1]=Gt(Gt({},m),{},{isShow:!0}))}for(var b=i?l-1:l,g=function(y){var v=o[y],N,w=function(){return N===void 0&&(N=n(v,y)),N};if(y===0){var j=e*(v.coordinate-e*w()/2-c);o[y]=v=Gt(Gt({},v),{},{tickCoord:j<0?v.coordinate-j*e:v.coordinate})}else o[y]=v=Gt(Gt({},v),{},{tickCoord:v.coordinate});var _=O0(e,v.tickCoord,w,c,d);_&&(c=v.tickCoord+e*(w()/2+a),o[y]=Gt(Gt({},v),{},{isShow:!0}))},x=0;x<b;x++)g(x);return o}function Q2(e,t,n){var s=e.tick,a=e.ticks,i=e.viewBox,o=e.minTickGap,l=e.orientation,c=e.interval,d=e.tickFormatter,m=e.unit,u=e.angle;if(!a||!a.length||!s)return[];if(ge(c)||zl.isSsr)return Age(a,typeof c=="number"&&ge(c)?c:0);var h=[],f=l==="top"||l==="bottom"?"width":"height",b=m&&f==="width"?zc(m,{fontSize:t,letterSpacing:n}):{width:0,height:0},g=function(v,N){var w=Me(d)?d(v.value,N):v.value;return f==="width"?Sge(zc(w,{fontSize:t,letterSpacing:n}),b,u):zc(w,{fontSize:t,letterSpacing:n})[f]},x=a.length>=2?cr(a[1].coordinate-a[0].coordinate):1,p=Cge(i,x,f);return c==="equidistantPreserveStart"?Pge(x,p,g,a,o):(c==="preserveStart"||c==="preserveStartEnd"?h=Lge(x,p,g,a,o,c==="preserveStartEnd"):h=Mge(x,p,g,a,o),h.filter(function(y){return y.isShow}))}var $ge=["viewBox"],Rge=["viewBox"],Ige=["ticks"];function gl(e){"@babel/helpers - typeof";return gl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},gl(e)}function oo(){return oo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},oo.apply(this,arguments)}function V5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function St(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?V5(Object(n),!0).forEach(function(s){Y2(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):V5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Fx(e,t){if(e==null)return{};var n=Dge(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Dge(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Fge(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function H5(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,D7(s.key),s)}}function Bge(e,t,n){return t&&H5(e.prototype,t),n&&H5(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function zge(e,t,n){return t=T0(t),qge(e,I7()?Reflect.construct(t,n||[],T0(e).constructor):t.apply(e,n))}function qge(e,t){if(t&&(gl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Uge(e)}function Uge(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function I7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(I7=function(){return!!e})()}function T0(e){return T0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},T0(e)}function Wge(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Hb(e,t)}function Hb(e,t){return Hb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Hb(e,t)}function Y2(e,t,n){return t=D7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function D7(e){var t=Vge(e,"string");return gl(t)=="symbol"?t:t+""}function Vge(e,t){if(gl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(gl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Vl=function(e){function t(n){var s;return Fge(this,t),s=zge(this,t,[n]),s.state={fontSize:"",letterSpacing:""},s}return Wge(t,e),Bge(t,[{key:"shouldComponentUpdate",value:function(s,a){var i=s.viewBox,o=Fx(s,$ge),l=this.props,c=l.viewBox,d=Fx(l,Rge);return!yo(i,c)||!yo(o,d)||!yo(a,this.state)}},{key:"componentDidMount",value:function(){var s=this.layerReference;if(s){var a=s.getElementsByClassName("recharts-cartesian-axis-tick-value")[0];a&&this.setState({fontSize:window.getComputedStyle(a).fontSize,letterSpacing:window.getComputedStyle(a).letterSpacing})}}},{key:"getTickLineCoord",value:function(s){var a=this.props,i=a.x,o=a.y,l=a.width,c=a.height,d=a.orientation,m=a.tickSize,u=a.mirror,h=a.tickMargin,f,b,g,x,p,y,v=u?-1:1,N=s.tickSize||m,w=ge(s.tickCoord)?s.tickCoord:s.coordinate;switch(d){case"top":f=b=s.coordinate,x=o+ +!u*c,g=x-v*N,y=g-v*h,p=w;break;case"left":g=x=s.coordinate,b=i+ +!u*l,f=b-v*N,p=f-v*h,y=w;break;case"right":g=x=s.coordinate,b=i+ +u*l,f=b+v*N,p=f+v*h,y=w;break;default:f=b=s.coordinate,x=o+ +u*c,g=x+v*N,y=g+v*h,p=w;break}return{line:{x1:f,y1:g,x2:b,y2:x},tick:{x:p,y}}}},{key:"getTickTextAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o;switch(a){case"left":o=i?"start":"end";break;case"right":o=i?"end":"start";break;default:o="middle";break}return o}},{key:"getTickVerticalAnchor",value:function(){var s=this.props,a=s.orientation,i=s.mirror,o="end";switch(a){case"left":case"right":o="middle";break;case"top":o=i?"start":"end";break;default:o=i?"end":"start";break}return o}},{key:"renderAxisLine",value:function(){var s=this.props,a=s.x,i=s.y,o=s.width,l=s.height,c=s.orientation,d=s.mirror,m=s.axisLine,u=St(St(St({},Te(this.props,!1)),Te(m,!1)),{},{fill:"none"});if(c==="top"||c==="bottom"){var h=+(c==="top"&&!d||c==="bottom"&&d);u=St(St({},u),{},{x1:a,y1:i+h*l,x2:a+o,y2:i+h*l})}else{var f=+(c==="left"&&!d||c==="right"&&d);u=St(St({},u),{},{x1:a+f*o,y1:i,x2:a+f*o,y2:i+l})}return Y.createElement("line",oo({},u,{className:De("recharts-cartesian-axis-line",Ur(m,"className"))}))}},{key:"renderTicks",value:function(s,a,i){var o=this,l=this.props,c=l.tickLine,d=l.stroke,m=l.tick,u=l.tickFormatter,h=l.unit,f=Q2(St(St({},this.props),{},{ticks:s}),a,i),b=this.getTickTextAnchor(),g=this.getTickVerticalAnchor(),x=Te(this.props,!1),p=Te(m,!1),y=St(St({},x),{},{fill:"none"},Te(c,!1)),v=f.map(function(N,w){var j=o.getTickLineCoord(N),_=j.line,S=j.tick,T=St(St(St(St({textAnchor:b,verticalAnchor:g},x),{},{stroke:"none",fill:d},p),S),{},{index:w,payload:N,visibleTicksCount:f.length,tickFormatter:u});return Y.createElement(Ge,oo({className:"recharts-cartesian-axis-tick",key:"tick-".concat(N.value,"-").concat(N.coordinate,"-").concat(N.tickCoord)},Ci(o.props,N,w)),c&&Y.createElement("line",oo({},y,_,{className:De("recharts-cartesian-axis-tick-line",Ur(c,"className"))})),m&&t.renderTickItem(m,T,"".concat(Me(u)?u(N.value,w):N.value).concat(h||"")))});return Y.createElement("g",{className:"recharts-cartesian-axis-ticks"},v)}},{key:"render",value:function(){var s=this,a=this.props,i=a.axisLine,o=a.width,l=a.height,c=a.ticksGenerator,d=a.className,m=a.hide;if(m)return null;var u=this.props,h=u.ticks,f=Fx(u,Ige),b=h;return Me(c)&&(b=h&&h.length>0?c(this.props):c(f)),o<=0||l<=0||!b||!b.length?null:Y.createElement(Ge,{className:De("recharts-cartesian-axis",d),ref:function(x){s.layerReference=x}},i&&this.renderAxisLine(),this.renderTicks(b,this.state.fontSize,this.state.letterSpacing),$t.renderCallByParent(this.props))}}],[{key:"renderTickItem",value:function(s,a,i){var o,l=De(a.className,"recharts-cartesian-axis-tick-value");return Y.isValidElement(s)?o=Y.cloneElement(s,St(St({},a),{},{className:l})):Me(s)?o=s(St(St({},a),{},{className:l})):o=Y.createElement(Ai,oo({},a,{className:"recharts-cartesian-axis-tick-value"}),i),o}}])}(k.Component);Y2(Vl,"displayName","CartesianAxis");Y2(Vl,"defaultProps",{x:0,y:0,width:0,height:0,viewBox:{x:0,y:0,width:0,height:0},orientation:"bottom",ticks:[],stroke:"#666",tickLine:!0,axisLine:!0,tick:!0,mirror:!1,minTickGap:5,tickSize:6,tickMargin:2,interval:"preserveEnd"});var Hge=["x1","y1","x2","y2","key"],Kge=["offset"];function Ei(e){"@babel/helpers - typeof";return Ei=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},Ei(e)}function K5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function Jt(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?K5(Object(n),!0).forEach(function(s){Gge(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):K5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Gge(e,t,n){return t=Qge(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Qge(e){var t=Yge(e,"string");return Ei(t)=="symbol"?t:t+""}function Yge(e,t){if(Ei(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(Ei(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function ei(){return ei=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},ei.apply(this,arguments)}function G5(e,t){if(e==null)return{};var n=Xge(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Xge(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}var Jge=function(t){var n=t.fill;if(!n||n==="none")return null;var s=t.fillOpacity,a=t.x,i=t.y,o=t.width,l=t.height,c=t.ry;return Y.createElement("rect",{x:a,y:i,ry:c,width:o,height:l,stroke:"none",fill:n,fillOpacity:s,className:"recharts-cartesian-grid-bg"})};function F7(e,t){var n;if(Y.isValidElement(e))n=Y.cloneElement(e,t);else if(Me(e))n=e(t);else{var s=t.x1,a=t.y1,i=t.x2,o=t.y2,l=t.key,c=G5(t,Hge),d=Te(c,!1);d.offset;var m=G5(d,Kge);n=Y.createElement("line",ei({},m,{x1:s,y1:a,x2:i,y2:o,fill:"none",key:l}))}return n}function Zge(e){var t=e.x,n=e.width,s=e.horizontal,a=s===void 0?!0:s,i=e.horizontalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=Jt(Jt({},e),{},{x1:t,y1:l,x2:t+n,y2:l,key:"line-".concat(c),index:c});return F7(a,d)});return Y.createElement("g",{className:"recharts-cartesian-grid-horizontal"},o)}function eye(e){var t=e.y,n=e.height,s=e.vertical,a=s===void 0?!0:s,i=e.verticalPoints;if(!a||!i||!i.length)return null;var o=i.map(function(l,c){var d=Jt(Jt({},e),{},{x1:l,y1:t,x2:l,y2:t+n,key:"line-".concat(c),index:c});return F7(a,d)});return Y.createElement("g",{className:"recharts-cartesian-grid-vertical"},o)}function tye(e){var t=e.horizontalFill,n=e.fillOpacity,s=e.x,a=e.y,i=e.width,o=e.height,l=e.horizontalPoints,c=e.horizontal,d=c===void 0?!0:c;if(!d||!t||!t.length)return null;var m=l.map(function(h){return Math.round(h+a-a)}).sort(function(h,f){return h-f});a!==m[0]&&m.unshift(0);var u=m.map(function(h,f){var b=!m[f+1],g=b?a+o-h:m[f+1]-h;if(g<=0)return null;var x=f%t.length;return Y.createElement("rect",{key:"react-".concat(f),y:h,x:s,height:g,width:i,stroke:"none",fill:t[x],fillOpacity:n,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-horizontal"},u)}function rye(e){var t=e.vertical,n=t===void 0?!0:t,s=e.verticalFill,a=e.fillOpacity,i=e.x,o=e.y,l=e.width,c=e.height,d=e.verticalPoints;if(!n||!s||!s.length)return null;var m=d.map(function(h){return Math.round(h+i-i)}).sort(function(h,f){return h-f});i!==m[0]&&m.unshift(0);var u=m.map(function(h,f){var b=!m[f+1],g=b?i+l-h:m[f+1]-h;if(g<=0)return null;var x=f%s.length;return Y.createElement("rect",{key:"react-".concat(f),x:h,y:o,width:g,height:c,stroke:"none",fill:s[x],fillOpacity:a,className:"recharts-cartesian-grid-bg"})});return Y.createElement("g",{className:"recharts-cartesian-gridstripes-vertical"},u)}var nye=function(t,n){var s=t.xAxis,a=t.width,i=t.height,o=t.offset;return F8(Q2(Jt(Jt(Jt({},Vl.defaultProps),s),{},{ticks:us(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.left,o.left+o.width,n)},sye=function(t,n){var s=t.yAxis,a=t.width,i=t.height,o=t.offset;return F8(Q2(Jt(Jt(Jt({},Vl.defaultProps),s),{},{ticks:us(s,!0),viewBox:{x:0,y:0,width:a,height:i}})),o.top,o.top+o.height,n)},Wi={horizontal:!0,vertical:!0,stroke:"#ccc",fill:"none",verticalFill:[],horizontalFill:[]};function B7(e){var t,n,s,a,i,o,l=V2(),c=H2(),d=Vxe(),m=Jt(Jt({},e),{},{stroke:(t=e.stroke)!==null&&t!==void 0?t:Wi.stroke,fill:(n=e.fill)!==null&&n!==void 0?n:Wi.fill,horizontal:(s=e.horizontal)!==null&&s!==void 0?s:Wi.horizontal,horizontalFill:(a=e.horizontalFill)!==null&&a!==void 0?a:Wi.horizontalFill,vertical:(i=e.vertical)!==null&&i!==void 0?i:Wi.vertical,verticalFill:(o=e.verticalFill)!==null&&o!==void 0?o:Wi.verticalFill,x:ge(e.x)?e.x:d.left,y:ge(e.y)?e.y:d.top,width:ge(e.width)?e.width:d.width,height:ge(e.height)?e.height:d.height}),u=m.x,h=m.y,f=m.width,b=m.height,g=m.syncWithTicks,x=m.horizontalValues,p=m.verticalValues,y=qxe(),v=Uxe();if(!ge(f)||f<=0||!ge(b)||b<=0||!ge(u)||u!==+u||!ge(h)||h!==+h)return null;var N=m.verticalCoordinatesGenerator||nye,w=m.horizontalCoordinatesGenerator||sye,j=m.horizontalPoints,_=m.verticalPoints;if((!j||!j.length)&&Me(w)){var S=x&&x.length,T=w({yAxis:v?Jt(Jt({},v),{},{ticks:S?x:v.ticks}):void 0,width:l,height:c,offset:d},S?!0:g);En(Array.isArray(T),"horizontalCoordinatesGenerator should return Array but instead it returned [".concat(Ei(T),"]")),Array.isArray(T)&&(j=T)}if((!_||!_.length)&&Me(N)){var A=p&&p.length,E=N({xAxis:y?Jt(Jt({},y),{},{ticks:A?p:y.ticks}):void 0,width:l,height:c,offset:d},A?!0:g);En(Array.isArray(E),"verticalCoordinatesGenerator should return Array but instead it returned [".concat(Ei(E),"]")),Array.isArray(E)&&(_=E)}return Y.createElement("g",{className:"recharts-cartesian-grid"},Y.createElement(Jge,{fill:m.fill,fillOpacity:m.fillOpacity,x:m.x,y:m.y,width:m.width,height:m.height,ry:m.ry}),Y.createElement(Zge,ei({},m,{offset:d,horizontalPoints:j,xAxis:y,yAxis:v})),Y.createElement(eye,ei({},m,{offset:d,verticalPoints:_,xAxis:y,yAxis:v})),Y.createElement(tye,ei({},m,{horizontalPoints:j})),Y.createElement(rye,ei({},m,{verticalPoints:_})))}B7.displayName="CartesianGrid";function yl(e){"@babel/helpers - typeof";return yl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},yl(e)}function aye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function iye(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,U7(s.key),s)}}function oye(e,t,n){return t&&iye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function lye(e,t,n){return t=M0(t),cye(e,z7()?Reflect.construct(t,n||[],M0(e).constructor):t.apply(e,n))}function cye(e,t){if(t&&(yl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return dye(e)}function dye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function z7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(z7=function(){return!!e})()}function M0(e){return M0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},M0(e)}function uye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Kb(e,t)}function Kb(e,t){return Kb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Kb(e,t)}function q7(e,t,n){return t=U7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function U7(e){var t=mye(e,"string");return yl(t)=="symbol"?t:t+""}function mye(e,t){if(yl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(yl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Gb(){return Gb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Gb.apply(this,arguments)}function hye(e){var t=e.xAxisId,n=V2(),s=H2(),a=A7(t);return a==null?null:k.createElement(Vl,Gb({},a,{className:De("recharts-".concat(a.axisType," ").concat(a.axisType),a.className),viewBox:{x:0,y:0,width:n,height:s},ticksGenerator:function(o){return us(o,!0)}}))}var mf=function(e){function t(){return aye(this,t),lye(this,t,arguments)}return uye(t,e),oye(t,[{key:"render",value:function(){return k.createElement(hye,this.props)}}])}(k.Component);q7(mf,"displayName","XAxis");q7(mf,"defaultProps",{allowDecimals:!0,hide:!1,orientation:"bottom",width:0,height:30,mirror:!1,xAxisId:0,tickCount:5,type:"category",padding:{left:0,right:0},allowDataOverflow:!1,scale:"auto",reversed:!1,allowDuplicatedCategory:!0});function bl(e){"@babel/helpers - typeof";return bl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},bl(e)}function pye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fye(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,H7(s.key),s)}}function xye(e,t,n){return t&&fye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function gye(e,t,n){return t=L0(t),yye(e,W7()?Reflect.construct(t,n||[],L0(e).constructor):t.apply(e,n))}function yye(e,t){if(t&&(bl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return bye(e)}function bye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function W7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(W7=function(){return!!e})()}function L0(e){return L0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},L0(e)}function vye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Qb(e,t)}function Qb(e,t){return Qb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Qb(e,t)}function V7(e,t,n){return t=H7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function H7(e){var t=jye(e,"string");return bl(t)=="symbol"?t:t+""}function jye(e,t){if(bl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(bl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}function Yb(){return Yb=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},Yb.apply(this,arguments)}var wye=function(t){var n=t.yAxisId,s=V2(),a=H2(),i=P7(n);return i==null?null:k.createElement(Vl,Yb({},i,{className:De("recharts-".concat(i.axisType," ").concat(i.axisType),i.className),viewBox:{x:0,y:0,width:s,height:a},ticksGenerator:function(l){return us(l,!0)}}))},hf=function(e){function t(){return pye(this,t),gye(this,t,arguments)}return vye(t,e),xye(t,[{key:"render",value:function(){return k.createElement(wye,this.props)}}])}(k.Component);V7(hf,"displayName","YAxis");V7(hf,"defaultProps",{allowDuplicatedCategory:!0,allowDecimals:!0,hide:!1,orientation:"left",width:60,height:0,mirror:!1,yAxisId:0,tickCount:5,type:"number",padding:{top:0,bottom:0},allowDataOverflow:!1,scale:"auto",reversed:!1});function Q5(e){return Sye(e)||kye(e)||_ye(e)||Nye()}function Nye(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function _ye(e,t){if(e){if(typeof e=="string")return Xb(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return Xb(e,t)}}function kye(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function Sye(e){if(Array.isArray(e))return Xb(e)}function Xb(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}var Jb=function(t,n,s,a,i){var o=dn(t,G2),l=dn(t,cf),c=[].concat(Q5(o),Q5(l)),d=dn(t,uf),m="".concat(a,"Id"),u=a[0],h=n;if(c.length&&(h=c.reduce(function(g,x){if(x.props[m]===s&&Kn(x.props,"extendDomain")&&ge(x.props[u])){var p=x.props[u];return[Math.min(g[0],p),Math.max(g[1],p)]}return g},h)),d.length){var f="".concat(u,"1"),b="".concat(u,"2");h=d.reduce(function(g,x){if(x.props[m]===s&&Kn(x.props,"extendDomain")&&ge(x.props[f])&&ge(x.props[b])){var p=x.props[f],y=x.props[b];return[Math.min(g[0],p,y),Math.max(g[1],p,y)]}return g},h)}return i&&i.length&&(h=i.reduce(function(g,x){return ge(x)?[Math.min(g[0],x),Math.max(g[1],x)]:g},h)),h},K7={exports:{}};(function(e){var t=Object.prototype.hasOwnProperty,n="~";function s(){}Object.create&&(s.prototype=Object.create(null),new s().__proto__||(n=!1));function a(c,d,m){this.fn=c,this.context=d,this.once=m||!1}function i(c,d,m,u,h){if(typeof m!="function")throw new TypeError("The listener must be a function");var f=new a(m,u||c,h),b=n?n+d:d;return c._events[b]?c._events[b].fn?c._events[b]=[c._events[b],f]:c._events[b].push(f):(c._events[b]=f,c._eventsCount++),c}function o(c,d){--c._eventsCount===0?c._events=new s:delete c._events[d]}function l(){this._events=new s,this._eventsCount=0}l.prototype.eventNames=function(){var d=[],m,u;if(this._eventsCount===0)return d;for(u in m=this._events)t.call(m,u)&&d.push(n?u.slice(1):u);return Object.getOwnPropertySymbols?d.concat(Object.getOwnPropertySymbols(m)):d},l.prototype.listeners=function(d){var m=n?n+d:d,u=this._events[m];if(!u)return[];if(u.fn)return[u.fn];for(var h=0,f=u.length,b=new Array(f);h<f;h++)b[h]=u[h].fn;return b},l.prototype.listenerCount=function(d){var m=n?n+d:d,u=this._events[m];return u?u.fn?1:u.length:0},l.prototype.emit=function(d,m,u,h,f,b){var g=n?n+d:d;if(!this._events[g])return!1;var x=this._events[g],p=arguments.length,y,v;if(x.fn){switch(x.once&&this.removeListener(d,x.fn,void 0,!0),p){case 1:return x.fn.call(x.context),!0;case 2:return x.fn.call(x.context,m),!0;case 3:return x.fn.call(x.context,m,u),!0;case 4:return x.fn.call(x.context,m,u,h),!0;case 5:return x.fn.call(x.context,m,u,h,f),!0;case 6:return x.fn.call(x.context,m,u,h,f,b),!0}for(v=1,y=new Array(p-1);v<p;v++)y[v-1]=arguments[v];x.fn.apply(x.context,y)}else{var N=x.length,w;for(v=0;v<N;v++)switch(x[v].once&&this.removeListener(d,x[v].fn,void 0,!0),p){case 1:x[v].fn.call(x[v].context);break;case 2:x[v].fn.call(x[v].context,m);break;case 3:x[v].fn.call(x[v].context,m,u);break;case 4:x[v].fn.call(x[v].context,m,u,h);break;default:if(!y)for(w=1,y=new Array(p-1);w<p;w++)y[w-1]=arguments[w];x[v].fn.apply(x[v].context,y)}}return!0},l.prototype.on=function(d,m,u){return i(this,d,m,u,!1)},l.prototype.once=function(d,m,u){return i(this,d,m,u,!0)},l.prototype.removeListener=function(d,m,u,h){var f=n?n+d:d;if(!this._events[f])return this;if(!m)return o(this,f),this;var b=this._events[f];if(b.fn)b.fn===m&&(!h||b.once)&&(!u||b.context===u)&&o(this,f);else{for(var g=0,x=[],p=b.length;g<p;g++)(b[g].fn!==m||h&&!b[g].once||u&&b[g].context!==u)&&x.push(b[g]);x.length?this._events[f]=x.length===1?x[0]:x:o(this,f)}return this},l.prototype.removeAllListeners=function(d){var m;return d?(m=n?n+d:d,this._events[m]&&o(this,m)):(this._events=new s,this._eventsCount=0),this},l.prototype.off=l.prototype.removeListener,l.prototype.addListener=l.prototype.on,l.prefixed=n,l.EventEmitter=l,e.exports=l})(K7);var Cye=K7.exports;const Aye=Ke(Cye);var Bx=new Aye,zx="recharts.syncMouseEvents";function tu(e){"@babel/helpers - typeof";return tu=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},tu(e)}function Pye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Eye(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,G7(s.key),s)}}function Oye(e,t,n){return t&&Eye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function qx(e,t,n){return t=G7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function G7(e){var t=Tye(e,"string");return tu(t)=="symbol"?t:t+""}function Tye(e,t){if(tu(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(tu(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return String(e)}var Mye=function(){function e(){Pye(this,e),qx(this,"activeIndex",0),qx(this,"coordinateList",[]),qx(this,"layout","horizontal")}return Oye(e,[{key:"setDetails",value:function(n){var s,a=n.coordinateList,i=a===void 0?null:a,o=n.container,l=o===void 0?null:o,c=n.layout,d=c===void 0?null:c,m=n.offset,u=m===void 0?null:m,h=n.mouseHandlerCallback,f=h===void 0?null:h;this.coordinateList=(s=i??this.coordinateList)!==null&&s!==void 0?s:[],this.container=l??this.container,this.layout=d??this.layout,this.offset=u??this.offset,this.mouseHandlerCallback=f??this.mouseHandlerCallback,this.activeIndex=Math.min(Math.max(this.activeIndex,0),this.coordinateList.length-1)}},{key:"focus",value:function(){this.spoofMouse()}},{key:"keyboardEvent",value:function(n){if(this.coordinateList.length!==0)switch(n.key){case"ArrowRight":{if(this.layout!=="horizontal")return;this.activeIndex=Math.min(this.activeIndex+1,this.coordinateList.length-1),this.spoofMouse();break}case"ArrowLeft":{if(this.layout!=="horizontal")return;this.activeIndex=Math.max(this.activeIndex-1,0),this.spoofMouse();break}}}},{key:"setIndex",value:function(n){this.activeIndex=n}},{key:"spoofMouse",value:function(){var n,s;if(this.layout==="horizontal"&&this.coordinateList.length!==0){var a=this.container.getBoundingClientRect(),i=a.x,o=a.y,l=a.height,c=this.coordinateList[this.activeIndex].coordinate,d=((n=window)===null||n===void 0?void 0:n.scrollX)||0,m=((s=window)===null||s===void 0?void 0:s.scrollY)||0,u=i+c+d,h=o+this.offset.top+l/2+m;this.mouseHandlerCallback({pageX:u,pageY:h})}}}])}();function Lye(e,t,n){if(n==="number"&&t===!0&&Array.isArray(e)){var s=e==null?void 0:e[0],a=e==null?void 0:e[1];if(s&&a&&ge(s)&&ge(a))return!0}return!1}function $ye(e,t,n,s){var a=s/2;return{stroke:"none",fill:"#ccc",x:e==="horizontal"?t.x-a:n.left+.5,y:e==="horizontal"?n.top+.5:t.y-a,width:e==="horizontal"?s:n.width-1,height:e==="horizontal"?n.height-1:s}}function Q7(e){var t=e.cx,n=e.cy,s=e.radius,a=e.startAngle,i=e.endAngle,o=st(t,n,s,a),l=st(t,n,s,i);return{points:[o,l],cx:t,cy:n,radius:s,startAngle:a,endAngle:i}}function Rye(e,t,n){var s,a,i,o;if(e==="horizontal")s=t.x,i=s,a=n.top,o=n.top+n.height;else if(e==="vertical")a=t.y,o=a,s=n.left,i=n.left+n.width;else if(t.cx!=null&&t.cy!=null)if(e==="centric"){var l=t.cx,c=t.cy,d=t.innerRadius,m=t.outerRadius,u=t.angle,h=st(l,c,d,u),f=st(l,c,m,u);s=h.x,a=h.y,i=f.x,o=f.y}else return Q7(t);return[{x:s,y:a},{x:i,y:o}]}function ru(e){"@babel/helpers - typeof";return ru=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},ru(e)}function Y5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function wm(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Y5(Object(n),!0).forEach(function(s){Iye(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Y5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Iye(e,t,n){return t=Dye(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Dye(e){var t=Fye(e,"string");return ru(t)=="symbol"?t:t+""}function Fye(e,t){if(ru(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(ru(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}function Bye(e){var t,n,s=e.element,a=e.tooltipEventType,i=e.isActive,o=e.activeCoordinate,l=e.activePayload,c=e.offset,d=e.activeTooltipIndex,m=e.tooltipAxisBandSize,u=e.layout,h=e.chartName,f=(t=s.props.cursor)!==null&&t!==void 0?t:(n=s.type.defaultProps)===null||n===void 0?void 0:n.cursor;if(!s||!f||!i||!o||h!=="ScatterChart"&&a!=="axis")return null;var b,g=jb;if(h==="ScatterChart")b=o,g=g0e;else if(h==="BarChart")b=$ye(u,o,c,m),g=B2;else if(u==="radial"){var x=Q7(o),p=x.cx,y=x.cy,v=x.radius,N=x.startAngle,w=x.endAngle;b={cx:p,cy:y,startAngle:N,endAngle:w,innerRadius:v,outerRadius:v},g=Y8}else b={points:Rye(u,o,c)},g=jb;var j=wm(wm(wm(wm({stroke:"#ccc",pointerEvents:"none"},c),b),Te(f,!1)),{},{payload:l,payloadIndex:d,className:De("recharts-tooltip-cursor",f.className)});return k.isValidElement(f)?k.cloneElement(f,j):k.createElement(g,j)}var zye=["item"],qye=["children","className","width","height","style","compact","title","desc"];function vl(e){"@babel/helpers - typeof";return vl=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(t){return typeof t}:function(t){return t&&typeof Symbol=="function"&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},vl(e)}function lo(){return lo=Object.assign?Object.assign.bind():function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var s in n)Object.prototype.hasOwnProperty.call(n,s)&&(e[s]=n[s])}return e},lo.apply(this,arguments)}function X5(e,t){return Vye(e)||Wye(e,t)||X7(e,t)||Uye()}function Uye(){throw new TypeError(`Invalid attempt to destructure non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function Wye(e,t){var n=e==null?null:typeof Symbol<"u"&&e[Symbol.iterator]||e["@@iterator"];if(n!=null){var s,a,i,o,l=[],c=!0,d=!1;try{if(i=(n=n.call(e)).next,t!==0)for(;!(c=(s=i.call(n)).done)&&(l.push(s.value),l.length!==t);c=!0);}catch(m){d=!0,a=m}finally{try{if(!c&&n.return!=null&&(o=n.return(),Object(o)!==o))return}finally{if(d)throw a}}return l}}function Vye(e){if(Array.isArray(e))return e}function J5(e,t){if(e==null)return{};var n=Hye(e,t),s,a;if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(a=0;a<i.length;a++)s=i[a],!(t.indexOf(s)>=0)&&Object.prototype.propertyIsEnumerable.call(e,s)&&(n[s]=e[s])}return n}function Hye(e,t){if(e==null)return{};var n={};for(var s in e)if(Object.prototype.hasOwnProperty.call(e,s)){if(t.indexOf(s)>=0)continue;n[s]=e[s]}return n}function Kye(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Gye(e,t){for(var n=0;n<t.length;n++){var s=t[n];s.enumerable=s.enumerable||!1,s.configurable=!0,"value"in s&&(s.writable=!0),Object.defineProperty(e,J7(s.key),s)}}function Qye(e,t,n){return t&&Gye(e.prototype,t),Object.defineProperty(e,"prototype",{writable:!1}),e}function Yye(e,t,n){return t=$0(t),Xye(e,Y7()?Reflect.construct(t,n||[],$0(e).constructor):t.apply(e,n))}function Xye(e,t){if(t&&(vl(t)==="object"||typeof t=="function"))return t;if(t!==void 0)throw new TypeError("Derived constructors may only return object or undefined");return Jye(e)}function Jye(e){if(e===void 0)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}function Y7(){try{var e=!Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],function(){}))}catch{}return(Y7=function(){return!!e})()}function $0(e){return $0=Object.setPrototypeOf?Object.getPrototypeOf.bind():function(n){return n.__proto__||Object.getPrototypeOf(n)},$0(e)}function Zye(e,t){if(typeof t!="function"&&t!==null)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Zb(e,t)}function Zb(e,t){return Zb=Object.setPrototypeOf?Object.setPrototypeOf.bind():function(s,a){return s.__proto__=a,s},Zb(e,t)}function jl(e){return rbe(e)||tbe(e)||X7(e)||ebe()}function ebe(){throw new TypeError(`Invalid attempt to spread non-iterable instance.
In order to be iterable, non-array objects must have a [Symbol.iterator]() method.`)}function X7(e,t){if(e){if(typeof e=="string")return ev(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);if(n==="Object"&&e.constructor&&(n=e.constructor.name),n==="Map"||n==="Set")return Array.from(e);if(n==="Arguments"||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ev(e,t)}}function tbe(e){if(typeof Symbol<"u"&&e[Symbol.iterator]!=null||e["@@iterator"]!=null)return Array.from(e)}function rbe(e){if(Array.isArray(e))return ev(e)}function ev(e,t){(t==null||t>e.length)&&(t=e.length);for(var n=0,s=new Array(t);n<t;n++)s[n]=e[n];return s}function Z5(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(e);t&&(s=s.filter(function(a){return Object.getOwnPropertyDescriptor(e,a).enumerable})),n.push.apply(n,s)}return n}function ue(e){for(var t=1;t<arguments.length;t++){var n=arguments[t]!=null?arguments[t]:{};t%2?Z5(Object(n),!0).forEach(function(s){Oe(e,s,n[s])}):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Z5(Object(n)).forEach(function(s){Object.defineProperty(e,s,Object.getOwnPropertyDescriptor(n,s))})}return e}function Oe(e,t,n){return t=J7(t),t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function J7(e){var t=nbe(e,"string");return vl(t)=="symbol"?t:t+""}function nbe(e,t){if(vl(e)!="object"||!e)return e;var n=e[Symbol.toPrimitive];if(n!==void 0){var s=n.call(e,t);if(vl(s)!="object")return s;throw new TypeError("@@toPrimitive must return a primitive value.")}return(t==="string"?String:Number)(e)}var sbe={xAxis:["bottom","top"],yAxis:["left","right"]},abe={width:"100%",height:"100%"},Z7={x:0,y:0};function Nm(e){return e}var ibe=function(t,n){return n==="horizontal"?t.x:n==="vertical"?t.y:n==="centric"?t.angle:t.radius},obe=function(t,n,s,a){var i=n.find(function(m){return m&&m.index===s});if(i){if(t==="horizontal")return{x:i.coordinate,y:a.y};if(t==="vertical")return{x:a.x,y:i.coordinate};if(t==="centric"){var o=i.coordinate,l=a.radius;return ue(ue(ue({},a),st(a.cx,a.cy,l,o)),{},{angle:o,radius:l})}var c=i.coordinate,d=a.angle;return ue(ue(ue({},a),st(a.cx,a.cy,c,d)),{},{angle:d,radius:c})}return Z7},pf=function(t,n){var s=n.graphicalItems,a=n.dataStartIndex,i=n.dataEndIndex,o=(s??[]).reduce(function(l,c){var d=c.props.data;return d&&d.length?[].concat(jl(l),jl(d)):l},[]);return o.length>0?o:t&&t.length&&ge(a)&&ge(i)?t.slice(a,i+1):[]};function eO(e){return e==="number"?[0,"auto"]:void 0}var tv=function(t,n,s,a){var i=t.graphicalItems,o=t.tooltipAxis,l=pf(n,t);return s<0||!i||!i.length||s>=l.length?null:i.reduce(function(c,d){var m,u=(m=d.props.data)!==null&&m!==void 0?m:n;u&&t.dataStartIndex+t.dataEndIndex!==0&&t.dataEndIndex-t.dataStartIndex>=s&&(u=u.slice(t.dataStartIndex,t.dataEndIndex+1));var h;if(o.dataKey&&!o.allowDuplicatedCategory){var f=u===void 0?l:u;h=Py(f,o.dataKey,a)}else h=u&&u[s]||l[s];return h?[].concat(jl(c),[W8(d,h)]):c},[])},e3=function(t,n,s,a){var i=a||{x:t.chartX,y:t.chartY},o=ibe(i,s),l=t.orderedTooltipTicks,c=t.tooltipAxis,d=t.tooltipTicks,m=qde(o,l,d,c);if(m>=0&&d){var u=d[m]&&d[m].value,h=tv(t,n,m,u),f=obe(s,l,m,i);return{activeTooltipIndex:m,activeLabel:u,activePayload:h,activeCoordinate:f}}return null},lbe=function(t,n){var s=n.axes,a=n.graphicalItems,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,m=t.layout,u=t.children,h=t.stackOffset,f=D8(m,i);return s.reduce(function(b,g){var x,p=g.type.defaultProps!==void 0?ue(ue({},g.type.defaultProps),g.props):g.props,y=p.type,v=p.dataKey,N=p.allowDataOverflow,w=p.allowDuplicatedCategory,j=p.scale,_=p.ticks,S=p.includeHidden,T=p[o];if(b[T])return b;var A=pf(t.data,{graphicalItems:a.filter(function(K){var ne,G=o in K.props?K.props[o]:(ne=K.type.defaultProps)===null||ne===void 0?void 0:ne[o];return G===T}),dataStartIndex:c,dataEndIndex:d}),E=A.length,R,I,O;Lye(p.domain,N,y)&&(R=xb(p.domain,null,N),f&&(y==="number"||j!=="auto")&&(O=Uc(A,v,"category")));var L=eO(y);if(!R||R.length===0){var F,M=(F=p.domain)!==null&&F!==void 0?F:L;if(v){if(R=Uc(A,v,y),y==="category"&&f){var D=MQ(R);w&&D?(I=R,R=N0(0,E)):w||(R=Ak(M,R,g).reduce(function(K,ne){return K.indexOf(ne)>=0?K:[].concat(jl(K),[ne])},[]))}else if(y==="category")w?R=R.filter(function(K){return K!==""&&!Fe(K)}):R=Ak(M,R,g).reduce(function(K,ne){return K.indexOf(ne)>=0||ne===""||Fe(ne)?K:[].concat(jl(K),[ne])},[]);else if(y==="number"){var W=Kde(A,a.filter(function(K){var ne,G,oe=o in K.props?K.props[o]:(ne=K.type.defaultProps)===null||ne===void 0?void 0:ne[o],H="hide"in K.props?K.props.hide:(G=K.type.defaultProps)===null||G===void 0?void 0:G.hide;return oe===T&&(S||!H)}),v,i,m);W&&(R=W)}f&&(y==="number"||j!=="auto")&&(O=Uc(A,v,"category"))}else f?R=N0(0,E):l&&l[T]&&l[T].hasStack&&y==="number"?R=h==="expand"?[0,1]:U8(l[T].stackGroups,c,d):R=I8(A,a.filter(function(K){var ne=o in K.props?K.props[o]:K.type.defaultProps[o],G="hide"in K.props?K.props.hide:K.type.defaultProps.hide;return ne===T&&(S||!G)}),y,m,!0);if(y==="number")R=Jb(u,R,T,i,_),M&&(R=xb(M,R,N));else if(y==="category"&&M){var P=M,V=R.every(function(K){return P.indexOf(K)>=0});V&&(R=P)}}return ue(ue({},b),{},Oe({},T,ue(ue({},p),{},{axisType:i,domain:R,categoricalDomain:O,duplicateDomain:I,originalDomain:(x=p.domain)!==null&&x!==void 0?x:L,isCategorical:f,layout:m})))},{})},cbe=function(t,n){var s=n.graphicalItems,a=n.Axis,i=n.axisType,o=n.axisIdKey,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,m=t.layout,u=t.children,h=pf(t.data,{graphicalItems:s,dataStartIndex:c,dataEndIndex:d}),f=h.length,b=D8(m,i),g=-1;return s.reduce(function(x,p){var y=p.type.defaultProps!==void 0?ue(ue({},p.type.defaultProps),p.props):p.props,v=y[o],N=eO("number");if(!x[v]){g++;var w;return b?w=N0(0,f):l&&l[v]&&l[v].hasStack?(w=U8(l[v].stackGroups,c,d),w=Jb(u,w,v,i)):(w=xb(N,I8(h,s.filter(function(j){var _,S,T=o in j.props?j.props[o]:(_=j.type.defaultProps)===null||_===void 0?void 0:_[o],A="hide"in j.props?j.props.hide:(S=j.type.defaultProps)===null||S===void 0?void 0:S.hide;return T===v&&!A}),"number",m),a.defaultProps.allowDataOverflow),w=Jb(u,w,v,i)),ue(ue({},x),{},Oe({},v,ue(ue({axisType:i},a.defaultProps),{},{hide:!0,orientation:Ur(sbe,"".concat(i,".").concat(g%2),null),domain:w,originalDomain:N,isCategorical:b,layout:m})))}return x},{})},dbe=function(t,n){var s=n.axisType,a=s===void 0?"xAxis":s,i=n.AxisComp,o=n.graphicalItems,l=n.stackGroups,c=n.dataStartIndex,d=n.dataEndIndex,m=t.children,u="".concat(a,"Id"),h=dn(m,i),f={};return h&&h.length?f=lbe(t,{axes:h,graphicalItems:o,axisType:a,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d}):o&&o.length&&(f=cbe(t,{Axis:i,graphicalItems:o,axisType:a,axisIdKey:u,stackGroups:l,dataStartIndex:c,dataEndIndex:d})),f},ube=function(t){var n=qs(t),s=us(n,!1,!0);return{tooltipTicks:s,orderedTooltipTicks:h2(s,function(a){return a.coordinate}),tooltipAxis:n,tooltipAxisBandSize:d0(n,s)}},t3=function(t){var n=t.children,s=t.defaultShowTooltip,a=$r(n,ml),i=0,o=0;return t.data&&t.data.length!==0&&(o=t.data.length-1),a&&a.props&&(a.props.startIndex>=0&&(i=a.props.startIndex),a.props.endIndex>=0&&(o=a.props.endIndex)),{chartX:0,chartY:0,dataStartIndex:i,dataEndIndex:o,activeTooltipIndex:-1,isTooltipActive:!!s}},mbe=function(t){return!t||!t.length?!1:t.some(function(n){var s=ps(n&&n.type);return s&&s.indexOf("Bar")>=0})},r3=function(t){return t==="horizontal"?{numericAxisName:"yAxis",cateAxisName:"xAxis"}:t==="vertical"?{numericAxisName:"xAxis",cateAxisName:"yAxis"}:t==="centric"?{numericAxisName:"radiusAxis",cateAxisName:"angleAxis"}:{numericAxisName:"angleAxis",cateAxisName:"radiusAxis"}},hbe=function(t,n){var s=t.props,a=t.graphicalItems,i=t.xAxisMap,o=i===void 0?{}:i,l=t.yAxisMap,c=l===void 0?{}:l,d=s.width,m=s.height,u=s.children,h=s.margin||{},f=$r(u,ml),b=$r(u,bo),g=Object.keys(c).reduce(function(w,j){var _=c[j],S=_.orientation;return!_.mirror&&!_.hide?ue(ue({},w),{},Oe({},S,w[S]+_.width)):w},{left:h.left||0,right:h.right||0}),x=Object.keys(o).reduce(function(w,j){var _=o[j],S=_.orientation;return!_.mirror&&!_.hide?ue(ue({},w),{},Oe({},S,Ur(w,"".concat(S))+_.height)):w},{top:h.top||0,bottom:h.bottom||0}),p=ue(ue({},x),g),y=p.bottom;f&&(p.bottom+=f.props.height||ml.defaultProps.height),b&&n&&(p=Vde(p,a,s,n));var v=d-p.left-p.right,N=m-p.top-p.bottom;return ue(ue({brushBottom:y},p),{},{width:Math.max(v,0),height:Math.max(N,0)})},pbe=function(t,n){if(n==="xAxis")return t[n].width;if(n==="yAxis")return t[n].height},tO=function(t){var n=t.chartName,s=t.GraphicalChild,a=t.defaultTooltipEventType,i=a===void 0?"axis":a,o=t.validateTooltipEventTypes,l=o===void 0?["axis"]:o,c=t.axisComponents,d=t.legendContent,m=t.formatAxisMap,u=t.defaultProps,h=function(p,y){var v=y.graphicalItems,N=y.stackGroups,w=y.offset,j=y.updateId,_=y.dataStartIndex,S=y.dataEndIndex,T=p.barSize,A=p.layout,E=p.barGap,R=p.barCategoryGap,I=p.maxBarSize,O=r3(A),L=O.numericAxisName,F=O.cateAxisName,M=mbe(v),D=[];return v.forEach(function(W,P){var V=pf(p.data,{graphicalItems:[W],dataStartIndex:_,dataEndIndex:S}),K=W.type.defaultProps!==void 0?ue(ue({},W.type.defaultProps),W.props):W.props,ne=K.dataKey,G=K.maxBarSize,oe=K["".concat(L,"Id")],H=K["".concat(F,"Id")],ee={},J=c.reduce(function(re,Q){var me=y["".concat(Q.axisType,"Map")],Pe=K["".concat(Q.axisType,"Id")];me&&me[Pe]||Q.axisType==="zAxis"||va();var at=me[Pe];return ue(ue({},re),{},Oe(Oe({},Q.axisType,at),"".concat(Q.axisType,"Ticks"),us(at)))},ee),X=J[F],se=J["".concat(F,"Ticks")],$=N&&N[oe]&&N[oe].hasStack&&rue(W,N[oe].stackGroups),C=ps(W.type).indexOf("Bar")>=0,U=d0(X,se),q=[],de=M&&Ude({barSize:T,stackGroups:N,totalSize:pbe(J,F)});if(C){var he,le,be=Fe(G)?I:G,z=(he=(le=d0(X,se,!0))!==null&&le!==void 0?le:be)!==null&&he!==void 0?he:0;q=Wde({barGap:E,barCategoryGap:R,bandSize:z!==U?z:U,sizeList:de[H],maxBarSize:be}),z!==U&&(q=q.map(function(re){return ue(ue({},re),{},{position:ue(ue({},re.position),{},{offset:re.position.offset-z/2})})}))}var B=W&&W.type&&W.type.getComposedData;B&&D.push({props:ue(ue({},B(ue(ue({},J),{},{displayedData:V,props:p,dataKey:ne,item:W,bandSize:U,barPosition:q,offset:w,stackedData:$,layout:A,dataStartIndex:_,dataEndIndex:S}))),{},Oe(Oe(Oe({key:W.key||"item-".concat(P)},L,J[L]),F,J[F]),"animationId",j)),childIndex:VQ(W,p.children),item:W})}),D},f=function(p,y){var v=p.props,N=p.dataStartIndex,w=p.dataEndIndex,j=p.updateId;if(!j_({props:v}))return null;var _=v.children,S=v.layout,T=v.stackOffset,A=v.data,E=v.reverseStackOrder,R=r3(S),I=R.numericAxisName,O=R.cateAxisName,L=dn(_,s),F=eue(A,L,"".concat(I,"Id"),"".concat(O,"Id"),T,E),M=c.reduce(function(K,ne){var G="".concat(ne.axisType,"Map");return ue(ue({},K),{},Oe({},G,dbe(v,ue(ue({},ne),{},{graphicalItems:L,stackGroups:ne.axisType===I&&F,dataStartIndex:N,dataEndIndex:w}))))},{}),D=hbe(ue(ue({},M),{},{props:v,graphicalItems:L}),y==null?void 0:y.legendBBox);Object.keys(M).forEach(function(K){M[K]=m(v,M[K],D,K.replace("Map",""),n)});var W=M["".concat(O,"Map")],P=ube(W),V=h(v,ue(ue({},M),{},{dataStartIndex:N,dataEndIndex:w,updateId:j,graphicalItems:L,stackGroups:F,offset:D}));return ue(ue({formattedGraphicalItems:V,graphicalItems:L,offset:D,stackGroups:F},P),M)},b=function(x){function p(y){var v,N,w;return Kye(this,p),w=Yye(this,p,[y]),Oe(w,"eventEmitterSymbol",Symbol("rechartsEventEmitter")),Oe(w,"accessibilityManager",new Mye),Oe(w,"handleLegendBBoxUpdate",function(j){if(j){var _=w.state,S=_.dataStartIndex,T=_.dataEndIndex,A=_.updateId;w.setState(ue({legendBBox:j},f({props:w.props,dataStartIndex:S,dataEndIndex:T,updateId:A},ue(ue({},w.state),{},{legendBBox:j}))))}}),Oe(w,"handleReceiveSyncEvent",function(j,_,S){if(w.props.syncId===j){if(S===w.eventEmitterSymbol&&typeof w.props.syncMethod!="function")return;w.applySyncEvent(_)}}),Oe(w,"handleBrushChange",function(j){var _=j.startIndex,S=j.endIndex;if(_!==w.state.dataStartIndex||S!==w.state.dataEndIndex){var T=w.state.updateId;w.setState(function(){return ue({dataStartIndex:_,dataEndIndex:S},f({props:w.props,dataStartIndex:_,dataEndIndex:S,updateId:T},w.state))}),w.triggerSyncEvent({dataStartIndex:_,dataEndIndex:S})}}),Oe(w,"handleMouseEnter",function(j){var _=w.getMouseInfo(j);if(_){var S=ue(ue({},_),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var T=w.props.onMouseEnter;Me(T)&&T(S,j)}}),Oe(w,"triggeredAfterMouseMove",function(j){var _=w.getMouseInfo(j),S=_?ue(ue({},_),{},{isTooltipActive:!0}):{isTooltipActive:!1};w.setState(S),w.triggerSyncEvent(S);var T=w.props.onMouseMove;Me(T)&&T(S,j)}),Oe(w,"handleItemMouseEnter",function(j){w.setState(function(){return{isTooltipActive:!0,activeItem:j,activePayload:j.tooltipPayload,activeCoordinate:j.tooltipPosition||{x:j.cx,y:j.cy}}})}),Oe(w,"handleItemMouseLeave",function(){w.setState(function(){return{isTooltipActive:!1}})}),Oe(w,"handleMouseMove",function(j){j.persist(),w.throttleTriggeredAfterMouseMove(j)}),Oe(w,"handleMouseLeave",function(j){w.throttleTriggeredAfterMouseMove.cancel();var _={isTooltipActive:!1};w.setState(_),w.triggerSyncEvent(_);var S=w.props.onMouseLeave;Me(S)&&S(_,j)}),Oe(w,"handleOuterEvent",function(j){var _=WQ(j),S=Ur(w.props,"".concat(_));if(_&&Me(S)){var T,A;/.*touch.*/i.test(_)?A=w.getMouseInfo(j.changedTouches[0]):A=w.getMouseInfo(j),S((T=A)!==null&&T!==void 0?T:{},j)}}),Oe(w,"handleClick",function(j){var _=w.getMouseInfo(j);if(_){var S=ue(ue({},_),{},{isTooltipActive:!0});w.setState(S),w.triggerSyncEvent(S);var T=w.props.onClick;Me(T)&&T(S,j)}}),Oe(w,"handleMouseDown",function(j){var _=w.props.onMouseDown;if(Me(_)){var S=w.getMouseInfo(j);_(S,j)}}),Oe(w,"handleMouseUp",function(j){var _=w.props.onMouseUp;if(Me(_)){var S=w.getMouseInfo(j);_(S,j)}}),Oe(w,"handleTouchMove",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.throttleTriggeredAfterMouseMove(j.changedTouches[0])}),Oe(w,"handleTouchStart",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseDown(j.changedTouches[0])}),Oe(w,"handleTouchEnd",function(j){j.changedTouches!=null&&j.changedTouches.length>0&&w.handleMouseUp(j.changedTouches[0])}),Oe(w,"handleDoubleClick",function(j){var _=w.props.onDoubleClick;if(Me(_)){var S=w.getMouseInfo(j);_(S,j)}}),Oe(w,"handleContextMenu",function(j){var _=w.props.onContextMenu;if(Me(_)){var S=w.getMouseInfo(j);_(S,j)}}),Oe(w,"triggerSyncEvent",function(j){w.props.syncId!==void 0&&Bx.emit(zx,w.props.syncId,j,w.eventEmitterSymbol)}),Oe(w,"applySyncEvent",function(j){var _=w.props,S=_.layout,T=_.syncMethod,A=w.state.updateId,E=j.dataStartIndex,R=j.dataEndIndex;if(j.dataStartIndex!==void 0||j.dataEndIndex!==void 0)w.setState(ue({dataStartIndex:E,dataEndIndex:R},f({props:w.props,dataStartIndex:E,dataEndIndex:R,updateId:A},w.state)));else if(j.activeTooltipIndex!==void 0){var I=j.chartX,O=j.chartY,L=j.activeTooltipIndex,F=w.state,M=F.offset,D=F.tooltipTicks;if(!M)return;if(typeof T=="function")L=T(D,j);else if(T==="value"){L=-1;for(var W=0;W<D.length;W++)if(D[W].value===j.activeLabel){L=W;break}}var P=ue(ue({},M),{},{x:M.left,y:M.top}),V=Math.min(I,P.x+P.width),K=Math.min(O,P.y+P.height),ne=D[L]&&D[L].value,G=tv(w.state,w.props.data,L),oe=D[L]?{x:S==="horizontal"?D[L].coordinate:V,y:S==="horizontal"?K:D[L].coordinate}:Z7;w.setState(ue(ue({},j),{},{activeLabel:ne,activeCoordinate:oe,activePayload:G,activeTooltipIndex:L}))}else w.setState(j)}),Oe(w,"renderCursor",function(j){var _,S=w.state,T=S.isTooltipActive,A=S.activeCoordinate,E=S.activePayload,R=S.offset,I=S.activeTooltipIndex,O=S.tooltipAxisBandSize,L=w.getTooltipEventType(),F=(_=j.props.active)!==null&&_!==void 0?_:T,M=w.props.layout,D=j.key||"_recharts-cursor";return Y.createElement(Bye,{key:D,activeCoordinate:A,activePayload:E,activeTooltipIndex:I,chartName:n,element:j,isActive:F,layout:M,offset:R,tooltipAxisBandSize:O,tooltipEventType:L})}),Oe(w,"renderPolarAxis",function(j,_,S){var T=Ur(j,"type.axisType"),A=Ur(w.state,"".concat(T,"Map")),E=j.type.defaultProps,R=E!==void 0?ue(ue({},E),j.props):j.props,I=A&&A[R["".concat(T,"Id")]];return k.cloneElement(j,ue(ue({},I),{},{className:De(T,I.className),key:j.key||"".concat(_,"-").concat(S),ticks:us(I,!0)}))}),Oe(w,"renderPolarGrid",function(j){var _=j.props,S=_.radialLines,T=_.polarAngles,A=_.polarRadius,E=w.state,R=E.radiusAxisMap,I=E.angleAxisMap,O=qs(R),L=qs(I),F=L.cx,M=L.cy,D=L.innerRadius,W=L.outerRadius;return k.cloneElement(j,{polarAngles:Array.isArray(T)?T:us(L,!0).map(function(P){return P.coordinate}),polarRadius:Array.isArray(A)?A:us(O,!0).map(function(P){return P.coordinate}),cx:F,cy:M,innerRadius:D,outerRadius:W,key:j.key||"polar-grid",radialLines:S})}),Oe(w,"renderLegend",function(){var j=w.state.formattedGraphicalItems,_=w.props,S=_.children,T=_.width,A=_.height,E=w.props.margin||{},R=T-(E.left||0)-(E.right||0),I=$8({children:S,formattedGraphicalItems:j,legendWidth:R,legendContent:d});if(!I)return null;var O=I.item,L=J5(I,zye);return k.cloneElement(O,ue(ue({},L),{},{chartWidth:T,chartHeight:A,margin:E,onBBoxUpdate:w.handleLegendBBoxUpdate}))}),Oe(w,"renderTooltip",function(){var j,_=w.props,S=_.children,T=_.accessibilityLayer,A=$r(S,Nn);if(!A)return null;var E=w.state,R=E.isTooltipActive,I=E.activeCoordinate,O=E.activePayload,L=E.activeLabel,F=E.offset,M=(j=A.props.active)!==null&&j!==void 0?j:R;return k.cloneElement(A,{viewBox:ue(ue({},F),{},{x:F.left,y:F.top}),active:M,label:L,payload:M?O:[],coordinate:I,accessibilityLayer:T})}),Oe(w,"renderBrush",function(j){var _=w.props,S=_.margin,T=_.data,A=w.state,E=A.offset,R=A.dataStartIndex,I=A.dataEndIndex,O=A.updateId;return k.cloneElement(j,{key:j.key||"_recharts-brush",onChange:ym(w.handleBrushChange,j.props.onChange),data:T,x:ge(j.props.x)?j.props.x:E.left,y:ge(j.props.y)?j.props.y:E.top+E.height+E.brushBottom-(S.bottom||0),width:ge(j.props.width)?j.props.width:E.width,startIndex:R,endIndex:I,updateId:"brush-".concat(O)})}),Oe(w,"renderReferenceElement",function(j,_,S){if(!j)return null;var T=w,A=T.clipPathId,E=w.state,R=E.xAxisMap,I=E.yAxisMap,O=E.offset,L=j.type.defaultProps||{},F=j.props,M=F.xAxisId,D=M===void 0?L.xAxisId:M,W=F.yAxisId,P=W===void 0?L.yAxisId:W;return k.cloneElement(j,{key:j.key||"".concat(_,"-").concat(S),xAxis:R[D],yAxis:I[P],viewBox:{x:O.left,y:O.top,width:O.width,height:O.height},clipPathId:A})}),Oe(w,"renderActivePoints",function(j){var _=j.item,S=j.activePoint,T=j.basePoint,A=j.childIndex,E=j.isRange,R=[],I=_.props.key,O=_.item.type.defaultProps!==void 0?ue(ue({},_.item.type.defaultProps),_.item.props):_.item.props,L=O.activeDot,F=O.dataKey,M=ue(ue({index:A,dataKey:F,cx:S.x,cy:S.y,r:4,fill:F2(_.item),strokeWidth:2,stroke:"#fff",payload:S.payload,value:S.value},Te(L,!1)),Ih(L));return R.push(p.renderActiveDot(L,M,"".concat(I,"-activePoint-").concat(A))),T?R.push(p.renderActiveDot(L,ue(ue({},M),{},{cx:T.x,cy:T.y}),"".concat(I,"-basePoint-").concat(A))):E&&R.push(null),R}),Oe(w,"renderGraphicChild",function(j,_,S){var T=w.filterFormatItem(j,_,S);if(!T)return null;var A=w.getTooltipEventType(),E=w.state,R=E.isTooltipActive,I=E.tooltipAxis,O=E.activeTooltipIndex,L=E.activeLabel,F=w.props.children,M=$r(F,Nn),D=T.props,W=D.points,P=D.isRange,V=D.baseLine,K=T.item.type.defaultProps!==void 0?ue(ue({},T.item.type.defaultProps),T.item.props):T.item.props,ne=K.activeDot,G=K.hide,oe=K.activeBar,H=K.activeShape,ee=!!(!G&&R&&M&&(ne||oe||H)),J={};A!=="axis"&&M&&M.props.trigger==="click"?J={onClick:ym(w.handleItemMouseEnter,j.props.onClick)}:A!=="axis"&&(J={onMouseLeave:ym(w.handleItemMouseLeave,j.props.onMouseLeave),onMouseEnter:ym(w.handleItemMouseEnter,j.props.onMouseEnter)});var X=k.cloneElement(j,ue(ue({},T.props),J));function se(Q){return typeof I.dataKey=="function"?I.dataKey(Q.payload):null}if(ee)if(O>=0){var $,C;if(I.dataKey&&!I.allowDuplicatedCategory){var U=typeof I.dataKey=="function"?se:"payload.".concat(I.dataKey.toString());$=Py(W,U,L),C=P&&V&&Py(V,U,L)}else $=W==null?void 0:W[O],C=P&&V&&V[O];if(H||oe){var q=j.props.activeIndex!==void 0?j.props.activeIndex:O;return[k.cloneElement(j,ue(ue(ue({},T.props),J),{},{activeIndex:q})),null,null]}if(!Fe($))return[X].concat(jl(w.renderActivePoints({item:T,activePoint:$,basePoint:C,childIndex:O,isRange:P})))}else{var de,he=(de=w.getItemByXY(w.state.activeCoordinate))!==null&&de!==void 0?de:{graphicalItem:X},le=he.graphicalItem,be=le.item,z=be===void 0?j:be,B=le.childIndex,re=ue(ue(ue({},T.props),J),{},{activeIndex:B});return[k.cloneElement(z,re),null,null]}return P?[X,null,null]:[X,null]}),Oe(w,"renderCustomized",function(j,_,S){return k.cloneElement(j,ue(ue({key:"recharts-customized-".concat(S)},w.props),w.state))}),Oe(w,"renderMap",{CartesianGrid:{handler:Nm,once:!0},ReferenceArea:{handler:w.renderReferenceElement},ReferenceLine:{handler:Nm},ReferenceDot:{handler:w.renderReferenceElement},XAxis:{handler:Nm},YAxis:{handler:Nm},Brush:{handler:w.renderBrush,once:!0},Bar:{handler:w.renderGraphicChild},Line:{handler:w.renderGraphicChild},Area:{handler:w.renderGraphicChild},Radar:{handler:w.renderGraphicChild},RadialBar:{handler:w.renderGraphicChild},Scatter:{handler:w.renderGraphicChild},Pie:{handler:w.renderGraphicChild},Funnel:{handler:w.renderGraphicChild},Tooltip:{handler:w.renderCursor,once:!0},PolarGrid:{handler:w.renderPolarGrid,once:!0},PolarAngleAxis:{handler:w.renderPolarAxis},PolarRadiusAxis:{handler:w.renderPolarAxis},Customized:{handler:w.renderCustomized}}),w.clipPathId="".concat((v=y.id)!==null&&v!==void 0?v:Au("recharts"),"-clip"),w.throttleTriggeredAfterMouseMove=LE(w.triggeredAfterMouseMove,(N=y.throttleDelay)!==null&&N!==void 0?N:1e3/60),w.state={},w}return Zye(p,x),Qye(p,[{key:"componentDidMount",value:function(){var v,N;this.addListener(),this.accessibilityManager.setDetails({container:this.container,offset:{left:(v=this.props.margin.left)!==null&&v!==void 0?v:0,top:(N=this.props.margin.top)!==null&&N!==void 0?N:0},coordinateList:this.state.tooltipTicks,mouseHandlerCallback:this.triggeredAfterMouseMove,layout:this.props.layout}),this.displayDefaultTooltip()}},{key:"displayDefaultTooltip",value:function(){var v=this.props,N=v.children,w=v.data,j=v.height,_=v.layout,S=$r(N,Nn);if(S){var T=S.props.defaultIndex;if(!(typeof T!="number"||T<0||T>this.state.tooltipTicks.length-1)){var A=this.state.tooltipTicks[T]&&this.state.tooltipTicks[T].value,E=tv(this.state,w,T,A),R=this.state.tooltipTicks[T].coordinate,I=(this.state.offset.top+j)/2,O=_==="horizontal",L=O?{x:R,y:I}:{y:R,x:I},F=this.state.formattedGraphicalItems.find(function(D){var W=D.item;return W.type.name==="Scatter"});F&&(L=ue(ue({},L),F.props.points[T].tooltipPosition),E=F.props.points[T].tooltipPayload);var M={activeTooltipIndex:T,isTooltipActive:!0,activeLabel:A,activePayload:E,activeCoordinate:L};this.setState(M),this.renderCursor(S),this.accessibilityManager.setIndex(T)}}}},{key:"getSnapshotBeforeUpdate",value:function(v,N){if(!this.props.accessibilityLayer)return null;if(this.state.tooltipTicks!==N.tooltipTicks&&this.accessibilityManager.setDetails({coordinateList:this.state.tooltipTicks}),this.props.layout!==v.layout&&this.accessibilityManager.setDetails({layout:this.props.layout}),this.props.margin!==v.margin){var w,j;this.accessibilityManager.setDetails({offset:{left:(w=this.props.margin.left)!==null&&w!==void 0?w:0,top:(j=this.props.margin.top)!==null&&j!==void 0?j:0}})}return null}},{key:"componentDidUpdate",value:function(v){Oy([$r(v.children,Nn)],[$r(this.props.children,Nn)])||this.displayDefaultTooltip()}},{key:"componentWillUnmount",value:function(){this.removeListener(),this.throttleTriggeredAfterMouseMove.cancel()}},{key:"getTooltipEventType",value:function(){var v=$r(this.props.children,Nn);if(v&&typeof v.props.shared=="boolean"){var N=v.props.shared?"axis":"item";return l.indexOf(N)>=0?N:i}return i}},{key:"getMouseInfo",value:function(v){if(!this.container)return null;var N=this.container,w=N.getBoundingClientRect(),j=gie(w),_={chartX:Math.round(v.pageX-j.left),chartY:Math.round(v.pageY-j.top)},S=w.width/N.offsetWidth||1,T=this.inRange(_.chartX,_.chartY,S);if(!T)return null;var A=this.state,E=A.xAxisMap,R=A.yAxisMap,I=this.getTooltipEventType(),O=e3(this.state,this.props.data,this.props.layout,T);if(I!=="axis"&&E&&R){var L=qs(E).scale,F=qs(R).scale,M=L&&L.invert?L.invert(_.chartX):null,D=F&&F.invert?F.invert(_.chartY):null;return ue(ue({},_),{},{xValue:M,yValue:D},O)}return O?ue(ue({},_),O):null}},{key:"inRange",value:function(v,N){var w=arguments.length>2&&arguments[2]!==void 0?arguments[2]:1,j=this.props.layout,_=v/w,S=N/w;if(j==="horizontal"||j==="vertical"){var T=this.state.offset,A=_>=T.left&&_<=T.left+T.width&&S>=T.top&&S<=T.top+T.height;return A?{x:_,y:S}:null}var E=this.state,R=E.angleAxisMap,I=E.radiusAxisMap;if(R&&I){var O=qs(R);return Ok({x:_,y:S},O)}return null}},{key:"parseEventsOfWrapper",value:function(){var v=this.props.children,N=this.getTooltipEventType(),w=$r(v,Nn),j={};w&&N==="axis"&&(w.props.trigger==="click"?j={onClick:this.handleClick}:j={onMouseEnter:this.handleMouseEnter,onDoubleClick:this.handleDoubleClick,onMouseMove:this.handleMouseMove,onMouseLeave:this.handleMouseLeave,onTouchMove:this.handleTouchMove,onTouchStart:this.handleTouchStart,onTouchEnd:this.handleTouchEnd,onContextMenu:this.handleContextMenu});var _=Ih(this.props,this.handleOuterEvent);return ue(ue({},_),j)}},{key:"addListener",value:function(){Bx.on(zx,this.handleReceiveSyncEvent)}},{key:"removeListener",value:function(){Bx.removeListener(zx,this.handleReceiveSyncEvent)}},{key:"filterFormatItem",value:function(v,N,w){for(var j=this.state.formattedGraphicalItems,_=0,S=j.length;_<S;_++){var T=j[_];if(T.item===v||T.props.key===v.key||N===ps(T.item.type)&&w===T.childIndex)return T}return null}},{key:"renderClipPath",value:function(){var v=this.clipPathId,N=this.state.offset,w=N.left,j=N.top,_=N.height,S=N.width;return Y.createElement("defs",null,Y.createElement("clipPath",{id:v},Y.createElement("rect",{x:w,y:j,height:_,width:S})))}},{key:"getXScales",value:function(){var v=this.state.xAxisMap;return v?Object.entries(v).reduce(function(N,w){var j=X5(w,2),_=j[0],S=j[1];return ue(ue({},N),{},Oe({},_,S.scale))},{}):null}},{key:"getYScales",value:function(){var v=this.state.yAxisMap;return v?Object.entries(v).reduce(function(N,w){var j=X5(w,2),_=j[0],S=j[1];return ue(ue({},N),{},Oe({},_,S.scale))},{}):null}},{key:"getXScaleByAxisId",value:function(v){var N;return(N=this.state.xAxisMap)===null||N===void 0||(N=N[v])===null||N===void 0?void 0:N.scale}},{key:"getYScaleByAxisId",value:function(v){var N;return(N=this.state.yAxisMap)===null||N===void 0||(N=N[v])===null||N===void 0?void 0:N.scale}},{key:"getItemByXY",value:function(v){var N=this.state,w=N.formattedGraphicalItems,j=N.activeItem;if(w&&w.length)for(var _=0,S=w.length;_<S;_++){var T=w[_],A=T.props,E=T.item,R=E.type.defaultProps!==void 0?ue(ue({},E.type.defaultProps),E.props):E.props,I=ps(E.type);if(I==="Bar"){var O=(A.data||[]).find(function(D){return Xhe(v,D)});if(O)return{graphicalItem:T,payload:O}}else if(I==="RadialBar"){var L=(A.data||[]).find(function(D){return Ok(v,D)});if(L)return{graphicalItem:T,payload:L}}else if(sf(T,j)||af(T,j)||Yd(T,j)){var F=Fpe({graphicalItem:T,activeTooltipItem:j,itemData:R.data}),M=R.activeIndex===void 0?F:R.activeIndex;return{graphicalItem:ue(ue({},T),{},{childIndex:M}),payload:Yd(T,j)?R.data[F]:T.props.data[F]}}}return null}},{key:"render",value:function(){var v=this;if(!j_(this))return null;var N=this.props,w=N.children,j=N.className,_=N.width,S=N.height,T=N.style,A=N.compact,E=N.title,R=N.desc,I=J5(N,qye),O=Te(I,!1);if(A)return Y.createElement(R5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement(My,lo({},O,{width:_,height:S,title:E,desc:R}),this.renderClipPath(),N_(w,this.renderMap)));if(this.props.accessibilityLayer){var L,F;O.tabIndex=(L=this.props.tabIndex)!==null&&L!==void 0?L:0,O.role=(F=this.props.role)!==null&&F!==void 0?F:"application",O.onKeyDown=function(D){v.accessibilityManager.keyboardEvent(D)},O.onFocus=function(){v.accessibilityManager.focus()}}var M=this.parseEventsOfWrapper();return Y.createElement(R5,{state:this.state,width:this.props.width,height:this.props.height,clipPathId:this.clipPathId},Y.createElement("div",lo({className:De("recharts-wrapper",j),style:ue({position:"relative",cursor:"default",width:_,height:S},T)},M,{ref:function(W){v.container=W}}),Y.createElement(My,lo({},O,{width:_,height:S,title:E,desc:R,style:abe}),this.renderClipPath(),N_(w,this.renderMap)),this.renderLegend(),this.renderTooltip()))}}])}(k.Component);Oe(b,"displayName",n),Oe(b,"defaultProps",ue({layout:"horizontal",stackOffset:"none",barCategoryGap:"10%",barGap:4,margin:{top:5,right:5,bottom:5,left:5},reverseStackOrder:!1,syncMethod:"index"},u)),Oe(b,"getDerivedStateFromProps",function(x,p){var y=x.dataKey,v=x.data,N=x.children,w=x.width,j=x.height,_=x.layout,S=x.stackOffset,T=x.margin,A=p.dataStartIndex,E=p.dataEndIndex;if(p.updateId===void 0){var R=t3(x);return ue(ue(ue({},R),{},{updateId:0},f(ue(ue({props:x},R),{},{updateId:0}),p)),{},{prevDataKey:y,prevData:v,prevWidth:w,prevHeight:j,prevLayout:_,prevStackOffset:S,prevMargin:T,prevChildren:N})}if(y!==p.prevDataKey||v!==p.prevData||w!==p.prevWidth||j!==p.prevHeight||_!==p.prevLayout||S!==p.prevStackOffset||!yo(T,p.prevMargin)){var I=t3(x),O={chartX:p.chartX,chartY:p.chartY,isTooltipActive:p.isTooltipActive},L=ue(ue({},e3(p,v,_)),{},{updateId:p.updateId+1}),F=ue(ue(ue({},I),O),L);return ue(ue(ue({},F),f(ue({props:x},F),p)),{},{prevDataKey:y,prevData:v,prevWidth:w,prevHeight:j,prevLayout:_,prevStackOffset:S,prevMargin:T,prevChildren:N})}if(!Oy(N,p.prevChildren)){var M,D,W,P,V=$r(N,ml),K=V&&(M=(D=V.props)===null||D===void 0?void 0:D.startIndex)!==null&&M!==void 0?M:A,ne=V&&(W=(P=V.props)===null||P===void 0?void 0:P.endIndex)!==null&&W!==void 0?W:E,G=K!==A||ne!==E,oe=!Fe(v),H=oe&&!G?p.updateId:p.updateId+1;return ue(ue({updateId:H},f(ue(ue({props:x},p),{},{updateId:H,dataStartIndex:K,dataEndIndex:ne}),p)),{},{prevChildren:N,dataStartIndex:K,dataEndIndex:ne})}return null}),Oe(b,"renderActiveDot",function(x,p,y){var v;return k.isValidElement(x)?v=k.cloneElement(x,p):Me(x)?v=x(p):v=Y.createElement(z2,p),Y.createElement(Ge,{className:"recharts-active-dot",key:y},v)});var g=k.forwardRef(function(p,y){return Y.createElement(b,lo({},p,{ref:y}))});return g.displayName=b.displayName,g},fbe=tO({chartName:"BarChart",GraphicalChild:Fi,defaultTooltipEventType:"axis",validateTooltipEventTypes:["axis","item"],axisComponents:[{axisType:"xAxis",AxisComp:mf},{axisType:"yAxis",AxisComp:hf}],formatAxisMap:gxe}),xbe=tO({chartName:"PieChart",GraphicalChild:Os,validateTooltipEventTypes:["item"],defaultTooltipEventType:"item",legendContent:"children",axisComponents:[{axisType:"angleAxis",AxisComp:nf},{axisType:"radiusAxis",AxisComp:tf}],formatAxisMap:mue,defaultProps:{layout:"centric",startAngle:0,endAngle:360,cx:"50%",cy:"50%",innerRadius:0,outerRadius:"80%"}});const gbe=async(e,t)=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/analytics/dashboard",{params:{period:e},headers:{Authorization:`Bearer ${t}`}})).data,ybe=()=>{const e=Le(),[t,n]=Ye(),s=ae(j=>j.authentication_state.current_user),a=ae(j=>j.authentication_state.auth_token),i=ae(j=>j.authentication_state.authentication_status.is_authenticated),o=ae(j=>j.feature_flags.feature_analytics_enabled),l=ae(j=>j.show_toast),[c,d]=k.useState(t.get("period")||"last_30_days"),[m,u]=k.useState(!1);k.useEffect(()=>{if(!i||!s){e("/login?returnTo=/admin/analytics");return}if(s.role!=="ADMIN"){e("/admin"),l({type:"error",message:"Access denied. Admin privileges required.",duration:5e3});return}if(!o){e("/admin"),l({type:"warning",message:"Analytics feature is not enabled. Enable it in Settings.",duration:5e3});return}},[i,s,o,e,l]);const{data:h,isLoading:f,error:b,refetch:g}=pe({queryKey:["analytics",c],queryFn:()=>gbe(c,a),enabled:!!a&&!!s&&s.role==="ADMIN"&&o,staleTime:5*60*1e3,refetchOnWindowFocus:!1,retry:1}),x=j=>{d(j),n({period:j})},p=()=>{if(h){u(!0);try{let j=`SultanStamp Analytics Report
`;j+=`Period: ${c.replace("_"," ")}
`,j+=`Generated: ${new Date().toLocaleString()}

`,j+=`CONVERSION FUNNEL
`,j+=`Stage,Count,Conversion Rate
`;const _=h.conversion_funnel,S=(R,I)=>I>0?(R/I*100).toFixed(1):"0.0";j+=`Visited Site,${_.visited_site},100%
`,j+=`Started Quote,${_.started_quote},${S(_.started_quote,_.visited_site)}%
`,j+=`Submitted Quote,${_.submitted_quote},${S(_.submitted_quote,_.started_quote)}%
`,j+=`Quote Finalized,${_.quote_finalized},${S(_.quote_finalized,_.submitted_quote)}%
`,j+=`Deposit Paid,${_.deposit_paid},${S(_.deposit_paid,_.quote_finalized)}%
`,j+=`Order Completed,${_.order_completed},${S(_.order_completed,_.deposit_paid)}%

`,j+=`REVENUE METRICS
`,j+=`Total Revenue,${h.revenue_metrics.total_revenue.toFixed(2)}
`,j+=`Average Order Value,${h.revenue_metrics.average_order_value.toFixed(2)}

`,j+=`Revenue by Service
`,j+=`Service,Revenue
`,h.revenue_metrics.revenue_by_service.forEach(R=>{j+=`${R.service_name},${R.revenue.toFixed(2)}
`}),j+=`
`,j+=`Revenue by Tier
`,j+=`Tier,Revenue
`,h.revenue_metrics.revenue_by_tier.forEach(R=>{j+=`${R.tier_name},${R.revenue.toFixed(2)}
`}),j+=`
`,j+=`OUTSTANDING PAYMENTS
`,j+=`Total Deposits Pending,${h.outstanding_payments.total_deposits_pending.toFixed(2)}
`,j+=`Total Balance Due,${h.outstanding_payments.total_balance_due.toFixed(2)}
`,j+=`Aging Report
`,j+=`0-7 days,${h.outstanding_payments.aging_report["0-7"].toFixed(2)}
`,j+=`8-14 days,${h.outstanding_payments.aging_report["8-14"].toFixed(2)}
`,j+=`15-30 days,${h.outstanding_payments.aging_report["15-30"].toFixed(2)}
`,j+=`30+ days,${h.outstanding_payments.aging_report["30+"].toFixed(2)}
`;const T=new Blob([j],{type:"text/csv;charset=utf-8;"}),A=document.createElement("a"),E=URL.createObjectURL(T);A.setAttribute("href",E),A.setAttribute("download",`sultanstamp_analytics_${c}_${new Date().toISOString().split("T")[0]}.csv`),A.style.visibility="hidden",document.body.appendChild(A),A.click(),document.body.removeChild(A),l({type:"success",message:"Analytics report exported successfully",duration:3e3})}catch{l({type:"error",message:"Failed to export report. Please try again.",duration:5e3})}finally{u(!1)}}},y=j=>new Intl.NumberFormat("en-IE",{style:"currency",currency:"EUR"}).format(j),v=j=>`${j.toFixed(1)}%`,N=k.useMemo(()=>{if(!h)return null;const j=h.conversion_funnel;return{started:j.started_quote/j.visited_site*100,submitted:j.submitted_quote/j.started_quote*100,finalized:j.quote_finalized/j.submitted_quote*100,paid:j.deposit_paid/j.quote_finalized*100,completed:j.order_completed/j.deposit_paid*100}},[h]),w=["#3B82F6","#10B981","#F59E0B","#EF4444","#8B5CF6","#EC4899"];return f?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading analytics data..."})]})})}):b?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsx("div",{className:"text-center max-w-md",children:r.jsxs("div",{className:"bg-red-50 border-2 border-red-200 rounded-lg p-8",children:[r.jsx(Ww,{className:"h-12 w-12 text-red-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Failed to Load Analytics"}),r.jsx("p",{className:"text-gray-600 mb-4",children:b instanceof Error?b.message:"An error occurred while loading analytics data."}),r.jsx("button",{onClick:()=>g(),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors",children:"Retry"})]})})})}):h?r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Business Analytics"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Comprehensive performance metrics and insights"})]}),r.jsxs("div",{className:"mt-4 sm:mt-0 flex flex-col sm:flex-row gap-3",children:[r.jsxs("div",{className:"relative",children:[r.jsxs("select",{value:c,onChange:j=>x(j.target.value),className:"appearance-none bg-white border border-gray-300 rounded-lg px-4 py-2 pr-10 text-sm font-medium text-gray-700 hover:border-gray-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",children:[r.jsx("option",{value:"last_7_days",children:"Last 7 Days"}),r.jsx("option",{value:"last_30_days",children:"Last 30 Days"}),r.jsx("option",{value:"last_90_days",children:"Last 90 Days"}),r.jsx("option",{value:"this_year",children:"This Year"})]}),r.jsx(ji,{className:"absolute right-3 top-1/2 -translate-y-1/2 h-4 w-4 text-gray-400 pointer-events-none"})]}),r.jsxs("button",{onClick:p,disabled:m,className:"inline-flex items-center justify-center px-4 py-2 border border-gray-300 shadow-sm text-sm font-medium rounded-lg text-gray-700 bg-white hover:bg-gray-50 focus:outline-none focus:ring-2 focus:ring-offset-2 focus:ring-blue-500 disabled:opacity-50 disabled:cursor-not-allowed transition-colors",children:[r.jsx(CR,{className:"h-4 w-4 mr-2"}),m?"Exporting...":"Export CSV"]})]})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Total Revenue"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:y(h.revenue_metrics.total_revenue)})]}),r.jsx("div",{className:"bg-blue-100 rounded-lg p-3",children:r.jsx(Ko,{className:"h-6 w-6 text-blue-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Avg Order Value"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:y(h.revenue_metrics.average_order_value)})]}),r.jsx("div",{className:"bg-green-100 rounded-lg p-3",children:r.jsx(Uw,{className:"h-6 w-6 text-green-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Emergency Bookings"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:h.emergency_bookings.total_count}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[y(h.emergency_bookings.total_revenue)," revenue"]})]}),r.jsx("div",{className:"bg-orange-100 rounded-lg p-3",children:r.jsx(Ww,{className:"h-6 w-6 text-orange-600"})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"On-Time Delivery"}),r.jsx("p",{className:"text-2xl font-bold text-gray-900 mt-1",children:v(h.turnaround_performance.on_time_percentage)})]}),r.jsx("div",{className:"bg-purple-100 rounded-lg p-3",children:r.jsx(hs,{className:"h-6 w-6 text-purple-600"})})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Conversion Funnel"}),r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Visited Site"}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:h.conversion_funnel.visited_site.toLocaleString()})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-blue-600 h-3 rounded-full",style:{width:"100%"}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Started Quote"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xs text-gray-500",children:N&&v(N.started)}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:h.conversion_funnel.started_quote.toLocaleString()})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:N?`${N.started}%`:"0%"}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Submitted Quote"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xs text-gray-500",children:N&&v(N.submitted)}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:h.conversion_funnel.submitted_quote.toLocaleString()})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-blue-600 h-3 rounded-full transition-all duration-500",style:{width:N?`${N.submitted}%`:"0%"}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Quote Finalized"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xs text-gray-500",children:N&&v(N.finalized)}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:h.conversion_funnel.quote_finalized.toLocaleString()})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-green-600 h-3 rounded-full transition-all duration-500",style:{width:N?`${N.finalized}%`:"0%"}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Deposit Paid"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xs text-gray-500",children:N&&v(N.paid)}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:h.conversion_funnel.deposit_paid.toLocaleString()})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-green-600 h-3 rounded-full transition-all duration-500",style:{width:N?`${N.paid}%`:"0%"}})})]}),r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-2",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700",children:"Order Completed"}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:"text-xs text-gray-500",children:N&&v(N.completed)}),r.jsx("span",{className:"text-sm font-semibold text-gray-900",children:h.conversion_funnel.order_completed.toLocaleString()})]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-3",children:r.jsx("div",{className:"bg-green-600 h-3 rounded-full transition-all duration-500",style:{width:N?`${N.completed}%`:"0%"}})})]})]})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8 mb-8",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue by Service"}),r.jsx(v4,{width:"100%",height:300,children:r.jsxs(xbe,{children:[r.jsx(Os,{data:h.revenue_metrics.revenue_by_service,dataKey:"revenue",nameKey:"service_name",cx:"50%",cy:"50%",outerRadius:100,label:j=>`${j.service_name}: ${y(j.revenue)}`,children:h.revenue_metrics.revenue_by_service.map((j,_)=>r.jsx(Bp,{fill:w[_%w.length]},`cell-${_}`))}),r.jsx(Nn,{formatter:j=>y(j),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Revenue by Tier"}),r.jsx(v4,{width:"100%",height:300,children:r.jsxs(fbe,{data:h.revenue_metrics.revenue_by_tier,children:[r.jsx(B7,{strokeDasharray:"3 3",stroke:"#f0f0f0"}),r.jsx(mf,{dataKey:"tier_name",stroke:"#6b7280",style:{fontSize:"12px"}}),r.jsx(hf,{stroke:"#6b7280",style:{fontSize:"12px"}}),r.jsx(Nn,{formatter:j=>y(j),contentStyle:{backgroundColor:"white",border:"1px solid #e5e7eb",borderRadius:"8px"}}),r.jsx(Fi,{dataKey:"revenue",fill:"#3B82F6",radius:[8,8,0,0]})]})})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Outstanding Payments"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-orange-800",children:"Total Deposits Pending"}),r.jsx("p",{className:"text-2xl font-bold text-orange-900 mt-1",children:y(h.outstanding_payments.total_deposits_pending)})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-red-800",children:"Total Balance Due"}),r.jsx("p",{className:"text-2xl font-bold text-red-900 mt-1",children:y(h.outstanding_payments.total_balance_due)})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Aging Report"}),r.jsxs("div",{className:"grid grid-cols-2 md:grid-cols-4 gap-4",children:[r.jsxs("div",{className:"bg-green-50 border border-green-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-medium text-green-800",children:"0-7 days"}),r.jsx("p",{className:"text-lg font-bold text-green-900 mt-1",children:y(h.outstanding_payments.aging_report["0-7"])})]}),r.jsxs("div",{className:"bg-yellow-50 border border-yellow-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-medium text-yellow-800",children:"8-14 days"}),r.jsx("p",{className:"text-lg font-bold text-yellow-900 mt-1",children:y(h.outstanding_payments.aging_report["8-14"])})]}),r.jsxs("div",{className:"bg-orange-50 border border-orange-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-medium text-orange-800",children:"15-30 days"}),r.jsx("p",{className:"text-lg font-bold text-orange-900 mt-1",children:y(h.outstanding_payments.aging_report["15-30"])})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-xs font-medium text-red-800",children:"30+ days (Overdue)"}),r.jsx("p",{className:"text-lg font-bold text-red-900 mt-1",children:y(h.outstanding_payments.aging_report["30+"])})]})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Turnaround Performance"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-6",children:[r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-blue-800",children:"On-Time Delivery"}),r.jsx("p",{className:"text-2xl font-bold text-blue-900 mt-1",children:v(h.turnaround_performance.on_time_percentage)})]}),r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-red-800",children:"Delayed Orders"}),r.jsx("p",{className:"text-2xl font-bold text-red-900 mt-1",children:v(h.turnaround_performance.delayed_percentage)})]}),r.jsxs("div",{className:"bg-purple-50 border border-purple-200 rounded-lg p-4",children:[r.jsx("p",{className:"text-sm font-medium text-purple-800",children:"Avg Turnaround"}),r.jsxs("p",{className:"text-2xl font-bold text-purple-900 mt-1",children:[Object.values(h.turnaround_performance.avg_turnaround_by_tier).reduce((j,_)=>j+_,0)/Object.values(h.turnaround_performance.avg_turnaround_by_tier).length||0," days"]})]})]}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-semibold text-gray-700 mb-3",children:"Average Turnaround by Tier"}),r.jsx("div",{className:"space-y-3",children:Object.entries(h.turnaround_performance.avg_turnaround_by_tier).map(([j,_])=>r.jsxs("div",{children:[r.jsxs("div",{className:"flex justify-between items-center mb-1",children:[r.jsx("span",{className:"text-sm font-medium text-gray-700 capitalize",children:j}),r.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[_," days"]})]}),r.jsx("div",{className:"w-full bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-purple-600 h-2 rounded-full transition-all duration-500",style:{width:`${Math.min(_/14*100,100)}%`}})})]},j))})]})]}),h.top_customers&&h.top_customers.length>0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6 mb-8",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-6",children:"Top Customers"}),r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),r.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Total Revenue"}),r.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order Count"}),r.jsx("th",{className:"px-6 py-3 bg-gray-50 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Last Order"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.top_customers.map((j,_)=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:j.customer_name}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-900 font-semibold",children:y(j.total_revenue)}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:[j.order_count," orders"]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-600",children:new Date(j.last_order_date).toLocaleDateString("en-IE",{year:"numeric",month:"short",day:"numeric"})})]},_))})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsx("h2",{className:"text-lg font-semibold text-gray-900 mb-4",children:"Quick Actions"}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 gap-4",children:[r.jsxs(ie,{to:"/admin/analytics/sla",className:"flex items-center justify-center gap-2 px-4 py-3 bg-blue-50 border border-blue-200 rounded-lg text-blue-700 hover:bg-blue-100 transition-colors",children:[r.jsx(hs,{className:"h-5 w-5"}),"View SLA Dashboard"]}),r.jsxs(ie,{to:"/admin/orders?filter=payment-pending",className:"flex items-center justify-center gap-2 px-4 py-3 bg-orange-50 border border-orange-200 rounded-lg text-orange-700 hover:bg-orange-100 transition-colors",children:[r.jsx(Ko,{className:"h-5 w-5"}),"Review Payments"]}),r.jsxs(ie,{to:"/admin/quotes?status=SUBMITTED",className:"flex items-center justify-center gap-2 px-4 py-3 bg-purple-50 border border-purple-200 rounded-lg text-purple-700 hover:bg-purple-100 transition-colors",children:[r.jsx(AR,{className:"h-5 w-5"}),"Pending Quotes"]})]})]})]})]})}):r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx(Uw,{className:"h-16 w-16 text-gray-400 mx-auto mb-4"}),r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-2",children:"No Analytics Data Available"}),r.jsx("p",{className:"text-gray-600",children:"No data found for the selected period. Try a different date range."})]})})})},bbe=()=>{const e=Le(),[t,n]=Ye(),s=et(),a=ae(H=>H.authentication_state.auth_token);ae(H=>H.authentication_state.current_user);const i=ae(H=>H.feature_flags.feature_inventory_enabled),o=ae(H=>H.show_toast),l=ae(H=>H.show_modal),c=ae(H=>H.close_modal),d=t.get("service_id")||null,m=t.get("material_search")||"",[u,h]=k.useState(null),[f,b]=k.useState(!1),[g,x]=k.useState({service_id:null,inventory_item_id:null,formula:"",multiplier:1,base_amount:0}),[p,y]=k.useState({});k.useEffect(()=>{i||(o({type:"error",message:"Inventory features are not enabled. Enable in Settings > Features.",duration:5e3}),e("/admin"))},[i,e,o]);const v="https://123project-build-a-production-ready-w.launchpulse.ai",N=async()=>{const H={};return d&&(H.service_id=d),(await te.get(`${v}/api/admin/material-consumption-rules`,{headers:{Authorization:`Bearer ${a}`},params:H})).data},w=async()=>(await te.get(`${v}/api/admin/services`,{headers:{Authorization:`Bearer ${a}`},params:{is_active:!0}})).data,j=async()=>{const H={is_active:!0};m&&(H.sku=m);const J=(await te.get(`${v}/api/admin/inventory-items`,{headers:{Authorization:`Bearer ${a}`},params:H})).data;return Array.isArray(J)?J.map(X=>X.item||X):J},_=pe({queryKey:["consumption-rules",d],queryFn:N,enabled:!!a&&i,staleTime:6e4,refetchOnWindowFocus:!1}),S=pe({queryKey:["services-dropdown"],queryFn:w,enabled:!!a&&i,staleTime:3e5,refetchOnWindowFocus:!1}),T=pe({queryKey:["inventory-items",m],queryFn:j,enabled:!!a&&i,staleTime:6e4,refetchOnWindowFocus:!1}),A=ve({mutationFn:async H=>{const ee=JSON.stringify({formula:H.formula,multiplier:H.multiplier,base_amount:H.base_amount});return(await te.post(`${v}/api/admin/material-consumption-rules`,{service_id:H.service_id,inventory_item_id:H.inventory_item_id,rule_json:ee},{headers:{Authorization:`Bearer ${a}`}})).data},onSuccess:()=>{s.invalidateQueries({queryKey:["consumption-rules"]}),o({type:"success",message:"Consumption rule created successfully",duration:5e3}),I(),b(!1)},onError:H=>{var ee,J;o({type:"error",message:((J=(ee=H.response)==null?void 0:ee.data)==null?void 0:J.message)||"Failed to create rule",duration:5e3})}}),E=ve({mutationFn:async({ruleId:H,formData:ee})=>{const J=JSON.stringify({formula:ee.formula,multiplier:ee.multiplier,base_amount:ee.base_amount});return(await te.patch(`${v}/api/admin/material-consumption-rules/${H}`,{rule_json:J},{headers:{Authorization:`Bearer ${a}`}})).data},onSuccess:()=>{s.invalidateQueries({queryKey:["consumption-rules"]}),o({type:"success",message:"Consumption rule updated successfully",duration:5e3}),I(),b(!1),h(null)},onError:H=>{var ee,J;o({type:"error",message:((J=(ee=H.response)==null?void 0:ee.data)==null?void 0:J.message)||"Failed to update rule",duration:5e3})}}),R=ve({mutationFn:async H=>{throw new Error("DELETE endpoint not implemented - please implement PATCH with is_active=false in backend")},onSuccess:()=>{s.invalidateQueries({queryKey:["consumption-rules"]}),o({type:"success",message:"Consumption rule deleted successfully",duration:5e3}),c()},onError:H=>{o({type:"error",message:H.message||"Failed to delete rule",duration:5e3})}}),I=()=>{x({service_id:null,inventory_item_id:null,formula:"",multiplier:1,base_amount:0}),y({})},O=()=>{I(),h(null),b(!0)},L=H=>{try{const ee=JSON.parse(H.rule.rule_json);x({service_id:H.rule.service_id,inventory_item_id:H.rule.inventory_item_id,formula:ee.formula||"",multiplier:ee.multiplier||1,base_amount:ee.base_amount||0}),h(H.rule.id),b(!0)}catch{o({type:"error",message:"Failed to parse rule data",duration:5e3})}},F=H=>{l("confirmation",{title:"Delete Consumption Rule",message:"Are you sure you want to delete this consumption rule? This action cannot be undone.",onConfirm:()=>{R.mutate(H)},confirmText:"Delete",cancelText:"Cancel"})},M=()=>{const H={};return g.service_id||(H.service_id="Service is required"),g.inventory_item_id||(H.inventory_item_id="Material is required"),g.formula.trim()||(H.formula="Formula is required"),g.multiplier<=0&&(H.multiplier="Multiplier must be greater than 0"),y(H),Object.keys(H).length===0},D=H=>{if(H.preventDefault(),!M()){o({type:"error",message:"Please fix form errors before submitting",duration:5e3});return}u?E.mutate({ruleId:u,formData:g}):A.mutate(g)},W=H=>{n(H?{service_id:H}:{})},P=H=>{const ee=new URLSearchParams(t);H?ee.set("material_search",H):ee.delete("material_search"),n(ee)},V=_.data||[],K=S.data||[],ne=T.data||[],G=_.isLoading||S.isLoading||T.isLoading,oe=A.isPending||E.isPending||R.isPending;return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[r.jsx("nav",{className:"flex mb-6","aria-label":"Breadcrumb",children:r.jsxs("ol",{className:"inline-flex items-center space-x-1 md:space-x-3",children:[r.jsx("li",{className:"inline-flex items-center",children:r.jsx(ie,{to:"/admin",className:"inline-flex items-center text-sm font-medium text-gray-700 hover:text-blue-600",children:"Admin"})}),r.jsx("li",{children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-3 h-3 text-gray-400 mx-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),r.jsx(ie,{to:"/admin/inventory",className:"ml-1 text-sm font-medium text-gray-700 hover:text-blue-600 md:ml-2",children:"Inventory"})]})}),r.jsx("li",{"aria-current":"page",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-3 h-3 text-gray-400 mx-1",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M7.293 14.707a1 1 0 010-1.414L10.586 10 7.293 6.707a1 1 0 011.414-1.414l4 4a1 1 0 010 1.414l-4 4a1 1 0 01-1.414 0z",clipRule:"evenodd"})}),r.jsx("span",{className:"ml-1 text-sm font-medium text-gray-500 md:ml-2",children:"Consumption Rules"})]})})]})}),r.jsx("div",{className:"mb-8",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"Material Consumption Rules"}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"Configure automatic inventory deductions when orders enter production"})]}),r.jsxs("button",{onClick:O,className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium text-sm rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Add Rule"]})]})}),r.jsx("div",{className:"mb-6 bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"service-filter",className:"block text-sm font-medium text-gray-700 mb-2",children:"Filter by Service"}),r.jsxs("select",{id:"service-filter",value:d||"",onChange:H=>W(H.target.value||null),className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900",children:[r.jsx("option",{value:"",children:"All Services"}),K.map(H=>r.jsx("option",{value:H.id,children:H.name},H.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"material-search",className:"block text-sm font-medium text-gray-700 mb-2",children:"Search Materials by SKU"}),r.jsx("input",{id:"material-search",type:"text",value:m,onChange:H=>P(H.target.value),placeholder:"Enter SKU to search...",className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900"})]})]})}),f?r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200 p-8",children:[r.jsxs("div",{className:"flex items-center justify-between mb-6",children:[r.jsx("h2",{className:"text-2xl font-semibold text-gray-900",children:u?"Edit Consumption Rule":"Create Consumption Rule"}),r.jsx("button",{onClick:()=>{b(!1),I(),h(null)},className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]}),r.jsxs("form",{onSubmit:D,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"service",className:"block text-sm font-medium text-gray-700 mb-2",children:["Service ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("select",{id:"service",value:g.service_id||"",onChange:H=>{x(ee=>({...ee,service_id:H.target.value||null})),y(ee=>({...ee,service_id:""}))},className:`w-full px-4 py-3 rounded-lg border-2 ${p.service_id?"border-red-500":"border-gray-200"} focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900`,disabled:S.isLoading,children:[r.jsx("option",{value:"",children:"Select a service..."}),K.map(H=>r.jsx("option",{value:H.id,children:H.name},H.id))]}),p.service_id&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:p.service_id})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"material",className:"block text-sm font-medium text-gray-700 mb-2",children:["Inventory Material ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("select",{id:"material",value:g.inventory_item_id||"",onChange:H=>{x(ee=>({...ee,inventory_item_id:H.target.value||null})),y(ee=>({...ee,inventory_item_id:""}))},className:`w-full px-4 py-3 rounded-lg border-2 ${p.inventory_item_id?"border-red-500":"border-gray-200"} focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900`,disabled:T.isLoading,children:[r.jsx("option",{value:"",children:"Select a material..."}),ne.map(H=>r.jsxs("option",{value:H.id,children:[H.name," (",H.sku,") - ",Number(H.qty_on_hand||0).toFixed(2)," ",H.unit," on hand"]},H.id))]}),p.inventory_item_id&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:p.inventory_item_id})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"formula",className:"block text-sm font-medium text-gray-700 mb-2",children:["Consumption Formula ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{id:"formula",type:"text",value:g.formula,onChange:H=>{x(ee=>({...ee,formula:H.target.value})),y(ee=>({...ee,formula:""}))},placeholder:"e.g., quantity * 1.2 or quantity * 1.5 + 10",className:`w-full px-4 py-3 rounded-lg border-2 ${p.formula?"border-red-500":"border-gray-200"} focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900`}),r.jsxs("p",{className:"mt-2 text-sm text-gray-500",children:["Supported variables: ",r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"quantity"})," ","| Operators: ",r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded",children:"*, /, +, -"})]}),p.formula&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:p.formula})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"multiplier",className:"block text-sm font-medium text-gray-700 mb-2",children:"Multiplier"}),r.jsx("input",{id:"multiplier",type:"number",step:"0.01",min:"0.01",value:g.multiplier,onChange:H=>{x(ee=>({...ee,multiplier:parseFloat(H.target.value)||1})),y(ee=>({...ee,multiplier:""}))},className:`w-full px-4 py-3 rounded-lg border-2 ${p.multiplier?"border-red-500":"border-gray-200"} focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900`}),p.multiplier&&r.jsx("p",{className:"mt-2 text-sm text-red-600",children:p.multiplier})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"base_amount",className:"block text-sm font-medium text-gray-700 mb-2",children:"Base Amount (Optional)"}),r.jsx("input",{id:"base_amount",type:"number",step:"0.01",min:"0",value:g.base_amount,onChange:H=>{x(ee=>({...ee,base_amount:parseFloat(H.target.value)||0}))},className:"w-full px-4 py-3 rounded-lg border-2 border-gray-200 focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all duration-200 text-gray-900"}),r.jsx("p",{className:"mt-2 text-sm text-gray-500",children:"Fixed amount added to formula result (e.g., for setup materials)"})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-4 pt-6 border-t border-gray-200",children:[r.jsx("button",{type:"button",onClick:()=>{b(!1),I(),h(null)},className:"px-6 py-3 text-gray-700 bg-white border-2 border-gray-300 rounded-lg font-medium hover:bg-gray-50 focus:outline-none focus:ring-4 focus:ring-gray-100 transition-all duration-200",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:oe,className:"px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed",children:oe?r.jsxs("span",{className:"flex items-center",children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4 text-white",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Saving..."]}):u?"Update Rule":"Create Rule"})]})]})]}):r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-200",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("h2",{className:"text-lg font-semibold text-gray-900",children:["Consumption Rules",d&&r.jsx("span",{className:"ml-2 text-sm font-normal text-gray-500",children:"(Filtered by service)"})]})}),G&&r.jsxs("div",{className:"px-6 py-12 text-center",children:[r.jsx("div",{className:"inline-block animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading consumption rules..."})]}),!G&&V.length===0&&r.jsxs("div",{className:"px-6 py-12 text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"mt-4 text-lg font-medium text-gray-900",children:"No consumption rules"}),r.jsx("p",{className:"mt-2 text-gray-500",children:d?"No rules found for this service. Try a different filter or create a new rule.":"Get started by creating your first consumption rule."}),r.jsxs("button",{onClick:O,className:"mt-6 inline-flex items-center px-6 py-3 bg-blue-600 text-white font-medium rounded-lg hover:bg-blue-700 focus:outline-none focus:ring-4 focus:ring-blue-100 transition-all duration-200",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 6v6m0 0v6m0-6h6m-6 0H6"})}),"Create First Rule"]})]}),!G&&V.length>0&&r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Service"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Material"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Formula"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Unit"}),r.jsx("th",{scope:"col",className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:V.map(H=>{let ee;try{ee=JSON.parse(H.rule.rule_json)}catch{ee={formula:"Invalid JSON",multiplier:0,base_amount:0}}return r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-medium text-gray-900",children:H.service.name})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:H.inventory_item.name}),r.jsx("div",{className:"text-xs text-gray-500",children:H.inventory_item.sku})]}),r.jsxs("td",{className:"px-6 py-4",children:[r.jsx("div",{className:"text-sm text-gray-900",children:r.jsx("code",{className:"bg-gray-100 px-2 py-1 rounded text-xs",children:ee.formula})}),ee.base_amount>0&&r.jsxs("div",{className:"text-xs text-gray-500 mt-1",children:["+ ",ee.base_amount," base"]})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-sm text-gray-500",children:H.inventory_item.unit}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:[r.jsx("button",{onClick:()=>L(H),className:"text-blue-600 hover:text-blue-900 mr-4 transition-colors",children:"Edit"}),r.jsx("button",{onClick:()=>F(H.rule.id),className:"text-red-600 hover:text-red-900 transition-colors",children:"Delete"})]})]},H.rule.id)})})]})})]}),r.jsx("div",{className:"mt-6 bg-blue-50 border border-blue-200 rounded-lg p-6",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("div",{className:"flex-shrink-0",children:r.jsx("svg",{className:"h-6 w-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M13 16h-1v-4h-1m1-4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})}),r.jsxs("div",{className:"ml-3",children:[r.jsx("h3",{className:"text-sm font-medium text-blue-900",children:"How Consumption Rules Work"}),r.jsx("div",{className:"mt-2 text-sm text-blue-700",children:r.jsxs("ul",{className:"list-disc list-inside space-y-1",children:[r.jsx("li",{children:'Rules automatically deduct materials when orders move to "In Production" status'}),r.jsxs("li",{children:["Formula example: ",r.jsx("code",{className:"bg-blue-100 px-2 py-1 rounded",children:"quantity * 1.2"})," deducts 12 sqm for 10 sqm order (20% waste allowance)"]}),r.jsx("li",{children:"If insufficient stock, admin receives warning but can override to proceed"}),r.jsx("li",{children:"All deductions are logged in inventory transactions for audit trail"})]})})]})]})})]})})})},vbe=async e=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/analytics/sla",{headers:{Authorization:`Bearer ${e}`}})).data,jbe=()=>{const e=ae(p=>p.authentication_state.auth_token);ae(p=>p.authentication_state.current_user),ae(p=>p.show_toast);const[t,n]=k.useState("overview"),[s,a]=k.useState("time_remaining"),[i,o]=k.useState("days_overdue"),{data:l,isLoading:c,error:d,refetch:m}=pe({queryKey:["sla-dashboard"],queryFn:()=>vbe(e),enabled:!!e,staleTime:6e4,refetchOnWindowFocus:!0,retry:1,select:p=>({sla_performance:{meeting_sla_percentage:Number(p.sla_performance.meeting_sla_percentage||0),breached_sla_percentage:Number(p.sla_performance.breached_sla_percentage||0),avg_completion_time:p.sla_performance.avg_completion_time||{}},at_risk_jobs:(p.at_risk_jobs||[]).map(y=>({...y,hours_remaining:Number(y.hours_remaining||0),order:{...y.order,total_subtotal:Number(y.order.total_subtotal||0),tax_amount:Number(y.order.tax_amount||0),total_amount:Number(y.order.total_amount||0),deposit_pct:Number(y.order.deposit_pct||0),deposit_amount:Number(y.order.deposit_amount||0),revision_count:Number(y.order.revision_count||0)}})),breached_jobs:(p.breached_jobs||[]).map(y=>({...y,days_overdue:Number(y.days_overdue||0),order:{...y.order,total_subtotal:Number(y.order.total_subtotal||0),tax_amount:Number(y.order.tax_amount||0),total_amount:Number(y.order.total_amount||0),deposit_pct:Number(y.order.deposit_pct||0),deposit_amount:Number(y.order.deposit_amount||0),revision_count:Number(y.order.revision_count||0)}}))})}),u=Y.useMemo(()=>{if(!(l!=null&&l.at_risk_jobs))return[];const p=[...l.at_risk_jobs];return s==="time_remaining"?p.sort((y,v)=>y.hours_remaining-v.hours_remaining):p.sort((y,v)=>{const N=y.tier_name||"",w=v.tier_name||"";return N.localeCompare(w)})},[l==null?void 0:l.at_risk_jobs,s]),h=Y.useMemo(()=>{if(!(l!=null&&l.breached_jobs))return[];const p=[...l.breached_jobs];return i==="days_overdue"?p.sort((y,v)=>v.days_overdue-y.days_overdue):p.sort((y,v)=>{const N=y.tier_name||"",w=v.tier_name||"";return N.localeCompare(w)})},[l==null?void 0:l.breached_jobs,i]),f=p=>{if(!p)return"bg-gray-100 text-gray-800";const y=p.toLowerCase();return y.includes("enterprise")?"bg-purple-100 text-purple-800":y.includes("gold")||y.includes("premium")?"bg-yellow-100 text-yellow-800":y.includes("standard")?"bg-blue-100 text-blue-800":(y.includes("basic"),"bg-gray-100 text-gray-800")},b=p=>{switch(p.toUpperCase()){case"COMPLETED":return"bg-green-100 text-green-800";case"IN_PRODUCTION":return"bg-blue-100 text-blue-800";case"AWAITING_APPROVAL":return"bg-orange-100 text-orange-800";case"READY_FOR_PICKUP":return"bg-green-100 text-green-800";case"CANCELLED":return"bg-red-100 text-red-800";default:return"bg-gray-100 text-gray-800"}},g=p=>p<1?`${Math.floor(p*60)} min`:`${p.toFixed(1)} hrs`,x=p=>p===0?"Due today":p===1?"1 day overdue":`${p} days overdue`;return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b-2 border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("nav",{className:"text-sm mb-2",children:r.jsxs("ol",{className:"flex items-center space-x-2",children:[r.jsx("li",{children:r.jsx(ie,{to:"/admin",className:"text-blue-600 hover:text-blue-800",children:"Admin"})}),r.jsx("li",{className:"text-gray-400",children:"/"}),r.jsx("li",{children:r.jsx(ie,{to:"/admin/analytics",className:"text-blue-600 hover:text-blue-800",children:"Analytics"})}),r.jsx("li",{className:"text-gray-400",children:"/"}),r.jsx("li",{className:"text-gray-900 font-medium",children:"SLA Dashboard"})]})}),r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"SLA Performance & Risk Management"})]}),r.jsx("button",{onClick:()=>m(),disabled:c,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center space-x-2",children:c?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{children:"Refreshing..."})]}):r.jsxs(r.Fragment,{children:[r.jsx("svg",{className:"w-4 h-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),r.jsx("span",{children:"Refresh"})]})})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[d&&r.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-red-600 mt-0.5 mr-3",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Error Loading SLA Data"}),r.jsx("p",{className:"mt-1 text-sm text-red-700",children:d.message})]})]})}),c&&r.jsx("div",{className:"flex justify-center items-center py-12",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("svg",{className:"animate-spin h-12 w-12 text-blue-600 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("p",{className:"text-gray-600",children:"Loading SLA performance data..."})]})}),!c&&!d&&l&&r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Total Orders"}),r.jsx("p",{className:"text-3xl font-bold text-gray-900",children:(u.length||0)+(h.length||0)})]}),r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-blue-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Meeting SLA"}),r.jsxs("p",{className:"text-3xl font-bold text-green-600",children:[l.sla_performance.meeting_sla_percentage.toFixed(1),"%"]})]}),r.jsx("div",{className:"p-3 bg-green-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-green-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 p-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 mb-1",children:"Breached SLA"}),r.jsxs("p",{className:"text-3xl font-bold text-red-600",children:[l.sla_performance.breached_sla_percentage.toFixed(1),"%"]})]}),r.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:r.jsx("svg",{className:"w-6 h-6 text-red-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})})})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 mb-6",children:[r.jsx("div",{className:"border-b border-gray-200",children:r.jsxs("nav",{className:"flex space-x-8 px-6","aria-label":"Tabs",children:[r.jsx("button",{onClick:()=>n("overview"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors ${t==="overview"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:"Overview"}),r.jsxs("button",{onClick:()=>n("at-risk"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors flex items-center ${t==="at-risk"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["At-Risk Jobs",u.length>0&&r.jsx("span",{className:"ml-2 bg-orange-100 text-orange-800 py-0.5 px-2 rounded-full text-xs font-semibold",children:u.length})]}),r.jsxs("button",{onClick:()=>n("breached"),className:`py-4 px-1 border-b-2 font-medium text-sm transition-colors flex items-center ${t==="breached"?"border-yellow-500 text-yellow-600":"border-transparent text-gray-500 hover:text-gray-700 hover:border-gray-300"}`,children:["Breached SLA",h.length>0&&r.jsx("span",{className:"ml-2 bg-red-100 text-red-800 py-0.5 px-2 rounded-full text-xs font-semibold",children:h.length})]})]})}),r.jsxs("div",{className:"p-6",children:[t==="overview"&&r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900 mb-4",children:"Average Completion Time by Tier"}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:[Object.entries(l.sla_performance.avg_completion_time).map(([p,y])=>r.jsxs("div",{className:"bg-gray-50 rounded-lg p-4 border border-gray-200",children:[r.jsx("p",{className:"text-sm font-medium text-gray-600 mb-2",children:p}),r.jsxs("p",{className:"text-2xl font-bold text-gray-900",children:[Number(y||0).toFixed(1)," hrs"]})]},p)),Object.keys(l.sla_performance.avg_completion_time).length===0&&r.jsx("div",{className:"col-span-full text-center py-8 text-gray-500",children:"No completion time data available"})]})]}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-lg p-6",children:[r.jsx("h3",{className:"text-lg font-semibold text-blue-900 mb-4",children:"Summary"}),r.jsxs("div",{className:"space-y-2 text-sm text-blue-800",children:[r.jsxs("p",{children:[" ",r.jsx("strong",{children:u.length})," jobs at risk (due in <4 hours)"]}),r.jsxs("p",{children:[" ",r.jsx("strong",{children:h.length})," jobs with breached SLA"]}),r.jsxs("p",{children:[" ",r.jsxs("strong",{children:[l.sla_performance.meeting_sla_percentage.toFixed(1),"%"]})," of orders meeting SLA commitments"]})]})]})]}),t==="at-risk"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Jobs At Risk (Due in <4 Hours)"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{htmlFor:"at-risk-sort",className:"text-sm text-gray-600",children:"Sort by:"}),r.jsxs("select",{id:"at-risk-sort",value:s,onChange:p=>a(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"time_remaining",children:"Time Remaining"}),r.jsx("option",{value:"tier",children:"Tier"})]})]})]}),u.length===0?r.jsxs("div",{className:"text-center py-12 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("svg",{className:"w-12 h-12 text-green-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"No Jobs At Risk"}),r.jsx("p",{className:"text-green-700",children:"All jobs are on track to meet their SLA commitments."})]}):r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Time Remaining"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:u.map(p=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",p.order.id.substring(0,8).toUpperCase()]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("p",{className:"text-sm text-gray-900",children:p.customer_name||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("p",{className:"text-sm text-gray-900",children:p.service_name||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${f(p.tier_name)}`,children:p.tier_name||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 text-orange-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-sm font-semibold text-orange-600",children:g(p.hours_remaining)})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${b(p.order.status)}`,children:p.order.status.replace(/_/g," ")})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx(ie,{to:`/admin/orders/${p.order.id}`,className:"text-blue-600 hover:text-blue-900 font-medium",children:"View Job"})})]},p.order.id))})]})})})]}),t==="breached"&&r.jsxs("div",{children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"SLA Breaches (Overdue)"}),r.jsxs("div",{className:"flex items-center space-x-2",children:[r.jsx("label",{htmlFor:"breached-sort",className:"text-sm text-gray-600",children:"Sort by:"}),r.jsxs("select",{id:"breached-sort",value:i,onChange:p=>o(p.target.value),className:"px-3 py-2 border border-gray-300 rounded-lg text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",children:[r.jsx("option",{value:"days_overdue",children:"Days Overdue"}),r.jsx("option",{value:"tier",children:"Tier"})]})]})]}),h.length===0?r.jsxs("div",{className:"text-center py-12 bg-green-50 rounded-lg border border-green-200",children:[r.jsx("svg",{className:"w-12 h-12 text-green-600 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("h3",{className:"text-lg font-semibold text-green-900 mb-2",children:"No Breached SLAs"}),r.jsx("p",{className:"text-green-700",children:"All orders are being completed within their SLA commitments."})]}):r.jsx("div",{className:"bg-white border border-gray-200 rounded-lg overflow-hidden",children:r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Order ID"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Customer"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Days Overdue"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Due Date"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:h.map(p=>r.jsxs("tr",{className:"hover:bg-red-50 transition-colors",children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("p",{className:"text-sm font-medium text-gray-900",children:["#",p.order.id.substring(0,8).toUpperCase()]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("p",{className:"text-sm text-gray-900",children:p.customer_name||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("p",{className:"text-sm text-gray-900",children:p.service_name||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${f(p.tier_name)}`,children:p.tier_name||"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 text-red-500 mr-2",fill:"currentColor",viewBox:"0 0 20 20",children:r.jsx("path",{fillRule:"evenodd",d:"M10 18a8 8 0 100-16 8 8 0 000 16zM8.707 7.293a1 1 0 00-1.414 1.414L8.586 10l-1.293 1.293a1 1 0 101.414 1.414L10 11.414l1.293 1.293a1 1 0 001.414-1.414L11.414 10l1.293-1.293a1 1 0 00-1.414-1.414L10 8.586 8.707 7.293z",clipRule:"evenodd"})}),r.jsx("span",{className:"text-sm font-semibold text-red-600",children:x(p.days_overdue)})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("p",{className:"text-sm text-gray-900",children:p.order.due_at?new Date(p.order.due_at).toLocaleDateString("en-US",{month:"short",day:"numeric",hour:"2-digit",minute:"2-digit"}):"N/A"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full ${b(p.order.status)}`,children:p.order.status.replace(/_/g," ")})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx(ie,{to:`/admin/orders/${p.order.id}`,className:"text-blue-600 hover:text-blue-900 font-medium",children:"View Job"})})]},p.order.id))})]})})})]})]})]})]}),!c&&!d&&!l&&r.jsxs("div",{className:"text-center py-12 bg-white rounded-lg border border-gray-200",children:[r.jsx("svg",{className:"w-12 h-12 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 19v-6a2 2 0 00-2-2H5a2 2 0 00-2 2v6a2 2 0 002 2h2a2 2 0 002-2zm0 0V9a2 2 0 012-2h2a2 2 0 012 2v10m-6 0a2 2 0 002 2h2a2 2 0 002-2m0 0V5a2 2 0 012-2h2a2 2 0 012 2v14a2 2 0 01-2 2h-2a2 2 0 01-2-2z"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No SLA Data Available"}),r.jsx("p",{className:"text-gray-600",children:"There is no SLA performance data to display at this time."})]})]})]})})},wbe=()=>{const e=Le(),[t,n]=Ye(),s=et(),a=ae(M=>M.authentication_state.auth_token),i=ae(M=>M.authentication_state.current_user),o=ae(M=>M.feature_flags.feature_b2b_enabled),l=ae(M=>M.show_toast),[c,d]=k.useState(t.get("search")||""),[m,u]=k.useState(!1),[h,f]=k.useState({company_name:"",main_contact_user_id:"",contract_start:null,contract_end:null,terms:null,payment_terms:"NET_30"}),[b,g]=k.useState({});k.useEffect(()=>{o||(l({type:"error",message:"B2B features are not enabled. Enable in Settings > Features.",duration:5e3}),e("/admin"))},[o,e,l]),k.useEffect(()=>{const M=t.get("search")||"";M!==c&&d(M)},[t]);const x=M=>{const D=new URLSearchParams(t);M?D.set("search",M):D.delete("search"),n(D)},p="https://123project-build-a-production-ready-w.launchpulse.ai",{data:y=[],isLoading:v,error:N,refetch:w}=pe({queryKey:["b2b-accounts",c],queryFn:async()=>(await te.get(`${p}/api/admin/b2b-accounts`,{params:{search:c||void 0},headers:{Authorization:`Bearer ${a}`}})).data.map(D=>({account:{id:D.account.id,company_name:D.account.company_name,main_contact_user_id:D.account.main_contact_user_id,contract_start:D.account.contract_start,contract_end:D.account.contract_end,terms:D.account.terms,payment_terms:D.account.payment_terms,is_active:D.account.is_active,created_at:D.account.created_at,updated_at:D.account.updated_at},main_contact:D.main_contact,locations_count:D.locations_count})),enabled:!!a&&o,staleTime:6e4,refetchOnWindowFocus:!1}),{data:j=[],isLoading:_}=pe({queryKey:["customer-users","active"],queryFn:async()=>(await te.get(`${p}/api/admin/users`,{params:{role:"CUSTOMER",status:"active"},headers:{Authorization:`Bearer ${a}`}})).data.users.map(D=>{var W,P,V,K;return{id:((W=D.user)==null?void 0:W.id)||D.id,name:((P=D.user)==null?void 0:P.name)||D.name,email:((V=D.user)==null?void 0:V.email)||D.email,role:((K=D.user)==null?void 0:K.role)||D.role}}),enabled:m&&!!a,staleTime:3e5}),S=ve({mutationFn:async M=>(await te.post(`${p}/api/admin/b2b-accounts`,M,{headers:{Authorization:`Bearer ${a}`}})).data,onSuccess:()=>{s.invalidateQueries({queryKey:["b2b-accounts"]}),u(!1),T(),l({type:"success",message:"B2B account created successfully",duration:5e3})},onError:M=>{var W,P;const D=((P=(W=M.response)==null?void 0:W.data)==null?void 0:P.message)||"Failed to create B2B account";l({type:"error",message:D,duration:5e3})}}),T=()=>{f({company_name:"",main_contact_user_id:"",contract_start:null,contract_end:null,terms:null,payment_terms:"NET_30"}),g({})},A=(M,D)=>{f(W=>({...W,[M]:D})),b[M]&&g(W=>{const P={...W};return delete P[M],P})},E=()=>{const M={};return h.company_name.trim()||(M.company_name="Company name is required"),h.main_contact_user_id||(M.main_contact_user_id="Main contact is required"),h.contract_start&&h.contract_end&&new Date(h.contract_start)>new Date(h.contract_end)&&(M.contract_end="Contract end date must be after start date"),g(M),Object.keys(M).length===0},R=async M=>{M.preventDefault(),E()&&S.mutate(h)},I=()=>{u(!1),T()},O=M=>{const D=M.target.value;d(D);const W=setTimeout(()=>{x(D)},300);return()=>clearTimeout(W)},L=M=>M?new Date(M).toLocaleDateString("en-US",{year:"numeric",month:"short",day:"numeric"}):"N/A",F=M=>M.replace("NET_","Net ");return!i||i.role!=="ADMIN"?r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen flex items-center justify-center bg-gray-50",children:r.jsxs("div",{className:"text-center",children:[r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Access Denied"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"You do not have permission to view this page."}),r.jsx(ie,{to:"/admin",className:"inline-block px-6 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Return to Dashboard"})]})})}):r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"B2B Accounts"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage enterprise customer accounts with specialized pricing and multi-location support"})]}),r.jsxs("button",{onClick:()=>u(!0),className:"inline-flex items-center justify-center px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors shadow-sm",children:[r.jsx("svg",{className:"w-5 h-5 mr-2",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 4v16m8-8H4"})}),"Create B2B Account"]})]}),r.jsx("div",{className:"mt-6",children:r.jsxs("div",{className:"relative",children:[r.jsx("input",{type:"text",placeholder:"Search by company name or contact...",value:c,onChange:O,className:"w-full px-4 py-3 pl-12 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),r.jsx("svg",{className:"absolute left-4 top-3.5 w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"})})]})})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[v&&r.jsxs("div",{className:"flex items-center justify-center py-12",children:[r.jsxs("svg",{className:"animate-spin h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"ml-3 text-gray-600",children:"Loading B2B accounts..."})]}),N&&!v&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("svg",{className:"w-12 h-12 text-red-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-red-700 font-medium mb-4",children:"Failed to load B2B accounts"}),r.jsx("button",{onClick:()=>w(),className:"px-4 py-2 bg-red-600 text-white rounded-lg hover:bg-red-700 transition-colors",children:"Retry"})]}),!v&&!N&&y.length===0&&r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-12 text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4"})}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"No B2B Accounts Yet"}),r.jsx("p",{className:"text-gray-600 mb-6",children:c?"No accounts match your search.":"Create your first B2B account to get started."}),!c&&r.jsx("button",{onClick:()=>u(!0),className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors",children:"Create B2B Account"})]}),!v&&!N&&y.length>0&&r.jsx("div",{className:"hidden lg:block bg-white rounded-xl shadow-sm border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Company Name"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Main Contact"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Contract Period"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Payment Terms"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Locations"}),r.jsx("th",{className:"px-6 py-4 text-left text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-4 text-right text-xs font-semibold text-gray-700 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:y.map(M=>r.jsxs("tr",{className:"hover:bg-gray-50 transition-colors cursor-pointer",onClick:()=>e(`/admin/b2b/${M.account.id}`),children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm font-semibold text-gray-900",children:M.account.company_name})}),r.jsxs("td",{className:"px-6 py-4 whitespace-nowrap",children:[r.jsx("div",{className:"text-sm text-gray-900",children:M.main_contact.name}),r.jsx("div",{className:"text-sm text-gray-500",children:M.main_contact.email})]}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"text-sm text-gray-900",children:[L(M.account.contract_start)," - ",L(M.account.contract_end)]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-blue-100 text-blue-800",children:F(M.account.payment_terms)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"text-sm text-gray-900",children:M.locations_count})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:M.account.is_active?r.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-green-100 text-green-800",children:"Active"}):r.jsx("span",{className:"px-3 py-1 inline-flex text-xs leading-5 font-semibold rounded-full bg-gray-100 text-gray-800",children:"Inactive"})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx(ie,{to:`/admin/b2b/${M.account.id}`,onClick:D=>D.stopPropagation(),className:"text-blue-600 hover:text-blue-900 font-semibold",children:"View"})})]},M.account.id))})]})}),!v&&!N&&y.length>0&&r.jsx("div",{className:"lg:hidden space-y-4",children:y.map(M=>r.jsxs("div",{className:"bg-white rounded-xl shadow-sm border border-gray-200 p-6",children:[r.jsxs("div",{className:"flex items-start justify-between mb-4",children:[r.jsxs("div",{className:"flex-1",children:[r.jsx("h3",{className:"text-lg font-bold text-gray-900 mb-1",children:M.account.company_name}),r.jsx("p",{className:"text-sm text-gray-600",children:M.main_contact.name}),r.jsx("p",{className:"text-sm text-gray-500",children:M.main_contact.email})]}),M.account.is_active?r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-green-100 text-green-800",children:"Active"}):r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-xs font-semibold bg-gray-100 text-gray-800",children:"Inactive"})]}),r.jsxs("div",{className:"space-y-2 mb-4",children:[r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx("span",{className:"text-gray-500 w-32",children:"Contract Period:"}),r.jsxs("span",{className:"text-gray-900",children:[L(M.account.contract_start)," - ",L(M.account.contract_end)]})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx("span",{className:"text-gray-500 w-32",children:"Payment Terms:"}),r.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-semibold bg-blue-100 text-blue-800",children:F(M.account.payment_terms)})]}),r.jsxs("div",{className:"flex items-center text-sm",children:[r.jsx("span",{className:"text-gray-500 w-32",children:"Locations:"}),r.jsx("span",{className:"text-gray-900",children:M.locations_count})]})]}),r.jsx(ie,{to:`/admin/b2b/${M.account.id}`,className:"block w-full text-center px-4 py-2 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-colors",children:"View Details"})]},M.account.id))})]}),m&&r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-60 transition-opacity",onClick:I}),r.jsx("div",{className:"flex min-h-screen items-center justify-center p-4",children:r.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-2xl w-full p-8",children:[r.jsx("button",{onClick:I,className:"absolute top-4 right-4 text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})}),r.jsxs("div",{className:"mb-6",children:[r.jsx("h2",{id:"modal-title",className:"text-2xl font-bold text-gray-900 mb-2",children:"Create B2B Account"}),r.jsx("p",{className:"text-sm text-gray-600",children:"Set up a new enterprise customer account with specialized pricing and multi-location support."})]}),r.jsxs("form",{onSubmit:R,className:"space-y-6",children:[r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"company_name",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Company Name ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),r.jsx("input",{type:"text",id:"company_name",required:!0,value:h.company_name,onChange:M=>A("company_name",M.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",placeholder:"Enter company name"}),b.company_name&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.company_name})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"main_contact_user_id",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Main Contact ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),_?r.jsxs("div",{className:"flex items-center px-4 py-3 border-2 border-gray-200 rounded-lg bg-gray-50",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5 text-gray-400 mr-2",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-gray-500 text-sm",children:"Loading contacts..."})]}):r.jsxs("select",{id:"main_contact_user_id",required:!0,value:h.main_contact_user_id,onChange:M=>A("main_contact_user_id",M.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[r.jsx("option",{value:"",children:"Select a customer"}),j.map(M=>r.jsxs("option",{value:M.id,children:[M.name," (",M.email,")"]},M.id))]}),b.main_contact_user_id&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.main_contact_user_id})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("label",{htmlFor:"contract_start",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Contract Start Date"}),r.jsx("input",{type:"date",id:"contract_start",value:h.contract_start||"",onChange:M=>A("contract_start",M.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"contract_end",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Contract End Date"}),r.jsx("input",{type:"date",id:"contract_end",value:h.contract_end||"",onChange:M=>A("contract_end",M.target.value||null),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all"}),b.contract_end&&r.jsx("p",{className:"mt-1 text-sm text-red-600",children:b.contract_end})]})]}),r.jsxs("div",{children:[r.jsxs("label",{htmlFor:"payment_terms",className:"block text-sm font-semibold text-gray-900 mb-2",children:["Payment Terms ",r.jsx("span",{className:"text-yellow-500",children:"*"})]}),r.jsxs("select",{id:"payment_terms",required:!0,value:h.payment_terms,onChange:M=>A("payment_terms",M.target.value),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all",children:[r.jsx("option",{value:"NET_15",children:"Net 15 (Payment due in 15 days)"}),r.jsx("option",{value:"NET_30",children:"Net 30 (Payment due in 30 days)"}),r.jsx("option",{value:"NET_45",children:"Net 45 (Payment due in 45 days)"}),r.jsx("option",{value:"NET_60",children:"Net 60 (Payment due in 60 days)"})]})]}),r.jsxs("div",{children:[r.jsx("label",{htmlFor:"terms",className:"block text-sm font-semibold text-gray-900 mb-2",children:"Contract Terms & Notes"}),r.jsx("textarea",{id:"terms",rows:4,value:h.terms||"",onChange:M=>A("terms",M.target.value||null),placeholder:"Enter additional contract details, special agreements, or internal notes...",className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 transition-all resize-vertical"})]}),r.jsxs("div",{className:"flex items-center justify-end space-x-3 pt-4",children:[r.jsx("button",{type:"button",onClick:I,className:"px-6 py-3 bg-gray-100 text-gray-900 font-semibold rounded-lg hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{type:"submit",disabled:S.isPending,className:"px-6 py-3 bg-yellow-400 text-black font-semibold rounded-lg hover:bg-yellow-500 transition-colors disabled:opacity-50 disabled:cursor-not-allowed flex items-center",children:S.isPending?r.jsxs(r.Fragment,{children:[r.jsxs("svg",{className:"animate-spin -ml-1 mr-2 h-4 w-4",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),"Creating..."]}):"Create Account"})]})]})]})})]})]})})},Nbe=async(e,t)=>(await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/b2b-accounts/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data,_be=async e=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/services",{headers:{Authorization:`Bearer ${e}`}})).data,kbe=async(e,t,n)=>{await te.patch(`https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/b2b-accounts/${e}`,t,{headers:{Authorization:`Bearer ${n}`}})},Sbe=async(e,t)=>{await te.post("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/b2b-locations",e,{headers:{Authorization:`Bearer ${t}`}})},Cbe=async(e,t,n)=>{await te.patch(`https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/b2b-locations/${e}`,t,{headers:{Authorization:`Bearer ${n}`}})},Abe=async(e,t)=>{await te.delete(`https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/b2b-locations/${e}`,{headers:{Authorization:`Bearer ${t}`}})},Pbe=async(e,t)=>{await te.post("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/contract-pricing",e,{headers:{Authorization:`Bearer ${t}`}})},Ebe=async(e,t,n)=>{await te.patch(`https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/contract-pricing/${e}`,t,{headers:{Authorization:`Bearer ${n}`}})},Obe=()=>{var se,$;const{account_id:e}=fr(),t=Le(),n=et(),s=ae(C=>C.authentication_state.auth_token),a=ae(C=>C.feature_flags.feature_b2b_enabled),i=ae(C=>C.show_toast),[o,l]=k.useState(!1),[c,d]=k.useState(!1),[m,u]=k.useState(!1),[h,f]=k.useState(null),[b,g]=k.useState(null),[x,p]=k.useState({label:"",address:"",contact_name:"",contact_phone:""}),[y,v]=k.useState({service_id:"",contract_price:""}),[N,w]=k.useState({company_name:"",contract_end:"",terms:"",is_active:!0});Y.useEffect(()=>{a||(i({type:"error",message:"B2B features are not enabled. Enable in Settings > Features.",duration:5e3}),t("/admin"))},[a,t,i]);const{data:j,isLoading:_,error:S}=pe({queryKey:["b2b-account",e],queryFn:()=>Nbe(e,s),enabled:!!e&&!!s&&a,staleTime:6e4,refetchOnWindowFocus:!1}),{data:T}=pe({queryKey:["admin-services"],queryFn:()=>_be(s),enabled:!!s,staleTime:3e5});Y.useEffect(()=>{j!=null&&j.account&&!m&&w({company_name:j.account.company_name,contract_end:j.account.contract_end||"",terms:j.account.terms||"",is_active:j.account.is_active})},[j,m]);const A=ve({mutationFn:C=>kbe(e,C,s),onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-account",e]}),i({type:"success",message:"Account updated successfully",duration:5e3}),u(!1)},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to update account",duration:5e3})}}),E=ve({mutationFn:C=>Sbe(C,s),onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-account",e]}),i({type:"success",message:"Location added successfully",duration:5e3}),l(!1),p({label:"",address:"",contact_name:"",contact_phone:""})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to add location",duration:5e3})}}),R=ve({mutationFn:({location_id:C,data:U})=>Cbe(C,U,s),onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-account",e]}),i({type:"success",message:"Location updated successfully",duration:5e3}),f(null),p({label:"",address:"",contact_name:"",contact_phone:""})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to update location",duration:5e3})}}),I=ve({mutationFn:C=>Abe(C,s),onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-account",e]}),i({type:"success",message:"Location deleted successfully",duration:5e3})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to delete location",duration:5e3})}}),O=ve({mutationFn:C=>Pbe(C,s),onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-account",e]}),i({type:"success",message:"Contract pricing created successfully",duration:5e3}),d(!1),v({service_id:"",contract_price:""})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to create pricing",duration:5e3})}}),L=ve({mutationFn:({pricing_id:C,data:U})=>Ebe(C,U,s),onSuccess:()=>{n.invalidateQueries({queryKey:["b2b-account",e]}),i({type:"success",message:"Contract pricing updated successfully",duration:5e3}),g(null),v({service_id:"",contract_price:""})},onError:C=>{var U,q;i({type:"error",message:((q=(U=C.response)==null?void 0:U.data)==null?void 0:q.message)||"Failed to update pricing",duration:5e3})}}),F=C=>{C.preventDefault(),A.mutate({company_name:N.company_name,contract_end:N.contract_end||null,terms:N.terms||null,is_active:N.is_active})},M=C=>{if(C.preventDefault(),!x.label||!x.address){i({type:"error",message:"Label and address are required",duration:5e3});return}h?R.mutate({location_id:h,data:{label:x.label,address:x.address,contact_name:x.contact_name||null,contact_phone:x.contact_phone||null}}):E.mutate({account_id:e,label:x.label,address:x.address,contact_name:x.contact_name||void 0,contact_phone:x.contact_phone||void 0})},D=C=>{f(C.id),p({label:C.label,address:C.address,contact_name:C.contact_name||"",contact_phone:C.contact_phone||""}),l(!0)},W=C=>{window.confirm("Are you sure you want to delete this location?")&&I.mutate(C)},P=C=>{if(C.preventDefault(),!y.service_id||!y.contract_price){i({type:"error",message:"Service and contract price are required",duration:5e3});return}const U={contract_price:parseFloat(y.contract_price)},q=JSON.stringify(U);b?L.mutate({pricing_id:b,data:{pricing_json:q}}):O.mutate({account_id:e,service_id:y.service_id,pricing_json:q})},V=C=>{g(C.id);const U=JSON.parse(C.pricing_json);v({service_id:C.service_id,contract_price:U.contract_price.toString()}),d(!0)},K=()=>{l(!1),f(null),p({label:"",address:"",contact_name:"",contact_phone:""})},ne=()=>{d(!1),g(null),v({service_id:"",contract_price:""})};if(S)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:r.jsx("div",{className:"max-w-3xl mx-auto",children:r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6 text-center",children:[r.jsx("h2",{className:"text-xl font-semibold text-red-900 mb-2",children:"Error Loading Account"}),r.jsx("p",{className:"text-red-700 mb-4",children:(($=(se=S.response)==null?void 0:se.data)==null?void 0:$.message)||"Failed to load B2B account details"}),r.jsx(ie,{to:"/admin/b2b",className:"inline-block bg-red-600 text-white px-6 py-2 rounded-lg hover:bg-red-700 transition-colors",children:"Back to B2B Accounts"})]})})})});if(_||!j)return r.jsx(r.Fragment,{children:r.jsx("div",{className:"min-h-screen bg-gray-50 py-12 px-4",children:r.jsx("div",{className:"max-w-7xl mx-auto",children:r.jsxs("div",{className:"animate-pulse space-y-6",children:[r.jsx("div",{className:"h-12 bg-gray-200 rounded w-1/3"}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg p-8 space-y-4",children:[r.jsx("div",{className:"h-8 bg-gray-200 rounded w-1/2"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded w-2/3"}),r.jsx("div",{className:"h-6 bg-gray-200 rounded w-1/2"})]})]})})})});const{account:G,main_contact:oe,locations:H,contract_pricing:ee}=j,J=T||[],X=ee.map(C=>{const U=J.find(de=>de.id===C.service_id),q=JSON.parse(C.pricing_json);return{...C,service_name:(U==null?void 0:U.name)||"Unknown Service",contract_price:q.contract_price,retail_price:q.retail_price||null}});return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsxs(ie,{to:"/admin/b2b",className:"text-sm text-gray-500 hover:text-gray-700 mb-2 inline-flex items-center",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})}),"Back to B2B Accounts"]}),r.jsxs("div",{className:"flex items-center gap-4 mt-2",children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:G.company_name}),r.jsx("span",{className:`px-3 py-1 rounded-full text-sm font-medium ${G.is_active?"bg-green-100 text-green-800":"bg-red-100 text-red-800"}`,children:G.is_active?"Active":"Inactive"})]})]}),r.jsx("button",{onClick:()=>u(!m),className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium",children:m?"Cancel Edit":"Edit Account"})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Account Information"})}),r.jsx("div",{className:"p-6",children:m?r.jsxs("form",{onSubmit:F,className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Company Name *"}),r.jsx("input",{type:"text",required:!0,value:N.company_name,onChange:C=>w({...N,company_name:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contract End Date"}),r.jsx("input",{type:"date",value:N.contract_end,onChange:C=>w({...N,contract_end:C.target.value}),className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contract Terms"}),r.jsx("textarea",{rows:4,value:N.terms,onChange:C=>w({...N,terms:C.target.value}),placeholder:"Enter contract terms and conditions...",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex items-center",children:[r.jsx("input",{type:"checkbox",id:"is_active",checked:N.is_active,onChange:C=>w({...N,is_active:C.target.checked}),className:"w-5 h-5 text-blue-600 border-gray-300 rounded focus:ring-blue-500"}),r.jsx("label",{htmlFor:"is_active",className:"ml-2 text-sm font-medium text-gray-700",children:"Account Active"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",disabled:A.isPending,className:"bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:A.isPending?"Saving...":"Save Changes"}),r.jsx("button",{type:"button",onClick:()=>u(!1),className:"bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Cancel"})]})]}):r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Company Name"}),r.jsx("p",{className:"text-base text-gray-900 mt-1",children:G.company_name})]}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Contract Start"}),r.jsx("p",{className:"text-base text-gray-900 mt-1",children:G.contract_start?new Date(G.contract_start).toLocaleDateString():"Not set"})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Contract End"}),r.jsx("p",{className:"text-base text-gray-900 mt-1",children:G.contract_end?new Date(G.contract_end).toLocaleDateString():"Not set"})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Payment Terms"}),r.jsx("p",{className:"text-base text-gray-900 mt-1",children:G.payment_terms.replace("_"," ")})]}),G.terms&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Contract Terms"}),r.jsx("p",{className:"text-base text-gray-900 mt-1 whitespace-pre-wrap",children:G.terms})]})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Delivery Locations"}),r.jsx("button",{onClick:()=>l(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"+ Add Location"})]}),r.jsx("div",{className:"p-6",children:H.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsxs("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:[r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z"}),r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 11a3 3 0 11-6 0 3 3 0 016 0z"})]}),r.jsx("p",{className:"mt-4 text-gray-500",children:"No locations added yet"}),r.jsx("button",{onClick:()=>l(!0),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Add your first location"})]}):r.jsx("div",{className:"space-y-4",children:H.map(C=>r.jsx("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-gray-300 transition-colors",children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center gap-2 mb-2",children:[r.jsx("h3",{className:"font-semibold text-gray-900",children:C.label}),!C.is_active&&r.jsx("span",{className:"px-2 py-1 bg-gray-100 text-gray-600 text-xs rounded-full",children:"Inactive"})]}),r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:C.address}),(C.contact_name||C.contact_phone)&&r.jsxs("div",{className:"text-sm text-gray-500",children:[C.contact_name&&r.jsxs("p",{children:["Contact: ",C.contact_name]}),C.contact_phone&&r.jsxs("p",{children:["Phone: ",C.contact_phone]})]})]}),r.jsxs("div",{className:"flex gap-2 ml-4",children:[r.jsx("button",{onClick:()=>D(C),className:"text-gray-600 hover:text-blue-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Edit location",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"})})}),r.jsx("button",{onClick:()=>W(C.id),className:"text-gray-600 hover:text-red-600 p-2 rounded-lg hover:bg-gray-100 transition-colors",title:"Delete location",children:r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"})})})]})]})},C.id))})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50 flex items-center justify-between",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Contract Pricing"}),r.jsx("button",{onClick:()=>d(!0),className:"bg-blue-600 text-white px-4 py-2 rounded-lg hover:bg-blue-700 transition-colors text-sm font-medium",children:"+ Add Pricing Rule"})]}),r.jsx("div",{className:"p-6",children:X.length===0?r.jsxs("div",{className:"text-center py-12",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8c-1.657 0-3 .895-3 2s1.343 2 3 2 3 .895 3 2-1.343 2-3 2m0-8c1.11 0 2.08.402 2.599 1M12 8V7m0 1v8m0 0v1m0-1c-1.11 0-2.08-.402-2.599-1M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"mt-4 text-gray-500",children:"No contract pricing rules configured"}),r.jsx("button",{onClick:()=>d(!0),className:"mt-4 text-blue-600 hover:text-blue-700 font-medium text-sm",children:"Add your first pricing rule"})]}):r.jsx("div",{className:"overflow-x-auto",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Contract Price"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Retail Price"}),r.jsx("th",{className:"px-4 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Discount"}),r.jsx("th",{className:"px-4 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:X.map(C=>{const U=C.retail_price?((C.retail_price-C.contract_price)/C.retail_price*100).toFixed(1):"N/A";return r.jsxs("tr",{className:"hover:bg-gray-50",children:[r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm font-medium text-gray-900",children:C.service_name}),r.jsxs("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-900 font-semibold",children:["",Number(C.contract_price||0).toFixed(2)]}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm text-gray-500",children:C.retail_price?`${Number(C.retail_price).toFixed(2)}`:"N/A"}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-sm",children:U!=="N/A"?r.jsxs("span",{className:"text-green-600 font-medium",children:[U,"%"]}):r.jsx("span",{className:"text-gray-400",children:"N/A"})}),r.jsx("td",{className:"px-4 py-4 whitespace-nowrap text-right text-sm",children:r.jsx("button",{onClick:()=>V(C),className:"text-blue-600 hover:text-blue-700 font-medium mr-3",children:"Edit"})})]},C.id)})})]})})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Main Contact"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Name"}),r.jsx("p",{className:"text-base text-gray-900 mt-1",children:oe.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Email"}),r.jsx("a",{href:`mailto:${oe.email}`,className:"text-base text-blue-600 hover:text-blue-700 mt-1 block",children:oe.email})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-500",children:"Role"}),r.jsx("span",{className:"inline-block mt-1 px-3 py-1 bg-gray-100 text-gray-700 rounded-full text-sm font-medium",children:oe.role})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Account Metrics"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Locations"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:H.length})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Pricing Rules"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:ee.length})]}),r.jsxs("div",{className:"flex justify-between items-center",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Active Locations"}),r.jsx("span",{className:"text-lg font-semibold text-gray-900",children:H.filter(C=>C.is_active).length})]})]})]})]})]})}),o&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:K}),r.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-lg w-full transform transition-all",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:h?"Edit Location":"Add New Location"}),r.jsx("button",{onClick:K,className:"text-gray-400 hover:text-gray-500 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("form",{onSubmit:M,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Location Label *"}),r.jsx("input",{type:"text",required:!0,value:x.label,onChange:C=>p({...x,label:C.target.value}),placeholder:"e.g., Dublin Store, Cork Warehouse",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Address *"}),r.jsx("textarea",{required:!0,rows:3,value:x.address,onChange:C=>p({...x,address:C.target.value}),placeholder:"Full delivery/installation address",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Name"}),r.jsx("input",{type:"text",value:x.contact_name,onChange:C=>p({...x,contact_name:C.target.value}),placeholder:"On-site contact person",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contact Phone"}),r.jsx("input",{type:"tel",value:x.contact_phone,onChange:C=>p({...x,contact_phone:C.target.value}),placeholder:"+353 87 470 0356",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",disabled:E.isPending||R.isPending,className:"flex-1 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:E.isPending||R.isPending?"Saving...":h?"Update Location":"Add Location"}),r.jsx("button",{type:"button",onClick:K,className:"flex-1 bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Cancel"})]})]})]})]})}),c&&r.jsx("div",{className:"fixed inset-0 z-50 overflow-y-auto","aria-labelledby":"modal-title",role:"dialog","aria-modal":"true",children:r.jsxs("div",{className:"flex min-h-screen items-center justify-center p-4",children:[r.jsx("div",{className:"fixed inset-0 bg-gray-900 bg-opacity-75 transition-opacity",onClick:ne}),r.jsxs("div",{className:"relative bg-white rounded-xl shadow-xl max-w-lg w-full transform transition-all",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:b?"Edit Contract Pricing":"Add Contract Pricing"}),r.jsx("button",{onClick:ne,className:"text-gray-400 hover:text-gray-500 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("form",{onSubmit:P,className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Service *"}),r.jsxs("select",{required:!0,value:y.service_id,onChange:C=>v({...y,service_id:C.target.value}),disabled:!!b,className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent disabled:bg-gray-100 disabled:cursor-not-allowed",children:[r.jsx("option",{value:"",children:"Select a service"}),J.map(C=>r.jsx("option",{value:C.id,children:C.name},C.id))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-1",children:"Contract Price () *"}),r.jsx("input",{type:"number",required:!0,min:"0",step:"0.01",value:y.contract_price,onChange:C=>v({...y,contract_price:C.target.value}),placeholder:"0.00",className:"w-full px-4 py-2 border border-gray-300 rounded-lg focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),r.jsx("p",{className:"text-xs text-gray-500 mt-1",children:"This price will override the retail price for this B2B account"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{type:"submit",disabled:O.isPending||L.isPending,className:"flex-1 bg-blue-600 text-white px-6 py-2 rounded-lg hover:bg-blue-700 transition-colors font-medium disabled:opacity-50 disabled:cursor-not-allowed",children:O.isPending||L.isPending?"Saving...":b?"Update Pricing":"Add Pricing"}),r.jsx("button",{type:"button",onClick:ne,className:"flex-1 bg-gray-100 text-gray-700 px-6 py-2 rounded-lg hover:bg-gray-200 transition-colors font-medium",children:"Cancel"})]})]})]})]})})]})})},Tbe=async e=>{if(!e)throw new Error("No auth token");const t=await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/staff/jobs",{headers:{Authorization:`Bearer ${e}`}}),n=new Date;return t.data.map(s=>{const a=s.due_at?new Date(s.due_at):null,i=a?a<n:!1;return{order:{id:s.id,customer_id:s.customer_id,tier_id:s.tier_id,status:s.status,due_at:s.due_at,revision_count:Number(s.revision_count||0),assigned_staff_id:s.assigned_staff_id,created_at:s.created_at,updated_at:s.updated_at},customer_name:s.customer_name||"Unknown",service_name:s.service_name||"Unknown",tier_name:s.tier_name||"Unknown",is_overdue:i,priority_level:i||s.tier_name==="Enterprise"?"HIGH":"NORMAL"}})},Mbe=async e=>{if(!e)throw new Error("No auth token");return(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/bookings",{params:{status:"CONFIRMED"},headers:{Authorization:`Bearer ${e}`}})).data},Lbe=()=>{const e=Le(),t=ae(y=>y.authentication_state.auth_token),n=ae(y=>y.authentication_state.current_user),{data:s=[],isLoading:a,error:i,refetch:o}=pe({queryKey:["staff","jobs",n==null?void 0:n.id],queryFn:()=>Tbe(t),enabled:!!t&&!!n,refetchInterval:6e4,staleTime:3e4,retry:1}),{data:l=[],isLoading:c,error:d,refetch:m}=pe({queryKey:["staff","bookings","today"],queryFn:()=>Mbe(t),enabled:!!t&&!!n,refetchInterval:6e4,staleTime:3e4,retry:1}),u=k.useMemo(()=>{const y=new Date,v=y.toISOString().split("T")[0],N=n==null?void 0:n.id,w=N?s.filter(j=>j.order.assigned_staff_id===N):[];return{assigned_jobs_count:w.length,awaiting_action_count:w.filter(j=>j.order.status==="IN_PRODUCTION"||j.order.status==="PROOF_SENT").length,due_today_count:w.filter(j=>j.order.due_at&&j.order.due_at.split("T")[0]===v).length,overdue_count:w.filter(j=>j.order.due_at&&new Date(j.order.due_at)<y).length}},[s,n==null?void 0:n.id]),h=k.useMemo(()=>{const y=new Date;return[...s].sort((v,N)=>{var T,A;const w=v.order.due_at?new Date(v.order.due_at)<y:!1,j=N.order.due_at?new Date(N.order.due_at)<y:!1;if(w&&!j)return-1;if(!w&&j)return 1;const _=((T=v.tier_name)==null?void 0:T.toLowerCase())==="enterprise",S=((A=N.tier_name)==null?void 0:A.toLowerCase())==="enterprise";return _&&!S?-1:!_&&S?1:v.order.due_at&&N.order.due_at?new Date(v.order.due_at).getTime()-new Date(N.order.due_at).getTime():v.order.due_at?-1:N.order.due_at?1:0}).slice(0,5)},[s]),f=k.useMemo(()=>{const y=new Date().toISOString().split("T")[0];return l.filter(v=>v.start_at.split("T")[0]===y).sort((v,N)=>new Date(v.start_at).getTime()-new Date(N.start_at).getTime())},[l]),b=y=>{if(!y)return null;const v=new Date,w=new Date(y).getTime()-v.getTime();return Math.ceil(w/(1e3*60*60*24))},g=y=>new Date(y).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),x=a||c,p=i||d;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-gradient-to-br from-gray-50 to-gray-100",children:[r.jsx("div",{className:"bg-white shadow-sm border-b border-gray-200",children:r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[r.jsxs("h1",{className:"text-3xl font-bold text-gray-900",children:["Welcome, ",n==null?void 0:n.name]}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Staff Dashboard - Manage your assigned jobs and today's schedule"})]})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[p&&r.jsx("div",{className:"mb-6 bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"h-5 w-5 text-red-600 mr-2",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsx("p",{className:"text-sm text-red-700",children:"Failed to load dashboard data. Please try again."})]}),r.jsx("button",{onClick:()=>{o(),m()},className:"px-4 py-2 bg-red-100 text-red-700 rounded-md text-sm font-medium hover:bg-red-200 transition-colors",children:"Retry"})]})}),r.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6 mb-8",children:[r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"My Assigned Jobs"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:x?r.jsx("span",{className:"inline-block w-12 h-8 bg-gray-200 animate-pulse rounded"}):u.assigned_jobs_count})]}),r.jsx("div",{className:"p-3 bg-blue-100 rounded-lg",children:r.jsx("svg",{className:"h-8 w-8 text-blue-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})})})]}),r.jsx(ie,{to:"/staff/jobs",className:"mt-4 block text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"View All "})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Awaiting My Action"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:x?r.jsx("span",{className:"inline-block w-12 h-8 bg-gray-200 animate-pulse rounded"}):u.awaiting_action_count})]}),r.jsx("div",{className:"p-3 bg-yellow-100 rounded-lg",children:r.jsx("svg",{className:"h-8 w-8 text-yellow-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z"})})})]}),r.jsx(ie,{to:"/staff/jobs?status=IN_PRODUCTION",className:"mt-4 block text-sm text-yellow-600 hover:text-yellow-700 font-medium transition-colors",children:"View All "})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Due Today"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-gray-900",children:x?r.jsx("span",{className:"inline-block w-12 h-8 bg-gray-200 animate-pulse rounded"}):u.due_today_count})]}),r.jsx("div",{className:"p-3 bg-orange-100 rounded-lg",children:r.jsx("svg",{className:"h-8 w-8 text-orange-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})})})]}),r.jsx(ie,{to:"/staff/jobs",className:"mt-4 block text-sm text-orange-600 hover:text-orange-700 font-medium transition-colors",children:"View All "})]})}),r.jsx("div",{className:"bg-white rounded-xl shadow-lg border border-red-200 overflow-hidden",children:r.jsxs("div",{className:"p-6",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-gray-600",children:"Overdue"}),r.jsx("p",{className:"mt-2 text-3xl font-bold text-red-600",children:x?r.jsx("span",{className:"inline-block w-12 h-8 bg-gray-200 animate-pulse rounded"}):u.overdue_count})]}),r.jsx("div",{className:"p-3 bg-red-100 rounded-lg",children:r.jsx("svg",{className:"h-8 w-8 text-red-600",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 9v2m0 4h.01m-6.938 4h13.856c1.54 0 2.502-1.667 1.732-3L13.732 4c-.77-1.333-2.694-1.333-3.464 0L3.34 16c-.77 1.333.192 3 1.732 3z"})})})]}),r.jsx(ie,{to:"/staff/jobs",className:"mt-4 block text-sm text-red-600 hover:text-red-700 font-medium transition-colors",children:"View All "})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden mb-8",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Top Priority Jobs"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Sorted by urgency: overdue  Enterprise tier  earliest due date"})]}),x?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"space-y-4",children:[1,2,3].map(y=>r.jsx("div",{className:"h-20 bg-gray-200 animate-pulse rounded-lg"},y))})}):h.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("svg",{className:"h-16 w-16 text-gray-300 mx-auto mb-4",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 12h6m-6 4h6m2 5H7a2 2 0 01-2-2V5a2 2 0 012-2h5.586a1 1 0 01.707.293l5.414 5.414a1 1 0 01.293.707V19a2 2 0 01-2 2z"})}),r.jsx("p",{className:"text-gray-500 text-lg",children:"No jobs assigned yet"})]}):r.jsx("div",{className:"divide-y divide-gray-200",children:h.map(y=>{var j;const v=b(y.order.due_at),N=y.is_overdue,w=((j=y.tier_name)==null?void 0:j.toLowerCase())==="enterprise";return r.jsx("div",{className:`p-6 hover:bg-gray-50 transition-colors cursor-pointer ${N?"bg-red-50 border-l-4 border-red-600":""}`,onClick:()=>e(`/staff/jobs/${y.order.id}`),children:r.jsxs("div",{className:"flex items-start justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[r.jsxs("span",{className:"text-sm font-medium text-gray-500",children:["#",y.order.id.slice(-8).toUpperCase()]}),w&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:" Enterprise"}),N&&r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-red-100 text-red-800",children:" Overdue"}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${y.order.status==="IN_PRODUCTION"?"bg-blue-100 text-blue-800":y.order.status==="PROOF_SENT"?"bg-purple-100 text-purple-800":"bg-gray-100 text-gray-800"}`,children:y.order.status.replace(/_/g," ")})]}),r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:y.customer_name}),r.jsxs("p",{className:"text-sm text-gray-600 mb-2",children:[y.service_name,"  ",y.tier_name," Tier"]}),y.order.due_at&&r.jsx("p",{className:`text-sm font-medium ${N?"text-red-600":v!==null&&v<=2?"text-orange-600":"text-gray-600"}`,children:N?`Overdue by ${Math.abs(v||0)} day${Math.abs(v||0)!==1?"s":""}`:v!==null?`Due in ${v} day${v!==1?"s":""}`:"Due date not set"})]}),r.jsx("div",{className:"ml-4",children:r.jsx("button",{onClick:_=>{_.stopPropagation(),e(`/staff/jobs/${y.order.id}`)},className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors shadow-sm",children:"View Job"})})]})},y.order.id)})})]}),r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Quick Actions"})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsx(ie,{to:"/staff/jobs",className:"block w-full px-6 py-4 bg-yellow-500 text-black rounded-lg text-center font-semibold hover:bg-yellow-600 transition-all duration-200 shadow-md hover:shadow-lg",children:"View All Jobs"}),r.jsx(ie,{to:"/staff/calendar",className:"block w-full px-6 py-4 bg-gray-100 text-gray-900 rounded-lg text-center font-semibold hover:bg-gray-200 transition-all duration-200 border border-gray-300",children:"View Calendar"})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 bg-gray-50",children:[r.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Today's Bookings"}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:new Date().toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"})})]}),x?r.jsx("div",{className:"p-6",children:r.jsx("div",{className:"space-y-3",children:[1,2,3].map(y=>r.jsx("div",{className:"h-16 bg-gray-200 animate-pulse rounded-lg"},y))})}):f.length===0?r.jsxs("div",{className:"p-12 text-center",children:[r.jsx("svg",{className:"h-12 w-12 text-gray-300 mx-auto mb-3",fill:"none",viewBox:"0 0 24 24",stroke:"currentColor",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("p",{className:"text-gray-500",children:"No bookings scheduled for today"})]}):r.jsx("div",{className:"divide-y divide-gray-200 max-h-96 overflow-y-auto",children:f.map(y=>r.jsx("div",{className:"p-4 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsxs("span",{className:"text-sm font-semibold text-gray-900",children:[g(y.start_at)," - ",g(y.end_at)]}),y.is_emergency&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-yellow-100 text-yellow-800",children:" Emergency"})]}),r.jsx("p",{className:"text-sm text-gray-900 font-medium",children:y.customer_name||"Customer"}),r.jsx("p",{className:"text-sm text-gray-600",children:y.service_name||"Service"})]}),r.jsx(ie,{to:`/staff/jobs/${y.quote_id}`,className:"text-sm text-blue-600 hover:text-blue-700 font-medium transition-colors",children:"View Job "})]})},y.id))})]})]})]}),r.jsx("div",{className:"md:hidden h-20"})]}),r.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-3 z-40 shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-between gap-2",children:[r.jsxs(ie,{to:"/staff/jobs",className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-yellow-400 text-black font-semibold rounded-lg",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),"View Jobs"]}),r.jsxs(ie,{to:"/staff/calendar",className:"flex-1 flex items-center justify-center gap-2 px-4 py-3 bg-gray-100 text-gray-900 font-semibold rounded-lg border border-gray-300",children:[r.jsx("svg",{className:"w-5 h-5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),"Calendar"]})]})})]})},$be=async(e,t)=>{const n=new URLSearchParams;t.status&&n.append("status",t.status),t.priority&&n.append("priority",t.priority),t.assigned_to&&n.append("assigned_to",t.assigned_to);const s=await te.get(`https://123project-build-a-production-ready-w.launchpulse.ai/api/staff/jobs?${n.toString()}`,{headers:{Authorization:`Bearer ${e}`}}),a=new Date;return s.data.map(o=>{const l=o.due_at?new Date(o.due_at):null,c=l?l<a:!1,d=l?Math.ceil((l.getTime()-a.getTime())/(1e3*60*60*24)):null,m=c||o.tier_name==="Enterprise"?"HIGH":"NORMAL";return{order:{id:o.id,customer_id:o.customer_id,tier_id:o.tier_id,status:o.status,due_at:o.due_at,total_subtotal:Number(o.total_subtotal||0),total_amount:Number(o.total_amount||0),revision_count:Number(o.revision_count||0),assigned_staff_id:o.assigned_staff_id,created_at:o.created_at,updated_at:o.updated_at},customer_name:o.customer_name,customer_email:o.customer_email,service_name:o.service_name,tier_name:o.tier_name,is_overdue:c,priority_level:m,days_until_due:d}})},Rbe=()=>{const e=Le(),[t,n]=Ye(),s=ae(j=>j.authentication_state.auth_token),a=ae(j=>j.authentication_state.current_user);ae(j=>j.show_toast);const i={status:t.get("status")||null,priority:t.get("priority")||null,assigned_to:t.get("assigned_to")||null},[o,l]=k.useState(i),[c,d]=k.useState({sort_by:"due_at",sort_order:"asc"});k.useEffect(()=>{const j=new URLSearchParams;o.status&&j.set("status",o.status),o.priority&&j.set("priority",o.priority),o.assigned_to&&j.set("assigned_to",o.assigned_to),n(j)},[o,n]);const{data:m=[],isLoading:u,error:h,refetch:f}=pe({queryKey:["staff-jobs",o],queryFn:()=>$be(s,o),enabled:!!s,staleTime:6e4,refetchOnWindowFocus:!1}),b=k.useMemo(()=>!m||m.length===0?[]:[...m].sort((_,S)=>{if(_.is_overdue&&!S.is_overdue)return-1;if(!_.is_overdue&&S.is_overdue)return 1;if(_.tier_name==="Enterprise"&&S.tier_name!=="Enterprise")return-1;if(_.tier_name!=="Enterprise"&&S.tier_name==="Enterprise")return 1;if(c.sort_by==="due_at"){const E=_.order.due_at?new Date(_.order.due_at).getTime():1/0,R=S.order.due_at?new Date(S.order.due_at).getTime():1/0;return c.sort_order==="asc"?E-R:R-E}if(c.sort_by==="customer_name"){const E=_.customer_name.localeCompare(S.customer_name);return c.sort_order==="asc"?E:-E}const T=new Date(_.order.created_at).getTime(),A=new Date(S.order.created_at).getTime();return c.sort_order==="asc"?T-A:A-T}),[m,c]),g=(j,_)=>{l(S=>({...S,[j]:_}))},x=()=>{l({status:null,priority:null,assigned_to:null})},p=j=>{d(_=>({sort_by:j,sort_order:_.sort_by===j&&_.sort_order==="asc"?"desc":"asc"}))},y=j=>{e(`/staff/jobs/${j}`)},v=j=>({QUOTE_REQUESTED:"bg-gray-100 text-gray-800",APPROVED:"bg-blue-100 text-blue-800",IN_PRODUCTION:"bg-teal-100 text-teal-800",PROOF_SENT:"bg-purple-100 text-purple-800",AWAITING_APPROVAL:"bg-orange-100 text-orange-800",READY_FOR_PICKUP:"bg-green-100 text-green-800",COMPLETED:"bg-green-600 text-white",CANCELLED:"bg-red-100 text-red-800"})[j]||"bg-gray-100 text-gray-800",N=j=>({QUOTE_REQUESTED:"Review quote",APPROVED:"Begin work",IN_PRODUCTION:"Upload proof",PROOF_SENT:"Awaiting customer",AWAITING_APPROVAL:"Awaiting customer",READY_FOR_PICKUP:"Prepare pickup",COMPLETED:"Completed",CANCELLED:"Cancelled"})[j]||"Continue work",w=(j,_)=>j===null?"No due date":_?`Overdue by ${Math.abs(j)} day${Math.abs(j)>1?"s":""}`:j===0?"Due today":j===1?"Due tomorrow":`Due in ${j} day${j>1?"s":""}`;return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-3xl font-bold text-gray-900",children:"My Jobs"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"Manage your assigned jobs and priorities"})]}),r.jsxs("button",{onClick:()=>f(),className:"px-4 py-2 bg-white border border-gray-300 rounded-lg text-sm font-medium text-gray-700 hover:bg-gray-50 transition-colors",children:[r.jsx("svg",{className:"w-5 h-5 inline-block mr-2 -mt-0.5",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),"Refresh"]})]})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex space-x-2 overflow-x-auto py-4",children:[r.jsx("button",{onClick:()=>g("assigned_to",(a==null?void 0:a.id)||null),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${o.assigned_to===(a==null?void 0:a.id)?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"Assigned to Me"}),r.jsx("button",{onClick:()=>g("assigned_to",null),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${o.assigned_to===null?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:"All Jobs"}),r.jsx("div",{className:"w-px bg-gray-300 mx-2"}),["APPROVED","IN_PRODUCTION","PROOF_SENT","AWAITING_APPROVAL","READY_FOR_PICKUP"].map(j=>r.jsx("button",{onClick:()=>g("status",o.status===j?null:j),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${o.status===j?"bg-yellow-400 text-black":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:j.replace(/_/g," ")},j)),r.jsx("div",{className:"w-px bg-gray-300 mx-2"}),r.jsx("button",{onClick:()=>g("priority",o.priority==="high"?null:"high"),className:`px-4 py-2 rounded-lg text-sm font-medium transition-colors whitespace-nowrap ${o.priority==="high"?"bg-red-600 text-white":"bg-gray-100 text-gray-700 hover:bg-gray-200"}`,children:" High Priority"}),(o.status||o.priority)&&r.jsx("button",{onClick:x,className:"px-4 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium hover:bg-gray-200 transition-colors whitespace-nowrap",children:"Clear Filters"})]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:[u&&r.jsx("div",{className:"space-y-4",children:[1,2,3].map(j=>r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-6 animate-pulse",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"space-y-3 flex-1",children:[r.jsx("div",{className:"h-4 bg-gray-200 rounded w-1/4"}),r.jsx("div",{className:"h-3 bg-gray-200 rounded w-1/3"})]}),r.jsx("div",{className:"h-8 bg-gray-200 rounded w-24"})]})},j))}),h&&r.jsxs("div",{className:"bg-red-50 border border-red-200 rounded-lg p-6",children:[r.jsxs("div",{className:"flex items-center",children:[r.jsx("svg",{className:"w-5 h-5 text-red-600 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("h3",{className:"text-sm font-medium text-red-800",children:"Failed to load jobs"}),r.jsx("p",{className:"mt-1 text-sm text-red-700",children:h instanceof Error?h.message:"An error occurred"})]})]}),r.jsx("button",{onClick:()=>f(),className:"mt-4 px-4 py-2 bg-red-600 text-white rounded-lg text-sm font-medium hover:bg-red-700 transition-colors",children:"Retry"})]}),!u&&!h&&b.length===0&&r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-12 text-center",children:[r.jsx("svg",{className:"w-16 h-16 text-gray-400 mx-auto mb-4",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5H7a2 2 0 00-2 2v12a2 2 0 002 2h10a2 2 0 002-2V7a2 2 0 00-2-2h-2M9 5a2 2 0 002 2h2a2 2 0 002-2M9 5a2 2 0 012-2h2a2 2 0 012 2"})}),r.jsx("h3",{className:"text-lg font-medium text-gray-900 mb-2",children:"No jobs found"}),r.jsx("p",{className:"text-sm text-gray-600",children:o.status||o.priority?"Try adjusting your filters to see more jobs.":"No jobs assigned yet. Check back soon!"}),(o.status||o.priority)&&r.jsx("button",{onClick:x,className:"mt-4 px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",children:"Clear Filters"})]}),!u&&!h&&b.length>0&&r.jsx("div",{className:"hidden md:block bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:r.jsxs("table",{className:"min-w-full divide-y divide-gray-200",children:[r.jsx("thead",{className:"bg-gray-50",children:r.jsxs("tr",{children:[r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.jsxs("button",{onClick:()=>p("customer_name"),className:"flex items-center space-x-1 hover:text-gray-700",children:[r.jsx("span",{children:"Customer"}),c.sort_by==="customer_name"&&r.jsx("svg",{className:`w-4 h-4 ${c.sort_order==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Service"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Tier"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Status"}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:r.jsxs("button",{onClick:()=>p("due_at"),className:"flex items-center space-x-1 hover:text-gray-700",children:[r.jsx("span",{children:"Due Date"}),c.sort_by==="due_at"&&r.jsx("svg",{className:`w-4 h-4 ${c.sort_order==="desc"?"rotate-180":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M5 15l7-7 7 7"})})]})}),r.jsx("th",{className:"px-6 py-3 text-left text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Next Action"}),r.jsx("th",{className:"px-6 py-3 text-right text-xs font-medium text-gray-500 uppercase tracking-wider",children:"Actions"})]})}),r.jsx("tbody",{className:"bg-white divide-y divide-gray-200",children:b.map(j=>r.jsxs("tr",{className:`hover:bg-gray-50 cursor-pointer transition-colors ${j.is_overdue?"bg-red-50":""}`,onClick:()=>y(j.order.id),children:[r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsxs("div",{className:"flex items-center",children:[j.priority_level==="HIGH"&&r.jsx("span",{className:"mr-2",children:j.is_overdue?"":j.tier_name==="Enterprise"?"":""}),r.jsxs("div",{children:[r.jsx("div",{className:"text-sm font-medium text-gray-900",children:j.customer_name}),r.jsxs("div",{className:"text-xs text-gray-500",children:["#",j.order.id.slice(0,8)]})]})]})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-900",children:j.service_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:j.tier_name})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(j.order.status)}`,children:j.order.status.replace(/_/g," ")})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:`text-sm ${j.is_overdue?"text-red-600 font-semibold":"text-gray-900"}`,children:w(j.days_until_due,j.is_overdue)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap",children:r.jsx("div",{className:"text-sm text-gray-600",children:N(j.order.status)})}),r.jsx("td",{className:"px-6 py-4 whitespace-nowrap text-right text-sm font-medium",children:r.jsx(ie,{to:`/staff/jobs/${j.order.id}`,className:"text-blue-600 hover:text-blue-800 transition-colors",onClick:_=>_.stopPropagation(),children:"View Job"})})]},j.order.id))})]})}),!u&&!h&&b.length>0&&r.jsx("div",{className:"md:hidden space-y-4",children:b.map(j=>r.jsxs("div",{onClick:()=>y(j.order.id),className:`bg-white rounded-lg shadow-sm border border-gray-200 p-6 hover:shadow-md transition-shadow cursor-pointer ${j.is_overdue?"border-l-4 border-l-red-600":""}`,children:[r.jsxs("div",{className:"flex items-center justify-between mb-4",children:[r.jsxs("div",{className:"flex items-center space-x-2",children:[j.priority_level==="HIGH"&&r.jsx("span",{className:"text-2xl",children:j.is_overdue?"":j.tier_name==="Enterprise"?"":""}),r.jsxs("span",{className:"text-xs text-gray-500",children:["#",j.order.id.slice(0,8)]})]}),r.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium ${v(j.order.status)}`,children:j.order.status.replace(/_/g," ")})]}),r.jsxs("div",{className:"mb-4",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-1",children:j.customer_name}),r.jsx("p",{className:"text-sm text-gray-600",children:j.service_name})]}),r.jsxs("div",{className:"grid grid-cols-2 gap-4 mb-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Tier"}),r.jsx("span",{className:"inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium bg-blue-100 text-blue-800",children:j.tier_name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Due Date"}),r.jsx("p",{className:`text-sm font-medium ${j.is_overdue?"text-red-600":"text-gray-900"}`,children:w(j.days_until_due,j.is_overdue)})]})]}),r.jsx("div",{className:"pt-4 border-t border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-xs text-gray-500 mb-1",children:"Next Action"}),r.jsx("p",{className:"text-sm font-medium text-gray-900",children:N(j.order.status)})]}),r.jsx(ie,{to:`/staff/jobs/${j.order.id}`,className:"px-4 py-2 bg-blue-600 text-white rounded-lg text-sm font-medium hover:bg-blue-700 transition-colors",onClick:_=>_.stopPropagation(),children:"View Job"})]})})]},j.order.id))}),!u&&!h&&b.length>0&&r.jsxs("div",{className:"mt-6 text-sm text-gray-600 text-center",children:["Showing ",b.length," job",b.length!==1?"s":"",o.status&&` in ${o.status.replace(/_/g," ")}`,o.priority==="high"&&" (high priority)",o.assigned_to===(a==null?void 0:a.id)&&" assigned to you"]}),r.jsx("div",{className:"md:hidden h-20"})]})]}),r.jsx("div",{className:"md:hidden fixed bottom-0 left-0 right-0 bg-white border-t border-gray-200 p-3 z-40 shadow-lg",children:r.jsxs("div",{className:"flex items-center justify-between gap-3",children:[r.jsxs("div",{className:"flex items-center gap-2 text-sm",children:[r.jsx("span",{className:"font-semibold text-gray-900",children:b.length}),r.jsx("span",{className:"text-gray-600",children:"jobs"}),b.filter(j=>j.is_overdue).length>0&&r.jsxs("span",{className:"px-2 py-0.5 bg-red-100 text-red-700 rounded-full text-xs font-medium",children:[b.filter(j=>j.is_overdue).length," overdue"]})]}),r.jsxs("div",{className:"flex gap-2",children:[r.jsx(ie,{to:"/staff",className:"px-3 py-2 bg-gray-100 text-gray-700 rounded-lg text-sm font-medium",children:"Dashboard"}),r.jsx(ie,{to:"/staff/calendar",className:"px-3 py-2 bg-yellow-400 text-black rounded-lg text-sm font-medium",children:"Calendar"})]})]})})]})},Ea="https://123project-build-a-production-ready-w.launchpulse.ai",Ibe=async(e,t)=>(await te.get(`${Ea}/api/orders/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data,Dbe=async(e,t)=>(await te.get(`${Ea}/api/admin/users/${e}`,{headers:{Authorization:`Bearer ${t}`}})).data,Fbe=async(e,t)=>{const s=(await te.get(`${Ea}/api/public/tiers`,{headers:{Authorization:`Bearer ${t}`}})).data.find(a=>a.tier.id===e);return(s==null?void 0:s.features)||[]},Bbe=async(e,t)=>(await te.get(`${Ea}/api/message-threads/${e}/messages`,{headers:{Authorization:`Bearer ${t}`}})).data,zbe=async(e,t,n)=>(await te.post(`${Ea}/api/message-threads/${e}/messages`,{body:t},{headers:{Authorization:`Bearer ${n}`}})).data,qbe=async(e,t)=>{const n=new FormData;return n.append("file",e),(await te.post(`${Ea}/api/uploads`,n,{headers:{Authorization:`Bearer ${t}`,"Content-Type":"multipart/form-data"}})).data},Ube=async(e,t,n,s)=>(await te.post(`${Ea}/api/orders/${e}/proofs`,{file_url:t,internal_notes:n},{headers:{Authorization:`Bearer ${s}`}})).data,Wbe=async(e,t,n,s)=>(await te.patch(`${Ea}/api/orders/${e}`,{status:t,notes:n},{headers:{Authorization:`Bearer ${s}`}})).data,Vbe=()=>{var de,he;const{id:e}=fr(),t=Le();et();const n=ae(le=>le.authentication_state.auth_token),s=ae(le=>le.authentication_state.current_user),a=ae(le=>le.show_toast),[i,o]=k.useState(""),[l,c]=k.useState(!1),[d,m]=k.useState(!1),[u,h]=k.useState(null),[f,b]=k.useState(""),[g,x]=k.useState({new_status:"",notes:""}),[p,y]=k.useState({});k.useEffect(()=>{(!n||!s)&&t("/login?returnTo=/staff/jobs/"+e)},[n,s,t,e]);const{data:v,isLoading:N,error:w,refetch:j}=pe({queryKey:["staff-job",e],queryFn:()=>Ibe(e,n),enabled:!!n&&!!e,staleTime:3e4,refetchOnWindowFocus:!1}),{data:_}=pe({queryKey:["customer",v==null?void 0:v.order.customer_id],queryFn:()=>Dbe(v.order.customer_id,n),enabled:!!n&&!!(v!=null&&v.order.customer_id),staleTime:6e4}),{data:S=[]}=pe({queryKey:["tier-features",v==null?void 0:v.tier.id],queryFn:()=>Fbe(v.tier.id,n),enabled:!!n&&!!(v!=null&&v.tier.id),staleTime:6e4}),{data:T=[],refetch:A}=pe({queryKey:["thread-messages",(de=v==null?void 0:v.message_thread)==null?void 0:de.id],queryFn:()=>Bbe(v.message_thread.id,n),enabled:!!n&&!!((he=v==null?void 0:v.message_thread)!=null&&he.id),staleTime:1e4}),E=ve({mutationFn:le=>zbe(v.message_thread.id,le,n),onSuccess:()=>{o(""),A(),a({type:"success",message:"Message sent successfully",duration:3e3})},onError:le=>{var be,z;a({type:"error",message:((z=(be=le.response)==null?void 0:be.data)==null?void 0:z.message)||"Failed to send message",duration:5e3})}}),R=ve({mutationFn:async()=>{if(!u)throw new Error("No file selected");const le=await qbe(u,n);return Ube(e,le.file_url,f,n)},onSuccess:()=>{c(!1),h(null),b(""),j(),a({type:"success",message:"Proof uploaded and customer notified",duration:5e3})},onError:le=>{var be,z;a({type:"error",message:((z=(be=le.response)==null?void 0:be.data)==null?void 0:z.message)||"Failed to upload proof",duration:5e3})}}),I=ve({mutationFn:()=>Wbe(e,g.new_status,g.notes,n),onSuccess:()=>{m(!1),x({new_status:"",notes:""}),j(),a({type:"success",message:"Order status updated successfully",duration:3e3})},onError:le=>{var be,z;a({type:"error",message:((z=(be=le.response)==null?void 0:be.data)==null?void 0:z.message)||"Failed to update status",duration:5e3})}}),O=k.useCallback(le=>{if(le.preventDefault(),!i.trim()){a({type:"warning",message:"Message cannot be empty",duration:3e3});return}if(i.length>1e3){a({type:"warning",message:"Message must be 1000 characters or less",duration:3e3});return}E.mutate(i)},[i,E,a]),L=k.useCallback(()=>{if(!u){a({type:"warning",message:"Please select a file",duration:3e3});return}R.mutate()},[u,R,a]),F=k.useCallback(()=>{if(!g.new_status){a({type:"warning",message:"Please select a status",duration:3e3});return}I.mutate()},[g,I,a]),M=le=>{if(!le)return null;const be=new Date(le),z=new Date,B=be.getTime()-z.getTime();return Math.ceil(B/(1e3*60*60*24))},D=le=>{switch(le){case"QUOTE_REQUESTED":return"bg-gray-100 text-gray-800";case"APPROVED":return"bg-blue-100 text-blue-800";case"IN_PRODUCTION":return"bg-purple-100 text-purple-800";case"PROOF_SENT":return"bg-yellow-100 text-yellow-800";case"AWAITING_APPROVAL":return"bg-orange-100 text-orange-800";case"READY_FOR_PICKUP":return"bg-green-100 text-green-800";case"COMPLETED":return"bg-green-600 text-white";case"CANCELLED":return"bg-red-600 text-white";default:return"bg-gray-100 text-gray-800"}},W=le=>{var z;const be=(z=le.target.files)==null?void 0:z[0];if(be){if(be.size>50*1024*1024){a({type:"error",message:"File size must be less than 50MB",duration:5e3});return}h(be)}},P=le=>{y(be=>({...be,[le]:!be[le]}))},V=le=>new Date(le).toLocaleString("en-US",{month:"short",day:"numeric",year:"numeric",hour:"2-digit",minute:"2-digit"}),K=le=>{switch(le){case"QUOTE_REQUESTED":return["APPROVED","IN_PRODUCTION"];case"APPROVED":return["IN_PRODUCTION"];case"IN_PRODUCTION":return["PROOF_SENT","AWAITING_APPROVAL"];case"PROOF_SENT":return["AWAITING_APPROVAL","IN_PRODUCTION"];case"AWAITING_APPROVAL":return["IN_PRODUCTION","READY_FOR_PICKUP"];case"READY_FOR_PICKUP":return["COMPLETED"];default:return[]}};if(N)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center",children:[r.jsx("div",{className:"animate-spin rounded-full h-12 w-12 border-b-2 border-blue-600 mx-auto"}),r.jsx("p",{className:"mt-4 text-gray-600",children:"Loading job details..."})]})});if(w||!v)return r.jsx("div",{className:"min-h-screen bg-gray-50 flex items-center justify-center",children:r.jsxs("div",{className:"text-center max-w-md",children:[r.jsx(Ho,{className:"w-16 h-16 text-red-600 mx-auto mb-4"}),r.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-2",children:"Job Not Found"}),r.jsx("p",{className:"text-gray-600 mb-6",children:"The job you're looking for doesn't exist or you don't have access to it."}),r.jsx(ie,{to:"/staff/jobs",className:"inline-flex items-center px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:"Back to Job Queue"})]})});const{order:ne,quote:G,service:oe,tier:H,booking:ee,proof_versions:J,message_thread:X}=v,se=_==null?void 0:_.user,$=_==null?void 0:_.profile,C=M(ne.due_at),U=C!==null&&C<0,q=K(ne.status);return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200 sticky top-0 z-10",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between gap-4",children:[r.jsxs("div",{className:"flex items-center gap-4",children:[r.jsx(ie,{to:"/staff/jobs",className:"text-gray-600 hover:text-gray-900 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsxs("div",{children:[r.jsxs("h1",{className:"text-2xl md:text-3xl font-bold text-gray-900",children:["Job #",ne.id.slice(0,8).toUpperCase()]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:oe.name})]})]}),r.jsxs("div",{className:"flex items-center gap-3",children:[r.jsx("span",{className:`px-4 py-2 rounded-lg text-sm font-semibold ${D(ne.status)}`,children:ne.status.replace(/_/g," ")}),C!==null&&r.jsxs("div",{className:`flex items-center gap-2 px-4 py-2 rounded-lg ${U?"bg-red-100 text-red-800":C<=2?"bg-yellow-100 text-yellow-800":"bg-gray-100 text-gray-800"}`,children:[r.jsx(hs,{className:"w-4 h-4"}),r.jsx("span",{className:"text-sm font-medium",children:U?`${Math.abs(C)} days overdue`:`Due in ${C} days`})]})]})]})})}),r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-8",children:r.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-8",children:[r.jsxs("div",{className:"lg:col-span-2 space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-200",children:r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(go,{className:"w-5 h-5 text-blue-600"}),"Customer Information"]})}),r.jsx("div",{className:"p-6",children:se?r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Name"}),r.jsx("p",{className:"text-base font-medium text-gray-900",children:se.name})]}),r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Email"}),r.jsxs("a",{href:`mailto:${se.email}`,className:"text-base text-blue-600 hover:text-blue-700 font-medium flex items-center gap-2 transition-colors",children:[r.jsx(op,{className:"w-4 h-4"}),se.email]})]}),($==null?void 0:$.phone)&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-1",children:"Phone"}),r.jsxs("a",{href:`tel:${$.phone}`,className:"text-base text-blue-600 hover:text-blue-700 font-medium flex items-center gap-2 transition-colors",children:[r.jsx(u1,{className:"w-4 h-4"}),$.phone]})]})]}),($==null?void 0:$.company_name)&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Company"}),r.jsx("p",{className:"text-base font-medium text-gray-900",children:$.company_name})]}),($==null?void 0:$.address)&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Address"}),r.jsx("p",{className:"text-base text-gray-700",children:$.address})]})]}):r.jsx("p",{className:"text-gray-500",children:"Loading customer information..."})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-200",children:r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(wi,{className:"w-5 h-5 text-blue-600"}),"Job Details"]})}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{className:"grid grid-cols-1 sm:grid-cols-2 gap-4",children:[r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Service"}),r.jsx("p",{className:"text-base font-medium text-gray-900",children:oe.name})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Tier"}),r.jsx("span",{className:"inline-flex items-center px-3 py-1 rounded-full text-sm font-medium bg-blue-100 text-blue-800",children:H.name})]}),ee&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Booking Date"}),r.jsxs("p",{className:"text-base font-medium text-gray-900 flex items-center gap-2",children:[r.jsx(ji,{className:"w-4 h-4 text-gray-600"}),V(ee.start_at)]})]}),ne.due_at&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Due Date"}),r.jsxs("p",{className:`text-base font-medium flex items-center gap-2 ${U?"text-red-600":"text-gray-900"}`,children:[r.jsx(hs,{className:"w-4 h-4"}),V(ne.due_at)]})]})]}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600 mb-2",children:"Revision Count"}),r.jsxs("div",{className:"flex items-center gap-2",children:[r.jsx("div",{className:"flex-1 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${Math.min(ne.revision_count/3*100,100)}%`}})}),r.jsxs("span",{className:"text-sm font-medium text-gray-900",children:[ne.revision_count," / 3"]})]})]}),(G==null?void 0:G.notes)&&r.jsxs("div",{children:[r.jsx("p",{className:"text-sm text-gray-600",children:"Quote Notes"}),r.jsx("p",{className:"text-base text-gray-700 mt-1 bg-gray-50 p-3 rounded-md",children:G.notes})]})]})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-200",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(NC,{className:"w-5 h-5 text-blue-600"}),"Tier Requirements - ",H.name]}),r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:"Track deliverable completion for this tier"})]}),r.jsx("div",{className:"p-6",children:S.length>0?r.jsxs("div",{className:"space-y-3",children:[S.sort((le,be)=>le.sort_order-be.sort_order).map(le=>r.jsxs("div",{className:"flex items-start gap-3 p-3 rounded-lg hover:bg-gray-50 transition-colors",children:[r.jsx("input",{type:"checkbox",id:`checklist-${le.id}`,checked:p[le.id]||!1,onChange:()=>P(le.id),className:"mt-1 w-5 h-5 text-blue-600 rounded focus:ring-2 focus:ring-blue-500 focus:ring-offset-2 cursor-pointer"}),r.jsxs("label",{htmlFor:`checklist-${le.id}`,className:"flex-1 cursor-pointer",children:[r.jsx("p",{className:`text-sm font-medium transition-colors ${p[le.id]?"text-gray-500 line-through":"text-gray-900"}`,children:le.feature_label}),le.feature_value&&r.jsx("p",{className:"text-sm text-gray-600 mt-1",children:le.feature_value})]})]},le.id)),r.jsxs("div",{className:"mt-4 pt-4 border-t border-gray-200",children:[r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("span",{className:"text-sm text-gray-600",children:"Completion Progress"}),r.jsxs("span",{className:"text-sm font-semibold text-blue-600",children:[Object.values(p).filter(Boolean).length," / ",S.length]})]}),r.jsx("div",{className:"mt-2 bg-gray-200 rounded-full h-2",children:r.jsx("div",{className:"bg-blue-600 h-2 rounded-full transition-all duration-300",style:{width:`${S.length>0?Object.values(p).filter(Boolean).length/S.length*100:0}%`}})})]}),r.jsx("div",{className:"mt-4 p-3 bg-yellow-50 border border-yellow-200 rounded-lg",children:r.jsxs("p",{className:"text-sm text-yellow-800",children:[r.jsx("strong",{children:"Note:"})," Checklist progress is tracked locally. Backend persistence coming soon."]})})]}):r.jsx("p",{className:"text-gray-500 text-center py-8",children:"No tier requirements defined"})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsxs("div",{className:"px-6 py-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-200 flex items-center justify-between",children:[r.jsxs("h2",{className:"text-xl font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(Rr,{className:"w-5 h-5 text-blue-600"}),"Design Proofs"]}),r.jsxs("button",{onClick:()=>c(!0),className:"px-4 py-2 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 flex items-center gap-2 shadow-md hover:shadow-lg",children:[r.jsx(Vw,{className:"w-4 h-4"}),"Upload New Proof"]})]}),r.jsx("div",{className:"p-6",children:J.length>0?r.jsx("div",{className:"space-y-4",children:J.sort((le,be)=>be.version_number-le.version_number).map(le=>r.jsxs("div",{className:"border border-gray-200 rounded-lg p-4 hover:border-blue-300 transition-colors",children:[r.jsxs("div",{className:"flex items-start justify-between mb-3",children:[r.jsxs("div",{children:[r.jsxs("h3",{className:"text-base font-semibold text-gray-900",children:["Version ",le.version_number]}),r.jsx("p",{className:"text-sm text-gray-600",children:V(le.created_at)})]}),r.jsxs("span",{className:`px-3 py-1 rounded-full text-xs font-semibold ${le.status==="APPROVED"?"bg-green-100 text-green-800":le.status==="REVISION_REQUESTED"?"bg-orange-100 text-orange-800":"bg-blue-100 text-blue-800"}`,children:[le.status==="SENT"&&" Awaiting customer review",le.status==="APPROVED"&&" Approved",le.status==="REVISION_REQUESTED"&&" Changes requested"]})]}),r.jsx("div",{className:"flex flex-wrap gap-3",children:r.jsxs("a",{href:le.file_url,target:"_blank",rel:"noopener noreferrer",className:"inline-flex items-center gap-2 px-4 py-2 bg-gray-100 text-gray-900 rounded-md hover:bg-gray-200 transition-colors text-sm font-medium",children:[r.jsx(Rr,{className:"w-4 h-4"}),"View Full Size"]})}),le.customer_comment&&r.jsxs("div",{className:"mt-4 p-4 bg-orange-50 border border-orange-200 rounded-lg",children:[r.jsxs("p",{className:"text-sm font-medium text-orange-900 mb-2 flex items-center gap-2",children:[r.jsx(Zf,{className:"w-4 h-4"}),"Customer Feedback:"]}),r.jsx("p",{className:"text-sm text-orange-800",children:le.customer_comment})]}),le.internal_notes&&r.jsxs("div",{className:"mt-3 p-3 bg-gray-50 rounded-md",children:[r.jsx("p",{className:"text-xs text-gray-600 mb-1",children:"Internal Notes:"}),r.jsx("p",{className:"text-sm text-gray-700",children:le.internal_notes})]})]},le.id))}):r.jsxs("div",{className:"text-center py-12",children:[r.jsx(Rr,{className:"w-16 h-16 text-gray-300 mx-auto mb-4"}),r.jsx("p",{className:"text-gray-500 mb-4",children:"No proofs uploaded yet"}),r.jsxs("button",{onClick:()=>c(!0),className:"inline-flex items-center gap-2 px-6 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors",children:[r.jsx(Vw,{className:"w-5 h-5"}),"Upload First Proof"]})]})})]})]}),r.jsxs("div",{className:"space-y-6",children:[r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden",children:[r.jsx("div",{className:"px-6 py-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-200",children:r.jsx("h2",{className:"text-lg font-semibold text-gray-900",children:"Update Status"})}),r.jsx("div",{className:"p-6",children:r.jsxs("div",{className:"space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Current Status"}),r.jsx("span",{className:`inline-block px-4 py-2 rounded-lg text-sm font-semibold ${D(ne.status)}`,children:ne.status.replace(/_/g," ")})]}),q.length>0?r.jsx("button",{onClick:()=>m(!0),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-all duration-200 shadow-md hover:shadow-lg",children:"Update Status"}):r.jsx("p",{className:"text-sm text-gray-500 text-center py-2",children:"No status updates available"})]})})]}),r.jsxs("div",{className:"bg-white rounded-xl shadow-lg border border-gray-100 overflow-hidden sticky top-24",children:[r.jsx("div",{className:"px-6 py-4 bg-gradient-to-br from-blue-50 to-indigo-50 border-b border-gray-200",children:r.jsxs("h2",{className:"text-lg font-semibold text-gray-900 flex items-center gap-2",children:[r.jsx(Zf,{className:"w-5 h-5 text-blue-600"}),"Messages"]})}),r.jsxs("div",{className:"h-96 flex flex-col",children:[r.jsx("div",{className:"flex-1 overflow-y-auto p-4 space-y-3",children:T.length>0?T.map(le=>{const be=le.sender_user_id===(s==null?void 0:s.id);return r.jsx("div",{className:`flex ${be?"justify-end":"justify-start"}`,children:r.jsxs("div",{className:`max-w-[80%] rounded-lg px-4 py-3 ${be?"bg-blue-600 text-white":"bg-gray-100 text-gray-900"}`,children:[!be&&r.jsx("p",{className:"text-xs font-medium mb-1 opacity-80",children:le.sender_name||"Customer"}),r.jsx("p",{className:"text-sm leading-relaxed",children:le.body}),r.jsx("p",{className:`text-xs mt-2 ${be?"text-blue-100":"text-gray-500"}`,children:V(le.created_at)})]})},le.id)}):r.jsxs("div",{className:"text-center py-8",children:[r.jsx(Zf,{className:"w-12 h-12 text-gray-300 mx-auto mb-2"}),r.jsx("p",{className:"text-gray-500 text-sm",children:"No messages yet"})]})}),X&&r.jsxs("form",{onSubmit:O,className:"border-t border-gray-200 p-4",children:[r.jsxs("div",{className:"flex gap-2",children:[r.jsx("textarea",{value:i,onChange:le=>o(le.target.value),onKeyDown:le=>{le.key==="Enter"&&!le.shiftKey&&(le.preventDefault(),O(le))},placeholder:"Type your message...",maxLength:1e3,rows:2,className:"flex-1 px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 resize-none text-sm"}),r.jsx("button",{type:"submit",disabled:!i.trim()||E.isPending,className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:E.isPending?r.jsx("div",{className:"animate-spin rounded-full h-5 w-5 border-b-2 border-white"}):r.jsx(MR,{className:"w-5 h-5"})})]}),r.jsxs("p",{className:"text-xs text-gray-500 mt-1",children:[i.length," / 1000 characters"]})]})]})]})]})]})})]}),l&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Upload New Proof"}),r.jsx("button",{onClick:()=>{c(!1),h(null),b("")},className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:r.jsx(lr,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["Proof File ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsx("input",{type:"file",accept:".pdf,.png,.jpg,.jpeg",onChange:W,className:"block w-full text-sm text-gray-900 border border-gray-300 rounded-lg cursor-pointer bg-gray-50 focus:outline-none focus:ring-2 focus:ring-blue-500 p-2"}),u&&r.jsxs("p",{className:"mt-2 text-sm text-gray-600",children:["Selected: ",u.name," (",(u.size/1024/1024).toFixed(2)," MB)"]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Internal Notes (Optional)"}),r.jsx("textarea",{value:f,onChange:le=>b(le.target.value),placeholder:"Add notes for your team (not visible to customer)...",rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 resize-none text-sm"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>{c(!1),h(null),b("")},className:"flex-1 px-4 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:L,disabled:!u||R.isPending,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:R.isPending?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Uploading..."]}):"Upload & Notify Customer"})]})]})]})}),d&&r.jsx("div",{className:"fixed inset-0 z-50 flex items-center justify-center p-4 bg-black bg-opacity-60",children:r.jsxs("div",{className:"bg-white rounded-xl shadow-2xl max-w-lg w-full",children:[r.jsxs("div",{className:"px-6 py-4 border-b border-gray-200 flex items-center justify-between",children:[r.jsx("h3",{className:"text-xl font-semibold text-gray-900",children:"Update Order Status"}),r.jsx("button",{onClick:()=>{m(!1),x({new_status:"",notes:""})},className:"text-gray-400 hover:text-gray-600 transition-colors","aria-label":"Close modal",children:r.jsx(lr,{className:"w-6 h-6"})})]}),r.jsxs("div",{className:"p-6 space-y-4",children:[r.jsxs("div",{children:[r.jsxs("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:["New Status ",r.jsx("span",{className:"text-red-600",children:"*"})]}),r.jsxs("select",{value:g.new_status,onChange:le=>x(be=>({...be,new_status:le.target.value})),className:"w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 text-sm",children:[r.jsx("option",{value:"",children:"Select new status..."}),q.map(le=>r.jsx("option",{value:le,children:le.replace(/_/g," ")},le))]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-sm font-medium text-gray-700 mb-2",children:"Notes (Optional)"}),r.jsx("textarea",{value:g.notes,onChange:le=>x(be=>({...be,notes:le.target.value})),placeholder:"Add notes about this status change...",rows:3,className:"w-full px-4 py-2 border-2 border-gray-200 rounded-lg focus:border-blue-500 focus:ring-4 focus:ring-blue-100 resize-none text-sm"})]}),r.jsxs("div",{className:"flex gap-3 pt-4",children:[r.jsx("button",{onClick:()=>{m(!1),x({new_status:"",notes:""})},className:"flex-1 px-4 py-3 bg-gray-100 text-gray-900 rounded-lg font-medium hover:bg-gray-200 transition-colors",children:"Cancel"}),r.jsx("button",{onClick:F,disabled:!g.new_status||I.isPending,className:"flex-1 px-4 py-3 bg-blue-600 text-white rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed",children:I.isPending?r.jsxs("span",{className:"flex items-center justify-center gap-2",children:[r.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-white"}),"Updating..."]}):"Update Status"})]})]})]})})]})},Hbe=e=>{const t=e.getFullYear(),n=e.getMonth(),s=new Date(t,n,1),a=new Date(t,n+1,0);return{start_date:s.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0]}},Ux=e=>{const t=e.getDay(),n=e.getDate()-t+(t===0?-6:1),s=new Date(e.setDate(n)),a=new Date(s);return a.setDate(a.getDate()+6),{start_date:s.toISOString().split("T")[0],end_date:a.toISOString().split("T")[0]}},Kbe=e=>{const t=e.toISOString().split("T")[0];return{start_date:t,end_date:t}},Ms=e=>new Date(e).toLocaleTimeString("en-US",{hour:"numeric",minute:"2-digit",hour12:!0}),vc=e=>new Date(e).toLocaleDateString("en-US",{weekday:"long",month:"long",day:"numeric",year:"numeric"}),n3=e=>{switch(e){case"CONFIRMED":return"bg-green-100 text-green-800";case"PENDING":return"bg-yellow-100 text-yellow-800";case"CANCELLED":return"bg-red-100 text-red-800";case"COMPLETED":return"bg-gray-100 text-gray-800";default:return"bg-gray-100 text-gray-800"}},Gbe=()=>{const[e,t]=Ye(),n=e.get("view"),s=e.get("date"),[a,i]=k.useState(n||"month"),[o,l]=k.useState(s||new Date().toISOString().split("T")[0]),[c,d]=k.useState(null),m=ae(L=>L.authentication_state.auth_token),u=ae(L=>L.ui_state.is_mobile);ae(L=>L.show_toast),k.useEffect(()=>{if(n!==a||s!==o){const L=new URLSearchParams;L.set("view",a),L.set("date",o),t(L)}},[a,o,n,s,t]);const h=k.useMemo(()=>{const L=new Date(o);return a==="month"?Hbe(L):a==="week"?Ux(L):Kbe(L)},[a,o]),{data:f}=pe({queryKey:["calendar-settings"],queryFn:async()=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/admin/calendar-settings",{headers:{Authorization:`Bearer ${m}`}})).data,staleTime:3e5,enabled:!!m}),{data:b=[],isLoading:g,error:x,refetch:p}=pe({queryKey:["staff-calendar-bookings",h.start_date,h.end_date],queryFn:async()=>(await te.get("https://123project-build-a-production-ready-w.launchpulse.ai/api/bookings",{params:{start_date:h.start_date,end_date:h.end_date},headers:{Authorization:`Bearer ${m}`}})).data,staleTime:6e4,refetchOnWindowFocus:!0,enabled:!!m&&!!h.start_date}),y=L=>{i(L)},v=()=>{const L=new Date().toISOString().split("T")[0];l(L)},N=()=>{const L=new Date(o);a==="month"?L.setMonth(L.getMonth()-1):a==="week"?L.setDate(L.getDate()-7):L.setDate(L.getDate()-1),l(L.toISOString().split("T")[0])},w=()=>{const L=new Date(o);a==="month"?L.setMonth(L.getMonth()+1):a==="week"?L.setDate(L.getDate()+7):L.setDate(L.getDate()+1),l(L.toISOString().split("T")[0])},j=L=>{d({booking:L,customer:{id:L.customer_id,name:"Customer"},service:{id:L.quote_id,name:L.service_name||"Service"}})},_=()=>{d(null)},S=()=>r.jsxs("div",{className:"flex space-x-2 bg-gray-100 rounded-lg p-1",children:[r.jsx("button",{onClick:()=>y("month"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="month"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Month"}),r.jsx("button",{onClick:()=>y("week"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="week"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Week"}),r.jsx("button",{onClick:()=>y("day"),className:`px-4 py-2 rounded-md text-sm font-medium transition-colors ${a==="day"?"bg-white text-gray-900 shadow-sm":"text-gray-600 hover:text-gray-900"}`,children:"Day"})]}),T=()=>{const L=new Date(o);let F="";if(a==="month")F=L.toLocaleDateString("en-US",{month:"long",year:"numeric"});else if(a==="week"){const M=Ux(new Date(o));F=`${vc(M.start_date)} - ${vc(M.end_date)}`}else F=vc(o);return r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx("button",{onClick:N,className:"p-2 rounded-md hover:bg-gray-100 transition-colors","aria-label":"Previous",children:r.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M15 19l-7-7 7-7"})})}),r.jsx("h2",{className:"text-lg font-semibold text-gray-900 min-w-[200px] text-center",children:F}),r.jsx("button",{onClick:w,className:"p-2 rounded-md hover:bg-gray-100 transition-colors","aria-label":"Next",children:r.jsx("svg",{className:"w-5 h-5 text-gray-600",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})}),r.jsx("button",{onClick:v,className:"px-4 py-2 bg-blue-600 text-white text-sm font-medium rounded-md hover:bg-blue-700 transition-colors",children:"Today"})]})},A=()=>{const L=new Date(o),F=L.getFullYear(),M=L.getMonth(),D=new Date(F,M,1),W=new Date(F,M+1,0),P=D.getDay(),V=W.getDate(),K=[];for(let G=0;G<(P===0?6:P-1);G++)K.push(null);for(let G=1;G<=V;G++)K.push(G);const ne=["Mon","Tue","Wed","Thu","Fri","Sat","Sun"];return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:"grid grid-cols-7 border-b border-gray-200",children:ne.map(G=>r.jsx("div",{className:"py-3 text-center text-xs font-semibold text-gray-600 uppercase",children:G},G))}),r.jsx("div",{className:"grid grid-cols-7",children:K.map((G,oe)=>{if(G===null)return r.jsx("div",{className:"min-h-[120px] border-r border-b border-gray-100"},`empty-${oe}`);const H=new Date(F,M,G).toISOString().split("T")[0],ee=b.filter(X=>new Date(X.start_at).toISOString().split("T")[0]===H),J=H===new Date().toISOString().split("T")[0];return r.jsxs("div",{className:`min-h-[120px] border-r border-b border-gray-100 p-2 ${J?"bg-blue-50":""}`,children:[r.jsx("div",{className:`text-sm font-semibold mb-2 ${J?"text-blue-600":"text-gray-900"}`,children:G}),r.jsxs("div",{className:"space-y-1",children:[ee.slice(0,3).map(X=>r.jsxs("button",{onClick:()=>j(X),className:`w-full text-left px-2 py-1 rounded text-xs truncate transition-all ${X.is_emergency?"bg-yellow-500 text-black hover:bg-yellow-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[Ms(X.start_at)," - ",X.service_name||"Service"]},X.id)),ee.length>3&&r.jsxs("div",{className:"text-xs text-gray-500 px-2",children:["+",ee.length-3," more"]})]})]},H)})})]})},E=()=>{const L=Ux(new Date(o)),F=new Date(L.start_date),M=[];for(let W=0;W<7;W++){const P=new Date(F);P.setDate(P.getDate()+W),M.push(P.toISOString().split("T")[0])}const D=f?Array.from({length:f.end_hour-f.start_hour},(W,P)=>f.start_hour+P):Array.from({length:9},(W,P)=>9+P);return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-x-auto",children:r.jsxs("div",{className:"min-w-[800px]",children:[r.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-200",children:[r.jsx("div",{className:"py-3 px-2 text-xs font-semibold text-gray-600"}),M.map(W=>{const P=new Date(W),V=W===new Date().toISOString().split("T")[0];return r.jsxs("div",{className:`py-3 px-2 text-center border-l border-gray-200 ${V?"bg-blue-50":""}`,children:[r.jsx("div",{className:`text-xs font-semibold ${V?"text-blue-600":"text-gray-900"}`,children:P.toLocaleDateString("en-US",{weekday:"short"})}),r.jsx("div",{className:`text-sm ${V?"text-blue-600":"text-gray-600"}`,children:P.getDate()})]},W)})]}),D.map(W=>r.jsxs("div",{className:"grid grid-cols-8 border-b border-gray-100",children:[r.jsxs("div",{className:"py-2 px-2 text-xs text-gray-500 text-right",children:[W%12||12,":00 ",W<12?"AM":"PM"]}),M.map(P=>{const V=b.filter(K=>{const ne=new Date(K.start_at).toISOString().split("T")[0],G=new Date(K.start_at).getHours();return ne===P&&G===W});return r.jsx("div",{className:"border-l border-gray-100 p-1 min-h-[60px]",children:V.map(K=>r.jsxs("button",{onClick:()=>j(K),className:`w-full text-left px-2 py-1 rounded text-xs mb-1 transition-all ${K.is_emergency?"bg-yellow-500 text-black hover:bg-yellow-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:[r.jsx("div",{className:"font-medium truncate",children:K.service_name||"Service"}),r.jsx("div",{className:"text-xs opacity-90",children:Ms(K.start_at)})]},K.id))},`${P}-${W}`)})]},W))]})})},R=()=>{const L=f?Array.from({length:f.end_hour-f.start_hour},(F,M)=>f.start_hour+M):Array.from({length:9},(F,M)=>9+M);return r.jsx("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200",children:L.map(F=>{const M=b.filter(D=>new Date(D.start_at).getHours()===F);return r.jsxs("div",{className:"flex border-b border-gray-100",children:[r.jsxs("div",{className:"w-24 py-4 px-4 text-sm text-gray-500 text-right border-r border-gray-100",children:[F%12||12,":00 ",F<12?"AM":"PM"]}),r.jsx("div",{className:"flex-1 p-2 min-h-[80px]",children:M.map(D=>r.jsx("button",{onClick:()=>j(D),className:`w-full text-left px-4 py-3 rounded-lg mb-2 transition-all ${D.is_emergency?"bg-yellow-500 text-black hover:bg-yellow-600":"bg-blue-500 text-white hover:bg-blue-600"}`,children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{children:[r.jsx("div",{className:"font-semibold",children:D.service_name||"Service"}),r.jsxs("div",{className:"text-sm opacity-90",children:[Ms(D.start_at)," - ",Ms(D.end_at)]})]}),D.is_emergency&&r.jsx("span",{className:"flex items-center text-xs font-semibold",children:" Emergency"})]})},D.id))})]},F)})})},I=()=>{const L={};b.forEach(M=>{const D=new Date(M.start_at).toISOString().split("T")[0];L[D]||(L[D]=[]),L[D].push(M)});const F=Object.keys(L).sort();return F.length===0?r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 p-8 text-center",children:[r.jsx("svg",{className:"mx-auto h-12 w-12 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M8 7V3m8 4V3m-9 8h10M5 21h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v12a2 2 0 002 2z"})}),r.jsx("p",{className:"mt-2 text-sm text-gray-600",children:"No bookings scheduled for this period"})]}):r.jsx("div",{className:"space-y-6",children:F.map(M=>{const D=L[M],W=M===new Date().toISOString().split("T")[0];return r.jsxs("div",{className:"bg-white rounded-lg shadow-sm border border-gray-200 overflow-hidden",children:[r.jsx("div",{className:`px-4 py-3 border-b border-gray-200 ${W?"bg-blue-50":"bg-gray-50"}`,children:r.jsxs("h3",{className:`text-sm font-semibold ${W?"text-blue-900":"text-gray-900"}`,children:[vc(M),W&&r.jsx("span",{className:"ml-2 text-blue-600",children:" Today"})]})}),r.jsx("div",{className:"divide-y divide-gray-100",children:D.map(P=>r.jsx("button",{onClick:()=>j(P),className:"w-full text-left px-4 py-3 hover:bg-gray-50 transition-colors",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsxs("div",{className:"flex-1",children:[r.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[r.jsx("span",{className:`inline-flex items-center px-2 py-0.5 rounded text-xs font-medium ${n3(P.status)}`,children:P.status}),P.is_emergency&&r.jsx("span",{className:"inline-flex items-center px-2 py-0.5 rounded bg-yellow-500 text-black text-xs font-semibold",children:" Emergency"})]}),r.jsx("div",{className:"text-sm font-medium text-gray-900",children:P.service_name||"Service"}),r.jsxs("div",{className:"text-xs text-gray-600 mt-1",children:[Ms(P.start_at)," - ",Ms(P.end_at)]})]}),r.jsx("svg",{className:"w-5 h-5 text-gray-400",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M9 5l7 7-7 7"})})]})},P.id))})]},M)})})},O=()=>{if(!c)return null;const{booking:L}=c;return r.jsxs("div",{className:"fixed inset-0 z-50 overflow-y-auto",onClick:_,children:[r.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 transition-opacity"}),r.jsx("div",{className:"flex min-h-full items-center justify-center p-4",children:r.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl max-w-lg w-full",onClick:F=>F.stopPropagation(),children:[r.jsx("div",{className:"px-6 py-4 border-b border-gray-200",children:r.jsxs("div",{className:"flex items-center justify-between",children:[r.jsx("h3",{className:"text-lg font-semibold text-gray-900",children:"Booking Details"}),r.jsx("button",{onClick:_,className:"text-gray-400 hover:text-gray-600 transition-colors",children:r.jsx("svg",{className:"w-6 h-6",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M6 18L18 6M6 6l12 12"})})})]})}),r.jsxs("div",{className:"px-6 py-4 space-y-4",children:[r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Service"}),r.jsx("p",{className:"text-sm text-gray-900",children:L.service_name||"Service"})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Date & Time"}),r.jsx("p",{className:"text-sm text-gray-900",children:vc(new Date(L.start_at).toISOString().split("T")[0])}),r.jsxs("p",{className:"text-sm text-gray-600 mt-1",children:[Ms(L.start_at)," - ",Ms(L.end_at)]})]}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Status"}),r.jsx("span",{className:`inline-flex items-center px-3 py-1 rounded-full text-xs font-medium ${n3(L.status)}`,children:L.status})]}),L.is_emergency&&r.jsx("div",{className:"bg-yellow-50 border border-yellow-200 rounded-md p-3",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("span",{className:"text-yellow-500 text-lg mr-2",children:""}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-semibold text-yellow-900",children:"Emergency Booking"}),r.jsxs("p",{className:"text-xs text-yellow-700 mt-1",children:["Urgent fee: ",L.urgent_fee_pct,"%"]})]})]})}),r.jsxs("div",{children:[r.jsx("label",{className:"block text-xs font-semibold text-gray-500 uppercase mb-1",children:"Booking ID"}),r.jsx("p",{className:"text-xs font-mono text-gray-600",children:L.id})]})]}),r.jsx("div",{className:"px-6 py-4 bg-gray-50 border-t border-gray-200 rounded-b-lg",children:r.jsxs("div",{className:"flex space-x-3",children:[r.jsx(ie,{to:`/staff/jobs/${L.quote_id}`,className:"flex-1 bg-blue-600 text-white px-4 py-2 rounded-md text-sm font-medium text-center hover:bg-blue-700 transition-colors",children:"View Full Job"}),r.jsx("button",{onClick:_,className:"flex-1 bg-white border border-gray-300 text-gray-700 px-4 py-2 rounded-md text-sm font-medium hover:bg-gray-50 transition-colors",children:"Close"})]})})]})})]})};return r.jsxs(r.Fragment,{children:[r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsx("div",{className:"py-6",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[r.jsxs("div",{children:[r.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Calendar"}),r.jsx("p",{className:"mt-1 text-sm text-gray-600",children:"View and manage scheduled bookings"})]}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsxs("div",{className:"flex items-center space-x-4 text-xs",children:[r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-blue-500"}),r.jsx("span",{className:"text-gray-600",children:"Regular"})]}),r.jsxs("div",{className:"flex items-center space-x-1",children:[r.jsx("div",{className:"w-3 h-3 rounded bg-yellow-500"}),r.jsx("span",{className:"text-gray-600",children:"Emergency"})]})]}),r.jsxs(ie,{to:"/staff/jobs",className:"inline-flex items-center text-sm text-gray-600 hover:text-gray-900 transition-colors",children:[r.jsx("svg",{className:"w-4 h-4 mr-1",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M10 19l-7-7m0 0l7-7m-7 7h18"})}),"Back to Jobs"]})]})]})})})}),r.jsx("div",{className:"bg-white border-b border-gray-200",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-4",children:r.jsxs("div",{className:"flex flex-col sm:flex-row sm:items-center sm:justify-between space-y-4 sm:space-y-0",children:[T(),!u&&S()]})})}),r.jsxs("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-6",children:[g&&r.jsx("div",{className:"flex items-center justify-center py-12",children:r.jsxs("div",{className:"flex items-center space-x-2 text-gray-600",children:[r.jsxs("svg",{className:"animate-spin h-5 w-5",fill:"none",viewBox:"0 0 24 24",children:[r.jsx("circle",{className:"opacity-25",cx:"12",cy:"12",r:"10",stroke:"currentColor",strokeWidth:"4"}),r.jsx("path",{className:"opacity-75",fill:"currentColor",d:"M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"})]}),r.jsx("span",{className:"text-sm",children:"Loading calendar..."})]})}),x&&r.jsx("div",{className:"bg-red-50 border border-red-200 rounded-lg p-4",children:r.jsxs("div",{className:"flex items-start",children:[r.jsx("svg",{className:"w-5 h-5 text-red-500 mt-0.5 mr-3",fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:r.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M12 8v4m0 4h.01M21 12a9 9 0 11-18 0 9 9 0 0118 0z"})}),r.jsxs("div",{children:[r.jsx("p",{className:"text-sm font-medium text-red-800",children:"Failed to load calendar"}),r.jsx("p",{className:"text-xs text-red-700 mt-1",children:x instanceof Error?x.message:"An error occurred"}),r.jsx("button",{onClick:()=>p(),className:"mt-2 text-xs text-red-600 hover:text-red-500 font-medium",children:"Try again"})]})]})}),!g&&!x&&r.jsx(r.Fragment,{children:u?I():r.jsxs(r.Fragment,{children:[a==="month"&&A(),a==="week"&&E(),a==="day"&&R()]})})]})]}),c&&O()]})},Qbe=()=>{const e=ae(s=>s.authentication_state.current_user),t=ae(s=>s.logout_user),n=()=>{t()};return r.jsx(r.Fragment,{children:r.jsxs("div",{className:"min-h-screen bg-gray-50",children:[r.jsx("nav",{className:"bg-white shadow",children:r.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:r.jsxs("div",{className:"flex justify-between h-16",children:[r.jsx("div",{className:"flex items-center",children:r.jsx("h1",{className:"text-xl font-semibold text-gray-900",children:"Dashboard"})}),r.jsxs("div",{className:"flex items-center space-x-4",children:[r.jsx(ie,{to:"/profile",className:"text-gray-700 hover:text-gray-900 px-3 py-2 rounded-md text-sm font-medium transition-colors",children:"Profile"}),r.jsx("button",{onClick:n,className:"bg-red-600 text-white px-4 py-2 rounded-md text-sm font-medium hover:bg-red-700 transition-colors",children:"Sign out"})]})]})})}),r.jsx("main",{className:"max-w-7xl mx-auto py-6 sm:px-6 lg:px-8",children:r.jsx("div",{className:"px-4 py-6 sm:px-0",children:r.jsx("div",{className:"border-4 border-dashed border-gray-200 rounded-lg p-8",children:r.jsxs("div",{className:"text-center",children:[r.jsxs("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:["Welcome back, ",e==null?void 0:e.name,"!"]}),r.jsx("p",{className:"text-gray-600 mb-4",children:"This is your protected dashboard. You can only see this because you're authenticated."}),r.jsxs("div",{className:"bg-blue-50 border border-blue-200 rounded-md p-4",children:[r.jsxs("p",{className:"text-blue-700 text-sm",children:[r.jsx("strong",{children:"Email:"})," ",e==null?void 0:e.email]}),r.jsxs("p",{className:"text-blue-700 text-sm mt-1",children:[r.jsx("strong",{children:"User ID:"})," ",e==null?void 0:e.id]})]})]})})})})]})})},Re=({children:e,allowedRoles:t})=>{const{authentication_state:{authentication_status:n,current_user:s}}=ae(),a=Cs();if(!n.is_authenticated)return r.jsx(wh,{to:"/login",state:{from:a},replace:!0});if(t&&s&&!t.includes(s.role)){const i={ADMIN:"/admin/dashboard",STAFF:"/staff/dashboard",CUSTOMER:"/app/dashboard"};return r.jsx(wh,{to:i[s.role]||"/",replace:!0})}return r.jsx(r.Fragment,{children:e})},_m=({children:e})=>{const{authentication_state:{authentication_status:t,current_user:n}}=ae();if(t.is_authenticated&&n){const s={ADMIN:"/admin/dashboard",STAFF:"/staff/dashboard",CUSTOMER:"/app/dashboard"};return r.jsx(wh,{to:s[n.role]||"/app/dashboard",replace:!0})}return r.jsx(r.Fragment,{children:e})},Ybe=()=>{const{authentication_state:{authentication_status:e},check_auth_status:t}=ae();return k.useEffect(()=>{t()},[t]),e.is_loading?r.jsx("div",{className:"flex items-center justify-center h-screen",children:"Loading..."}):r.jsx(PM,{children:r.jsxs("div",{className:"flex flex-col min-h-screen",children:[e.is_authenticated?r.jsx(IR,{}):r.jsx(fR,{}),r.jsx("main",{className:"flex-grow",children:r.jsxs(jM,{children:[r.jsx(je,{path:"/",element:r.jsx(AI,{})}),r.jsx(je,{path:"/services",element:r.jsx(EI,{})}),r.jsx(je,{path:"/services/:slug",element:r.jsx(OI,{})}),r.jsx(je,{path:"/pricing",element:r.jsx(MI,{})}),r.jsx(je,{path:"/contact",element:r.jsx(RI,{})}),r.jsx(je,{path:"/gallery",element:r.jsx(FI,{})}),r.jsx(je,{path:"/about",element:r.jsx(zI,{})}),r.jsx(je,{path:"/case-study/:slug",element:r.jsx(WI,{})}),r.jsx(je,{path:"/policies",element:r.jsx(HI,{})}),r.jsx(je,{path:"/products",element:r.jsx(YI,{})}),r.jsx(je,{path:"/products/:slug",element:r.jsx(hR,{children:r.jsx(yD,{})})}),r.jsx(je,{path:"/cart",element:r.jsx(jD,{})}),r.jsx(je,{path:"/checkout",element:r.jsx(aF,{})}),r.jsx(je,{path:"/order-confirmation/:id",element:r.jsx(oF,{})}),r.jsx(je,{path:"/quote/start",element:r.jsx(KI,{})}),r.jsx(je,{path:"/quote/guest",element:r.jsx(nN,{})}),r.jsx(je,{path:"/quote/guest/new",element:r.jsx(nN,{})}),r.jsx(je,{path:"/quote/guest/confirmation/:quoteId",element:r.jsx(GI,{})}),r.jsx(je,{path:"/quote/guest/view/:token",element:r.jsx(sN,{})}),r.jsx(je,{path:"/quote/guest/:token",element:r.jsx(sN,{})}),r.jsx(je,{path:"/login",element:r.jsx(_m,{children:r.jsx(FR,{})})}),r.jsx(je,{path:"/register",element:r.jsx(_m,{children:r.jsx(BR,{})})}),r.jsx(je,{path:"/forgot-password",element:r.jsx(_m,{children:r.jsx(zR,{})})}),r.jsx(je,{path:"/reset-password",element:r.jsx(_m,{children:r.jsx(qR,{})})}),r.jsx(je,{path:"/app/dashboard",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx(uF,{})})}),r.jsx(je,{path:"/app/quotes",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx(pF,{})})}),r.jsx(je,{path:"/app/quotes/new",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx(fF,{})})}),r.jsx(je,{path:"/app/quotes/:id",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx(NF,{})})}),r.jsx(je,{path:"/app/orders",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx(_F,{})})}),r.jsx(je,{path:"/app/orders/:id",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx(kF,{})})}),r.jsx(je,{path:"/app/bookings",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx(CF,{})})}),r.jsx(je,{path:"/app/bookings/calendar",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx(OF,{})})}),r.jsx(je,{path:"/app/payment/:orderId",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx($F,{})})}),r.jsx(je,{path:"/app/settings",element:r.jsx(Re,{allowedRoles:["CUSTOMER"],children:r.jsx(RF,{})})}),r.jsx(je,{path:"/admin/dashboard",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(qF,{})})}),r.jsx(je,{path:"/admin/users",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(HF,{})})}),r.jsx(je,{path:"/admin/services",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(KF,{})})}),r.jsx(je,{path:"/admin/services/new",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(yN,{})})}),r.jsx(je,{path:"/admin/services/:id",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(yN,{})})}),r.jsx(je,{path:"/admin/products",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(JV,{})})}),r.jsx(je,{path:"/admin/orders",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(YF,{})})}),r.jsx(je,{path:"/admin/orders/:id",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(XF,{})})}),r.jsx(je,{path:"/admin/quotes",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(JF,{})})}),r.jsx(je,{path:"/admin/quotes/:quote_id",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(vN,{})})}),r.jsx(je,{path:"/admin/quotes/:quote_id/finalize",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(vN,{})})}),r.jsx(je,{path:"/admin/gallery",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(iB,{})})}),r.jsx(je,{path:"/admin/tiers",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(EV,{})})}),r.jsx(je,{path:"/admin/tiers/new",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(i_,{})})}),r.jsx(je,{path:"/admin/tiers/:tier_id",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(i_,{})})}),r.jsx(je,{path:"/admin/content",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(BV,{})})}),r.jsx(je,{path:"/admin/pricing",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(zV,{})})}),r.jsx(je,{path:"/admin/calendar",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(YV,{})})}),r.jsx(je,{path:"/admin/settings",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(XV,{})})}),r.jsx(je,{path:"/admin/inventory",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(ZV,{})})}),r.jsx(je,{path:"/admin/procurement",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(eH,{})})}),r.jsx(je,{path:"/admin/analytics",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(ybe,{})})}),r.jsx(je,{path:"/admin/consumption",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(bbe,{})})}),r.jsx(je,{path:"/admin/sla",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(jbe,{})})}),r.jsx(je,{path:"/admin/b2b",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(wbe,{})})}),r.jsx(je,{path:"/admin/b2b/:id",element:r.jsx(Re,{allowedRoles:["ADMIN"],children:r.jsx(Obe,{})})}),r.jsx(je,{path:"/staff/dashboard",element:r.jsx(Re,{allowedRoles:["STAFF"],children:r.jsx(Lbe,{})})}),r.jsx(je,{path:"/staff/jobs",element:r.jsx(Re,{allowedRoles:["STAFF"],children:r.jsx(Rbe,{})})}),r.jsx(je,{path:"/staff/jobs/:id",element:r.jsx(Re,{allowedRoles:["STAFF"],children:r.jsx(Vbe,{})})}),r.jsx(je,{path:"/staff/calendar",element:r.jsx(Re,{allowedRoles:["STAFF"],children:r.jsx(Gbe,{})})}),r.jsx(je,{path:"/dashboard",element:r.jsx(Re,{children:r.jsx(Qbe,{})})}),r.jsx(je,{path:"*",element:r.jsx(wh,{to:"/",replace:!0})})]})}),r.jsx(DR,{})]})})},Xbe=new hI,Jbe=()=>r.jsx(pI,{client:Xbe,children:r.jsx(Ybe,{})});AS(document.getElementById("root")).render(r.jsx(Jbe,{}));
